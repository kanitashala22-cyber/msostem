const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/javascript-DoynfNsg.js","assets/typescript-BDiYt-WD.js"])))=>i.map(i=>d[i]);
var y_e=Object.defineProperty;var NG=n=>{throw TypeError(n)};var S_e=(n,e,t)=>e in n?y_e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var hn=(n,e,t)=>S_e(n,typeof e!="symbol"?e+"":e,t),FO=(n,e,t)=>e.has(n)||NG("Cannot "+t);var ie=(n,e,t)=>(FO(n,e,"read from private field"),t?t.call(n):e.get(n)),Nt=(n,e,t)=>e.has(n)?NG("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ge=(n,e,t,i)=>(FO(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),ai=(n,e,t)=>(FO(n,e,"access private method"),t);var gD=(n,e,t,i)=>({set _(s){Ge(n,e,s,t)},get _(){return ie(n,e,i)}});function x_e(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function vne(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wne={exports:{}},vR={},Cne={exports:{}},ii={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL=Symbol.for("react.element"),k_e=Symbol.for("react.portal"),L_e=Symbol.for("react.fragment"),D_e=Symbol.for("react.strict_mode"),E_e=Symbol.for("react.profiler"),N_e=Symbol.for("react.provider"),I_e=Symbol.for("react.context"),T_e=Symbol.for("react.forward_ref"),P_e=Symbol.for("react.suspense"),M_e=Symbol.for("react.memo"),R_e=Symbol.for("react.lazy"),IG=Symbol.iterator;function A_e(n){return n===null||typeof n!="object"?null:(n=IG&&n[IG]||n["@@iterator"],typeof n=="function"?n:null)}var yne={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sne=Object.assign,xne={};function Uy(n,e,t){this.props=n,this.context=e,this.refs=xne,this.updater=t||yne}Uy.prototype.isReactComponent={};Uy.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Uy.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function kne(){}kne.prototype=Uy.prototype;function L6(n,e,t){this.props=n,this.context=e,this.refs=xne,this.updater=t||yne}var D6=L6.prototype=new kne;D6.constructor=L6;Sne(D6,Uy.prototype);D6.isPureReactComponent=!0;var TG=Array.isArray,Lne=Object.prototype.hasOwnProperty,E6={current:null},Dne={key:!0,ref:!0,__self:!0,__source:!0};function Ene(n,e,t){var i,s={},o=null,r=null;if(e!=null)for(i in e.ref!==void 0&&(r=e.ref),e.key!==void 0&&(o=""+e.key),e)Lne.call(e,i)&&!Dne.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:mL,type:n,key:o,ref:r,props:s,_owner:E6.current}}function O_e(n,e){return{$$typeof:mL,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function N6(n){return typeof n=="object"&&n!==null&&n.$$typeof===mL}function F_e(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var PG=/\/+/g;function WO(n,e){return typeof n=="object"&&n!==null&&n.key!=null?F_e(""+n.key):e.toString(36)}function XE(n,e,t,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var r=!1;if(n===null)r=!0;else switch(o){case"string":case"number":r=!0;break;case"object":switch(n.$$typeof){case mL:case k_e:r=!0}}if(r)return r=n,s=s(r),n=i===""?"."+WO(r,0):i,TG(s)?(t="",n!=null&&(t=n.replace(PG,"$&/")+"/"),XE(s,e,t,"",function(c){return c})):s!=null&&(N6(s)&&(s=O_e(s,t+(!s.key||r&&r.key===s.key?"":(""+s.key).replace(PG,"$&/")+"/")+n)),e.push(s)),1;if(r=0,i=i===""?".":i+":",TG(n))for(var a=0;a<n.length;a++){o=n[a];var l=i+WO(o,a);r+=XE(o,e,t,l,s)}else if(l=A_e(n),typeof l=="function")for(n=l.call(n),a=0;!(o=n.next()).done;)o=o.value,l=i+WO(o,a++),r+=XE(o,e,t,l,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return r}function mD(n,e,t){if(n==null)return n;var i=[],s=0;return XE(n,i,"","",function(o){return e.call(t,o,s++)}),i}function W_e(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Lr={current:null},JE={transition:null},B_e={ReactCurrentDispatcher:Lr,ReactCurrentBatchConfig:JE,ReactCurrentOwner:E6};function Nne(){throw Error("act(...) is not supported in production builds of React.")}ii.Children={map:mD,forEach:function(n,e,t){mD(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return mD(n,function(){e++}),e},toArray:function(n){return mD(n,function(e){return e})||[]},only:function(n){if(!N6(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ii.Component=Uy;ii.Fragment=L_e;ii.Profiler=E_e;ii.PureComponent=L6;ii.StrictMode=D_e;ii.Suspense=P_e;ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B_e;ii.act=Nne;ii.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Sne({},n.props),s=n.key,o=n.ref,r=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,r=E6.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Lne.call(e,l)&&!Dne.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:mL,type:n.type,key:s,ref:o,props:i,_owner:r}};ii.createContext=function(n){return n={$$typeof:I_e,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:N_e,_context:n},n.Consumer=n};ii.createElement=Ene;ii.createFactory=function(n){var e=Ene.bind(null,n);return e.type=n,e};ii.createRef=function(){return{current:null}};ii.forwardRef=function(n){return{$$typeof:T_e,render:n}};ii.isValidElement=N6;ii.lazy=function(n){return{$$typeof:R_e,_payload:{_status:-1,_result:n},_init:W_e}};ii.memo=function(n,e){return{$$typeof:M_e,type:n,compare:e===void 0?null:e}};ii.startTransition=function(n){var e=JE.transition;JE.transition={};try{n()}finally{JE.transition=e}};ii.unstable_act=Nne;ii.useCallback=function(n,e){return Lr.current.useCallback(n,e)};ii.useContext=function(n){return Lr.current.useContext(n)};ii.useDebugValue=function(){};ii.useDeferredValue=function(n){return Lr.current.useDeferredValue(n)};ii.useEffect=function(n,e){return Lr.current.useEffect(n,e)};ii.useId=function(){return Lr.current.useId()};ii.useImperativeHandle=function(n,e,t){return Lr.current.useImperativeHandle(n,e,t)};ii.useInsertionEffect=function(n,e){return Lr.current.useInsertionEffect(n,e)};ii.useLayoutEffect=function(n,e){return Lr.current.useLayoutEffect(n,e)};ii.useMemo=function(n,e){return Lr.current.useMemo(n,e)};ii.useReducer=function(n,e,t){return Lr.current.useReducer(n,e,t)};ii.useRef=function(n){return Lr.current.useRef(n)};ii.useState=function(n){return Lr.current.useState(n)};ii.useSyncExternalStore=function(n,e,t){return Lr.current.useSyncExternalStore(n,e,t)};ii.useTransition=function(){return Lr.current.useTransition()};ii.version="18.3.1";Cne.exports=ii;var P=Cne.exports;const af=vne(P),Ine=x_e({__proto__:null,default:af},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_e=P,j_e=Symbol.for("react.element"),V_e=Symbol.for("react.fragment"),z_e=Object.prototype.hasOwnProperty,U_e=H_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$_e={key:!0,ref:!0,__self:!0,__source:!0};function Tne(n,e,t){var i,s={},o=null,r=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(r=e.ref);for(i in e)z_e.call(e,i)&&!$_e.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:j_e,type:n,key:o,ref:r,props:s,_owner:U_e.current}}vR.Fragment=V_e;vR.jsx=Tne;vR.jsxs=Tne;wne.exports=vR;var C=wne.exports,Pne={exports:{}},Xa={},Mne={exports:{}},Rne={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,J){var ge=q.length;q.push(J);e:for(;0<ge;){var be=ge-1>>>1,Qe=q[be];if(0<s(Qe,J))q[be]=J,q[ge]=Qe,ge=be;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var J=q[0],ge=q.pop();if(ge!==J){q[0]=ge;e:for(var be=0,Qe=q.length,Me=Qe>>>1;be<Me;){var Ze=2*(be+1)-1,at=q[Ze],Et=Ze+1,Ve=q[Et];if(0>s(at,ge))Et<Qe&&0>s(Ve,at)?(q[be]=Ve,q[Et]=ge,be=Et):(q[be]=at,q[Ze]=ge,be=Ze);else if(Et<Qe&&0>s(Ve,ge))q[be]=Ve,q[Et]=ge,be=Et;else break e}}return J}function s(q,J){var ge=q.sortIndex-J.sortIndex;return ge!==0?ge:q.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();n.unstable_now=function(){return r.now()-a}}var l=[],c=[],d=1,u=null,h=3,f=!1,g=!1,m=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(q){for(var J=t(c);J!==null;){if(J.callback===null)i(c);else if(J.startTime<=q)i(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(c)}}function y(q){if(m=!1,w(q),!g)if(t(l)!==null)g=!0,Z(S);else{var J=t(c);J!==null&&re(y,J.startTime-q)}}function S(q,J){g=!1,m&&(m=!1,b(D),D=-1),f=!0;var ge=h;try{for(w(J),u=t(l);u!==null&&(!(u.expirationTime>J)||q&&!O());){var be=u.callback;if(typeof be=="function"){u.callback=null,h=u.priorityLevel;var Qe=be(u.expirationTime<=J);J=n.unstable_now(),typeof Qe=="function"?u.callback=Qe:u===t(l)&&i(l),w(J)}else i(l);u=t(l)}if(u!==null)var Me=!0;else{var Ze=t(c);Ze!==null&&re(y,Ze.startTime-J),Me=!1}return Me}finally{u=null,h=ge,f=!1}}var x=!1,k=null,D=-1,N=5,R=-1;function O(){return!(n.unstable_now()-R<N)}function B(){if(k!==null){var q=n.unstable_now();R=q;var J=!0;try{J=k(!0,q)}finally{J?z():(x=!1,k=null)}}else x=!1}var z;if(typeof v=="function")z=function(){v(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,K=F.port2;F.port1.onmessage=B,z=function(){K.postMessage(null)}}else z=function(){_(B,0)};function Z(q){k=q,x||(x=!0,z())}function re(q,J){D=_(function(){q(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){g||f||(g=!0,Z(S))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(h){case 1:case 2:case 3:var J=3;break;default:J=h}var ge=h;h=J;try{return q()}finally{h=ge}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ge=h;h=q;try{return J()}finally{h=ge}},n.unstable_scheduleCallback=function(q,J,ge){var be=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?be+ge:be):ge=be,q){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ge+Qe,q={id:d++,callback:J,priorityLevel:q,startTime:ge,expirationTime:Qe,sortIndex:-1},ge>be?(q.sortIndex=ge,e(c,q),t(l)===null&&q===t(c)&&(m?(b(D),D=-1):m=!0,re(y,ge-be))):(q.sortIndex=Qe,e(l,q),g||f||(g=!0,Z(S))),q},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(q){var J=h;return function(){var ge=h;h=J;try{return q.apply(this,arguments)}finally{h=ge}}}})(Rne);Mne.exports=Rne;var q_e=Mne.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_e=P,Ua=q_e;function Ee(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ane=new Set,rx={};function Rb(n,e){qC(n,e),qC(n+"Capture",e)}function qC(n,e){for(rx[n]=e,n=0;n<e.length;n++)Ane.add(e[n])}var wh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A5=Object.prototype.hasOwnProperty,G_e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,MG={},RG={};function Y_e(n){return A5.call(RG,n)?!0:A5.call(MG,n)?!1:G_e.test(n)?RG[n]=!0:(MG[n]=!0,!1)}function Z_e(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q_e(n,e,t,i){if(e===null||typeof e>"u"||Z_e(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dr(n,e,t,i,s,o,r){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=r}var bo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){bo[n]=new Dr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];bo[e]=new Dr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){bo[n]=new Dr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){bo[n]=new Dr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){bo[n]=new Dr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){bo[n]=new Dr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){bo[n]=new Dr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){bo[n]=new Dr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){bo[n]=new Dr(n,5,!1,n.toLowerCase(),null,!1,!1)});var I6=/[\-:]([a-z])/g;function T6(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(I6,T6);bo[e]=new Dr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(I6,T6);bo[e]=new Dr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(I6,T6);bo[e]=new Dr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){bo[n]=new Dr(n,1,!1,n.toLowerCase(),null,!1,!1)});bo.xlinkHref=new Dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){bo[n]=new Dr(n,1,!1,n.toLowerCase(),null,!0,!0)});function P6(n,e,t,i){var s=bo.hasOwnProperty(e)?bo[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Q_e(e,t,s,i)&&(t=null),i||s===null?Y_e(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Hh=K_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pD=Symbol.for("react.element"),Hv=Symbol.for("react.portal"),jv=Symbol.for("react.fragment"),M6=Symbol.for("react.strict_mode"),O5=Symbol.for("react.profiler"),One=Symbol.for("react.provider"),Fne=Symbol.for("react.context"),R6=Symbol.for("react.forward_ref"),F5=Symbol.for("react.suspense"),W5=Symbol.for("react.suspense_list"),A6=Symbol.for("react.memo"),gf=Symbol.for("react.lazy"),Wne=Symbol.for("react.offscreen"),AG=Symbol.iterator;function D1(n){return n===null||typeof n!="object"?null:(n=AG&&n[AG]||n["@@iterator"],typeof n=="function"?n:null)}var Bn=Object.assign,BO;function f0(n){if(BO===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);BO=e&&e[1]||""}return`
`+BO+n}var HO=!1;function jO(n,e){if(!n||HO)return"";HO=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),r=s.length-1,a=o.length-1;1<=r&&0<=a&&s[r]!==o[a];)a--;for(;1<=r&&0<=a;r--,a--)if(s[r]!==o[a]){if(r!==1||a!==1)do if(r--,a--,0>a||s[r]!==o[a]){var l=`
`+s[r].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=r&&0<=a);break}}}finally{HO=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?f0(n):""}function X_e(n){switch(n.tag){case 5:return f0(n.type);case 16:return f0("Lazy");case 13:return f0("Suspense");case 19:return f0("SuspenseList");case 0:case 2:case 15:return n=jO(n.type,!1),n;case 11:return n=jO(n.type.render,!1),n;case 1:return n=jO(n.type,!0),n;default:return""}}function B5(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case jv:return"Fragment";case Hv:return"Portal";case O5:return"Profiler";case M6:return"StrictMode";case F5:return"Suspense";case W5:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Fne:return(n.displayName||"Context")+".Consumer";case One:return(n._context.displayName||"Context")+".Provider";case R6:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A6:return e=n.displayName||null,e!==null?e:B5(n.type)||"Memo";case gf:e=n._payload,n=n._init;try{return B5(n(e))}catch{}}return null}function J_e(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B5(e);case 8:return e===M6?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Og(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Bne(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ebe(n){var e=Bne(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(r){i=""+r,o.call(this,r)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function _D(n){n._valueTracker||(n._valueTracker=ebe(n))}function Hne(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=Bne(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function aI(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function H5(n,e){var t=e.checked;return Bn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function OG(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Og(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jne(n,e){e=e.checked,e!=null&&P6(n,"checked",e,!1)}function j5(n,e){jne(n,e);var t=Og(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?V5(n,e.type,t):e.hasOwnProperty("defaultValue")&&V5(n,e.type,Og(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function FG(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function V5(n,e,t){(e!=="number"||aI(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var g0=Array.isArray;function Bw(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Og(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function z5(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return Bn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function WG(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ee(92));if(g0(t)){if(1<t.length)throw Error(Ee(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Og(t)}}function Vne(n,e){var t=Og(e.value),i=Og(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function BG(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function zne(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function U5(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?zne(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var bD,Une=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(bD=bD||document.createElement("div"),bD.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bD.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ax(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var q0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tbe=["Webkit","ms","Moz","O"];Object.keys(q0).forEach(function(n){tbe.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),q0[e]=q0[n]})});function $ne(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||q0.hasOwnProperty(n)&&q0[n]?(""+e).trim():e+"px"}function qne(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=$ne(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var ibe=Bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $5(n,e){if(e){if(ibe[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function q5(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K5=null;function O6(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var G5=null,Hw=null,jw=null;function HG(n){if(n=bL(n)){if(typeof G5!="function")throw Error(Ee(280));var e=n.stateNode;e&&(e=xR(e),G5(n.stateNode,n.type,e))}}function Kne(n){Hw?jw?jw.push(n):jw=[n]:Hw=n}function Gne(){if(Hw){var n=Hw,e=jw;if(jw=Hw=null,HG(n),e)for(n=0;n<e.length;n++)HG(e[n])}}function Yne(n,e){return n(e)}function Zne(){}var VO=!1;function Qne(n,e,t){if(VO)return n(e,t);VO=!0;try{return Yne(n,e,t)}finally{VO=!1,(Hw!==null||jw!==null)&&(Zne(),Gne())}}function lx(n,e){var t=n.stateNode;if(t===null)return null;var i=xR(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ee(231,e,typeof t));return t}var Y5=!1;if(wh)try{var E1={};Object.defineProperty(E1,"passive",{get:function(){Y5=!0}}),window.addEventListener("test",E1,E1),window.removeEventListener("test",E1,E1)}catch{Y5=!1}function nbe(n,e,t,i,s,o,r,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var K0=!1,lI=null,cI=!1,Z5=null,sbe={onError:function(n){K0=!0,lI=n}};function obe(n,e,t,i,s,o,r,a,l){K0=!1,lI=null,nbe.apply(sbe,arguments)}function rbe(n,e,t,i,s,o,r,a,l){if(obe.apply(this,arguments),K0){if(K0){var c=lI;K0=!1,lI=null}else throw Error(Ee(198));cI||(cI=!0,Z5=c)}}function Ab(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Xne(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function jG(n){if(Ab(n)!==n)throw Error(Ee(188))}function abe(n){var e=n.alternate;if(!e){if(e=Ab(n),e===null)throw Error(Ee(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return jG(s),n;if(o===i)return jG(s),e;o=o.sibling}throw Error(Ee(188))}if(t.return!==i.return)t=s,i=o;else{for(var r=!1,a=s.child;a;){if(a===t){r=!0,t=s,i=o;break}if(a===i){r=!0,i=s,t=o;break}a=a.sibling}if(!r){for(a=o.child;a;){if(a===t){r=!0,t=o,i=s;break}if(a===i){r=!0,i=o,t=s;break}a=a.sibling}if(!r)throw Error(Ee(189))}}if(t.alternate!==i)throw Error(Ee(190))}if(t.tag!==3)throw Error(Ee(188));return t.stateNode.current===t?n:e}function Jne(n){return n=abe(n),n!==null?ese(n):null}function ese(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ese(n);if(e!==null)return e;n=n.sibling}return null}var tse=Ua.unstable_scheduleCallback,VG=Ua.unstable_cancelCallback,lbe=Ua.unstable_shouldYield,cbe=Ua.unstable_requestPaint,is=Ua.unstable_now,dbe=Ua.unstable_getCurrentPriorityLevel,F6=Ua.unstable_ImmediatePriority,ise=Ua.unstable_UserBlockingPriority,dI=Ua.unstable_NormalPriority,ube=Ua.unstable_LowPriority,nse=Ua.unstable_IdlePriority,wR=null,Hd=null;function hbe(n){if(Hd&&typeof Hd.onCommitFiberRoot=="function")try{Hd.onCommitFiberRoot(wR,n,void 0,(n.current.flags&128)===128)}catch{}}var yc=Math.clz32?Math.clz32:mbe,fbe=Math.log,gbe=Math.LN2;function mbe(n){return n>>>=0,n===0?32:31-(fbe(n)/gbe|0)|0}var vD=64,wD=4194304;function m0(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function uI(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,r=t&268435455;if(r!==0){var a=r&~s;a!==0?i=m0(a):(o&=r,o!==0&&(i=m0(o)))}else r=t&~s,r!==0?i=m0(r):o!==0&&(i=m0(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-yc(e),s=1<<t,i|=n[t],e&=~s;return i}function pbe(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _be(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var r=31-yc(o),a=1<<r,l=s[r];l===-1?(!(a&t)||a&i)&&(s[r]=pbe(a,e)):l<=e&&(n.expiredLanes|=a),o&=~a}}function Q5(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function sse(){var n=vD;return vD<<=1,!(vD&4194240)&&(vD=64),n}function zO(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function pL(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-yc(e),n[e]=t}function bbe(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-yc(t),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~o}}function W6(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-yc(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Xi=0;function ose(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var rse,B6,ase,lse,cse,X5=!1,CD=[],ng=null,sg=null,og=null,cx=new Map,dx=new Map,xf=[],vbe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zG(n,e){switch(n){case"focusin":case"focusout":ng=null;break;case"dragenter":case"dragleave":sg=null;break;case"mouseover":case"mouseout":og=null;break;case"pointerover":case"pointerout":cx.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dx.delete(e.pointerId)}}function N1(n,e,t,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=bL(e),e!==null&&B6(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function wbe(n,e,t,i,s){switch(e){case"focusin":return ng=N1(ng,n,e,t,i,s),!0;case"dragenter":return sg=N1(sg,n,e,t,i,s),!0;case"mouseover":return og=N1(og,n,e,t,i,s),!0;case"pointerover":var o=s.pointerId;return cx.set(o,N1(cx.get(o)||null,n,e,t,i,s)),!0;case"gotpointercapture":return o=s.pointerId,dx.set(o,N1(dx.get(o)||null,n,e,t,i,s)),!0}return!1}function dse(n){var e=wp(n.target);if(e!==null){var t=Ab(e);if(t!==null){if(e=t.tag,e===13){if(e=Xne(t),e!==null){n.blockedOn=e,cse(n.priority,function(){ase(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function eN(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=J5(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);K5=i,t.target.dispatchEvent(i),K5=null}else return e=bL(t),e!==null&&B6(e),n.blockedOn=t,!1;e.shift()}return!0}function UG(n,e,t){eN(n)&&t.delete(e)}function Cbe(){X5=!1,ng!==null&&eN(ng)&&(ng=null),sg!==null&&eN(sg)&&(sg=null),og!==null&&eN(og)&&(og=null),cx.forEach(UG),dx.forEach(UG)}function I1(n,e){n.blockedOn===e&&(n.blockedOn=null,X5||(X5=!0,Ua.unstable_scheduleCallback(Ua.unstable_NormalPriority,Cbe)))}function ux(n){function e(s){return I1(s,n)}if(0<CD.length){I1(CD[0],n);for(var t=1;t<CD.length;t++){var i=CD[t];i.blockedOn===n&&(i.blockedOn=null)}}for(ng!==null&&I1(ng,n),sg!==null&&I1(sg,n),og!==null&&I1(og,n),cx.forEach(e),dx.forEach(e),t=0;t<xf.length;t++)i=xf[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<xf.length&&(t=xf[0],t.blockedOn===null);)dse(t),t.blockedOn===null&&xf.shift()}var Vw=Hh.ReactCurrentBatchConfig,hI=!0;function ybe(n,e,t,i){var s=Xi,o=Vw.transition;Vw.transition=null;try{Xi=1,H6(n,e,t,i)}finally{Xi=s,Vw.transition=o}}function Sbe(n,e,t,i){var s=Xi,o=Vw.transition;Vw.transition=null;try{Xi=4,H6(n,e,t,i)}finally{Xi=s,Vw.transition=o}}function H6(n,e,t,i){if(hI){var s=J5(n,e,t,i);if(s===null)JO(n,e,i,fI,t),zG(n,i);else if(wbe(s,n,e,t,i))i.stopPropagation();else if(zG(n,i),e&4&&-1<vbe.indexOf(n)){for(;s!==null;){var o=bL(s);if(o!==null&&rse(o),o=J5(n,e,t,i),o===null&&JO(n,e,i,fI,t),o===s)break;s=o}s!==null&&i.stopPropagation()}else JO(n,e,i,null,t)}}var fI=null;function J5(n,e,t,i){if(fI=null,n=O6(i),n=wp(n),n!==null)if(e=Ab(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Xne(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return fI=n,null}function use(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dbe()){case F6:return 1;case ise:return 4;case dI:case ube:return 16;case nse:return 536870912;default:return 16}default:return 16}}var jf=null,j6=null,tN=null;function hse(){if(tN)return tN;var n,e=j6,t=e.length,i,s="value"in jf?jf.value:jf.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var r=t-n;for(i=1;i<=r&&e[t-i]===s[o-i];i++);return tN=s.slice(n,1<i?1-i:void 0)}function iN(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function yD(){return!0}function $G(){return!1}function Ja(n){function e(t,i,s,o,r){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=r,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yD:$G,this.isPropagationStopped=$G,this}return Bn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=yD)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=yD)},persist:function(){},isPersistent:yD}),e}var $y={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V6=Ja($y),_L=Bn({},$y,{view:0,detail:0}),xbe=Ja(_L),UO,$O,T1,CR=Bn({},_L,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z6,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==T1&&(T1&&n.type==="mousemove"?(UO=n.screenX-T1.screenX,$O=n.screenY-T1.screenY):$O=UO=0,T1=n),UO)},movementY:function(n){return"movementY"in n?n.movementY:$O}}),qG=Ja(CR),kbe=Bn({},CR,{dataTransfer:0}),Lbe=Ja(kbe),Dbe=Bn({},_L,{relatedTarget:0}),qO=Ja(Dbe),Ebe=Bn({},$y,{animationName:0,elapsedTime:0,pseudoElement:0}),Nbe=Ja(Ebe),Ibe=Bn({},$y,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tbe=Ja(Ibe),Pbe=Bn({},$y,{data:0}),KG=Ja(Pbe),Mbe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rbe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Abe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Obe(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Abe[n])?!!e[n]:!1}function z6(){return Obe}var Fbe=Bn({},_L,{key:function(n){if(n.key){var e=Mbe[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=iN(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Rbe[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z6,charCode:function(n){return n.type==="keypress"?iN(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?iN(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Wbe=Ja(Fbe),Bbe=Bn({},CR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GG=Ja(Bbe),Hbe=Bn({},_L,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z6}),jbe=Ja(Hbe),Vbe=Bn({},$y,{propertyName:0,elapsedTime:0,pseudoElement:0}),zbe=Ja(Vbe),Ube=Bn({},CR,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$be=Ja(Ube),qbe=[9,13,27,32],U6=wh&&"CompositionEvent"in window,G0=null;wh&&"documentMode"in document&&(G0=document.documentMode);var Kbe=wh&&"TextEvent"in window&&!G0,fse=wh&&(!U6||G0&&8<G0&&11>=G0),YG=" ",ZG=!1;function gse(n,e){switch(n){case"keyup":return qbe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mse(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Vv=!1;function Gbe(n,e){switch(n){case"compositionend":return mse(e);case"keypress":return e.which!==32?null:(ZG=!0,YG);case"textInput":return n=e.data,n===YG&&ZG?null:n;default:return null}}function Ybe(n,e){if(Vv)return n==="compositionend"||!U6&&gse(n,e)?(n=hse(),tN=j6=jf=null,Vv=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fse&&e.locale!=="ko"?null:e.data;default:return null}}var Zbe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QG(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Zbe[n.type]:e==="textarea"}function pse(n,e,t,i){Kne(i),e=gI(e,"onChange"),0<e.length&&(t=new V6("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Y0=null,hx=null;function Qbe(n){Dse(n,0)}function yR(n){var e=$v(n);if(Hne(e))return n}function Xbe(n,e){if(n==="change")return e}var _se=!1;if(wh){var KO;if(wh){var GO="oninput"in document;if(!GO){var XG=document.createElement("div");XG.setAttribute("oninput","return;"),GO=typeof XG.oninput=="function"}KO=GO}else KO=!1;_se=KO&&(!document.documentMode||9<document.documentMode)}function JG(){Y0&&(Y0.detachEvent("onpropertychange",bse),hx=Y0=null)}function bse(n){if(n.propertyName==="value"&&yR(hx)){var e=[];pse(e,hx,n,O6(n)),Qne(Qbe,e)}}function Jbe(n,e,t){n==="focusin"?(JG(),Y0=e,hx=t,Y0.attachEvent("onpropertychange",bse)):n==="focusout"&&JG()}function eve(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yR(hx)}function tve(n,e){if(n==="click")return yR(e)}function ive(n,e){if(n==="input"||n==="change")return yR(e)}function nve(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Pc=typeof Object.is=="function"?Object.is:nve;function fx(n,e){if(Pc(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!A5.call(e,s)||!Pc(n[s],e[s]))return!1}return!0}function eY(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function tY(n,e){var t=eY(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=eY(t)}}function vse(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?vse(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function wse(){for(var n=window,e=aI();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=aI(n.document)}return e}function $6(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function sve(n){var e=wse(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&vse(t.ownerDocument.documentElement,t)){if(i!==null&&$6(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=tY(t,o);var r=tY(t,i);s&&r&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==r.node||n.focusOffset!==r.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(r.node,r.offset)):(e.setEnd(r.node,r.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ove=wh&&"documentMode"in document&&11>=document.documentMode,zv=null,e3=null,Z0=null,t3=!1;function iY(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;t3||zv==null||zv!==aI(i)||(i=zv,"selectionStart"in i&&$6(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Z0&&fx(Z0,i)||(Z0=i,i=gI(e3,"onSelect"),0<i.length&&(e=new V6("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=zv)))}function SD(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Uv={animationend:SD("Animation","AnimationEnd"),animationiteration:SD("Animation","AnimationIteration"),animationstart:SD("Animation","AnimationStart"),transitionend:SD("Transition","TransitionEnd")},YO={},Cse={};wh&&(Cse=document.createElement("div").style,"AnimationEvent"in window||(delete Uv.animationend.animation,delete Uv.animationiteration.animation,delete Uv.animationstart.animation),"TransitionEvent"in window||delete Uv.transitionend.transition);function SR(n){if(YO[n])return YO[n];if(!Uv[n])return n;var e=Uv[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Cse)return YO[n]=e[t];return n}var yse=SR("animationend"),Sse=SR("animationiteration"),xse=SR("animationstart"),kse=SR("transitionend"),Lse=new Map,nY="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cm(n,e){Lse.set(n,e),Rb(e,[n])}for(var ZO=0;ZO<nY.length;ZO++){var QO=nY[ZO],rve=QO.toLowerCase(),ave=QO[0].toUpperCase()+QO.slice(1);cm(rve,"on"+ave)}cm(yse,"onAnimationEnd");cm(Sse,"onAnimationIteration");cm(xse,"onAnimationStart");cm("dblclick","onDoubleClick");cm("focusin","onFocus");cm("focusout","onBlur");cm(kse,"onTransitionEnd");qC("onMouseEnter",["mouseout","mouseover"]);qC("onMouseLeave",["mouseout","mouseover"]);qC("onPointerEnter",["pointerout","pointerover"]);qC("onPointerLeave",["pointerout","pointerover"]);Rb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var p0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lve=new Set("cancel close invalid load scroll toggle".split(" ").concat(p0));function sY(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,rbe(i,e,void 0,n),n.currentTarget=null}function Dse(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var r=i.length-1;0<=r;r--){var a=i[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break e;sY(s,a,c),o=l}else for(r=0;r<i.length;r++){if(a=i[r],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break e;sY(s,a,c),o=l}}}if(cI)throw n=Z5,cI=!1,Z5=null,n}function bn(n,e){var t=e[r3];t===void 0&&(t=e[r3]=new Set);var i=n+"__bubble";t.has(i)||(Ese(e,n,2,!1),t.add(i))}function XO(n,e,t){var i=0;e&&(i|=4),Ese(t,n,i,e)}var xD="_reactListening"+Math.random().toString(36).slice(2);function gx(n){if(!n[xD]){n[xD]=!0,Ane.forEach(function(t){t!=="selectionchange"&&(lve.has(t)||XO(t,!1,n),XO(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[xD]||(e[xD]=!0,XO("selectionchange",!1,e))}}function Ese(n,e,t,i){switch(use(e)){case 1:var s=ybe;break;case 4:s=Sbe;break;default:s=H6}t=s.bind(null,e,t,n),s=void 0,!Y5||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function JO(n,e,t,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(r===4)for(r=i.return;r!==null;){var l=r.tag;if((l===3||l===4)&&(l=r.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;r=r.return}for(;a!==null;){if(r=wp(a),r===null)return;if(l=r.tag,l===5||l===6){i=o=r;continue e}a=a.parentNode}}i=i.return}Qne(function(){var c=o,d=O6(t),u=[];e:{var h=Lse.get(n);if(h!==void 0){var f=V6,g=n;switch(n){case"keypress":if(iN(t)===0)break e;case"keydown":case"keyup":f=Wbe;break;case"focusin":g="focus",f=qO;break;case"focusout":g="blur",f=qO;break;case"beforeblur":case"afterblur":f=qO;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=qG;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Lbe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=jbe;break;case yse:case Sse:case xse:f=Nbe;break;case kse:f=zbe;break;case"scroll":f=xbe;break;case"wheel":f=$be;break;case"copy":case"cut":case"paste":f=Tbe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=GG}var m=(e&4)!==0,_=!m&&n==="scroll",b=m?h!==null?h+"Capture":null:h;m=[];for(var v=c,w;v!==null;){w=v;var y=w.stateNode;if(w.tag===5&&y!==null&&(w=y,b!==null&&(y=lx(v,b),y!=null&&m.push(mx(v,y,w)))),_)break;v=v.return}0<m.length&&(h=new f(h,g,null,t,d),u.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",h&&t!==K5&&(g=t.relatedTarget||t.fromElement)&&(wp(g)||g[Ch]))break e;if((f||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=t.relatedTarget||t.toElement,f=c,g=g?wp(g):null,g!==null&&(_=Ab(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(m=qG,y="onMouseLeave",b="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(m=GG,y="onPointerLeave",b="onPointerEnter",v="pointer"),_=f==null?h:$v(f),w=g==null?h:$v(g),h=new m(y,v+"leave",f,t,d),h.target=_,h.relatedTarget=w,y=null,wp(d)===c&&(m=new m(b,v+"enter",g,t,d),m.target=w,m.relatedTarget=_,y=m),_=y,f&&g)t:{for(m=f,b=g,v=0,w=m;w;w=ov(w))v++;for(w=0,y=b;y;y=ov(y))w++;for(;0<v-w;)m=ov(m),v--;for(;0<w-v;)b=ov(b),w--;for(;v--;){if(m===b||b!==null&&m===b.alternate)break t;m=ov(m),b=ov(b)}m=null}else m=null;f!==null&&oY(u,h,f,m,!1),g!==null&&_!==null&&oY(u,_,g,m,!0)}}e:{if(h=c?$v(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=Xbe;else if(QG(h))if(_se)S=ive;else{S=eve;var x=Jbe}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=tve);if(S&&(S=S(n,c))){pse(u,S,t,d);break e}x&&x(n,h,c),n==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&V5(h,"number",h.value)}switch(x=c?$v(c):window,n){case"focusin":(QG(x)||x.contentEditable==="true")&&(zv=x,e3=c,Z0=null);break;case"focusout":Z0=e3=zv=null;break;case"mousedown":t3=!0;break;case"contextmenu":case"mouseup":case"dragend":t3=!1,iY(u,t,d);break;case"selectionchange":if(ove)break;case"keydown":case"keyup":iY(u,t,d)}var k;if(U6)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Vv?gse(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(fse&&t.locale!=="ko"&&(Vv||D!=="onCompositionStart"?D==="onCompositionEnd"&&Vv&&(k=hse()):(jf=d,j6="value"in jf?jf.value:jf.textContent,Vv=!0)),x=gI(c,D),0<x.length&&(D=new KG(D,n,null,t,d),u.push({event:D,listeners:x}),k?D.data=k:(k=mse(t),k!==null&&(D.data=k)))),(k=Kbe?Gbe(n,t):Ybe(n,t))&&(c=gI(c,"onBeforeInput"),0<c.length&&(d=new KG("onBeforeInput","beforeinput",null,t,d),u.push({event:d,listeners:c}),d.data=k))}Dse(u,e)})}function mx(n,e,t){return{instance:n,listener:e,currentTarget:t}}function gI(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=lx(n,t),o!=null&&i.unshift(mx(n,o,s)),o=lx(n,e),o!=null&&i.push(mx(n,o,s))),n=n.return}return i}function ov(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function oY(n,e,t,i,s){for(var o=e._reactName,r=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=lx(t,o),l!=null&&r.unshift(mx(t,l,a))):s||(l=lx(t,o),l!=null&&r.push(mx(t,l,a)))),t=t.return}r.length!==0&&n.push({event:e,listeners:r})}var cve=/\r\n?/g,dve=/\u0000|\uFFFD/g;function rY(n){return(typeof n=="string"?n:""+n).replace(cve,`
`).replace(dve,"")}function kD(n,e,t){if(e=rY(e),rY(n)!==e&&t)throw Error(Ee(425))}function mI(){}var i3=null,n3=null;function s3(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var o3=typeof setTimeout=="function"?setTimeout:void 0,uve=typeof clearTimeout=="function"?clearTimeout:void 0,aY=typeof Promise=="function"?Promise:void 0,hve=typeof queueMicrotask=="function"?queueMicrotask:typeof aY<"u"?function(n){return aY.resolve(null).then(n).catch(fve)}:o3;function fve(n){setTimeout(function(){throw n})}function eF(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),ux(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);ux(e)}function rg(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function lY(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var qy=Math.random().toString(36).slice(2),Id="__reactFiber$"+qy,px="__reactProps$"+qy,Ch="__reactContainer$"+qy,r3="__reactEvents$"+qy,gve="__reactListeners$"+qy,mve="__reactHandles$"+qy;function wp(n){var e=n[Id];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ch]||t[Id]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=lY(n);n!==null;){if(t=n[Id])return t;n=lY(n)}return e}n=t,t=n.parentNode}return null}function bL(n){return n=n[Id]||n[Ch],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function $v(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ee(33))}function xR(n){return n[px]||null}var a3=[],qv=-1;function dm(n){return{current:n}}function wn(n){0>qv||(n.current=a3[qv],a3[qv]=null,qv--)}function gn(n,e){qv++,a3[qv]=n.current,n.current=e}var Fg={},Uo=dm(Fg),sa=dm(!1),Z_=Fg;function KC(n,e){var t=n.type.contextTypes;if(!t)return Fg;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function oa(n){return n=n.childContextTypes,n!=null}function pI(){wn(sa),wn(Uo)}function cY(n,e,t){if(Uo.current!==Fg)throw Error(Ee(168));gn(Uo,e),gn(sa,t)}function Nse(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Ee(108,J_e(n)||"Unknown",s));return Bn({},t,i)}function _I(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Fg,Z_=Uo.current,gn(Uo,n),gn(sa,sa.current),!0}function dY(n,e,t){var i=n.stateNode;if(!i)throw Error(Ee(169));t?(n=Nse(n,e,Z_),i.__reactInternalMemoizedMergedChildContext=n,wn(sa),wn(Uo),gn(Uo,n)):wn(sa),gn(sa,t)}var Wu=null,kR=!1,tF=!1;function Ise(n){Wu===null?Wu=[n]:Wu.push(n)}function pve(n){kR=!0,Ise(n)}function um(){if(!tF&&Wu!==null){tF=!0;var n=0,e=Xi;try{var t=Wu;for(Xi=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Wu=null,kR=!1}catch(s){throw Wu!==null&&(Wu=Wu.slice(n+1)),tse(F6,um),s}finally{Xi=e,tF=!1}}return null}var Kv=[],Gv=0,bI=null,vI=0,pl=[],_l=0,Q_=null,Yu=1,Zu="";function Hm(n,e){Kv[Gv++]=vI,Kv[Gv++]=bI,bI=n,vI=e}function Tse(n,e,t){pl[_l++]=Yu,pl[_l++]=Zu,pl[_l++]=Q_,Q_=n;var i=Yu;n=Zu;var s=32-yc(i)-1;i&=~(1<<s),t+=1;var o=32-yc(e)+s;if(30<o){var r=s-s%5;o=(i&(1<<r)-1).toString(32),i>>=r,s-=r,Yu=1<<32-yc(e)+s|t<<s|i,Zu=o+n}else Yu=1<<o|t<<s|i,Zu=n}function q6(n){n.return!==null&&(Hm(n,1),Tse(n,1,0))}function K6(n){for(;n===bI;)bI=Kv[--Gv],Kv[Gv]=null,vI=Kv[--Gv],Kv[Gv]=null;for(;n===Q_;)Q_=pl[--_l],pl[_l]=null,Zu=pl[--_l],pl[_l]=null,Yu=pl[--_l],pl[_l]=null}var Ba=null,Oa=null,Sn=!1,uc=null;function Pse(n,e){var t=yl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function uY(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ba=n,Oa=rg(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ba=n,Oa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Q_!==null?{id:Yu,overflow:Zu}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=yl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ba=n,Oa=null,!0):!1;default:return!1}}function l3(n){return(n.mode&1)!==0&&(n.flags&128)===0}function c3(n){if(Sn){var e=Oa;if(e){var t=e;if(!uY(n,e)){if(l3(n))throw Error(Ee(418));e=rg(t.nextSibling);var i=Ba;e&&uY(n,e)?Pse(i,t):(n.flags=n.flags&-4097|2,Sn=!1,Ba=n)}}else{if(l3(n))throw Error(Ee(418));n.flags=n.flags&-4097|2,Sn=!1,Ba=n}}}function hY(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ba=n}function LD(n){if(n!==Ba)return!1;if(!Sn)return hY(n),Sn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!s3(n.type,n.memoizedProps)),e&&(e=Oa)){if(l3(n))throw Mse(),Error(Ee(418));for(;e;)Pse(n,e),e=rg(e.nextSibling)}if(hY(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ee(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Oa=rg(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Oa=null}}else Oa=Ba?rg(n.stateNode.nextSibling):null;return!0}function Mse(){for(var n=Oa;n;)n=rg(n.nextSibling)}function GC(){Oa=Ba=null,Sn=!1}function G6(n){uc===null?uc=[n]:uc.push(n)}var _ve=Hh.ReactCurrentBatchConfig;function P1(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ee(309));var i=t.stateNode}if(!i)throw Error(Ee(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(r){var a=s.refs;r===null?delete a[o]:a[o]=r},e._stringRef=o,e)}if(typeof n!="string")throw Error(Ee(284));if(!t._owner)throw Error(Ee(290,n))}return n}function DD(n,e){throw n=Object.prototype.toString.call(e),Error(Ee(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function fY(n){var e=n._init;return e(n._payload)}function Rse(n){function e(b,v){if(n){var w=b.deletions;w===null?(b.deletions=[v],b.flags|=16):w.push(v)}}function t(b,v){if(!n)return null;for(;v!==null;)e(b,v),v=v.sibling;return null}function i(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function s(b,v){return b=dg(b,v),b.index=0,b.sibling=null,b}function o(b,v,w){return b.index=w,n?(w=b.alternate,w!==null?(w=w.index,w<v?(b.flags|=2,v):w):(b.flags|=2,v)):(b.flags|=1048576,v)}function r(b){return n&&b.alternate===null&&(b.flags|=2),b}function a(b,v,w,y){return v===null||v.tag!==6?(v=lF(w,b.mode,y),v.return=b,v):(v=s(v,w),v.return=b,v)}function l(b,v,w,y){var S=w.type;return S===jv?d(b,v,w.props.children,y,w.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gf&&fY(S)===v.type)?(y=s(v,w.props),y.ref=P1(b,v,w),y.return=b,y):(y=cN(w.type,w.key,w.props,null,b.mode,y),y.ref=P1(b,v,w),y.return=b,y)}function c(b,v,w,y){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=cF(w,b.mode,y),v.return=b,v):(v=s(v,w.children||[]),v.return=b,v)}function d(b,v,w,y,S){return v===null||v.tag!==7?(v=Wp(w,b.mode,y,S),v.return=b,v):(v=s(v,w),v.return=b,v)}function u(b,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=lF(""+v,b.mode,w),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case pD:return w=cN(v.type,v.key,v.props,null,b.mode,w),w.ref=P1(b,null,v),w.return=b,w;case Hv:return v=cF(v,b.mode,w),v.return=b,v;case gf:var y=v._init;return u(b,y(v._payload),w)}if(g0(v)||D1(v))return v=Wp(v,b.mode,w,null),v.return=b,v;DD(b,v)}return null}function h(b,v,w,y){var S=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(b,v,""+w,y);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pD:return w.key===S?l(b,v,w,y):null;case Hv:return w.key===S?c(b,v,w,y):null;case gf:return S=w._init,h(b,v,S(w._payload),y)}if(g0(w)||D1(w))return S!==null?null:d(b,v,w,y,null);DD(b,w)}return null}function f(b,v,w,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return b=b.get(w)||null,a(v,b,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pD:return b=b.get(y.key===null?w:y.key)||null,l(v,b,y,S);case Hv:return b=b.get(y.key===null?w:y.key)||null,c(v,b,y,S);case gf:var x=y._init;return f(b,v,w,x(y._payload),S)}if(g0(y)||D1(y))return b=b.get(w)||null,d(v,b,y,S,null);DD(v,y)}return null}function g(b,v,w,y){for(var S=null,x=null,k=v,D=v=0,N=null;k!==null&&D<w.length;D++){k.index>D?(N=k,k=null):N=k.sibling;var R=h(b,k,w[D],y);if(R===null){k===null&&(k=N);break}n&&k&&R.alternate===null&&e(b,k),v=o(R,v,D),x===null?S=R:x.sibling=R,x=R,k=N}if(D===w.length)return t(b,k),Sn&&Hm(b,D),S;if(k===null){for(;D<w.length;D++)k=u(b,w[D],y),k!==null&&(v=o(k,v,D),x===null?S=k:x.sibling=k,x=k);return Sn&&Hm(b,D),S}for(k=i(b,k);D<w.length;D++)N=f(k,b,D,w[D],y),N!==null&&(n&&N.alternate!==null&&k.delete(N.key===null?D:N.key),v=o(N,v,D),x===null?S=N:x.sibling=N,x=N);return n&&k.forEach(function(O){return e(b,O)}),Sn&&Hm(b,D),S}function m(b,v,w,y){var S=D1(w);if(typeof S!="function")throw Error(Ee(150));if(w=S.call(w),w==null)throw Error(Ee(151));for(var x=S=null,k=v,D=v=0,N=null,R=w.next();k!==null&&!R.done;D++,R=w.next()){k.index>D?(N=k,k=null):N=k.sibling;var O=h(b,k,R.value,y);if(O===null){k===null&&(k=N);break}n&&k&&O.alternate===null&&e(b,k),v=o(O,v,D),x===null?S=O:x.sibling=O,x=O,k=N}if(R.done)return t(b,k),Sn&&Hm(b,D),S;if(k===null){for(;!R.done;D++,R=w.next())R=u(b,R.value,y),R!==null&&(v=o(R,v,D),x===null?S=R:x.sibling=R,x=R);return Sn&&Hm(b,D),S}for(k=i(b,k);!R.done;D++,R=w.next())R=f(k,b,D,R.value,y),R!==null&&(n&&R.alternate!==null&&k.delete(R.key===null?D:R.key),v=o(R,v,D),x===null?S=R:x.sibling=R,x=R);return n&&k.forEach(function(B){return e(b,B)}),Sn&&Hm(b,D),S}function _(b,v,w,y){if(typeof w=="object"&&w!==null&&w.type===jv&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case pD:e:{for(var S=w.key,x=v;x!==null;){if(x.key===S){if(S=w.type,S===jv){if(x.tag===7){t(b,x.sibling),v=s(x,w.props.children),v.return=b,b=v;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===gf&&fY(S)===x.type){t(b,x.sibling),v=s(x,w.props),v.ref=P1(b,x,w),v.return=b,b=v;break e}t(b,x);break}else e(b,x);x=x.sibling}w.type===jv?(v=Wp(w.props.children,b.mode,y,w.key),v.return=b,b=v):(y=cN(w.type,w.key,w.props,null,b.mode,y),y.ref=P1(b,v,w),y.return=b,b=y)}return r(b);case Hv:e:{for(x=w.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){t(b,v.sibling),v=s(v,w.children||[]),v.return=b,b=v;break e}else{t(b,v);break}else e(b,v);v=v.sibling}v=cF(w,b.mode,y),v.return=b,b=v}return r(b);case gf:return x=w._init,_(b,v,x(w._payload),y)}if(g0(w))return g(b,v,w,y);if(D1(w))return m(b,v,w,y);DD(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(t(b,v.sibling),v=s(v,w),v.return=b,b=v):(t(b,v),v=lF(w,b.mode,y),v.return=b,b=v),r(b)):t(b,v)}return _}var YC=Rse(!0),Ase=Rse(!1),wI=dm(null),CI=null,Yv=null,Y6=null;function Z6(){Y6=Yv=CI=null}function Q6(n){var e=wI.current;wn(wI),n._currentValue=e}function d3(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function zw(n,e){CI=n,Y6=Yv=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Jr=!0),n.firstContext=null)}function Nl(n){var e=n._currentValue;if(Y6!==n)if(n={context:n,memoizedValue:e,next:null},Yv===null){if(CI===null)throw Error(Ee(308));Yv=n,CI.dependencies={lanes:0,firstContext:n}}else Yv=Yv.next=n;return e}var Cp=null;function X6(n){Cp===null?Cp=[n]:Cp.push(n)}function Ose(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,X6(e)):(t.next=s.next,s.next=t),e.interleaved=t,yh(n,i)}function yh(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var mf=!1;function J6(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fse(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function uh(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ag(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,xi&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,yh(n,t)}return s=i.interleaved,s===null?(e.next=e,X6(i)):(e.next=s.next,s.next=e),i.interleaved=e,yh(n,t)}function nN(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,W6(n,t)}}function gY(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var r={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=r:o=o.next=r,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function yI(n,e,t,i){var s=n.updateQueue;mf=!1;var o=s.firstBaseUpdate,r=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,r===null?o=c:r.next=c,r=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==r&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(o!==null){var u=s.baseState;r=0,d=c=l=null,a=o;do{var h=a.lane,f=a.eventTime;if((i&h)===h){d!==null&&(d=d.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,m=a;switch(h=e,f=t,m.tag){case 1:if(g=m.payload,typeof g=="function"){u=g.call(f,u,h);break e}u=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(f,u,h):g,h==null)break e;u=Bn({},u,h);break e;case 2:mf=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=f,l=u):d=d.next=f,r|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do r|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);J_|=r,n.lanes=r,n.memoizedState=u}}function mY(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(Ee(191,s));s.call(i)}}}var vL={},jd=dm(vL),_x=dm(vL),bx=dm(vL);function yp(n){if(n===vL)throw Error(Ee(174));return n}function eV(n,e){switch(gn(bx,e),gn(_x,n),gn(jd,vL),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:U5(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=U5(e,n)}wn(jd),gn(jd,e)}function ZC(){wn(jd),wn(_x),wn(bx)}function Wse(n){yp(bx.current);var e=yp(jd.current),t=U5(e,n.type);e!==t&&(gn(_x,n),gn(jd,t))}function tV(n){_x.current===n&&(wn(jd),wn(_x))}var Nn=dm(0);function SI(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var iF=[];function iV(){for(var n=0;n<iF.length;n++)iF[n]._workInProgressVersionPrimary=null;iF.length=0}var sN=Hh.ReactCurrentDispatcher,nF=Hh.ReactCurrentBatchConfig,X_=0,An=null,ks=null,zs=null,xI=!1,Q0=!1,vx=0,bve=0;function Io(){throw Error(Ee(321))}function nV(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Pc(n[t],e[t]))return!1;return!0}function sV(n,e,t,i,s,o){if(X_=o,An=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sN.current=n===null||n.memoizedState===null?yve:Sve,n=t(i,s),Q0){o=0;do{if(Q0=!1,vx=0,25<=o)throw Error(Ee(301));o+=1,zs=ks=null,e.updateQueue=null,sN.current=xve,n=t(i,s)}while(Q0)}if(sN.current=kI,e=ks!==null&&ks.next!==null,X_=0,zs=ks=An=null,xI=!1,e)throw Error(Ee(300));return n}function oV(){var n=vx!==0;return vx=0,n}function dd(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zs===null?An.memoizedState=zs=n:zs=zs.next=n,zs}function Il(){if(ks===null){var n=An.alternate;n=n!==null?n.memoizedState:null}else n=ks.next;var e=zs===null?An.memoizedState:zs.next;if(e!==null)zs=e,ks=n;else{if(n===null)throw Error(Ee(310));ks=n,n={memoizedState:ks.memoizedState,baseState:ks.baseState,baseQueue:ks.baseQueue,queue:ks.queue,next:null},zs===null?An.memoizedState=zs=n:zs=zs.next=n}return zs}function wx(n,e){return typeof e=="function"?e(n):e}function sF(n){var e=Il(),t=e.queue;if(t===null)throw Error(Ee(311));t.lastRenderedReducer=n;var i=ks,s=i.baseQueue,o=t.pending;if(o!==null){if(s!==null){var r=s.next;s.next=o.next,o.next=r}i.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,i=i.baseState;var a=r=null,l=null,c=o;do{var d=c.lane;if((X_&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,r=i):l=l.next=u,An.lanes|=d,J_|=d}c=c.next}while(c!==null&&c!==o);l===null?r=i:l.next=a,Pc(i,e.memoizedState)||(Jr=!0),e.memoizedState=i,e.baseState=r,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do o=s.lane,An.lanes|=o,J_|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function oF(n){var e=Il(),t=e.queue;if(t===null)throw Error(Ee(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var r=s=s.next;do o=n(o,r.action),r=r.next;while(r!==s);Pc(o,e.memoizedState)||(Jr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function Bse(){}function Hse(n,e){var t=An,i=Il(),s=e(),o=!Pc(i.memoizedState,s);if(o&&(i.memoizedState=s,Jr=!0),i=i.queue,rV(zse.bind(null,t,i,n),[n]),i.getSnapshot!==e||o||zs!==null&&zs.memoizedState.tag&1){if(t.flags|=2048,Cx(9,Vse.bind(null,t,i,s,e),void 0,null),Gs===null)throw Error(Ee(349));X_&30||jse(t,e,s)}return s}function jse(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=An.updateQueue,e===null?(e={lastEffect:null,stores:null},An.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Vse(n,e,t,i){e.value=t,e.getSnapshot=i,Use(e)&&$se(n)}function zse(n,e,t){return t(function(){Use(e)&&$se(n)})}function Use(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Pc(n,t)}catch{return!0}}function $se(n){var e=yh(n,1);e!==null&&Sc(e,n,1,-1)}function pY(n){var e=dd();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wx,lastRenderedState:n},e.queue=n,n=n.dispatch=Cve.bind(null,An,n),[e.memoizedState,n]}function Cx(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=An.updateQueue,e===null?(e={lastEffect:null,stores:null},An.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function qse(){return Il().memoizedState}function oN(n,e,t,i){var s=dd();An.flags|=n,s.memoizedState=Cx(1|e,t,void 0,i===void 0?null:i)}function LR(n,e,t,i){var s=Il();i=i===void 0?null:i;var o=void 0;if(ks!==null){var r=ks.memoizedState;if(o=r.destroy,i!==null&&nV(i,r.deps)){s.memoizedState=Cx(e,t,o,i);return}}An.flags|=n,s.memoizedState=Cx(1|e,t,o,i)}function _Y(n,e){return oN(8390656,8,n,e)}function rV(n,e){return LR(2048,8,n,e)}function Kse(n,e){return LR(4,2,n,e)}function Gse(n,e){return LR(4,4,n,e)}function Yse(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Zse(n,e,t){return t=t!=null?t.concat([n]):null,LR(4,4,Yse.bind(null,e,n),t)}function aV(){}function Qse(n,e){var t=Il();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&nV(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Xse(n,e){var t=Il();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&nV(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Jse(n,e,t){return X_&21?(Pc(t,e)||(t=sse(),An.lanes|=t,J_|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Jr=!0),n.memoizedState=t)}function vve(n,e){var t=Xi;Xi=t!==0&&4>t?t:4,n(!0);var i=nF.transition;nF.transition={};try{n(!1),e()}finally{Xi=t,nF.transition=i}}function eoe(){return Il().memoizedState}function wve(n,e,t){var i=cg(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},toe(n))ioe(e,t);else if(t=Ose(n,e,t,i),t!==null){var s=pr();Sc(t,n,i,s),noe(t,e,i)}}function Cve(n,e,t){var i=cg(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(toe(n))ioe(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var r=e.lastRenderedState,a=o(r,t);if(s.hasEagerState=!0,s.eagerState=a,Pc(a,r)){var l=e.interleaved;l===null?(s.next=s,X6(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=Ose(n,e,s,i),t!==null&&(s=pr(),Sc(t,n,i,s),noe(t,e,i))}}function toe(n){var e=n.alternate;return n===An||e!==null&&e===An}function ioe(n,e){Q0=xI=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function noe(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,W6(n,t)}}var kI={readContext:Nl,useCallback:Io,useContext:Io,useEffect:Io,useImperativeHandle:Io,useInsertionEffect:Io,useLayoutEffect:Io,useMemo:Io,useReducer:Io,useRef:Io,useState:Io,useDebugValue:Io,useDeferredValue:Io,useTransition:Io,useMutableSource:Io,useSyncExternalStore:Io,useId:Io,unstable_isNewReconciler:!1},yve={readContext:Nl,useCallback:function(n,e){return dd().memoizedState=[n,e===void 0?null:e],n},useContext:Nl,useEffect:_Y,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,oN(4194308,4,Yse.bind(null,e,n),t)},useLayoutEffect:function(n,e){return oN(4194308,4,n,e)},useInsertionEffect:function(n,e){return oN(4,2,n,e)},useMemo:function(n,e){var t=dd();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=dd();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=wve.bind(null,An,n),[i.memoizedState,n]},useRef:function(n){var e=dd();return n={current:n},e.memoizedState=n},useState:pY,useDebugValue:aV,useDeferredValue:function(n){return dd().memoizedState=n},useTransition:function(){var n=pY(!1),e=n[0];return n=vve.bind(null,n[1]),dd().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=An,s=dd();if(Sn){if(t===void 0)throw Error(Ee(407));t=t()}else{if(t=e(),Gs===null)throw Error(Ee(349));X_&30||jse(i,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,_Y(zse.bind(null,i,o,n),[n]),i.flags|=2048,Cx(9,Vse.bind(null,i,o,t,e),void 0,null),t},useId:function(){var n=dd(),e=Gs.identifierPrefix;if(Sn){var t=Zu,i=Yu;t=(i&~(1<<32-yc(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=vx++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=bve++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Sve={readContext:Nl,useCallback:Qse,useContext:Nl,useEffect:rV,useImperativeHandle:Zse,useInsertionEffect:Kse,useLayoutEffect:Gse,useMemo:Xse,useReducer:sF,useRef:qse,useState:function(){return sF(wx)},useDebugValue:aV,useDeferredValue:function(n){var e=Il();return Jse(e,ks.memoizedState,n)},useTransition:function(){var n=sF(wx)[0],e=Il().memoizedState;return[n,e]},useMutableSource:Bse,useSyncExternalStore:Hse,useId:eoe,unstable_isNewReconciler:!1},xve={readContext:Nl,useCallback:Qse,useContext:Nl,useEffect:rV,useImperativeHandle:Zse,useInsertionEffect:Kse,useLayoutEffect:Gse,useMemo:Xse,useReducer:oF,useRef:qse,useState:function(){return oF(wx)},useDebugValue:aV,useDeferredValue:function(n){var e=Il();return ks===null?e.memoizedState=n:Jse(e,ks.memoizedState,n)},useTransition:function(){var n=oF(wx)[0],e=Il().memoizedState;return[n,e]},useMutableSource:Bse,useSyncExternalStore:Hse,useId:eoe,unstable_isNewReconciler:!1};function nc(n,e){if(n&&n.defaultProps){e=Bn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function u3(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Bn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var DR={isMounted:function(n){return(n=n._reactInternals)?Ab(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=pr(),s=cg(n),o=uh(i,s);o.payload=e,t!=null&&(o.callback=t),e=ag(n,o,s),e!==null&&(Sc(e,n,s,i),nN(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=pr(),s=cg(n),o=uh(i,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=ag(n,o,s),e!==null&&(Sc(e,n,s,i),nN(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=pr(),i=cg(n),s=uh(t,i);s.tag=2,e!=null&&(s.callback=e),e=ag(n,s,i),e!==null&&(Sc(e,n,i,t),nN(e,n,i))}};function bY(n,e,t,i,s,o,r){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,r):e.prototype&&e.prototype.isPureReactComponent?!fx(t,i)||!fx(s,o):!0}function soe(n,e,t){var i=!1,s=Fg,o=e.contextType;return typeof o=="object"&&o!==null?o=Nl(o):(s=oa(e)?Z_:Uo.current,i=e.contextTypes,o=(i=i!=null)?KC(n,s):Fg),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=DR,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function vY(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&DR.enqueueReplaceState(e,e.state,null)}function h3(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},J6(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Nl(o):(o=oa(e)?Z_:Uo.current,s.context=KC(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(u3(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&DR.enqueueReplaceState(s,s.state,null),yI(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function QC(n,e){try{var t="",i=e;do t+=X_e(i),i=i.return;while(i);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function rF(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function f3(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var kve=typeof WeakMap=="function"?WeakMap:Map;function ooe(n,e,t){t=uh(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){DI||(DI=!0,S3=i),f3(n,e)},t}function roe(n,e,t){t=uh(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){f3(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){f3(n,e),typeof i!="function"&&(lg===null?lg=new Set([this]):lg.add(this));var r=e.stack;this.componentDidCatch(e.value,{componentStack:r!==null?r:""})}),t}function wY(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new kve;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=Bve.bind(null,n,e,t),e.then(n,n))}function CY(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function yY(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=uh(-1,1),e.tag=2,ag(t,e,1))),t.lanes|=1),n)}var Lve=Hh.ReactCurrentOwner,Jr=!1;function ar(n,e,t,i){e.child=n===null?Ase(e,null,t,i):YC(e,n.child,t,i)}function SY(n,e,t,i,s){t=t.render;var o=e.ref;return zw(e,s),i=sV(n,e,t,i,o,s),t=oV(),n!==null&&!Jr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Sh(n,e,s)):(Sn&&t&&q6(e),e.flags|=1,ar(n,e,i,s),e.child)}function xY(n,e,t,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!mV(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,aoe(n,e,o,i,s)):(n=cN(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var r=o.memoizedProps;if(t=t.compare,t=t!==null?t:fx,t(r,i)&&n.ref===e.ref)return Sh(n,e,s)}return e.flags|=1,n=dg(o,i),n.ref=e.ref,n.return=e,e.child=n}function aoe(n,e,t,i,s){if(n!==null){var o=n.memoizedProps;if(fx(o,i)&&n.ref===e.ref)if(Jr=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(Jr=!0);else return e.lanes=n.lanes,Sh(n,e,s)}return g3(n,e,t,i,s)}function loe(n,e,t){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gn(Qv,Ea),Ea|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,gn(Qv,Ea),Ea|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,gn(Qv,Ea),Ea|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,gn(Qv,Ea),Ea|=i;return ar(n,e,s,t),e.child}function coe(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function g3(n,e,t,i,s){var o=oa(t)?Z_:Uo.current;return o=KC(e,o),zw(e,s),t=sV(n,e,t,i,o,s),i=oV(),n!==null&&!Jr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Sh(n,e,s)):(Sn&&i&&q6(e),e.flags|=1,ar(n,e,t,s),e.child)}function kY(n,e,t,i,s){if(oa(t)){var o=!0;_I(e)}else o=!1;if(zw(e,s),e.stateNode===null)rN(n,e),soe(e,t,i),h3(e,t,i,s),i=!0;else if(n===null){var r=e.stateNode,a=e.memoizedProps;r.props=a;var l=r.context,c=t.contextType;typeof c=="object"&&c!==null?c=Nl(c):(c=oa(t)?Z_:Uo.current,c=KC(e,c));var d=t.getDerivedStateFromProps,u=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function";u||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==i||l!==c)&&vY(e,r,i,c),mf=!1;var h=e.memoizedState;r.state=h,yI(e,i,r,s),l=e.memoizedState,a!==i||h!==l||sa.current||mf?(typeof d=="function"&&(u3(e,t,d,i),l=e.memoizedState),(a=mf||bY(e,t,a,i,h,l,c))?(u||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),r.props=i,r.state=l,r.context=c,i=a):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,Fse(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:nc(e.type,a),r.props=c,u=e.pendingProps,h=r.context,l=t.contextType,typeof l=="object"&&l!==null?l=Nl(l):(l=oa(t)?Z_:Uo.current,l=KC(e,l));var f=t.getDerivedStateFromProps;(d=typeof f=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==u||h!==l)&&vY(e,r,i,l),mf=!1,h=e.memoizedState,r.state=h,yI(e,i,r,s);var g=e.memoizedState;a!==u||h!==g||sa.current||mf?(typeof f=="function"&&(u3(e,t,f,i),g=e.memoizedState),(c=mf||bY(e,t,c,i,h,g,l)||!1)?(d||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,g,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,g,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),r.props=i,r.state=g,r.context=l,i=c):(typeof r.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return m3(n,e,t,i,o,s)}function m3(n,e,t,i,s,o){coe(n,e);var r=(e.flags&128)!==0;if(!i&&!r)return s&&dY(e,t,!1),Sh(n,e,o);i=e.stateNode,Lve.current=e;var a=r&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&r?(e.child=YC(e,n.child,null,o),e.child=YC(e,null,a,o)):ar(n,e,a,o),e.memoizedState=i.state,s&&dY(e,t,!0),e.child}function doe(n){var e=n.stateNode;e.pendingContext?cY(n,e.pendingContext,e.pendingContext!==e.context):e.context&&cY(n,e.context,!1),eV(n,e.containerInfo)}function LY(n,e,t,i,s){return GC(),G6(s),e.flags|=256,ar(n,e,t,i),e.child}var p3={dehydrated:null,treeContext:null,retryLane:0};function _3(n){return{baseLanes:n,cachePool:null,transitions:null}}function uoe(n,e,t){var i=e.pendingProps,s=Nn.current,o=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),gn(Nn,s&1),n===null)return c3(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(r=i.children,n=i.fallback,o?(i=e.mode,o=e.child,r={mode:"hidden",children:r},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=r):o=IR(r,i,0,null),n=Wp(n,i,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=_3(t),e.memoizedState=p3,n):lV(e,r));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Dve(n,e,r,i,a,s,t);if(o){o=i.fallback,r=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(r&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=dg(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=dg(a,o):(o=Wp(o,r,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,r=n.child.memoizedState,r=r===null?_3(t):{baseLanes:r.baseLanes|t,cachePool:null,transitions:r.transitions},o.memoizedState=r,o.childLanes=n.childLanes&~t,e.memoizedState=p3,i}return o=n.child,n=o.sibling,i=dg(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function lV(n,e){return e=IR({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ED(n,e,t,i){return i!==null&&G6(i),YC(e,n.child,null,t),n=lV(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Dve(n,e,t,i,s,o,r){if(t)return e.flags&256?(e.flags&=-257,i=rF(Error(Ee(422))),ED(n,e,r,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=IR({mode:"visible",children:i.children},s,0,null),o=Wp(o,s,r,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&YC(e,n.child,null,r),e.child.memoizedState=_3(r),e.memoizedState=p3,o);if(!(e.mode&1))return ED(n,e,r,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,o=Error(Ee(419)),i=rF(o,i,void 0),ED(n,e,r,i)}if(a=(r&n.childLanes)!==0,Jr||a){if(i=Gs,i!==null){switch(r&-r){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|r)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,yh(n,s),Sc(i,n,s,-1))}return gV(),i=rF(Error(Ee(421))),ED(n,e,r,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=Hve.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,Oa=rg(s.nextSibling),Ba=e,Sn=!0,uc=null,n!==null&&(pl[_l++]=Yu,pl[_l++]=Zu,pl[_l++]=Q_,Yu=n.id,Zu=n.overflow,Q_=e),e=lV(e,i.children),e.flags|=4096,e)}function DY(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),d3(n.return,e,t)}function aF(n,e,t,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=s)}function hoe(n,e,t){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(ar(n,e,i.children,t),i=Nn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&DY(n,t,e);else if(n.tag===19)DY(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(gn(Nn,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&SI(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),aF(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&SI(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}aF(e,!0,t,null,o);break;case"together":aF(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rN(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Sh(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),J_|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ee(153));if(e.child!==null){for(n=e.child,t=dg(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=dg(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Eve(n,e,t){switch(e.tag){case 3:doe(e),GC();break;case 5:Wse(e);break;case 1:oa(e.type)&&_I(e);break;case 4:eV(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;gn(wI,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(gn(Nn,Nn.current&1),e.flags|=128,null):t&e.child.childLanes?uoe(n,e,t):(gn(Nn,Nn.current&1),n=Sh(n,e,t),n!==null?n.sibling:null);gn(Nn,Nn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return hoe(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),gn(Nn,Nn.current),i)break;return null;case 22:case 23:return e.lanes=0,loe(n,e,t)}return Sh(n,e,t)}var foe,b3,goe,moe;foe=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};b3=function(){};goe=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,yp(jd.current);var o=null;switch(t){case"input":s=H5(n,s),i=H5(n,i),o=[];break;case"select":s=Bn({},s,{value:void 0}),i=Bn({},i,{value:void 0}),o=[];break;case"textarea":s=z5(n,s),i=z5(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=mI)}$5(t,i);var r;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(r in a)a.hasOwnProperty(r)&&(t||(t={}),t[r]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rx.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(r in a)!a.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(t||(t={}),t[r]="");for(r in l)l.hasOwnProperty(r)&&a[r]!==l[r]&&(t||(t={}),t[r]=l[r])}else t||(o||(o=[]),o.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rx.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&bn("scroll",n),o||a===l||(o=[])):(o=o||[]).push(c,l))}t&&(o=o||[]).push("style",t);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};moe=function(n,e,t,i){t!==i&&(e.flags|=4)};function M1(n,e){if(!Sn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function To(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function Nve(n,e,t){var i=e.pendingProps;switch(K6(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return To(e),null;case 1:return oa(e.type)&&pI(),To(e),null;case 3:return i=e.stateNode,ZC(),wn(sa),wn(Uo),iV(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(LD(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,uc!==null&&(L3(uc),uc=null))),b3(n,e),To(e),null;case 5:tV(e);var s=yp(bx.current);if(t=e.type,n!==null&&e.stateNode!=null)goe(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ee(166));return To(e),null}if(n=yp(jd.current),LD(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[Id]=e,i[px]=o,n=(e.mode&1)!==0,t){case"dialog":bn("cancel",i),bn("close",i);break;case"iframe":case"object":case"embed":bn("load",i);break;case"video":case"audio":for(s=0;s<p0.length;s++)bn(p0[s],i);break;case"source":bn("error",i);break;case"img":case"image":case"link":bn("error",i),bn("load",i);break;case"details":bn("toggle",i);break;case"input":OG(i,o),bn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},bn("invalid",i);break;case"textarea":WG(i,o),bn("invalid",i)}$5(t,o),s=null;for(var r in o)if(o.hasOwnProperty(r)){var a=o[r];r==="children"?typeof a=="string"?i.textContent!==a&&(o.suppressHydrationWarning!==!0&&kD(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&kD(i.textContent,a,n),s=["children",""+a]):rx.hasOwnProperty(r)&&a!=null&&r==="onScroll"&&bn("scroll",i)}switch(t){case"input":_D(i),FG(i,o,!0);break;case"textarea":_D(i),BG(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=mI)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{r=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=zne(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=r.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=r.createElement(t,{is:i.is}):(n=r.createElement(t),t==="select"&&(r=n,i.multiple?r.multiple=!0:i.size&&(r.size=i.size))):n=r.createElementNS(n,t),n[Id]=e,n[px]=i,foe(n,e,!1,!1),e.stateNode=n;e:{switch(r=q5(t,i),t){case"dialog":bn("cancel",n),bn("close",n),s=i;break;case"iframe":case"object":case"embed":bn("load",n),s=i;break;case"video":case"audio":for(s=0;s<p0.length;s++)bn(p0[s],n);s=i;break;case"source":bn("error",n),s=i;break;case"img":case"image":case"link":bn("error",n),bn("load",n),s=i;break;case"details":bn("toggle",n),s=i;break;case"input":OG(n,i),s=H5(n,i),bn("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Bn({},i,{value:void 0}),bn("invalid",n);break;case"textarea":WG(n,i),s=z5(n,i),bn("invalid",n);break;default:s=i}$5(t,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?qne(n,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Une(n,l)):o==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ax(n,l):typeof l=="number"&&ax(n,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(rx.hasOwnProperty(o)?l!=null&&o==="onScroll"&&bn("scroll",n):l!=null&&P6(n,o,l,r))}switch(t){case"input":_D(n),FG(n,i,!1);break;case"textarea":_D(n),BG(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Og(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?Bw(n,!!i.multiple,o,!1):i.defaultValue!=null&&Bw(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=mI)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return To(e),null;case 6:if(n&&e.stateNode!=null)moe(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ee(166));if(t=yp(bx.current),yp(jd.current),LD(e)){if(i=e.stateNode,t=e.memoizedProps,i[Id]=e,(o=i.nodeValue!==t)&&(n=Ba,n!==null))switch(n.tag){case 3:kD(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&kD(i.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Id]=e,e.stateNode=i}return To(e),null;case 13:if(wn(Nn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Sn&&Oa!==null&&e.mode&1&&!(e.flags&128))Mse(),GC(),e.flags|=98560,o=!1;else if(o=LD(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(Ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Ee(317));o[Id]=e}else GC(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;To(e),o=!1}else uc!==null&&(L3(uc),uc=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Nn.current&1?Es===0&&(Es=3):gV())),e.updateQueue!==null&&(e.flags|=4),To(e),null);case 4:return ZC(),b3(n,e),n===null&&gx(e.stateNode.containerInfo),To(e),null;case 10:return Q6(e.type._context),To(e),null;case 17:return oa(e.type)&&pI(),To(e),null;case 19:if(wn(Nn),o=e.memoizedState,o===null)return To(e),null;if(i=(e.flags&128)!==0,r=o.rendering,r===null)if(i)M1(o,!1);else{if(Es!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(r=SI(n),r!==null){for(e.flags|=128,M1(o,!1),i=r.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,n=i,o.flags&=14680066,r=o.alternate,r===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,o.type=r.type,n=r.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return gn(Nn,Nn.current&1|2),e.child}n=n.sibling}o.tail!==null&&is()>XC&&(e.flags|=128,i=!0,M1(o,!1),e.lanes=4194304)}else{if(!i)if(n=SI(r),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),M1(o,!0),o.tail===null&&o.tailMode==="hidden"&&!r.alternate&&!Sn)return To(e),null}else 2*is()-o.renderingStartTime>XC&&t!==1073741824&&(e.flags|=128,i=!0,M1(o,!1),e.lanes=4194304);o.isBackwards?(r.sibling=e.child,e.child=r):(t=o.last,t!==null?t.sibling=r:e.child=r,o.last=r)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=is(),e.sibling=null,t=Nn.current,gn(Nn,i?t&1|2:t&1),e):(To(e),null);case 22:case 23:return fV(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ea&1073741824&&(To(e),e.subtreeFlags&6&&(e.flags|=8192)):To(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function Ive(n,e){switch(K6(e),e.tag){case 1:return oa(e.type)&&pI(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ZC(),wn(sa),wn(Uo),iV(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return tV(e),null;case 13:if(wn(Nn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));GC()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return wn(Nn),null;case 4:return ZC(),null;case 10:return Q6(e.type._context),null;case 22:case 23:return fV(),null;case 24:return null;default:return null}}var ND=!1,Fo=!1,Tve=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Zv(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){qn(n,e,i)}else t.current=null}function v3(n,e,t){try{t()}catch(i){qn(n,e,i)}}var EY=!1;function Pve(n,e){if(i3=hI,n=wse(),$6(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var r=0,a=-1,l=-1,c=0,d=0,u=n,h=null;t:for(;;){for(var f;u!==t||s!==0&&u.nodeType!==3||(a=r+s),u!==o||i!==0&&u.nodeType!==3||(l=r+i),u.nodeType===3&&(r+=u.nodeValue.length),(f=u.firstChild)!==null;)h=u,u=f;for(;;){if(u===n)break t;if(h===t&&++c===s&&(a=r),h===o&&++d===i&&(l=r),(f=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(n3={focusedElem:n,selectionRange:t},hI=!1,Ke=e;Ke!==null;)if(e=Ke,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ke=n;else for(;Ke!==null;){e=Ke;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,_=g.memoizedState,b=e.stateNode,v=b.getSnapshotBeforeUpdate(e.elementType===e.type?m:nc(e.type,m),_);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(y){qn(e,e.return,y)}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}return g=EY,EY=!1,g}function X0(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&v3(e,t,o)}s=s.next}while(s!==i)}}function ER(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function w3(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function poe(n){var e=n.alternate;e!==null&&(n.alternate=null,poe(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Id],delete e[px],delete e[r3],delete e[gve],delete e[mve])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function _oe(n){return n.tag===5||n.tag===3||n.tag===4}function NY(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_oe(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function C3(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=mI));else if(i!==4&&(n=n.child,n!==null))for(C3(n,e,t),n=n.sibling;n!==null;)C3(n,e,t),n=n.sibling}function y3(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(y3(n,e,t),n=n.sibling;n!==null;)y3(n,e,t),n=n.sibling}var io=null,ac=!1;function Qh(n,e,t){for(t=t.child;t!==null;)boe(n,e,t),t=t.sibling}function boe(n,e,t){if(Hd&&typeof Hd.onCommitFiberUnmount=="function")try{Hd.onCommitFiberUnmount(wR,t)}catch{}switch(t.tag){case 5:Fo||Zv(t,e);case 6:var i=io,s=ac;io=null,Qh(n,e,t),io=i,ac=s,io!==null&&(ac?(n=io,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):io.removeChild(t.stateNode));break;case 18:io!==null&&(ac?(n=io,t=t.stateNode,n.nodeType===8?eF(n.parentNode,t):n.nodeType===1&&eF(n,t),ux(n)):eF(io,t.stateNode));break;case 4:i=io,s=ac,io=t.stateNode.containerInfo,ac=!0,Qh(n,e,t),io=i,ac=s;break;case 0:case 11:case 14:case 15:if(!Fo&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,r=o.destroy;o=o.tag,r!==void 0&&(o&2||o&4)&&v3(t,e,r),s=s.next}while(s!==i)}Qh(n,e,t);break;case 1:if(!Fo&&(Zv(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){qn(t,e,a)}Qh(n,e,t);break;case 21:Qh(n,e,t);break;case 22:t.mode&1?(Fo=(i=Fo)||t.memoizedState!==null,Qh(n,e,t),Fo=i):Qh(n,e,t);break;default:Qh(n,e,t)}}function IY(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Tve),e.forEach(function(i){var s=jve.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function $l(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var o=n,r=e,a=r;e:for(;a!==null;){switch(a.tag){case 5:io=a.stateNode,ac=!1;break e;case 3:io=a.stateNode.containerInfo,ac=!0;break e;case 4:io=a.stateNode.containerInfo,ac=!0;break e}a=a.return}if(io===null)throw Error(Ee(160));boe(o,r,s),io=null,ac=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){qn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)voe(e,n),e=e.sibling}function voe(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if($l(e,n),Xc(n),i&4){try{X0(3,n,n.return),ER(3,n)}catch(m){qn(n,n.return,m)}try{X0(5,n,n.return)}catch(m){qn(n,n.return,m)}}break;case 1:$l(e,n),Xc(n),i&512&&t!==null&&Zv(t,t.return);break;case 5:if($l(e,n),Xc(n),i&512&&t!==null&&Zv(t,t.return),n.flags&32){var s=n.stateNode;try{ax(s,"")}catch(m){qn(n,n.return,m)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,r=t!==null?t.memoizedProps:o,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&jne(s,o),q5(a,r);var c=q5(a,o);for(r=0;r<l.length;r+=2){var d=l[r],u=l[r+1];d==="style"?qne(s,u):d==="dangerouslySetInnerHTML"?Une(s,u):d==="children"?ax(s,u):P6(s,d,u,c)}switch(a){case"input":j5(s,o);break;case"textarea":Vne(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Bw(s,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Bw(s,!!o.multiple,o.defaultValue,!0):Bw(s,!!o.multiple,o.multiple?[]:"",!1))}s[px]=o}catch(m){qn(n,n.return,m)}}break;case 6:if($l(e,n),Xc(n),i&4){if(n.stateNode===null)throw Error(Ee(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(m){qn(n,n.return,m)}}break;case 3:if($l(e,n),Xc(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{ux(e.containerInfo)}catch(m){qn(n,n.return,m)}break;case 4:$l(e,n),Xc(n);break;case 13:$l(e,n),Xc(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(uV=is())),i&4&&IY(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Fo=(c=Fo)||d,$l(e,n),Fo=c):$l(e,n),Xc(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Ke=n,d=n.child;d!==null;){for(u=Ke=d;Ke!==null;){switch(h=Ke,f=h.child,h.tag){case 0:case 11:case 14:case 15:X0(4,h,h.return);break;case 1:Zv(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){qn(i,t,m)}}break;case 5:Zv(h,h.return);break;case 22:if(h.memoizedState!==null){PY(u);continue}}f!==null?(f.return=h,Ke=f):PY(u)}d=d.sibling}e:for(d=null,u=n;;){if(u.tag===5){if(d===null){d=u;try{s=u.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=u.stateNode,l=u.memoizedProps.style,r=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$ne("display",r))}catch(m){qn(n,n.return,m)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){qn(n,n.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===n)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:$l(e,n),Xc(n),i&4&&IY(n);break;case 21:break;default:$l(e,n),Xc(n)}}function Xc(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(_oe(t)){var i=t;break e}t=t.return}throw Error(Ee(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ax(s,""),i.flags&=-33);var o=NY(n);y3(n,o,s);break;case 3:case 4:var r=i.stateNode.containerInfo,a=NY(n);C3(n,a,r);break;default:throw Error(Ee(161))}}catch(l){qn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Mve(n,e,t){Ke=n,woe(n)}function woe(n,e,t){for(var i=(n.mode&1)!==0;Ke!==null;){var s=Ke,o=s.child;if(s.tag===22&&i){var r=s.memoizedState!==null||ND;if(!r){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Fo;a=ND;var c=Fo;if(ND=r,(Fo=l)&&!c)for(Ke=s;Ke!==null;)r=Ke,l=r.child,r.tag===22&&r.memoizedState!==null?MY(s):l!==null?(l.return=r,Ke=l):MY(s);for(;o!==null;)Ke=o,woe(o),o=o.sibling;Ke=s,ND=a,Fo=c}TY(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Ke=o):TY(n)}}function TY(n){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fo||ER(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Fo)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:nc(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&mY(e,o,i);break;case 3:var r=e.updateQueue;if(r!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}mY(e,r,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&ux(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Fo||e.flags&512&&w3(e)}catch(h){qn(e,e.return,h)}}if(e===n){Ke=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}}function PY(n){for(;Ke!==null;){var e=Ke;if(e===n){Ke=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ke=t;break}Ke=e.return}}function MY(n){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{ER(4,e)}catch(l){qn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){qn(e,s,l)}}var o=e.return;try{w3(e)}catch(l){qn(e,o,l)}break;case 5:var r=e.return;try{w3(e)}catch(l){qn(e,r,l)}}}catch(l){qn(e,e.return,l)}if(e===n){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var Rve=Math.ceil,LI=Hh.ReactCurrentDispatcher,cV=Hh.ReactCurrentOwner,Ll=Hh.ReactCurrentBatchConfig,xi=0,Gs=null,gs=null,go=0,Ea=0,Qv=dm(0),Es=0,yx=null,J_=0,NR=0,dV=0,J0=null,$r=null,uV=0,XC=1/0,Du=null,DI=!1,S3=null,lg=null,ID=!1,Vf=null,EI=0,eS=0,x3=null,aN=-1,lN=0;function pr(){return xi&6?is():aN!==-1?aN:aN=is()}function cg(n){return n.mode&1?xi&2&&go!==0?go&-go:_ve.transition!==null?(lN===0&&(lN=sse()),lN):(n=Xi,n!==0||(n=window.event,n=n===void 0?16:use(n.type)),n):1}function Sc(n,e,t,i){if(50<eS)throw eS=0,x3=null,Error(Ee(185));pL(n,t,i),(!(xi&2)||n!==Gs)&&(n===Gs&&(!(xi&2)&&(NR|=t),Es===4&&kf(n,go)),ra(n,i),t===1&&xi===0&&!(e.mode&1)&&(XC=is()+500,kR&&um()))}function ra(n,e){var t=n.callbackNode;_be(n,e);var i=uI(n,n===Gs?go:0);if(i===0)t!==null&&VG(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&VG(t),e===1)n.tag===0?pve(RY.bind(null,n)):Ise(RY.bind(null,n)),hve(function(){!(xi&6)&&um()}),t=null;else{switch(ose(i)){case 1:t=F6;break;case 4:t=ise;break;case 16:t=dI;break;case 536870912:t=nse;break;default:t=dI}t=Eoe(t,Coe.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Coe(n,e){if(aN=-1,lN=0,xi&6)throw Error(Ee(327));var t=n.callbackNode;if(Uw()&&n.callbackNode!==t)return null;var i=uI(n,n===Gs?go:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=NI(n,i);else{e=i;var s=xi;xi|=2;var o=Soe();(Gs!==n||go!==e)&&(Du=null,XC=is()+500,Fp(n,e));do try{Fve();break}catch(a){yoe(n,a)}while(!0);Z6(),LI.current=o,xi=s,gs!==null?e=0:(Gs=null,go=0,e=Es)}if(e!==0){if(e===2&&(s=Q5(n),s!==0&&(i=s,e=k3(n,s))),e===1)throw t=yx,Fp(n,0),kf(n,i),ra(n,is()),t;if(e===6)kf(n,i);else{if(s=n.current.alternate,!(i&30)&&!Ave(s)&&(e=NI(n,i),e===2&&(o=Q5(n),o!==0&&(i=o,e=k3(n,o))),e===1))throw t=yx,Fp(n,0),kf(n,i),ra(n,is()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(Ee(345));case 2:jm(n,$r,Du);break;case 3:if(kf(n,i),(i&130023424)===i&&(e=uV+500-is(),10<e)){if(uI(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){pr(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=o3(jm.bind(null,n,$r,Du),e);break}jm(n,$r,Du);break;case 4:if(kf(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var r=31-yc(i);o=1<<r,r=e[r],r>s&&(s=r),i&=~o}if(i=s,i=is()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Rve(i/1960))-i,10<i){n.timeoutHandle=o3(jm.bind(null,n,$r,Du),i);break}jm(n,$r,Du);break;case 5:jm(n,$r,Du);break;default:throw Error(Ee(329))}}}return ra(n,is()),n.callbackNode===t?Coe.bind(null,n):null}function k3(n,e){var t=J0;return n.current.memoizedState.isDehydrated&&(Fp(n,e).flags|=256),n=NI(n,e),n!==2&&(e=$r,$r=t,e!==null&&L3(e)),n}function L3(n){$r===null?$r=n:$r.push.apply($r,n)}function Ave(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],o=s.getSnapshot;s=s.value;try{if(!Pc(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kf(n,e){for(e&=~dV,e&=~NR,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-yc(e),i=1<<t;n[t]=-1,e&=~i}}function RY(n){if(xi&6)throw Error(Ee(327));Uw();var e=uI(n,0);if(!(e&1))return ra(n,is()),null;var t=NI(n,e);if(n.tag!==0&&t===2){var i=Q5(n);i!==0&&(e=i,t=k3(n,i))}if(t===1)throw t=yx,Fp(n,0),kf(n,e),ra(n,is()),t;if(t===6)throw Error(Ee(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,jm(n,$r,Du),ra(n,is()),null}function hV(n,e){var t=xi;xi|=1;try{return n(e)}finally{xi=t,xi===0&&(XC=is()+500,kR&&um())}}function eb(n){Vf!==null&&Vf.tag===0&&!(xi&6)&&Uw();var e=xi;xi|=1;var t=Ll.transition,i=Xi;try{if(Ll.transition=null,Xi=1,n)return n()}finally{Xi=i,Ll.transition=t,xi=e,!(xi&6)&&um()}}function fV(){Ea=Qv.current,wn(Qv)}function Fp(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,uve(t)),gs!==null)for(t=gs.return;t!==null;){var i=t;switch(K6(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&pI();break;case 3:ZC(),wn(sa),wn(Uo),iV();break;case 5:tV(i);break;case 4:ZC();break;case 13:wn(Nn);break;case 19:wn(Nn);break;case 10:Q6(i.type._context);break;case 22:case 23:fV()}t=t.return}if(Gs=n,gs=n=dg(n.current,null),go=Ea=e,Es=0,yx=null,dV=NR=J_=0,$r=J0=null,Cp!==null){for(e=0;e<Cp.length;e++)if(t=Cp[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,o=t.pending;if(o!==null){var r=o.next;o.next=s,i.next=r}t.pending=i}Cp=null}return n}function yoe(n,e){do{var t=gs;try{if(Z6(),sN.current=kI,xI){for(var i=An.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}xI=!1}if(X_=0,zs=ks=An=null,Q0=!1,vx=0,cV.current=null,t===null||t.return===null){Es=1,yx=e,gs=null;break}e:{var o=n,r=t.return,a=t,l=e;if(e=go,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=CY(r);if(f!==null){f.flags&=-257,yY(f,r,a,o,e),f.mode&1&&wY(o,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){wY(o,c,e),gV();break e}l=Error(Ee(426))}}else if(Sn&&a.mode&1){var _=CY(r);if(_!==null){!(_.flags&65536)&&(_.flags|=256),yY(_,r,a,o,e),G6(QC(l,a));break e}}o=l=QC(l,a),Es!==4&&(Es=2),J0===null?J0=[o]:J0.push(o),o=r;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=ooe(o,l,e);gY(o,b);break e;case 1:a=l;var v=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(lg===null||!lg.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var y=roe(o,a,e);gY(o,y);break e}}o=o.return}while(o!==null)}koe(t)}catch(S){e=S,gs===t&&t!==null&&(gs=t=t.return);continue}break}while(!0)}function Soe(){var n=LI.current;return LI.current=kI,n===null?kI:n}function gV(){(Es===0||Es===3||Es===2)&&(Es=4),Gs===null||!(J_&268435455)&&!(NR&268435455)||kf(Gs,go)}function NI(n,e){var t=xi;xi|=2;var i=Soe();(Gs!==n||go!==e)&&(Du=null,Fp(n,e));do try{Ove();break}catch(s){yoe(n,s)}while(!0);if(Z6(),xi=t,LI.current=i,gs!==null)throw Error(Ee(261));return Gs=null,go=0,Es}function Ove(){for(;gs!==null;)xoe(gs)}function Fve(){for(;gs!==null&&!lbe();)xoe(gs)}function xoe(n){var e=Doe(n.alternate,n,Ea);n.memoizedProps=n.pendingProps,e===null?koe(n):gs=e,cV.current=null}function koe(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Ive(t,e),t!==null){t.flags&=32767,gs=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Es=6,gs=null;return}}else if(t=Nve(t,e,Ea),t!==null){gs=t;return}if(e=e.sibling,e!==null){gs=e;return}gs=e=n}while(e!==null);Es===0&&(Es=5)}function jm(n,e,t){var i=Xi,s=Ll.transition;try{Ll.transition=null,Xi=1,Wve(n,e,t,i)}finally{Ll.transition=s,Xi=i}return null}function Wve(n,e,t,i){do Uw();while(Vf!==null);if(xi&6)throw Error(Ee(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ee(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(bbe(n,o),n===Gs&&(gs=Gs=null,go=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ID||(ID=!0,Eoe(dI,function(){return Uw(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Ll.transition,Ll.transition=null;var r=Xi;Xi=1;var a=xi;xi|=4,cV.current=null,Pve(n,t),voe(t,n),sve(n3),hI=!!i3,n3=i3=null,n.current=t,Mve(t),cbe(),xi=a,Xi=r,Ll.transition=o}else n.current=t;if(ID&&(ID=!1,Vf=n,EI=s),o=n.pendingLanes,o===0&&(lg=null),hbe(t.stateNode),ra(n,is()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(DI)throw DI=!1,n=S3,S3=null,n;return EI&1&&n.tag!==0&&Uw(),o=n.pendingLanes,o&1?n===x3?eS++:(eS=0,x3=n):eS=0,um(),null}function Uw(){if(Vf!==null){var n=ose(EI),e=Ll.transition,t=Xi;try{if(Ll.transition=null,Xi=16>n?16:n,Vf===null)var i=!1;else{if(n=Vf,Vf=null,EI=0,xi&6)throw Error(Ee(331));var s=xi;for(xi|=4,Ke=n.current;Ke!==null;){var o=Ke,r=o.child;if(Ke.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ke=c;Ke!==null;){var d=Ke;switch(d.tag){case 0:case 11:case 15:X0(8,d,o)}var u=d.child;if(u!==null)u.return=d,Ke=u;else for(;Ke!==null;){d=Ke;var h=d.sibling,f=d.return;if(poe(d),d===c){Ke=null;break}if(h!==null){h.return=f,Ke=h;break}Ke=f}}}var g=o.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(m!==null)}}Ke=o}}if(o.subtreeFlags&2064&&r!==null)r.return=o,Ke=r;else e:for(;Ke!==null;){if(o=Ke,o.flags&2048)switch(o.tag){case 0:case 11:case 15:X0(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,Ke=b;break e}Ke=o.return}}var v=n.current;for(Ke=v;Ke!==null;){r=Ke;var w=r.child;if(r.subtreeFlags&2064&&w!==null)w.return=r,Ke=w;else e:for(r=v;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ER(9,a)}}catch(S){qn(a,a.return,S)}if(a===r){Ke=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,Ke=y;break e}Ke=a.return}}if(xi=s,um(),Hd&&typeof Hd.onPostCommitFiberRoot=="function")try{Hd.onPostCommitFiberRoot(wR,n)}catch{}i=!0}return i}finally{Xi=t,Ll.transition=e}}return!1}function AY(n,e,t){e=QC(t,e),e=ooe(n,e,1),n=ag(n,e,1),e=pr(),n!==null&&(pL(n,1,e),ra(n,e))}function qn(n,e,t){if(n.tag===3)AY(n,n,t);else for(;e!==null;){if(e.tag===3){AY(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lg===null||!lg.has(i))){n=QC(t,n),n=roe(e,n,1),e=ag(e,n,1),n=pr(),e!==null&&(pL(e,1,n),ra(e,n));break}}e=e.return}}function Bve(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=pr(),n.pingedLanes|=n.suspendedLanes&t,Gs===n&&(go&t)===t&&(Es===4||Es===3&&(go&130023424)===go&&500>is()-uV?Fp(n,0):dV|=t),ra(n,e)}function Loe(n,e){e===0&&(n.mode&1?(e=wD,wD<<=1,!(wD&130023424)&&(wD=4194304)):e=1);var t=pr();n=yh(n,e),n!==null&&(pL(n,e,t),ra(n,t))}function Hve(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Loe(n,t)}function jve(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ee(314))}i!==null&&i.delete(e),Loe(n,t)}var Doe;Doe=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||sa.current)Jr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Jr=!1,Eve(n,e,t);Jr=!!(n.flags&131072)}else Jr=!1,Sn&&e.flags&1048576&&Tse(e,vI,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;rN(n,e),n=e.pendingProps;var s=KC(e,Uo.current);zw(e,t),s=sV(null,e,i,n,s,t);var o=oV();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,oa(i)?(o=!0,_I(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,J6(e),s.updater=DR,e.stateNode=s,s._reactInternals=e,h3(e,i,n,t),e=m3(null,e,i,!0,o,t)):(e.tag=0,Sn&&o&&q6(e),ar(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(rN(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=zve(i),n=nc(i,n),s){case 0:e=g3(null,e,i,n,t);break e;case 1:e=kY(null,e,i,n,t);break e;case 11:e=SY(null,e,i,n,t);break e;case 14:e=xY(null,e,i,nc(i.type,n),t);break e}throw Error(Ee(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:nc(i,s),g3(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:nc(i,s),kY(n,e,i,s,t);case 3:e:{if(doe(e),n===null)throw Error(Ee(387));i=e.pendingProps,o=e.memoizedState,s=o.element,Fse(n,e),yI(e,i,null,t);var r=e.memoizedState;if(i=r.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:r.cache,pendingSuspenseBoundaries:r.pendingSuspenseBoundaries,transitions:r.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=QC(Error(Ee(423)),e),e=LY(n,e,i,t,s);break e}else if(i!==s){s=QC(Error(Ee(424)),e),e=LY(n,e,i,t,s);break e}else for(Oa=rg(e.stateNode.containerInfo.firstChild),Ba=e,Sn=!0,uc=null,t=Ase(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(GC(),i===s){e=Sh(n,e,t);break e}ar(n,e,i,t)}e=e.child}return e;case 5:return Wse(e),n===null&&c3(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,r=s.children,s3(i,s)?r=null:o!==null&&s3(i,o)&&(e.flags|=32),coe(n,e),ar(n,e,r,t),e.child;case 6:return n===null&&c3(e),null;case 13:return uoe(n,e,t);case 4:return eV(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=YC(e,null,i,t):ar(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:nc(i,s),SY(n,e,i,s,t);case 7:return ar(n,e,e.pendingProps,t),e.child;case 8:return ar(n,e,e.pendingProps.children,t),e.child;case 12:return ar(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,r=s.value,gn(wI,i._currentValue),i._currentValue=r,o!==null)if(Pc(o.value,r)){if(o.children===s.children&&!sa.current){e=Sh(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){r=o.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=uh(-1,t&-t),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),d3(o.return,t,e),a.lanes|=t;break}l=l.next}}else if(o.tag===10)r=o.type===e.type?null:o.child;else if(o.tag===18){if(r=o.return,r===null)throw Error(Ee(341));r.lanes|=t,a=r.alternate,a!==null&&(a.lanes|=t),d3(r,t,e),r=o.sibling}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===e){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}ar(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,zw(e,t),s=Nl(s),i=i(s),e.flags|=1,ar(n,e,i,t),e.child;case 14:return i=e.type,s=nc(i,e.pendingProps),s=nc(i.type,s),xY(n,e,i,s,t);case 15:return aoe(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:nc(i,s),rN(n,e),e.tag=1,oa(i)?(n=!0,_I(e)):n=!1,zw(e,t),soe(e,i,s),h3(e,i,s,t),m3(null,e,i,!0,n,t);case 19:return hoe(n,e,t);case 22:return loe(n,e,t)}throw Error(Ee(156,e.tag))};function Eoe(n,e){return tse(n,e)}function Vve(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yl(n,e,t,i){return new Vve(n,e,t,i)}function mV(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zve(n){if(typeof n=="function")return mV(n)?1:0;if(n!=null){if(n=n.$$typeof,n===R6)return 11;if(n===A6)return 14}return 2}function dg(n,e){var t=n.alternate;return t===null?(t=yl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function cN(n,e,t,i,s,o){var r=2;if(i=n,typeof n=="function")mV(n)&&(r=1);else if(typeof n=="string")r=5;else e:switch(n){case jv:return Wp(t.children,s,o,e);case M6:r=8,s|=8;break;case O5:return n=yl(12,t,e,s|2),n.elementType=O5,n.lanes=o,n;case F5:return n=yl(13,t,e,s),n.elementType=F5,n.lanes=o,n;case W5:return n=yl(19,t,e,s),n.elementType=W5,n.lanes=o,n;case Wne:return IR(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case One:r=10;break e;case Fne:r=9;break e;case R6:r=11;break e;case A6:r=14;break e;case gf:r=16,i=null;break e}throw Error(Ee(130,n==null?n:typeof n,""))}return e=yl(r,t,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function Wp(n,e,t,i){return n=yl(7,n,i,e),n.lanes=t,n}function IR(n,e,t,i){return n=yl(22,n,i,e),n.elementType=Wne,n.lanes=t,n.stateNode={isHidden:!1},n}function lF(n,e,t){return n=yl(6,n,null,e),n.lanes=t,n}function cF(n,e,t){return e=yl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Uve(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zO(0),this.expirationTimes=zO(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zO(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pV(n,e,t,i,s,o,r,a,l){return n=new Uve(n,e,t,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=yl(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},J6(o),n}function $ve(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hv,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function Noe(n){if(!n)return Fg;n=n._reactInternals;e:{if(Ab(n)!==n||n.tag!==1)throw Error(Ee(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(oa(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(n.tag===1){var t=n.type;if(oa(t))return Nse(n,t,e)}return e}function Ioe(n,e,t,i,s,o,r,a,l){return n=pV(t,i,!0,n,s,o,r,a,l),n.context=Noe(null),t=n.current,i=pr(),s=cg(t),o=uh(i,s),o.callback=e??null,ag(t,o,s),n.current.lanes=s,pL(n,s,i),ra(n,i),n}function TR(n,e,t,i){var s=e.current,o=pr(),r=cg(s);return t=Noe(t),e.context===null?e.context=t:e.pendingContext=t,e=uh(o,r),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=ag(s,e,r),n!==null&&(Sc(n,s,r,o),nN(n,s,r)),r}function II(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function OY(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function _V(n,e){OY(n,e),(n=n.alternate)&&OY(n,e)}function qve(){return null}var Toe=typeof reportError=="function"?reportError:function(n){console.error(n)};function bV(n){this._internalRoot=n}PR.prototype.render=bV.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ee(409));TR(n,e,null,null)};PR.prototype.unmount=bV.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;eb(function(){TR(null,n,null,null)}),e[Ch]=null}};function PR(n){this._internalRoot=n}PR.prototype.unstable_scheduleHydration=function(n){if(n){var e=lse();n={blockedOn:null,target:n,priority:e};for(var t=0;t<xf.length&&e!==0&&e<xf[t].priority;t++);xf.splice(t,0,n),t===0&&dse(n)}};function vV(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function MR(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function FY(){}function Kve(n,e,t,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=II(r);o.call(c)}}var r=Ioe(e,i,n,0,null,!1,!1,"",FY);return n._reactRootContainer=r,n[Ch]=r.current,gx(n.nodeType===8?n.parentNode:n),eb(),r}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=II(l);a.call(c)}}var l=pV(n,0,!1,null,null,!1,!1,"",FY);return n._reactRootContainer=l,n[Ch]=l.current,gx(n.nodeType===8?n.parentNode:n),eb(function(){TR(e,l,t,i)}),l}function RR(n,e,t,i,s){var o=t._reactRootContainer;if(o){var r=o;if(typeof s=="function"){var a=s;s=function(){var l=II(r);a.call(l)}}TR(e,r,n,s)}else r=Kve(t,e,n,s,i);return II(r)}rse=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=m0(e.pendingLanes);t!==0&&(W6(e,t|1),ra(e,is()),!(xi&6)&&(XC=is()+500,um()))}break;case 13:eb(function(){var i=yh(n,1);if(i!==null){var s=pr();Sc(i,n,1,s)}}),_V(n,1)}};B6=function(n){if(n.tag===13){var e=yh(n,134217728);if(e!==null){var t=pr();Sc(e,n,134217728,t)}_V(n,134217728)}};ase=function(n){if(n.tag===13){var e=cg(n),t=yh(n,e);if(t!==null){var i=pr();Sc(t,n,e,i)}_V(n,e)}};lse=function(){return Xi};cse=function(n,e){var t=Xi;try{return Xi=n,e()}finally{Xi=t}};G5=function(n,e,t){switch(e){case"input":if(j5(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=xR(i);if(!s)throw Error(Ee(90));Hne(i),j5(i,s)}}}break;case"textarea":Vne(n,t);break;case"select":e=t.value,e!=null&&Bw(n,!!t.multiple,e,!1)}};Yne=hV;Zne=eb;var Gve={usingClientEntryPoint:!1,Events:[bL,$v,xR,Kne,Gne,hV]},R1={findFiberByHostInstance:wp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yve={bundleType:R1.bundleType,version:R1.version,rendererPackageName:R1.rendererPackageName,rendererConfig:R1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hh.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Jne(n),n===null?null:n.stateNode},findFiberByHostInstance:R1.findFiberByHostInstance||qve,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var TD=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!TD.isDisabled&&TD.supportsFiber)try{wR=TD.inject(Yve),Hd=TD}catch{}}Xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gve;Xa.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vV(e))throw Error(Ee(200));return $ve(n,e,null,t)};Xa.createRoot=function(n,e){if(!vV(n))throw Error(Ee(299));var t=!1,i="",s=Toe;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=pV(n,1,!1,null,null,t,!1,i,s),n[Ch]=e.current,gx(n.nodeType===8?n.parentNode:n),new bV(e)};Xa.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ee(188)):(n=Object.keys(n).join(","),Error(Ee(268,n)));return n=Jne(e),n=n===null?null:n.stateNode,n};Xa.flushSync=function(n){return eb(n)};Xa.hydrate=function(n,e,t){if(!MR(e))throw Error(Ee(200));return RR(null,n,e,!0,t)};Xa.hydrateRoot=function(n,e,t){if(!vV(n))throw Error(Ee(405));var i=t!=null&&t.hydratedSources||null,s=!1,o="",r=Toe;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),e=Ioe(e,null,n,1,t??null,s,!1,o,r),n[Ch]=e.current,gx(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new PR(e)};Xa.render=function(n,e,t){if(!MR(e))throw Error(Ee(200));return RR(null,n,e,!1,t)};Xa.unmountComponentAtNode=function(n){if(!MR(n))throw Error(Ee(40));return n._reactRootContainer?(eb(function(){RR(null,null,n,!1,function(){n._reactRootContainer=null,n[Ch]=null})}),!0):!1};Xa.unstable_batchedUpdates=hV;Xa.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!MR(t))throw Error(Ee(200));if(n==null||n._reactInternals===void 0)throw Error(Ee(38));return RR(n,e,t,!1,i)};Xa.version="18.3.1-next-f1338f8080-20240426";function Poe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Poe)}catch(n){console.error(n)}}Poe(),Pne.exports=Xa;var Ob=Pne.exports;const Zve=vne(Ob);var Moe,WY=Ob;Moe=WY.createRoot,WY.hydrateRoot;function Qve(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,i,s,o,r=[],a="",l=n.split("/");for(l[0]||l.shift();s=l.shift();)t=s[0],t==="*"?(r.push(t),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(i=s.indexOf("?",1),o=s.indexOf(".",1),r.push(s.substring(1,~i?i:~o?o:s.length)),a+=~i&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~i?"?":"")+"\\"+s.substring(o))):a+="/"+s;return{keys:r,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var Roe={exports:{}},Aoe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JC=P;function Xve(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Jve=typeof Object.is=="function"?Object.is:Xve,ewe=JC.useState,twe=JC.useEffect,iwe=JC.useLayoutEffect,nwe=JC.useDebugValue;function swe(n,e){var t=e(),i=ewe({inst:{value:t,getSnapshot:e}}),s=i[0].inst,o=i[1];return iwe(function(){s.value=t,s.getSnapshot=e,dF(s)&&o({inst:s})},[n,t,e]),twe(function(){return dF(s)&&o({inst:s}),n(function(){dF(s)&&o({inst:s})})},[n]),nwe(t),t}function dF(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Jve(n,t)}catch{return!0}}function owe(n,e){return e()}var rwe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?owe:swe;Aoe.useSyncExternalStore=JC.useSyncExternalStore!==void 0?JC.useSyncExternalStore:rwe;Roe.exports=Aoe;var awe=Roe.exports;const lwe=Ine.useInsertionEffect,cwe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ooe=cwe?P.useLayoutEffect:P.useEffect,dwe=lwe||Ooe,wV=n=>{const e=P.useRef([n,(...t)=>e[0](...t)]).current;return dwe(()=>{e[0]=n}),e[1]},uwe="popstate",CV="pushState",yV="replaceState",hwe="hashchange",BY=[uwe,CV,yV,hwe],fwe=n=>{for(const e of BY)addEventListener(e,n);return()=>{for(const e of BY)removeEventListener(e,n)}},Foe=(n,e)=>awe.useSyncExternalStore(fwe,n,e),gwe=()=>location.search,mwe=({ssrSearch:n=""}={})=>Foe(gwe,()=>n),HY=()=>location.pathname,pwe=({ssrPath:n}={})=>Foe(HY,n?()=>n:HY),_we=(n,{replace:e=!1,state:t=null}={})=>history[e?yV:CV](t,"",n),bwe=(n={})=>[pwe(n),_we],jY=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[jY]>"u"){for(const n of[CV,yV]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),i=new Event(n);return i.arguments=arguments,dispatchEvent(i),t}}Object.defineProperty(window,jY,{value:!0})}const vwe=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",Woe=(n="")=>n==="/"?"":n,wwe=(n,e)=>n[0]==="~"?n.slice(1):Woe(e)+n,Cwe=(n="",e)=>vwe(VY(Woe(n)),VY(e)),VY=n=>{try{return decodeURI(n)}catch{return n}},Boe={hook:bwe,searchHook:mwe,parser:Qve,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:n=>n},Hoe=P.createContext(Boe),wL=()=>P.useContext(Hoe),joe={},Voe=P.createContext(joe),SV=()=>P.useContext(Voe),AR=n=>{const[e,t]=n.hook(n);return[Cwe(n.base,e),wV((i,s)=>t(wwe(i,n.base),s))]},zoe=()=>AR(wL()),Uoe=(n,e,t,i)=>{const{pattern:s,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",i),r=s.exec(t)||[],[a,...l]=r;return a!==void 0?[!0,(()=>{const c=o!==!1?Object.fromEntries(o.map((u,h)=>[u,l[h]])):r.groups;let d={...l};return c&&Object.assign(d,c),d})(),...i?[a]:[]]:[!1,null]},ywe=({children:n,...e})=>{var d,u;const t=wL(),i=e.hook?Boe:t;let s=i;const[o,r]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];r&&(e.ssrSearch=r,e.ssrPath=o),e.hrefs=e.hrefs??((u=e.hook)==null?void 0:u.hrefs);let a=P.useRef({}),l=a.current,c=l;for(let h in i){const f=h==="base"?i[h]+(e[h]||""):e[h]||i[h];l===c&&f!==c[h]&&(a.current=c={...c}),c[h]=f,f!==i[h]&&(s=c)}return P.createElement(Hoe.Provider,{value:s,children:n})},zY=({children:n,component:e},t)=>e?P.createElement(e,{params:t}):typeof n=="function"?n(t):n,Swe=n=>{let e=P.useRef(joe),t=e.current;for(const i in n)n[i]!==t[i]&&(t=n);return Object.keys(n).length===0&&(t=n),e.current=t},_u=({path:n,nest:e,match:t,...i})=>{const s=wL(),[o]=AR(s),[r,a,l]=t??Uoe(s.parser,n,o,e),c=Swe({...SV(),...a});if(!r)return null;const d=l?P.createElement(ywe,{base:l},zY(i,c)):zY(i,c);return P.createElement(Voe.Provider,{value:c,children:d})},Tn=P.forwardRef((n,e)=>{const t=wL(),[i,s]=AR(t),{to:o="",href:r=o,onClick:a,asChild:l,children:c,className:d,replace:u,state:h,...f}=n,g=wV(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(a==null||a(_),_.defaultPrevented||(_.preventDefault(),s(r,n)))}),m=t.hrefs(r[0]==="~"?r.slice(1):t.base+r,t);return l&&P.isValidElement(c)?P.cloneElement(c,{onClick:g,href:m}):P.createElement("a",{...f,onClick:g,href:m,className:d!=null&&d.call?d(i===r):d,children:c,ref:e})}),$oe=n=>Array.isArray(n)?n.flatMap(e=>$oe(e&&e.type===P.Fragment?e.props.children:e)):[n],xwe=({children:n,location:e})=>{const t=wL(),[i]=AR(t);for(const s of $oe(n)){let o=0;if(P.isValidElement(s)&&(o=Uoe(t.parser,s.props.path,e||i,s.props.nest))[0])return P.cloneElement(s,{match:o})}return null},kwe=n=>{const{to:e,href:t=e}=n,[,i]=zoe(),s=wV(()=>i(e||t,n));return Ooe(()=>{s()},[]),null};var CL=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tb=typeof window>"u"||"Deno"in globalThis;function gl(){}function Lwe(n,e){return typeof n=="function"?n(e):n}function D3(n){return typeof n=="number"&&n>=0&&n!==1/0}function qoe(n,e){return Math.max(n+(e||0)-Date.now(),0)}function $w(n,e){return typeof n=="function"?n(e):n}function hc(n,e){return typeof n=="function"?n(e):n}function UY(n,e){const{type:t="all",exact:i,fetchStatus:s,predicate:o,queryKey:r,stale:a}=n;if(r){if(i){if(e.queryHash!==xV(r,e.options))return!1}else if(!xx(e.queryKey,r))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||o&&!o(e))}function $Y(n,e){const{exact:t,status:i,predicate:s,mutationKey:o}=n;if(o){if(!e.options.mutationKey)return!1;if(t){if(Sx(e.options.mutationKey)!==Sx(o))return!1}else if(!xx(e.options.mutationKey,o))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function xV(n,e){return((e==null?void 0:e.queryKeyHashFn)||Sx)(n)}function Sx(n){return JSON.stringify(n,(e,t)=>N3(t)?Object.keys(t).sort().reduce((i,s)=>(i[s]=t[s],i),{}):t)}function xx(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!xx(n[t],e[t])):!1}function Koe(n,e){if(n===e)return n;const t=qY(n)&&qY(e);if(t||N3(n)&&N3(e)){const i=t?n:Object.keys(n),s=i.length,o=t?e:Object.keys(e),r=o.length,a=t?[]:{};let l=0;for(let c=0;c<r;c++){const d=t?c:o[c];(!t&&i.includes(d)||t)&&n[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=Koe(n[d],e[d]),a[d]===n[d]&&n[d]!==void 0&&l++)}return s===r&&l===s?n:a}return e}function E3(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function qY(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function N3(n){if(!KY(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!KY(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function KY(n){return Object.prototype.toString.call(n)==="[object Object]"}function Dwe(n){return new Promise(e=>{setTimeout(e,n)})}function I3(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?Koe(n,e):e}function Ewe(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function Nwe(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var kV=Symbol();function Goe(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===kV?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Ip,Rf,CC,rne,Iwe=(rne=class extends CL{constructor(){super();Nt(this,Ip);Nt(this,Rf);Nt(this,CC);Ge(this,CC,e=>{if(!tb&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ie(this,Rf)||this.setEventListener(ie(this,CC))}onUnsubscribe(){var e;this.hasListeners()||((e=ie(this,Rf))==null||e.call(this),Ge(this,Rf,void 0))}setEventListener(e){var t;Ge(this,CC,e),(t=ie(this,Rf))==null||t.call(this),Ge(this,Rf,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){ie(this,Ip)!==e&&(Ge(this,Ip,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ie(this,Ip)=="boolean"?ie(this,Ip):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ip=new WeakMap,Rf=new WeakMap,CC=new WeakMap,rne),LV=new Iwe,yC,Af,SC,ane,Twe=(ane=class extends CL{constructor(){super();Nt(this,yC,!0);Nt(this,Af);Nt(this,SC);Ge(this,SC,e=>{if(!tb&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){ie(this,Af)||this.setEventListener(ie(this,SC))}onUnsubscribe(){var e;this.hasListeners()||((e=ie(this,Af))==null||e.call(this),Ge(this,Af,void 0))}setEventListener(e){var t;Ge(this,SC,e),(t=ie(this,Af))==null||t.call(this),Ge(this,Af,e(this.setOnline.bind(this)))}setOnline(e){ie(this,yC)!==e&&(Ge(this,yC,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return ie(this,yC)}},yC=new WeakMap,Af=new WeakMap,SC=new WeakMap,ane),TI=new Twe;function T3(){let n,e;const t=new Promise((s,o)=>{n=s,e=o});t.status="pending",t.catch(()=>{});function i(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{i({status:"fulfilled",value:s}),n(s)},t.reject=s=>{i({status:"rejected",reason:s}),e(s)},t}function Pwe(n){return Math.min(1e3*2**n,3e4)}function Yoe(n){return(n??"online")==="online"?TI.isOnline():!0}var Zoe=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function uF(n){return n instanceof Zoe}function Qoe(n){let e=!1,t=0,i=!1,s;const o=T3(),r=m=>{var _;i||(h(new Zoe(m)),(_=n.abort)==null||_.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>LV.isFocused()&&(n.networkMode==="always"||TI.isOnline())&&n.canRun(),d=()=>Yoe(n.networkMode)&&n.canRun(),u=m=>{var _;i||(i=!0,(_=n.onSuccess)==null||_.call(n,m),s==null||s(),o.resolve(m))},h=m=>{var _;i||(i=!0,(_=n.onError)==null||_.call(n,m),s==null||s(),o.reject(m))},f=()=>new Promise(m=>{var _;s=b=>{(i||c())&&m(b)},(_=n.onPause)==null||_.call(n)}).then(()=>{var m;s=void 0,i||(m=n.onContinue)==null||m.call(n)}),g=()=>{if(i)return;let m;const _=t===0?n.initialPromise:void 0;try{m=_??n.fn()}catch(b){m=Promise.reject(b)}Promise.resolve(m).then(u).catch(b=>{var x;if(i)return;const v=n.retry??(tb?0:3),w=n.retryDelay??Pwe,y=typeof w=="function"?w(t,b):w,S=v===!0||typeof v=="number"&&t<v||typeof v=="function"&&v(t,b);if(e||!S){h(b);return}t++,(x=n.onFail)==null||x.call(n,t,b),Dwe(y).then(()=>c()?void 0:f()).then(()=>{e?h(b):g()})})};return{promise:o,cancel:r,continue:()=>(s==null||s(),o),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?g():f().then(g),o)}}function Mwe(){let n=[],e=0,t=a=>{a()},i=a=>{a()},s=a=>setTimeout(a,0);const o=a=>{e?n.push(a):s(()=>{t(a)})},r=()=>{const a=n;n=[],a.length&&s(()=>{i(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||r()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{i=a},setScheduler:a=>{s=a}}}var oo=Mwe(),Tp,lne,Xoe=(lne=class{constructor(){Nt(this,Tp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),D3(this.gcTime)&&Ge(this,Tp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(tb?1/0:5*60*1e3))}clearGcTimeout(){ie(this,Tp)&&(clearTimeout(ie(this,Tp)),Ge(this,Tp,void 0))}},Tp=new WeakMap,lne),xC,kC,fl,Mo,uL,Pp,rc,xu,cne,Rwe=(cne=class extends Xoe{constructor(e){super();Nt(this,rc);Nt(this,xC);Nt(this,kC);Nt(this,fl);Nt(this,Mo);Nt(this,uL);Nt(this,Pp);Ge(this,Pp,!1),Ge(this,uL,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ge(this,fl,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ge(this,xC,Awe(this.options)),this.state=e.state??ie(this,xC),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ie(this,Mo))==null?void 0:e.promise}setOptions(e){this.options={...ie(this,uL),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ie(this,fl).remove(this)}setData(e,t){const i=I3(this.state.data,e,this.options);return ai(this,rc,xu).call(this,{data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){ai(this,rc,xu).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var i,s;const t=(i=ie(this,Mo))==null?void 0:i.promise;return(s=ie(this,Mo))==null||s.cancel(e),t?t.then(gl).catch(gl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ie(this,xC))}isActive(){return this.observers.some(e=>hc(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===kV||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!qoe(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ie(this,Mo))==null||t.continue()}onOnline(){var t;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ie(this,Mo))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ie(this,fl).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ie(this,Mo)&&(ie(this,Pp)?ie(this,Mo).cancel({revert:!0}):ie(this,Mo).cancelRetry()),this.scheduleGc()),ie(this,fl).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ai(this,rc,xu).call(this,{type:"invalidate"})}fetch(e,t){var l,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ie(this,Mo))return ie(this,Mo).continueRetry(),ie(this,Mo).promise}if(e&&this.setOptions(e),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const i=new AbortController,s=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(Ge(this,Pp,!0),i.signal)})},o=()=>{const u=Goe(this.options,t),h={queryKey:this.queryKey,meta:this.meta};return s(h),Ge(this,Pp,!1),this.options.persister?this.options.persister(u,h,this):u(h)},r={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};s(r),(l=this.options.behavior)==null||l.onFetch(r,this),Ge(this,kC,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=r.fetchOptions)==null?void 0:c.meta))&&ai(this,rc,xu).call(this,{type:"fetch",meta:(d=r.fetchOptions)==null?void 0:d.meta});const a=u=>{var h,f,g,m;uF(u)&&u.silent||ai(this,rc,xu).call(this,{type:"error",error:u}),uF(u)||((f=(h=ie(this,fl).config).onError)==null||f.call(h,u,this),(m=(g=ie(this,fl).config).onSettled)==null||m.call(g,this.state.data,u,this)),this.scheduleGc()};return Ge(this,Mo,Qoe({initialPromise:t==null?void 0:t.initialPromise,fn:r.fetchFn,abort:i.abort.bind(i),onSuccess:u=>{var h,f,g,m;if(u===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(_){a(_);return}(f=(h=ie(this,fl).config).onSuccess)==null||f.call(h,u,this),(m=(g=ie(this,fl).config).onSettled)==null||m.call(g,u,this.state.error,this),this.scheduleGc()},onError:a,onFail:(u,h)=>{ai(this,rc,xu).call(this,{type:"failed",failureCount:u,error:h})},onPause:()=>{ai(this,rc,xu).call(this,{type:"pause"})},onContinue:()=>{ai(this,rc,xu).call(this,{type:"continue"})},retry:r.options.retry,retryDelay:r.options.retryDelay,networkMode:r.options.networkMode,canRun:()=>!0})),ie(this,Mo).start()}},xC=new WeakMap,kC=new WeakMap,fl=new WeakMap,Mo=new WeakMap,uL=new WeakMap,Pp=new WeakMap,rc=new WeakSet,xu=function(e){const t=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Joe(i.data,this.options),fetchMeta:e.meta??null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return uF(s)&&s.revert&&ie(this,kC)?{...ie(this,kC),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),oo.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),ie(this,fl).notify({query:this,type:"updated",action:e})})},cne);function Joe(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Yoe(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Awe(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Cd,dne,Owe=(dne=class extends CL{constructor(e={}){super();Nt(this,Cd);this.config=e,Ge(this,Cd,new Map)}build(e,t,i){const s=t.queryKey,o=t.queryHash??xV(s,t);let r=this.get(o);return r||(r=new Rwe({cache:this,queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(r)),r}add(e){ie(this,Cd).has(e.queryHash)||(ie(this,Cd).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ie(this,Cd).get(e.queryHash);t&&(e.destroy(),t===e&&ie(this,Cd).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){oo.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ie(this,Cd).get(e)}getAll(){return[...ie(this,Cd).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(i=>UY(t,i))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(i=>UY(e,i)):t}notify(e){oo.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){oo.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){oo.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Cd=new WeakMap,dne),yd,sr,Mp,Sd,lf,une,Fwe=(une=class extends Xoe{constructor(e){super();Nt(this,Sd);Nt(this,yd);Nt(this,sr);Nt(this,Mp);this.mutationId=e.mutationId,Ge(this,sr,e.mutationCache),Ge(this,yd,[]),this.state=e.state||Wwe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ie(this,yd).includes(e)||(ie(this,yd).push(e),this.clearGcTimeout(),ie(this,sr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ge(this,yd,ie(this,yd).filter(t=>t!==e)),this.scheduleGc(),ie(this,sr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ie(this,yd).length||(this.state.status==="pending"?this.scheduleGc():ie(this,sr).remove(this))}continue(){var e;return((e=ie(this,Mp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,r,a,l,c,d,u,h,f,g,m,_,b,v,w,y,S,x,k;Ge(this,Mp,Qoe({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(D,N)=>{ai(this,Sd,lf).call(this,{type:"failed",failureCount:D,error:N})},onPause:()=>{ai(this,Sd,lf).call(this,{type:"pause"})},onContinue:()=>{ai(this,Sd,lf).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ie(this,sr).canRun(this)}));const t=this.state.status==="pending",i=!ie(this,Mp).canStart();try{if(!t){ai(this,Sd,lf).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=ie(this,sr).config).onMutate)==null?void 0:o.call(s,e,this));const N=await((a=(r=this.options).onMutate)==null?void 0:a.call(r,e));N!==this.state.context&&ai(this,Sd,lf).call(this,{type:"pending",context:N,variables:e,isPaused:i})}const D=await ie(this,Mp).start();return await((c=(l=ie(this,sr).config).onSuccess)==null?void 0:c.call(l,D,e,this.state.context,this)),await((u=(d=this.options).onSuccess)==null?void 0:u.call(d,D,e,this.state.context)),await((f=(h=ie(this,sr).config).onSettled)==null?void 0:f.call(h,D,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,D,null,e,this.state.context)),ai(this,Sd,lf).call(this,{type:"success",data:D}),D}catch(D){try{throw await((b=(_=ie(this,sr).config).onError)==null?void 0:b.call(_,D,e,this.state.context,this)),await((w=(v=this.options).onError)==null?void 0:w.call(v,D,e,this.state.context)),await((S=(y=ie(this,sr).config).onSettled)==null?void 0:S.call(y,void 0,D,this.state.variables,this.state.context,this)),await((k=(x=this.options).onSettled)==null?void 0:k.call(x,void 0,D,e,this.state.context)),D}finally{ai(this,Sd,lf).call(this,{type:"error",error:D})}}finally{ie(this,sr).runNext(this)}}},yd=new WeakMap,sr=new WeakMap,Mp=new WeakMap,Sd=new WeakSet,lf=function(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),oo.batch(()=>{ie(this,yd).forEach(i=>{i.onMutationUpdate(e)}),ie(this,sr).notify({mutation:this,type:"updated",action:e})})},une);function Wwe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Da,hL,hne,Bwe=(hne=class extends CL{constructor(e={}){super();Nt(this,Da);Nt(this,hL);this.config=e,Ge(this,Da,new Map),Ge(this,hL,Date.now())}build(e,t,i){const s=new Fwe({mutationCache:this,mutationId:++gD(this,hL)._,options:e.defaultMutationOptions(t),state:i});return this.add(s),s}add(e){const t=PD(e),i=ie(this,Da).get(t)??[];i.push(e),ie(this,Da).set(t,i),this.notify({type:"added",mutation:e})}remove(e){var i;const t=PD(e);if(ie(this,Da).has(t)){const s=(i=ie(this,Da).get(t))==null?void 0:i.filter(o=>o!==e);s&&(s.length===0?ie(this,Da).delete(t):ie(this,Da).set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){var i;const t=(i=ie(this,Da).get(PD(e)))==null?void 0:i.find(s=>s.state.status==="pending");return!t||t===e}runNext(e){var i;const t=(i=ie(this,Da).get(PD(e)))==null?void 0:i.find(s=>s!==e&&s.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){oo.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ie(this,Da).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(i=>$Y(t,i))}findAll(e={}){return this.getAll().filter(t=>$Y(e,t))}notify(e){oo.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return oo.batch(()=>Promise.all(e.map(t=>t.continue().catch(gl))))}},Da=new WeakMap,hL=new WeakMap,hne);function PD(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function GY(n){return{onFetch:(e,t)=>{var d,u,h,f,g;const i=e.options,s=(h=(u=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:u.fetchMore)==null?void 0:h.direction,o=((f=e.state.data)==null?void 0:f.pages)||[],r=((g=e.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const _=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},b=Goe(e.options,e.fetchOptions),v=async(w,y,S)=>{if(m)return Promise.reject();if(y==null&&w.pages.length)return Promise.resolve(w);const x={queryKey:e.queryKey,pageParam:y,direction:S?"backward":"forward",meta:e.options.meta};_(x);const k=await b(x),{maxPages:D}=e.options,N=S?Nwe:Ewe;return{pages:N(w.pages,k,D),pageParams:N(w.pageParams,y,D)}};if(s&&o.length){const w=s==="backward",y=w?Hwe:YY,S={pages:o,pageParams:r},x=y(i,S);a=await v(S,x,w)}else{const w=n??o.length;do{const y=l===0?r[0]??i.initialPageParam:YY(i,a);if(l>0&&y==null)break;a=await v(a,y),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var m,_;return(_=(m=e.options).persister)==null?void 0:_.call(m,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function YY(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function Hwe(n,{pages:e,pageParams:t}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,t[0],t):void 0}var Vn,Of,Ff,LC,DC,Wf,EC,NC,fne,jwe=(fne=class{constructor(n={}){Nt(this,Vn);Nt(this,Of);Nt(this,Ff);Nt(this,LC);Nt(this,DC);Nt(this,Wf);Nt(this,EC);Nt(this,NC);Ge(this,Vn,n.queryCache||new Owe),Ge(this,Of,n.mutationCache||new Bwe),Ge(this,Ff,n.defaultOptions||{}),Ge(this,LC,new Map),Ge(this,DC,new Map),Ge(this,Wf,0)}mount(){gD(this,Wf)._++,ie(this,Wf)===1&&(Ge(this,EC,LV.subscribe(async n=>{n&&(await this.resumePausedMutations(),ie(this,Vn).onFocus())})),Ge(this,NC,TI.subscribe(async n=>{n&&(await this.resumePausedMutations(),ie(this,Vn).onOnline())})))}unmount(){var n,e;gD(this,Wf)._--,ie(this,Wf)===0&&((n=ie(this,EC))==null||n.call(this),Ge(this,EC,void 0),(e=ie(this,NC))==null||e.call(this),Ge(this,NC,void 0))}isFetching(n){return ie(this,Vn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ie(this,Of).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ie(this,Vn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),i=ie(this,Vn).build(this,t);return n.revalidateIfStale&&i.isStaleByTime($w(t.staleTime,i))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return ie(this,Vn).findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),s=ie(this,Vn).get(i.queryHash),o=s==null?void 0:s.state.data,r=Lwe(e,o);if(r!==void 0)return ie(this,Vn).build(this,i).setData(r,{...t,manual:!0})}setQueriesData(n,e,t){return oo.batch(()=>ie(this,Vn).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ie(this,Vn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ie(this,Vn);oo.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ie(this,Vn),i={type:"active",...n};return oo.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries(i,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},i=oo.batch(()=>ie(this,Vn).findAll(n).map(s=>s.cancel(t)));return Promise.all(i).then(gl).catch(gl)}invalidateQueries(n={},e={}){return oo.batch(()=>{if(ie(this,Vn).findAll(n).forEach(i=>{i.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},i=oo.batch(()=>ie(this,Vn).findAll(n).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,t);return t.throwOnError||(o=o.catch(gl)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(gl)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ie(this,Vn).build(this,e);return t.isStaleByTime($w(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(gl).catch(gl)}fetchInfiniteQuery(n){return n.behavior=GY(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(gl).catch(gl)}ensureInfiniteQueryData(n){return n.behavior=GY(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return TI.isOnline()?ie(this,Of).resumePausedMutations():Promise.resolve()}getQueryCache(){return ie(this,Vn)}getMutationCache(){return ie(this,Of)}getDefaultOptions(){return ie(this,Ff)}setDefaultOptions(n){Ge(this,Ff,n)}setQueryDefaults(n,e){ie(this,LC).set(Sx(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ie(this,LC).values()];let t={};return e.forEach(i=>{xx(n,i.queryKey)&&(t={...t,...i.defaultOptions})}),t}setMutationDefaults(n,e){ie(this,DC).set(Sx(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ie(this,DC).values()];let t={};return e.forEach(i=>{xx(n,i.mutationKey)&&(t={...t,...i.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ie(this,Ff).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=xV(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===kV&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ie(this,Ff).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ie(this,Vn).clear(),ie(this,Of).clear()}},Vn=new WeakMap,Of=new WeakMap,Ff=new WeakMap,LC=new WeakMap,DC=new WeakMap,Wf=new WeakMap,EC=new WeakMap,NC=new WeakMap,fne),Vr,li,fL,or,Rp,IC,Bf,xd,gL,TC,PC,Ap,Op,Hf,MC,Ui,_0,P3,M3,R3,A3,O3,F3,W3,ere,gne,Vwe=(gne=class extends CL{constructor(e,t){super();Nt(this,Ui);Nt(this,Vr);Nt(this,li);Nt(this,fL);Nt(this,or);Nt(this,Rp);Nt(this,IC);Nt(this,Bf);Nt(this,xd);Nt(this,gL);Nt(this,TC);Nt(this,PC);Nt(this,Ap);Nt(this,Op);Nt(this,Hf);Nt(this,MC,new Set);this.options=t,Ge(this,Vr,e),Ge(this,xd,null),Ge(this,Bf,T3()),this.options.experimental_prefetchInRender||ie(this,Bf).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ie(this,li).addObserver(this),ZY(ie(this,li),this.options)?ai(this,Ui,_0).call(this):this.updateResult(),ai(this,Ui,A3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return B3(ie(this,li),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return B3(ie(this,li),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ai(this,Ui,O3).call(this),ai(this,Ui,F3).call(this),ie(this,li).removeObserver(this)}setOptions(e,t){const i=this.options,s=ie(this,li);if(this.options=ie(this,Vr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof hc(this.options.enabled,ie(this,li))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ai(this,Ui,W3).call(this),ie(this,li).setOptions(this.options),i._defaulted&&!E3(this.options,i)&&ie(this,Vr).getQueryCache().notify({type:"observerOptionsUpdated",query:ie(this,li),observer:this});const o=this.hasListeners();o&&QY(ie(this,li),s,this.options,i)&&ai(this,Ui,_0).call(this),this.updateResult(t),o&&(ie(this,li)!==s||hc(this.options.enabled,ie(this,li))!==hc(i.enabled,ie(this,li))||$w(this.options.staleTime,ie(this,li))!==$w(i.staleTime,ie(this,li)))&&ai(this,Ui,P3).call(this);const r=ai(this,Ui,M3).call(this);o&&(ie(this,li)!==s||hc(this.options.enabled,ie(this,li))!==hc(i.enabled,ie(this,li))||r!==ie(this,Hf))&&ai(this,Ui,R3).call(this,r)}getOptimisticResult(e){const t=ie(this,Vr).getQueryCache().build(ie(this,Vr),e),i=this.createResult(t,e);return Uwe(this,i)&&(Ge(this,or,i),Ge(this,IC,this.options),Ge(this,Rp,ie(this,li).state)),i}getCurrentResult(){return ie(this,or)}trackResult(e,t){const i={};return Object.keys(e).forEach(s=>{Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),t==null||t(s),e[s])})}),i}trackProp(e){ie(this,MC).add(e)}getCurrentQuery(){return ie(this,li)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ie(this,Vr).defaultQueryOptions(e),i=ie(this,Vr).getQueryCache().build(ie(this,Vr),t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return ai(this,Ui,_0).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ie(this,or)))}createResult(e,t){var D;const i=ie(this,li),s=this.options,o=ie(this,or),r=ie(this,Rp),a=ie(this,IC),c=e!==i?e.state:ie(this,fL),{state:d}=e;let u={...d},h=!1,f;if(t._optimisticResults){const N=this.hasListeners(),R=!N&&ZY(e,t),O=N&&QY(e,i,t,s);(R||O)&&(u={...u,...Joe(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:m,status:_}=u;if(t.select&&u.data!==void 0)if(o&&u.data===(r==null?void 0:r.data)&&t.select===ie(this,gL))f=ie(this,TC);else try{Ge(this,gL,t.select),f=t.select(u.data),f=I3(o==null?void 0:o.data,f,t),Ge(this,TC,f),Ge(this,xd,null)}catch(N){Ge(this,xd,N)}else f=u.data;if(t.placeholderData!==void 0&&f===void 0&&_==="pending"){let N;if(o!=null&&o.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))N=o.data;else if(N=typeof t.placeholderData=="function"?t.placeholderData((D=ie(this,PC))==null?void 0:D.state.data,ie(this,PC)):t.placeholderData,t.select&&N!==void 0)try{N=t.select(N),Ge(this,xd,null)}catch(R){Ge(this,xd,R)}N!==void 0&&(_="success",f=I3(o==null?void 0:o.data,N,t),h=!0)}ie(this,xd)&&(g=ie(this,xd),f=ie(this,TC),m=Date.now(),_="error");const b=u.fetchStatus==="fetching",v=_==="pending",w=_==="error",y=v&&b,S=f!==void 0,k={status:_,fetchStatus:u.fetchStatus,isPending:v,isSuccess:_==="success",isError:w,isInitialLoading:y,isLoading:y,data:f,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:w&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:w&&S,isStale:DV(e,t),refetch:this.refetch,promise:ie(this,Bf)};if(this.options.experimental_prefetchInRender){const N=B=>{k.status==="error"?B.reject(k.error):k.data!==void 0&&B.resolve(k.data)},R=()=>{const B=Ge(this,Bf,k.promise=T3());N(B)},O=ie(this,Bf);switch(O.status){case"pending":e.queryHash===i.queryHash&&N(O);break;case"fulfilled":(k.status==="error"||k.data!==O.value)&&R();break;case"rejected":(k.status!=="error"||k.error!==O.reason)&&R();break}}return k}updateResult(e){const t=ie(this,or),i=this.createResult(ie(this,li),this.options);if(Ge(this,Rp,ie(this,li).state),Ge(this,IC,this.options),ie(this,Rp).data!==void 0&&Ge(this,PC,ie(this,li)),E3(i,t))return;Ge(this,or,i);const s={},o=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!ie(this,MC).size)return!0;const l=new Set(a??ie(this,MC));return this.options.throwOnError&&l.add("error"),Object.keys(ie(this,or)).some(c=>{const d=c;return ie(this,or)[d]!==t[d]&&l.has(d)})};(e==null?void 0:e.listeners)!==!1&&o()&&(s.listeners=!0),ai(this,Ui,ere).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ai(this,Ui,A3).call(this)}},Vr=new WeakMap,li=new WeakMap,fL=new WeakMap,or=new WeakMap,Rp=new WeakMap,IC=new WeakMap,Bf=new WeakMap,xd=new WeakMap,gL=new WeakMap,TC=new WeakMap,PC=new WeakMap,Ap=new WeakMap,Op=new WeakMap,Hf=new WeakMap,MC=new WeakMap,Ui=new WeakSet,_0=function(e){ai(this,Ui,W3).call(this);let t=ie(this,li).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(gl)),t},P3=function(){ai(this,Ui,O3).call(this);const e=$w(this.options.staleTime,ie(this,li));if(tb||ie(this,or).isStale||!D3(e))return;const i=qoe(ie(this,or).dataUpdatedAt,e)+1;Ge(this,Ap,setTimeout(()=>{ie(this,or).isStale||this.updateResult()},i))},M3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ie(this,li)):this.options.refetchInterval)??!1},R3=function(e){ai(this,Ui,F3).call(this),Ge(this,Hf,e),!(tb||hc(this.options.enabled,ie(this,li))===!1||!D3(ie(this,Hf))||ie(this,Hf)===0)&&Ge(this,Op,setInterval(()=>{(this.options.refetchIntervalInBackground||LV.isFocused())&&ai(this,Ui,_0).call(this)},ie(this,Hf)))},A3=function(){ai(this,Ui,P3).call(this),ai(this,Ui,R3).call(this,ai(this,Ui,M3).call(this))},O3=function(){ie(this,Ap)&&(clearTimeout(ie(this,Ap)),Ge(this,Ap,void 0))},F3=function(){ie(this,Op)&&(clearInterval(ie(this,Op)),Ge(this,Op,void 0))},W3=function(){const e=ie(this,Vr).getQueryCache().build(ie(this,Vr),this.options);if(e===ie(this,li))return;const t=ie(this,li);Ge(this,li,e),Ge(this,fL,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},ere=function(e){oo.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ie(this,or))}),ie(this,Vr).getQueryCache().notify({query:ie(this,li),type:"observerResultsUpdated"})})},gne);function zwe(n,e){return hc(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function ZY(n,e){return zwe(n,e)||n.state.data!==void 0&&B3(n,e,e.refetchOnMount)}function B3(n,e,t){if(hc(e.enabled,n)!==!1){const i=typeof t=="function"?t(n):t;return i==="always"||i!==!1&&DV(n,e)}return!1}function QY(n,e,t,i){return(n!==e||hc(i.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&DV(n,t)}function DV(n,e){return hc(e.enabled,n)!==!1&&n.isStaleByTime($w(e.staleTime,n))}function Uwe(n,e){return!E3(n.getCurrentResult(),e)}var tre=P.createContext(void 0),$we=n=>{const e=P.useContext(tre);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qwe=({client:n,children:e})=>(P.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),C.jsx(tre.Provider,{value:n,children:e})),ire=P.createContext(!1),Kwe=()=>P.useContext(ire);ire.Provider;function Gwe(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Ywe=P.createContext(Gwe()),Zwe=()=>P.useContext(Ywe);function Qwe(n,e){return typeof n=="function"?n(...e):!!n}function XY(){}var Xwe=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},Jwe=n=>{P.useEffect(()=>{n.clearReset()},[n])},eCe=({result:n,errorResetBoundary:e,throwOnError:t,query:i})=>n.isError&&!e.isReset()&&!n.isFetching&&i&&Qwe(t,[n.error,i]),tCe=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},iCe=(n,e)=>n.isLoading&&n.isFetching&&!e,nCe=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,JY=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function sCe(n,e,t){var d,u,h,f,g;const i=$we(),s=Kwe(),o=Zwe(),r=i.defaultQueryOptions(n);(u=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||u.call(d,r),r._optimisticResults=s?"isRestoring":"optimistic",tCe(r),Xwe(r,o),Jwe(o);const a=!i.getQueryCache().get(r.queryHash),[l]=P.useState(()=>new e(i,r)),c=l.getOptimisticResult(r);if(P.useSyncExternalStore(P.useCallback(m=>{const _=s?XY:l.subscribe(oo.batchCalls(m));return l.updateResult(),_},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),P.useEffect(()=>{l.setOptions(r,{listeners:!1})},[r,l]),nCe(r,c))throw JY(r,l,o);if(eCe({result:c,errorResetBoundary:o,throwOnError:r.throwOnError,query:i.getQueryCache().get(r.queryHash)}))throw c.error;if((f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||f.call(h,r,c),r.experimental_prefetchInRender&&!tb&&iCe(c,s)){const m=a?JY(r,l,o):(g=i.getQueryCache().get(r.queryHash))==null?void 0:g.promise;m==null||m.catch(XY).finally(()=>{l.updateResult()})}return r.notifyOnChangeProps?c:l.trackResult(c)}function ey(n,e){return sCe(n,Vwe)}async function oCe(n){if(!n.ok){const e=await n.text()||n.statusText;throw new Error(`${n.status}: ${e}`)}}const rCe=({on401:n})=>async({queryKey:e})=>{const t=await fetch(e.join("/"),{credentials:"include"});return n==="returnNull"&&t.status===401?null:(await oCe(t),await t.json())},aCe=new jwe({defaultOptions:{queries:{queryFn:rCe({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!0,staleTime:0,cacheTime:0,retry:!1},mutations:{retry:!1}}}),lCe=1,cCe=1e6;let hF=0;function dCe(){return hF=(hF+1)%Number.MAX_SAFE_INTEGER,hF.toString()}const fF=new Map,eZ=n=>{if(fF.has(n))return;const e=setTimeout(()=>{fF.delete(n),tS({type:"REMOVE_TOAST",toastId:n})},cCe);fF.set(n,e)},uCe=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,lCe)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?eZ(t):n.toasts.forEach(i=>{eZ(i.id)}),{...n,toasts:n.toasts.map(i=>i.id===t||t===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},dN=[];let uN={toasts:[]};function tS(n){uN=uCe(uN,n),dN.forEach(e=>{e(uN)})}function hCe({...n}){const e=dCe(),t=s=>tS({type:"UPDATE_TOAST",toast:{...s,id:e}}),i=()=>tS({type:"DISMISS_TOAST",toastId:e});return tS({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||i()}}}),{id:e,dismiss:i,update:t}}function EV(){const[n,e]=P.useState(uN);return P.useEffect(()=>(dN.push(e),()=>{const t=dN.indexOf(e);t>-1&&dN.splice(t,1)}),[n]),{...n,toast:hCe,dismiss:t=>tS({type:"DISMISS_TOAST",toastId:t})}}function At(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function tZ(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function nre(...n){return e=>{let t=!1;const i=n.map(s=>{const o=tZ(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<i.length;s++){const o=i[s];typeof o=="function"?o():tZ(n[s],null)}}}}function Hn(...n){return P.useCallback(nre(...n),n)}function Fb(n,e=[]){let t=[];function i(o,r){const a=P.createContext(r),l=t.length;t=[...t,r];const c=u=>{var b;const{scope:h,children:f,...g}=u,m=((b=h==null?void 0:h[n])==null?void 0:b[l])||a,_=P.useMemo(()=>g,Object.values(g));return C.jsx(m.Provider,{value:_,children:f})};c.displayName=o+"Provider";function d(u,h){var m;const f=((m=h==null?void 0:h[n])==null?void 0:m[l])||a,g=P.useContext(f);if(g)return g;if(r!==void 0)return r;throw new Error(`\`${u}\` must be used within \`${o}\``)}return[c,d]}const s=()=>{const o=t.map(r=>P.createContext(r));return function(a){const l=(a==null?void 0:a[n])||o;return P.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[i,fCe(s,...e)]}function fCe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const r=i.reduce((a,{useScope:l,scopeName:c})=>{const u=l(o)[`__scope${c}`];return{...a,...u}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:r}),[r])}};return t.scopeName=e.scopeName,t}function kx(n){const e=mCe(n),t=P.forwardRef((i,s)=>{const{children:o,...r}=i,a=P.Children.toArray(o),l=a.find(_Ce);if(l){const c=l.props.children,d=a.map(u=>u===l?P.Children.count(c)>1?P.Children.only(null):P.isValidElement(c)?c.props.children:null:u);return C.jsx(e,{...r,ref:s,children:P.isValidElement(c)?P.cloneElement(c,void 0,d):null})}return C.jsx(e,{...r,ref:s,children:o})});return t.displayName=`${n}.Slot`,t}var gCe=kx("Slot");function mCe(n){const e=P.forwardRef((t,i)=>{const{children:s,...o}=t;if(P.isValidElement(s)){const r=vCe(s),a=bCe(o,s.props);return s.type!==P.Fragment&&(a.ref=i?nre(i,r):r),P.cloneElement(s,a)}return P.Children.count(s)>1?P.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var sre=Symbol("radix.slottable");function pCe(n){const e=({children:t})=>C.jsx(C.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=sre,e}function _Ce(n){return P.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===sre}function bCe(n,e){const t={...e};for(const i in e){const s=n[i],o=e[i];/^on[A-Z]/.test(i)?s&&o?t[i]=(...a)=>{o(...a),s(...a)}:s&&(t[i]=s):i==="style"?t[i]={...s,...o}:i==="className"&&(t[i]=[s,o].filter(Boolean).join(" "))}return{...n,...t}}function vCe(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function NV(n){const e=n+"CollectionProvider",[t,i]=Fb(e),[s,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),r=m=>{const{scope:_,children:b}=m,v=af.useRef(null),w=af.useRef(new Map).current;return C.jsx(s,{scope:_,itemMap:w,collectionRef:v,children:b})};r.displayName=e;const a=n+"CollectionSlot",l=kx(a),c=af.forwardRef((m,_)=>{const{scope:b,children:v}=m,w=o(a,b),y=Hn(_,w.collectionRef);return C.jsx(l,{ref:y,children:v})});c.displayName=a;const d=n+"CollectionItemSlot",u="data-radix-collection-item",h=kx(d),f=af.forwardRef((m,_)=>{const{scope:b,children:v,...w}=m,y=af.useRef(null),S=Hn(_,y),x=o(d,b);return af.useEffect(()=>(x.itemMap.set(y,{ref:y,...w}),()=>void x.itemMap.delete(y))),C.jsx(h,{[u]:"",ref:S,children:v})});f.displayName=d;function g(m){const _=o(n+"CollectionConsumer",m);return af.useCallback(()=>{const v=_.collectionRef.current;if(!v)return[];const w=Array.from(v.querySelectorAll(`[${u}]`));return Array.from(_.itemMap.values()).sort((x,k)=>w.indexOf(x.ref.current)-w.indexOf(k.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:r,Slot:c,ItemSlot:f},g,i]}var wCe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ci=wCe.reduce((n,e)=>{const t=kx(`Primitive.${e}`),i=P.forwardRef((s,o)=>{const{asChild:r,...a}=s,l=r?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(l,{...a,ref:o})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function ore(n,e){n&&Ob.flushSync(()=>n.dispatchEvent(e))}function da(n){const e=P.useRef(n);return P.useEffect(()=>{e.current=n}),P.useMemo(()=>(...t)=>{var i;return(i=e.current)==null?void 0:i.call(e,...t)},[])}function CCe(n,e=globalThis==null?void 0:globalThis.document){const t=da(n);P.useEffect(()=>{const i=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var yCe="DismissableLayer",H3="dismissableLayer.update",SCe="dismissableLayer.pointerDownOutside",xCe="dismissableLayer.focusOutside",iZ,rre=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),OR=P.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:r,onDismiss:a,...l}=n,c=P.useContext(rre),[d,u]=P.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=P.useState({}),g=Hn(e,k=>u(k)),m=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(_),v=d?m.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,y=v>=b,S=LCe(k=>{const D=k.target,N=[...c.branches].some(R=>R.contains(D));!y||N||(s==null||s(k),r==null||r(k),k.defaultPrevented||a==null||a())},h),x=DCe(k=>{const D=k.target;[...c.branches].some(R=>R.contains(D))||(o==null||o(k),r==null||r(k),k.defaultPrevented||a==null||a())},h);return CCe(k=>{v===c.layers.size-1&&(i==null||i(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),P.useEffect(()=>{if(d)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(iZ=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),nZ(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=iZ)}},[d,h,t,c]),P.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),nZ())},[d,c]),P.useEffect(()=>{const k=()=>f({});return document.addEventListener(H3,k),()=>document.removeEventListener(H3,k)},[]),C.jsx(Ci.div,{...l,ref:g,style:{pointerEvents:w?y?"auto":"none":void 0,...n.style},onFocusCapture:At(n.onFocusCapture,x.onFocusCapture),onBlurCapture:At(n.onBlurCapture,x.onBlurCapture),onPointerDownCapture:At(n.onPointerDownCapture,S.onPointerDownCapture)})});OR.displayName=yCe;var kCe="DismissableLayerBranch",are=P.forwardRef((n,e)=>{const t=P.useContext(rre),i=P.useRef(null),s=Hn(e,i);return P.useEffect(()=>{const o=i.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),C.jsx(Ci.div,{...n,ref:s})});are.displayName=kCe;function LCe(n,e=globalThis==null?void 0:globalThis.document){const t=da(n),i=P.useRef(!1),s=P.useRef(()=>{});return P.useEffect(()=>{const o=a=>{if(a.target&&!i.current){let l=function(){lre(SCe,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);i.current=!1},r=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(r),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function DCe(n,e=globalThis==null?void 0:globalThis.document){const t=da(n),i=P.useRef(!1);return P.useEffect(()=>{const s=o=>{o.target&&!i.current&&lre(xCe,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function nZ(){const n=new CustomEvent(H3);document.dispatchEvent(n)}function lre(n,e,t,{discrete:i}){const s=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?ore(s,o):s.dispatchEvent(o)}var ECe=OR,NCe=are,$o=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{},ICe="Portal",IV=P.forwardRef((n,e)=>{var a;const{container:t,...i}=n,[s,o]=P.useState(!1);$o(()=>o(!0),[]);const r=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return r?Zve.createPortal(C.jsx(Ci.div,{...i,ref:e}),r):null});IV.displayName=ICe;function TCe(n,e){return P.useReducer((t,i)=>e[t][i]??t,n)}var FR=n=>{const{present:e,children:t}=n,i=PCe(e),s=typeof t=="function"?t({present:i.isPresent}):P.Children.only(t),o=Hn(i.ref,MCe(s));return typeof t=="function"||i.isPresent?P.cloneElement(s,{ref:o}):null};FR.displayName="Presence";function PCe(n){const[e,t]=P.useState(),i=P.useRef({}),s=P.useRef(n),o=P.useRef("none"),r=n?"mounted":"unmounted",[a,l]=TCe(r,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const c=MD(i.current);o.current=a==="mounted"?c:"none"},[a]),$o(()=>{const c=i.current,d=s.current;if(d!==n){const h=o.current,f=MD(c);n?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),$o(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,u=f=>{const m=MD(i.current).includes(f.animationName);if(f.target===e&&m&&(l("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},h=f=>{f.target===e&&(o.current=MD(i.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:P.useCallback(c=>{c&&(i.current=getComputedStyle(c)),t(c)},[])}}function MD(n){return(n==null?void 0:n.animationName)||"none"}function MCe(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Lx({prop:n,defaultProp:e,onChange:t=()=>{}}){const[i,s]=RCe({defaultProp:e,onChange:t}),o=n!==void 0,r=o?n:i,a=da(t),l=P.useCallback(c=>{if(o){const u=typeof c=="function"?c(n):c;u!==n&&a(u)}else s(c)},[o,n,s,a]);return[r,l]}function RCe({defaultProp:n,onChange:e}){const t=P.useState(n),[i]=t,s=P.useRef(i),o=da(e);return P.useEffect(()=>{s.current!==i&&(o(i),s.current=i)},[i,s,o]),t}var ACe="VisuallyHidden",yL=P.forwardRef((n,e)=>C.jsx(Ci.span,{...n,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}));yL.displayName=ACe;var OCe=yL,TV="ToastProvider",[PV,FCe,WCe]=NV("Toast"),[cre,vJe]=Fb("Toast",[WCe]),[BCe,WR]=cre(TV),dre=n=>{const{__scopeToast:e,label:t="Notification",duration:i=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:r}=n,[a,l]=P.useState(null),[c,d]=P.useState(0),u=P.useRef(!1),h=P.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${TV}\`. Expected non-empty \`string\`.`),C.jsx(PV.Provider,{scope:e,children:C.jsx(BCe,{scope:e,label:t,duration:i,swipeDirection:s,swipeThreshold:o,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:P.useCallback(()=>d(f=>f+1),[]),onToastRemove:P.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:r})})};dre.displayName=TV;var ure="ToastViewport",HCe=["F8"],j3="toast.viewportPause",V3="toast.viewportResume",hre=P.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:i=HCe,label:s="Notifications ({hotkey})",...o}=n,r=WR(ure,t),a=FCe(t),l=P.useRef(null),c=P.useRef(null),d=P.useRef(null),u=P.useRef(null),h=Hn(e,u,r.onViewportChange),f=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=r.toastCount>0;P.useEffect(()=>{const _=b=>{var w;i.length!==0&&i.every(y=>b[y]||b.code===y)&&((w=u.current)==null||w.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[i]),P.useEffect(()=>{const _=l.current,b=u.current;if(g&&_&&b){const v=()=>{if(!r.isClosePausedRef.current){const x=new CustomEvent(j3);b.dispatchEvent(x),r.isClosePausedRef.current=!0}},w=()=>{if(r.isClosePausedRef.current){const x=new CustomEvent(V3);b.dispatchEvent(x),r.isClosePausedRef.current=!1}},y=x=>{!_.contains(x.relatedTarget)&&w()},S=()=>{_.contains(document.activeElement)||w()};return _.addEventListener("focusin",v),_.addEventListener("focusout",y),_.addEventListener("pointermove",v),_.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",w),()=>{_.removeEventListener("focusin",v),_.removeEventListener("focusout",y),_.removeEventListener("pointermove",v),_.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",w)}}},[g,r.isClosePausedRef]);const m=P.useCallback(({tabbingDirection:_})=>{const v=a().map(w=>{const y=w.ref.current,S=[y,...JCe(y)];return _==="forwards"?S:S.reverse()});return(_==="forwards"?v.reverse():v).flat()},[a]);return P.useEffect(()=>{const _=u.current;if(_){const b=v=>{var S,x,k;const w=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!w){const D=document.activeElement,N=v.shiftKey;if(v.target===_&&N){(S=c.current)==null||S.focus();return}const B=m({tabbingDirection:N?"backwards":"forwards"}),z=B.findIndex(F=>F===D);gF(B.slice(z+1))?v.preventDefault():N?(x=c.current)==null||x.focus():(k=d.current)==null||k.focus()}};return _.addEventListener("keydown",b),()=>_.removeEventListener("keydown",b)}},[a,m]),C.jsxs(NCe,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&C.jsx(z3,{ref:c,onFocusFromOutsideViewport:()=>{const _=m({tabbingDirection:"forwards"});gF(_)}}),C.jsx(PV.Slot,{scope:t,children:C.jsx(Ci.ol,{tabIndex:-1,...o,ref:h})}),g&&C.jsx(z3,{ref:d,onFocusFromOutsideViewport:()=>{const _=m({tabbingDirection:"backwards"});gF(_)}})]})});hre.displayName=ure;var fre="ToastFocusProxy",z3=P.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:i,...s}=n,o=WR(fre,t);return C.jsx(yL,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:r=>{var c;const a=r.relatedTarget;!((c=o.viewport)!=null&&c.contains(a))&&i()}})});z3.displayName=fre;var BR="Toast",jCe="toast.swipeStart",VCe="toast.swipeMove",zCe="toast.swipeCancel",UCe="toast.swipeEnd",gre=P.forwardRef((n,e)=>{const{forceMount:t,open:i,defaultOpen:s,onOpenChange:o,...r}=n,[a=!0,l]=Lx({prop:i,defaultProp:s,onChange:o});return C.jsx(FR,{present:t||a,children:C.jsx(KCe,{open:a,...r,ref:e,onClose:()=>l(!1),onPause:da(n.onPause),onResume:da(n.onResume),onSwipeStart:At(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:At(n.onSwipeMove,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:At(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:At(n.onSwipeEnd,c=>{const{x:d,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),l(!1)})})})});gre.displayName=BR;var[$Ce,qCe]=cre(BR,{onClose(){}}),KCe=P.forwardRef((n,e)=>{const{__scopeToast:t,type:i="foreground",duration:s,open:o,onClose:r,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:f,...g}=n,m=WR(BR,t),[_,b]=P.useState(null),v=Hn(e,F=>b(F)),w=P.useRef(null),y=P.useRef(null),S=s||m.duration,x=P.useRef(0),k=P.useRef(S),D=P.useRef(0),{onToastAdd:N,onToastRemove:R}=m,O=da(()=>{var K;(_==null?void 0:_.contains(document.activeElement))&&((K=m.viewport)==null||K.focus()),r()}),B=P.useCallback(F=>{!F||F===1/0||(window.clearTimeout(D.current),x.current=new Date().getTime(),D.current=window.setTimeout(O,F))},[O]);P.useEffect(()=>{const F=m.viewport;if(F){const K=()=>{B(k.current),c==null||c()},Z=()=>{const re=new Date().getTime()-x.current;k.current=k.current-re,window.clearTimeout(D.current),l==null||l()};return F.addEventListener(j3,Z),F.addEventListener(V3,K),()=>{F.removeEventListener(j3,Z),F.removeEventListener(V3,K)}}},[m.viewport,S,l,c,B]),P.useEffect(()=>{o&&!m.isClosePausedRef.current&&B(S)},[o,S,m.isClosePausedRef,B]),P.useEffect(()=>(N(),()=>R()),[N,R]);const z=P.useMemo(()=>_?Cre(_):null,[_]);return m.viewport?C.jsxs(C.Fragment,{children:[z&&C.jsx(GCe,{__scopeToast:t,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),C.jsx($Ce,{scope:t,onClose:O,children:Ob.createPortal(C.jsx(PV.ItemSlot,{scope:t,children:C.jsx(ECe,{asChild:!0,onEscapeKeyDown:At(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||O(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:C.jsx(Ci.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:v,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:At(n.onKeyDown,F=>{F.key==="Escape"&&(a==null||a(F.nativeEvent),F.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:At(n.onPointerDown,F=>{F.button===0&&(w.current={x:F.clientX,y:F.clientY})}),onPointerMove:At(n.onPointerMove,F=>{if(!w.current)return;const K=F.clientX-w.current.x,Z=F.clientY-w.current.y,re=!!y.current,q=["left","right"].includes(m.swipeDirection),J=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,ge=q?J(0,K):0,be=q?0:J(0,Z),Qe=F.pointerType==="touch"?10:2,Me={x:ge,y:be},Ze={originalEvent:F,delta:Me};re?(y.current=Me,RD(VCe,u,Ze,{discrete:!1})):sZ(Me,m.swipeDirection,Qe)?(y.current=Me,RD(jCe,d,Ze,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(K)>Qe||Math.abs(Z)>Qe)&&(w.current=null)}),onPointerUp:At(n.onPointerUp,F=>{const K=y.current,Z=F.target;if(Z.hasPointerCapture(F.pointerId)&&Z.releasePointerCapture(F.pointerId),y.current=null,w.current=null,K){const re=F.currentTarget,q={originalEvent:F,delta:K};sZ(K,m.swipeDirection,m.swipeThreshold)?RD(UCe,f,q,{discrete:!0}):RD(zCe,h,q,{discrete:!0}),re.addEventListener("click",J=>J.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),GCe=n=>{const{__scopeToast:e,children:t,...i}=n,s=WR(BR,e),[o,r]=P.useState(!1),[a,l]=P.useState(!1);return QCe(()=>r(!0)),P.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:C.jsx(IV,{asChild:!0,children:C.jsx(yL,{...i,children:o&&C.jsxs(C.Fragment,{children:[s.label," ",t]})})})},YCe="ToastTitle",mre=P.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return C.jsx(Ci.div,{...i,ref:e})});mre.displayName=YCe;var ZCe="ToastDescription",pre=P.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n;return C.jsx(Ci.div,{...i,ref:e})});pre.displayName=ZCe;var _re="ToastAction",bre=P.forwardRef((n,e)=>{const{altText:t,...i}=n;return t.trim()?C.jsx(wre,{altText:t,asChild:!0,children:C.jsx(MV,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${_re}\`. Expected non-empty \`string\`.`),null)});bre.displayName=_re;var vre="ToastClose",MV=P.forwardRef((n,e)=>{const{__scopeToast:t,...i}=n,s=qCe(vre,t);return C.jsx(wre,{asChild:!0,children:C.jsx(Ci.button,{type:"button",...i,ref:e,onClick:At(n.onClick,s.onClose)})})});MV.displayName=vre;var wre=P.forwardRef((n,e)=>{const{__scopeToast:t,altText:i,...s}=n;return C.jsx(Ci.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...s,ref:e})});function Cre(n){const e=[];return Array.from(n.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),XCe(i)){const s=i.ariaHidden||i.hidden||i.style.display==="none",o=i.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const r=i.dataset.radixToastAnnounceAlt;r&&e.push(r)}else e.push(...Cre(i))}}),e}function RD(n,e,t,{discrete:i}){const s=t.originalEvent.currentTarget,o=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?ore(s,o):s.dispatchEvent(o)}var sZ=(n,e,t=0)=>{const i=Math.abs(n.x),s=Math.abs(n.y),o=i>s;return e==="left"||e==="right"?o&&i>t:!o&&s>t};function QCe(n=()=>{}){const e=da(n);$o(()=>{let t=0,i=0;return t=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(i)}},[e])}function XCe(n){return n.nodeType===n.ELEMENT_NODE}function JCe(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function gF(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var eye=dre,yre=hre,Sre=gre,xre=mre,kre=pre,Lre=bre,Dre=MV;function Ere(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Ere(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Nre(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Ere(n))&&(i&&(i+=" "),i+=e);return i}const oZ=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,rZ=Nre,HR=(n,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return rZ(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:o}=e,r=Object.keys(s).map(c=>{const d=t==null?void 0:t[c],u=o==null?void 0:o[c];if(d===null)return null;const h=oZ(d)||oZ(u);return s[c][h]}),a=t&&Object.entries(t).reduce((c,d)=>{let[u,h]=d;return h===void 0||(c[u]=h),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,d)=>{let{class:u,className:h,...f}=d;return Object.entries(f).every(g=>{let[m,_]=g;return Array.isArray(_)?_.includes({...o,...a}[m]):{...o,...a}[m]===_})?[...c,u,h]:c},[]);return rZ(n,r,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tye=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ire=(...n)=>n.filter((e,t,i)=>!!e&&i.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nye=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:r,...a},l)=>P.createElement("svg",{ref:l,...iye,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:Ire("lucide",s),...a},[...r.map(([c,d])=>P.createElement(c,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=(n,e)=>{const t=P.forwardRef(({className:i,...s},o)=>P.createElement(nye,{ref:o,iconNode:e,className:Ire(`lucide-${tye(n)}`,i),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=$i("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=$i("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sye=$i("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oye=$i("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rye=$i("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=$i("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aye=$i("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lye=$i("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=$i("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=$i("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=$i("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cye=$i("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dye=$i("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=$i("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rre=$i("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=$i("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uye=$i("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hye=$i("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=$i("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fye=$i("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gye=$i("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=$i("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=$i("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mye=$i("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ore=$i("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=$i("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pye=$i("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ye=$i("University",[["circle",{cx:"12",cy:"10",r:"1",key:"1gnqs8"}],["path",{d:"M22 20V8h-4l-6-4-6 4H2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2",key:"1qj5sn"}],["path",{d:"M6 17v.01",key:"roodi6"}],["path",{d:"M6 13v.01",key:"67c122"}],["path",{d:"M18 17v.01",key:"12ktxm"}],["path",{d:"M18 13v.01",key:"tn1rt1"}],["path",{d:"M14 22v-5a2 2 0 0 0-2-2a2 2 0 0 0-2 2v5",key:"11g7fi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=$i("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=$i("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),RV="-",bye=n=>{const e=wye(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:r=>{const a=r.split(RV);return a[0]===""&&a.length!==1&&a.shift(),Hre(a,e)||vye(r)},getConflictingClassGroupIds:(r,a)=>{const l=t[r]||[];return a&&i[r]?[...l,...i[r]]:l}}},Hre=(n,e)=>{var r;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),s=i?Hre(n.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const o=n.join(RV);return(r=e.validators.find(({validator:a})=>a(o)))==null?void 0:r.classGroupId},dZ=/^\[(.+)\]$/,vye=n=>{if(dZ.test(n)){const e=dZ.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},wye=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return yye(Object.entries(n.classGroups),t).forEach(([o,r])=>{U3(r,i,o,e)}),i},U3=(n,e,t,i)=>{n.forEach(s=>{if(typeof s=="string"){const o=s===""?e:uZ(e,s);o.classGroupId=t;return}if(typeof s=="function"){if(Cye(s)){U3(s(i),e,t,i);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([o,r])=>{U3(r,uZ(e,o),t,i)})})},uZ=(n,e)=>{let t=n;return e.split(RV).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},Cye=n=>n.isThemeGetter,yye=(n,e)=>e?n.map(([t,i])=>{const s=i.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([r,a])=>[e+r,a])):o);return[t,s]}):n,Sye=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const s=(o,r)=>{t.set(o,r),e++,e>n&&(e=0,i=t,t=new Map)};return{get(o){let r=t.get(o);if(r!==void 0)return r;if((r=i.get(o))!==void 0)return s(o,r),r},set(o,r){t.has(o)?t.set(o,r):s(o,r)}}},jre="!",xye=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,s=e[0],o=e.length,r=a=>{const l=[];let c=0,d=0,u;for(let _=0;_<a.length;_++){let b=a[_];if(c===0){if(b===s&&(i||a.slice(_,_+o)===e)){l.push(a.slice(d,_)),d=_+o;continue}if(b==="/"){u=_;continue}}b==="["?c++:b==="]"&&c--}const h=l.length===0?a:a.substring(d),f=h.startsWith(jre),g=f?h.substring(1):h,m=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:m}};return t?a=>t({className:a,parseClassName:r}):r},kye=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},Lye=n=>({cache:Sye(n.cacheSize),parseClassName:xye(n),...bye(n)}),Dye=/\s+/,Eye=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s}=e,o=[],r=n.trim().split(Dye);let a="";for(let l=r.length-1;l>=0;l-=1){const c=r[l],{modifiers:d,hasImportantModifier:u,baseClassName:h,maybePostfixModifierPosition:f}=t(c);let g=!!f,m=i(g?h.substring(0,f):h);if(!m){if(!g){a=c+(a.length>0?" "+a:a);continue}if(m=i(h),!m){a=c+(a.length>0?" "+a:a);continue}g=!1}const _=kye(d).join(":"),b=u?_+jre:_,v=b+m;if(o.includes(v))continue;o.push(v);const w=s(m,g);for(let y=0;y<w.length;++y){const S=w[y];o.push(b+S)}a=c+(a.length>0?" "+a:a)}return a};function Nye(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Vre(e))&&(i&&(i+=" "),i+=t);return i}const Vre=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=Vre(n[i]))&&(t&&(t+=" "),t+=e);return t};function Iye(n,...e){let t,i,s,o=r;function r(l){const c=e.reduce((d,u)=>u(d),n());return t=Lye(c),i=t.cache.get,s=t.cache.set,o=a,a(l)}function a(l){const c=i(l);if(c)return c;const d=Eye(l,t);return s(l,d),d}return function(){return o(Nye.apply(null,arguments))}}const _n=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},zre=/^\[(?:([a-z-]+):)?(.+)\]$/i,Tye=/^\d+\/\d+$/,Pye=new Set(["px","full","screen"]),Mye=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Rye=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Aye=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Oye=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fye=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bu=n=>qw(n)||Pye.has(n)||Tye.test(n),Xh=n=>Ky(n,"length",$ye),qw=n=>!!n&&!Number.isNaN(Number(n)),mF=n=>Ky(n,"number",qw),A1=n=>!!n&&Number.isInteger(Number(n)),Wye=n=>n.endsWith("%")&&qw(n.slice(0,-1)),zt=n=>zre.test(n),Jh=n=>Mye.test(n),Bye=new Set(["length","size","percentage"]),Hye=n=>Ky(n,Bye,Ure),jye=n=>Ky(n,"position",Ure),Vye=new Set(["image","url"]),zye=n=>Ky(n,Vye,Kye),Uye=n=>Ky(n,"",qye),O1=()=>!0,Ky=(n,e,t)=>{const i=zre.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},$ye=n=>Rye.test(n)&&!Aye.test(n),Ure=()=>!1,qye=n=>Oye.test(n),Kye=n=>Fye.test(n),Gye=()=>{const n=_n("colors"),e=_n("spacing"),t=_n("blur"),i=_n("brightness"),s=_n("borderColor"),o=_n("borderRadius"),r=_n("borderSpacing"),a=_n("borderWidth"),l=_n("contrast"),c=_n("grayscale"),d=_n("hueRotate"),u=_n("invert"),h=_n("gap"),f=_n("gradientColorStops"),g=_n("gradientColorStopPositions"),m=_n("inset"),_=_n("margin"),b=_n("opacity"),v=_n("padding"),w=_n("saturate"),y=_n("scale"),S=_n("sepia"),x=_n("skew"),k=_n("space"),D=_n("translate"),N=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",zt,e],B=()=>[zt,e],z=()=>["",bu,Xh],F=()=>["auto",qw,zt],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",zt],ge=()=>["auto","avoid","all","avoid-page","page","left","right","column"],be=()=>[qw,zt];return{cacheSize:500,separator:":",theme:{colors:[O1],spacing:[bu,Xh],blur:["none","",Jh,zt],brightness:be(),borderColor:[n],borderRadius:["none","","full",Jh,zt],borderSpacing:B(),borderWidth:z(),contrast:be(),grayscale:J(),hueRotate:be(),invert:J(),gap:B(),gradientColorStops:[n],gradientColorStopPositions:[Wye,Xh],inset:O(),margin:O(),opacity:be(),padding:B(),saturate:be(),scale:be(),sepia:J(),skew:be(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",zt]}],container:["container"],columns:[{columns:[Jh]}],"break-after":[{"break-after":ge()}],"break-before":[{"break-before":ge()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),zt]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",A1,zt]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",zt]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",A1,zt]}],"grid-cols":[{"grid-cols":[O1]}],"col-start-end":[{col:["auto",{span:["full",A1,zt]},zt]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[O1]}],"row-start-end":[{row:["auto",{span:[A1,zt]},zt]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",zt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",zt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",zt,e]}],"min-w":[{"min-w":[zt,e,"min","max","fit"]}],"max-w":[{"max-w":[zt,e,"none","full","min","max","fit","prose",{screen:[Jh]},Jh]}],h:[{h:[zt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[zt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[zt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[zt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Jh,Xh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mF]}],"font-family":[{font:[O1]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",zt]}],"line-clamp":[{"line-clamp":["none",qw,mF]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bu,zt]}],"list-image":[{"list-image":["none",zt]}],"list-style-type":[{list:["none","disc","decimal",zt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bu,Xh]}],"underline-offset":[{"underline-offset":["auto",bu,zt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",zt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",zt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),jye]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Hye]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zye]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:Z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[bu,zt]}],"outline-w":[{outline:[bu,Xh]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[bu,Xh]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Jh,Uye]}],"shadow-color":[{shadow:[O1]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...re(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":re()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Jh,zt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[r]}],"border-spacing-x":[{"border-spacing-x":[r]}],"border-spacing-y":[{"border-spacing-y":[r]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",zt]}],duration:[{duration:be()}],ease:[{ease:["linear","in","out","in-out",zt]}],delay:[{delay:be()}],animate:[{animate:["none","spin","ping","pulse","bounce",zt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[y]}],"scale-x":[{"scale-x":[y]}],"scale-y":[{"scale-y":[y]}],rotate:[{rotate:[A1,zt]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",zt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",zt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",zt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[bu,Xh,mF]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Yye=Iye(Gye);function Ji(...n){return Yye(Nre(n))}const Zye=eye,$re=P.forwardRef(({className:n,...e},t)=>C.jsx(yre,{ref:t,className:Ji("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));$re.displayName=yre.displayName;const Qye=HR("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),qre=P.forwardRef(({className:n,variant:e,...t},i)=>C.jsx(Sre,{ref:i,className:Ji(Qye({variant:e}),n),...t}));qre.displayName=Sre.displayName;const Xye=P.forwardRef(({className:n,...e},t)=>C.jsx(Lre,{ref:t,className:Ji("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));Xye.displayName=Lre.displayName;const Kre=P.forwardRef(({className:n,...e},t)=>C.jsx(Dre,{ref:t,className:Ji("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:C.jsx(Bre,{className:"h-4 w-4"})}));Kre.displayName=Dre.displayName;const Gre=P.forwardRef(({className:n,...e},t)=>C.jsx(xre,{ref:t,className:Ji("text-sm font-semibold",n),...e}));Gre.displayName=xre.displayName;const Yre=P.forwardRef(({className:n,...e},t)=>C.jsx(kre,{ref:t,className:Ji("text-sm opacity-90",n),...e}));Yre.displayName=kre.displayName;function Jye(){const{toasts:n}=EV();return C.jsxs(Zye,{children:[n.map(function({id:e,title:t,description:i,action:s,...o}){return C.jsxs(qre,{...o,children:[C.jsxs("div",{className:"grid gap-1",children:[t&&C.jsx(Gre,{children:t}),i&&C.jsx(Yre,{children:i})]}),s,C.jsx(Kre,{})]},e)}),C.jsx($re,{})]})}var e1e=Ine[" useId ".trim().toString()]||(()=>{}),t1e=0;function SL(n){const[e,t]=P.useState(e1e());return $o(()=>{t(i=>i??String(t1e++))},[n]),e?`radix-${e}`:""}const i1e=["top","right","bottom","left"],Wg=Math.min,Ta=Math.max,PI=Math.round,AD=Math.floor,Vd=n=>({x:n,y:n}),n1e={left:"right",right:"left",bottom:"top",top:"bottom"},s1e={start:"end",end:"start"};function $3(n,e,t){return Ta(n,Wg(e,t))}function xh(n,e){return typeof n=="function"?n(e):n}function kh(n){return n.split("-")[0]}function Gy(n){return n.split("-")[1]}function AV(n){return n==="x"?"y":"x"}function OV(n){return n==="y"?"height":"width"}function Bg(n){return["top","bottom"].includes(kh(n))?"y":"x"}function FV(n){return AV(Bg(n))}function o1e(n,e,t){t===void 0&&(t=!1);const i=Gy(n),s=FV(n),o=OV(s);let r=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(r=MI(r)),[r,MI(r)]}function r1e(n){const e=MI(n);return[q3(n),e,q3(e)]}function q3(n){return n.replace(/start|end/g,e=>s1e[e])}function a1e(n,e,t){const i=["left","right"],s=["right","left"],o=["top","bottom"],r=["bottom","top"];switch(n){case"top":case"bottom":return t?e?s:i:e?i:s;case"left":case"right":return e?o:r;default:return[]}}function l1e(n,e,t,i){const s=Gy(n);let o=a1e(kh(n),t==="start",i);return s&&(o=o.map(r=>r+"-"+s),e&&(o=o.concat(o.map(q3)))),o}function MI(n){return n.replace(/left|right|bottom|top/g,e=>n1e[e])}function c1e(n){return{top:0,right:0,bottom:0,left:0,...n}}function Zre(n){return typeof n!="number"?c1e(n):{top:n,right:n,bottom:n,left:n}}function RI(n){const{x:e,y:t,width:i,height:s}=n;return{width:i,height:s,top:t,left:e,right:e+i,bottom:t+s,x:e,y:t}}function hZ(n,e,t){let{reference:i,floating:s}=n;const o=Bg(e),r=FV(e),a=OV(r),l=kh(e),c=o==="y",d=i.x+i.width/2-s.width/2,u=i.y+i.height/2-s.height/2,h=i[a]/2-s[a]/2;let f;switch(l){case"top":f={x:d,y:i.y-s.height};break;case"bottom":f={x:d,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:u};break;case"left":f={x:i.x-s.width,y:u};break;default:f={x:i.x,y:i.y}}switch(Gy(e)){case"start":f[r]-=h*(t&&c?-1:1);break;case"end":f[r]+=h*(t&&c?-1:1);break}return f}const d1e=async(n,e,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:o=[],platform:r}=t,a=o.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(e));let c=await r.getElementRects({reference:n,floating:e,strategy:s}),{x:d,y:u}=hZ(c,i,l),h=i,f={},g=0;for(let m=0;m<a.length;m++){const{name:_,fn:b}=a[m],{x:v,y:w,data:y,reset:S}=await b({x:d,y:u,initialPlacement:i,placement:h,strategy:s,middlewareData:f,rects:c,platform:r,elements:{reference:n,floating:e}});d=v??d,u=w??u,f={...f,[_]:{...f[_],...y}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await r.getElementRects({reference:n,floating:e,strategy:s}):S.rects),{x:d,y:u}=hZ(c,h,l)),m=-1)}return{x:d,y:u,placement:h,strategy:s,middlewareData:f}};async function Ex(n,e){var t;e===void 0&&(e={});const{x:i,y:s,platform:o,rects:r,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:f=0}=xh(e,n),g=Zre(f),_=a[h?u==="floating"?"reference":"floating":u],b=RI(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(_)))==null||t?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),v=u==="floating"?{x:i,y:s,width:r.floating.width,height:r.floating.height}:r.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),y=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},S=RI(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:l}):v);return{top:(b.top-S.top+g.top)/y.y,bottom:(S.bottom-b.bottom+g.bottom)/y.y,left:(b.left-S.left+g.left)/y.x,right:(S.right-b.right+g.right)/y.x}}const u1e=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:s,rects:o,platform:r,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=xh(n,e)||{};if(c==null)return{};const u=Zre(d),h={x:t,y:i},f=FV(s),g=OV(f),m=await r.getDimensions(c),_=f==="y",b=_?"top":"left",v=_?"bottom":"right",w=_?"clientHeight":"clientWidth",y=o.reference[g]+o.reference[f]-h[f]-o.floating[g],S=h[f]-o.reference[f],x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c));let k=x?x[w]:0;(!k||!await(r.isElement==null?void 0:r.isElement(x)))&&(k=a.floating[w]||o.floating[g]);const D=y/2-S/2,N=k/2-m[g]/2-1,R=Wg(u[b],N),O=Wg(u[v],N),B=R,z=k-m[g]-O,F=k/2-m[g]/2+D,K=$3(B,F,z),Z=!l.arrow&&Gy(s)!=null&&F!==K&&o.reference[g]/2-(F<B?R:O)-m[g]/2<0,re=Z?F<B?F-B:F-z:0;return{[f]:h[f]+re,data:{[f]:K,centerOffset:F-K-re,...Z&&{alignmentOffset:re}},reset:Z}}}),h1e=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:s,middlewareData:o,rects:r,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,..._}=xh(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const b=kh(s),v=Bg(a),w=kh(a)===a,y=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(w||!m?[MI(a)]:r1e(a)),x=g!=="none";!h&&x&&S.push(...l1e(a,m,g,y));const k=[a,...S],D=await Ex(e,_),N=[];let R=((i=o.flip)==null?void 0:i.overflows)||[];if(d&&N.push(D[b]),u){const F=o1e(s,r,y);N.push(D[F[0]],D[F[1]])}if(R=[...R,{placement:s,overflows:N}],!N.every(F=>F<=0)){var O,B;const F=(((O=o.flip)==null?void 0:O.index)||0)+1,K=k[F];if(K)return{data:{index:F,overflows:R},reset:{placement:K}};let Z=(B=R.filter(re=>re.overflows[0]<=0).sort((re,q)=>re.overflows[1]-q.overflows[1])[0])==null?void 0:B.placement;if(!Z)switch(f){case"bestFit":{var z;const re=(z=R.filter(q=>{if(x){const J=Bg(q.placement);return J===v||J==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(J=>J>0).reduce((J,ge)=>J+ge,0)]).sort((q,J)=>q[1]-J[1])[0])==null?void 0:z[0];re&&(Z=re);break}case"initialPlacement":Z=a;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};function fZ(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function gZ(n){return i1e.some(e=>n[e]>=0)}const f1e=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...s}=xh(n,e);switch(i){case"referenceHidden":{const o=await Ex(e,{...s,elementContext:"reference"}),r=fZ(o,t.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:gZ(r)}}}case"escaped":{const o=await Ex(e,{...s,altBoundary:!0}),r=fZ(o,t.floating);return{data:{escapedOffsets:r,escaped:gZ(r)}}}default:return{}}}}};async function g1e(n,e){const{placement:t,platform:i,elements:s}=n,o=await(i.isRTL==null?void 0:i.isRTL(s.floating)),r=kh(t),a=Gy(t),l=Bg(t)==="y",c=["left","top"].includes(r)?-1:1,d=o&&l?-1:1,u=xh(e,n);let{mainAxis:h,crossAxis:f,alignmentAxis:g}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),l?{x:f*d,y:h*c}:{x:h*c,y:f*d}}const m1e=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:s,y:o,placement:r,middlewareData:a}=e,l=await g1e(e,n);return r===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:r}}}}},p1e=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:s}=e,{mainAxis:o=!0,crossAxis:r=!1,limiter:a={fn:_=>{let{x:b,y:v}=_;return{x:b,y:v}}},...l}=xh(n,e),c={x:t,y:i},d=await Ex(e,l),u=Bg(kh(s)),h=AV(u);let f=c[h],g=c[u];if(o){const _=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=f+d[_],w=f-d[b];f=$3(v,f,w)}if(r){const _=u==="y"?"top":"left",b=u==="y"?"bottom":"right",v=g+d[_],w=g-d[b];g=$3(v,g,w)}const m=a.fn({...e,[h]:f,[u]:g});return{...m,data:{x:m.x-t,y:m.y-i,enabled:{[h]:o,[u]:r}}}}}},_1e=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:s,rects:o,middlewareData:r}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=xh(n,e),d={x:t,y:i},u=Bg(s),h=AV(u);let f=d[h],g=d[u];const m=xh(a,e),_=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const w=h==="y"?"height":"width",y=o.reference[h]-o.floating[w]+_.mainAxis,S=o.reference[h]+o.reference[w]-_.mainAxis;f<y?f=y:f>S&&(f=S)}if(c){var b,v;const w=h==="y"?"width":"height",y=["top","left"].includes(kh(s)),S=o.reference[u]-o.floating[w]+(y&&((b=r.offset)==null?void 0:b[u])||0)+(y?0:_.crossAxis),x=o.reference[u]+o.reference[w]+(y?0:((v=r.offset)==null?void 0:v[u])||0)-(y?_.crossAxis:0);g<S?g=S:g>x&&(g=x)}return{[h]:f,[u]:g}}}},b1e=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:s,rects:o,platform:r,elements:a}=e,{apply:l=()=>{},...c}=xh(n,e),d=await Ex(e,c),u=kh(s),h=Gy(s),f=Bg(s)==="y",{width:g,height:m}=o.floating;let _,b;u==="top"||u==="bottom"?(_=u,b=h===(await(r.isRTL==null?void 0:r.isRTL(a.floating))?"start":"end")?"left":"right"):(b=u,_=h==="end"?"top":"bottom");const v=m-d.top-d.bottom,w=g-d.left-d.right,y=Wg(m-d[_],v),S=Wg(g-d[b],w),x=!e.middlewareData.shift;let k=y,D=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(D=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(k=v),x&&!h){const R=Ta(d.left,0),O=Ta(d.right,0),B=Ta(d.top,0),z=Ta(d.bottom,0);f?D=g-2*(R!==0||O!==0?R+O:Ta(d.left,d.right)):k=m-2*(B!==0||z!==0?B+z:Ta(d.top,d.bottom))}await l({...e,availableWidth:D,availableHeight:k});const N=await r.getDimensions(a.floating);return g!==N.width||m!==N.height?{reset:{rects:!0}}:{}}}};function jR(){return typeof window<"u"}function Yy(n){return Qre(n)?(n.nodeName||"").toLowerCase():"#document"}function Ha(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function su(n){var e;return(e=(Qre(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Qre(n){return jR()?n instanceof Node||n instanceof Ha(n).Node:!1}function Mc(n){return jR()?n instanceof Element||n instanceof Ha(n).Element:!1}function Kd(n){return jR()?n instanceof HTMLElement||n instanceof Ha(n).HTMLElement:!1}function mZ(n){return!jR()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ha(n).ShadowRoot}function xL(n){const{overflow:e,overflowX:t,overflowY:i,display:s}=Rc(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(s)}function v1e(n){return["table","td","th"].includes(Yy(n))}function VR(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function WV(n){const e=BV(),t=Mc(n)?Rc(n):n;return["transform","translate","scale","rotate","perspective"].some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function w1e(n){let e=Hg(n);for(;Kd(e)&&!ty(e);){if(WV(e))return e;if(VR(e))return null;e=Hg(e)}return null}function BV(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ty(n){return["html","body","#document"].includes(Yy(n))}function Rc(n){return Ha(n).getComputedStyle(n)}function zR(n){return Mc(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Hg(n){if(Yy(n)==="html")return n;const e=n.assignedSlot||n.parentNode||mZ(n)&&n.host||su(n);return mZ(e)?e.host:e}function Xre(n){const e=Hg(n);return ty(e)?n.ownerDocument?n.ownerDocument.body:n.body:Kd(e)&&xL(e)?e:Xre(e)}function Nx(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Xre(n),o=s===((i=n.ownerDocument)==null?void 0:i.body),r=Ha(s);if(o){const a=K3(r);return e.concat(r,r.visualViewport||[],xL(s)?s:[],a&&t?Nx(a):[])}return e.concat(s,Nx(s,[],t))}function K3(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function Jre(n){const e=Rc(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=Kd(n),o=s?n.offsetWidth:t,r=s?n.offsetHeight:i,a=PI(t)!==o||PI(i)!==r;return a&&(t=o,i=r),{width:t,height:i,$:a}}function HV(n){return Mc(n)?n:n.contextElement}function Kw(n){const e=HV(n);if(!Kd(e))return Vd(1);const t=e.getBoundingClientRect(),{width:i,height:s,$:o}=Jre(e);let r=(o?PI(t.width):t.width)/i,a=(o?PI(t.height):t.height)/s;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}const C1e=Vd(0);function eae(n){const e=Ha(n);return!BV()||!e.visualViewport?C1e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function y1e(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ha(n)?!1:e}function sb(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),o=HV(n);let r=Vd(1);e&&(i?Mc(i)&&(r=Kw(i)):r=Kw(n));const a=y1e(o,t,i)?eae(o):Vd(0);let l=(s.left+a.x)/r.x,c=(s.top+a.y)/r.y,d=s.width/r.x,u=s.height/r.y;if(o){const h=Ha(o),f=i&&Mc(i)?Ha(i):i;let g=h,m=K3(g);for(;m&&i&&f!==g;){const _=Kw(m),b=m.getBoundingClientRect(),v=Rc(m),w=b.left+(m.clientLeft+parseFloat(v.paddingLeft))*_.x,y=b.top+(m.clientTop+parseFloat(v.paddingTop))*_.y;l*=_.x,c*=_.y,d*=_.x,u*=_.y,l+=w,c+=y,g=Ha(m),m=K3(g)}}return RI({width:d,height:u,x:l,y:c})}function jV(n,e){const t=zR(n).scrollLeft;return e?e.left+t:sb(su(n)).left+t}function tae(n,e,t){t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=i.left+e.scrollLeft-(t?0:jV(n,i)),o=i.top+e.scrollTop;return{x:s,y:o}}function S1e(n){let{elements:e,rect:t,offsetParent:i,strategy:s}=n;const o=s==="fixed",r=su(i),a=e?VR(e.floating):!1;if(i===r||a&&o)return t;let l={scrollLeft:0,scrollTop:0},c=Vd(1);const d=Vd(0),u=Kd(i);if((u||!u&&!o)&&((Yy(i)!=="body"||xL(r))&&(l=zR(i)),Kd(i))){const f=sb(i);c=Kw(i),d.x=f.x+i.clientLeft,d.y=f.y+i.clientTop}const h=r&&!u&&!o?tae(r,l,!0):Vd(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:t.y*c.y-l.scrollTop*c.y+d.y+h.y}}function x1e(n){return Array.from(n.getClientRects())}function k1e(n){const e=su(n),t=zR(n),i=n.ownerDocument.body,s=Ta(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),o=Ta(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let r=-t.scrollLeft+jV(n);const a=-t.scrollTop;return Rc(i).direction==="rtl"&&(r+=Ta(e.clientWidth,i.clientWidth)-s),{width:s,height:o,x:r,y:a}}function L1e(n,e){const t=Ha(n),i=su(n),s=t.visualViewport;let o=i.clientWidth,r=i.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;const c=BV();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:o,height:r,x:a,y:l}}function D1e(n,e){const t=sb(n,!0,e==="fixed"),i=t.top+n.clientTop,s=t.left+n.clientLeft,o=Kd(n)?Kw(n):Vd(1),r=n.clientWidth*o.x,a=n.clientHeight*o.y,l=s*o.x,c=i*o.y;return{width:r,height:a,x:l,y:c}}function pZ(n,e,t){let i;if(e==="viewport")i=L1e(n,t);else if(e==="document")i=k1e(su(n));else if(Mc(e))i=D1e(e,t);else{const s=eae(n);i={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return RI(i)}function iae(n,e){const t=Hg(n);return t===e||!Mc(t)||ty(t)?!1:Rc(t).position==="fixed"||iae(t,e)}function E1e(n,e){const t=e.get(n);if(t)return t;let i=Nx(n,[],!1).filter(a=>Mc(a)&&Yy(a)!=="body"),s=null;const o=Rc(n).position==="fixed";let r=o?Hg(n):n;for(;Mc(r)&&!ty(r);){const a=Rc(r),l=WV(r);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||xL(r)&&!l&&iae(n,r))?i=i.filter(d=>d!==r):s=a,r=Hg(r)}return e.set(n,i),i}function N1e(n){let{element:e,boundary:t,rootBoundary:i,strategy:s}=n;const r=[...t==="clippingAncestors"?VR(e)?[]:E1e(e,this._c):[].concat(t),i],a=r[0],l=r.reduce((c,d)=>{const u=pZ(e,d,s);return c.top=Ta(u.top,c.top),c.right=Wg(u.right,c.right),c.bottom=Wg(u.bottom,c.bottom),c.left=Ta(u.left,c.left),c},pZ(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function I1e(n){const{width:e,height:t}=Jre(n);return{width:e,height:t}}function T1e(n,e,t){const i=Kd(e),s=su(e),o=t==="fixed",r=sb(n,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=Vd(0);if(i||!i&&!o)if((Yy(e)!=="body"||xL(s))&&(a=zR(e)),i){const h=sb(e,!0,o,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&(l.x=jV(s));const c=s&&!i&&!o?tae(s,a):Vd(0),d=r.left+a.scrollLeft-l.x-c.x,u=r.top+a.scrollTop-l.y-c.y;return{x:d,y:u,width:r.width,height:r.height}}function pF(n){return Rc(n).position==="static"}function _Z(n,e){if(!Kd(n)||Rc(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return su(n)===t&&(t=t.ownerDocument.body),t}function nae(n,e){const t=Ha(n);if(VR(n))return t;if(!Kd(n)){let s=Hg(n);for(;s&&!ty(s);){if(Mc(s)&&!pF(s))return s;s=Hg(s)}return t}let i=_Z(n,e);for(;i&&v1e(i)&&pF(i);)i=_Z(i,e);return i&&ty(i)&&pF(i)&&!WV(i)?t:i||w1e(n)||t}const P1e=async function(n){const e=this.getOffsetParent||nae,t=this.getDimensions,i=await t(n.floating);return{reference:T1e(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function M1e(n){return Rc(n).direction==="rtl"}const R1e={convertOffsetParentRelativeRectToViewportRelativeRect:S1e,getDocumentElement:su,getClippingRect:N1e,getOffsetParent:nae,getElementRects:P1e,getClientRects:x1e,getDimensions:I1e,getScale:Kw,isElement:Mc,isRTL:M1e};function sae(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function A1e(n,e){let t=null,i;const s=su(n);function o(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function r(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=n.getBoundingClientRect(),{left:d,top:u,width:h,height:f}=c;if(a||e(),!h||!f)return;const g=AD(u),m=AD(s.clientWidth-(d+h)),_=AD(s.clientHeight-(u+f)),b=AD(d),w={rootMargin:-g+"px "+-m+"px "+-_+"px "+-b+"px",threshold:Ta(0,Wg(1,l))||1};let y=!0;function S(x){const k=x[0].intersectionRatio;if(k!==l){if(!y)return r();k?r(!1,k):i=setTimeout(()=>{r(!1,1e-7)},1e3)}k===1&&!sae(c,n.getBoundingClientRect())&&r(),y=!1}try{t=new IntersectionObserver(S,{...w,root:s.ownerDocument})}catch{t=new IntersectionObserver(S,w)}t.observe(n)}return r(!0),o}function O1e(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=HV(n),d=s||o?[...c?Nx(c):[],...Nx(e)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",t,{passive:!0}),o&&b.addEventListener("resize",t)});const u=c&&a?A1e(c,t):null;let h=-1,f=null;r&&(f=new ResizeObserver(b=>{let[v]=b;v&&v.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let g,m=l?sb(n):null;l&&_();function _(){const b=sb(n);m&&!sae(m,b)&&t(),m=b,g=requestAnimationFrame(_)}return t(),()=>{var b;d.forEach(v=>{s&&v.removeEventListener("scroll",t),o&&v.removeEventListener("resize",t)}),u==null||u(),(b=f)==null||b.disconnect(),f=null,l&&cancelAnimationFrame(g)}}const F1e=m1e,W1e=p1e,B1e=h1e,H1e=b1e,j1e=f1e,bZ=u1e,V1e=_1e,z1e=(n,e,t)=>{const i=new Map,s={platform:R1e,...t},o={...s.platform,_c:i};return d1e(n,e,{...s,platform:o})};var hN=typeof document<"u"?P.useLayoutEffect:P.useEffect;function AI(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!AI(n[i],e[i]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,s[i]))return!1;for(i=t;i--!==0;){const o=s[i];if(!(o==="_owner"&&n.$$typeof)&&!AI(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function oae(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function vZ(n,e){const t=oae(n);return Math.round(e*t)/t}function _F(n){const e=P.useRef(n);return hN(()=>{e.current=n}),e}function U1e(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:s,elements:{reference:o,floating:r}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[d,u]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=P.useState(i);AI(h,i)||f(i);const[g,m]=P.useState(null),[_,b]=P.useState(null),v=P.useCallback(q=>{q!==x.current&&(x.current=q,m(q))},[]),w=P.useCallback(q=>{q!==k.current&&(k.current=q,b(q))},[]),y=o||g,S=r||_,x=P.useRef(null),k=P.useRef(null),D=P.useRef(d),N=l!=null,R=_F(l),O=_F(s),B=_F(c),z=P.useCallback(()=>{if(!x.current||!k.current)return;const q={placement:e,strategy:t,middleware:h};O.current&&(q.platform=O.current),z1e(x.current,k.current,q).then(J=>{const ge={...J,isPositioned:B.current!==!1};F.current&&!AI(D.current,ge)&&(D.current=ge,Ob.flushSync(()=>{u(ge)}))})},[h,e,t,O,B]);hN(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,u(q=>({...q,isPositioned:!1})))},[c]);const F=P.useRef(!1);hN(()=>(F.current=!0,()=>{F.current=!1}),[]),hN(()=>{if(y&&(x.current=y),S&&(k.current=S),y&&S){if(R.current)return R.current(y,S,z);z()}},[y,S,z,R,N]);const K=P.useMemo(()=>({reference:x,floating:k,setReference:v,setFloating:w}),[v,w]),Z=P.useMemo(()=>({reference:y,floating:S}),[y,S]),re=P.useMemo(()=>{const q={position:t,left:0,top:0};if(!Z.floating)return q;const J=vZ(Z.floating,d.x),ge=vZ(Z.floating,d.y);return a?{...q,transform:"translate("+J+"px, "+ge+"px)",...oae(Z.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:J,top:ge}},[t,a,Z.floating,d.x,d.y]);return P.useMemo(()=>({...d,update:z,refs:K,elements:Z,floatingStyles:re}),[d,z,K,Z,re])}const $1e=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:s}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?bZ({element:i.current,padding:s}).fn(t):{}:i?bZ({element:i,padding:s}).fn(t):{}}}},q1e=(n,e)=>({...F1e(n),options:[n,e]}),K1e=(n,e)=>({...W1e(n),options:[n,e]}),G1e=(n,e)=>({...V1e(n),options:[n,e]}),Y1e=(n,e)=>({...B1e(n),options:[n,e]}),Z1e=(n,e)=>({...H1e(n),options:[n,e]}),Q1e=(n,e)=>({...j1e(n),options:[n,e]}),X1e=(n,e)=>({...$1e(n),options:[n,e]});var J1e="Arrow",rae=P.forwardRef((n,e)=>{const{children:t,width:i=10,height:s=5,...o}=n;return C.jsx(Ci.svg,{...o,ref:e,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});rae.displayName=J1e;var e0e=rae;function t0e(n){const[e,t]=P.useState(void 0);return $o(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let r,a;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;r=c.inlineSize,a=c.blockSize}else r=n.offsetWidth,a=n.offsetHeight;t({width:r,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var VV="Popper",[aae,UR]=Fb(VV),[i0e,lae]=aae(VV),cae=n=>{const{__scopePopper:e,children:t}=n,[i,s]=P.useState(null);return C.jsx(i0e,{scope:e,anchor:i,onAnchorChange:s,children:t})};cae.displayName=VV;var dae="PopperAnchor",uae=P.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...s}=n,o=lae(dae,t),r=P.useRef(null),a=Hn(e,r);return P.useEffect(()=>{o.onAnchorChange((i==null?void 0:i.current)||r.current)}),i?null:C.jsx(Ci.div,{...s,ref:a})});uae.displayName=dae;var zV="PopperContent",[n0e,s0e]=aae(zV),hae=P.forwardRef((n,e)=>{var Ve,Tt,Ei,Wt,qt,ut;const{__scopePopper:t,side:i="bottom",sideOffset:s=0,align:o="center",alignOffset:r=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:g,...m}=n,_=lae(zV,t),[b,v]=P.useState(null),w=Hn(e,qi=>v(qi)),[y,S]=P.useState(null),x=t0e(y),k=(x==null?void 0:x.width)??0,D=(x==null?void 0:x.height)??0,N=i+(o!=="center"?"-"+o:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(c)?c:[c],B=O.length>0,z={padding:R,boundary:O.filter(r0e),altBoundary:B},{refs:F,floatingStyles:K,placement:Z,isPositioned:re,middlewareData:q}=U1e({strategy:"fixed",placement:N,whileElementsMounted:(...qi)=>O1e(...qi,{animationFrame:f==="always"}),elements:{reference:_.anchor},middleware:[q1e({mainAxis:s+D,alignmentAxis:r}),l&&K1e({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?G1e():void 0,...z}),l&&Y1e({...z}),Z1e({...z,apply:({elements:qi,rects:Ln,availableWidth:Pr,availableHeight:Mr})=>{const{width:Xs,height:Vl}=Ln.reference,Rr=qi.floating.style;Rr.setProperty("--radix-popper-available-width",`${Pr}px`),Rr.setProperty("--radix-popper-available-height",`${Mr}px`),Rr.setProperty("--radix-popper-anchor-width",`${Xs}px`),Rr.setProperty("--radix-popper-anchor-height",`${Vl}px`)}}),y&&X1e({element:y,padding:a}),a0e({arrowWidth:k,arrowHeight:D}),h&&Q1e({strategy:"referenceHidden",...z})]}),[J,ge]=mae(Z),be=da(g);$o(()=>{re&&(be==null||be())},[re,be]);const Qe=(Ve=q.arrow)==null?void 0:Ve.x,Me=(Tt=q.arrow)==null?void 0:Tt.y,Ze=((Ei=q.arrow)==null?void 0:Ei.centerOffset)!==0,[at,Et]=P.useState();return $o(()=>{b&&Et(window.getComputedStyle(b).zIndex)},[b]),C.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:re?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:at,"--radix-popper-transform-origin":[(Wt=q.transformOrigin)==null?void 0:Wt.x,(qt=q.transformOrigin)==null?void 0:qt.y].join(" "),...((ut=q.hide)==null?void 0:ut.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:C.jsx(n0e,{scope:t,placedSide:J,onArrowChange:S,arrowX:Qe,arrowY:Me,shouldHideArrow:Ze,children:C.jsx(Ci.div,{"data-side":J,"data-align":ge,...m,ref:w,style:{...m.style,animation:re?void 0:"none"}})})})});hae.displayName=zV;var fae="PopperArrow",o0e={top:"bottom",right:"left",bottom:"top",left:"right"},gae=P.forwardRef(function(e,t){const{__scopePopper:i,...s}=e,o=s0e(fae,i),r=o0e[o.placedSide];return C.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[r]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:C.jsx(e0e,{...s,ref:t,style:{...s.style,display:"block"}})})});gae.displayName=fae;function r0e(n){return n!==null}var a0e=n=>({name:"transformOrigin",options:n,fn(e){var _,b,v;const{placement:t,rects:i,middlewareData:s}=e,r=((_=s.arrow)==null?void 0:_.centerOffset)!==0,a=r?0:n.arrowWidth,l=r?0:n.arrowHeight,[c,d]=mae(t),u={start:"0%",center:"50%",end:"100%"}[d],h=(((b=s.arrow)==null?void 0:b.x)??0)+a/2,f=(((v=s.arrow)==null?void 0:v.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=r?u:`${h}px`,m=`${-l}px`):c==="top"?(g=r?u:`${h}px`,m=`${i.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=r?u:`${f}px`):c==="left"&&(g=`${i.floating.width+l}px`,m=r?u:`${f}px`),{data:{x:g,y:m}}}});function mae(n){const[e,t="center"]=n.split("-");return[e,t]}var l0e=cae,pae=uae,_ae=hae,bae=gae,[$R,wJe]=Fb("Tooltip",[UR]),UV=UR(),vae="TooltipProvider",c0e=700,wZ="tooltip.open",[d0e,wae]=$R(vae),Cae=n=>{const{__scopeTooltip:e,delayDuration:t=c0e,skipDelayDuration:i=300,disableHoverableContent:s=!1,children:o}=n,r=P.useRef(!0),a=P.useRef(!1),l=P.useRef(0);return P.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),C.jsx(d0e,{scope:e,isOpenDelayedRef:r,delayDuration:t,onOpen:P.useCallback(()=>{window.clearTimeout(l.current),r.current=!1},[]),onClose:P.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>r.current=!0,i)},[i]),isPointerInTransitRef:a,onPointerInTransitChange:P.useCallback(c=>{a.current=c},[]),disableHoverableContent:s,children:o})};Cae.displayName=vae;var yae="Tooltip",[CJe,qR]=$R(yae),G3="TooltipTrigger",u0e=P.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=qR(G3,t),o=wae(G3,t),r=UV(t),a=P.useRef(null),l=Hn(e,a,s.onTriggerChange),c=P.useRef(!1),d=P.useRef(!1),u=P.useCallback(()=>c.current=!1,[]);return P.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),C.jsx(pae,{asChild:!0,...r,children:C.jsx(Ci.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...i,ref:l,onPointerMove:At(n.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:At(n.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:At(n.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:At(n.onFocus,()=>{c.current||s.onOpen()}),onBlur:At(n.onBlur,s.onClose),onClick:At(n.onClick,s.onClose)})})});u0e.displayName=G3;var h0e="TooltipPortal",[yJe,f0e]=$R(h0e,{forceMount:void 0}),iy="TooltipContent",Sae=P.forwardRef((n,e)=>{const t=f0e(iy,n.__scopeTooltip),{forceMount:i=t.forceMount,side:s="top",...o}=n,r=qR(iy,n.__scopeTooltip);return C.jsx(FR,{present:i||r.open,children:r.disableHoverableContent?C.jsx(xae,{side:s,...o,ref:e}):C.jsx(g0e,{side:s,...o,ref:e})})}),g0e=P.forwardRef((n,e)=>{const t=qR(iy,n.__scopeTooltip),i=wae(iy,n.__scopeTooltip),s=P.useRef(null),o=Hn(e,s),[r,a]=P.useState(null),{trigger:l,onClose:c}=t,d=s.current,{onPointerInTransitChange:u}=i,h=P.useCallback(()=>{a(null),u(!1)},[u]),f=P.useCallback((g,m)=>{const _=g.currentTarget,b={x:g.clientX,y:g.clientY},v=v0e(b,_.getBoundingClientRect()),w=w0e(b,v),y=C0e(m.getBoundingClientRect()),S=S0e([...w,...y]);a(S),u(!0)},[u]);return P.useEffect(()=>()=>h(),[h]),P.useEffect(()=>{if(l&&d){const g=_=>f(_,d),m=_=>f(_,l);return l.addEventListener("pointerleave",g),d.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",m)}}},[l,d,f,h]),P.useEffect(()=>{if(r){const g=m=>{const _=m.target,b={x:m.clientX,y:m.clientY},v=(l==null?void 0:l.contains(_))||(d==null?void 0:d.contains(_)),w=!y0e(b,r);v?h():w&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,d,r,c,h]),C.jsx(xae,{...n,ref:o})}),[m0e,p0e]=$R(yae,{isInside:!1}),_0e=pCe("TooltipContent"),xae=P.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:r,...a}=n,l=qR(iy,t),c=UV(t),{onClose:d}=l;return P.useEffect(()=>(document.addEventListener(wZ,d),()=>document.removeEventListener(wZ,d)),[d]),P.useEffect(()=>{if(l.trigger){const u=h=>{const f=h.target;f!=null&&f.contains(l.trigger)&&d()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[l.trigger,d]),C.jsx(OR,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:u=>u.preventDefault(),onDismiss:d,children:C.jsxs(_ae,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[C.jsx(_0e,{children:i}),C.jsx(m0e,{scope:t,isInside:!0,children:C.jsx(OCe,{id:l.contentId,role:"tooltip",children:s||i})})]})})});Sae.displayName=iy;var kae="TooltipArrow",b0e=P.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=UV(t);return p0e(kae,t).isInside?null:C.jsx(bae,{...s,...i,ref:e})});b0e.displayName=kae;function v0e(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),o=Math.abs(e.left-n.x);switch(Math.min(t,i,s,o)){case o:return"left";case s:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function w0e(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function C0e(n){const{top:e,right:t,bottom:i,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:i},{x:s,y:i}]}function y0e(n,e){const{x:t,y:i}=n;let s=!1;for(let o=0,r=e.length-1;o<e.length;r=o++){const a=e[o].x,l=e[o].y,c=e[r].x,d=e[r].y;l>i!=d>i&&t<(c-a)*(i-l)/(d-l)+a&&(s=!s)}return s}function S0e(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),x0e(e)}function x0e(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const s=n[i];for(;e.length>=2;){const o=e[e.length-1],r=e[e.length-2];if((o.x-r.x)*(s.y-r.y)>=(o.y-r.y)*(s.x-r.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const s=n[i];for(;t.length>=2;){const o=t[t.length-1],r=t[t.length-2];if((o.x-r.x)*(s.y-r.y)>=(o.y-r.y)*(s.x-r.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var k0e=Cae,Lae=Sae;const L0e=k0e,D0e=P.forwardRef(({className:n,sideOffset:e=4,...t},i)=>C.jsx(Lae,{ref:i,sideOffset:e,className:Ji("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",n),...t}));D0e.displayName=Lae.displayName;const E0e={en:{nav:{courses:"Courses",scholarships:"Scholarships",playground:"Code Playground",language:"Language"},home:{hero:{title:"Empower Your",titleAnimated:"Tech Journey",subtitle:"Join thousands of young women learning to code with HTML & CSS, and discover scholarships that can transform your future in tech.",ctaCourses:"Start Your Journey",ctaScholarships:"Explore Scholarships",feature1Title:"Interactive Learning",feature1Desc:"Hands-on coding experience",feature2Title:"Scholarship Access",feature2Desc:"Find funding opportunities",feature3Title:"Live Playground",feature3Desc:"Practice coding instantly"},cta:{title:"Your Tech Journey",titleLine2:"Starts Today",subtitle:"Build your future in technology with our beginner-friendly courses and discover scholarships that can fund your dreams.",btnStartLearning:"Start Learning Now",btnFindScholarships:"Find Scholarships"},courses:{title:"Interactive Coding Courses",titleHighlight:"Coding Courses",subtitle:"Learn HTML and CSS through hands-on projects and interactive lessons designed specifically for beginners.",pathTitle:"Your Learning Journey Starts Here",pathSubtitle:"Follow our structured path to become confident in web development",step1Title:"1. Learn HTML",step1Desc:"Build the structure of web pages",step2Title:"2. Style with CSS",step2Desc:"Make your pages beautiful and responsive",step3Title:"3. Build Projects",step3Desc:"Create amazing websites and portfolios",viewAll:"View All Courses",lessons:"lessons",weeks:"weeks",startLearning:"Start Learning",continue:"Continue",playgroundTitle:"Interactive Code Playground",playgroundDesc:"Practice your skills in our live code editor with instant preview. See your changes in real-time!",playgroundFeature1:"Live HTML/CSS preview",playgroundFeature2:"Syntax highlighting & auto-complete",playgroundFeature3:"Save and share your projects",playgroundFeature4:"Step-by-step guided tutorials",tryPlayground:"Try the Playground"},scholarships:{title:"Tech Scholarships",titleHighlight:"Scholarships",subtitle:"Discover funding opportunities that can help you pursue your dreams in technology and computer science.",viewAll:"View All Scholarships",deadline:"Deadline",amount:"Award Amount",learnMore:"Learn More",viewDetails:"View Details",statusOpen:"Open",statusUpcoming:"Upcoming",statusClosingSoon:"Closing Soon",statusClosed:"Closed"},footer:{about:"About MsoSTEM",aboutText:"Empowering women to code, creating pathways to success, and building a more inclusive tech industry, one student at a time.",quickLinks:"Quick Links",learn:"Learn",resources:"Resources",contact:"Contact",phone:"Phone",email:"Email",rights:"All rights reserved.",htmlFundamentals:"HTML Fundamentals",cssStyling:"CSS Styling",responsiveDesign:"Responsive Design",codePlayground:"Code Playground",learningPath:"Learning Path",scholarships:"Scholarships",community:"Community",successStories:"Success Stories",mentorship:"Mentorship",careerGuide:"Career Guide",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",contactUs:"Contact Us",futureCollaboration:"For future collaboration"}},course:{overview:"Overview",lessons:"Lessons",courseLessons:"Course Lessons",lessonContent:"Lesson Content",interactivePlayground:"Interactive Playground",progress:"Your Progress",completed:"Completed",duration:"Duration",lessonsCount:"Lessons",level:"Level",startCourse:"Start Course",continueLearning:"Continue Learning",lessonComplete:"Lesson Complete",weeks:"weeks",loadingCourse:"Loading course...",courseNotFound:"Course not found",courseNotFoundDesc:"The course you're looking for doesn't exist.",selectLesson:"Select a lesson to view its content.",lesson:"Lesson",htmlCode:"HTML Code",arduinoCode:"Arduino C++",wiringDiagram:"Wiring Diagram",save:"Save"},lesson:{wireCircuit:"Wire Your Circuit",tryCode:"Try the Code",saveCode:"Save Code",resetCode:"Reset Code",output:"Output",preview:"Preview",nextLesson:"Next Lesson",backToCourse:"Back to Course",completeLesson:"Complete Lesson",downloading:"Downloading...",codeSaved:"Code saved successfully!"},scholarship:{details:"Scholarship Details",eligibility:"Eligibility",requirements:"Requirements",benefits:"Benefits",howToApply:"How to Apply",applyNow:"Apply Now",backToScholarships:"Back to Scholarships",deadline:"Application Deadline",amount:"Award Amount"},playground:{title:"Code Playground",titleHighlight:"Playground",description:"Experiment with HTML and CSS in our interactive code editor. See your changes come to life instantly!",projectTitle:"Project Title",reset:"Reset",run:"Run Code",clear:"Clear",save:"Save",htmlTab:"HTML",cssTab:"CSS",previewTab:"Live Preview",projectSaved:"Project saved successfully!",tryExamples:"Try These Examples",button:"Button",card:"Card",navbar:"Navbar",gradient:"Gradient"},common:{loading:"Loading...",error:"Error",beginner:"Beginner",intermediate:"Intermediate",advanced:"Advanced",free:"Free",varies:"Varies"},courseContent:{"course-1":{title:"HTML Fundamentals",description:"Master the building blocks of the web with comprehensive, beginner-friendly HTML lessons and hands-on interactive projects. Learn everything from basic tags to advanced HTML5 features!"},"course-2":{title:"CSS Styling & Design",description:"Master the art of beautiful web design! Learn CSS from basics to advanced techniques including animations, layouts, and modern design principles that make websites stunning and professional."},"course-3":{title:"Arduino Microprocessors Starter Kit",description:"Learn to program Arduino microprocessors from scratch! Build exciting projects with easy-to-follow code examples, wiring diagrams, and interactive visuals."}},scholarshipContent:{"scholarship-1":{title:"TechGirls",description:"Fully-funded U.S. State Department program empowering young women (ages 15-17) to pursue STEM careers through an intensive summer exchange program in the United States.",field:"Science, Technology, Engineering, Mathematics, STEM, Leadership",location:"Virginia Tech University + U.S. Cities",eligibility:"Young women ages 15-17 from 37 eligible countries with strong interest in STEM fields",organizationName:"U.S. Department of State"},"scholarship-2":{title:"Benjamin Franklin Transatlantic Fellowship",description:"Fully-funded 4-week intensive exchange program at Purdue University empowering European youth (ages 16-18) to explore diplomacy, leadership, and transatlantic relations in the United States.",field:"Diplomacy, Leadership, International Relations, Civil Society",location:"Purdue University, West Lafayette, Indiana",eligibility:"European citizens ages 16-18 with strong academic achievement and leadership potential",organizationName:"U.S. Department of State"},"scholarship-3":{title:"Kennedy-Lugar Youth Exchange & Study (YES)",description:"Competitive merit-based scholarship program bringing high school students from countries with significant Muslim populations to study for a full academic year in the United States, living with host families.",field:"Cultural Exchange, Leadership",location:"High Schools across the United States",eligibility:"High school students (ages 15-17) from designated countries with strong academic records",organizationName:"U.S. Department of State"}},lessonContent:{html:{},css:{},arduino:{}}},sq:{nav:{courses:"Kurset",scholarships:"Bursat",playground:"Hapsira e Kodit",language:"Gjuha"},home:{hero:{title:"Fuqizo",titleAnimated:"Udhtimin Tnd Teknologjik",subtitle:"Bashkohu me mijra gra t reja q msojn t kodojn me HTML & CSS, dhe zbulo bursa q mund t transformojn t ardhmen tnde n teknologji.",ctaCourses:"Fillo Udhtimin",ctaScholarships:"Eksploro Bursat",feature1Title:"Msim Interaktiv",feature1Desc:"Prvoj praktike kodimi",feature2Title:"Akses n Bursa",feature2Desc:"Gjej mundsi financimi",feature3Title:"Hapsira e Drejtprdrejt",feature3Desc:"Praktiko kodin menjher"},cta:{title:"Udhtimi Yt Teknologjik",titleLine2:"Fillon Sot",subtitle:"Ndrto t ardhmen tnde n teknologji me kurset tona miqsore pr fillestar dhe zbulo bursa q mund t financojn ndrrat e tua.",btnStartLearning:"Fillo Kursin",btnFindScholarships:"Gjej Bursa"},courses:{title:"Kurse Interaktive",titleHighlight:" Kodimi",subtitle:"Mso HTML dhe CSS prmes projekteve praktike dhe msimeve interaktive t dizajnuara posarisht pr fillestar.",pathTitle:"Udhtimi Yt i T Msuarit Fillon Ktu",pathSubtitle:"Ndiq rrugn ton t strukturuar pr t br t vetbesuar n zhvillimin e uebit",step1Title:"1. Mso HTML",step1Desc:"Ndrto strukturn e faqeve web",step2Title:"2. Stilo me CSS",step2Desc:"Bji faqet e tua t bukura dhe responsive",step3Title:"3. Ndrto Projekte",step3Desc:"Krijo faqe interneti dhe portfolio t mahnitshme",viewAll:"Shiko T Gjitha Kurset",lessons:"msime",weeks:"jav",startLearning:"Fillo t Msosh",continue:"Vazhdo",playgroundTitle:"Hapsira e Kodit Interaktiv",playgroundDesc:"Praktiko aftsit n editorin ton t drejtprdrejt me pamje paraprake t menjhershme. Shiko ndryshimet n koh reale!",playgroundFeature1:"Pamje paraprake HTML/CSS e drejtprdrejt",playgroundFeature2:"Theksim sintakse dhe plotsim automatik",playgroundFeature3:"Ruaj dhe ndaj projektet tua",playgroundFeature4:"Msime t udhzuara hap pas hapi",tryPlayground:"Provoje"},scholarships:{title:"Bursa dhe",titleHighlight:"Programe Shkmbimi",subtitle:"Zbulo mundsi financimi q mund t t ndihmojn t ndjeksh ndrrat n teknologji dhe shkenca kompjuterike.",viewAll:"Shiko T Gjitha Bursat",deadline:"Afati",amount:"Shuma e mimit",learnMore:"Mso M Shum",viewDetails:"Shiko Detajet",statusOpen:"E Hapur",statusUpcoming:"S Shpejti",statusClosingSoon:"Mbyllet S Shpejti",statusClosed:"E Mbyllur"},footer:{about:"Rreth MsoSTEM",aboutText:"Fuqizimi i grave pr t koduar, krijimi i rrugve drejt suksesit dhe ndrtimi i nj industrie teknologjike m gjithprfshirse, nj studente n nj koh.",quickLinks:"Lidhje t Shpejta",learn:"Mso",resources:"Burimet",contact:"Kontakti",phone:"Telefoni",email:"Email",rights:"T gjitha t drejtat e rezervuara.",htmlFundamentals:"Bazat e HTML",cssStyling:"Stilizimi CSS",responsiveDesign:"Dizajni Responsive",codePlayground:"Hapsira e Kodit",learningPath:"Rruga e Msimit",scholarships:"Bursat",community:"Komuniteti",successStories:"Histori Suksesi",mentorship:"Mentorimi",careerGuide:"Udhzuesi i Karriers",privacyPolicy:"Politika e Privatsis",termsOfService:"Kushtet e Shrbimit",contactUs:"Na Kontaktoni",futureCollaboration:"Pr bashkpunim t ardhshm"}},course:{overview:"Prmbledhje",lessons:"Msimet",courseLessons:"Msimet e Kursit",lessonContent:"Prmbajtja e Msimit",interactivePlayground:"Hapsira Interaktive",progress:"Progresi Yt",completed:"Prfunduar",duration:"Kohzgjatja",lessonsCount:"Msime",level:"Niveli",startCourse:"Fillo Kursin",continueLearning:"Vazhdo t Msosh",lessonComplete:"Msimi Prfunduar",weeks:"jav",loadingCourse:"Duke ngarkuar kursin...",courseNotFound:"Kursi nuk u gjet",courseNotFoundDesc:"Kursi q po krkon nuk ekziston.",selectLesson:"Zgjidh nj msim pr t par prmbajtjen.",lesson:"Msimi",htmlCode:"Kodi HTML",arduinoCode:"Arduino C++",wiringDiagram:"Diagrami i Lidhjes",save:"Ruaj"},lesson:{wireCircuit:"Lidh Qarkun Tnd",tryCode:"Provo Kodin",saveCode:"Ruaj Kodin",resetCode:"Rivendos Kodin",output:"Rezultati",preview:"Pamja Paraprake",nextLesson:"Msimi Tjetr",backToCourse:"Kthehu te Kursi",completeLesson:"Prfundo Msimin",downloading:"Duke shkarkuar...",codeSaved:"Kodi u ruajt me sukses!"},scholarship:{details:"Detajet e Burss",eligibility:"Kushtet e Pranimit",requirements:"Krkesat",benefits:"Prfitimet",howToApply:"Si t Aplikosh",applyNow:"Apliko Tani",backToScholarships:"Kthehu te Bursat",deadline:"Afati i Aplikimit",amount:"Shuma e mimit",description:"Zbuloni mundsi financimi q mund t ju ndihmojn t ndiqni ndrrat tuaja n teknologji dhe shkenca kompjuterike."},playground:{title:"Hapsira e Kodit",titleHighlight:"e Kodit",description:"Eksperimento me HTML dhe CSS n editorin ton interaktiv. Shiko ndryshimet t vijn n jet menjher!",projectTitle:"Titulli i Projektit",reset:"Rivendos",run:"Ekzekuto Kodin",clear:"Pastro",save:"Ruaj",htmlTab:"HTML",cssTab:"CSS",previewTab:"Pamja e Drejtprdrejt",projectSaved:"Projekti u ruajt me sukses!",tryExamples:"Provo Kto Shembuj",button:"Butoni",card:"Karta",navbar:"Shiriti i Navigimit",gradient:"Gradienti"},common:{loading:"Duke ngarkuar...",error:"Gabim",beginner:"Fillestar",intermediate:"I Ndrmjetm",advanced:"I Avancuar",free:"Falas",varies:"Varion"},courseContent:{"course-1":{title:"Bazat e HTML",description:"Zotro blloqet ndrtuese t uebit me msime gjithprfshirse dhe miqsore pr fillestar t HTML dhe projekte interaktive praktike. Mso gjithka nga etiketat baz deri te veorit e avancuara HTML5!"},"course-2":{title:"Stilizimi dhe Dizajni me CSS",description:"Zotro artin e dizajnit t bukur t uebit! Mso CSS nga bazat deri te teknikat e avancuara prfshir animacionet, strukturat dhe parimet moderne t dizajnit q bjn faqet e internetit t mahnitshme dhe profesionale."},"course-3":{title:"Kiti Fillestar i Mikroprocesuesve Arduino",description:"Mso t programosh mikroprocesuesit Arduino nga e para! Ndrto projekte emocionuese me shembuj kodi t leht pr tu ndjekur, diagrame lidhse dhe vizuale interaktive."}},scholarshipContent:{"scholarship-1":{title:"TechGirls",description:"Program plotsisht i financuar nga Departamenti Amerikan i Shtetit q fuqizon grat e reja (mosha 15-17) t ndjekin karriera STEM prmes nj programi intensiv veror t shkmbimit n Shtetet e Bashkuara.",field:"Shkenca, Teknologji, Inxhinieri, Matematik, STEM, Udhheqje",location:"Universiteti Teknologjik i Virxhinias + Qytete Amerikane",eligibility:"Gra t reja mosha 15-17 nga 37 vende t pranueshme me interes t fort n fushat STEM",organizationName:"Departamenti Amerikan i Shtetit",aboutProgram:{title:"Rreth Programit TechGirls",description:"TechGirls sht nj program prestigjioz, plotsisht i financuar nga Departamenti Amerikan i Shtetit q fuqizon grat e reja nga e gjith bota t ndjekin karriera n shkenc, teknologji, inxhinieri dhe matematik (STEM). Kjo mundsi q ndryshon jetn kombinon trajnim intensiv teknologjik n Universitetin Virginia Tech me zhytje kulturore n t gjith Shtetet e Bashkuara.",programHighlights:{title:"Pikat Kryesore t Programit",items:["Prvoj intensive 23-ditore n Shtetet e Bashkuara","38 or kurse STEM n teknologjit m t reja","Kamp teknologjik n Universitetin Virginia Tech","Prvoj zhytjeje kulturore me familje pritse","Program mentorimi 7-mujor pas shkmbimit"]},whatsIncluded:{title:"far Prfshihet",items:["Bilet avioni ndrkombtar vajtje-ardhje","T gjitha akomodimet dhe ushqimet","Aktivitete edukative dhe vizita n terren","Vizita n kompani teknologjike (NASA, Smithsonian)","Shpenzime jetese dhe aktivitete kulturore"]}},eligibilityRequirements:{title:"Kushtet e Pranimit",basicRequirements:{title:"Krkesat Baz",items:["Mosha 15-17 n fillim t programit","Qytetar/rezident t vendeve t pranueshme","Interes i fort n fushat STEM","Njohuri t avancuara t ndrmjetme t anglishtes","Pozicion i mir akademik","Nuk krkohet prvoj e mparshme n kodim"]},personalQualities:{title:"Cilsi Personale",items:["Potencial i dukshm udhheqs","Prvoj n shrbim komunitar","Pjekuri dhe mendje e hapur","Angazhim pr projekt veprimi n komunitet","Prvoj e kufizuar e mparshme n SHBA (e preferuar)"]},eligibleCountries:{title:"Vende/Territore t Pranueshme (37 gjithsej)",regions:{subSaharanAfrica:"Afrika Subsahariane: Kamerun, Kenia, Nigjeria, Ruanda, Afrika e Jugut, Zambia",eastAsiaPacific:"Azia Lindore & Paqsori: Kamboxhia, Fixhi, Indonezia, Mongolia, Tajvan, Vietnami",europeEurasia:"Evropa & Eurazia: Shqipria, Qipro, Greqia, Kosova, Mali i Zi, Turqia",middleEastNorthAfrica:"Lindja e Mesme & Afrika e Veriut: Algjeria, Egjipti, Jordania, Libani, Maroku, Territoret Palestineze, Tunizia",southCentralAsia:"Azia e Jugut & Qendrore: Kazakistani, Kirgizistani, Pakistani, Taxhikistani, Turkmenistani, Uzbekistani",westernHemisphere:"Hemisfera Perndimore: Brazili, Kosta Rika, Ekuadori, Panama, Peruja, Surinami",unitedStates:"Shtetet e Bashkuara: Qytetart dhe rezidentt amerikan jan gjithashtu t pranueshm"}}},programStructure:{title:"Struktura e Programit",phase1:{title:"Faza 1: Kampi Teknologjik n Virginia Tech",description:"Kamp teknologjik intensiv q ofron trajnim praktik STEM, vizita n laborator, ndjekje t puns me profesionist teknologjik dhe puntori udhheqjeje."},phase2:{title:"Faza 2: Zhytje Komunitare",description:"Zhytje kulturore n qytete amerikane prfshir Austin, Cincinnati, Denver, Detroit, Kansas City ose Seattle. Prjetoni jetn me familje pritse dhe vizitoni kompani t mdha teknologjike."},phase3:{title:"Faza 3: Projekti i Veprimit Komunitar",description:"Kur t ktheheni n shtpi, zbatoni nj projekt STEM bazuar n komunitet si fillimi i klubeve teknologjike, msimi i kodimit ose organizimi i panairit t karrierave."}},applicationInfo:{title:"Informacion pr Aplikimin",timeline:{title:"Kalendari i Aplikimit 2026",items:["Aplikimi Hapet: Vjesht 2025","Afati i Aplikimit: Dhjetor 2025","Njoftimi: Mars 2026","Datat e Programit: Korrik 2026"]},requirements:{title:"Krkesat pr Aplikim",items:["Plotso aplikimin online n anglisht","Fotografi personale/portret","Transkripti akademik m i fundit","Ese dhe deklarata personale","T gjitha prgjigjet duhet t jen pun origjinale"]},selectionProcess:{title:"Procesi i Przgjedhjes",items:["Komiteti i pavarur shqyrton aplikimet","Intervista n ambasadn amerikane pr kandidatt ndrkombtar","Intervista Legacy International pr kandidatt amerikan","Przgjedhja finale dhe njoftimi"]}},badgeText:{open:"E Hapur pr Aplikime",upcoming:"Periudha e Ardhshme e Aplikimit",closingSoon:"Mbyllet S Shpejti"}},"scholarship-2":{title:"Burs Benjamin Franklin Transatlantike",description:"Program shkmbimi intensiv 4-javor plotsisht i financuar n Universitetin Purdue q fuqizon t rinjt evropian (mosha 16-18) t eksplorojn diplomacin, udhheqjen dhe marrdhniet transatlantike n Shtetet e Bashkuara.",field:"Diplomaci, Udhheqje, Marrdhnie Ndrkombtare, Shoqria Civile",location:"Universiteti Purdue, West Lafayette, Indiana",eligibility:"Qytetar evropian mosha 16-18 me arritje t forta akademike dhe potencial udhheqs",organizationName:"Departamenti Amerikan i Shtetit",aboutProgram:{title:"Rreth Burss Benjamin Franklin Transatlantike",description:"Benjamin Franklin Transatlantic Fellowship (BFTF) sht nj program prestigjioz 4-javor i shkmbimit veror i organizuar nga Universiteti Purdue q bashkon lidert e rinj evropian pr t eksploruar diplomacin, udhheqjen dhe marrdhniet transatlantike n Shtetet e Bashkuara. Ky program i financuar plotsisht i Departamentit t Shtetit t SHBA-s i fuqizon pjesmarrsit t bhen ambasador t ardhshm t bashkpunimit ndrkombtar.",programHighlights:{title:"Pikat Kryesore t Programit",items:["Program intensiv 4-javor n Universitetin Purdue","Fokus n diplomacin dhe marrdhniet transatlantike","Puntori t zhvillimit t udhheqjes","Zhytje kulturore n qytete t shumta amerikane","Ndrveprime me grupe shumkombshe"]},programComponents:{title:"Komponentt e Programit",items:["Seminare akademike pr politikn e jashtme amerikane","Diskutime pr demokracin dhe shoqrin civile","Trajnim pr komunikim dhe avokim","Vizita n institucione qeveritare","Takime me hartuesit e politikave dhe ekspertt"]}},eligibilityRequirements:{title:"Kushtet e Pranimit",basicRequirements:{title:"Krkesat Baz",items:["Mosha 16-18 n fillim t programit","Shtetsi evropiane ose vendbanim i prhershm ligjor","Arritje t forta akademike","Njohuri t larta t gjuhs angleze","Prvoj e vogl ose asnj prvoj e mparshme n SHBA","Angazhim pr t'u kthyer n shtpi pas programit"]},personalQualities:{title:"Cilsi Personale",items:["Potencial i dukshm udhheqs","Interes n diplomaci dhe marrdhnie ndrkombtare","Pjekuri dhe pavarsi","Aftsi t forta sociale dhe fleksibilitet","Qndrim i hapur dhe tolerant","Angazhim n shrbim komunitar"]},eligibleCountries:{title:"Vende Pjesmarrse",regions:{europe:"Vende evropiane prfshir: Shqipria, Austria, Belgjika, Qipro, Republika eke, Estonia, Finlanda, Franca, Gjermania, Greqia, Hungaria, Irlanda, Italia, Kosova, Letonia, Lituania, Luksemburgu, Malta, Holanda, Polonia, Portugalia, Sllovakia, Sllovenia, Spanja dhe t tjer."}}},applicationInfo:{title:"Informacion pr Aplikimin",timeline:{title:"Kalendari i Aplikimit",items:["Aplikimi Hapet: Vjesht (variabile sipas vendit)","Afati i Aplikimit: Dimr (variabile sipas vendit)","Njoftimi: Pranver","Datat e Programit: Ver (4 jav)"]},requirements:{title:"Krkesat pr Aplikim",items:["Plotso aplikimin online n anglisht","Ese personale dhe deklarata","Transkripti akademik","Letra rekomandimi","Kontakto ambasadn amerikane lokale pr detaje"]},selectionProcess:{title:"Procesi i Przgjedhjes",items:["Komiteti i pavarur shqyrton aplikimet","Intervista n ambasadn amerikane pr kandidatt ndrkombtar","Intervista Legacy International pr kandidatt amerikan","Przgjedhja finale dhe njoftimi"]}},badgeText:{open:"E Hapur pr Aplikime",upcoming:"Periudha e Ardhshme e Aplikimit",closingSoon:"Mbyllet S Shpejti"}},"scholarship-3":{title:"Programi i Shkmbimit dhe Studimit Kennedy-Lugar (YES)",description:"Program bursash konkurrues bazuar n merita q sjell student t shkolls s mesme nga vende me popullsi t konsiderueshme myslimane pr t studiuar pr nj vit t plot akademik n Shtetet e Bashkuara, duke jetuar me familje pritse.",field:"Shkmbim Kulturor, Udhheqje",location:"Shkolla t Mesme n t gjitha Shtetet e Bashkuara",eligibility:"Student t shkolls s mesme (mosha 15-17) nga vende t caktuara me rekorde t forta akademike",organizationName:"Departamenti Amerikan i Shtetit",aboutProgram:{title:"Rreth Programit Kennedy-Lugar Youth Exchange & Study (YES)",description:"Programi Kennedy-Lugar Youth Exchange & Study (YES) sht nj program bursash konkurrues bazuar n merita, i financuar nga Departamenti Amerikan i Shtetit, q sjell student t shkolls s mesme nga vende me popullsi t konsiderueshme myslimane n Shtetet e Bashkuara pr nj vit t plot akademik. Studentt jetojn me familje amerikane vullnetare pritse dhe frekuentojn shkolla t mesme amerikane, duke shrbyer si ambasador kulturor.",programHighlights:{title:"Pikat Kryesore t Programit",items:["Vit akademik i plot (9-10 muaj) n SHBA","Jetojn me familje amerikane vullnetare pritse","Frekuentojn shkolla t rregullta t mesme amerikane","Zhytje kulturore dhe zhvillim udhheqs","Shrbejn si ambasador kulturor t rinj"]},whatsIncluded:{title:"far Prfshihet",items:["Bilet avioni ndrkombtar vajtje-ardhje","Dhom dhe ushqim me familjen pritse","Tarifat e shkolls s mesme dhe pagesat","Prfitime mjeksore dhe tarifa vize","Orientim dhe mbshtetje e vazhdueshme"]}},eligibilityRequirements:{title:"Kushtet e Pranimit",basicRequirements:{title:"Krkesat Baz",items:["Mosha 15-18 (student t shkolls s mesme)","Qytetar/rezident t vendeve pjesmarrse","Przgjedhje bazuar n merita prmes konkurrimit","Pozicion i mir akademik","Njohuri t gjuhs angleze","Asnj prvoj afatgjat e mparshme n SHBA"]},personalQualities:{title:"Cilsi Personale",items:["Potencial udhheqs dhe pjekuri","Kuriozitet kulturor dhe mendje e hapur","Angazhim pr shkmbim kulturor","Orientim pr shrbim komunitar","Shklqim akademik dhe motivim","Aftsi t forta komunikimi"]},eligibleCountries:{title:"Vende Pjesmarrse (45+ vende)",regions:{southeastAsia:"Azia Juglindore: Indonezia, Malajzia, Filipinet, Tailanda",europeEurasia:"Evropa & Eurazia: Bosnja dhe Hercegovina, Bullgaria, Turqia",middleEastNorthAfrica:"Lindja e Mesme & Afrika Veriore: Egjipti, Jordania, Maroku, Tunizia",southCentralAsia:"Azia Jugore & Qendrore: India, Pakistani",subSaharanAfrica:"Afrika Subsahariane: Gana, Mali, Senegali, Afrika e Jugut",other:"Dhe shum vende t tjera me popullsi t konsiderueshme myslimane."}}},applicationInfo:{title:"Informacion pr Aplikimin",timeline:{title:"Kalendari i Aplikimit",items:["Aplikimi Hapet: Vjesht (variabile sipas vendit)","Afati i Aplikimit: Dimr","Njoftimi: Pranver","Datat e Programit: Vit akademik i plot (Gusht/Shtator - Maj/Qershor)"]},requirements:{title:"Krkesat pr Aplikim",items:["Plotso aplikimin online","Transkripti akademik","Ese dhe deklarata personale","Letra rekomandimi","Intervista (pr finalistt)"]},selectionProcess:{title:"Procesi i Przgjedhjes",items:["Shqyrtim fillestare i aplikimeve","Intervista pr kandidatt e przgjedhur","Vlersim nga organizata partnere lokale","Przgjedhja finale nga Departamenti i Shtetit"]}},badgeText:{open:"E Hapur pr Aplikime",upcoming:"Periudha e Ardhshme e Aplikimit",closingSoon:"Mbyllet S Shpejti"}},"scholarship-4":{title:"Programi i Shkmbimit t Liderve t Ardhshm (FLEX)",description:"Program bursash konkurrues bazuar n merita i financuar nga Departamenti Amerikan i Shtetit q sjell student t shkolls s mesme nga Evropa, Eurazia dhe Azia Qendrore n Shtetet e Bashkuara pr nj vit t plot akademik.",field:"Shkmbim Kulturor, Udhheqje, Demokraci",location:"Shkolla t Mesme Publike n t gjitha Shtetet e Bashkuara",eligibility:"Student t shkolls s mesme (mosha 15-17) nga 22 vende pjesmarrse me arritje t forta akademike",organizationName:"Departamenti Amerikan i Shtetit",aboutProgram:{title:"Rreth Programit Future Leaders Exchange (FLEX)",description:"Programi Future Leaders Exchange (FLEX) sht nj program bursash konkurrues bazuar n merita i financuar nga Departamenti Amerikan i Shtetit q sjell student t shkolls s mesme nga Evropa, Eurazia dhe Azia Qendrore n Shtetet e Bashkuara pr nj vit t plot akademik. Me mbi 32,000 ish-student q nga viti 1993, FLEX promovon mirkuptim t ndrsjell dhe paqe t qndrueshme prmes shkmbimit t rinis.",programHighlights:{title:"Pikat Kryesore t Programit",items:["Vit akademik i plot (9-10 muaj) n SHBA","Jetojn me familje amerikane vullnetare pritse","Frekuentojn shkolla t rregullta publike t mesme amerikane","Shum konkurrues (1 n 50 prqindje pranimi)","Fokus n demokraci dhe siprmarrje"]},programComponents:{title:"Krkesat e Programit",items:["30+ or shrbim komunitar","Aktivitete orientimi kulturor","Puntori zhvillimi udhheqs","Prgjegjsi si ambasador kulturor","Pjesmarrje n rrjetin e ish-studentve"]}},eligibilityRequirements:{title:"Kushtet e Pranimit",basicRequirements:{title:"Krkesat Baz",items:["Mosha 15-17 (disa burime thon deri n 19)","Qytetar t vendeve pjesmarrse","Aktualisht t regjistruar n shkolln e mesme","Performanc e fort akademike","Njohuri t gjuhs angleze","Asnj prvoj e konsiderueshme e mparshme n SHBA"]},personalQualities:{title:"Cilsi Personale",items:["Potencial i jashtzakonshm udhheqs","Karakter i fort dhe pjekuri","Angazhim pr shrbim komunitar","Interes n demokraci dhe ekonomi t tregut t lir","Prshtatshmri kulturore dhe hapje","Shklqim akademik dhe kuriozitet"]},eligibleCountries:{title:"Vende Pjesmarrse (22 vende)",regions:{easternEurope:"Evropa Lindore: Republika eke, Estonia, Hungaria, Letonia, Lituania, Polonia, Rumania, Sllovakia",southeastEurope:"Evropa Juglindore: Greqia, Mali i Zi, Serbia",eurasia:"Eurazia: Armenia, Azerbajxhani, Bjellorusia, Gjeorgjia, Moldavia, Rusia, Ukraina",centralAsia:"Azia Qendrore: Kazakistani, Kirgizistani, Taxhikistani, Turkmenistani, Uzbekistani",eastAsia:"Azia Lindore: Mongolia"}}},applicationInfo:{title:"Informacion pr Aplikimin",timeline:{title:"Kalendari i Aplikimit",items:["Aplikimi Hapet: Vjesht","Afati i Aplikimit: Dimr","Njoftimi: Pranver/Ver","Datat e Programit: Vit akademik i plot (Gusht/Shtator - Maj/Qershor)"]},requirements:{title:"Krkesat pr Aplikim",items:["Plotso aplikimin online prmes organizats partnere","Test i gjuhs angleze (TOEFL ose ekuivalent)","Transkripti akademik","Ese dhe deklarata personale","Intervista (pr finalistt)"]},selectionProcess:{title:"Procesi i Przgjedhjes",items:["Testim kombtar dhe shqyrtim i aplikimit","Intervista me panelin e organizats partnere","Przgjedhje semifinale","Intervista finale dhe przgjedhje nga Departamenti i Shtetit"]}},badgeText:{open:"E Hapur pr Aplikime",upcoming:"Periudha e Ardhshme e Aplikimit",closingSoon:"Mbyllet S Shpejti"}},"scholarship-5":{title:"AFS Global You Adventurer",description:"Program unik shkmbimi virtual 5-javor i dizajnuar pr student t shkolls s mesme n t gjith botn. Ky program plotsisht zhyts dhe plotsisht i financuar ndihmon pjesmarrsit t zhvillojn kompetenc globale, aftsi komunikimi ndrkulturor, kapacitet udhheqs dhe aftsi bashkpunimi dixhital.",field:"Qytetari Globale, Udhheqje, Aftsi Ndrkulturore",location:"Online/Virtual (nga kudo n bot)",eligibility:"Student t shkolls s mesme mosha 14-17 nga do vend me akses n internet",organizationName:"AFS Intercultural Programs",aboutProgram:{title:"Rreth AFS Global You Adventurer",description:"AFS Global You Adventurer sht nj program unik shkmbimi virtual 5-javor i dizajnuar pr student t shkolls s mesme n t gjith botn. Ky program plotsisht zhyts dhe plotsisht i financuar ndihmon pjesmarrsit t zhvillojn kompetenc globale, aftsi komunikimi ndrkulturor, kapacitet udhheqs dhe aftsi bashkpunimi dixhital. Prmes aktiviteteve angazhuese, diskutimeve interaktive dhe puns n ekip ndrkulturore, studentt lidhen me bashkmoshatar nga sfondet e ndryshme pr t br m empatik, me mendje t hapur dhe t prgatitur pr t prparuar n nj bot t globalizuar.",programHighlights:{title:"Pikat Kryesore t Programit",items:["Shkmbim virtual interaktiv 5-javor","Fokus n qytetarin globale dhe aftsit ndrkulturore","Aktivitete zhvillimi udhheqs dhe pun ekipore","Sfida t bots reale t lidhura me Objektivat e Zhvillimit t Qndrueshm t OKB-s (SDGs)","Ndrveprime t prditshme online me bashkmoshatar nga e gjith bota"]},programComponents:{title:"Komponentt e Programit",items:["Puntori pr Kompetenc Globale: Trajnim pr komunikim, empati dhe vetdijesim kulturor","Sfida t Qndrueshmris: Projekte t lidhura me SDGs","Dialog Ndrkulturore: Sesione interaktive me bashkmoshatar ndrkombtar","Aktivitete Udhheqse: Bashkpunim bazuar n ekip prmes zonave kohore","Mjete Bashkpunimi Dixhital: Ndrtimi i aftsive n pun ekipore dhe zgjidhje problemesh n distanc"]}},eligibilityRequirements:{title:"Kushtet e Pranimit",basicRequirements:{title:"Krkesat Baz",items:["Mosha 14-17 n fillim t programit","E hapur pr student nga kudo n bot","Interes i fort n shtje globale, kultur dhe udhheqje","Njohuri t larta t gjuhs angleze","Akses n lidhje t qndrueshme interneti dhe kompjuter"]},personalQualities:{title:"Cilsi Personale",items:["Kuriozitet dhe mendje e hapur","Dshir pr t bashkpunuar me bashkmoshatar nga kultura t ndryshme","Aftsi t forta pune n ekip dhe komunikimi","Qndrim i respektueshm dhe gjithprfshirs","Qndrim tolerant dhe me mendje t hapur","Dshir pr t br qytetar aktiv global"]},eligibleCountries:{title:"Vende Pjesmarrse",regions:{worldwide:"Vende nga e gjith bota jan t pranueshme pr t marr pjes n programin AFS Global You Adventurer."}}},applicationInfo:{title:"Informacion pr Aplikimin",timeline:{title:"Kalendari i Aplikimit",items:["Sesione t shumta gjat vitit","Kontrollo faqen e internetit t AFS pr datat specifike","Aplikimi Hapet: Disa jav para seancs","Kohzgjatja e Programit: 5 jav (virtual)"]},requirements:{title:"Krkesat pr Aplikim",items:["Plotso aplikimin online n faqen e internetit t AFS","Deklarat personale duke shprehur interesin","Akses n pajisje me kamer dhe internet","Angazhim pr pjesmarrje aktive n t gjitha sesionet","Plqim prindror (pr student nn 18 vje)"]},selectionProcess:{title:"Procesi i Przgjedhjes",items:["Shqyrtim i aplikimit nga ekipi i AFS","Vlersim bazuar n interesin dhe angazhimin","Konfirmim i pranimeve","Sesion orientimi para fillimit t programit"]}},badgeText:{open:"E Hapur pr Aplikime",upcoming:"Sesionet e Ardhshme Disponibl",closingSoon:"Mbyllet S Shpejti"}}},lessonContent:{html:{1:{title:"far sht HTML? - Faqja Juaj e Par Web",description:"Mir se vini n botn emocionuese t zhvillimit t uebit! HTML sht themeli i do faqeje interneti. Le t zbulojm far e bn uebin t funksionoj dhe t krijojm faqen tuaj t par! ",sections:[{title:"far sht HTML?",content:"HTML do t thot HyperText Markup Language. Mendojeni si skeleti i nj faqeje interneti:\\n\\n **HyperText**: Tekst me lidhje me tekst tjetr\\n **Markup**: Kode t veanta q prshkruajn prmbajtjen\\n **Language**: Nj sistem q kompjutert kuptojn\\n\\nHTML i tregon shfletuesve se far sht do pjes e prmbajtjes - nse sht nj titull, paragraf, imazh ose lidhje. sht si plani i nj shtpie!"},{title:"Si Funksionojn Faqet e Internetit",content:"Kur vizitoni nj faqe interneti:\\n1. Shfletuesi juaj krkon faqen nga nj server\\n2. Serveri drgon kodin HTML\\n3. Shfletuesi lexon HTML-n dhe e shfaq at\\n4. Ju shihni faqen e bukur!\\n\\nHTML sht kudo - do faqe e internetit e prdor, nga blogje t thjeshta tek aplikacione komplekse si Facebook dhe Google."},{title:"Etiketat HTML - Blloqet Ndrtuese",content:"HTML prdor 'etiketa' pr t shnuar prmbajtjen:\\n\\n Etiketat jan t rrethuar me kllapa kndore: `<tag>`\\n Shumica e etiketave vijn n ifte: `<tag>prmbajtje</tag>`\\n Etiketa hapse fillon elementin\\n Etiketa mbyllse e prfundon at (ka nj pjerrake)\\n\\nShembull: `<h1>Ky sht nj titull</h1>`"},{title:"Provoje Vet!",content:"N lodr, provo:\\n1. Ndryshoni 'Hello, World!' me mesazhin tuaj\\n2. Shtoni nj paragraf tjetr me `<p>Teksti juaj ktu</p>`\\n3. Bni disa tekste t trasha me `<strong>tekst i trash</strong>`\\n4. Shikoni si ndryshimet shfaqen menjher!\\n\\nUrime - tani po shkruani HTML! "}]},2:{title:"Struktura e Dokumentit HTML & DOCTYPE",description:"do dokument HTML ndjek nj struktur specifike - si nj recet me prbrs thelbsor! Msoni anatomin e nj faqeje dhe pse struktura e sakt sht e rndsishme. ",sections:[{title:"Deklarimi DOCTYPE",content:"`<!DOCTYPE html>` i tregon shfletuesit se ky sht nj dokument HTML5.\\n\\n**Pse sht e rndsishme:**\\n Siguron q faqja juaj t shfaqet sakt\\n Parandalon problemet e renderimit n 'quirks mode'\\n Duhet t jet rreshti i par\\n Shkronjat e vogla jan standarde\\n\\nMendojeni DOCTYPE si shfaqjen e karts tuaj t identitetit te shfletuesi - identifikon llojin e dokumentit q keni!"},{title:"Elementi HTML",content:"Elementi `<html>` mbshtjell gjithka tjetr:\\n\\n```html\\n<html lang=\"sq\">\\n  <!-- Gjithka shkon ktu -->\\n</html>\\n```\\n\\n**Atributi lang:**\\n U tregon lexuesve t ekranit far gjuhe t prdorin\\n Ndihmon motort e krkimit t kuptojn prmbajtjen tuaj\\n Prdorni 'sq' pr shqip, 'en' pr anglisht, etj.\\n I rndsishm pr akses!"},{title:"Head vs Body - Dy Seksione t Rndsishme",content:"do dokument HTML ka dy pjes kryesore:\\n\\n**`<head>` (i padukshm pr prdoruesit):**\\n Titulli i faqes (shfaqet n tab t shfletuesit)\\n Informacioni meta\\n Lidhjet me skedart CSS dhe JavaScript\\n Informacioni pr motort e krkimit\\n\\n**`<body>` (i dukshm pr prdoruesit):**\\n Tr prmbajtja q njerzit shohin\\n Tekst, imazhe, lidhje, video\\n Gjithka q prbn faqen tuaj"},{title:"Etiketat Meta Thelbsore",content:'Etiketat meta japin informacion t rndsishm:\\n\\n `<meta charset="UTF-8">` - Trajton t gjitha karakteret e tekstit\\n `<meta name="viewport"...>` - E bn faqen tuaj miqsore pr celular\\n `<title>` - Titulli i faqes n tab dhe rezultatet e krkimit\\n\\nKto mund t duken t padukshme, por jan thelbsore pr nj faqe profesionale!'},{title:"Praktik pr Strukturn e Dokumentit! ",content:"N lodr, eksperimentoni me:\\n1. Ndryshoni titullin e faqes dhe shikojeni t prditsohet n tab t shfletuesit\\n2. Shtoni m shum prmbajtje brenda `<body>`\\n3. Provoni kode t ndryshme gjuhsh n atributin lang\\n4. Vini re se si shfletuesi kupton kt struktur\\n\\nStruktura e sakt sht themeli i do faqeje t shklqyer!"}]},3:{title:"Titujt dhe Formatimi i Tekstit",description:"Msoni t organizoni prmbajtjen me tituj dhe t bni tekstin shprehs me formatim! Titujt krijojn struktur, ndrsa formatimi shton theks dhe kuptim fjalve tuaja. ",sections:[{title:"Gjasht Nivelet e Titujve",content:"HTML ka gjasht nivele titujsh, nga h1 (m i madhi) tek h6 (m i vogli):\\n\\n **h1**: Titulli kryesor i faqes (prdorni vetm nj pr faqe!)\\n **h2**: Titujt e seksioneve kryesore\\n **h3**: Titujt e nn-seksioneve\\n **h4, h5, h6**: Nndarje m t vogla\\n\\nMendoni titujt si skemn e nj libri: Kapitulli (h1), Seksioni (h2), Nn-seksioni (h3), etj."},{title:"Krijimi i Hierarkis Vizuale",content:"Titujt krijojn nj 'hierarki vizuale' q udhzon lexuesit:\\n\\n Tituj m t mdhenj = prmbajtje m e rndsishme\\n Tituj m t vegjl = detaje mbshtetse\\n Renditja e duhur e titujve ndihmon me aksesueshmrin\\n Lexuesit e ekranit prdorin titujt pr t lundruar\\n\\nMos zgjidhni kurr tituj vetm pr madhsin - zgjidhni pr rndsin!"},{title:"Elementet e Formatimit t Tekstit",content:"Bni tekstin tuaj m shprehs:\\n\\n **`<strong>`**: Tekst i rndsishm, serioz (zakonisht i trash)\\n **`<em>`**: Tekst i theksuar (zakonisht pjerrt)\\n **`<mark>`**: Tekst i theksuar (si marker i verdh)\\n **`<small>`**: Shkrim i vogl ose tekst m pak i rndsishm\\n\\nKto etiketa kan kuptim, jo vetm pamje - lexuesit e ekranit kuptojn ndryshimin!"},{title:"Praktika m t Mira pr Titujt",content:"Ndiqni kto rregulla pr tituj t shklqyer:\\n\\n Vetm nj h1 pr faqe (titulli juaj kryesor)\\n Mos kaprceni nivelet (h1  h2  h3, jo h1  h4)\\n Mbajini titujt t shkurtr dhe prshkrues\\n Prdorini pr struktur, jo pr stilizim\\n Bjini me kuptim - 'Produktet' jo 'Tekst i Madh'\\n\\nTitujt e mir e bjn prmbajtjen tuaj t leht pr t'u skanuar dhe t aksesueshme!"},{title:"Sfid Praktike e Formatimit! ",content:"N lodr, provoni:\\n1. Krijoni nj hierarki titujsh pr nj postim blogu rreth hobit tuaj\\n2. Prdorni etiketat strong dhe em pr t theksuar pika kye\\n3. Provoni t kombinoni formatimin e trash dhe pjerrt\\n4. Krijoni nj skem t thjesht artikulli duke prdorur nivele t ndryshme titujsh\\n\\nMbani mend: titujt organizojn prmbajtjen, formatimi shton theks!"}]},4:{title:"Paragraft, Thyerjet e Rreshtave dhe Struktura e Tekstit",description:"Zotroni elementet themelore t tekstit! Msoni t krijoni paragraf, t shtoni thyerje rreshtash dhe t strukturoni prmbajtjen tuaj n mnyr profesionale. ",sections:[{title:"Paragrafi - Njsia Bazike e Prmbajtjes",content:"Elementit `<p>` prmban paragraf t tekstit:\\n\\n```html\\n<p>Ky sht nj paragraf.</p>\\n<p>Ky sht nj paragraf tjetr.</p>\\n```\\n\\n**Karakteristikat:**\\n Shfletuesi shton automatikisht hapsir para dhe pas\\n do paragraf fillon n rresht t ri\\n Hapsirat dhe rreshtat e shumt bashkohen n nj\\n Elementi bllok m i prdorur"},{title:"Thyerjet e Rreshtave dhe Rreshta Horizontal",content:"Kontrolloni thyerjet e rreshtave dhe ndarsit:\\n\\n**Thyerje rreshti `<br>`:**\\n```html\\n<p>Rreshti i par<br>Rreshti i dyt</p>\\n```\\n Krijon nj thyerje rreshti\\n Etikta vet-mbyllse (pa tag mbylls)\\n Prdorni me kujdes - paragrafi m mir n shumicn e rasteve\\n\\n**Rrjesht horizontal `<hr>`:**\\n```html\\n<hr>\\n```\\n Krijon nj vij ndarse horizontal\\n Tregon nj thyerje tematike\\n Vet-mbyllse"},{title:"Kuptimi i Hapsirave t Bardha",content:"HTML trajton hapsirat n mnyr t veant:\\n\\n**Kolapsi i hapsirave:**\\n Hapsira t shumfishta  Nj hapsir\\n Rreshta t shumt  Nj hapsir\\n Tabulacione dhe hapsira t reja  Nj hapsir\\n\\n**Pr t ruajtur formatimin:**\\n```html\\n<pre>\\n  Tekst me formatim t ruajtur\\n  Hapsirat    dhe rreshtat\\n  ruhen!\\n</pre>\\n```\\n\\nElementi `<pre>` ruan t gjitha hapsirat dhe thyerjet e rreshtave!"},{title:"Sfida e Strukturimit t Tekstit! ",content:"N lodr:\\n1. Krijoni disa paragraf pr nj histori t shkurtr\\n2. Prdorni `<br>` pr adresn tuaj (nj rresht pr do pjes)\\n3. Shtoni `<hr>` pr t ndar seksione\\n4. Eksperimentoni me `<pre>` pr art ASCII ose poezi\\n\\nStrukturat e tekstit bjn prmbajtjen e lexueshme!"}]},5:{title:"Listat - Lista t Renditura dhe t Parenditura",description:"Organizoni informacionin me lista! Msoni t krijoni lista me pika, lista me numra dhe lista t ndrthurura pr strukturim t prsosur t prmbajtjes. ",sections:[{title:"Lista t Parenditura (Pika)",content:"Krijoni lista me pika me `<ul>` dhe `<li>`:\\n\\n```html\\n<ul>\\n  <li>Artikulli i par</li>\\n  <li>Artikulli i dyt</li>\\n  <li>Artikulli i tret</li>\\n</ul>\\n```\\n\\n**Kur t prdorni:**\\n Kur renditja nuk ka rndsi\\n Lista t artikujve\\n Veori produkti\\n Menu lundrim\\n\\nShfletuesi shton automatikisht pika!"},{title:"Lista t Renditura (Numra)",content:"Krijoni lista me numra me `<ol>` dhe `<li>`:\\n\\n```html\\n<ol>\\n  <li>Hapi i par</li>\\n  <li>Hapi i dyt</li>\\n  <li>Hapi i tret</li>\\n</ol>\\n```\\n\\n**Kur t prdorni:**\\n Udhzime hap-pas-hapi\\n Renditje\\n Kur renditja sht e rndsishme\\n Receta\\n\\nNumrat shtohen automatikisht me radh!"},{title:"Lista t Ndrthurura dhe t Avancuara",content:'Lista mund t prmbajn lista t tjera:\\n\\n```html\\n<ul>\\n  <li>Pika kryesore\\n    <ul>\\n      <li>Nn-pik 1</li>\\n      <li>Nn-pik 2</li>\\n    </ul>\\n  </li>\\n  <li>Pika tjetr kryesore</li>\\n</ul>\\n```\\n\\n**Atribute t dobishme:**\\n `type="A"` - Shkronja t mdha (A, B, C)\\n `start="5"` - Fillo nga numri 5\\n `reversed` - Numrtim mbrapsht'},{title:"Praktik me Lista! ",content:"Krijoni n lodr:\\n1. Nj list ushqimore me pika\\n2. Nj recet gatimi me udhzime t numruara\\n3. Lista t ndrthurura pr skemn e nj kursi\\n4. Nj list t kthyer mbrapsht me countdown\\n\\nListat jan thelbsore pr organizimin e prmbajtjes!"}]},6:{title:"Lidhjet - Navigimi n Internet",description:"Lidhjet jan ajo q e bn internetin 'internet'! Msoni t krijoni lidhje, t hapni faqe t reja dhe t lundroni brenda faqes tuaj. ",sections:[{title:"Krijoni Lidhjen e Par",content:'Elementi `<a>` krijon lidhje:\\n\\n```html\\n<a href="https://www.example.com">Klikoni ktu</a>\\n```\\n\\n**Pjest e nj lidhjeje:**\\n `<a>` - Etiketa e lidhjes (anchor)\\n `href` - Destinacioni (ku shkon)\\n Teksti i lidhjes - far shohin prdoruesit\\n\\n**Shembuj:**\\n Faqe e plot: `href="https://google.com"`\\n Faqe relative: `href="about.html"`\\n Email: `href="mailto:info@example.com"`'},{title:"Lidhje t Brendshme - Navigim n Faqe",content:'Lidhuni me seksione n t njjtn faqe:\\n\\n**Hapi 1 - Vendosni nj anchor:**\\n```html\\n<h2 id="contact">Kontakti</h2>\\n```\\n\\n**Hapi 2 - Lidhuni me t:**\\n```html\\n<a href="#contact">Shko tek Kontakti</a>\\n```\\n\\n**Prdorime:**\\n Tabela e prmbajtjes\\n \'Kthehu lart\' lidhje\\n Lundrim n faqe t gjata\\n Navigim n seksion'},{title:"Target dhe Opsione t Lidhjes",content:'Kontrolloni sjelljen e lidhjes:\\n\\n**Hapni n tab t ri:**\\n```html\\n<a href="https://example.com" target="_blank">Hapni n tab t ri</a>\\n```\\n\\n**Atribute t tjera:**\\n `title="Tip text"` - Shfaq kshill n hover\\n `download` - Skedari shkarkohet n vend t hapjes\\n `rel="noopener"` - Siguri pr lidhje t jashtme\\n\\n**Praktika m e mir:**\\nPr lidhje t jashtme q hapen n tab t ri:\\n```html\\n<a href="url" target="_blank" rel="noopener noreferrer">\\n```'},{title:"Laboratori i Lidhjeve! ",content:"N lodr, krijoni:\\n1. Lidhje pr faqet tuaja t preferuara\\n2. Nj menu lundrim me lidhje t brendshme\\n3. Nj lidhje email me mailto:\\n4. Nj lidhje shkarkimi pr skedar\\n\\n**Kshill**: Bni tekstin e lidhjes prshkrues - 'Lexo m shum' jo 'Klikoni ktu'!"}]},7:{title:"Imazhet - Shtimi i Vizualeve n Faqen Tuaj",description:"Imazhet e bjn faqet m trheqse dhe t paharrueshme! Msoni t shtoni, optimizoni dhe t bni imazhet tuaja t aksesueshme pr t gjith. ",sections:[{title:"Etiketa e Imazhit",content:'Etiketa `<img>` shton imazhe n faqen tuaj:\\n\\n**Sintaks bazike:**\\n```html\\n<img src="imazh.jpg" alt="Prshkrim">\\n```\\n\\n**Pika kye:**\\n Etikt vet-mbyllse (nuk ka nevoj pr tag mbylls)\\n `src` = burimi (ku sht skedari i imazhit)\\n `alt` = tekst alternativ (thelbsor pr aksesueshmri)\\n Imazhet jan elemente inline si parazgjedhje'},{title:"Burimet dhe Formatet e Imazhit",content:"Nga t merrni imazhet dhe far formatesh t prdorni:\\n\\n**Burime imazhi:**\\n Fotografit/grafikat tuaja\\n Faqe fotosh falas (Unsplash, Pexels)\\n URL imazhesh online\\n Skedar lokal n projektin tuaj\\n\\n**Formatet m t mira:**\\n **JPEG**: Foto, imazhe komplekse\\n **PNG**: Grafika, logo, transparenc\\n **WebP**: Format modern, skedar m t vegjl\\n **SVG**: Grafika vektoriale, ikona"},{title:"Teksti Alt - Imazhet e Aksesueshme",content:'Teksti alt sht thelbsor pr aksesueshmri dhe SEO:\\n\\n**Tekst alt i mir:**\\n Prshkruan se far ka n imazh\\n I shkurtr por prshkrues\\n Jep kontekst nse nevojitet\\n\\n**Shembuj:**\\n `alt="Makin sportive e kuqe e parkuar n rrugn e qytetit"`\\n `alt="Grafik q tregon rritje 25% n shitje"`\\n `alt=""` (bosh pr imazhe dekorative)\\n\\n**Lexuesit e ekranit** prdorin tekst alt pr t prshkruar imazhet pr prdorues me shikim t dmtuar!'},{title:"Madhsia e Imazhit dhe Imazhe Responsive",content:'Kontrolloni madhsin e imazhit dhe bjini ata miqsor pr celular:\\n\\n**Atribute madhsie:**\\n```html\\n<img src="foto.jpg" alt="Prshkrim" \\n     width="400" height="300">\\n```\\n\\n**CSS pr imazhe responsive:**\\n```css\\nimg { max-width: 100%; height: auto; }\\n```\\n\\n**Optimizimi i ngarkimit:**\\n`loading="lazy"` pr imazhe posht folds'},{title:"Teknika t Avancuara Imazhi",content:'Shptojini imazhet tuaj m larg:\\n\\n**Figure dhe figcaption:**\\n```html\\n<figure>\\n  <img src="grafik.jpg" alt="T dhnat e shitjeve">\\n  <figcaption>Shitjet Q4 u rritn 40%</figcaption>\\n</figure>\\n```\\n\\n**Imazhe t klikueshme:**\\n```html\\n<a href="imazh-me-i-madh.jpg">\\n  <img src="thumbnail.jpg" alt="Kliko pr zmadhim">\\n</a>\\n```\\n\\nFigurat grupojn imazhet me titujt e tyre n mnyr semantike!'},{title:"Sfida Praktike e Imazheve! ",content:"N lodr, provoni:\\n1. Zvendsoni imazhet me URL nga Unsplash (krko tema q t plqejn)\\n2. Shkruani tekst alt t detajuar dhe t dobishm pr do imazh\\n3. Shtoni tituj duke prdorur `<figure>` dhe `<figcaption>`\\n4. Provoni madhsi t ndryshme imazhi dhe shikoni si prshtaten\\n5. Krijoni nj grid ose galeri imazhesh\\n6. Shtoni atribute `title` pr kshilla hover\\n\\nImazhet e mira i bjn faqet e paharrueshme dhe trheqse!"}]},8:{title:"Tabelat - Organizimi i t Dhnave",description:"Tabelat jan t prsosura pr shfaqjen e t dhnave q kan marrdhnie - si flet-llogaritje, orare dhe krahasime. Msoni t krijoni tabela t organizuara dhe t aksesueshme! ",sections:[{title:"Struktura e Tabels",content:"Tabelat HTML prdorin disa elemente q punojn bashk:\\n\\n **`<table>`**: Kontejneri pr gjithka\\n **`<tr>`**: Rreshti i tabels (horizontal)\\n **`<th>`**: Titulli i tabels (titujt e kolonave)\\n **`<td>`**: T dhnat e tabels (qelizat e rregullta)\\n **`<thead>`**: Grupjon rreshtat e titujve\\n **`<tbody>`**: Grupjon rreshtat e trupit\\n\\nMendojeni si ndrtim shtpie: tabela sht themeli, rreshtat jan katet, qelizat jan dhomat!"},{title:"Krijimi i Tabels s Par",content:"Struktura bazike e tabels:\\n\\n```html\\n<table>\\n  <tr>\\n    <th>Emri</th>\\n    <th>Mosha</th>\\n    <th>Qyteti</th>\\n  </tr>\\n  <tr>\\n    <td>Ledia</td>\\n    <td>25</td>\\n    <td>Tiran</td>\\n  </tr>\\n</table>\\n```\\n\\n**Pika kye:**\\n Rreshti i par zakonisht prmban tituj (`<th>`)\\n do rresht duhet t ket t njjtin numr qelizash\\n Titujt ndihmojn lexuesit e ekranit t kuptojn strukturn e tabels"},{title:"Tabelat e Aksesueshme",content:"Tabelat kan nevoj pr struktur t sakt pr aksesueshmri:\\n\\n**Prdorni elemente semantike:**\\n```html\\n<table>\\n  <thead>\\n    <tr><th>Titulli 1</th><th>Titulli 2</th></tr>\\n  </thead>\\n  <tbody>\\n    <tr><td>T dhna 1</td><td>T dhna 2</td></tr>\\n  </tbody>\\n</table>\\n```\\n\\n**Shtoni tituj:**\\n```html\\n<table>\\n  <caption>Raporti Mujor i Shitjeve</caption>\\n  <!-- prmbajtja e tabels -->\\n</table>\\n```\\n\\nKjo ndihmon shfletuesit dhe teknologjin ndihmse t kuptojn tabeln tuaj!"},{title:"Kur t Prdorni Tabela",content:"Tabelat jan pr t dhna tabelore, jo pr paraqitje:\\n\\n**Prdorime t mira:**\\n T dhna si flet-llogaritje\\n Krahasime (veori, mime)\\n Orare dhe kalendar\\n Raporte financiare\\n T dhna shkencore\\n\\n**Mos prdorni tabela pr:**\\n Paraqitjen e faqes (prdorni CSS Grid/Flexbox)\\n Pozicionimin e elementeve\\n Krijimin e kolonave teksti\\n\\nTabelat jan pr t dhna q kan kuptim n rreshta dhe kolona!"},{title:"Puntori Praktik i Tabelave! ",content:"N lodr, provoni:\\n1. Shtoni m shum student n raportin e notave\\n2. Krijoni nj tabel q krahason telefona t ndryshm\\n3. Ndrtoni nj tabel orari javor\\n4. Shtoni nj titull q prshkruan se far tregon tabela\\n5. Eksperimentoni me lloje t ndryshme t dhnash\\n\\nTabelat jan mjete t fuqishme pr organizimin e qart t informacionit kompleks!"}]},9:{title:"Formulart - Mbledhja e Hyrjes s Prdoruesit",description:"Formulart jan mnyra se si faqet flasin me prdoruesit! Nga formulart e kontaktit tek anketat, formulart i bjn faqet interaktive. Le t zotrojm formulart miqsor! ",sections:[{title:"Bazat e Formularit",content:'Formulart mbledhin t dhnat e prdoruesit dhe i drgojn diku:\\n\\n**Struktura bazike:**\\n```html\\n<form action="ku-te-dergohet" method="post">\\n  <input type="text" name="username">\\n  <button type="submit">Drgo</button>\\n</form>\\n```\\n\\n**Atribute kye:**\\n **action**: Ku t drgohen t dhnat e formularit\\n **method**: Si t drgohen t dhnat ("get" ose "post")\\n **name**: Identifikon do hyrje kur formulari drgohet'},{title:"Llojet e Hyrjes",content:'Lloje t ndryshme hyrjesh pr t dhna t ndryshme:\\n\\n**Hyrje teksti:**\\n `type="text"` - Tekst i rregullt\\n `type="email"` - Adresa email\\n `type="password"` - Tekst i fshehur\\n `type="tel"` - Numra telefoni\\n\\n**Hyrje t tjera:**\\n `type="number"` - Vetm numra\\n `type="date"` - Zgjedhs date\\n `type="checkbox"` - Kutit e kontrollit\\n `type="radio"` - Butonat radio\\n\\nZgjidhni llojin e duhur t hyrjes pr prvoj m t mir prdoruesi!'},{title:"Etiketat dhe Aksesueshmria",content:'Gjithmon prdorni etiketa me hyrjet e formularit:\\n\\n**Etiketim i sakt:**\\n```html\\n<label for="email">Adresa Email</label>\\n<input type="email" id="email" name="email">\\n```\\n\\n**Pse etiketat jan t rndsishme:**\\n Lexuesit e ekranit mund t shpalln pr far sht do fush\\n Klikimi i etiketave fokuson hyrjen (UX m e mir)\\n E nevojshme pr aksesueshmrin e uebit\\n I bn formulart m t leht pr t\'u prdorur n celular\\n\\nAtributi `for` duhet t prputhet me `id` e hyrjes!'},{title:"Validimi i Formularit",content:'HTML5 ofron validim t integruar:\\n\\n**Fusha t krkuara:**\\n```html\\n<input type="email" name="email" required>\\n```\\n\\n**Kufizime hyrjeje:**\\n `maxlength` pr gjatsin e tekstit\\n `min` dhe `max` pr numra\\n `pattern` pr validim t personalizuar\\n `placeholder` pr kshilla\\n\\n**Prfitimet e shfletuesit:**\\n Shfaq mesazhe gabimi automatikisht\\n Parandalon drgimin e t dhnave t pavlefshme\\n Prvoj m e mir prdoruesi'},{title:"Puntori Praktik i Formularve! ",content:'N lodr, eksperimentoni me:\\n1. Shtoni informacionin tuaj personal pr t testuar formularin\\n2. Provoni t drgoni me fusha t krkuara bosh\\n3. Shtoni nj fush t re me `type="date"` pr datlindjen\\n4. Krijoni butona radio pr zgjedhjen e preferencave\\n5. Shtoni m shum opsione n menun dropdown\\n6. Testoni lloje t ndryshme hyrjesh\\n\\nFormulart jan ura ndrmjet prdoruesve dhe faqes suaj!'}]},10:{title:"Elementet Semantike HTML5",description:"HTML5 prezantoi elemente semantike t mahnitshme q i japin kuptim prmbajtjes tuaj! Kto elemente i bjn faqet m t aksesueshme, miqsore pr SEO dhe m t lehta pr t'u kuptuar. ",sections:[{title:"far Jan Elementet Semantike?",content:'Elementet semantike prshkruajn qart kuptimin e tyre:\\n\\n**Para HTML5:** `<div class="header">`\\n**HTML5 Semantic:** `<header>`\\n\\n**Prfitimet:**\\n Aksesueshmri m e mir pr lexuesit e ekranit\\n SEO i prmirsuar (motort e krkimit kuptojn strukturn)\\n Kod m i lexueshm pr zhvilluesit\\n Struktur e qndrueshme e faqes n t gjith uebin\\n\\nElementet semantike tregojn historin e prmbajtjes suaj!'},{title:"Elementet Thelbsore Semantike",content:"Elementet semantike kryesore t HTML5:\\n\\n **`<header>`**: Titulli i faqes ose seksionit\\n **`<nav>`**: Lidhjet e lundrim\\n **`<main>`**: Zona kryesore e prmbajtjes (nj pr faqe)\\n **`<article>`**: Prmbajtje e pavarur (postime blogu)\\n **`<section>`**: Grupim tematik i prmbajtjes\\n **`<aside>`**: Prmbajtje e lidhur (sidebar)\\n **`<footer>`**: Kmbza e faqes ose seksionit\\n **`<figure>`**: Imazhe me tituj\\n **`<time>`**: Data dhe ort"},{title:"Ndrtimi i Strukturs s Faqes",content:"Paraqitje tipike semantike e faqes:\\n\\n```html\\n<header>\\n  <h1>Titulli i Faqes</h1>\\n  <nav><!-- Lundrimi --></nav>\\n</header>\\n\\n<main>\\n  <article>\\n    <section><!-- Prmbajtja --></section>\\n  </article>\\n  <aside><!-- Sidebar --></aside>\\n</main>\\n\\n<footer>\\n  <p>&copy; 2024 Faqja Juaj</p>\\n</footer>\\n```\\n\\nKjo krijon nj struktur t qart, logjike!"},{title:"Elementet Semantike vs Generike",content:'Kur t prdorni elemente semantike vs `<div>`:\\n\\n**Prdorni elemente semantike kur:**\\n Prmbajtja ka kuptim specifik\\n Dshironi aksesueshmri m t mir\\n Struktura sht e rndsishme\\n\\n**Prdorni `<div>` kur:**\\n Ju nevojitet nj kontejner vetm pr stilizim\\n Nuk ekziston kuptim semantik\\n Grupimi i elementeve pr paraqitje\\n\\n**Shembull:**\\n  `<article>` pr postime blogu\\n  `<div class="card">` pr kontejner stilizimi'},{title:"Praktik HTML Semantic! ",content:"N lodr, eksploroni:\\n1. Ndryshoni prmbajtjen e artikullit me postimin tuaj t blogu\\n2. Shtoni m shum seksione n artikull\\n3. Prditsoni aside me lidhjet tuaja\\n4. Provoni t shtoni nj `<figure>` me imazh\\n5. Prdorni elemente `<time>` pr data t ndryshme\\n\\nHTML semantic e bn uebin m t mir pr t gjith!"}]},11:{title:"Elementet e Avancuara t Tekstit dhe Formatimi",description:"ojeni formatimin e tekstit n nivel tjetr! Msoni elemente t specializuara pr kod, kuotacione, shkurtesa dhe m shum. Kto elemente shtojn kuptim semantik dhe lustr profesional. ",sections:[{title:"Kodi dhe Teksti Teknik",content:"Elemente t veanta pr prmbajtje teknike:\\n\\n **`<code>`**: Fragmente kodi inline\\n **`<pre>`**: Tekst i paraformatuar (ruan hapsirat)\\n **`<kbd>`**: Hyrje tastiere\\n **`<samp>`**: Dalje kompjuteri mostr\\n **`<var>`**: Variablat n programim\\n\\nKto elemente ndihmojn t dallohet prmbajtja teknike nga teksti i rregullt dhe shpesh shfaqen n fonte monospace."},{title:"Kuotacionet dhe Citatet",content:"Elemente t sakta pr kuotat:\\n\\n**`<blockquote>`**: Kuota t gjata (nivel blloku)\\n```html\\n<blockquote>\\n  <p>Teksti i kuots ktu</p>\\n  <cite> Emri i Autorit</cite>\\n</blockquote>\\n```\\n\\n**`<q>`**: Kuota t shkurtra inline\\n**`<cite>`**: Citime t veprave, autorve\\n\\nPrdorini kto pr kuptim semantik t sakt dhe aksesueshmri!"},{title:"Subscript dhe Superscript",content:"Pr notacion matematik dhe shkencor:\\n\\n **`<sub>`**: Subscript (HO)\\n **`<sup>`**: Superscript (E=mc)\\n\\n**T prsosura pr:**\\n Formula kimike\\n Shprehje matematikore\\n Referenca fusnotash\\n Numra rendor (1, 2, 3)"},{title:"Shkurtesat dhe Prkufizimet",content:'Ndihmoni prdoruesit t kuptojn terminologjin:\\n\\n**`<abbr>`**: Shkurtesa me shpjegime\\n```html\\n<abbr title="HyperText Markup Language">HTML</abbr>\\n```\\n\\n**`<dfn>`**: Instanca prkufizuese e nj termi\\n**`<mark>`**: Tekst i theksuar\\n\\nKto elemente prmirsojn aksesueshmrin dhe kuptimin e prdoruesit!'},{title:"Praktik Formatim i Avancuar! ",content:"N lodr, provoni:\\n1. Krijoni nj artikull shkencor me formula kimike\\n2. Shtoni shembuj kodi duke prdorur elemente kodi t sakta\\n3. Prfshini nj blockquote me kuptim me citat\\n4. Prdorni shkurtesa me atribute title t dobishme\\n5. Theksoni terma t rndsishm me mark\\n\\nKto elemente e bjn prmbajtjen tuaj m profesionale dhe t aksesueshme!"}]},12:{title:"Aksesueshmria - Faqe pr t Gjith",description:"Aksesueshmria siguron q t gjith mund t prdorin faqen tuaj! Msoni t krijoni prvoj web gjithprfshirse q funksionon pr t gjith prdoruesit, prfshir ata me aftsi t kufizuara. Nuk sht vetm gjja e duhur - krijon faqe m t mira! ",sections:[{title:"Pse Aksesueshmria Ka Rndsi",content:"Aksesueshmria e uebit i prfiton t gjith:\\n\\n**Kush prfiton:**\\n Njerz me aftsi t kufizuara (shikim, dgjim, motor, njohs)\\n Prdorues me kufizime t prkohshme (krah i thyer, diell i ndritshm)\\n T gjith q prdorin pajisje t ndryshme ose internet t ngadalt\\n\\n**Prfitime biznesi:**\\n Prputhshmri ligjore\\n Arritje m e madhe e audiencs\\n SEO m i mir\\n Prdorshmri e prmirsuar pr t gjith"},{title:"Veori Thelbsore t Aksesueshmris",content:"Praktika kye t aksesueshmris:\\n\\n**HTML Semantic:**\\n Prdorni tituj t duhur pr struktur\\n Lista pr prmbajtje t grupuar\\n Elemente semantike (nav, main, article)\\n\\n**Aksesueshmria e formularit:**\\n Etiketa me do hyrje\\n Udhzime dhe mesazhe gabimi t qarta\\n Renditje logjike tab\\n\\n**Imazhet:**\\n Tekst alt me kuptim\\n Alt='' bosh pr imazhe dekorative"},{title:"Atributet ARIA",content:'ARIA ofron informacion shtes aksesueshmrie:\\n\\n**Atribute t zakonshme ARIA:**\\n `aria-label`: Emr i aksesueshm\\n `aria-describedby`: Prshkrim shtes\\n `aria-labelledby`: Referon elementin etiketues\\n `role`: Prkufizon qllimin e elementit\\n\\n**Shembull:**\\n```html\\n<button aria-label="Mbyll dialogun"></button>\\n<nav aria-label="Lundrimi kryesor">...\\n```'},{title:"Lundrim me Tastier",content:"Siguroni q lundrimi vetm me tastier funksionon:\\n\\n**Veori thelbsore:**\\n T gjitha elementet interaktive t fokusueshme\\n Tregues fokusi t dukshm\\n Renditje logjike tab\\n Lidhje kaprcimi pr prmbajtje kryesore\\n\\n**Testimi:**\\n Tab npr tr faqen tuaj\\n Prdorni Enter/Space pr t aktivizuar elementet\\n Sigurohuni q mund t arrini gjithka"},{title:"Testim Aksesueshmrie! ",content:"N lodr, testoni:\\n1. Lundroni duke prdorur vetm tastin Tab\\n2. Vini re etiketat e sakta t formularit\\n3. Shikoni si aria-describedby ofron kontekst\\n4. Kontrolloni tekst alt me kuptim\\n5. Prdorni mjetet e zhvillimit t shfletuesit pr t inspektuar aksesueshmrin\\n\\nFaqet e aksesueshme jan faqe m t mira pr t gjith!"}]},13:{title:"Meta Tags - Informacion Rreth Faqes Tuaj",description:"Meta tags jan si kart biznesi e faqes suaj! Ato u tregojn motorve t krkimit dhe mediave sociale se pr far bhet fjal faqja juaj. Zotroni meta tags pr faqe profesionale dhe t zbulueshme! ",sections:[{title:"Meta Tags Thelbsore",content:'do faqe web ka nevoj pr kto meta tags:\\n\\n**Kodimi i karaktereve:**\\n`<meta charset="UTF-8">`\\n Duhet t jet i pari n seksionin head\\n Mbshtet t gjitha gjuht dhe emoji\\n\\n**Viewport (miqsor pr celular):**\\n`<meta name="viewport" content="width=device-width, initial-scale=1.0">`\\n I bn faqet t funksionojn n pajisje mobile\\n Thelbsor pr dizajn responsive'},{title:"Meta Tags pr SEO",content:'Ndihmoni motort e krkimit t kuptojn prmbajtjen tuaj:\\n\\n**Prshkrimi i faqes:**\\n`<meta name="description" content="Prshkrimi i faqes">`\\n Shfaqet n rezultatet e krkimit\\n 150-160 karaktere ideale\\n Kopje trheqse q inkurajon klikime\\n\\n**Titulli i faqes:**\\n`<title>Titulli i Faqes - Emri i Faqes</title>`\\n Shfaqet n tab t shfletuesit\\n Elementi m i rndsishm SEO'},{title:"Meta Tags pr Media Sociale",content:'Kontrolloni si duken lidhjet kur ndahen:\\n\\n**Open Graph (Facebook, LinkedIn):**\\n```html\\n<meta property="og:title" content="Titulli i Faqes">\\n<meta property="og:description" content="Prshkrim">\\n<meta property="og:image" content="url-imazhi">\\n```\\n\\n**Twitter Cards:**\\n```html\\n<meta name="twitter:card" content="summary_large_image">\\n<meta name="twitter:title" content="Titulli i Faqes">\\n```'},{title:"Meta Tags Shtes",content:'Prmirsoni prvojn e prdoruesit:\\n\\n**Ngjyra e tems:**\\n`<meta name="theme-color" content="#007bff">`\\n Ngjyros ndrfaqen e shfletuesit n celular\\n\\n**Autori dhe robott:**\\n`<meta name="author" content="Emri Juaj">`\\n`<meta name="robots" content="index, follow">`\\n\\nKto prmirsojn profesionalizmin dhe funksionalitetin!'},{title:"Praktik Meta Tags! ",content:"N lodr:\\n1. Ndryshoni titullin dhe shikojeni n tab t shfletuesit\\n2. Prditsoni prshkrimin pr faqen tuaj\\n3. Shtoni emrin tuaj si autor\\n4. Eksperimentoni me theme-color\\n5. Prditsoni tags Open Graph pr ndarje sociale\\n\\nMeta tags jan t padukshme por jashtzakonisht t fuqishme!"}]},14:{title:"Audio dhe Video - Prmbajtje Multimediale",description:"Jepuni jet faqeve tuaja me multimedia! HTML5 moderna e bn t leht integrimin e audios dhe videos q funksionon n t gjitha pajisjet. ",sections:[{title:"Elementi Audio HTML5",content:'Elementi `<audio>` integron tingull:\\n\\n```html\\n<audio controls>\\n  <source src="audio.mp3" type="audio/mpeg">\\n  Shfletuesi juaj nuk mbshtet audio.\\n</audio>\\n```\\n\\n**Atribute kye:**\\n `controls` - Shfaq kontrollet luaj/ndal\\n `autoplay` - Fillon automatikisht (prdorni me kujdes!)\\n `loop` - Prsrit audion\\n `muted` - Fillon pa z'},{title:"Elementi Video HTML5",content:'Elementi `<video>` integron video:\\n\\n```html\\n<video width="320" height="240" controls>\\n  <source src="film.mp4" type="video/mp4">\\n  Shfletuesi juaj nuk mbshtet video.\\n</video>\\n```\\n\\n**Atribute kye:**\\n `width/height` - Dimensionet\\n `controls` - Shfaq kontrollet e videos\\n `poster` - Imazh para ngarkimit t videos\\n `muted` - E nevojshme pr autoplay'},{title:"Prmbajtje e Integruar",content:'Prdorni `<iframe>` pr prmbajtje t jashtme:\\n\\n**YouTube embed:**\\n```html\\n<iframe src="https://www.youtube.com/embed/VIDEO_ID" \\n        allowfullscreen>\\n</iframe>\\n```\\n\\n**Integrime t tjera:**\\n Video Vimeo\\n Google Maps\\n Postime media sociale\\n\\n**Siguria:** Integroni vetm burime t besueshme!'},{title:"Praktika m t Mira t Aksesueshmris",content:"Bni multimedian e aksesueshm:\\n\\n**Pr video:**\\n Prfshini titra/nntitra\\n Ofroni transkripte\\n Mos luani automatikisht me z\\n Prdorni tituj prshkrues\\n\\n**Pr audio:**\\n Ofroni transkripte\\n Prfshini tekst prshkrues\\n Ofroni formate alternative\\n\\nMedia e aksesueshme i shrben t gjith prdoruesve!"},{title:"Studio Praktike Multimediale! ",content:"N lodr:\\n1. Provoni kontrollet e audios dhe videos\\n2. Ndryshoni dimensionet e videos\\n3. Shtoni integrimin tuaj t videos YouTube\\n4. Eksperimentoni me atribute t ndryshme\\n5. Krijoni nj galeri t thjesht multimediale\\n\\nMultimedia i bn faqet trheqse dhe interaktive!"}]},15:{title:"Ndrtimi i nj Faqeje t Plot Web",description:"Koha pr ta bashkuar gjithka! Le t ndrtojm nj faqe t plot, profesionale duke prdorur t gjitha aftsit HTML q keni msuar. Kjo kombinon strukturn, prmbajtjen dhe praktikat m t mira! ",sections:[{title:"Planifikimi i Strukturs s Faqes",content:"Para kodimit, planifikoni strukturn tuaj:\\n\\n**Seksione thelbsore:**\\n Header me lundr  Footer me informacion\\n\\n**Struktur semantike:**\\n```html\\n<header>\\n  <nav><!-- Lundrimi --></nav>\\n</header>\\n<main>\\n  <section><!-- Prmbajtja --></section>\\n</main>\\n<footer><!-- Info faqes --></footer>\\n```"},{title:"Praktika m t Mira HTML t Aplikuara",content:"Prdorni gjithka q keni msuar:\\n\\n**Struktura e dokumentit:**\\n DOCTYPE i sakt dhe html lang\\n Head i plot me meta tags\\n Elemente semantike\\n\\n**Organizimi i prmbajtjes:**\\n Hierarki e qart titujsh\\n Tekst alt me kuptim\\n Struktur e sakt formulari\\n Lundrimi logjik"},{title:"Strategjia e Prmbajtjes",content:"Krijoni prmbajtje t fokusuar tek prdoruesi:\\n\\n**Parimet e shkrimit:**\\n Gjuh e qart, koncize\\n Struktur teksti e skanimit\\n Thirrje t forta pr veprim\\n\\n**Seksionet e prmbajtjes:**\\n Hero: Propozim i qart vlere\\n Rreth: Ndrtoni kredibilitet\\n Puna: Tregoni shembuj\\n Kontakti: Leht pr t'u arritur"},{title:"Lista Kontrolli Cilsie",content:"Para lansimit, verifikoni:\\n\\n**Teknike:**\\n HTML i vlefshm\\n Lidhje q funksionojn\\n Tekst alt i sakt\\n Funksionaliteti i formularit\\n\\n**Prvoja e prdoruesit:**\\n Miqsor pr celular\\n Ngarkim i shpejt\\n Lundrimi i leht\\n I aksesueshm pr t gjith"},{title:"Sfida e Faqes s Plot! ",content:"N lodr:\\n1. Personalizoni portfolion pr veten tuaj\\n2. Shtoni m shum seksione dhe prmbajtje\\n3. Prfshini imazhe me tekst alt t sakt\\n4. Testoni strukturn e formularit\\n5. Kontrolloni HTML-n semantike\\n\\nTani keni t gjitha aftsit pr t ndrtuar faqe profesionale!"}]},16:{title:"Divs, Spans dhe Kontejner Gjenerik",description:"Takoni blloqet ndrtuese t paraqitjeve web! Divs dhe spans jan briska zvicerane e HTML - nuk kan kuptim specifik por jan jashtzakonisht t dobishme pr organizimin dhe stilizimin e prmbajtjes. ",sections:[{title:"Elementi DIV - Miku m i Mir i Paraqitjes",content:"Elementi `<div>` sht nj kontejner gjenerik:\\n\\n**Karakteristika kye:**\\n Element nivel blloku (merr gjersi t plot)\\n Nuk ka kuptim semantik (vetm pr paraqitje/stilizim)\\n Mund t prmbaj do element tjetr\\n Thelbsor pr paraqitjet CSS\\n\\n**Prdorime t zakonshme:**\\n Seksione faqe dhe kontejner paraqitje\\n Karta dhe mbshtjells komponentsh\\n Grupe stilizimi\\n Kontejner grid dhe flexbox"},{title:"Elementi SPAN - Heroi i Stilizimit Inline",content:"Elementi `<span>` sht pr stilizimin e pjesve t tekstit:\\n\\n**Karakteristika kye:**\\n Element inline (rrjedh me tekstin)\\n Nuk ka kuptim semantik\\n I prsosur pr stilizimin e pjesve t tekstit\\n Nuk e thyen rrjedhn e tekstit\\n\\n**Prdorime t zakonshme:**\\n Theksimi i fjalve specifike\\n Shtimi i ikonave brenda tekstit\\n Stilizimi i pjesve t fjalive\\n Elemente dekorative t vogla"},{title:"DIV vs SPAN - Kur t Prdorni Cilin",content:"Zgjidhni kontejnerin e duhur:\\n\\n**Prdorni DIV kur ju nevojitet:**\\n Seksione ose kontejner paraqitje\\n Grupim nivel blloku\\n Prindr CSS grid ose flexbox\\n Mbshtjells komponentsh\\n\\n**Prdorni SPAN kur ju nevojitet:**\\n Stilizim inline\\n Theksim teksti\\n Ikona ose dekorime t vogla\\n Elemente q rrjedhin me tekst"},{title:"Elementet Semantike vs Gjenerik",content:'Kur t prdorni elemente semantike vs divs/spans:\\n\\n**Prdorni elemente semantike s pari:**\\n `<header>` n vend t `<div class="header">`\\n `<nav>` n vend t `<div class="navigation">`\\n `<main>` n vend t `<div class="main-content">`\\n\\n**Prdorni div/span kur:**\\n Nuk prshtatet asnj element semantik\\n Vetm pr stilizim/paraqitje\\n Ndrtimi i paraqitjeve komplekse'},{title:"Laboratori Praktik i Kontejnerve! ",content:"N lodr:\\n1. Shtoni m shum karta prmbajtjeje duke prdorur divs\\n2. Prdorni spans pr t theksuar fjal t ndryshme\\n3. Krijoni paraqitje me kontejner flexbox\\n4. Ndrtoni nj grid t thjesht duke prdorur divs\\n5. Stilizoni fjal specifike n fjali duke prdorur spans\\n\\nKontejnert jan themeli i paraqitjeve moderne web!"}]},17:{title:"Atributet HTML dhe Klasat",description:"Atributet jan si mbiemra pr elementet HTML - ato japin informacion shtes dhe kontroll! Klasat dhe ID-t ndihmojn t organizoni dhe stilizoni prmbajtjen tuaj. Zotroni kto themele! ",sections:[{title:"far Jan Atributet HTML?",content:'Atributet japin informacion shtes rreth elementeve:\\n\\n**Sintaks bazike:**\\n```html\\n<element atribut="vler">Prmbajtje</element>\\n```\\n\\n**Pika kye:**\\n Shkruhen n etiketn hapse\\n Prdorni thonjza rreth vlerave\\n Atribute t shumta ndahen me hapsira\\n T pandjeshme ndaj shkronjave por lowercase sht standarde'},{title:"Atribute Universale",content:'Kto funksionojn n do element HTML:\\n\\n **id**: Identifikues unik (`id="header"`)\\n **class**: Grup stilizimi CSS (`class="button primary"`)\\n **title**: Tekst kshille (`title="Kliko pr ndihm"`)\\n **lang**: Gjuha (`lang="sq"`)\\n **style**: CSS inline\\n **data-***: Ruajtje t dhnash t personalizuara'},{title:"Klasat vs ID-t",content:"Kuptimi i ndryshimit:\\n\\n**Klasat:**\\n Mund t riprdoren n elemente t shumta\\n Prdorni pr grupe stilizimi\\n Selektor CSS: `.emriklase`\\n Klasa t shumta pr element\\n\\n**ID-t:**\\n Duhet t jen unike n faqe\\n Prdorni pr elemente specifike\\n Selektor CSS: `#emrid`\\n T mira pr target JavaScript"},{title:"Atribute Specifike pr Element",content:"Elemente t ndryshme kan atribute speciale:\\n\\n**Lidhjet (`<a>`):**\\n `href`, `target`, `rel`\\n\\n**Imazhet (`<img>`):**\\n `src`, `alt`, `width`, `height`\\n\\n**Formulart:**\\n `type`, `name`, `required`, `placeholder`\\n\\n**Media:**\\n `controls`, `autoplay`, `loop`"},{title:"Puntori Praktik i Atributeve! ",content:"N lodr:\\n1. Shtoni m shum klasa te elementet e ndryshme\\n2. Krijoni ID unike dhe referencojini ato\\n3. Shtoni atribute title pr kshilla\\n4. Prdorni atribute data-* pr t dhna t personalizuara\\n5. Eksperimentoni me kombinime t ndryshme atributesh\\n\\nAtributet shkyin fuqin e plot t elementeve HTML!"}]},18:{title:"Entitete Karakteresh dhe Simbole Speciale",description:"Entitetet e karaktereve HTML ju lejojn t shfaqni karaktere speciale n mnyr t sigurt! Kto jan thelbsore pr shfaqjen e simboleve q prndryshe do t prisnin kodin tuaj ose nuk do t shfaqeshin sakt. ",sections:[{title:"Pse Entitete Karakteresh?",content:'Disa karaktere kan nevoj pr trajtim t veant:\\n\\n**Karaktere problematike:**\\n `<` dhe `>` - Duken si etiketa HTML\\n `&` - Fillon entitete HTML\\n `"` dhe `\'` - Prdoren pr atribute\\n\\n**Zgjidhja:**\\nEntitetet i prfaqsojn ato n mnyr t sigurt:\\n `&lt;` pr `<`\\n `&gt;` pr `>`\\n `&amp;` pr `&`\\n `&quot;` pr `"`'},{title:"Entitete Thelbsore",content:'Entitetet m t rndsishme pr t ditur:\\n\\n**Karaktere HTML-t sigurta:**\\n `&lt;`  < (m pak se)\\n `&gt;`  > (m shum se)\\n `&amp;`  & (ampersand)\\n `&quot;`  " (thonjz)\\n\\n**Simbole t zakonshme:**\\n `&copy;`   (copyright)\\n `&reg;`   (e regjistruar)\\n `&trade;`   (mark tregtare)\\n `&nbsp;`  hapsir jo-thyese'},{title:"Entitete Simbolesh t Dobishme",content:"Entitete pr simbole speciale:\\n\\n**Simbole matematikore:**\\n `&times;`   (shumzim)\\n `&divide;`   (pjestim)\\n `&plusmn;`   (plus/minus)\\n `&frac12;`   (nj e dyta)\\n\\n**Shigjeta dhe forma:**\\n `&larr;`   (shigjet majtas)\\n `&rarr;`   (shigjet djathtas)\\n `&hearts;`   (zemr)\\n `&spades;`   (gjethe)"},{title:"Referenca Numerike Karakteresh",content:"Prdorni numra pr do karakter:\\n\\n**Format decimal:**\\n `&#169;`   (copyright)\\n `&#8364;`   (euro)\\n `&#8482;`   (mark tregtare)\\n\\n**Format heksadecimal:**\\n `&#x00A9;`   (copyright)\\n `&#x20AC;`   (euro)\\n\\nPrdorini kto pr karaktere pa entitete me emr!"},{title:"Praktik Karakteresh Speciale! ",content:"N lodr:\\n1. Shfaqni etiketa HTML si tekst duke prdorur entitete\\n2. Shtoni simbole copyright dhe mark tregtare\\n3. Prdorni hapsira jo-thyese pr kontroll m t mir\\n4. Provoni simbole t ndryshme shigjeta dhe matematikore\\n5. Eksperimentoni me kode numerike karakteresh\\n\\nEntitetet sigurojn q teksti juaj t shfaqet sakt kudo!"}]},19:{title:"Komentet - Shnime pr Zhvilluesit",description:"Komentet HTML jan si shnime ngjitse n kodin tuaj! Ato ju ndihmojn ju dhe zhvillues t tjer t kuptoni se far po ndodh, t planifikoni ndryshime dhe t organizoni projekte komplekse. ",sections:[{title:"Sintaksa e Komentit HTML",content:"Komentet jan t padukshme pr prdoruesit por t vlefshme pr zhvilluesit:\\n\\n**Sintaks bazike:**\\n```html\\n<!-- Ky sht nj koment -->\\n```\\n\\n**Komente multi-rresht:**\\n```html\\n<!-- \\n    Ky sht nj koment m i gjat\\n    q shtrihet n rreshta t shumt\\n-->\\n```\\n\\n**Rregulla kye:**\\n Fillojn me `<!--` dhe mbarojn me `-->`\\n Prmbajtja injorohet plotsisht nga shfletuesit\\n Nuk mund t ndrthuhen brenda njri-tjetrit"},{title:"Kur t Prdorni Komente",content:"Komentet shrbejn pr shum qllime:\\n\\n**Dokumentimi:**\\n Shpjegoni seksione komplekse\\n Shno qllimin e blloqeve t kodit\\n Jepni kontekst pr zhvillues t ardhshm\\n\\n**Organizimi:**\\n Shno seksione t ndryshme faqe\\n Krijoni ndars vizual\\n Etiketoni komponente kryesore\\n\\n**Planifikimi:**\\n Shno prmirsime t ardhshme (TODO)\\n Shno zgjidhje t prkohshme (FIXME)\\n Planifikoni veori t ardhshme"},{title:"Praktika m t Mira t Komenteve",content:"Shkruani komente t dobishme, profesionale:\\n\\n**Praktika t mira:**\\n Mbajini komentet t prditsuara\\n Jini t qart dhe konciz\\n Shpjegoni 'pse', jo vetm 'far'\\n Prdorni formatim t qndrueshm\\n\\n**Modele t zakonshme:**\\n```html\\n<!-- TODO: Shto menu mobile -->\\n<!-- FIXME: Rregullo problemin e alignment -->\\n<!-- NOTE: Kontrollo me klientin -->\\n<!-- HACK: Zgjidhje e prkohshme -->\\n```"},{title:"aktivizimi i Prkohshm i Kodit",content:'Komentet mund t fsheh kodin pa e fshir:\\n\\n**Komentim i kodit:**\\n```html\\n<!-- Fshehur prkohsisht\\n<div class="promo-banner">\\n    <p>Ofert speciale!</p>\\n</div>\\n-->\\n```\\n\\n**Seksionimi i skedarve t mdhenj:**\\n```html\\n<!-- ========== HEADER ========== -->\\n<!-- ========== MAIN ========== -->\\n<!-- ========== FOOTER ========== -->\\n```\\n\\nKjo ndihmon gjat zhvillimit dhe debugging!'},{title:"Puntori Praktik i Komenteve! ",content:"N lodr:\\n1. Shtoni komente q shpjegojn seksione t ndryshme\\n2. Prdorni komente pr t fshehur prkohsisht prmbajtje\\n3. Krijoni shnime TODO pr prmirsime t ardhshme\\n4. Praktikoni formatim multi-rresht komentesh\\n5. Provoni t komentoni blloqe t tra kodi\\n\\nKomentet e mira e bjn mirmbajtjen e kodit shum m t leht pr t gjith!"}]},20:{title:"Elementet Inline vs Block",description:"Kuptimi i sjelljes s elementeve sht thelbsor pr paraqitjen web! Ky koncept themelor ndikon n mnyrn se si elementet shfaqen dhe pozicionohen n faqen tuaj. ",sections:[{title:"Elementet Bllok - Kontejner Gjersi t Plot",content:"Elementet bllok renditenvertikalisht si blloqe ndrtimi:\\n\\n**Karakteristika:**\\n Zn gjersin e plot t disponueshme\\n Fillojn n rresht t ri\\n E shtyjn elementin tjetr n rresht t ri\\n Mund t prmbajn elemente t tjera\\n Gjersia dhe lartsia kontrollohen me CSS\\n\\n**Elemente bllok t zakonshme:**\\n `<div>`, `<p>`, `<h1>`-`<h6>`\\n `<ul>`, `<ol>`, `<li>`\\n `<header>`, `<nav>`, `<main>`, `<footer>`"},{title:"Elementet Inline - Rrjedhin me Tekst",content:"Elementet inline rrjedhin brenda tekstit si fjal n fjali:\\n\\n**Karakteristika:**\\n Zn vetm gjersin e prmbajtjes s tyre\\n Rrjedhin me tekstin prreth\\n Nuk fillojn n rreshta t rinj\\n Nuk mund t prmbajn elemente bllok\\n Gjersia/lartsia prcaktohet nga prmbajtja\\n\\n**Elemente inline t zakonshme:**\\n `<span>`, `<a>`, `<img>`\\n `<strong>`, `<em>`, `<code>`\\n `<small>`, `<sub>`, `<sup>`"},{title:"Inline-Block - M e Mira e T Dyjave Botve",content:"CSS mund t ndryshoj sjelljen e elementit:\\n\\n**display: inline-block**\\n Rrjedh inline si elementet inline\\n Pranon width/height si elementet bllok\\n E shklqyer pr menu lundrimi\\n E dobishme pr grupe butonash\\n\\n**display: block**\\n Detyron elementet inline t sillen si bllok\\n\\n**display: inline**\\n Detyron elementet bllok t sillen inline"},{title:"Implikime Paraqitjeje",content:"Kuptimi i sjelljes ndikon n vendimet e dizajnit:\\n\\n**Prdorime elementesh bllok:**\\n Seksione dhe kontejner faqesh\\n Struktura paraqitjeje\\n Prmbajtje q ka nevoj pr gjersi t plot\\n Kur ju nevojitet madhsi e sakt\\n\\n**Prdorime elementesh inline:**\\n Formatim teksti brenda paragrafve\\n Lidhje brenda fjalive\\n Elemente t vogla UI\\n Prmbajtje q rrjedh me tekst"},{title:"Eksperiment Sjelljeje Elementi! ",content:"N lodr, vzhgoni:\\n1. Si elementet bllok renditen vertikalisht\\n2. Si elementet inline rrjedhin me tekst\\n3. Kufijt q tregojn kufijt e elementeve\\n4. Hapsira dhe pozicionim i ndryshm\\n5. Si elementet ndrveprojn me njri-tjetrin\\n\\nKuptimi i sjelljes s elementeve sht themelor pr paraqitjen CSS!"}]},21:{title:"Llojet e Fushat t Formularve dhe Validimi",description:"HTML5 revolucionarizoi formulart me lloje t fuqishme fushash dhe validim t integruar! Zbulo fushat e specializuara dhe mso t sigurosh q prdoruesit t futin t dhna t vlefshme. ",sections:[{title:"Llojet Moderne t Fushave HTML5",content:'HTML5 prezantoi lloje fushash t specializuara:\\n\\n**Fushat e komunikimit:**\\n `type="email"` - Validim email-i\\n `type="tel"` - Numra telefoni\\n `type="url"` - Adresa web\\n\\n**Data dhe koha:**\\n `type="date"` - Zgjedhs date\\n `type="time"` - Zgjedhs kohe\\n `type="datetime-local"` - Data + koha\\n\\n**Fushat interaktive:**\\n `type="range"` - Kontroll rrshqits\\n `type="color"` - Zgjedhs ngjyrash\\n `type="file"` - Ngarkim skedari'},{title:"Atributet e Validimit t Fushave",content:"Kontrollo far mund t fusin prdoruesit:\\n\\n**Atribute universale:**\\n `required` - Fusha duhet t plotsohet\\n `placeholder` - Tekst shenjues\\n `readonly` - Nuk mund t ndryshohet\\n `disabled` - Nuk mund t prdoret\\n\\n**Validimi i tekstit:**\\n `minlength/maxlength` - Kufij karakteresh\\n `pattern` - Validim i personalizuar me regex\\n\\n**Validimi i numrave:**\\n `min/max` - Kufij vlerash\\n `step` - Madhsi rritjeje"},{title:"Ngarkimi i Skedarve dhe Veorit e Avancuara",content:'Trajto llojet komplekse t fushave:\\n\\n**Fushat e skedarve:**\\n```html\\n<input type="file" \\n       accept=".pdf,.jpg,.png" \\n       multiple>\\n```\\n `accept` - Kufizo llojet e skedarve\\n `multiple` - Lejo skedar t shumt\\n\\n**Fushat e krkimit:**\\n```html\\n<input type="search" \\n       placeholder="Krko...">\\n```\\n Shpesh prfshin buton fshirjeje\\n Prvoj m e mir celulare'},{title:"Praktikat m t Mira t Validimit t Formularit",content:"Krijo validim miqsor pr prdoruesin:\\n\\n**Validimi HTML5:**\\n Mesazhe gabimi automatike\\n Parandalon dorzimin e formularit t pavlefshm\\n Funksionon pa JavaScript\\n Prvoj e shklqyer prdoruesi\\n\\n**Aksesueshmria:**\\n Prdor gjithmon etiketa t sakta\\n Jep mesazhe gabimi t qarta\\n Mos mbshtetu vetm n ngjyr\\n Testo me lexues ekrani\\n\\n**Prmirsim progresiv:**\\nFillo me validim HTML, prmirso me CSS dhe JavaScript!"},{title:"Sfida e Formularve Interaktiv! ",content:"N lodr:\\n1. Provo t dorzosh me fusha t zbrazta t detyrueshme\\n2. Fut formate email-i t pavlefshme dhe shiko validimin\\n3. Prdor zgjedhsin e ngjyrave dhe rrshqitsin\\n4. Provo zgjedhsin e dats n pajisje t ndryshme\\n5. Ngarko lloje t ndryshme skedarsh\\n6. Vrej tastiern e specializuar celulare\\n\\nFushat moderne t formularit e bjn mbledhjen e t dhnave t fuqishme dhe intuitive!"}]},22:{title:"Veorit e Avancuara HTML",description:"Eksploro veorit e fuqishme HTML5 q shtojn interaktivitet dhe funksionalitet! Kto elemente t avancuara mund t prmirsojn prvojn e prdoruesit pa JavaScript. ",sections:[{title:"Details dhe Summary - Prmbajtje e Palosshme",content:"Krijo seksione t zgjerohem me HTML native:\\n\\n```html\\n<details>\\n  <summary>Kliko pr t zgjeruar</summary>\\n  <p>Prmbajtja e fshehur ktu...</p>\\n</details>\\n```\\n\\n**E prsosur pr:**\\n Seksione FAQ\\n Organizim prmbajtjeje t gjat\\n Zbulim progresiv\\n Reduktim t rregullimit t faqes\\n\\n**Prfitimet:**\\n Funksionon pa JavaScript\\n E aksesueshme si parazgjedhje\\n Mbshtetje lundrimi me tastier"},{title:"Elementet Progress dhe Meter",content:'Shfaq progresin dhe matjet:\\n\\n**Elementi progress:**\\n```html\\n<progress value="75" max="100">75%</progress>\\n```\\n Shfaq prparimin e prfundimit\\n I shklqyer pr shiritat e ngarkimit\\n Progresi i dorzimit t formularit\\n\\n**Elementi meter:**\\n```html\\n<meter value="6" min="0" max="10">6/10</meter>\\n```\\n Shfaq matje skalare\\n Vlersime, rezultate, prqindje\\n Prdorimi i diskut, temperaturat'},{title:"Elementi Dialog - Modalet Native",content:'Krijo dialog modale me HTML:\\n\\n```html\\n<dialog id="my-dialog">\\n  <h3>Titulli i Dialogut</h3>\\n  <p>Prmbajtja e dialogut...</p>\\n  <button>Mbyll</button>\\n</dialog>\\n```\\n\\n**JavaScript pr kontroll:**\\n `dialog.showModal()` - Shfaq si modal\\n `dialog.show()` - Shfaq si dialog i rregullt\\n `dialog.close()` - Mbyll dialogun\\n\\n**Prfitimet:**\\n Aksesueshmri e integruar\\n Menaxhim i duhur i fokusit\\n Mbshtetje pr tastin ESC'},{title:"Elementi Output - Rezultatet e Llogaritura",content:'Shfaq rezultatet e llogaritura ose t gjeneruara nga prdoruesi:\\n\\n```html\\n<output for="input1 input2">Rezultati</output>\\n```\\n\\n**Rastet e prdorimit:**\\n Rezultatet e kalkulatorit\\n Llogaritjet e fushave t formularit\\n Prditsime n koh reale\\n Demonstrime interaktive\\n\\n**Atributi `for`:**\\nReferencon ID-t e fushave t lidhura q kontribojn n llogaritje.'},{title:"Puntori i Veorive t Avancuara! ",content:"N lodr, provo:\\n1. Zgjero dhe palo seksionin details\\n2. Shiko shiritin e progresit dhe meterin\\n3. Hap dhe mbyll modalin dialog\\n4. Lviz rrshqitsin range pr t par output t prditsohet\\n5. Krijo FAQ tuajin e palosshm\\n6. Ndrto nj kalkulator t thjesht me output\\n\\nKto veori shtojn funksionalitet t fuqishm me kod minimal!"}]},23:{title:"Performanca dhe Praktikat m t Mira",description:"Krijo faqe t shpejta dhe efikase me praktikat m t mira HTML! Mso teknika optimizimi q prmirsojn shpejtsin e ngarkimit, SEO dhe prvojn e prdoruesit. ",sections:[{title:"Bazat e Performancs HTML",content:"Optimizo HTML-n pr shpejtsi dhe efikasitet:\\n\\n**Parimet kryesore:**\\n Minimizo madhsin e skedarit HTML\\n Redukto elementet e panevojshme\\n Prdor markup semantik sakt\\n Optimizo imazhet dhe mediat\\n Zbato ngarkimin lazy\\n\\n**Prfitimet e performancs:**\\n Ngarkimi m i shpejt i faqes\\n Prvoj m e mir prdoruesi\\n Renditje m t mira SEO\\n Prdorim m i ult i bandwidth\\n Performanc m e mir celulare"},{title:"Optimizimi i Imazheve",content:'Imazhet shpesh ngadalsojn faqet:\\n\\n**Teknikat e optimizimit:**\\n```html\\n<img src="image.jpg" \\n     alt="Prshkrimi" \\n     width="800" height="600" \\n     loading="lazy">\\n```\\n\\n**Praktikat m t mira:**\\n Gjithmon specifiko width/height\\n Prdor `loading="lazy"` pr imazhet nn fold\\n Zgjedh formate t prshtatshme (WebP, JPEG, PNG)\\n Kompreso imazhet pr web\\n Prdor imazhe responsive me srcset'},{title:"Standardet e Cilsis s Kodit",content:"Shkruaj HTML t pastr dhe t mirmbajtur:\\n\\n**Struktura:**\\n Indentim i qndrueshm\\n Ndrthurje logjike e elementeve\\n Mbyllje e duhur e etiketave\\n Emra kuptimplot t klasave dhe ID-ve\\n\\n**Validimi:**\\n Prdor validatorin W3C HTML\\n Kontrollo pr shtje aksesueshmrie\\n Testo n shfletues t ndryshm\\n Valido q formulart funksionojn sakt\\n\\n**Organizimi:**\\n Grupo elementet e lidhura\\n Prdor komente pr seksione komplekse\\n Mbaj skedart t organizuar"},{title:"Optimizimi i SEO dhe Meta",content:"Optimizo pr motort e krkimit:\\n\\n**Etiketat meta thelbsore:**\\n Tituj unik dhe prshkrues\\n Prshkrime meta bindse\\n Etiketa t duhura Open Graph\\n Shnim t dhnash t strukturuara\\n\\n**Optimizimi i prmbajtjes:**\\n Hierarki e duhur e titujve\\n Tekst alternativ prshkrues\\n Struktura URL t pastrta\\n Koh ngarkimi t shpejta\\n Dizajn miqsor pr celular"},{title:"Testimi i Performancs! ",content:"N lodr, vrej:\\n1. Struktura HTML t pastr dhe minimale\\n2. Imazhe t optimizuara me ngarkimin lazy\\n3. Markup semantik t duhur\\n4. Prdorim efikas t etiketave meta\\n5. Lundrim dhe prmbajtje t aksesueshme\\n\\nTesto faqet e tua me:\\n PageSpeed Insights\\n Auditime Lighthouse\\n Validator HTML\\n Kontrollues aksesueshmrie"}]},24:{title:"Planifikimi dhe Struktura e Projektit HTML",description:"Mso t planifikosh dhe strukturosh projektet HTML si nj profesionist! Planifikimi i duhur on n faqe m t mira q jan m t lehta pr t'u ndrtuar dhe mirmbajtur. ",sections:[{title:"Faza e Planifikimit t Projektit",content:"Para se t shkruash kod, planifiko projektin tnd:\\n\\n**Prcakto qllimet:**\\n Cili sht qllimi i faqes?\\n Kush sht audienca juaj e synuar?\\n far veprimesh duhet t kryejn prdoruesit?\\n far prmbajtjeje ju nevojitet?\\n\\n**Krijo nj hart faqeje:**\\n Listo t gjitha faqet e nevojshme\\n Planifiko strukturn e lundrimit\\n Organizo hierarkin e prmbajtjes\\n Merr parasysh udhtimin e prdoruesit\\n\\n**Strategjia e prmbajtjes:**\\n Shkruaj tituj binds\\n Planifiko mesazhin tnd\\n Mblidh imazhe dhe media\\n Organizo informacionin logjikisht"},{title:"Praktikat m t Mira t Strukturs HTML",content:"Ndrto nj themel t fort:\\n\\n**Struktura e dokumentit:**\\n DOCTYPE dhe etiketa html e duhur\\n Seksioni i plot head\\n Struktura semantike e body\\n Hierarki logjike e titujve\\n\\n**Seksionet e faqes:**\\n Header me identitetin e faqes\\n Lundrim pr lvizjen e prdoruesit\\n Zona kryesore e prmbajtjes\\n Footer me informacion shtes\\n\\n**Organizimi i prmbajtjes:**\\n Prdor elementet semantike si duhet\\n Grupo prmbajtjen e lidhur n seksione\\n Krijo hierarki t qart informacioni\\n Siguro rend logjik tab"},{title:"Modelet e Zakonshme t Faqeve",content:"Mso strukturat standarde t faqeve:\\n\\n**Faqe biznesi:**\\n Seksion hero me propozim vlere\\n Seksion About me besueshmri\\n Shfaqje shrbimesh/produktesh\\n Dshmi ose portfolio\\n Informacion kontakti\\n\\n**Faqe portfolio:**\\n Prezantim personal\\n Aftsi dhe ekspertiz\\n Shfaqje projektesh\\n Proesi i puns ose qasja\\n Kontakt dhe lidhje sociale\\n\\n**Faqe blog:**\\n List postime t fundit\\n Kategori dhe etiketa\\n Rreth autorit\\n Arkiv ose krkim\\n Seksione komentesh"},{title:"Rrjedha e Puns s Zhvillimit",content:"Ndiq nj qasje sistematike:\\n\\n**1. Faza e planifikimit:**\\n Prcakto krkesat\\n Krijo wireframes\\n Planifiko strukturn e prmbajtjes\\n Zgjedh stack teknologjik\\n\\n**2. Faza e zhvillimit:**\\n Shkruaj strukturn HTML s pari\\n Shto prmbajtje dhe testo\\n Valido markup rregullisht\\n Testo n pajisje t ndryshme\\n\\n**3. Faza e lanimit:**\\n Kontroll final aksesueshmrie\\n Optimizim performanc\\n Verifikim SEO\\n Testim cross-browser"},{title:"Puntori i Planifikimit t Projektit! ",content:"Prdor shablonin n lodr pr:\\n1. Planifiko projektin tnd t faqes\\n2. Zvendso prmbajtjen placeholder me idet e tua\\n3. Personalizo strukturn pr nevojat e tua\\n4. Shto ose largo seksione sipas nevojs\\n5. Merr parasysh audiencn tnde t synuar\\n6. Planifiko strategjin e prmbajtjes\\n\\nPlanifikimi i mir kursen koh dhe krijon faqe m t mira!"}]},25:{title:"Projekti Final dhe Zotrimi i HTML",description:"Urime pr prfundimin e kursit t Bazave t HTML!  Koha pr t shfaqur gjithka q ke msuar duke ndrtuar faqen tnde profesionale portfolio. Tani ke t gjitha aftsit pr t krijuar prvoja web t mahnitshme!",sections:[{title:"Udhtimi Yt HTML - far Ke Zotruar",content:"Shiko sa larg ke ardhur! Tani kupton:\\n\\n**Aftsit Baz HTML:**\\n Struktura e dokumentit dhe markup semantik\\n Formular, tabela dhe prmbajtje multimediale\\n Aksesueshmri dhe dizajn gjithprfshirs\\n Optimizimi SEO dhe etiketat meta\\n Veori moderne HTML5 dhe praktikat m t mira\\n\\n**Aftsit Profesionale:**\\n Organizim dhe validim kodi\\n Optimizim performanc\\n Kompatibilitet cross-browser\\n Planifikim dhe struktur projekti\\n Praktikat m t mira t industris"},{title:"Krkesat e Projektit Final",content:"Ndrto nj faqe portfolio t plot q demonstron aftsit e tua:\\n\\n**Elementet e Krkuara:**\\n Struktura e duhur e dokumentit HTML5\\n Markup semantik n t gjith\\n Etiketa meta responsive\\n Lundrim me lidhje t brendshme\\n Formular kontakti me validim\\n Prmbajtje multimediale (imazhe/video)\\n Veori aksesueshmrie\\n\\n**Veori Bonus:**\\n Fusha t avancuara formulari\\n Etiketa meta t mediave sociale\\n Optimizime performanc\\n Prdorim kreativ i veorive HTML5"},{title:"Prtej HTML - Hapat e Ardhshm",content:"Ke nj themel t fort HTML! Ja far t msosh m pas:\\n\\n**Hapat e menjhershm:**\\n **CSS** - Stilo HTML-n tnde bukur\\n **Responsive Design** - Paraqitje mobile-first\\n **JavaScript** - Shto interaktivitet\\n **Git/GitHub** - Kontroll versioni\\n\\n**Teknologji t avancuara:**\\n Framework CSS (Bootstrap, Tailwind)\\n Framework JavaScript (React, Vue)\\n Mjete ndrtimi (Vite, Webpack)\\n Zhvillim backend\\n\\n**Burime pr vazhdim t t msuarit:**\\n MDN Web Docs\\n freeCodeCamp\\n CSS-Tricks\\n Web.dev"},{title:"Ndrtimi i Portfolios Tuaj",content:"Shabloni n lodr sht nje fillim:\\n\\n**far t prfshish:**\\n Prezantim personal dhe bio\\n Aftsit dhe teknologjit e tua\\n Projektet q ke ndrtuar\\n Rruga pr t t kontaktuar\\n Lidhjet e mediave sociale\\n\\n**Kshilla dizajni:**\\n Mbaje t thjesht dhe t pastr\\n Prdor imazhe cilsore\\n Trego punn m t mir\\n Bje t leht pr t kontaktuar\\n Prditso rregullisht"},{title:"Celebro Sukseset e Tua! ",content:"Ke ardhur nga nuk dije asgj pr HTML tek krijimi i faqeve profesionale! Kjo sht nj arritje e madhe.\\n\\n**Hapat e ardhshm:**\\n1. Ndrto projektin tnd final t portfolios\\n2. Publiko n GitHub Pages ose Netlify\\n3. Ndaje me miqt dhe familjen\\n4. Apliko pr kurse t avancuara\\n5. Fillo t ndrtosh faqe reale\\n\\n**Mbaj mend:**\\n do zhvillues filloi nga fillimi\\n Praktika e bn prsosur\\n Komuniteti sht ktu pr t t ndihmuar\\n Vazhdo t msosh dhe t ndrtosh\\n\\nJe n rrug pr nj karrier t shklqyer n zhvillim web! "}]}},css:{1:{title:"far sht CSS? - Stilizimi i Faqes Tuaj t Par",description:"Mir se vini n botn e mahnitshme t CSS! CSS (Cascading Style Sheets) transformon HTML-n e thjesht n faqe t bukura dhe profesionale. Le t fillojm udhtimin tuaj n dizajn! ",sections:[{title:"far sht CSS?",content:"CSS do t thot **Cascading Style Sheets**. Mendojeni si artisti i make-up-it pr faqet e internetit:\\n\\n **Cascading**: Stilet rrjedhin nga prindrit tek elementet fmij\\n **Style**: Kontrollon si duken gjrat (ngjyra, fontet, paraqitja)\\n **Sheets**: Koleksione t organizuara t rregullave t stilit\\n\\nNse HTML sht skeleti, CSS sht lkura, rrobat dhe make-up-i q i bn faqet e bukura!"},{title:"Si Funksionon CSS",content:"CSS funksionon duke zgjedhur elementet HTML dhe duke aplikuar stile:\\n\\n1. **Selector**: Targeton cilin element HTML t stilizoj\\n2. **Property**: far aspekti t ndryshoj (ngjyra, madhsia, etj.)\\n3. **Value**: Si ta ndryshoj\\n\\nShembull: `h1 { color: purple; }` i bn t gjitha titujt h1 t purpurt!"},{title:"Tre Mnyra pr t Shtuar CSS",content:'Mund t shtoni CSS n tre mnyra:\\n\\n **Inline**: `<p style="color: red;">Tekst</p>`\\n **Internal**: Etiketa `<style>` n `<head>`\\n **External**: Skedar i veant `.css`\\n\\n**Praktika m e mir**: Prdorni skedar CSS t jashtm pr organizim m t mir!'},{title:"Provoje Vet! ",content:"N lodr, eksperimentoni me:\\n1. Ndryshoni ngjyrn e h1 nga e purpurt n ngjyrn tuaj t preferuar\\n2. Provoni fonte t ndryshme: `font-family: Georgia;`\\n3. Shtoni m shum stile te paragrafi\\n4. Krijoni nj klas t re dhe aplikojeni te teksti\\n\\nShikoni si ndryshimet tuaja transformojn menjher pamjen!"}]},2:{title:"Selektort CSS - Targetimi i Elementeve HTML",description:"Selektort jan mnyra se si i tregoni CSS-s cilat elemente HTML t stilizoj. Zotroni selektort dhe ju kontrolloni saktsisht si duket faqja juaj! ",sections:[{title:"Selektort e Elementeve",content:"Targetoni elementet HTML me emrin e etikets:\\n\\n```css\\nh1 { color: blue; }\\np { font-size: 16px; }\\ndiv { background-color: lightgray; }\\n```\\n\\n**Prdorni pr**: Stilizimin e t gjith elementeve t t njjtit lloj"},{title:"Selektort e Klass (.class)",content:'Targetoni elementet me atribute specifike klase:\\n\\n**HTML**: `<p class="highlight">Tekst</p>`\\n**CSS**: `.highlight { background-color: yellow; }`\\n\\n Prdorni nj pik (.) para emrit t klass\\n Mund t prdoret n elemente t shumta\\n Lloji i selektorit **m i prdorur**'},{title:"Selektort ID (#id)",content:'Targetoni nj element specifik me ID unik:\\n\\n**HTML**: `<div id="header">Prmbajtje</div>`\\n**CSS**: `#header { background-color: navy; }`\\n\\n Prdorni nj hash (#) para emrit ID\\n Duhet t jet **unik** n faqe\\n Specificiteti m i lart se klasat'},{title:"Praktik Selektorsh! ",content:"N lodr, provoni:\\n1. Shtoni nj klas t re `.warning` me tekst t kuq\\n2. Stilizoni t gjitha elementet `<p>` me nj margin\\n3. Krijoni nj ID `#footer` me sfond t errt\\n4. Prdorni selektor t shumt: `h1, h2, h3 { font-family: Georgia; }`\\n\\nEksperimentoni dhe shikoni si funksionojn selektor t ndryshm!"}]},3:{title:"Ngjyrat CSS - Ndrioni Dizajnin Tuaj",description:"Ngjyrat transformojn faqe t thjeshta n prvoja t bukura vizuale! Msoni t gjitha mnyrat pr t specifikuar ngjyrat n CSS dhe t krijoni palete ngjyrash profesionale. ",sections:[{title:"Ngjyrat me Emra",content:"CSS mbshtet 140 emra ngjyrash:\\n\\n```css\\ncolor: red;\\nbackground-color: lightblue;\\nborder-color: navy;\\n```\\n\\n**Ngjyrat popullore me emra:**\\n Ngjyra bazike: `red`, `blue`, `green`, `yellow`\\n Ngjyra t lehta: `lightgray`, `lightblue`, `lightyellow`\\n Ngjyra t errta: `darkblue`, `darkgreen`, `darkred`\\n\\nNgjyrat me emra jan t lehta por t kufizuara n przgjedhje!"},{title:"Kodet Hex (#RRGGBB)",content:"Kodet hex ofrojn miliona ngjyra:\\n\\n**Formati**: `#RRGGBB` (Kuq Jeshil Blu)\\n\\n```css\\ncolor: #FF0000;      /* Kuq */\\ncolor: #00FF00;      /* Jeshil */\\ncolor: #0000FF;      /* Blu */\\ncolor: #FFA500;      /* Portokalli */\\n```\\n\\n**Shkurtore:**\\n `#FF0000`  `#F00` (t dyja i kuq)\\n Prdorni shkurtore kur shihen shifra t dyfishta"},{title:"Vlerat RGB dhe RGBA",content:"RGB prdor vlera 0-255 pr Kuq, Jeshil, Blu:\\n\\n```css\\ncolor: rgb(255, 0, 0);        /* Kuq */\\ncolor: rgb(0, 128, 255);      /* Blu qiell */\\n```\\n\\n**RGBA shton Transparenc:**\\n```css\\nbackground: rgba(0, 0, 0, 0.5);  /* Zi 50% transparent */\\ncolor: rgba(255, 0, 0, 0.8);     /* Kuq 80% opak */\\n```\\n\\nKanali alpha: 0 = plotsisht transparent, 1 = plotsisht opak"},{title:"Eksperiment me Ngjyra! ",content:"N lodr, provoni:\\n1. Ndryshoni ngjyrat e sfondit me hex, rgb dhe emra\\n2. Krijoni gradient me RGBA transparent\\n3. Bni nj buton me hover q ndryshon ngjyrn\\n4. Testoni kombinime t ndryshme ngjyrash pr lexueshmri\\n\\n**Kshill Pro**: Prdorni mjete si Adobe Color ose Coolors pr palete profesionale!"}]},4:{title:"Fontet dhe Teksti - Tipografi e Bukur",description:"Tipografia e mir prmirson lexueshmrin dhe profesionalizmin! Zotroni fontet, madhsit dhe stilet e tekstit pr t krijuar dizajne t bukura. ",sections:[{title:"Familjet e Fonteve",content:"Zgjidhni fontet pr prdoruesit tuaj:\\n\\n```css\\nfont-family: 'Arial', sans-serif;\\nfont-family: 'Georgia', serif;\\nfont-family: 'Courier New', monospace;\\n```\\n\\n**Llojet e Fonteve:**\\n **Serif**: Fontet klasike me bisht (Times, Georgia)\\n **Sans-serif**: Moderne, pa bisht (Arial, Helvetica)\\n **Monospace**: Gjersi fikse pr kod (Courier)\\n **Cursive**: Fontet me shkrim dore\\n **Fantasy**: Fontet dekorative\\n\\nGjithmon siguroni fontet fallback!"},{title:"Madhsia dhe Pesha e Fontit",content:"Kontrolloni madhsin dhe trashsin e tekstit:\\n\\n**Madhsia e Fontit:**\\n```css\\nfont-size: 16px;      /* Pixels - fikse */\\nfont-size: 1.2em;     /* Relativ me prindrin */\\nfont-size: 1.5rem;    /* Relativ me root */\\n```\\n\\n**Pesha e Fontit:**\\n```css\\nfont-weight: normal;   /* 400 */\\nfont-weight: bold;     /* 700 */\\nfont-weight: 600;      /* Semi-bold */\\n```"},{title:"Stili i Tekstit dhe Dekorimi",content:"Shtoni stil dhe dekorim tekstit:\\n\\n**Stili:**\\n```css\\nfont-style: italic;    /* Tekst pjerrt */\\nfont-style: normal;    /* Tekst normal */\\n```\\n\\n**Dekorimi:**\\n```css\\ntext-decoration: underline;      /* Nnvizuar */\\ntext-decoration: line-through;   /* Viz prmes */\\ntext-decoration: none;           /* Pa dekorim */\\n```\\n\\n**Transformimi:**\\n```css\\ntext-transform: uppercase;  /* SHKRONJA T MDHA */\\ntext-transform: lowercase;  /* shkronja t vogla */\\ntext-transform: capitalize; /* Kapitalizim Fjalsh */\\n```"},{title:"Laboratori i Tipografis! ",content:"Eksperimentoni me:\\n1. Krijoni nj titull me font custom dhe ngjyr\\n2. Bni nj paragraf me font-size responsive duke prdorur rem\\n3. Stilizoni nj lidhje q hiqet nnvizimi n hover\\n4. Krijoni tekst t kapitalizuar pr titujt\\n\\nTipografia e mir bn 80% t dizajnit!"}]},5:{title:"Modeli i Kutis CSS - Hapsira dhe Paraqitja",description:"do element HTML sht nj kuti! Kuptoni modelin e kutis pr t kontrolluar plotsisht madhsit, hapsirn dhe paraqitjen e elementeve. ",sections:[{title:"Pjest e Modelit t Kutis",content:"do element ka katr zona:\\n\\n**1. Content**: Prmbajtja aktuale (tekst, imazhe)\\n**2. Padding**: Hapsira brenda rreth prmbajtjes\\n**3. Border**: Kufiri rreth padding\\n**4. Margin**: Hapsira jasht rreth border\\n\\n```css\\ndiv {\\n  width: 200px;           /* Gjersia e prmbajtjes */\\n  padding: 20px;          /* Hapsira e brendshme */\\n  border: 2px solid black;/* Kufiri */\\n  margin: 10px;           /* Hapsira e jashtme */\\n}\\n```\\n\\nGjersia totale = width + padding + border + margin"},{title:"Padding - Hapsira e Brendshme",content:"Padding krijon hapsir brenda elementit:\\n\\n**T gjitha ant:**\\n```css\\npadding: 20px;  /* 20px n t gjitha ant */\\n```\\n\\n**Individualisht:**\\n```css\\npadding-top: 10px;\\npadding-right: 15px;\\npadding-bottom: 10px;\\npadding-left: 15px;\\n```\\n\\n**Shkurtore:**\\n```css\\npadding: 10px 15px;           /* Top/bottom right/left */\\npadding: 10px 15px 10px 15px; /* Top right bottom left */\\n```"},{title:"Margin - Hapsira e Jashtme",content:"Margin krijon hapsir jasht elementit:\\n\\n**Bazike:**\\n```css\\nmargin: 20px;              /* T gjitha ant */\\nmargin: 20px 0;            /* Top/bottom, jo left/right */\\n```\\n\\n**Qendrorizim:**\\n```css\\nmargin: 0 auto;            /* Qendror horizontal */\\n```\\n\\n**Margin negative:**\\n```css\\nmargin-top: -10px;         /* Lviz lart */\\n```\\n\\nVler automatike: shprndan hapsirn n mnyr t barabart"},{title:"Praktik pr Modelin e Kutis! ",content:"N lodr:\\n1. Krijoni nj card me padding dhe border\\n2. Qendrozeni nj div me margin: 0 auto\\n3. Eksperimentoni me vlera t ndryshme padding\\n4. Krijoni nj button me padding dhe margin\\n\\n**DevTools Tip**: Shikoni Box Model n Chrome DevTools pr t par madhsit aktuale!"}]},6:{title:"Kufijt CSS - Kornizat dhe Skicat",content:"Kufijt shtojn struktur dhe stil elementeve tuaja! Msoni t gjitha mnyrat pr t krijuar kufij t bukur, skicat dhe efekte kreative. ",sections:[{title:"Stilet Bazike t Kufijve",content:"CSS ofron lloje t ndryshme kufijsh:\\n\\n```css\\nborder: 2px solid black;        /* Kufij i thjesht */\\nborder: 3px dashed red;         /* Kufij me viza */\\nborder: 4px dotted blue;        /* Kufij me pika */\\nborder: 5px double green;       /* Kufij i dyfisht */\\n```\\n\\n**Stilet e disponueshme:**\\n `solid` - Vij e vazhdueshme\\n `dashed` - Viza t shkputura\\n `dotted` - Pika\\n `double` - Dy vija\\n `groove`, `ridge`, `inset`, `outset` - Efekte 3D"},{title:"Kontrolloni Ant Individualisht",content:"Stilizoni do an ndryshe:\\n\\n```css\\nborder-top: 3px solid red;\\nborder-right: 2px dashed blue;\\nborder-bottom: 3px solid red;\\nborder-left: 2px dashed blue;\\n```\\n\\n**Ose:**\\n```css\\nborder-width: 2px 4px 2px 4px;  /* Top Right Bottom Left */\\nborder-style: solid dashed;      /* Top/bottom Right/left */\\nborder-color: red blue;          /* Alternativ */\\n```"},{title:"Kufij t Rrumbullakt",content:"Krijoni knd t but me border-radius:\\n\\n```css\\nborder-radius: 10px;         /* T gjitha kndet */\\nborder-radius: 50%;          /* Rreth perfekt */\\nborder-radius: 10px 20px;    /* Top-left/bottom-right, top-right/bottom-left */\\n```\\n\\n**Knd individual:**\\n```css\\nborder-top-left-radius: 10px;\\nborder-top-right-radius: 20px;\\nborder-bottom-right-radius: 10px;\\nborder-bottom-left-radius: 20px;\\n```\\n\\nPrdoret pr butona, karta, imazhe t rrumbullakta!"},{title:"Krijuesi i Kufijve! ",content:"Provoni n lodr:\\n1. Krijoni nj card me border-radius 15px\\n2. Bni nj buton rreth me border-radius: 50%\\n3. Krijoni nj kufij me ngjyra t ndryshme n do an\\n4. Eksperimentoni me outline pr efekte fokusi\\n\\n**Bonus**: Kombinoni shadows me borders pr efekte 3D!"}]},7:{title:"Sfondet CSS - Ngjyra, Gradient dhe Imazhe",description:"Sfondet transformojn dizajnin! Msoni t vendosni ngjyra, krijoni gradient t mahnitshm dhe prdorni imazhe sfondo profesionale. ",sections:[{title:"Ngjyra dhe Gradient t Sfondit",content:"Vendosni ngjyra sfondesh t thjesht ose gradient:\\n\\n**Ngjyra t thjeshta:**\\n```css\\nbackground-color: lightblue;\\nbackground-color: #FF5733;\\nbackground-color: rgba(0,0,0,0.5);\\n```\\n\\n**Gradient lineare:**\\n```css\\nbackground: linear-gradient(to right, red, yellow);\\nbackground: linear-gradient(45deg, #667eea 0%, #764ba2 100%);\\n```\\n\\n**Gradient radial:**\\n```css\\nbackground: radial-gradient(circle, yellow, orange, red);\\n```"},{title:"Imazhe Sfondesh",content:"Shtoni imazhe si sfonde:\\n\\n```css\\nbackground-image: url('background.jpg');\\nbackground-size: cover;         /* Mbulon t gjith konteinerin */\\nbackground-size: contain;       /* Prmban tr imazhin */\\nbackground-position: center;    /* Qendron imazhin */\\nbackground-repeat: no-repeat;   /* Pa prsritje */\\n```\\n\\n**Shkurtore:**\\n```css\\nbackground: url('bg.jpg') center/cover no-repeat;\\n```"},{title:"Sfonde t Shumfishta dhe Modele",content:"Kombinoni sfonde t shumfishta:\\n\\n```css\\nbackground:\\n  linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),\\n  url('image.jpg') center/cover;\\n```\\n\\n**Modele me gradient:**\\n```css\\nbackground: repeating-linear-gradient(\\n  45deg,\\n  #606dbc,\\n  #606dbc 10px,\\n  #465298 10px,\\n  #465298 20px\\n);\\n```"},{title:"Studimi i Sfondit! ",content:"Krijoni n lodr:\\n1. Nj gradient nga e kaltr n e purpurt\\n2. Nj imazh sfond me overlay t errt\\n3. Nj model me viza duke prdorur repeating-gradient\\n4. Kombinim i ngjyrs sfond me transparenc\\n\\nSfondet vendosin tonin e dizajnit tuaj!"}]},8:{title:"Hijet CSS - Thellsi dhe Dimension",description:"Hijet shtojn thellsi dhe realizm! Msoni box-shadow dhe text-shadow pr t krijuar dizajne t hijezuara bukur profesionale. ",sections:[{title:"Hija e Kutis (Box Shadow)",content:"Shtoni hije tek elementet:\\n\\n**Sintaksa bazike:**\\n```css\\nbox-shadow: h-offset v-offset blur spread color;\\n```\\n\\n**Shembuj:**\\n```css\\nbox-shadow: 0 2px 4px rgba(0,0,0,0.1);           /* Hij e but */\\nbox-shadow: 0 10px 30px rgba(0,0,0,0.3);         /* Hij e thell */\\nbox-shadow: 0 0 20px rgba(255,0,0,0.5);          /* Shklqim */\\nbox-shadow: 5px 5px 10px #888888;               /* Hij offsetuar */\\n```\\n\\n**Hije t brendshme:**\\n```css\\nbox-shadow: inset 0 2px 4px rgba(0,0,0,0.2);     /* Brenda */\\n```"},{title:"Hija e Tekstit (Text Shadow)",content:"Hijezoni tekstin pr kontrast m t mir:\\n\\n```css\\ntext-shadow: 2px 2px 4px rgba(0,0,0,0.5);        /* Hij teksti */\\ntext-shadow: 0 0 10px #fff;                       /* Shklqim teksti */\\ntext-shadow: 1px 1px 2px black, 0 0 25px blue;   /* Hije t shumfishta */\\n```\\n\\n**Prdorime t zakonshme:**\\n Prmirsoni lexueshmrin n sfonde imazhi\\n Krijoni efekte shklqimi\\n Shtoni thellsi tek titujt\\n Bni tekst 3D"},{title:"Efekte t Shumfishta t Hijes",content:"Kombinoni hije t shumfishta pr efekte unike:\\n\\n**Hije t shtresuara:**\\n```css\\nbox-shadow:\\n  0 1px 3px rgba(0,0,0,0.12),\\n  0 1px 2px rgba(0,0,0,0.24);\\n```\\n\\n**Efekt Material Design:**\\n```css\\nbox-shadow:\\n  0 3px 6px rgba(0,0,0,0.16),\\n  0 3px 6px rgba(0,0,0,0.23);\\n```\\n\\n**Butona t ngritura:**\\n```css\\nbox-shadow: 0 4px 6px rgba(0,0,0,0.1);\\n```\\n```css\\nbox-shadow: 0 1px 3px rgba(0,0,0,0.12);  /* Hover */\\n```"},{title:"Laboratori i Hijes! ",content:"Krijoni:\\n1. Nj card me hij t but Material Design\\n2. Nj buton q ngrihet n hover (ndryshon hijen)\\n3. Nj titull me text-shadow pr shklqim\\n4. Nj efekt hije t brendshme pr input\\n\\n**Kshill Pro**: Prdorni hije t lehta pr nj pamje profesionale. Shum hij duket amatore!"}]},9:{title:"Display dhe Visibility - Sjellja e Elementeve",description:"Kontrolloni se si elementet shfaqen dhe sjellin n faqe! Kuptoni display, visibility dhe si kto prona ndikojn n layout. ",sections:[{title:"Prona Display",content:"Display kontrollon se si sillet nj element:\\n\\n```css\\ndisplay: block;          /* Merr gjrsin e plot */\\ndisplay: inline;         /* Rrjedh me tekstin */\\ndisplay: inline-block;   /* Rrjedh por pranon width/height */\\ndisplay: none;           /* Fshihet plotsisht */\\n```\\n\\n**Vlera moderne:**\\n```css\\ndisplay: flex;           /* Konteineri Flexbox */\\ndisplay: grid;           /* Konteineri Grid */\\n```\\n\\nDisplay none: elementi hiqet plotsisht nga layout!"},{title:"Visibility dhe Opacity",content:"Fshih elemente por ruaj hapsirn:\\n\\n**Visibility:**\\n```css\\nvisibility: visible;     /* I dukshm (default) */\\nvisibility: hidden;      /* I padukshm por merr hapsir */\\n```\\n\\n**Opacity:**\\n```css\\nopacity: 1;              /* Plotsisht opak */\\nopacity: 0.5;            /* 50% transparent */\\nopacity: 0;              /* Plotsisht transparent */\\n```\\n\\n**Dallimet:**\\n `display: none` - Hiqet nga layout\\n `visibility: hidden` - I padukshm por merr hapsir\\n `opacity: 0` - Transparent por ende interaktiv"},{title:"Block vs Inline vs Inline-Block",content:"Kuptoni sjelljet e ndryshme:\\n\\n**Block (div, p, h1):**\\n Merr gjrsin e plot t disponueshme\\n Fillon n rresht t ri\\n Pranon width, height, margin, padding\\n\\n**Inline (span, a, strong):**\\n Rrjedh me prmbajtjen\\n Nuk pranon width/height\\n Vetm padding/margin horizontal\\n\\n**Inline-block:**\\n Rrjedh si inline\\n Pranon width/height si block\\n Perfekt pr butona, karta t vogla"},{title:"Eksperimenti i Display! ",content:"Provoni n lodr:\\n1. Ndryshoni nj div nga block n inline dhe vini re ndryshimin\\n2. Bni nj navigim me display: inline-block\\n3. Krijoni nj modal q shfaqet/fshihet me display: none\\n4. Bni nj fade effect duke ndryshuar opacity\\n\\nKuptimi i display sht elsi i layouteve t mira!"}]},10:{title:"Position CSS - Pozicionimi i Elementeve",description:"Pozicionimi ju jep kontroll t plot mbi vendndodhjen e elementeve! Msoni static, relative, absolute, fixed dhe sticky positioning. ",sections:[{title:"Static - Pozicionimi Default",content:"Position: static sht default pr t gjith elementet:\\n\\n```css\\nposition: static;  /* Default - rrjedh normalisht */\\n```\\n\\n Elementet rrjedhin normalisht n dokument\\n Top, right, bottom, left nuk kan efekt\\n Nuk mund t prdorni z-index\\n Kjo sht sjellja normale e HTML"},{title:"Relative - Pozicionim i Lidhur",content:"Pozicionon n lidhje me vendin origjinal:\\n\\n```css\\nposition: relative;\\ntop: 20px;          /* Lviz 20px posht nga origjina */\\nleft: 30px;         /* Lviz 30px djathtas nga origjina */\\n```\\n\\n**Karakteristikat:**\\n Lviz nga pozicioni origjinal\\n Hapsira origjinale rezervohet\\n Krijuese pr container t pozicionuar absolutisht\\n Mund t prdorni z-index"},{title:"Absolute dhe Fixed",content:"**Absolute - pozicionim n lidhje me prindrin:**\\n```css\\nposition: absolute;\\ntop: 0;\\nright: 0;           /* Knd i siprm djathtas i prindrit */\\n```\\n Hiqet nga flow normal\\n Pozicionohet n lidhje me prindrin e pozicionuar\\n Nuk rezervon hapsir\\n\\n**Fixed - pozicionim n viewport:**\\n```css\\nposition: fixed;\\nbottom: 20px;\\nright: 20px;        /* Qndron gjat scroll */\\n```\\n Pozicionohet n lidhje me viewport\\n Qndron n vend gjat scroll\\n Perfekt pr headera, chat buttons"},{title:"Laboratori i Pozicionimit! ",content:"Krijoni:\\n1. Nj header fixed n krye t faqes\\n2. Nj badge absolute n knd t nj card\\n3. Nj element relative q lviz me hover\\n4. Nj buton floating me position: fixed\\n\\n**Z-index Tip**: Prdorni z-index pr t kontrolluar cili element shfaqet mbi t tjert!"}]},11:{title:"Flexbox - Layout Modern dhe i Prgjigshm",description:"Flexbox revolucionon layoutet CSS! Msoni t krijoni layout fleksibl, responsive me lehtsi t jashtzakonshme. ",sections:[{title:"Konteineri Flex - Fillimi",content:"Aktivizoni Flexbox n konteiner:\\n\\n```css\\ndisplay: flex;              /* Bhet konteineri flex */\\nflex-direction: row;        /* Horizontalisht (default) */\\nflex-direction: column;     /* Vertikalisht */\\n```\\n\\n**Drejtimet:**\\n `row` - Majtas n djathtas \\n `row-reverse` - Djathtas n majtas \\n `column` - Lart n posht \\n `column-reverse` - Posht n lart "},{title:"Rreshtimi dhe Justifikimi",content:"Kontrolloni si rreshtohen items:\\n\\n**Justify Content (boshti kryesor):**\\n```css\\njustify-content: flex-start;    /* Start (default) */\\njustify-content: center;        /* Qendror */\\njustify-content: space-between; /* Hapsir mes */\\njustify-content: space-around;  /* Hapsir rreth */\\n```\\n\\n**Align Items (boshti kryq):**\\n```css\\nalign-items: stretch;           /* Shtriht (default) */\\nalign-items: center;            /* Qendror vertikalisht */\\nalign-items: flex-start;        /* Lart */\\nalign-items: flex-end;          /* Posht */\\n```"},{title:"Item-at Flex - Kontrolli Individual",content:"Kontrolloni items individualisht:\\n\\n**Flex Grow:**\\n```css\\nflex-grow: 1;     /* Rritet pr t mbushur hapsirn */\\n```\\n\\n**Flex Shrink:**\\n```css\\nflex-shrink: 0;   /* Nuk tkurret */\\n```\\n\\n**Flex Basis:**\\n```css\\nflex-basis: 200px;  /* Madhsia fillestare */\\n```\\n\\n**Shkurtore Flex:**\\n```css\\nflex: 1 0 200px;    /* grow shrink basis */\\n```"},{title:"Projekti Flexbox! ",content:"Ndrtoni n lodr:\\n1. Nj navbar me logo majtas dhe menu djathtas\\n2. Nj card grid me flex-wrap\\n3. Nj footer me kolona t barabarta\\n4. Nj hero section me qendrizim vertikal dhe horizontal\\n\\nFlexbox sht fuqia super pr layouts moderne!"}]},12:{title:"Animacionet dhe Transicionet CSS",description:"Sjellni dizajnin tuaj n jet me animacione dhe transicione t hijshme! Krijoni lvizje dhe efekte t bukura pa JavaScript. ",sections:[{title:"Transicionet CSS - Ndryshime t Hijshme",content:"Transicionet bjn ndryshimet e hijshme:\\n\\n```css\\ntransition: property duration timing-function delay;\\n```\\n\\n**Shembuj:**\\n```css\\ntransition: all 0.3s ease;                /* T gjitha pronat */\\ntransition: background-color 0.5s;        /* Vetm sfond */\\ntransition: transform 0.3s ease-in-out;   /* Transform me easing */\\n```\\n\\n**Timing functions:**\\n `ease` - Fillim i ngadalt, i shpejt, fund i ngadalt\\n `linear` - Shpejtsi konstante\\n `ease-in` - Fillim i ngadalt\\n `ease-out` - Fund i ngadalt"},{title:"Transformimet - Rrotullim, Shkallzim, Zhvendosje",content:"Transformoni elementet n mnyra t ndryshme:\\n\\n**Zhvendosje (Translate):**\\n```css\\ntransform: translateX(100px);     /* Lviz djathtas */\\ntransform: translateY(-50px);     /* Lviz lart */\\ntransform: translate(50px, 100px);/* X dhe Y */\\n```\\n\\n**Shkallzim (Scale):**\\n```css\\ntransform: scale(1.5);            /* 150% m i madh */\\ntransform: scale(0.8);            /* 80% m i vogl */\\n```\\n\\n**Rrotullim (Rotate):**\\n```css\\ntransform: rotate(45deg);         /* Rrotullon 45 */\\ntransform: rotate(-90deg);        /* Kundror */\\n```"},{title:"Animacionet me @keyframes",content:"Krijoni animacione komplekse me keyframes:\\n\\n```css\\n@keyframes slide-in {\\n  0% {\\n    transform: translateX(-100%);\\n    opacity: 0;\\n  }\\n  100% {\\n    transform: translateX(0);\\n    opacity: 1;\\n  }\\n}\\n\\n.animated {\\n  animation: slide-in 0.5s ease-out;\\n}\\n```\\n\\n**Prona t animacionit:**\\n```css\\nanimation-name: slide-in;\\nanimation-duration: 1s;\\nanimation-iteration-count: infinite;  /* Prsrit */\\nanimation-direction: alternate;       /* Prpara-mbrapa */\\n```"},{title:"Studioni e Animacionit! ",content:"Krijoni:\\n1. Nj buton q zmadhohet me hover (scale)\\n2. Nj card q slid in kur ngarkohet faqja\\n3. Nj animacion loading spinner me rotate\\n4. Nj fade-in effect me opacity dhe transform\\n\\n**Kshill Pro**: Prdorni `will-change` pr animacione m t hijshme!\\n\\n```css\\nwill-change: transform;\\n```"}]}},arduino:{1:{title:"Fillimi me Arduino Uno",description:"Mir se vini te Arduino! Msoni pr bordin Arduino Uno, kuptoni komponentt e tij dhe shkruani programin tuaj t par. Arduino e bn elektronikn argtuese dhe t leht! ",sections:[{title:"far sht Arduino?",content:"Arduino sht nj **bord mikrokontrolleri** q e bn elektronikn dhe programimin t akses pr t gjith!\\n\\n**Karakteristika Kryesore:**\\n Kompjuter i vogl q mund ta programoni\\n 14 pine hyrje/dalje dixhitale\\n 6 pine hyrje analoge\\n Lidhje USB pr programim\\n Tension operimi 5V\\n Perfekt pr t msuar elektronik!\\n\\nMendojeni si nj tru t vogl q mund t kontrolloj drita, motor, sensor dhe m shum!"},{title:"Komponentt e Bordit Arduino",content:"**Pjest Kryesore t Arduino Uno:**\\n\\n **Porta USB**: Lidhuni me kompjuterin pr programim\\n **Power Jack**: Furnizim energjie t jashtme 7-12V\\n **Pine Dixhitale (0-13)**: Lexoni/shkruani sinjale HIGH ose LOW\\n **Pine Analoge (A0-A5)**: Lexoni vlerat e sensorve (0-1023)\\n **Pine GND**: Lidhje toksimi (0V)\\n **Pine 5V & 3.3V**: Pine furnizimi energjie\\n **Butoni Reset**: Rinis programin tuaj\\n **LED_BUILTIN**: LED e integruar n pin 13"},{title:"Bazat e Programimit Arduino",content:"Arduino prdor nj gjuh t ngjashme me C/C++. do program ka dy funksione kryesore:\\n\\n**setup()**: Ekzekutohet nj her kur fillon Arduino\\n```cpp\\nvoid setup() {\\n  // Inicializoni pinet, sensort, etj.\\n  pinMode(13, OUTPUT);\\n}\\n```\\n\\n**loop()**: Ekzekutohet vazhdimisht prgjithmon\\n```cpp\\nvoid loop() {\\n  // Kodi kryesor i programit tuaj\\n  digitalWrite(13, HIGH);\\n  delay(1000);\\n}\\n```"},{title:"Provoje Vet! ",content:"N lodrn e kodit, do t shihni nj program t thjesht pr LED q ndizet e fik:\\n\\n1. **pinMode()**: Vendos pin 13 si OUTPUT\\n2. **digitalWrite()**: Ndez LED ON (HIGH) ose OFF (LOW)\\n3. **delay()**: Pret pr milisekonda t specifikuara\\n\\n**Eksperimentoni:**\\n Ndryshoni delay(1000) n delay(500) pr vezullim m t shpejt\\n Provoni delay(100) pr vezullim shum t shpejt\\n Prdorni vlera t ndryshme delay pr HIGH dhe LOW\\n\\nKy program i thjesht sht themeli i t gjitha projekteve Arduino!"}]},2:{title:"Vezullimi i LED - Programi Juaj i Par Arduino",description:"Ndrtoni qarqen tuaj t par! Msoni si t lidhni nj LED me Arduino dhe ta kontrolloni me kod. Ktu takohett harduer-i me softuer-in! ",sections:[{title:"Komponentt q ju Nevojiten",content:"**Lista e Pjesve:**\\n Bordi Arduino Uno\\n 1 LED (fardo ngjyre)\\n 1 rezistenc (220 - 330)\\n Tela lidhse\\n Breadboard (opsionale)\\n\\n**Bazat e LED:**\\n LED-t kan dy kmb: **anode (+)** kmba e gjat dhe **cathode (-)** kmba e shkurtr\\n Gjithmon prdorni nj rezistenc pr t parandaluar djegien e LED\\n Rrymori rrjedh nga anode te cathode"},{title:"Lidhja e Qarkut LED",content:"**Lidhja Hap-pas-Hapi:**\\n\\n1. **Kmba e gjat LED (anode)**  Lidheni me **Pin 8**\\n2. **Kmba e shkurtr LED (cathode)**  Lidheni me **rezistenc 220**\\n3. **Fundi tjetr i rezistencs**  Lidheni me **GND (Ground)**\\n\\n**Pse rezistenc?**\\nPinet Arduino japin 5V, por LED-t zakonisht kan nevoj vetm 2-3V. Rezistenca kufizon rrymn pr t mbrojtur LED-in.\\n\\n**Kshill**: LED-t e kuqe kan nevoj ~2V, LED-t Blu/T bardha ~3V"},{title:"Kuptimi i Kodit",content:"**Shpjegimi i Kodit:**\\n\\n```cpp\\nint ledPin = 8;  // Variabla ruan numrin e pin\\n```\\nKrjon nj variabl pr t mbajtur mend se n cilin pin sht LED\\n\\n```cpp\\npinMode(ledPin, OUTPUT);\\n```\\nI tregon Arduino se pin 8 do t drgoj sinjale OUT\\n\\n```cpp\\ndigitalWrite(ledPin, HIGH);  // 5V n pin\\ndigitalWrite(ledPin, LOW);   // 0V n pin\\n```\\nHIGH = LED ON, LOW = LED OFF\\n\\n```cpp\\ndelay(500);  // Pret 500 milisekonda\\n```\\nPauzon programin (1000ms = 1 sekond)"},{title:"Eksperimente pr t Provuar! ",content:"**Sfidoni veten:**\\n\\n1. **Kodi Morse**: Krijoni modelin SOS (3 vezullime t shkurtra, 3 t gjata, 3 t shkurtra)\\n2. **Semafori**: Simuloni nj sekuenc semafori\\n3. **LED t Shumfishta**: Lidhni LED n pine 8, 9, 10 dhe krijoni modele\\n4. **Rrahje Zemre**: Bni LED t zbehet dhe ndizet si rrahje zemre\\n\\n**Zgjidhja e Problemeve:**\\n LED nuk ndizet? Kontrolloni polaritetin (kmba e gjat te pin)\\n LED shum e dobt? Kontrolloni vlern e rezistencs\\n LED u dogj? Harruat rezistencn?"}]},3:{title:"Kuptimi i Hyrjeve Dixhitale dhe Butonave",description:"Bjeni Arduino-n tuaj interaktive! Msoni t lexoni shtypjet e butonave dhe t prgjigjeni ndaj hyrjes s prdoruesit. Kjo hap mundsi t pafundme! ",sections:[{title:"Hyrjet Dixhitale t Shpjeguara",content:"**INPUT vs OUTPUT:**\\n\\n **OUTPUT**: Arduino drgon sinjale (kontrollon LED, motor)\\n **INPUT**: Arduino merr sinjale (lexon butona, sensor)\\n\\n**Gjendjet e Hyrjes Dixhitale:**\\n **HIGH**: 5V detektuar (butoni nuk sht shtypur me pullup)\\n **LOW**: 0V detektuar (butoni sht shtypur me pullup)\\n\\n**INPUT_PULLUP Mnyra:**\\nAktivizon rezistorin e brendshm q trheq pinin HIGH kur butoni nuk sht shtypur. Kur butoni shtypet, pini shkon LOW."},{title:"Lidhja e nj Butoni Shtyps",content:"**Qark i Thjesht Butoni:**\\n\\n1. **Nj terminal butoni**  **Pin 2** n Arduino\\n2. **Terminali tjetr i butonit**  **GND** (Ground)\\n3. Prdorni mnyrn **INPUT_PULLUP** (nuk ka nevoj pr rezistor t jashtm!)\\n\\n**Si Funksionon:**\\n Butoni nuk sht shtypur: Pini 2 lexon HIGH (5V nga pullup i brendshm)\\n Butoni shtypur: Pini 2 lidhet me GND, lexon LOW (0V)\\n\\n**Pse INPUT_PULLUP?**\\nThjeshton lidhjen duke prdorur rezistorin e brendshm 20k pullup t Arduino!"},{title:"Leximi i Gjendjeve t Butonit",content:'**Funksioni digitalRead():**\\n```cpp\\nint buttonState = digitalRead(buttonPin);\\n```\\nKthe HIGH ose LOW bazuar n tensionin n pin\\n\\n**Logjika Kushtuese:**\\n```cpp\\nif (buttonState == LOW) {\\n  // Butoni sht shtypur\\n  digitalWrite(ledPin, HIGH);\\n} else {\\n  // Butoni sht lshuar\\n  digitalWrite(ledPin, LOW);\\n}\\n```\\n\\n**Monitori Serial:**\\n```cpp\\nSerial.begin(9600);           // Fillo komunikimin\\nSerial.println(\\"Butoni Shtypur\\");  // Printo mesazh\\n```\\nShikoni mesazhet n Serial Monitor t Arduino IDE'},{title:"Projekte Interaktive! ",content:"**Provoni Kto Ide:**\\n\\n1. **els Toggle**: Shtypni butonin pr t ndezur LED-in ON, shtypni prsri pr OFF\\n2. **Numrues**: Numroni shtypjet e butonit dhe shfaqni n Serial Monitor\\n3. **Loj Reagimi**: LED ndrion rastsisht, shtypni butonin shpejt\\n4. **Dy Butona**: Prdorni dy butona pr t kontrolluar LED t ndryshm\\n5. **Shtypje e Gjat**: Veprim i ndryshm pr shtypje t shkurtr vs t gjat\\n\\n**Kshill Debouncing:**\\nButonat mund t prodhojn sinjale t shumta t shpejta. Shtoni delay(50) ose prdorni bibliotek debounce pr lexime t pastra."}]},4:{title:"Sensor Analog dhe Leximi i t Dhnave",description:"Lexoni vlera nga bota reale! Msoni rreth sensorve analog, PWM dhe si t prpunoni t dhnat nga bota fizike. ",sections:[{title:"Analoge vs Dixhitale",content:"**Dixhitale**: Vetm dy gjendje (HIGH/LOW, ON/OFF)\\n Butona, elsa\\n Ose 0V ose 5V\\n\\n**Analoge**: Gam vlerash\\n Potenciometra, sensor temperature, sensor drite\\n do tension ndrmjet 0V dhe 5V\\n Arduino lexon si numra 0-1023\\n\\n**Pinat Analoge (A0-A5):**\\nArduino Uno ka 6 pina hyrjeje analoge q mund t matjn nivelet e tensionit me rezolucion 10-bit (1024 vlera t mundshme)"},{title:"Lidhja e nj Potenciometri",content:"**Potenciometri (Rezistor i Ndryshueshm):**\\nNj buton q ndryshon rezistencn kur e rrotulloni\\n\\n**Lidhja e Tre Pinave:**\\n1. **Pini i majt**  **5V** (furnizim energjie)\\n2. **Pini i mesit**  **A0** (hyrje analoge)\\n3. **Pini i djatht**  **GND** (tok)\\n\\n**Si Funksionon:**\\nRrotullimi i butonit ndryshon tensionin n pinin e mesit nga 0V n 5V. Arduino e lexon kt si vler nga 0 n 1023.\\n\\n**Kshill**: Orientimi i potenciometrit nuk ka rndsi; nse vlerat jan mbrapsht, shkmbeni lidhjet 5V dhe GND!"},{title:"Leximi i Vlerave Analoge",content:"**Funksioni analogRead():**\\n```cpp\\nint sensorValue = analogRead(A0);\\n// Kthe 0-1023 (rezolucion 10-bit)\\n```\\n\\n**PWM - analogWrite():**\\n```cpp\\nanalogWrite(ledPin, 128);  // 50% shklqim\\n// Vlerat 0-255 (0=OFF, 255=FULL)\\n```\\n\\n**Mapimi i Vlerave:**\\n```cpp\\nbrightness = map(sensorValue, 0, 1023, 0, 255);\\n// Konverton gamn 0-1023 n gamn 0-255\\n```\\n\\n**Pinat PWM:**\\nVetm pinat 3, 5, 6, 9, 10, 11 mbshtesin analogWrite() (shnuar me simbolin ~)"},{title:"Projekte Sensorsh! ",content:"**Provoni Kto Sensor:**\\n\\n1. **Sensor Drite (LDR)**: Drit automatike nate\\n2. **Sensor Temperature (TMP36)**: Termometr dixhital\\n3. **Sensor Prkulje**: Kontroll gjestesh\\n4. **Sensor Lagshti Toke**: Kujtes ujitje bimsh\\n5. **Modul Joystick**: Kontroller lojrash\\n\\n**Eksperimente:**\\n Kontrollo kndin e motorit servo me potenciometr\\n Ndrysho ngjyrn e LED RGB bazuar n vlerat e sensorit\\n Krijo nj mats niveli zri me mikrofon\\n Ndrto nj pajisje matse distance me sensor ultrasonik"}]},5:{title:"Kontrolli i Motorve dhe Lvizjes",description:"Jepuni jet projekteve tuaja me lvizje! Msoni t kontrolloni motor DC, motor servo dhe t krijoni robot. ",sections:[{title:"Llojet e Motorve",content:"**Motor DC:**\\n Rrotullim i vazhdueshm\\n Shpejtsi e ndryshueshme (kontroll PWM)\\n Prdoret pr rrota, ventilator, pompa\\n Krkon driver motori (L298N, L293D)\\n\\n**Motor Servo:**\\n Kontroll i sakt kndi (0-180)\\n Prdoret pr krah roboti, montimi kamerash\\n Lidhje e drejtprdrejt me Arduino\\n\\n**Motor Hapi:**\\n Pozicionim shum i sakt\\n Prdoret pr printera 3D, makineri CNC\\n Krkon driver hapi\\n\\n**Pse Driver Motorsh?**\\nPinat Arduino mund t japin vetm 40mA. Motort kan nevoj pr 100mA-1A ose m shum, kshtu q prdorim driver motorsh pr t trajtuar rrymn e lart."},{title:"Lidhja e Driver Motorit L298N",content:"**Lidhjet e Modulit L298N:**\\n\\n**Energjia:**\\n **12V**  Furnizim i jashtm energjie (6-12V)\\n **GND**  Tok e prbashkt (Arduino GND + Furnizim energjie GND)\\n **5V**  Arduino 5V (nse ka jumper)\\n\\n**Motori:**\\n **OUT1 & OUT2**  Terminalet e motorit\\n\\n**Pinat e Kontrollit:**\\n **IN1**  Arduino Pin 8 (drejtim)\\n **IN2**  Arduino Pin 9 (drejtim)\\n **ENA**  Arduino Pin 10 (shpejtsi PWM)\\n\\n**Kontrolli i Drejtimit:**\\n IN1=HIGH, IN2=LOW  Prpara\\n IN1=LOW, IN2=HIGH  Mbrapsht\\n T dyja LOW ose HIGH  Ndal"},{title:"Kodi i Kontrollit t Motorit",content:"**Kontrolli i Shpejtsis (PWM):**\\n```cpp\\nanalogWrite(enablePin, 200);  // 78% shpejtsi\\nanalogWrite(enablePin, 0);    // Ndal\\nanalogWrite(enablePin, 255);  // Shpejtsi e plot\\n```\\n\\n**Kontrolli i Drejtimit:**\\n```cpp\\n// Prpara\\ndigitalWrite(motorPin1, HIGH);\\ndigitalWrite(motorPin2, LOW);\\n\\n// Mbrapsht\\ndigitalWrite(motorPin1, LOW);\\ndigitalWrite(motorPin2, HIGH);\\n\\n// Fren\\ndigitalWrite(motorPin1, HIGH);\\ndigitalWrite(motorPin2, HIGH);\\n```\\n\\n**Kshill Pro:**\\nPrdorni funksione pr t thjeshtuar kodin tuaj:\\n```cpp\\nvoid moveForward(int speed) {\\n  digitalWrite(motorPin1, HIGH);\\n  digitalWrite(motorPin2, LOW);\\n  analogWrite(enablePin, speed);\\n}\\n```"},{title:"Projekte Motorsh! ",content:"**Ndrtoni Kto Projekte:**\\n\\n1. **Makin Robot e Thjesht**: Dy motor, shmangje pengesash\\n2. **Kontrollues Shpejtsie Ventilatori**: Potenciometri rregullon shpejtsin e ventilatorit\\n3. **Perdet Automatike**: Sensori i drits kontrollon motorin\\n4. **Krah Robotik**: Motor servo pr lvizje t sakt\\n5. **Robot Ndjeks Vije**: Sensort udhzojn drejtimin e motorit\\n\\n**Kshilla Sigurie:**\\n Gjithmon prdorni energji t veant pr motort (jo USB)\\n Lidhni tokat s bashku\\n Shtoni dioda flyback pr t mbrojtur Arduino\\n Filloni me vlera t ulta shpejtsie kur testoni\\n Mos lidhni kurr motorin drejtprdrejt me pinin e Arduino!"}]},6:{title:"Puna me Ekrane LCD",description:"Shfaqni informacion bukur! Msoni t prdorni ekrane LCD pr t shfaqur tekst, numra dhe pr t krijuar ndrfaqe prdoruesi. ",sections:[{title:"Llojet e Ekraneve LCD",content:"**LCD Karaktere 16x2:**\\n Shfaq 16 karaktere pr rresht, 2 rreshta\\n Perfekt pr tekst dhe numra\\n M i zakonshm dhe i perballueshm\\n\\n**Modul LCD I2C:**\\n Duhen vetm 4 tela (vs 16 tela!)\\n Prdor protokollin e komunikimit I2C\\n M e leht pr t'u lidhur dhe prdorur\\n **Rekomandohet pr fillestar**\\n\\n**Ekran OLED:**\\n M i mpreht, m me ngjyra\\n Mund t shfaq grafika dhe imazhe\\n M i shtrenjt por shum i bukur"},{title:"Lidhja LCD I2C",content:"**Lidhje Super e Thjesht 4-Telave:**\\n\\n1. **VCC**  Arduino **5V**\\n2. **GND**  Arduino **GND**\\n3. **SDA**  Arduino **A4** (t dhnat I2C)\\n4. **SCL**  Arduino **A5** (ora I2C)\\n\\n**Kaq!** I2C ju kursen nga lidhja e 16 pinave!\\n\\n**Adresa I2C:**\\nShumica e LCD I2C prdorin adresn 0x27 ose 0x3F. Nse LCD-ja juaj nuk funksionon, provoni adresn tjetr n kod:\\n```cpp\\nLiquidCrystal_I2C lcd(0x3F, 16, 2);\\n```\\n\\n**Gjeni Adresn I2C:**\\nEkzekutoni nj sketch skanimi I2C pr t gjetur adresn e LCD-s tuaj automatikisht."},{title:"Programimi i LCD",content:'**Biblioteka e Krkuar:**\\n```cpp\\n#include <Wire.h>\\n#include <LiquidCrystal_I2C.h>\\n```\\nInstaloni prmes Arduino IDE: Sketch  Include Library  Manage Libraries  Krkoni \\"LiquidCrystal I2C\\"\\n\\n**Komanda Bazike:**\\n```cpp\\nlcd.init();              // Fillo LCD\\nlcd.backlight();         // Ndiz dritn e pasme\\nlcd.noBacklight();       // Fik dritn e pasme\\nlcd.clear();             // Pastro ekranin\\nlcd.setCursor(col, row); // Poziciono kursorin\\nlcd.print(\\"Prshndetje\\");     // Shfaq tekst\\nlcd.print(42);           // Shfaq numr\\n```\\n\\n**Pozicioni i Kursorit:**\\n Kolonat: 0-15 (majtas n djathtas)\\n Rreshtat: 0-1 (lart n posht)'},{title:"Projekte Ekrani LCD! ",content:"**Ide Projektesh Kreative:**\\n\\n1. **Termometr Dixhital**: Shfaq temperaturn nga sensori\\n2. **Kohmats Countdown**: Trego kohn e mbetur\\n3. **Or Inteligjente**: Shfaq kohn nga moduli RTC\\n4. **Dashboard Sensorsh**: Trego lexime t shumta sensorsh\\n5. **Sistem Menuje**: Krijo menu interaktive me butona\\n6. **Shfaqje Rezultati Loj**: Ndrto nj loj t thjesht\\n7. **Makin Kuotimesh**: Rrotull mesazhe frymzuese\\n\\n**Teknika t Avancuara:**\\n Krijo karaktere t personalizuara (zemra, shigjeta, ikona)\\n Tekst q lviz pr mesazhe t gjata\\n Animacion me karaktere t personalizuara\\n Shfaqje regjistrimi t dhnash n koh reale"}]},7:{title:"Ndrtimi i nj Monitori Temperature",description:"Krijoni nj projekt t plot IoT! Ndrtoni nj sistem monitorimi temperature dhe lagshtie me alerta vizuale. ",sections:[{title:"Sensori i Temperaturs DHT11",content:"**Veorit e Sensorit DHT11:**\\n Mat temperaturn (0-50C)\\n Mat lagshtin (20-80%)\\n Dalje dixhitale (e leht pr lexim)\\n Shum i prballueshm dhe popullor\\n Mjaftueshm i sakt pr projekte shtpie\\n\\n**Pinat e Sensorit:**\\n **VCC**  5V ose 3.3V\\n **GND**  Ground\\n **Data**  Pin dixhital (me rezistor pullup 10k)\\n\\n**Alternativa: DHT22**\\nM i sakt dhe gam m e gjer, por m i shtrenjt:\\n Temperatur: -40 deri 80C (0.5C)\\n Lagshti: 0-100% (2-5%)\\n E njjta lidhje dhe kod!"},{title:"Lidhja e Sistemit t Plot",content:"**Sensori DHT11:**\\n1. **VCC**  Arduino **5V**\\n2. **GND**  Arduino **GND**\\n3. **Data**  Arduino **Pin 7**\\n4. **Rezistor 10k** ndrmjet VCC dhe Data (pullup)\\n\\n**Treguesit LED:**\\n **LED Jeshil**  Pin 8 (+ rezistor 220  GND)\\n **LED Verdh**  Pin 9 (+ rezistor 220  GND)\\n **LED e Kuqe**  Pin 10 (+ rezistor 220  GND)\\n\\n**Kuptimet e LED:**\\n Jeshil = Freskt (< 20C)\\n Verdh = Rehat (20-28C)\\n E Kuqe = Nxeht (> 28C)\\n\\nPersonalizoni pragun e temperaturs pr mjedisin tuaj!"},{title:"Leximi i t Dhnave t Sensorit",content:'**Instalimi i Biblioteks DHT:**\\nArduino IDE  Sketch  Include Library  Manage Libraries  Krkoni \\"DHT sensor library\\" nga Adafruit\\n\\n**Inicializoni Sensorin:**\\n```cpp\\n#include <DHT.h>\\n#define DHTPIN 7\\n#define DHTTYPE DHT11\\nDHT dht(DHTPIN, DHTTYPE);\\ndht.begin();\\n```\\n\\n**Lexoni Temperaturn dhe Lagshtin:**\\n```cpp\\nfloat temp = dht.readTemperature();    // Celsius\\nfloat tempF = dht.readTemperature(true); // Fahrenheit\\nfloat humidity = dht.readHumidity();    // Prqindje\\n```\\n\\n**Kontroll Gabimi:**\\n```cpp\\nif (isnan(temp)) {\\n  Serial.println(\\"Gabim leximi sensori!\\");\\n}\\n```'},{title:"Zgjeroni Projektin Tuaj! ",content:"**Ide Prmirsimi:**\\n\\n1. **Shto Ekran LCD**: Trego temperaturn dhe lagshtin\\n2. **Regjistrimi i t Dhnave**: Ruaj leximet n kart SD\\n3. **Modul WiFi**: Drgo t dhna n smartphone\\n4. **Alarm Buzzer**: Tingull alarmi kur shum nxeht/ftoht\\n5. **Sensor t Shumt**: Monitoro dhoma t ndryshme\\n6. **LED RGB**: Gradient ngjyre bazuar n temperatur\\n7. **Kontroll Ventilatori**: Ventilator automatik kur temperatura rritet\\n\\n**Aplikime Bote Reale:**\\n Termostat inteligjent\\n Monitorim serr\\n Alarm temperatur dhome serveri\\n Kontroll klime terrariumi\\n Monitorim ruajtje ushqimi\\n Stacion moti"}]},8:{title:"Motor Servo dhe Kontroll i Sakt",description:"Msoni t kontrolloni motor servo pr lvizje kndore t sakta! Krijoni projekte si krah robotik, dyer automatike dhe gimbal kamerave. ",sections:[{title:"far sht nj Motor Servo?",content:"**Prmbledhje Motorsh Servo:**\\n\\nMotori servo sht nj motor precizioni q mund t rrotullohet n knde specifike me saktsi t lart.\\n\\n**Ndryshimet Kye nga Motort DC:**\\n **Motor DC**: Rrotullon vazhdimisht, kontroll shpejtsie\\n **Motor Servo**: Kontroll pozicioni t sakt (0-180)\\n\\n**Prdorime t Zakonshme:**\\n Krah dhe nyje robotsh\\n Drejtimi i makinave RC\\n Gimbal kamerash\\n Dyer automatike\\n Mekanizma pan-tilt\\n Duar robotike\\n\\n**Avantazhet:**\\n Kontroll shum i sakt kndi\\n Mban pozicionin me tork\\n I leht pr programim\\n I prballueshm ($2-5)"},{title:"Lidhja e Motorit Servo",content:"**Servo Standard ka 3 Tela:**\\n\\n **E Kuqe**  Energjia (5V nga Arduino)\\n **Kafe/E Zez**  Ground (GND)\\n **Portokalli/E Verdh**  Sinjalit (pin PWM)\\n\\n**Lidhja me Arduino:**\\n```\\nTeli Servo        Arduino\\nE Kuqe (Power)       5V\\nKafe (GND)       GND\\nPortokalli            Pin 9 (PWM)\\n```\\n\\n**Shnime t Rndsishme:**\\n Servo-t mund t trheqin rrym t lart - prdorni furnizim 5V t jashtm pr servo t shumta\\n Gjithmon lidhni GND ndrmjet Arduino dhe energjis s jashtme\\n Prdorni pina t aft PWM (3, 5, 6, 9, 10, 11)\\n Mbajini telat t shkurtra pr t reduktuar ndrhyrjen"},{title:"Programimi i Motorve Servo",content:"**Bazat e Biblioteks Servo:**\\n\\n**1. Prfshini Bibliotekn:**\\n```cpp\\n#include <Servo.h>\\n```\\n\\n**2. Krijoni Objekt Servo:**\\n```cpp\\nServo myServo;\\n```\\n\\n**3. Lidheni me Pin:**\\n```cpp\\nvoid setup() {\\n  myServo.attach(9);  // Pin 9\\n}\\n```\\n\\n**4. Kontrolloni Pozicionin:**\\n```cpp\\nmyServo.write(90);   // Lviz n 90 grad\\ndelay(1000);         // Prit 1 sekond\\nmyServo.write(0);    // Lviz n 0 grad\\n```\\n\\n**Gama Kndi:**\\n **0** = Plotsisht majtas/kundror\\n **90** = Pozicioni qendror\\n **180** = Plotsisht djathtas/orarin"},{title:"Projekte dhe Ide Servo ",content:"**Projekte Fillestar:**\\n\\n1. **Dry Automatike**\\n    Servo rrotullon pr t bllokuar/shbllokur\\n    Kontroll butoni ose tastier\\n\\n2. **Ushqyes Kafshsh Shtpiake**\\n    Servo hap dhnsin e ushqimit\\n    Koh ushqimi t programuara\\n\\n3. **Gjurmues Paneli Diellor**\\n    Servo rregullon kndin e panelit\\n    Ndjek diellin pr efikasitet maksimal\\n\\n4. **Kamer Pan-Tilt**\\n    Dy servo (boshti X dhe Y)\\n    Kontroll nga distanca ose ndjekje lvizjeje\\n\\n5. **Krah Roboti**\\n    Servo t shumta pr nyje\\n    Merr dhe vendos objekte\\n\\n**Kshilla:**\\n Filloni me projekte nj servo\\n Shtoni sensor pr automatizim\\n Kombinoni me komponente t tjera\\n Prdorni printim 3D pr pjes mekanike"}]},9:{title:"Sensor Distance Ultrasonik",description:"Matni distanca pa prekur! Msoni si funksionojn sensort ultrasonik pr t detektuar objekte dhe matjen e distancs - t prsosur pr robot dhe automatizim. ",sections:[{title:"Si Funksionojn Sensort Ultrasonik",content:"**Sensori Ultrasonik HC-SR04:**\\n\\nFunksionon si nj lakuriq nate duke prdorur ekolokim!\\n\\n**Procesi:**\\n1. **Pin Trigger** drgon val tinglli ultrasonike (40kHz)\\n2. Tingulli kthehet nga objektet\\n3. **Pin Echo** merr tingullin e reflektuar\\n4. Llogarit distancn nga koha e udhtimit\\n\\n**Formula:**\\n```\\nDistanca (cm) = (Koha  Shpejtsia e Tingullit) / 2\\nDistanca = (kohzgjatja  0.034) / 2\\n```\\n\\n**Gama:**\\n Minimum: 2cm\\n Maksimum: 400cm (4 metra)\\n Saktsia: 3mm\\n\\n**Avantazhet:**\\n Matje pa kontakt\\n I qndrueshm ndaj motit\\n Shum i prballueshm ($2-3)"},{title:"Lidhjet e Sensorit",content:"**HC-SR04 ka 4 pina:**\\n\\n**VCC**  Arduino 5V\\n**GND**  Arduino GND\\n**Trig**  Arduino Pin 9 (do pin dixhital)\\n**Echo**  Arduino Pin 10 (do pin dixhital)\\n\\n**Kshilla Lidhje:**\\n Nuk ka nevoj pr rezistor pr Arduino 5V\\n Pr pllaka 3.3V, prdorni pjestues tensioni n pin Echo\\n Mbajini telat arsyeshm t shkurtr\\n Sensori funksionon m mir n siprfaqe t sheshta\\n\\n**Montimi:**\\n Orientoni sensorin prpara (shmangni pengesa)\\n Rrezet ultrasonike prhapen n kon 15\\n Materiale t buta (plhur, shkum) thithin tingullin\\n Siprfaqet e forta reflektojn m mir"},{title:"Kodi i Matjes s Distancs",content:"**Proces Hap-pas-Hapi:**\\n\\n**1. Drgo Puls Trigger:**\\n```cpp\\ndigitalWrite(trigPin, LOW);\\ndelayMicroseconds(2);\\ndigitalWrite(trigPin, HIGH);\\ndelayMicroseconds(10);  // Puls 10s\\ndigitalWrite(trigPin, LOW);\\n```\\n\\n**2. Lexo Kohn Echo:**\\n```cpp\\nlong duration = pulseIn(echoPin, HIGH);\\n// Kthe kohn n mikrosekonda\\n```\\n\\n**3. Llogarit Distancn:**\\n```cpp\\nint distanceCm = duration * 0.034 / 2;\\nint distanceInch = duration * 0.0133 / 2;\\n```\\n\\n**Pse pjestim me 2?**\\nTingulli udhton deri te objekti DHE kthehet = distanc e dyfishuar"},{title:"Projekte Ultrasonike ",content:"**Ide Projektesh t Mrekullueshme:**\\n\\n1. **Sensor Parkimi**\\n    Bip m shpejt kur makina afrohet\\n    Tregues LED pr distanc\\n\\n2. **Kosh Plehrash Automatike**\\n    Kapaku hapet kur dora zbulohet\\n    Funksionim pa prekje\\n\\n3. **Navigim Roboti**\\n    Shmangje pengesash\\n    Ndjekje muri\\n    Lvizje autonome\\n\\n4. **Monitor Niveli Ujit**\\n    Mat nivelin e lngut n rezervuar\\n    Drgon alerta kur sht i ult\\n\\n5. **Sistem Sigurie**\\n    Zbulo ndrhyrsit\\n    Numro njerzit q hyjn/dalin\\n\\n6. **Kontroll Gjeste Dore**\\n    Kontrollo pajisje me distancn e dors\\n    Kontrolli i volumit, shklqimit, etj.\\n\\n**Kombinoni me:**\\n Motor servo pr pan/tilt\\n LCD pr shfaqje distance\\n Buzzer pr alerta afrsie"}]},10:{title:"Buzzers Piezo dhe Gjenerimi i Tingullit",description:"Krijoni muzik dhe efekte zanore! Msoni t kontrolloni buzzer piezo pr t krijuar tone, melodit dhe alerta audio pr projektet tuaja. ",sections:[{title:"far sht nj Buzzer Piezo?",content:"**Bazat e Buzzer Piezo:**\\n\\nNj pajisje elektronike e vogl q prodhon tingull kur aplikohet elektricitet.\\n\\n**Dy Lloje:**\\n\\n**1. Buzzer Aktiv:**\\n Ka oscilator t brendshm\\n Bn ton fiks (bip)\\n Vetm lidh energjin (HIGH/LOW)\\n M i thjesht por m pak fleksibl\\n\\n**2. Buzzer Pasiv:**\\n Nuk ka oscilator t brendshm\\n Krkon sinjal PWM\\n Mund t luaj tone t ndryshme\\n M fleksibl (muzik!)\\n\\n**Si Funksionojn Buzzer Pasiv:**\\n Sinjali PWM dridh disk qeramik\\n Frekuenca t ndryshme = nota t ndryshme\\n Funksioni tone() i Arduino e bn kt t leht"},{title:"Lidhjet e Buzzer",content:"**Lidhje e Thjesht 2-Telave:**\\n\\n**Buzzer Pasiv:**\\n Positive (+)  Arduino Pin 8 (do pin PWM)\\n Negative (-)  Arduino GND\\n\\n**Buzzer Aktiv:**\\n Positive (+)  Arduino Pin 8\\n Negative (-)  GND\\n Ose prdorni transistor pr tingull m t fort\\n\\n**Kshilla:**\\n Disa buzzer kan polaritet, disa jo\\n Nse nuk funksionon, provoni t ktheni telat\\n Shtoni rezistor 100 pr volum m t ult\\n Prdorni transistor (2N2222) pr rrym m t lart\\n\\n**Qark Tingull m i Fort:**\\n```\\nArduino Pin 8  Rezistor 1k  Baza e Transistorit\\nKolektori i Transistorit  Buzzer +\\nEmituesi i Transistorit  GND\\nBuzzer -  5V\\n```"},{title:"Prodhimi i Tingujve me Kod",content:"**Funksioni tone() i Arduino:**\\n\\n**Ton Bazik:**\\n```cpp\\ntone(pin, frekuenca);\\n// Luaj frekuencn n pin\\n```\\n\\n**Ton me Kohzgjatje:**\\n```cpp\\ntone(pin, frekuenca, kohzgjatja);\\n// Luaj pr milisekonda specifike\\n```\\n\\n**Ndalo Tonin:**\\n```cpp\\nnoTone(pin);\\n// Ndalo s luajturi tingullin\\n```\\n\\n**Notat Muzikore (Frekuencat):**\\n```cpp\\n#define NOTE_C4  262  // C qendror\\n#define NOTE_D4  294\\n#define NOTE_E4  330\\n#define NOTE_F4  349\\n#define NOTE_G4  392\\n#define NOTE_A4  440  // A koncert\\n#define NOTE_B4  494\\n#define NOTE_C5  523  // C e lart\\n```\\n\\n**Bip i Thjesht:**\\n```cpp\\ntone(8, 1000, 200);  // 1kHz pr 200ms\\ndelay(300);\\nnoTone(8);\\n```"},{title:"Projekte Tingulli ",content:"**Ide Projektesh Argtuese:**\\n\\n1. **Zile Muzikore Dere**\\n    Shtypja e butonit luan melodi\\n    Melodi t ndryshme pr butona t ndryshm\\n\\n2. **Efekte Zanore Loj**\\n    Tingull fitore\\n    Ton loje mbaroi\\n    Melodi nivel lart\\n\\n3. **Sistem Alarmi**\\n    Sensori i lvizjes aktivizon sirenn\\n    Bipe paralajmruese para alarmit\\n\\n4. **Tastier Piano**\\n    Butona t shumt pr nota t ndryshme\\n    Luaj kng me shtypje butonash\\n\\n5. **Asistent Parkimi**\\n    Bipe m t shpejta kur m afr murit\\n    Ultrasonik + buzzer\\n\\n6. **Transmitues Kodi Morse**\\n    Prkthe tekstin n bipe\\n    Mjet msimi edukativ\\n\\n7. **Kohmats/Kronometr**\\n    Bip n intervale\\n    Alarm kur koha mbaron\\n\\n**Biblioteka Melodish:**\\nGjeni biblioteka tone Arduino me kng popullore tashm t koduara!"}]},11:{title:"Fotorezistor dhe Ndjenj Drite",description:"Ndieni nivelet e drits dhe krijoni sisteme ndriimi inteligjent! Ndrtoni drita automatike nate, gjurmues diellor dhe projekte q reagojn ndaj drits. ",sections:[{title:"far sht nj Fotorezistor (LDR)?",content:"**Light Dependent Resistor (LDR):**\\n\\nNj rezistor q ndryshon rezistencn bazuar n intensitetin e drits.\\n\\n**Si Funksionon:**\\n **Drit e Ndritshme**  Rezistenc e ult (1k - 10k)\\n **Errsir**  Rezistenc e lart (1M ose m shum)\\n\\n**Quhet Gjithashtu:**\\n Fotorezistor\\n Fotocellul\\n Sensor drite\\n\\n**Karakteristikat:**\\n Sensor analog (vlera 0-1023)\\n Koh prgjigjeje e ngadalt (100ms)\\n Nuk ka polaritet - funksionon n t dyja drejtimet\\n Shum i prballueshm ($0.50)\\n I ndjeshm ndaj drits s dukshme\\n Jo i sakt, por mjaft i mir pr shumicn e projekteve\\n\\n**Aplikime:**\\n Drita automatike rruge\\n Mats ekspozimi kamerash\\n Gjurmim paneli diellor\\n Drita sigurie\\n Drita rritje bimsh"},{title:"Qarku dhe Lidhja e LDR",content:"**Qark Pjestues Tensioni:**\\n\\nLDR ka nevoj pr nj rezistor fiks pr t krijuar tension t lexueshm.\\n\\n**Lidhja:**\\n```\\n5V  LDR  A0  Rezistor 10k  GND\\n```\\n\\n**Lidhja e Komponentve:**\\n1. **Kmba 1 e LDR**  Arduino 5V\\n2. **Kmba 2 e LDR**  Arduino A0\\n3. **Rezistor 10k**  A0 dhe GND\\n\\n**Pse 10k?**\\nKrijn pjestues tensioni me LDR:\\n E ndritshme: LDR = 1k  Tension i lart n A0\\n Errsir: LDR = 1M  Tension i ult n A0\\n\\n**Leximi i Vlerave:**\\n```cpp\\nint lightLevel = analogRead(A0);\\n// Kthe 0 (errsir) n 1023 (e ndritshme)\\n```\\n\\n**Kalibrimi:**\\nEkzekutoni kt pr t par gamat tuaja t drits:\\n```cpp\\nvoid loop() {\\n  Serial.println(analogRead(A0));\\n  delay(100);\\n}\\n```"},{title:"Programimi i Zbulimit t Drits",content:"**Lexim Bazik Drite:**\\n```cpp\\nint ldrPin = A0;\\nint lightValue = analogRead(ldrPin);\\n```\\n\\n**Zbulimi i Pragut:**\\n```cpp\\nint threshold = 500;  // Rregulloni pr dhom\\nif (lightValue < threshold) {\\n  // sht errsir\\n  digitalWrite(ledPin, HIGH);\\n} else {\\n  // sht e ndritshme\\n  digitalWrite(ledPin, LOW);\\n}\\n```\\n\\n**Kontroll i But Shklqimi:**\\n```cpp\\n// Kthe dhe shkallzo: errsir=LED e ndritshme\\nint brightness = map(lightValue, 0, 1023, 255, 0);\\nanalogWrite(ledPin, brightness);\\n```\\n\\n**Lexim Mesatar (Redukto Zhurma):**\\n```cpp\\nint getAverageLight() {\\n  long sum = 0;\\n  for(int i=0; i<10; i++) {\\n    sum += analogRead(ldrPin);\\n    delay(10);\\n  }\\n  return sum / 10;\\n}\\n```"},{title:"Projekte Ndjenj Drite ",content:"**Ide Projektesh:**\\n\\n1. **Drit Automatike Nate**\\n    LED ndizet kur dhoma errsohet\\n    Kursen energji gjat dits\\n\\n2. **Stor Dritare Inteligjente**\\n    Servo mbyll storet kur shum e ndritshme\\n    Hapet n mngjes automatikisht\\n\\n3. **Gjurmues Paneli Diellor**\\n    Dy LDR gjejn drejtimin m t ndritshm\\n    Servo rrotullon panelin drejt diellit\\n\\n4. **Kohmats Drite Rritje Bimsh**\\n    Siguron q bimt marrin mjaft drit\\n    Plotson me LED kur errt\\n\\n5. **Mats Drite Fotografie**\\n    Mat shklqimin e dhoms\\n    Shfaq n LCD n lux\\n\\n6. **Far Automatike**\\n    Pr makin RC ose robot\\n    Ndiz drita n tunele\\n\\n7. **Alarm Zgjimi Drite**\\n    Zbulon lindjen e diellit\\n    Aktivizon alarm n mngjes\\n\\n**Avancuar: Gjurmues Dielli me LDR t Dyfisht**\\nDy LDR prcaktojn kndin m t ndritshm pr gjurmim diellor!"}]},12:{title:"Projekti Final - Automatizim Shtpie Inteligjente",description:"Ndrtoni projektin prfundimtar Arduino! Kombinoni gjithka q keni msuar n nj sistem inteligjent automatizimi shtpie me sensor t shumt dhe kontrolle t automatizuara. ",sections:[{title:"Prmbledhja e Projektit dhe Veorit",content:"**Sistem i Plot Shtpie Inteligjente:**\\n\\n **Monitorim Temperature** (DHT11)\\n **Kontroll Automatik Ventilatori** (bazuar n temperatur)\\n **Zbulim Lvizje** (sensor PIR)\\n **Ndjenj Niveli Drite** (LDR)\\n **Ndriim Inteligjent** (lvizje + errsir)\\n **Shfaqje Informacioni LCD** (t dhna n koh reale)\\n **Rregulla t Shumta Automatike**\\n\\n**far do t Msoni:**\\n Integroni sensor t shumt\\n Merrni vendime nga hyrje t shumta\\n Krijoni logjik automatizimi\\n Ndrtoni sisteme shtpie praktike\\n Debugoni projekte komplekse\\n Organizim projekti profesional\\n\\n**Raste Prdorimi Bota Reale:**\\n Automatizim kursimi energjie\\n Monitorim sigurie\\n Optimizim rehatie\\n Asistenc kujdesi t moshuarve"},{title:"Pjest e Plota dhe Kostoja",content:"**Komponentt e Krkuar:**\\n\\n**Kontrollues:**\\n Arduino Uno R3 ($10-15)\\n Adapter energjie 9V ($5)\\n Breadboard ($3)\\n Tela lidhse ($3)\\n\\n**Sensor:**\\n DHT11 temperatur/lagshti ($2)\\n Sensor lvizje PIR HC-SR501 ($3)\\n Fotorezistor LDR + 10k ($1)\\n\\n**Daljet:**\\n Ekran LCD I2C 16x2 ($5)\\n Modul releje 5V ($3)\\n Ventilator DC 5V ($4)\\n LED + rezistor ($2)\\n\\n**Opsionale:**\\n Mbshtjells projekti ($5-10)\\n PCB prototip ($3)\\n Furnizim energjie 5V 2A ($8)\\n\\n**Kostoja Totale:** $40-50 USD\\n\\n**Mjetet e Nevojshme:**\\n Prdorues telash\\n Multimetr (i dobishm)\\n Kompjuter me Arduino IDE"},{title:"Udhzues Lidhje Sistemi",content:"**Shprndarja e Energjis:**\\n```\\n5V Rail: DHT11, PIR, LCD, Releje\\nGND Rail: Tokat e t gjith komponentve\\nArduino fuqizohet nga adapter 9V\\n```\\n\\n**Lidhjet e Sensorve:**\\n **DHT11:** DataPin 7, VCC5V, GNDGND\\n **PIR Motion:** OUTPin 2, VCC5V, GNDGND\\n **Qarku LDR:** A0, pjestues tensioni me 10k\\n **LCD I2C:** SDAA4, SCLA5, VCC5V, GNDGND\\n\\n**Lidhjet e Daljeve:**\\n **Releje:** INPin 8, kontrollon llamb 110V AC\\n **Ventilator:** PWMPin 9, ventilator DC 5V\\n\\n**Kshilla Sigurie:**\\n Releja ndrron tension t lart AC\\n Prdorni mbshtjells t izoluar\\n Mos prekni telat kur fuqizohet\\n Testoni me multimetr s pari\\n Prdorni matje t duhur teli pr AC"},{title:"Logjika e Automatizimit dhe Rregullat",content:'**Rregullat e Automatizimit:**\\n\\n**Regull 1: Kontrolli i Ventilatorit**\\n```cpp\\nif (temperature > 28C) {\\n  digitalWrite(fanPin, HIGH);  // Ndiz ventilatorin\\n}\\n```\\n\\n**Regull 2: Ndriim Inteligjent**\\n```cpp\\nif (motion && lightLevel < 300) {\\n  digitalWrite(lightPin, HIGH);  // Ndiz dritn\\n}\\n```\\n\\n**Regull 3: Shfaqje LCD**\\n```cpp\\nlcd.print(\\"T:\\");\\nlcd.print(temp);\\nlcd.print(\\"C L:\\");\\nlcd.print(lightLevel);\\n```\\n\\n**Personalizimi:**\\n Rregulloni pragjet e temperaturs\\n Ndryshoni ndjeshmrin e drits\\n Shtoni rregulla bazuar n koh\\n Krijoni mnyra (shtpi/jasht/nat)'},{title:"Projekte Niveli Tjetr ",content:"**Prmirsimet e Mtejshme:**\\n\\n1. **Lidhshmria WiFi/Bluetooth**\\n    Kontrollo nga smartphone\\n    Drgo njoftime push\\n    Regjistrimi t dhnash n cloud\\n\\n2. **Integrim Kontrolli me Z**\\n    Shtoni modul njohje zanore\\n    Kontrollo me komanda\\n\\n3. **Panel Kontroll Web**\\n    Krijo ndrfaqe web\\n    Monitoroni nga do pajisje\\n    Ndrysho cilsimet nga distanca\\n\\n4. **Msim Makinerie**\\n    Mso modelet e prdoruesit\\n    Rregullim automatik bazuar n zakonet\\n\\n5. **Integrim Energjie Diellore**\\n    Gjurmues paneli diellor\\n    Menaxhim energjie bateri\\n    Monitorim efikasiteti\\n\\n**Mundsi Karriere:**\\nKy projekt demonstron aftsi n:\\n Programim embedded sistemesh\\n Integrim sensorsh\\n Dizajn IoT\\n Automatizim shtpie\\n\\nShrbeni n portfolio tuaj!"}]}}}}},Dae=P.createContext(void 0);function N0e({children:n}){const[e,t]=P.useState(()=>{const o=localStorage.getItem("language");return o==="en"||o==="sq"?o:"en"});P.useEffect(()=>{localStorage.setItem("language",e)},[e]);const s={language:e,setLanguage:o=>{t(o)},t:E0e[e]};return C.jsx(Dae.Provider,{value:s,children:n})}function ou(){const n=P.useContext(Dae);if(n===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return n}const Yt=P.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Ji("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Yt.displayName="Card";const Pv=P.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Ji("flex flex-col space-y-1.5 p-6",n),...e}));Pv.displayName="CardHeader";const b0=P.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Ji("text-2xl font-semibold leading-none tracking-tight",n),...e}));b0.displayName="CardTitle";const I0e=P.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Ji("text-sm text-muted-foreground",n),...e}));I0e.displayName="CardDescription";const ei=P.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Ji("p-6 pt-0",n),...e}));ei.displayName="CardContent";const T0e=P.forwardRef(({className:n,...e},t)=>C.jsx("div",{ref:t,className:Ji("flex items-center p-6 pt-0",n),...e}));T0e.displayName="CardFooter";function P0e(){return C.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:C.jsx(Yt,{className:"w-full max-w-md mx-4",children:C.jsxs(ei,{className:"pt-6",children:[C.jsxs("div",{className:"flex mb-4 gap-2",children:[C.jsx(lye,{className:"h-8 w-8 text-red-500"}),C.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),C.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const M0e=HR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Mn=P.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...s},o)=>{const r=i?gCe:"button";return C.jsx(r,{className:Ji(M0e({variant:e,size:t,className:n})),ref:o,...s})});Mn.displayName="Button";function CZ(){const{language:n,setLanguage:e,t}=ou(),i=()=>{e(n==="en"?"sq":"en")};return C.jsxs(Mn,{variant:"ghost",size:"sm",onClick:i,className:"gap-2","data-testid":"button-language-toggle",children:[C.jsx(Rre,{className:"h-4 w-4"}),C.jsx("span",{children:n==="en"?"Shqip":"English"})]})}function hh(){const[n]=zoe(),[e,t]=P.useState(!1),{t:i}=ou(),s=r=>n===r,o=()=>t(!e);return C.jsx("nav",{className:"bg-white shadow-sm fixed w-full top-0 z-50 transition-all duration-300",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"flex justify-between items-center h-16",children:[C.jsxs(Tn,{href:"/",className:"flex items-center space-x-3",children:[C.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-lg flex items-center justify-center",children:C.jsx(ib,{className:"text-white text-lg"})}),C.jsx("span",{className:"text-2xl font-bold gradient-text",children:"MsoSTEM"})]}),C.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[C.jsx(Tn,{href:"/courses",className:`font-medium transition-colors duration-300 ${s("/courses")?"text-primary":"text-gray-700 hover:text-primary"}`,"data-testid":"link-courses",children:i.nav.courses}),C.jsx(Tn,{href:"/scholarships",className:`font-medium transition-colors duration-300 ${s("/scholarships")?"text-primary":"text-gray-700 hover:text-primary"}`,"data-testid":"link-scholarships",children:i.nav.scholarships}),C.jsx(Tn,{href:"/playground",className:`font-medium transition-colors duration-300 ${s("/playground")?"text-primary":"text-gray-700 hover:text-primary"}`,"data-testid":"link-playground",children:i.nav.playground}),C.jsx(CZ,{}),C.jsx(Mn,{className:"bg-primary text-white hover:bg-primary/90 transition-all duration-300 hover:scale-105 hover:shadow-lg","data-testid":"button-start-learning",children:i.course.startCourse})]}),C.jsx("div",{className:"md:hidden",children:C.jsx(Mn,{variant:"ghost",size:"sm",onClick:o,className:"text-gray-700 hover:text-primary transition-colors duration-300",children:e?C.jsx(Bre,{size:24}):C.jsx(fye,{size:24})})})]}),e&&C.jsxs("div",{className:"md:hidden border-t border-gray-200 py-4 space-y-4",children:[C.jsx(Tn,{href:"/courses",className:`block font-medium transition-colors duration-300 ${s("/courses")?"text-primary":"text-gray-700 hover:text-primary"}`,onClick:()=>t(!1),"data-testid":"link-courses-mobile",children:i.nav.courses}),C.jsx(Tn,{href:"/scholarships",className:`block font-medium transition-colors duration-300 ${s("/scholarships")?"text-primary":"text-gray-700 hover:text-primary"}`,onClick:()=>t(!1),"data-testid":"link-scholarships-mobile",children:i.nav.scholarships}),C.jsx(Tn,{href:"/playground",className:`block font-medium transition-colors duration-300 ${s("/playground")?"text-primary":"text-gray-700 hover:text-primary"}`,onClick:()=>t(!1),"data-testid":"link-playground-mobile",children:i.nav.playground}),C.jsx(CZ,{}),C.jsx(Mn,{className:"w-full bg-primary text-white hover:bg-primary/90 transition-all duration-300","data-testid":"button-start-learning-mobile",children:i.course.startCourse})]})]})})}function R0e(){const{t:n}=ou();return C.jsx("section",{className:"pt-16 pb-20 overflow-hidden",children:C.jsxs("div",{className:"hero-gradient min-h-screen flex items-center relative",children:[C.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),C.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[C.jsxs("div",{className:"text-white space-y-8 animate-slide-up",children:[C.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold leading-tight",children:[n.home.hero.title,C.jsx("span",{className:"block typing-animation",children:n.home.hero.titleAnimated})]}),C.jsx("p",{className:"text-xl lg:text-2xl text-gray-100 max-w-2xl",children:n.home.hero.subtitle}),C.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[C.jsx(Tn,{href:"/courses",children:C.jsxs(Mn,{className:"bg-white text-primary px-8 py-4 rounded-full font-semibold text-lg hover:scale-105 transition-all duration-300 hover:shadow-xl","data-testid":"button-hero-courses",children:[C.jsx(nb,{className:"w-5 h-5 mr-2"}),n.home.hero.ctaCourses]})}),C.jsx(Tn,{href:"/scholarships",children:C.jsxs(Mn,{className:"glass-morphism text-white px-8 py-4 rounded-full font-semibold text-lg hover:scale-105 transition-all duration-300","data-testid":"button-hero-scholarships",children:[C.jsx(Dx,{className:"w-5 h-5 mr-2"}),n.home.hero.ctaScholarships]})})]}),C.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 pt-8",children:[C.jsxs("div",{className:"text-center animate-slide-up",style:{animationDelay:"0.5s"},children:[C.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3 animate-glow",children:C.jsx(ib,{className:"w-8 h-8 text-white"})}),C.jsx("div",{className:"text-white font-semibold",children:n.home.hero.feature1Title}),C.jsx("div",{className:"text-gray-200 text-sm",children:n.home.hero.feature1Desc})]}),C.jsxs("div",{className:"text-center animate-slide-up",style:{animationDelay:"0.7s"},children:[C.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3 animate-glow",children:C.jsx(Dx,{className:"w-8 h-8 text-white"})}),C.jsx("div",{className:"text-white font-semibold",children:n.home.hero.feature2Title}),C.jsx("div",{className:"text-gray-200 text-sm",children:n.home.hero.feature2Desc})]}),C.jsxs("div",{className:"text-center animate-slide-up",style:{animationDelay:"0.9s"},children:[C.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3 animate-glow",children:C.jsx(nb,{className:"w-8 h-8 text-white"})}),C.jsx("div",{className:"text-white font-semibold",children:n.home.hero.feature3Title}),C.jsx("div",{className:"text-gray-200 text-sm",children:n.home.hero.feature3Desc})]})]})]}),C.jsxs("div",{className:"relative animate-float",children:[C.jsxs("div",{className:"code-block relative z-10 transform rotate-3 hover:rotate-0 transition-transform duration-500",children:[C.jsxs("div",{className:"absolute top-3 left-4 flex space-x-2",children:[C.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),C.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),C.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})]}),C.jsxs("div",{className:"pt-8 font-mono text-sm text-gray-300",children:[C.jsxs("div",{children:[C.jsx("span",{className:"text-purple-400",children:"<div"})," ",C.jsx("span",{className:"text-blue-400",children:"class="}),C.jsx("span",{className:"text-green-400",children:'"hero"'}),C.jsx("span",{className:"text-purple-400",children:">"})]}),C.jsxs("div",{className:"ml-4",children:[C.jsx("span",{className:"text-purple-400",children:"<h1"}),C.jsx("span",{className:"text-purple-400",children:">"}),C.jsx("span",{className:"text-white",children:"Hello, World!"}),C.jsx("span",{className:"text-purple-400",children:"</h1>"})]}),C.jsxs("div",{className:"ml-4",children:[C.jsx("span",{className:"text-purple-400",children:"<p"}),C.jsx("span",{className:"text-purple-400",children:">"}),C.jsx("span",{className:"text-white",children:"I'm learning to code!"}),C.jsx("span",{className:"text-purple-400",children:"</p>"})]}),C.jsx("div",{children:C.jsx("span",{className:"text-purple-400",children:"</div>"})})]})]}),C.jsx("div",{className:"absolute -top-4 -right-4 w-20 h-20 bg-secondary rounded-full opacity-80 animate-float",style:{animationDelay:"1s"}}),C.jsx("div",{className:"absolute -bottom-8 -left-8 w-16 h-16 bg-accent rounded-full opacity-60 animate-float",style:{animationDelay:"2s"}})]})]})})]})})}function kL(){const{t:n}=ou();return C.jsx("footer",{className:"bg-gray-900 text-white py-16",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[C.jsxs("div",{className:"col-span-1 md:col-span-2",children:[C.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-lg flex items-center justify-center",children:C.jsx(ib,{className:"text-white text-xl"})}),C.jsx("span",{className:"text-3xl font-bold gradient-text",children:"MsoSTEM"})]}),C.jsx("p",{className:"text-gray-400 mb-6 max-w-md",children:n.home.footer.aboutText}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("div",{className:"flex items-center text-gray-400 mb-2",children:[C.jsx(gye,{className:"w-4 h-4 mr-2 text-primary"}),C.jsxs("span",{className:"text-sm",children:[n.home.footer.futureCollaboration,":"]})]}),C.jsx("a",{href:"tel:+383045141019",className:"text-primary hover:text-primary/80 font-semibold transition-colors duration-300",children:"+383 045 141 019"})]}),C.jsxs("div",{className:"flex space-x-4",children:[C.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-primary transition-colors duration-300","aria-label":"Twitter",children:C.jsx("i",{className:"fab fa-twitter"})}),C.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-primary transition-colors duration-300","aria-label":"Instagram",children:C.jsx("i",{className:"fab fa-instagram"})}),C.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-primary transition-colors duration-300","aria-label":"LinkedIn",children:C.jsx("i",{className:"fab fa-linkedin"})}),C.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-primary transition-colors duration-300","aria-label":"GitHub",children:C.jsx("i",{className:"fab fa-github"})})]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-semibold mb-6",children:n.home.footer.learn}),C.jsxs("ul",{className:"space-y-3 text-gray-400",children:[C.jsx("li",{children:C.jsx(Tn,{href:"/courses",className:"hover:text-white transition-colors duration-300",children:n.home.footer.htmlFundamentals})}),C.jsx("li",{children:C.jsx(Tn,{href:"/courses",className:"hover:text-white transition-colors duration-300",children:n.home.footer.cssStyling})}),C.jsx("li",{children:C.jsx(Tn,{href:"/courses",className:"hover:text-white transition-colors duration-300",children:n.home.footer.responsiveDesign})}),C.jsx("li",{children:C.jsx(Tn,{href:"/playground",className:"hover:text-white transition-colors duration-300",children:n.home.footer.codePlayground})}),C.jsx("li",{children:C.jsx(Tn,{href:"/courses",className:"hover:text-white transition-colors duration-300",children:n.home.footer.learningPath})})]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-semibold mb-6",children:n.home.footer.resources}),C.jsxs("ul",{className:"space-y-3 text-gray-400",children:[C.jsx("li",{children:C.jsx(Tn,{href:"/scholarships",className:"hover:text-white transition-colors duration-300",children:n.home.footer.scholarships})}),C.jsx("li",{children:C.jsx("a",{href:"#community",className:"hover:text-white transition-colors duration-300",children:n.home.footer.community})}),C.jsx("li",{children:C.jsx("a",{href:"#success-stories",className:"hover:text-white transition-colors duration-300",children:n.home.footer.successStories})}),C.jsx("li",{children:C.jsx("a",{href:"#mentorship",className:"hover:text-white transition-colors duration-300",children:n.home.footer.mentorship})}),C.jsx("li",{children:C.jsx("a",{href:"#career-guide",className:"hover:text-white transition-colors duration-300",children:n.home.footer.careerGuide})})]})]})]}),C.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[C.jsxs("p",{className:"text-gray-400 text-sm",children:[" 2024 MsoSTEM. ",n.home.footer.rights]}),C.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[C.jsx("a",{href:"#privacy",className:"text-gray-400 hover:text-white text-sm transition-colors duration-300",children:n.home.footer.privacyPolicy}),C.jsx("a",{href:"#terms",className:"text-gray-400 hover:text-white text-sm transition-colors duration-300",children:n.home.footer.termsOfService}),C.jsx("a",{href:"#contact",className:"text-gray-400 hover:text-white text-sm transition-colors duration-300",children:n.home.footer.contactUs})]})]})]})})}function A0e(){const{t:n}=ou(),{data:e,isLoading:t}=ey({queryKey:["/api/courses"]}),{data:i,isLoading:s}=ey({queryKey:["/api/scholarships"]}),o=(e==null?void 0:e.slice(0,3))||[],r=(i==null?void 0:i.slice(0,3))||[];return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsx(hh,{}),C.jsx(R0e,{}),C.jsx("section",{id:"courses",className:"py-20 bg-white",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"text-center mb-16",children:[C.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:[n.home.courses.title.replace(n.home.courses.titleHighlight,"")," ",C.jsx("span",{className:"gradient-text",children:n.home.courses.titleHighlight})]}),C.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:n.home.courses.subtitle})]}),C.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-2xl p-8 mb-12 text-white animate-slide-up",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("h3",{className:"text-2xl font-bold mb-3",children:n.home.courses.pathTitle}),C.jsx("p",{className:"text-white/90 text-lg",children:n.home.courses.pathSubtitle})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[C.jsxs("div",{className:"text-center animate-float",style:{animationDelay:"0.2s"},children:[C.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:C.jsx(ib,{className:"w-8 h-8 text-white"})}),C.jsx("div",{className:"font-semibold text-lg mb-2",children:n.home.courses.step1Title}),C.jsx("div",{className:"text-white/80",children:n.home.courses.step1Desc})]}),C.jsxs("div",{className:"text-center animate-float",style:{animationDelay:"0.4s"},children:[C.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:C.jsx("div",{className:"text-2xl",children:""})}),C.jsx("div",{className:"font-semibold text-lg mb-2",children:n.home.courses.step2Title}),C.jsx("div",{className:"text-white/80",children:n.home.courses.step2Desc})]}),C.jsxs("div",{className:"text-center animate-float",style:{animationDelay:"0.6s"},children:[C.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:C.jsx(cZ,{className:"w-8 h-8 text-white"})}),C.jsx("div",{className:"font-semibold text-lg mb-2",children:n.home.courses.step3Title}),C.jsx("div",{className:"text-white/80",children:n.home.courses.step3Desc})]})]})]}),t?C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(a=>C.jsxs(Yt,{className:"animate-pulse",children:[C.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),C.jsxs(ei,{className:"p-6",children:[C.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),C.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),C.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})]},a))}):C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map((a,l)=>{const c=n.courseContent[a.id],d=(c==null?void 0:c.title)||a.title,u=(c==null?void 0:c.description)||a.description,h=a.duration.split(" "),f=`${h[0]} ${h[1]==="weeks"?n.home.courses.weeks:h[1]}`;return C.jsxs(Yt,{className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 overflow-hidden group animate-slide-up",style:{animationDelay:`${l*.2}s`},children:[C.jsxs("div",{className:"relative overflow-hidden",children:[C.jsx("img",{src:a.imageUrl||"",alt:d,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),C.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-x-2 group-hover:translate-x-0",children:C.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-2",children:C.jsx(nb,{className:"w-4 h-4 text-primary"})})})]}),C.jsxs(ei,{className:"p-6",children:[C.jsxs("div",{className:"flex items-center justify-between mb-3",children:[C.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a.level==="beginner"?"bg-primary bg-opacity-10 text-primary":a.level==="intermediate"?"bg-secondary bg-opacity-10 text-secondary":"bg-accent bg-opacity-10 text-accent"}`,children:a.level==="beginner"?n.common.beginner:a.level==="intermediate"?n.common.intermediate:n.common.advanced}),C.jsxs("div",{className:"flex items-center text-gray-500",children:[C.jsx(Pre,{className:"w-4 h-4 mr-1"}),C.jsx("span",{className:"text-sm",children:f})]})]}),C.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:d}),C.jsx("p",{className:"text-gray-600 mb-4",children:u}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center text-gray-500",children:[C.jsx(nb,{className:"w-4 h-4 mr-2"}),C.jsxs("span",{className:"text-sm",children:[a.lessonsCount," ",n.home.courses.lessons]})]}),C.jsx(Tn,{href:`/course/${a.id}`,children:C.jsx(Mn,{className:`${a.level==="beginner"?"bg-primary hover:bg-primary/90":a.level==="intermediate"?"bg-secondary hover:bg-secondary/90":"bg-accent hover:bg-accent/90"} text-white`,"data-testid":`button-continue-${a.id}`,children:n.home.courses.continue})})]})]})]},a.id)})}),C.jsxs("div",{className:"mt-16 bg-gray-900 rounded-2xl p-8 relative overflow-hidden animate-slide-up",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5"}),C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center relative z-10",children:[C.jsxs("div",{className:"text-white animate-slide-in-left",children:[C.jsxs("h3",{className:"text-3xl font-bold mb-4",children:[C.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-primary/20 rounded-lg mr-3 animate-pulse",children:C.jsx(ib,{className:"w-6 h-6 text-primary"})}),n.home.courses.playgroundTitle]}),C.jsx("p",{className:"text-gray-300 text-lg mb-6",children:n.home.courses.playgroundDesc}),C.jsxs("ul",{className:"space-y-3 text-gray-300",children:[C.jsxs("li",{className:"flex items-center animate-fade-in",style:{animationDelay:"0.2s"},children:[C.jsx(Ao,{className:"w-5 h-5 text-success mr-3"}),n.home.courses.playgroundFeature1]}),C.jsxs("li",{className:"flex items-center animate-fade-in",style:{animationDelay:"0.4s"},children:[C.jsx(Ao,{className:"w-5 h-5 text-success mr-3"}),n.home.courses.playgroundFeature2]}),C.jsxs("li",{className:"flex items-center animate-fade-in",style:{animationDelay:"0.6s"},children:[C.jsx(Ao,{className:"w-5 h-5 text-success mr-3"}),n.home.courses.playgroundFeature3]}),C.jsxs("li",{className:"flex items-center animate-fade-in",style:{animationDelay:"0.8s"},children:[C.jsx(Ao,{className:"w-5 h-5 text-success mr-3"}),n.home.courses.playgroundFeature4]})]}),C.jsx(Tn,{href:"/playground",children:C.jsx(Mn,{className:"mt-6 bg-primary text-white hover:bg-primary/90 font-semibold","data-testid":"button-try-playground",children:n.home.courses.tryPlayground})})]}),C.jsxs("div",{className:"code-block animate-slide-in-right",children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 h-80",children:[C.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors duration-300",children:[C.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center",children:[C.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full mr-2 animate-pulse"}),"HTML"]}),C.jsxs("div",{className:"font-mono text-sm text-gray-300 space-y-1",children:[C.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"1s"},children:[C.jsx("span",{className:"text-blue-400",children:"<div"})," ",C.jsx("span",{className:"text-yellow-300",children:"class="}),C.jsx("span",{className:"text-green-400",children:'"card"'}),C.jsx("span",{className:"text-blue-400",children:">"})]}),C.jsxs("div",{className:"ml-4 animate-fade-in",style:{animationDelay:"1.2s"},children:[C.jsx("span",{className:"text-blue-400",children:"<h2>"}),C.jsx("span",{className:"text-white",children:"My Project"}),C.jsx("span",{className:"text-blue-400",children:"</h2>"})]}),C.jsxs("div",{className:"ml-4 animate-fade-in",style:{animationDelay:"1.4s"},children:[C.jsx("span",{className:"text-blue-400",children:"<p>"}),C.jsx("span",{className:"text-white",children:"Learning is fun!"}),C.jsx("span",{className:"text-blue-400",children:"</p>"})]}),C.jsx("div",{className:"animate-fade-in",style:{animationDelay:"1.6s"},children:C.jsx("span",{className:"text-blue-400",children:"</div>"})})]})]}),C.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 hover:bg-gray-700 transition-colors duration-300",children:[C.jsxs("div",{className:"text-gray-400 text-sm mb-2 flex items-center",children:[C.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2 animate-pulse"}),"CSS"]}),C.jsxs("div",{className:"font-mono text-sm text-gray-300 space-y-1",children:[C.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"1.8s"},children:[C.jsx("span",{className:"text-yellow-300",children:".card"})," ",C.jsx("span",{className:"text-white",children:"{"})]}),C.jsxs("div",{className:"ml-4 animate-fade-in",style:{animationDelay:"2s"},children:[C.jsx("span",{className:"text-blue-400",children:"background:"})," ",C.jsx("span",{className:"text-green-400",children:"#8B5CF6"}),C.jsx("span",{className:"text-white",children:";"})]}),C.jsxs("div",{className:"ml-4 animate-fade-in",style:{animationDelay:"2.2s"},children:[C.jsx("span",{className:"text-blue-400",children:"padding:"})," ",C.jsx("span",{className:"text-green-400",children:"20px"}),C.jsx("span",{className:"text-white",children:";"})]}),C.jsxs("div",{className:"ml-4 animate-fade-in",style:{animationDelay:"2.4s"},children:[C.jsx("span",{className:"text-blue-400",children:"border-radius:"})," ",C.jsx("span",{className:"text-green-400",children:"10px"}),C.jsx("span",{className:"text-white",children:";"})]}),C.jsx("div",{className:"animate-fade-in",style:{animationDelay:"2.6s"},children:C.jsx("span",{className:"text-white",children:"}"})})]})]})]}),C.jsxs("div",{className:"mt-4 bg-white rounded-lg p-4 animate-fade-in border-2 border-transparent hover:border-primary/20 transition-colors duration-300",style:{animationDelay:"2.8s"},children:[C.jsxs("div",{className:"text-gray-600 text-sm mb-2 flex items-center",children:[C.jsx(Mre,{className:"w-4 h-4 mr-2 text-primary"}),"Live Preview"]}),C.jsxs("div",{className:"bg-primary text-white p-5 rounded-lg transform hover:scale-105 transition-transform duration-300 animate-bounce-in",style:{animationDelay:"3s"},children:[C.jsx("h2",{className:"text-xl font-bold mb-2",children:"My Project"}),C.jsx("p",{children:"Learning is fun!"})]})]})]})]})]})]})}),C.jsx("section",{id:"scholarships",className:"py-20 bg-gray-50",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"text-center mb-16 relative",children:[C.jsx("div",{className:"absolute left-1/4 top-0 w-6 h-6 bg-secondary/10 rounded-full animate-float"}),C.jsx("div",{className:"absolute right-1/3 top-8 w-4 h-4 bg-primary/20 rounded-full animate-float",style:{animationDelay:"1.5s"}}),C.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4 animate-slide-up",children:[n.home.scholarships.title.replace(n.home.scholarships.titleHighlight,"")," ",C.jsx("span",{className:"gradient-text",children:n.home.scholarships.titleHighlight})]}),C.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto animate-fade-in",style:{animationDelay:"0.3s"},children:n.home.scholarships.subtitle})]}),s?C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(a=>C.jsx(Yt,{className:"animate-pulse",children:C.jsxs(ei,{className:"p-6",children:[C.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),C.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),C.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})},a))}):C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map((a,l)=>{const c=n.scholarshipContent[a.id],d=(c==null?void 0:c.title)||a.title,u=(c==null?void 0:c.description)||a.description,h=(c==null?void 0:c.field)||a.field,f=(c==null?void 0:c.location)||a.location;return C.jsx(Yt,{className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 overflow-hidden animate-slide-up group",style:{animationDelay:`${l*.15}s`},children:C.jsxs(ei,{className:"p-6 relative",children:[C.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-primary/10 to-secondary/10 rounded-bl-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),C.jsxs("div",{className:"flex items-start justify-between mb-4",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-lg flex items-center justify-center",children:C.jsx(Dx,{className:"w-6 h-6 text-white"})}),C.jsxs("div",{className:"text-right",children:[C.jsxs("div",{className:"text-2xl font-bold text-success",children:["$",a.amount.toLocaleString()]}),C.jsx("div",{className:"text-sm text-gray-500",children:n.home.scholarships.amount})]})]}),C.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:d}),C.jsx("p",{className:"text-gray-600 mb-4",children:u}),C.jsxs("div",{className:"space-y-2 mb-4",children:[C.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[C.jsx("i",{className:"fas fa-calendar-alt mr-2 text-primary w-4"}),C.jsxs("span",{children:[n.home.scholarships.deadline,": ",new Date(a.deadline).toLocaleDateString()]})]}),C.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[C.jsx(Dx,{className:"w-4 h-4 mr-2 text-primary"}),C.jsx("span",{children:h})]}),C.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[C.jsx("i",{className:"fas fa-map-marker-alt mr-2 text-primary w-4"}),C.jsx("span",{children:f})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a.status==="open"?"bg-green-100 text-green-800":a.status==="upcoming"?"bg-blue-100 text-blue-800":a.status==="closing_soon"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:a.status==="open"?n.home.scholarships.statusOpen:a.status==="upcoming"?n.home.scholarships.statusUpcoming:a.status==="closing_soon"?n.home.scholarships.statusClosingSoon:n.home.scholarships.statusClosed}),C.jsx(Tn,{href:`/scholarships/${a.id}`,children:C.jsx("span",{className:"bg-primary text-white hover:bg-primary/90 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 cursor-pointer","data-testid":`button-view-scholarship-${a.id}`,children:n.home.scholarships.viewDetails})})]})]})},a.id)})}),C.jsx("div",{className:"text-center mt-12",children:C.jsx(Tn,{href:"/scholarships",children:C.jsx(Mn,{className:"bg-primary text-white px-8 py-3 hover:bg-primary/90 font-semibold","data-testid":"button-view-all-scholarships",children:n.home.scholarships.viewAll})})})]})}),C.jsxs("section",{className:"py-20 hero-gradient relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 bg-black opacity-20"}),C.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:[C.jsxs("h2",{className:"text-4xl lg:text-6xl font-bold text-white mb-6 animate-slide-up",children:[n.home.cta.title,C.jsx("span",{className:"block animate-fade-in",style:{animationDelay:"0.3s"},children:n.home.cta.titleLine2})]}),C.jsx("p",{className:"text-xl lg:text-2xl text-gray-100 mb-8 max-w-3xl mx-auto animate-fade-in",style:{animationDelay:"0.6s"},children:n.home.cta.subtitle}),C.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center items-center animate-fade-in",style:{animationDelay:"0.9s"},children:[C.jsx(Tn,{href:"/courses",children:C.jsxs(Mn,{className:"bg-white text-primary px-8 py-4 rounded-full font-bold text-lg hover:scale-105 transition-all duration-300 hover:shadow-2xl animate-bounce-in",style:{animationDelay:"1.2s"},children:[C.jsx(cZ,{className:"w-5 h-5 mr-3"}),n.home.cta.btnStartLearning]})}),C.jsx(Tn,{href:"/scholarships",children:C.jsxs(Mn,{className:"glass-morphism text-white px-8 py-4 rounded-full font-bold text-lg hover:scale-105 transition-all duration-300 animate-bounce-in",style:{animationDelay:"1.4s"},children:[C.jsx(Fre,{className:"w-5 h-5 mr-3"}),n.home.cta.btnFindScholarships]})})]}),C.jsxs("div",{className:"mt-12 relative",children:[C.jsx("div",{className:"absolute left-1/4 animate-float w-6 h-6 bg-white bg-opacity-20 rounded-full"}),C.jsx("div",{className:"absolute right-1/3 animate-float w-4 h-4 bg-white bg-opacity-30 rounded-full",style:{animationDelay:"1s"}}),C.jsx("div",{className:"absolute left-1/3 animate-float w-8 h-8 bg-white bg-opacity-10 rounded-full",style:{animationDelay:"2s"}})]})]})]}),C.jsx(kL,{})]})}function O0e({progress:n,className:e,animated:t=!0}){const[i,s]=P.useState(0);return P.useEffect(()=>{if(t){const o=setTimeout(()=>{s(n)},100);return()=>clearTimeout(o)}else s(n)},[n,t]),C.jsx("div",{className:Ji("transition-all duration-1000 ease-out",e),style:{width:`${i}%`,minWidth:i>0?"8px":"0px"}})}function F0e({course:n,progress:e=0}){const{t}=ou(),i=t.courseContent[n.id],s=(i==null?void 0:i.title)||n.title,o=(i==null?void 0:i.description)||n.description,r=n.duration.split(" "),a=r[0],l=r[1],c=`${a} ${l==="weeks"?t.home.courses.weeks:l}`;return C.jsxs(Yt,{className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 overflow-hidden group",children:[C.jsx("img",{src:n.imageUrl||"",alt:n.title,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500"}),C.jsxs(ei,{className:"p-6",children:[C.jsxs("div",{className:"flex items-center justify-between mb-3",children:[C.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.level==="beginner"?"bg-primary bg-opacity-10 text-primary":n.level==="intermediate"?"bg-secondary bg-opacity-10 text-secondary":"bg-accent bg-opacity-10 text-accent"}`,children:t.common[n.level]||n.level}),C.jsxs("div",{className:"flex items-center text-gray-500",children:[C.jsx(Pre,{className:"w-4 h-4 mr-1"}),C.jsx("span",{className:"text-sm",children:c})]})]}),C.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:s}),C.jsx("p",{className:"text-gray-600 mb-4",children:o}),C.jsxs("div",{className:"mb-4",children:[C.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[C.jsx("span",{children:t.course.progress}),C.jsxs("span",{children:[e,"%"]})]}),C.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:C.jsx(O0e,{progress:e,className:`h-2 rounded-full ${n.level==="beginner"?"bg-primary":n.level==="intermediate"?"bg-secondary":"bg-accent"}`})})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs("div",{className:"flex items-center text-gray-500",children:[C.jsx(nb,{className:"w-4 h-4 mr-2"}),C.jsxs("span",{className:"text-sm",children:[n.lessonsCount," ",t.home.courses.lessons]})]}),C.jsx(Tn,{href:`/course/${n.id}`,children:C.jsx(Mn,{className:`${n.level==="beginner"?"bg-primary hover:bg-primary/90":n.level==="intermediate"?"bg-secondary hover:bg-secondary/90":"bg-accent hover:bg-accent/90"} text-white`,"data-testid":`button-continue-${n.id}`,children:t.home.courses.continue})})]})]})]})}function W0e(){const{data:n,isLoading:e}=ey({queryKey:["/api/courses"]});return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsx(hh,{}),C.jsx("div",{className:"pt-24 pb-20",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"text-center mb-16",children:[C.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:["All ",C.jsx("span",{className:"gradient-text",children:"Courses"})]}),C.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Master web development with our comprehensive HTML and CSS courses designed for beginners."})]}),e?C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3].map(t=>C.jsxs("div",{className:"animate-pulse bg-white rounded-2xl p-6",children:[C.jsx("div",{className:"h-48 bg-gray-200 rounded-lg mb-4"}),C.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),C.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),C.jsx("div",{className:"h-8 bg-gray-200 rounded"})]},t))}):C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n==null?void 0:n.map((t,i)=>C.jsx(F0e,{course:t},t.id))})]})}),C.jsx(kL,{})]})}const B0e=HR("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Eae({className:n,variant:e,...t}){return C.jsx("div",{className:Ji(B0e({variant:e}),n),...t})}const H0e=[{id:1,title:"What is CSS? - Styling Your First Page",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        h1 { color: purple; font-family: Arial; }
        p { color: #666; line-height: 1.6; }
        .highlight { background-color: yellow; }
    </style>
</head>
<body>
    <h1>Welcome to CSS!</h1>
    <p>This text is styled with CSS.</p>
    <p class="highlight">This paragraph has a yellow background!</p>
</body>
</html>`,content:{title:"What is CSS? - Styling Your First Page",description:"Welcome to the amazing world of CSS! CSS (Cascading Style Sheets) transforms plain HTML into beautiful, professional websites. Let's start your journey into web design! ",sections:[{title:"What is CSS?",content:"CSS stands for **Cascading Style Sheets**. Think of it as the makeup artist for websites:\\n\\n **Cascading**: Styles flow down from parent to child elements\\n **Style**: Controls how things look (colors, fonts, layout)\\n **Sheets**: Organized collections of style rules\\n\\nIf HTML is the skeleton, CSS is the skin, clothes, and makeup that makes websites beautiful!"},{title:"How CSS Works",content:"CSS works by selecting HTML elements and applying styles:\\n\\n1. **Selector**: Targets which HTML element to style\\n2. **Property**: What aspect to change (color, size, etc.)\\n3. **Value**: How to change it\\n\\nExample: `h1 { color: purple; }` makes all h1 headings purple!"},{title:"Three Ways to Add CSS",content:'You can add CSS in three ways:\\n\\n **Inline**: `<p style="color: red;">Text</p>`\\n **Internal**: `<style>` tag in the `<head>`\\n **External**: Separate `.css` file\\n\\n**Best practice**: Use external CSS files for better organization!'},{title:"Try It Yourself! ",content:"In the playground, experiment with:\\n1. Change the h1 color from purple to your favorite color\\n2. Try different fonts: `font-family: Georgia;`\\n3. Add more styles to the paragraph\\n4. Create a new class and apply it to text\\n\\nWatch how your changes instantly transform the appearance!"}]}},{id:2,title:"CSS Selectors - Targeting HTML Elements",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        /* Element selector */
        h1 { color: #2c3e50; }
        
        /* Class selector */
        .intro { font-size: 18px; color: #3498db; }
        
        /* ID selector */
        #special { background-color: #f39c12; padding: 10px; }
        
        /* Multiple selectors */
        h2, h3 { color: #e74c3c; }
    </style>
</head>
<body>
    <h1>CSS Selectors Demo</h1>
    <p class="intro">This paragraph uses a class selector.</p>
    <p id="special">This paragraph uses an ID selector.</p>
    <h2>This heading uses a group selector</h2>
    <h3>So does this one!</h3>
</body>
</html>`,content:{title:"CSS Selectors - Targeting HTML Elements",description:"Selectors are how you tell CSS which HTML elements to style. Master selectors and you control exactly how your website looks! ",sections:[{title:"Element Selectors",content:"Target HTML elements by their tag name:\\n\\n```css\\nh1 { color: blue; }\\np { font-size: 16px; }\\ndiv { background-color: lightgray; }\\n```\\n\\n**Use for**: Styling all elements of the same type"},{title:"Class Selectors (.class)",content:'Target elements with specific class attributes:\\n\\n**HTML**: `<p class="highlight">Text</p>`\\n**CSS**: `.highlight { background-color: yellow; }`\\n\\n Use a dot (.) before the class name\\n Can be used on multiple elements\\n **Most commonly used** selector type'},{title:"ID Selectors (#id)",content:'Target a specific element with a unique ID:\\n\\n**HTML**: `<div id="header">Content</div>`\\n**CSS**: `#header { background-color: navy; }`\\n\\n Use a hash (#) before the ID name\\n Should be **unique** on the page\\n Higher specificity than classes'},{title:"Selector Practice! ",content:"In the playground, try:\\n1. Add a new class `.warning` with red text\\n2. Style all `<p>` elements with a margin\\n3. Create an ID `#footer` with a dark background\\n4. Use multiple selectors: `h1, h2, h3 { font-family: Georgia; }`\\n\\nExperiment and see how different selectors work!"}]}},{id:3,title:"Colors, Backgrounds & Typography",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .color-demo { color: #e74c3c; }
        .hex-color { color: #3498db; }
        .rgb-color { color: rgb(46, 204, 113); }
        .background-demo { background-color: #f39c12; padding: 15px; color: white; }
        .gradient-bg { background: linear-gradient(45deg, #ff6b6b, #4ecdc4); padding: 20px; color: white; }
        .typography { font-size: 24px; font-weight: bold; text-align: center; }
    </style>
</head>
<body>
    <h1 class="typography">Beautiful Colors & Typography</h1>
    <p class="color-demo">This text is colored with hexadecimal!</p>
    <p class="hex-color">Hex colors are web-safe and precise.</p>
    <p class="rgb-color">RGB colors offer fine control.</p>
    <div class="background-demo">Background colors make content pop!</div>
    <div class="gradient-bg">Gradients add modern flair!</div>
</body>
</html>`,content:{title:"Colors, Backgrounds & Typography",description:"Make your websites visually stunning with colors, backgrounds, and beautiful typography. Learn to create professional, eye-catching designs! ",sections:[{title:"CSS Color Systems",content:"CSS offers multiple ways to specify colors:\\n\\n **Named colors**: `color: red;` (140+ named colors)\\n **Hexadecimal**: `color: #ff0000;` (most common)\\n **RGB**: `color: rgb(255, 0, 0);`\\n **RGBA**: `color: rgba(255, 0, 0, 0.5);` (with transparency)\\n **HSL**: `color: hsl(0, 100%, 50%);` (hue, saturation, lightness)"},{title:"Background Properties",content:"Control element backgrounds beyond just colors:\\n\\n **Background color**: `background-color: #f0f0f0;`\\n **Background image**: `background-image: url('image.jpg');`\\n **Background size**: `background-size: cover;`\\n **Background position**: `background-position: center;`\\n **Gradients**: `background: linear-gradient(to right, blue, red);`"},{title:"Typography Fundamentals",content:"Typography makes text readable and beautiful:\\n\\n **Font family**: `font-family: Arial, sans-serif;`\\n **Font size**: `font-size: 18px;` or `font-size: 1.2em;`\\n **Font weight**: `font-weight: bold;` or `font-weight: 300;`\\n **Text alignment**: `text-align: center;`\\n **Line height**: `line-height: 1.5;` (for readability)"},{title:"Design Practice! ",content:"In the playground, experiment with:\\n1. Try different color formats: hex, rgb, hsl\\n2. Create a gradient background with your favorite colors\\n3. Change the font-family to Google Fonts\\n4. Adjust font-size and line-height for readability\\n5. Add text shadows: `text-shadow: 2px 2px 4px rgba(0,0,0,0.5);`\\n\\nMake it beautiful and uniquely yours!"}]}},{id:4,title:"The Box Model - Spacing and Sizing",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        .box-demo {
            width: 200px;
            height: 100px;
            background-color: #3498db;
            color: white;
            text-align: center;
            
            /* Box model properties */
            padding: 20px;
            border: 5px solid #2c3e50;
            margin: 30px;
        }
        .padding-demo { background-color: #e74c3c; padding: 15px; margin: 10px; }
        .margin-demo { background-color: #f39c12; margin: 20px; padding: 10px; }
        .border-demo { border: 3px dashed #9b59b6; padding: 15px; margin: 10px; }
    </style>
</head>
<body>
    <h1>CSS Box Model Demo</h1>
    <div class="box-demo">Content Area</div>
    <div class="padding-demo">Padding creates space inside</div>
    <div class="margin-demo">Margin creates space outside</div>
    <div class="border-demo">Borders frame the content</div>
</body>
</html>`,content:{title:"The Box Model - Spacing and Sizing",description:"Master the CSS Box Model - the foundation of layout and spacing. Understanding this concept is crucial for creating well-designed websites! ",sections:[{title:"What is the Box Model?",content:"Every HTML element is a rectangular box with four areas:\\n\\n1. **Content**: The actual text/images\\n2. **Padding**: Space between content and border\\n3. **Border**: Line around the padding\\n4. **Margin**: Space outside the border\\n\\n**Total width** = content + padding + border + margin"},{title:"Padding - Internal Spacing",content:"Padding creates space **inside** an element:\\n\\n **All sides**: `padding: 20px;`\\n **Specific sides**: `padding-top: 10px; padding-right: 15px;`\\n **Shorthand**: `padding: 10px 15px 20px 25px;` (top, right, bottom, left)\\n **Two values**: `padding: 10px 20px;` (top/bottom, left/right)\\n\\n**Remember**: Padding adds to the element's size!"},{title:"Margin - External Spacing",content:"Margin creates space **outside** an element:\\n\\n **Auto centering**: `margin: 0 auto;` (centers block elements)\\n **Negative margins**: `margin-top: -10px;` (overlapping)\\n **Margin collapse**: Vertical margins merge between elements\\n **Same syntax** as padding for shorthand\\n\\n**Tip**: Use margins to separate elements from each other!"},{title:"Border Properties",content:"Borders frame your content with style:\\n\\n **Border width**: `border-width: 2px;`\\n **Border style**: `border-style: solid;` (solid, dashed, dotted)\\n **Border color**: `border-color: #333;`\\n **Shorthand**: `border: 2px solid #333;`\\n **Individual sides**: `border-left: 3px solid red;`\\n\\n**Border radius**: `border-radius: 10px;` for rounded corners!"},{title:"Box Model Practice! ",content:"In the playground, experiment with:\\n1. Change padding values and see how it affects spacing\\n2. Try different border styles: dotted, dashed, double\\n3. Use `border-radius` to create rounded corners\\n4. Add `box-sizing: border-box;` to change box model behavior\\n5. Create a card design using padding, borders, and margins\\n\\nUnderstanding the box model is key to CSS mastery!"}]}},{id:5,title:"Flexbox - Modern Layout Made Easy",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        .flex-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #ecf0f1;
            padding: 20px;
            margin: 10px 0;
        }
        .flex-item {
            background-color: #3498db;
            color: white;
            padding: 20px;
            margin: 5px;
            border-radius: 5px;
            min-width: 100px;
            text-align: center;
        }
        .flex-column {
            display: flex;
            flex-direction: column;
            height: 200px;
            background-color: #f39c12;
            padding: 10px;
        }
        .flex-grow { flex: 1; background-color: #e74c3c; }
    </style>
</head>
<body>
    <h1>Flexbox Layout Demo</h1>
    <div class="flex-container">
        <div class="flex-item">Item 1</div>
        <div class="flex-item">Item 2</div>
        <div class="flex-item">Item 3</div>
    </div>
    <div class="flex-column">
        <div class="flex-item">Top</div>
        <div class="flex-item flex-grow">Middle (grows)</div>
        <div class="flex-item">Bottom</div>
    </div>
</body>
</html>`,content:{title:"Flexbox - Modern Layout Made Easy",description:"Flexbox revolutionizes CSS layout! Create responsive, flexible designs that automatically adapt to different screen sizes. Say goodbye to layout frustrations! ",sections:[{title:"What is Flexbox?",content:"Flexbox (Flexible Box Layout) makes CSS layout simple:\\n\\n **One-dimensional** layout (either row or column)\\n **Automatic** space distribution\\n **Easy** alignment and centering\\n **Responsive** by default\\n **No floats** or positioning needed\\n\\n**To start**: Add `display: flex;` to a container!"},{title:"Flex Container Properties",content:"Control the flex container (parent element):\\n\\n **Direction**: `flex-direction: row | column;`\\n **Wrap**: `flex-wrap: wrap | nowrap;`\\n **Justify (main axis)**: `justify-content: center | space-between | space-around;`\\n **Align (cross axis)**: `align-items: center | flex-start | flex-end;`\\n **Gap**: `gap: 10px;` (space between items)"},{title:"Flex Item Properties",content:"Control individual flex items (children):\\n\\n **Grow**: `flex-grow: 1;` (take available space)\\n **Shrink**: `flex-shrink: 0;` (resist shrinking)\\n **Basis**: `flex-basis: 200px;` (starting size)\\n **Shorthand**: `flex: 1;` (grow: 1, shrink: 1, basis: 0)\\n **Align self**: `align-self: center;` (override container alignment)"},{title:"Common Flexbox Patterns",content:"Master these useful patterns:\\n\\n **Center anything**: `justify-content: center; align-items: center;`\\n **Space between**: `justify-content: space-between;`\\n **Equal columns**: `flex: 1;` on all items\\n **Sidebar layout**: Fixed sidebar + `flex: 1` main content\\n **Responsive navigation**: `flex-direction: column;` on mobile"},{title:"Flexbox Workshop! ",content:"In the playground, try building:\\n1. A navigation bar with logo left, links right\\n2. A card layout with equal-height cards\\n3. A centered modal dialog\\n4. A sticky footer layout\\n5. Change `flex-direction` and see the layout flip!\\n\\nFlexbox makes complex layouts simple and intuitive!"}]}},{id:6,title:"CSS Grid - Advanced Layout Control",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            grid-template-rows: auto 200px auto;
            gap: 15px;
            background-color: #ecf0f1;
            padding: 15px;
        }
        .grid-item {
            background-color: #3498db;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 5px;
        }
        .header { grid-column: 1 / -1; background-color: #2c3e50; }
        .sidebar { background-color: #e74c3c; }
        .main { background-color: #27ae60; }
        .ads { background-color: #f39c12; }
        .footer { grid-column: 1 / -1; background-color: #9b59b6; }
    </style>
</head>
<body>
    <div class="grid-container">
        <div class="grid-item header">Header</div>
        <div class="grid-item sidebar">Sidebar</div>
        <div class="grid-item main">Main Content</div>
        <div class="grid-item ads">Ads</div>
        <div class="grid-item footer">Footer</div>
    </div>
</body>
</html>`,content:{title:"CSS Grid - Advanced Layout Control",description:"CSS Grid is the most powerful layout system in CSS! Create complex, two-dimensional layouts with incredible precision and flexibility. Perfect for modern web design! ",sections:[{title:"What is CSS Grid?",content:"CSS Grid Layout excels at two-dimensional layouts:\\n\\n **Two-dimensional**: Controls both rows AND columns\\n **Precise placement**: Put items exactly where you want\\n **Responsive**: Adapts to different screen sizes\\n **Overlap capable**: Items can overlap if needed\\n **Complementary** to Flexbox (use both together!)\\n\\n**To start**: Add `display: grid;` to a container!"},{title:"Grid Container Setup",content:"Define your grid structure on the container:\\n\\n **Columns**: `grid-template-columns: 200px 1fr 100px;`\\n **Rows**: `grid-template-rows: auto 200px auto;`\\n **Fractional units**: `1fr` means 'take available space'\\n **Repeat**: `grid-template-columns: repeat(3, 1fr);`\\n **Gap**: `gap: 20px;` (space between grid items)"},{title:"Grid Item Placement",content:"Control where items are placed in the grid:\\n\\n **Column span**: `grid-column: 1 / 3;` (start at 1, end before 3)\\n **Row span**: `grid-row: 1 / -1;` (-1 means last line)\\n **Shorthand**: `grid-area: 1 / 1 / 3 / 3;` (row-start / col-start / row-end / col-end)\\n **Named areas**: Create template layouts with names\\n **Auto placement**: Let Grid place items automatically"},{title:"Grid vs Flexbox",content:"When to use Grid vs Flexbox:\\n\\n**Use CSS Grid for:**\\n Two-dimensional layouts (rows AND columns)\\n Complex page layouts\\n Precise item placement\\n Card grids and galleries\\n\\n**Use Flexbox for:**\\n One-dimensional layouts (row OR column)\\n Component alignment\\n Navigation bars\\n Centering content"},{title:"Grid Workshop! ",content:"In the playground, experiment with:\\n1. Change `grid-template-columns` to different values\\n2. Make the header span all columns: `grid-column: 1 / -1;`\\n3. Try `grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));` for responsive columns\\n4. Add more grid items and see auto-placement work\\n5. Create a photo gallery layout\\n\\nGrid gives you ultimate layout control!"}]}},{id:7,title:"Responsive Design & Media Queries",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .responsive-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .card {
            background-color: #3498db;
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        /* Mobile-first responsive design */
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .card { padding: 15px; font-size: 14px; }
            h1 { font-size: 24px; }
        }
        
        @media (min-width: 1024px) {
            .container { padding: 40px; }
            .card { padding: 30px; }
            h1 { font-size: 36px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Responsive Design Demo</h1>
        <div class="responsive-grid">
            <div class="card">Card 1 - Responsive</div>
            <div class="card">Card 2 - Mobile-friendly</div>
            <div class="card">Card 3 - Adapts to screen</div>
        </div>
    </div>
</body>
</html>`,content:{title:"Responsive Design & Media Queries",description:"Make your websites look perfect on every device! Learn responsive design techniques that automatically adapt to phones, tablets, and desktops. Essential for modern web development! ",sections:[{title:"What is Responsive Design?",content:"Responsive design makes websites adapt to any screen size:\\n\\n **Flexible layouts**: Adjust to different screen widths\\n **Flexible images**: Scale with the container\\n **Media queries**: Apply different styles for different devices\\n **Mobile-first**: Design for mobile, then enhance for larger screens\\n **Better user experience**: Works on phones, tablets, and desktops"},{title:"The Viewport Meta Tag",content:'Essential for responsive design:\\n\\n```html\\n<meta name="viewport" content="width=device-width, initial-scale=1.0">\\n```\\n\\n**What it does:**\\n `width=device-width`: Match the screen\'s width\\n `initial-scale=1.0`: Don\'t zoom in or out\\n **Always include** this in your HTML head!'},{title:"Media Queries",content:"Apply CSS rules based on device characteristics:\\n\\n```css\\n/* Mobile styles (default) */\\n.container { padding: 10px; }\\n\\n/* Tablet styles */\\n@media (min-width: 768px) {\\n  .container { padding: 20px; }\\n}\\n\\n/* Desktop styles */\\n@media (min-width: 1024px) {\\n  .container { padding: 40px; }\\n}\\n```\\n\\n**Common breakpoints**: 768px (tablet), 1024px (desktop)"},{title:"Responsive Units",content:"Use relative units for flexible designs:\\n\\n **Percentages**: `width: 50%;` (relative to parent)\\n **Viewport units**: `width: 100vw;` (viewport width)\\n **em/rem**: `font-size: 1.2rem;` (relative to font size)\\n **Flexible grids**: `grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));`\\n\\n**Avoid fixed units** like pixels for responsive elements!"},{title:"Responsive Workshop! ",content:"In the playground, test responsiveness:\\n1. Resize your browser window and watch elements adapt\\n2. Add a new breakpoint: `@media (max-width: 480px)`\\n3. Try different viewport units: `vw`, `vh`, `vmin`, `vmax`\\n4. Create a responsive navigation that stacks on mobile\\n5. Use `object-fit: cover;` for responsive images\\n\\nResponsive design ensures your site works everywhere!"}]}},{id:8,title:"CSS Animations & Transitions",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        .transition-demo {
            background-color: #3498db;
            color: white;
            padding: 20px;
            margin: 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .transition-demo:hover {
            background-color: #e74c3c;
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .animation-demo {
            background-color: #f39c12;
            color: white;
            padding: 20px;
            margin: 10px;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            text-align: center;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <h1>CSS Animations & Transitions</h1>
    <div class="transition-demo">Hover me for transitions!</div>
    <div class="animation-demo">Bouncing</div>
    <div class="loading-spinner"></div>
</body>
</html>`,content:{title:"CSS Animations & Transitions",description:"Bring your websites to life with smooth animations and transitions! Learn to create engaging, interactive experiences that delight users and make your site stand out. ",sections:[{title:"CSS Transitions",content:"Smooth changes between CSS property values:\\n\\n```css\\n.button {\\n  background-color: blue;\\n  transition: background-color 0.3s ease;\\n}\\n.button:hover {\\n  background-color: red;\\n}\\n```\\n\\n**Properties:**\\n `transition-property`: What to animate\\n `transition-duration`: How long (0.3s, 500ms)\\n `transition-timing-function`: ease, linear, ease-in-out\\n `transition-delay`: Wait before starting"},{title:"CSS Animations",content:"Complex, repeating animations with keyframes:\\n\\n```css\\n@keyframes slideIn {\\n  0% { transform: translateX(-100%); }\\n  100% { transform: translateX(0); }\\n}\\n\\n.element {\\n  animation: slideIn 1s ease-out;\\n}\\n```\\n\\n**Animation properties:**\\n `animation-name`: Reference to @keyframes\\n `animation-duration`: How long per cycle\\n `animation-iteration-count`: How many times (infinite)\\n `animation-direction`: normal, reverse, alternate"},{title:"Transform Properties",content:"Transform elements without affecting layout:\\n\\n **Translate**: `transform: translateX(50px);` (move)\\n **Scale**: `transform: scale(1.2);` (resize)\\n **Rotate**: `transform: rotate(45deg);` (spin)\\n **Skew**: `transform: skewX(15deg);` (slant)\\n **Combine**: `transform: translateX(20px) scale(1.1) rotate(10deg);`\\n\\n**Great for hover effects** and animations!"},{title:"Animation Best Practices",content:"Create smooth, performant animations:\\n\\n **Use transform and opacity**: Hardware accelerated\\n **Avoid animating layout properties**: width, height, margin\\n **Keep durations reasonable**: 0.2s-0.5s for micro-interactions\\n **Provide reduced motion**: Respect user preferences\\n **Use ease curves**: Natural-feeling motion\\n\\n**Performance tip**: Animate transform and opacity only!"},{title:"Animation Studio! ",content:"In the playground, create animations:\\n1. Add a fade-in animation to the heading\\n2. Create a pulsing effect with scale transform\\n3. Make a sliding navigation menu\\n4. Build a CSS-only loading indicator\\n5. Combine multiple transforms for complex motion\\n\\nAnimations add personality and engagement to your sites!"}]}},{id:9,title:"Positioning & Z-Index",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        .container { position: relative; height: 400px; background-color: #ecf0f1; padding: 20px; }
        
        .static { background-color: #3498db; padding: 10px; margin: 10px; color: white; }
        
        .relative {
            position: relative;
            background-color: #e74c3c;
            padding: 10px;
            margin: 10px;
            color: white;
            left: 50px;
            top: 20px;
        }
        
        .absolute {
            position: absolute;
            background-color: #f39c12;
            padding: 10px;
            color: white;
            top: 100px;
            right: 20px;
            z-index: 10;
        }
        
        .fixed {
            position: fixed;
            background-color: #9b59b6;
            padding: 10px;
            color: white;
            bottom: 20px;
            right: 20px;
            z-index: 100;
        }
        
        .sticky {
            position: sticky;
            top: 0;
            background-color: #27ae60;
            padding: 10px;
            color: white;
            z-index: 50;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="static">Static positioning (default)</div>
        <div class="relative">Relative positioning (moved 50px left, 20px down)</div>
        <div class="absolute">Absolute positioning (top-right of container)</div>
        <div class="sticky">Sticky positioning (sticks to top when scrolling)</div>
    </div>
    <div class="fixed">Fixed positioning (bottom-right of viewport)</div>
    <div style="height: 1000px; background: linear-gradient(to bottom, #f1f1f1, #ddd);"></div>
</body>
</html>`,content:{title:"Positioning & Z-Index",description:"Master precise element placement and layering! Learn to position elements exactly where you want them and control their stacking order. Essential for complex layouts! ",sections:[{title:"CSS Position Types",content:"Five types of positioning in CSS:\\n\\n **Static**: Default flow (no positioning)\\n **Relative**: Relative to its normal position\\n **Absolute**: Relative to nearest positioned ancestor\\n **Fixed**: Relative to the viewport (doesn't scroll)\\n **Sticky**: Switches between relative and fixed\\n\\nEach type behaves differently and serves specific purposes!"},{title:"Positioning Properties",content:"Control exact placement with offset properties:\\n\\n **Top**: `top: 20px;` (from top edge)\\n **Right**: `right: 10px;` (from right edge)\\n **Bottom**: `bottom: 0;` (from bottom edge)\\n **Left**: `left: 50px;` (from left edge)\\n\\n**Note**: These only work with `position` other than `static`!"},{title:"Z-Index & Stacking",content:"Control which elements appear on top:\\n\\n **Z-index**: Higher numbers appear on top\\n **Stacking context**: Groups elements for layering\\n **Default z-index**: auto (usually 0)\\n **Range**: Can be negative or very large numbers\\n\\n```css\\n.modal { position: fixed; z-index: 1000; }\\n.overlay { position: absolute; z-index: 100; }\\n```"},{title:"Common Positioning Patterns",content:"Useful positioning techniques:\\n\\n **Centered modal**: Absolute positioning with transform\\n **Sticky navigation**: `position: sticky; top: 0;`\\n **Corner badges**: Absolute positioning in relative container\\n **Overlay effects**: Absolute positioning with high z-index\\n **Fixed sidebars**: Fixed positioning for persistent navigation"},{title:"Positioning Workshop! ",content:"In the playground, experiment with:\\n1. Try scrolling to see sticky and fixed positioning\\n2. Change z-index values and observe layering\\n3. Create a tooltip that appears on hover\\n4. Build a modal dialog with overlay\\n5. Position elements at exact coordinates\\n\\nPositioning gives you pixel-perfect control!"}]}},{id:10,title:"CSS Variables & Modern Features",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #e74c3c;
            --spacing: 20px;
            --border-radius: 8px;
            --font-size-large: 24px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .theme-demo {
            background-color: var(--primary-color);
            color: white;
            padding: var(--spacing);
            margin: var(--spacing);
            border-radius: var(--border-radius);
            font-size: var(--font-size-large);
            box-shadow: var(--shadow);
        }
        
        .secondary {
            background-color: var(--secondary-color);
        }
        
        /* Dark theme */
        .dark-theme {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            background-color: #1a1a1a;
            color: white;
        }
        
        /* Modern CSS features */
        .modern-features {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: var(--spacing);
            margin: var(--spacing);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            clip-path: polygon(0 0, 100% 0, 95% 100%, 0 100%);
        }
    </style>
</head>
<body>
    <div class="theme-demo">Primary Theme Box</div>
    <div class="theme-demo secondary">Secondary Theme Box</div>
    <div class="modern-features">Modern CSS Features</div>
    
    <button onclick="toggleTheme()">Toggle Dark Theme</button>
    
    <script>
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
        }
    <\/script>
</body>
</html>`,content:{title:"CSS Variables & Modern Features",description:"Unlock the power of modern CSS! Learn CSS custom properties (variables), advanced selectors, and cutting-edge features that make your CSS more maintainable and powerful. ",sections:[{title:"CSS Custom Properties (Variables)",content:"Store and reuse values throughout your CSS:\\n\\n```css\\n:root {\\n  --primary-color: #3498db;\\n  --spacing: 20px;\\n}\\n\\n.button {\\n  background-color: var(--primary-color);\\n  padding: var(--spacing);\\n}\\n```\\n\\n**Benefits:**\\n **Maintainable**: Change values in one place\\n **Dynamic**: Can be modified with JavaScript\\n **Scope-aware**: Can be overridden in specific contexts"},{title:"Advanced Selectors",content:'Powerful selectors for precise targeting:\\n\\n **Attribute selectors**: `[data-theme="dark"]`\\n **Pseudo-classes**: `:nth-child(odd)`, `:not(.excluded)`\\n **Pseudo-elements**: `::before`, `::after`, `::first-line`\\n **Combinators**: `>` (child), `+` (adjacent), `~` (sibling)\\n\\n**Example**: `article > p:first-child::first-letter`'},{title:"Modern CSS Properties",content:"Cutting-edge CSS features for advanced designs:\\n\\n **CSS Grid**: `display: grid;` for complex layouts\\n **Backdrop filter**: `backdrop-filter: blur(10px);` for glass effects\\n **Clip path**: `clip-path: polygon(...)` for custom shapes\\n **CSS gradients**: `conic-gradient()`, `radial-gradient()`\\n **Custom fonts**: `@font-face` and `font-display`"},{title:"CSS Architecture",content:"Organize CSS for large projects:\\n\\n **CSS custom properties**: For theming and consistency\\n **Modular CSS**: Component-based organization\\n **Naming conventions**: BEM, SMACSS methodologies\\n **CSS layers**: `@layer` for cascade control\\n **Container queries**: `@container` for element-based responsive design"},{title:"Modern CSS Workshop! ",content:"In the playground, explore:\\n1. Create a complete design system with CSS variables\\n2. Build a dark/light theme switcher\\n3. Use `calc()` with variables: `width: calc(100% - var(--spacing) * 2);`\\n4. Try advanced selectors like `:nth-child()` and `:not()`\\n5. Experiment with `clip-path` for unique shapes\\n\\nModern CSS features give you incredible design power!"}]}},{id:11,title:"Forms Styling & User Experience",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <style>
        .form-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 30px;
            background-color: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        input:invalid {
            border-color: #e74c3c;
        }
        
        .submit-btn {
            background-color: #3498db;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .submit-btn:hover {
            background-color: #2980b9;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h2>Beautiful Contact Form</h2>
        <form>
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="subject">Subject</label>
                <select id="subject" name="subject">
                    <option value="">Choose a subject</option>
                    <option value="general">General Inquiry</option>
                    <option value="support">Support</option>
                    <option value="feedback">Feedback</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="message">Message</label>
                <textarea id="message" name="message" rows="5" required></textarea>
            </div>
            
            <div class="form-group">
                <div class="checkbox-group">
                    <input type="checkbox" id="newsletter" name="newsletter">
                    <label for="newsletter">Subscribe to newsletter</label>
                </div>
            </div>
            
            <button type="submit" class="submit-btn">Send Message</button>
        </form>
    </div>
</body>
</html>`,content:{title:"Forms Styling & User Experience",description:"Transform basic HTML forms into beautiful, user-friendly interfaces! Learn to style form elements, improve usability, and create forms that users love to fill out. ",sections:[{title:"Form Element Styling",content:"Style form inputs for better appearance:\\n\\n```css\\ninput, textarea, select {\\n  padding: 12px;\\n  border: 2px solid #ddd;\\n  border-radius: 6px;\\n  font-size: 16px;\\n}\\n\\ninput:focus {\\n  border-color: #3498db;\\n  outline: none;\\n}\\n```\\n\\n**Key properties**: padding, border, border-radius, font-size, transition"},{title:"Focus States & Accessibility",content:"Make forms accessible and user-friendly:\\n\\n **Focus indicators**: Clear visual feedback when focused\\n **Label association**: Proper `for` and `id` connections\\n **Error states**: Visual indicators for validation\\n **High contrast**: Ensure sufficient color contrast\\n **Touch targets**: Minimum 44px for mobile interaction\\n\\n**Never remove outlines** without providing alternatives!"},{title:"Form Layout Techniques",content:"Organize form elements effectively:\\n\\n **Form groups**: Wrap labels and inputs together\\n **Flexbox/Grid**: For complex form layouts\\n **Spacing**: Consistent margins between form groups\\n **Responsive design**: Stack elements on mobile\\n **Visual hierarchy**: Use typography to guide users\\n\\n**Best practice**: Group related fields together"},{title:"Advanced Form Features",content:"Enhance forms with modern techniques:\\n\\n **Custom checkboxes**: Style with `::before` and `::after`\\n **Floating labels**: Animated label positioning\\n **Input validation**: CSS `:valid` and `:invalid` states\\n **Progress indicators**: Show completion status\\n **Conditional fields**: Show/hide based on selections\\n\\n**Validation states** provide immediate feedback to users!"},{title:"Form UX Workshop! ",content:"In the playground, improve the form:\\n1. Add custom styling to checkboxes and radio buttons\\n2. Create floating label animations\\n3. Style validation states with `:valid` and `:invalid`\\n4. Add loading states to the submit button\\n5. Make the form responsive for mobile devices\\n\\nGreat form design increases conversion rates!"}]}},{id:12,title:"Final Project - Complete Website Design",completed:!1,playgroundCode:`<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --text-color: #333;
            --bg-color: #f8f9fa;
            --spacing: 20px;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 0 var(--spacing); }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: var(--spacing) 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo { font-size: 24px; font-weight: bold; }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: var(--spacing);
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s ease;
        }
        
        .nav-links a:hover { opacity: 0.8; }
        
        .hero {
            background: linear-gradient(rgba(52, 152, 219, 0.8), rgba(52, 152, 219, 0.8)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 300"><path fill="%23f0f0f0" d="M0,100 C150,200 350,0 500,100 C650,200 850,0 1000,100 L1000,300 L0,300 Z"></path></svg>');
            color: white;
            text-align: center;
            padding: 100px 0;
        }
        
        .hero h1 { font-size: 48px; margin-bottom: var(--spacing); }
        .hero p { font-size: 20px; margin-bottom: calc(var(--spacing) * 2); }
        
        .btn {
            display: inline-block;
            background-color: var(--accent-color);
            color: white;
            padding: 12px 30px;
            text-decoration: none;
            border-radius: 25px;
            transition: transform 0.3s ease;
        }
        
        .btn:hover { transform: translateY(-2px); }
        
        .features {
            padding: calc(var(--spacing) * 3) 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing);
        }
        
        .feature {
            background: white;
            padding: var(--spacing);
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .feature:hover { transform: translateY(-5px); }
        
        .feature h3 { color: var(--primary-color); margin-bottom: 10px; }
        
        footer {
            background-color: var(--secondary-color);
            color: white;
            text-align: center;
            padding: var(--spacing) 0;
        }
        
        @media (max-width: 768px) {
            .nav-links { display: none; }
            .hero h1 { font-size: 32px; }
            .hero { padding: 60px 0; }
        }
    </style>
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo">YourBrand</div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>
    
    <section class="hero">
        <div class="container">
            <h1>Welcome to Your Amazing Website</h1>
            <p>Create beautiful, responsive websites with modern CSS</p>
            <a href="#features" class="btn">Get Started</a>
        </div>
    </section>
    
    <section id="features" class="container">
        <div class="features">
            <div class="feature">
                <h3>Responsive Design</h3>
                <p>Your website looks perfect on all devices and screen sizes</p>
            </div>
            <div class="feature">
                <h3>Modern CSS</h3>
                <p>Built with the latest CSS features and best practices</p>
            </div>
            <div class="feature">
                <h3>Fast Performance</h3>
                <p>Optimized for speed and smooth user experience</p>
            </div>
        </div>
    </section>
    
    <footer>
        <div class="container">
            <p>&copy; 2024 YourBrand. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>`,content:{title:"Final Project - Complete Website Design",description:"Put everything together! Create a complete, professional website using all the CSS skills you've learned. This is your chance to showcase your CSS mastery! ",sections:[{title:"Project Overview",content:"Build a complete website that demonstrates your CSS skills:\\n\\n**Required features:**\\n **Responsive design** that works on all devices\\n **Modern layout** using Flexbox and/or Grid\\n **Custom color scheme** with CSS variables\\n **Smooth animations** and hover effects\\n **Professional typography** and spacing\\n **Interactive elements** and user feedback"},{title:"Design System Planning",content:"Start with a solid foundation:\\n\\n**1. Color palette**: Choose 3-5 colors that work well together\\n**2. Typography scale**: Define font sizes and weights\\n**3. Spacing system**: Consistent margins and padding\\n**4. Component library**: Buttons, cards, forms, navigation\\n**5. Responsive breakpoints**: Mobile, tablet, desktop\\n\\n**Tip**: Use CSS custom properties for your design system!"},{title:"Layout Architecture",content:"Structure your website effectively:\\n\\n**Header**: Navigation with logo and menu links\\n**Hero section**: Eye-catching banner with call-to-action\\n**Content sections**: Features, about, services, etc.\\n**Footer**: Contact info and additional links\\n\\n**Layout techniques**: Use CSS Grid for main layout, Flexbox for components"},{title:"Advanced Features",content:"Enhance your website with modern techniques:\\n\\n**CSS Variables**: Create a maintainable design system\\n**Animations**: Smooth transitions and hover effects\\n**Responsive images**: Optimize for different screen sizes\\n**Accessibility**: Proper contrast, focus states, semantic HTML\\n**Performance**: Minimize CSS, optimize loading\\n\\n**Dark mode**: Modern user preference\\n**Accessibility features**: Focus indicators, proper contrast"},{title:"Final Challenge! ",content:"Complete your CSS mastery:\\n1. Customize the provided template with your own content\\n2. Add your personal color scheme and branding\\n3. Implement additional sections (portfolio, blog, etc.)\\n4. Add advanced animations and micro-interactions\\n5. Ensure everything works perfectly on mobile\\n\\n**Congratulations!** You've mastered CSS - now go build amazing websites!"}]}}],j0e="/msostem/assets/Cute_Arduino_board_cartoon_illustration_e7d8f8d5-BqitJSLx.png",V0e="/msostem/assets/Arduino_LED_wiring_diagram_cartoon_f4ff2aa3-Cnml6eBJ.png",z0e="/msostem/assets/Arduino_button_LED_wiring_diagram_f414be22-C2Z8swuN.png",U0e="/msostem/assets/Arduino_potentiometer_sensor_wiring_diagram_5e5f02c8-DmqTNSdS.png",yZ="/msostem/assets/Arduino_motor_driver_wiring_diagram_47110d5d-DUH16ios.png",$0e="/msostem/assets/Arduino_LCD_display_wiring_diagram_78c16099-Bud_4s3K.png",q0e="/msostem/assets/Arduino_temperature_sensor_wiring_diagram_174fcaeb-CpxT6p7N.png",K0e="/msostem/assets/Arduino_smart_home_project_diagram_f7002808-B7CYn2ek.png",G0e="/msostem/assets/Arduino_ultrasonic_sensor_HC-SR04_wiring_c14f40ec-5siVACsx.png",Y0e="/msostem/assets/Arduino_piezo_buzzer_simple_wiring_5f5507c7-BLP-DF67.png",Z0e="/msostem/assets/Arduino_photoresistor_LDR_light_sensor_wiring_1272aeea-CUcdcXAN.png",Q0e=[{id:1,title:"Getting Started with Arduino Uno",completed:!1,wiringImage:j0e,playgroundCode:`// Arduino Uno - LED Blink Example
// This is your first Arduino program!

void setup() {
  // Initialize the LED pin as an output
  pinMode(LED_BUILTIN, OUTPUT);
}

void loop() {
  digitalWrite(LED_BUILTIN, HIGH);   // Turn LED ON
  delay(1000);                       // Wait 1 second
  digitalWrite(LED_BUILTIN, LOW);    // Turn LED OFF
  delay(1000);                       // Wait 1 second
}`,content:{title:"Getting Started with Arduino Uno",description:"Welcome to Arduino! Learn about the Arduino Uno board, understand its components, and write your very first program. The Arduino makes electronics fun and easy! ",sections:[{title:"What is Arduino?",content:"Arduino is a **microcontroller board** that makes electronics and programming accessible to everyone!\\n\\n**Key Features:**\\n Small computer you can program\\n 14 digital input/output pins\\n 6 analog input pins\\n USB connection for programming\\n 5V operating voltage\\n Perfect for learning electronics!\\n\\nThink of it as a tiny brain that can control lights, motors, sensors, and more!"},{title:"Arduino Board Components",content:"**Main Parts of Arduino Uno:**\\n\\n **USB Port**: Connect to your computer for programming\\n **Power Jack**: 7-12V external power supply\\n **Digital Pins (0-13)**: Read/write HIGH or LOW signals\\n **Analog Pins (A0-A5)**: Read sensor values (0-1023)\\n **GND Pins**: Ground connections (0V)\\n **5V & 3.3V Pins**: Power supply pins\\n **Reset Button**: Restart your program\\n **LED_BUILTIN**: Built-in LED on pin 13"},{title:"Arduino Programming Basics",content:"Arduino uses a language similar to C/C++. Every program has two main functions:\\n\\n**setup()**: Runs once when Arduino starts\\n```cpp\\nvoid setup() {\\n  // Initialize pins, sensors, etc.\\n  pinMode(13, OUTPUT);\\n}\\n```\\n\\n**loop()**: Runs repeatedly forever\\n```cpp\\nvoid loop() {\\n  // Your main program code\\n  digitalWrite(13, HIGH);\\n  delay(1000);\\n}\\n```"},{title:"Try It Yourself! ",content:"In the code playground, you'll see a simple LED blink program:\\n\\n1. **pinMode()**: Sets pin 13 as OUTPUT\\n2. **digitalWrite()**: Turns LED ON (HIGH) or OFF (LOW)\\n3. **delay()**: Waits for specified milliseconds\\n\\n**Experiment:**\\n Change delay(1000) to delay(500) for faster blinking\\n Try delay(100) for very fast blinking\\n Use different delay values for HIGH and LOW\\n\\nThis simple program is the foundation for all Arduino projects!"}]}},{id:2,title:"LED Blink - Your First Arduino Program",completed:!1,wiringImage:V0e,playgroundCode:`// External LED on Pin 8
// Wiring: LED long leg  Pin 8, short leg  220 resistor  GND

int ledPin = 8;  // LED connected to pin 8

void setup() {
  pinMode(ledPin, OUTPUT);  // Set pin 8 as output
}

void loop() {
  digitalWrite(ledPin, HIGH);  // LED ON
  delay(500);                  // Wait 0.5 seconds
  digitalWrite(ledPin, LOW);   // LED OFF
  delay(500);                  // Wait 0.5 seconds
}

// Try changing the pin number or delay times!`,content:{title:"LED Blink - Your First Arduino Program",description:"Build your first circuit! Learn how to connect an LED to Arduino and control it with code. This is where hardware meets software! ",sections:[{title:"Components You Need",content:"**Parts List:**\\n Arduino Uno board\\n 1 LED (any color)\\n 1 resistor (220 - 330)\\n Jumper wires\\n Breadboard (optional)\\n\\n**LED Basics:**\\n LEDs have two legs: **anode (+)** long leg and **cathode (-)** short leg\\n Always use a resistor to prevent burning out the LED\\n Current flows from anode to cathode"},{title:"Wiring the LED Circuit",content:"**Step-by-Step Wiring:**\\n\\n1. **Long LED leg (anode)**  Connect to **Pin 8**\\n2. **Short LED leg (cathode)**  Connect to **220 resistor**\\n3. **Other resistor end**  Connect to **GND (Ground)**\\n\\n**Why a resistor?**\\nArduino pins output 5V, but LEDs typically need only 2-3V. The resistor limits current to protect the LED.\\n\\n**Tip**: Red LEDs need ~2V, Blue/White LEDs need ~3V"},{title:"Understanding the Code",content:"**Code Breakdown:**\\n\\n```cpp\\nint ledPin = 8;  // Variable stores pin number\\n```\\nCreates a variable to remember which pin the LED is on\\n\\n```cpp\\npinMode(ledPin, OUTPUT);\\n```\\nTells Arduino that pin 8 will send signals OUT\\n\\n```cpp\\ndigitalWrite(ledPin, HIGH);  // 5V on pin\\ndigitalWrite(ledPin, LOW);   // 0V on pin\\n```\\nHIGH = LED ON, LOW = LED OFF\\n\\n```cpp\\ndelay(500);  // Wait 500 milliseconds\\n```\\nPauses the program (1000ms = 1 second)"},{title:"Experiments to Try! ",content:"**Challenge yourself:**\\n\\n1. **Morse Code**: Create SOS pattern (3 short, 3 long, 3 short blinks)\\n2. **Traffic Light**: Simulate a traffic light sequence\\n3. **Multiple LEDs**: Connect LEDs to pins 8, 9, 10 and make patterns\\n4. **Heartbeat**: Make LED fade in and out like a heartbeat\\n\\n**Troubleshooting:**\\n LED not lighting? Check polarity (long leg to pin)\\n LED too dim? Check resistor value\\n LED burned out? Did you forget the resistor?"}]}},{id:3,title:"Understanding Digital Inputs & Buttons",completed:!1,wiringImage:z0e,playgroundCode:`// Button controlling LED
// Wiring: Button  Pin 2 & GND, LED  Pin 8 & resistor  GND

int buttonPin = 2;  // Button connected to pin 2
int ledPin = 8;     // LED connected to pin 8
int buttonState = 0; // Store button state

void setup() {
  pinMode(buttonPin, INPUT_PULLUP);  // Button as input
  pinMode(ledPin, OUTPUT);            // LED as output
  Serial.begin(9600);                 // Start serial monitor
}

void loop() {
  buttonState = digitalRead(buttonPin);  // Read button
  
  if (buttonState == LOW) {   // Button pressed (LOW with pullup)
    digitalWrite(ledPin, HIGH);  // Turn LED ON
    Serial.println("Button Pressed - LED ON");
  } else {
    digitalWrite(ledPin, LOW);   // Turn LED OFF
    Serial.println("Button Released - LED OFF");
  }
  
  delay(100);  // Small delay for stability
}`,content:{title:"Understanding Digital Inputs & Buttons",description:"Make your Arduino interactive! Learn how to read button presses and respond to user input. This opens up endless possibilities! ",sections:[{title:"Digital Inputs Explained",content:"**INPUT vs OUTPUT:**\\n\\n **OUTPUT**: Arduino sends signals (controls LEDs, motors)\\n **INPUT**: Arduino receives signals (reads buttons, sensors)\\n\\n**Digital Input States:**\\n **HIGH**: 5V detected (button not pressed with pullup)\\n **LOW**: 0V detected (button pressed with pullup)\\n\\n**INPUT_PULLUP Mode:**\\nActivates internal resistor that pulls pin HIGH when button is not pressed. When button is pressed, pin goes LOW."},{title:"Wiring a Push Button",content:"**Simple Button Circuit:**\\n\\n1. **One button terminal**  **Pin 2** on Arduino\\n2. **Other button terminal**  **GND** (Ground)\\n3. Use **INPUT_PULLUP** mode (no external resistor needed!)\\n\\n**How It Works:**\\n Button not pressed: Pin 2 reads HIGH (5V from internal pullup)\\n Button pressed: Pin 2 connects to GND, reads LOW (0V)\\n\\n**Why INPUT_PULLUP?**\\nSimplifies wiring by using Arduino's built-in 20k pullup resistor!"},{title:"Reading Button States",content:'**digitalRead() Function:**\\n```cpp\\nint buttonState = digitalRead(buttonPin);\\n```\\nReturns HIGH or LOW based on voltage at pin\\n\\n**Conditional Logic:**\\n```cpp\\nif (buttonState == LOW) {\\n  // Button is pressed\\n  digitalWrite(ledPin, HIGH);\\n} else {\\n  // Button is released\\n  digitalWrite(ledPin, LOW);\\n}\\n```\\n\\n**Serial Monitor:**\\n```cpp\\nSerial.begin(9600);           // Start communication\\nSerial.println(\\"Button Pressed\\");  // Print message\\n```\\nView messages in Arduino IDE\'s Serial Monitor'},{title:"Interactive Projects! ",content:"**Try These Ideas:**\\n\\n1. **Toggle Switch**: Press button to turn LED ON, press again to turn OFF\\n2. **Counter**: Count button presses and display on Serial Monitor\\n3. **Reaction Game**: LED lights randomly, press button quickly\\n4. **Two Buttons**: Use two buttons to control different LEDs\\n5. **Long Press**: Different action for short vs long button press\\n\\n**Debouncing Tip:**\\nButtons can produce multiple rapid signals. Add delay(50) or use debounce library for clean readings."}]}},{id:4,title:"Analog Sensors & Reading Data",completed:!1,wiringImage:U0e,playgroundCode:`// Potentiometer controlling LED brightness
// Wiring: Potentiometer  A0, 5V, GND | LED  Pin 9, resistor, GND

int potPin = A0;     // Potentiometer on analog pin A0
int ledPin = 9;      // LED on PWM pin 9
int potValue = 0;    // Store sensor reading
int brightness = 0;  // Store LED brightness

void setup() {
  pinMode(ledPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  potValue = analogRead(potPin);  // Read value 0-1023
  
  // Map 0-1023 to 0-255 for LED brightness
  brightness = map(potValue, 0, 1023, 0, 255);
  
  analogWrite(ledPin, brightness);  // Set LED brightness
  
  // Display values
  Serial.print("Sensor: ");
  Serial.print(potValue);
  Serial.print(" | Brightness: ");
  Serial.println(brightness);
  
  delay(100);
}`,content:{title:"Analog Sensors & Reading Data",description:"Read real-world values! Learn about analog sensors, PWM, and how to process data from the physical world. ",sections:[{title:"Analog vs Digital",content:"**Digital**: Only two states (HIGH/LOW, ON/OFF)\\n Buttons, switches\\n Either 0V or 5V\\n\\n**Analog**: Range of values\\n Potentiometers, temperature sensors, light sensors\\n Any voltage between 0V and 5V\\n Arduino reads as numbers 0-1023\\n\\n**Analog Pins (A0-A5):**\\nArduino Uno has 6 analog input pins that can measure voltage levels with 10-bit resolution (1024 possible values)"},{title:"Wiring a Potentiometer",content:"**Potentiometer (Variable Resistor):**\\nA knob that changes resistance when you turn it\\n\\n**Three Pins Wiring:**\\n1. **Left pin**  **5V** (power supply)\\n2. **Middle pin**  **A0** (analog input)\\n3. **Right pin**  **GND** (ground)\\n\\n**How It Works:**\\nTurning the knob changes the voltage at the middle pin from 0V to 5V. Arduino reads this as a value from 0 to 1023.\\n\\n**Tip**: Potentiometer orientation doesn't matter; if values are backwards, swap the 5V and GND connections!"},{title:"Reading Analog Values",content:"**analogRead() Function:**\\n```cpp\\nint sensorValue = analogRead(A0);\\n// Returns 0-1023 (10-bit resolution)\\n```\\n\\n**PWM - analogWrite():**\\n```cpp\\nanalogWrite(ledPin, 128);  // 50% brightness\\n// Values 0-255 (0=OFF, 255=FULL)\\n```\\n\\n**Mapping Values:**\\n```cpp\\nbrightness = map(sensorValue, 0, 1023, 0, 255);\\n// Converts 0-1023 range to 0-255 range\\n```\\n\\n**PWM Pins:**\\nOnly pins 3, 5, 6, 9, 10, 11 support analogWrite() (marked with ~ symbol)"},{title:"Sensor Projects! ",content:"**Try These Sensors:**\\n\\n1. **Light Sensor (LDR)**: Automatic night light\\n2. **Temperature Sensor (TMP36)**: Digital thermometer\\n3. **Flex Sensor**: Gesture control\\n4. **Soil Moisture Sensor**: Plant watering reminder\\n5. **Joystick Module**: Game controller\\n\\n**Experiments:**\\n Control servo motor angle with potentiometer\\n Change RGB LED color based on sensor values\\n Create a sound level meter with microphone\\n Build a distance measuring device with ultrasonic sensor"}]}},{id:5,title:"Controlling Motors & Movement",completed:!1,wiringImage:yZ,playgroundCode:`// DC Motor control with L298N motor driver
// Wiring: Motor driver pins to Arduino and motor

int motorPin1 = 8;  // Motor direction pin 1
int motorPin2 = 9;  // Motor direction pin 2
int enablePin = 10; // PWM speed control pin
int speed = 200;    // Motor speed (0-255)

void setup() {
  pinMode(motorPin1, OUTPUT);
  pinMode(motorPin2, OUTPUT);
  pinMode(enablePin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  // Forward
  Serial.println("Motor Forward");
  digitalWrite(motorPin1, HIGH);
  digitalWrite(motorPin2, LOW);
  analogWrite(enablePin, speed);
  delay(2000);
  
  // Stop
  Serial.println("Motor Stop");
  analogWrite(enablePin, 0);
  delay(1000);
  
  // Backward
  Serial.println("Motor Backward");
  digitalWrite(motorPin1, LOW);
  digitalWrite(motorPin2, HIGH);
  analogWrite(enablePin, speed);
  delay(2000);
  
  // Stop
  analogWrite(enablePin, 0);
  delay(1000);
}`,content:{title:"Controlling Motors & Movement",description:"Bring your projects to life with movement! Learn to control DC motors, servo motors, and create robots. ",sections:[{title:"Types of Motors",content:"**DC Motors:**\\n Continuous rotation\\n Variable speed (PWM control)\\n Used for wheels, fans, pumps\\n Requires motor driver (L298N, L293D)\\n\\n**Servo Motors:**\\n Precise angle control (0-180)\\n Used for robot arms, camera mounts\\n Direct connection to Arduino\\n\\n**Stepper Motors:**\\n Very precise positioning\\n Used for 3D printers, CNC machines\\n Requires stepper driver\\n\\n**Why Motor Drivers?**\\nArduino pins can only provide 40mA. Motors need 100mA-1A or more, so we use motor drivers to handle the high current."},{title:"L298N Motor Driver Wiring",content:"**L298N Module Connections:**\\n\\n**Power:**\\n **12V**  External power supply (6-12V)\\n **GND**  Common ground (Arduino GND + Power supply GND)\\n **5V**  Arduino 5V (if jumper on)\\n\\n**Motor:**\\n **OUT1 & OUT2**  Motor terminals\\n\\n**Control Pins:**\\n **IN1**  Arduino Pin 8 (direction)\\n **IN2**  Arduino Pin 9 (direction)\\n **ENA**  Arduino Pin 10 (speed PWM)\\n\\n**Direction Control:**\\n IN1=HIGH, IN2=LOW  Forward\\n IN1=LOW, IN2=HIGH  Backward\\n Both LOW or HIGH  Stop"},{title:"Motor Control Code",content:"**Speed Control (PWM):**\\n```cpp\\nanalogWrite(enablePin, 200);  // 78% speed\\nanalogWrite(enablePin, 0);    // Stop\\nanalogWrite(enablePin, 255);  // Full speed\\n```\\n\\n**Direction Control:**\\n```cpp\\n// Forward\\ndigitalWrite(motorPin1, HIGH);\\ndigitalWrite(motorPin2, LOW);\\n\\n// Backward\\ndigitalWrite(motorPin1, LOW);\\ndigitalWrite(motorPin2, HIGH);\\n\\n// Brake\\ndigitalWrite(motorPin1, HIGH);\\ndigitalWrite(motorPin2, HIGH);\\n```\\n\\n**Pro Tip:**\\nUse functions to simplify your code:\\n```cpp\\nvoid moveForward(int speed) {\\n  digitalWrite(motorPin1, HIGH);\\n  digitalWrite(motorPin2, LOW);\\n  analogWrite(enablePin, speed);\\n}\\n```"},{title:"Motor Projects! ",content:"**Build These Projects:**\\n\\n1. **Simple Robot Car**: Two motors, obstacle avoidance\\n2. **Fan Speed Controller**: Potentiometer adjusts fan speed\\n3. **Automatic Blinds**: Light sensor controls motor\\n4. **Robotic Arm**: Servo motors for precise movement\\n5. **Line Following Robot**: Sensors guide motor direction\\n\\n**Safety Tips:**\\n Always use separate power for motors (not USB)\\n Connect grounds together\\n Add flyback diodes to protect Arduino\\n Start with low speed values when testing\\n Never connect motor directly to Arduino pin!"}]}},{id:6,title:"Working with LCD Displays",completed:!1,wiringImage:$0e,playgroundCode:`// LCD Display showing messages
// Wiring: I2C LCD to Arduino (SDAA4, SCLA5, VCC5V, GNDGND)

#include <Wire.h>
#include <LiquidCrystal_I2C.h>

// Initialize LCD (address 0x27, 16 cols, 2 rows)
LiquidCrystal_I2C lcd(0x27, 16, 2);

int counter = 0;

void setup() {
  lcd.init();           // Initialize LCD
  lcd.backlight();      // Turn on backlight
  lcd.setCursor(0, 0);  // Column 0, Row 0
  lcd.print("Arduino LCD!");
  lcd.setCursor(0, 1);  // Column 0, Row 1
  lcd.print("Hello World!");
  delay(2000);
}

void loop() {
  lcd.clear();           // Clear screen
  lcd.setCursor(0, 0);
  lcd.print("Counter:");
  lcd.setCursor(0, 1);
  lcd.print(counter);
  counter++;
  delay(1000);
}`,content:{title:"Working with LCD Displays",description:"Display information beautifully! Learn to use LCD screens to show text, numbers, and create user interfaces. ",sections:[{title:"Types of LCD Displays",content:"**16x2 Character LCD:**\\n Displays 16 characters per row, 2 rows\\n Perfect for text and numbers\\n Most common and affordable\\n\\n**I2C LCD Module:**\\n Only 4 wires needed (vs 16 wires!)\\n Uses I2C communication protocol\\n Easier to connect and use\\n **Recommended for beginners**\\n\\n**OLED Display:**\\n Sharper, more colorful\\n Can show graphics and images\\n More expensive but very cool"},{title:"I2C LCD Wiring",content:"**Super Simple 4-Wire Connection:**\\n\\n1. **VCC**  Arduino **5V**\\n2. **GND**  Arduino **GND**\\n3. **SDA**  Arduino **A4** (I2C data)\\n4. **SCL**  Arduino **A5** (I2C clock)\\n\\n**That's it!** I2C saves you from wiring 16 pins!\\n\\n**I2C Address:**\\nMost I2C LCDs use address 0x27 or 0x3F. If your LCD doesn't work, try the other address in code:\\n```cpp\\nLiquidCrystal_I2C lcd(0x3F, 16, 2);\\n```\\n\\n**Finding I2C Address:**\\nRun an I2C scanner sketch to find your LCD's address automatically."},{title:"LCD Programming",content:'**Required Library:**\\n```cpp\\n#include <Wire.h>\\n#include <LiquidCrystal_I2C.h>\\n```\\nInstall via Arduino IDE: Sketch  Include Library  Manage Libraries  Search \\"LiquidCrystal I2C\\"\\n\\n**Basic Commands:**\\n```cpp\\nlcd.init();              // Start LCD\\nlcd.backlight();         // Turn on backlight\\nlcd.noBacklight();       // Turn off backlight\\nlcd.clear();             // Clear screen\\nlcd.setCursor(col, row); // Position cursor\\nlcd.print(\\"Hello\\");     // Display text\\nlcd.print(42);           // Display number\\n```\\n\\n**Cursor Position:**\\n Columns: 0-15 (left to right)\\n Rows: 0-1 (top to bottom)'},{title:"LCD Display Projects! ",content:"**Creative Project Ideas:**\\n\\n1. **Digital Thermometer**: Display temperature from sensor\\n2. **Countdown Timer**: Show time remaining\\n3. **Smart Clock**: Display time from RTC module\\n4. **Sensor Dashboard**: Show multiple sensor readings\\n5. **Menu System**: Create interactive menus with buttons\\n6. **Game Score Display**: Build a simple game\\n7. **Quote Machine**: Scroll inspiring messages\\n\\n**Advanced Techniques:**\\n Create custom characters (hearts, arrows, icons)\\n Scrolling text for long messages\\n Animation with custom characters\\n Real-time data logging display"}]}},{id:7,title:"Building a Temperature Monitor",completed:!1,wiringImage:q0e,playgroundCode:`// Temperature monitoring system with LED alerts
// Wiring: DHT11 sensor  Pin 7, LEDs  Pins 8,9,10

#include <DHT.h>

#define DHTPIN 7        // DHT sensor pin
#define DHTTYPE DHT11   // DHT11 sensor type
DHT dht(DHTPIN, DHTTYPE);

int greenLED = 8;   // Cool temperature
int yellowLED = 9;  // Normal temperature
int redLED = 10;    // Hot temperature

void setup() {
  pinMode(greenLED, OUTPUT);
  pinMode(yellowLED, OUTPUT);
  pinMode(redLED, OUTPUT);
  Serial.begin(9600);
  dht.begin();
  Serial.println("Temperature Monitor Starting...");
}

void loop() {
  float temp = dht.readTemperature();     // Celsius
  float humidity = dht.readHumidity();     // %
  
  if (isnan(temp) || isnan(humidity)) {
    Serial.println("Sensor error!");
    return;
  }
  
  // Display readings
  Serial.print("Temperature: ");
  Serial.print(temp);
  Serial.print("C | Humidity: ");
  Serial.print(humidity);
  Serial.println("%");
  
  // LED alerts based on temperature
  digitalWrite(greenLED, LOW);
  digitalWrite(yellowLED, LOW);
  digitalWrite(redLED, LOW);
  
  if (temp < 20) {
    digitalWrite(greenLED, HIGH);  // Cool
    Serial.println("Status: Cool");
  } else if (temp < 28) {
    digitalWrite(yellowLED, HIGH);  // Comfortable
    Serial.println("Status: Comfortable");
  } else {
    digitalWrite(redLED, HIGH);     // Hot
    Serial.println("Status: Hot!");
  }
  
  delay(2000);  // Read every 2 seconds
}`,content:{title:"Building a Temperature Monitor",description:"Create a complete IoT project! Build a temperature and humidity monitoring system with visual alerts. ",sections:[{title:"DHT11 Temperature Sensor",content:"**DHT11 Sensor Features:**\\n Measures temperature (0-50C)\\n Measures humidity (20-80%)\\n Digital output (easy to read)\\n Very affordable and popular\\n Accurate enough for home projects\\n\\n**Sensor Pins:**\\n **VCC**  5V or 3.3V\\n **GND**  Ground\\n **Data**  Digital pin (with 10k pullup resistor)\\n\\n**Alternative: DHT22**\\nMore accurate and wider range, but more expensive:\\n Temperature: -40 to 80C (0.5C)\\n Humidity: 0-100% (2-5%)\\n Same wiring and code!"},{title:"Complete System Wiring",content:"**DHT11 Sensor:**\\n1. **VCC**  Arduino **5V**\\n2. **GND**  Arduino **GND**\\n3. **Data**  Arduino **Pin 7**\\n4. **10k resistor** between VCC and Data (pullup)\\n\\n**LED Indicators:**\\n **Green LED**  Pin 8 (+ 220 resistor  GND)\\n **Yellow LED**  Pin 9 (+ 220 resistor  GND)\\n **Red LED**  Pin 10 (+ 220 resistor  GND)\\n\\n**LED Meanings:**\\n Green = Cool (< 20C)\\n Yellow = Comfortable (20-28C)\\n Red = Hot (> 28C)\\n\\nCustomize temperature thresholds for your environment!"},{title:"Reading Sensor Data",content:'**DHT Library Installation:**\\nArduino IDE  Sketch  Include Library  Manage Libraries  Search \\"DHT sensor library\\" by Adafruit\\n\\n**Initialize Sensor:**\\n```cpp\\n#include <DHT.h>\\n#define DHTPIN 7\\n#define DHTTYPE DHT11\\nDHT dht(DHTPIN, DHTTYPE);\\ndht.begin();\\n```\\n\\n**Read Temperature & Humidity:**\\n```cpp\\nfloat temp = dht.readTemperature();    // Celsius\\nfloat tempF = dht.readTemperature(true); // Fahrenheit\\nfloat humidity = dht.readHumidity();    // Percentage\\n```\\n\\n**Error Checking:**\\n```cpp\\nif (isnan(temp)) {\\n  Serial.println(\\"Sensor read error!\\");\\n}\\n```'},{title:"Expand Your Project! ",content:"**Enhancement Ideas:**\\n\\n1. **Add LCD Display**: Show temperature and humidity\\n2. **Data Logging**: Save readings to SD card\\n3. **WiFi Module**: Send data to smartphone\\n4. **Buzzer Alert**: Sound alarm when too hot/cold\\n5. **Multiple Sensors**: Monitor different rooms\\n6. **RGB LED**: Color gradient based on temperature\\n7. **Fan Control**: Auto fan when temperature rises\\n\\n**Real-World Applications:**\\n Smart thermostat\\n Greenhouse monitoring\\n Server room temperature alert\\n Reptile tank climate control\\n Food storage monitoring\\n Weather station"}]}},{id:8,title:"Servo Motors & Precise Control",completed:!1,wiringImage:yZ,playgroundCode:`// Servo motor sweep and button control
// Wiring: Servo  Pin 9, 5V, GND | Button  Pin 2, GND

#include <Servo.h>

Servo myServo;          // Create servo object
int servoPin = 9;       // Servo control pin
int buttonPin = 2;      // Button pin
int angle = 90;         // Current angle

void setup() {
  myServo.attach(servoPin);
  pinMode(buttonPin, INPUT_PULLUP);
  myServo.write(90);    // Center position
  Serial.begin(9600);
}

void loop() {
  // Sweep demonstration
  for (angle = 0; angle <= 180; angle += 5) {
    myServo.write(angle);
    delay(30);
  }
  
  delay(500);
  
  for (angle = 180; angle >= 0; angle -= 5) {
    myServo.write(angle);
    delay(30);
  }
  
  delay(500);
  
  // Button control - press to move
  if (digitalRead(buttonPin) == LOW) {
    myServo.write(0);    // Move to 0 degrees
    delay(1000);
    myServo.write(180);  // Move to 180 degrees
  }
}`,content:{title:"Servo Motors & Precise Control",description:"Learn to control servo motors for precise angular movements! Create projects like robot arms, automated doors, and camera gimbals. ",sections:[{title:"What is a Servo Motor?",content:"**Servo Motors Overview:**\\n\\nA servo motor is a precision motor that can rotate to specific angles with high accuracy.\\n\\n**Key Differences from DC Motors:**\\n **DC Motor**: Spins continuously, speed control\\n **Servo Motor**: Precise position control (0-180)\\n\\n**Common Uses:**\\n Robot arms and joints\\n RC cars steering\\n Camera gimbals\\n Automated doors\\n Pan-tilt mechanisms\\n Robotic hands\\n\\n**Advantages:**\\n Very precise angle control\\n Holds position with torque\\n Easy to program\\n Affordable ($2-5)"},{title:"Servo Motor Wiring",content:"**Standard Servo has 3 Wires:**\\n\\n **Red**  Power (5V from Arduino)\\n **Brown/Black**  Ground (GND)\\n **Orange/Yellow**  Signal (PWM pin)\\n\\n**Arduino Connection:**\\n```\\nServo Wire        Arduino\\nRed (Power)       5V\\nBrown (GND)       GND\\nOrange            Pin 9 (PWM)\\n```\\n\\n**Important Notes:**\\n Servos can draw high current - use external 5V supply for multiple servos\\n Always connect GND between Arduino and external power\\n Use PWM-capable pins (3, 5, 6, 9, 10, 11)\\n Keep wires short to reduce interference"},{title:"Programming Servo Motors",content:"**Servo Library Basics:**\\n\\n**1. Include Library:**\\n```cpp\\n#include <Servo.h>\\n```\\n\\n**2. Create Servo Object:**\\n```cpp\\nServo myServo;\\n```\\n\\n**3. Attach to Pin:**\\n```cpp\\nvoid setup() {\\n  myServo.attach(9);  // Pin 9\\n}\\n```\\n\\n**4. Control Position:**\\n```cpp\\nmyServo.write(90);   // Move to 90 degrees\\ndelay(1000);         // Wait 1 second\\nmyServo.write(0);    // Move to 0 degrees\\n```\\n\\n**Angle Range:**\\n **0** = Fully left/counterclockwise\\n **90** = Center position\\n **180** = Fully right/clockwise"},{title:"Servo Projects & Ideas ",content:"**Beginner Projects:**\\n\\n1. **Automatic Door Lock**\\n    Servo rotates to lock/unlock\\n    Button or keypad control\\n\\n2. **Pet Feeder**\\n    Servo opens food dispenser\\n    Scheduled feeding times\\n\\n3. **Solar Panel Tracker**\\n    Servo adjusts panel angle\\n    Follows sun for max efficiency\\n\\n4. **Camera Pan-Tilt**\\n    Two servos (X and Y axis)\\n    Remote control or motion tracking\\n\\n5. **Robot Arm**\\n    Multiple servos for joints\\n    Pick and place objects\\n\\n**Tips:**\\n Start with single servo projects\\n Add sensors for automation\\n Combine with other components\\n Use 3D printing for mechanical parts"}]}},{id:9,title:"Ultrasonic Distance Sensors",completed:!1,wiringImage:G0e,playgroundCode:`// HC-SR04 Ultrasonic Distance Sensor
// Wiring: VCC5V, GNDGND, TrigPin 9, EchoPin 10

int trigPin = 9;
int echoPin = 10;
int ledPin = 13;

void setup() {
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);
  pinMode(ledPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  // Send ultrasonic pulse
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);
  
  // Read echo time
  long duration = pulseIn(echoPin, HIGH);
  
  // Calculate distance in cm
  int distance = duration * 0.034 / 2;
  
  Serial.print("Distance: ");
  Serial.print(distance);
  Serial.println(" cm");
  
  // LED alert if object too close
  if (distance < 20) {
    digitalWrite(ledPin, HIGH);
  } else {
    digitalWrite(ledPin, LOW);
  }
  
  delay(100);
}`,content:{title:"Ultrasonic Distance Sensors",description:"Measure distances without touching! Learn how ultrasonic sensors work to detect objects and measure range - perfect for robots and automation. ",sections:[{title:"How Ultrasonic Sensors Work",content:"**HC-SR04 Ultrasonic Sensor:**\\n\\nWorks like a bat using echolocation!\\n\\n**Process:**\\n1. **Trigger pin** sends ultrasonic sound wave (40kHz)\\n2. Sound bounces off objects\\n3. **Echo pin** receives reflected sound\\n4. Calculate distance from travel time\\n\\n**Formula:**\\n```\\nDistance (cm) = (Time  Speed of Sound) / 2\\nDistance = (duration  0.034) / 2\\n```\\n\\n**Range:**\\n Minimum: 2cm\\n Maximum: 400cm (4 meters)\\n Accuracy: 3mm\\n\\n**Advantages:**\\n Non-contact measurement\\n Weather resistant\\n Very affordable ($2-3)"},{title:"Sensor Connections",content:"**HC-SR04 has 4 pins:**\\n\\n**VCC**  Arduino 5V\\n**GND**  Arduino GND\\n**Trig**  Arduino Pin 9 (any digital pin)\\n**Echo**  Arduino Pin 10 (any digital pin)\\n\\n**Wiring Tips:**\\n No resistors needed for 5V Arduino\\n For 3.3V boards, use voltage divider on Echo pin\\n Keep wires reasonably short\\n Sensor works best on flat surfaces\\n\\n**Mounting:**\\n Face sensor forward (avoid obstacles)\\n Ultrasound beams spread in 15 cone\\n Soft materials (fabric, foam) absorb sound\\n Hard surfaces reflect better"},{title:"Distance Measurement Code",content:"**Step-by-Step Process:**\\n\\n**1. Send Trigger Pulse:**\\n```cpp\\ndigitalWrite(trigPin, LOW);\\ndelayMicroseconds(2);\\ndigitalWrite(trigPin, HIGH);\\ndelayMicroseconds(10);  // 10s pulse\\ndigitalWrite(trigPin, LOW);\\n```\\n\\n**2. Read Echo Time:**\\n```cpp\\nlong duration = pulseIn(echoPin, HIGH);\\n// Returns time in microseconds\\n```\\n\\n**3. Calculate Distance:**\\n```cpp\\nint distanceCm = duration * 0.034 / 2;\\nint distanceInch = duration * 0.0133 / 2;\\n```\\n\\n**Why divide by 2?**\\nSound travels to object AND back = double distance"},{title:"Ultrasonic Projects ",content:"**Amazing Project Ideas:**\\n\\n1. **Parking Sensor**\\n    Beep faster as car gets closer\\n    LED indicators for distance\\n\\n2. **Automatic Trash Can**\\n    Lid opens when hand detected\\n    No-touch operation\\n\\n3. **Robot Navigation**\\n    Obstacle avoidance\\n    Wall following\\n    Autonomous movement\\n\\n4. **Water Level Monitor**\\n    Measure liquid level in tank\\n    Send alerts when low\\n\\n5. **Security System**\\n    Detect intruders\\n    Count people entering/exiting\\n\\n6. **Hand Gesture Control**\\n    Control devices with hand distance\\n    Volume control, brightness, etc.\\n\\n**Combine with:**\\n Servo motors for pan/tilt\\n LCD for distance display\\n Buzzer for proximity alerts"}]}},{id:10,title:"Piezo Buzzers & Sound Generation",completed:!1,wiringImage:Y0e,playgroundCode:`// Piezo buzzer playing melodies
// Wiring: Buzzer +  Pin 8, Buzzer -  GND

int buzzerPin = 8;

// Musical note frequencies
#define NOTE_C4  262
#define NOTE_D4  294
#define NOTE_E4  330
#define NOTE_F4  349
#define NOTE_G4  392
#define NOTE_A4  440
#define NOTE_B4  494
#define NOTE_C5  523

void setup() {
  pinMode(buzzerPin, OUTPUT);
}

void loop() {
  // Play "Happy Birthday" melody
  int melody[] = {
    NOTE_C4, NOTE_C4, NOTE_D4, NOTE_C4, NOTE_F4, NOTE_E4,
    NOTE_C4, NOTE_C4, NOTE_D4, NOTE_C4, NOTE_G4, NOTE_F4
  };
  
  int noteDurations[] = {
    4, 8, 4, 4, 4, 2,
    4, 8, 4, 4, 4, 2
  };
  
  for (int i = 0; i < 12; i++) {
    int duration = 1000 / noteDurations[i];
    tone(buzzerPin, melody[i], duration);
    delay(duration * 1.3);  // Pause between notes
  }
  
  noTone(buzzerPin);
  delay(2000);
}`,content:{title:"Piezo Buzzers & Sound Generation",description:"Make music and sound effects! Learn to control piezo buzzers to create tones, melodies, and audio alerts for your projects. ",sections:[{title:"What is a Piezo Buzzer?",content:"**Piezo Buzzer Basics:**\\n\\nA small electronic device that makes sound when electricity is applied.\\n\\n**Two Types:**\\n\\n**1. Active Buzzer:**\\n Has internal oscillator\\n Makes fixed tone (beep)\\n Just connect power (HIGH/LOW)\\n Simpler but less flexible\\n\\n**2. Passive Buzzer:**\\n No internal oscillator\\n Requires PWM signal\\n Can play different tones\\n More versatile (music!)\\n\\n**How Passive Buzzers Work:**\\n PWM signal vibrates ceramic disk\\n Different frequencies = different notes\\n Arduino's tone() function makes this easy"},{title:"Buzzer Connections",content:"**Simple 2-Wire Connection:**\\n\\n**Passive Buzzer:**\\n Positive (+)  Arduino Pin 8 (any PWM pin)\\n Negative (-)  Arduino GND\\n\\n**Active Buzzer:**\\n Positive (+)  Arduino Pin 8\\n Negative (-)  GND\\n Or use transistor for louder sound\\n\\n**Tips:**\\n Some buzzers have polarity, some don't\\n If it doesn't work, try reversing wires\\n Add 100 resistor for lower volume\\n Use transistor (2N2222) for higher current\\n\\n**Louder Sound Circuit:**\\n```\\nArduino Pin 8  1k resistor  Transistor Base\\nTransistor Collector  Buzzer +\\nTransistor Emitter  GND\\nBuzzer -  5V\\n```"},{title:"Making Sounds with Code",content:"**Arduino tone() Function:**\\n\\n**Basic Tone:**\\n```cpp\\ntone(pin, frequency);\\n// Play frequency on pin\\n```\\n\\n**Tone with Duration:**\\n```cpp\\ntone(pin, frequency, duration);\\n// Play for specific milliseconds\\n```\\n\\n**Stop Tone:**\\n```cpp\\nnoTone(pin);\\n// Stop playing sound\\n```\\n\\n**Musical Notes (Frequencies):**\\n```cpp\\n#define NOTE_C4  262  // Middle C\\n#define NOTE_D4  294\\n#define NOTE_E4  330\\n#define NOTE_F4  349\\n#define NOTE_G4  392\\n#define NOTE_A4  440  // Concert A\\n#define NOTE_B4  494\\n#define NOTE_C5  523  // High C\\n```\\n\\n**Simple Beep:**\\n```cpp\\ntone(8, 1000, 200);  // 1kHz for 200ms\\ndelay(300);\\nnoTone(8);\\n```"},{title:"Sound Projects ",content:"**Fun Project Ideas:**\\n\\n1. **Musical Doorbell**\\n    Button press plays melody\\n    Different tunes for different buttons\\n\\n2. **Game Sound Effects**\\n    Victory sound\\n    Game over tone\\n    Level up melody\\n\\n3. **Alarm System**\\n    Motion sensor triggers siren\\n    Warning beeps before alarm\\n\\n4. **Piano Keyboard**\\n    Multiple buttons for different notes\\n    Play songs with button presses\\n\\n5. **Parking Assistant**\\n    Faster beeps when closer to wall\\n    Ultrasonic + buzzer\\n\\n6. **Morse Code Transmitter**\\n    Translate text to beeps\\n    Educational learning tool\\n\\n7. **Timer/Stopwatch**\\n    Beep at intervals\\n    Alert when time's up\\n\\n**Melody Libraries:**\\nFind Arduino tone libraries with popular songs already coded!"}]}},{id:11,title:"Photoresistors & Light Sensing",completed:!1,wiringImage:Z0e,playgroundCode:`// Photoresistor (LDR) for automatic lighting
// Wiring: LDR  A0 & 5V, 10k resistor A0  GND, LED  Pin 9

int ldrPin = A0;
int ledPin = 9;
int threshold = 500;  // Adjust for your environment

void setup() {
  pinMode(ledPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  int lightLevel = analogRead(ldrPin);
  
  Serial.print("Light Level: ");
  Serial.println(lightLevel);
  
  // Auto LED control based on ambient light
  if (lightLevel < threshold) {
    // Dark - turn LED on
    digitalWrite(ledPin, HIGH);
    Serial.println("LED: ON (Dark)");
  } else {
    // Bright - turn LED off
    digitalWrite(ledPin, LOW);
    Serial.println("LED: OFF (Bright)");
  }
  
  // Smooth LED brightness based on light
  int brightness = map(lightLevel, 0, 1023, 255, 0);
  analogWrite(ledPin, brightness);
  
  delay(100);
}`,content:{title:"Photoresistors & Light Sensing",description:"Sense light levels and create smart lighting systems! Build automatic night lights, solar trackers, and light-responsive projects. ",sections:[{title:"What is a Photoresistor (LDR)?",content:"**Light Dependent Resistor (LDR):**\\n\\nA resistor that changes resistance based on light intensity.\\n\\n**How it Works:**\\n **Bright Light**  Low resistance (1k - 10k)\\n **Darkness**  High resistance (1M or more)\\n\\n**Also Called:**\\n Photoresistor\\n Photocell\\n Light sensor\\n\\n**Characteristics:**\\n Analog sensor (0-1023 values)\\n Slow response time (100ms)\\n No polarity - works both ways\\n Very affordable ($0.50)\\n Sensitive to visible light\\n Not precise, but good enough for most projects\\n\\n**Applications:**\\n Automatic street lights\\n Camera exposure meters\\n Solar panel tracking\\n Security lights\\n Plant grow lights"},{title:"LDR Circuit & Wiring",content:"**Voltage Divider Circuit:**\\n\\nLDR needs a fixed resistor to create readable voltage.\\n\\n**Wiring:**\\n```\\n5V  LDR  A0  10k resistor  GND\\n```\\n\\n**Component Connection:**\\n1. **LDR leg 1**  Arduino 5V\\n2. **LDR leg 2**  Arduino A0\\n3. **10k resistor**  A0 and GND\\n\\n**Why 10k?**\\nCreates voltage divider with LDR:\\n Bright: LDR = 1k  High voltage at A0\\n Dark: LDR = 1M  Low voltage at A0\\n\\n**Reading Values:**\\n```cpp\\nint lightLevel = analogRead(A0);\\n// Returns 0 (dark) to 1023 (bright)\\n```\\n\\n**Calibration:**\\nRun this to see your light ranges:\\n```cpp\\nvoid loop() {\\n  Serial.println(analogRead(A0));\\n  delay(100);\\n}\\n```"},{title:"Programming Light Detection",content:"**Basic Light Reading:**\\n```cpp\\nint ldrPin = A0;\\nint lightValue = analogRead(ldrPin);\\n```\\n\\n**Threshold Detection:**\\n```cpp\\nint threshold = 500;  // Adjust for room\\nif (lightValue < threshold) {\\n  // It's dark\\n  digitalWrite(ledPin, HIGH);\\n} else {\\n  // It's bright\\n  digitalWrite(ledPin, LOW);\\n}\\n```\\n\\n**Smooth Brightness Control:**\\n```cpp\\n// Invert and scale: dark=bright LED\\nint brightness = map(lightValue, 0, 1023, 255, 0);\\nanalogWrite(ledPin, brightness);\\n```\\n\\n**Average Reading (Reduce Noise):**\\n```cpp\\nint getAverageLight() {\\n  long sum = 0;\\n  for(int i=0; i<10; i++) {\\n    sum += analogRead(ldrPin);\\n    delay(10);\\n  }\\n  return sum / 10;\\n}\\n```"},{title:"Light Sensing Projects ",content:"**Project Ideas:**\\n\\n1. **Automatic Night Light**\\n    LED turns on when room gets dark\\n    Saves energy during daytime\\n\\n2. **Smart Window Blinds**\\n    Servo closes blinds when too bright\\n    Opens in morning automatically\\n\\n3. **Solar Panel Tracker**\\n    Two LDRs find brightest direction\\n    Servo rotates panel toward sun\\n\\n4. **Plant Grow Light Timer**\\n    Ensures plants get enough light\\n    Supplement with LED when dark\\n\\n5. **Photography Light Meter**\\n    Measure room brightness\\n    Display on LCD in lux\\n\\n6. **Automatic Headlights**\\n    For RC car or robot\\n    Turns on lights in tunnels\\n\\n7. **Wake-Up Light Alarm**\\n    Detects sunrise\\n    Triggers alarm in morning\\n\\n**Advanced: Dual LDR Sun Tracker**\\nTwo LDRs determine brightest angle for solar tracking!"}]}},{id:12,title:"Final Project - Smart Home Automation",completed:!1,wiringImage:K0e,playgroundCode:`// Complete Smart Home Control System
// Combines: Temperature, LCD, Motion, Light, Relay, Fan

#include <DHT.h>
#include <Wire.h>
#include <LiquidCrystal_I2C.h>

#define DHTPIN 7
#define DHTTYPE DHT11
DHT dht(DHTPIN, DHTTYPE);
LiquidCrystal_I2C lcd(0x27, 16, 2);

int motionPin = 2;
int lightPin = A0;
int relayPin = 8;
int fanPin = 9;

void setup() {
  pinMode(motionPin, INPUT);
  pinMode(relayPin, OUTPUT);
  pinMode(fanPin, OUTPUT);
  
  lcd.init();
  lcd.backlight();
  dht.begin();
  Serial.begin(9600);
  
  lcd.print("Smart Home v1.0");
  delay(2000);
}

void loop() {
  float temp = dht.readTemperature();
  int lightLevel = analogRead(lightPin);
  int motion = digitalRead(motionPin);
  
  // Display on LCD
  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("T:");
  lcd.print(temp, 1);
  lcd.print("C L:");
  lcd.print(lightLevel);
  
  lcd.setCursor(0, 1);
  lcd.print("Motion:");
  lcd.print(motion ? "YES" : "NO ");
  
  // Auto fan when hot
  if (temp > 28) {
    analogWrite(fanPin, 200);
  } else {
    analogWrite(fanPin, 0);
  }
  
  // Auto lights (motion + dark)
  if (motion && lightLevel < 300) {
    digitalWrite(relayPin, HIGH);
  } else {
    digitalWrite(relayPin, LOW);
  }
  
  delay(500);
}`,content:{title:"Final Project - Smart Home Automation System",description:"Build the ultimate Arduino project! Combine everything you've learned into an intelligent home automation system with multiple sensors and automated controls. ",sections:[{title:"Project Overview & Features",content:"**Complete Smart Home System:**\\n\\n **Temperature Monitoring** (DHT11)\\n **Automatic Fan Control** (based on temp)\\n **Motion Detection** (PIR sensor)\\n **Light Level Sensing** (LDR)\\n **Smart Lighting** (motion + darkness)\\n **LCD Information Display** (real-time data)\\n **Multiple Automated Rules**\\n\\n**What You'll Learn:**\\n Integrate multiple sensors\\n Make decisions from multiple inputs\\n Create automation logic\\n Build practical home systems\\n Debug complex projects\\n Professional project organization\\n\\n**Real-World Use Cases:**\\n Energy saving automation\\n Security monitoring\\n Comfort optimization\\n Elderly care assistance"},{title:"Complete Parts & Cost",content:"**Required Components:**\\n\\n**Controller:**\\n Arduino Uno R3 ($10-15)\\n 9V power adapter ($5)\\n Breadboard ($3)\\n Jumper wires ($3)\\n\\n**Sensors:**\\n DHT11 temperature/humidity ($2)\\n PIR motion sensor HC-SR501 ($3)\\n Photoresistor LDR + 10k ($1)\\n\\n**Outputs:**\\n I2C LCD display 16x2 ($5)\\n 5V relay module ($3)\\n DC fan 5V ($4)\\n LEDs + resistors ($2)\\n\\n**Optional:**\\n Project enclosure ($5-10)\\n Prototype PCB ($3)\\n Power supply 5V 2A ($8)\\n\\n**Total Cost:** $40-50 USD\\n\\n**Tools Needed:**\\n Wire strippers\\n Multimeter (helpful)\\n Computer with Arduino IDE"},{title:"System Wiring Guide",content:"**Power Distribution:**\\n```\\n5V Rail: DHT11, PIR, LCD, Relay\\nGND Rail: All component grounds\\nArduino powered by 9V adapter\\n```\\n\\n**Sensor Connections:**\\n **DHT11:** DataPin 7, VCC5V, GNDGND\\n **PIR Motion:** OUTPin 2, VCC5V, GNDGND\\n **LDR Circuit:** A0, voltage divider with 10k\\n **LCD I2C:** SDAA4, SCLA5, VCC5V, GNDGND\\n\\n**Output Connections:**\\n **Relay:** INPin 8, controls 110V lamp\\n **Fan:** PWMPin 9, 5V DC fan\\n\\n**Safety Tips:**\\n Relay switches high voltage AC\\n Use insulated enclosure\\n Don't touch wires when powered\\n Test with multimeter first\\n Use proper wire gauge for AC"},{title:"Automation Logic & Rules",content:"**Smart Decision Making:**\\n\\n**Rule 1: Automatic Cooling**\\n```cpp\\nif (temperature > 28) {\\n  fanSpeed = 200;  // High speed\\n} else if (temperature > 25) {\\n  fanSpeed = 100;  // Low speed\\n} else {\\n  fanSpeed = 0;    // Off\\n}\\n```\\n\\n**Rule 2: Smart Lighting**\\n```cpp\\nif (motion && lightLevel < 300) {\\n  // Motion + Dark = Light ON\\n  relayState = HIGH;\\n} else {\\n  relayState = LOW;\\n}\\n```\\n\\n**Rule 3: Energy Saving**\\n```cpp\\nif (noMotionFor(10 minutes)) {\\n  // Turn off everything\\n  fanSpeed = 0;\\n  relayState = LOW;\\n}\\n```\\n\\n**Customization:**\\n Adjust temperature thresholds\\n Change light sensitivity\\n Add time-based rules\\n Create modes (home/away/night)"},{title:"Next Level Projects ",content:"**Congratulations!** You're now an Arduino developer! \\n\\n**Expand Your System:**\\n\\n**1. Add Internet Connectivity**\\n ESP8266 WiFi module ($5)\\n Control from smartphone\\n Send notifications\\n Cloud data logging\\n Blynk or IFTTT integration\\n\\n**2. Voice Control**\\n Amazon Alexa integration\\n Google Home commands\\n Voice-activated scenes\\n\\n**3. Advanced Sensors**\\n Gas/smoke detectors\\n Water leak sensors\\n Door/window contact sensors\\n Current/power monitoring\\n\\n**4. Multiple Rooms**\\n Wireless sensor nodes\\n Central control hub\\n Room-specific automation\\n\\n**Continue Your Journey:**\\n Learn ESP32 for IoT\\n Try Raspberry Pi for complex systems\\n Design custom PCBs\\n 3D print enclosures\\n Share projects on GitHub\\n\\n**You're a maker now - keep building amazing things! **"}]}}];function X0e(){const{id:n}=SV(),{t:e}=ou(),[t,i]=P.useState(1),[s,o]=P.useState(""),[r,a]=P.useState(!1),{toast:l}=EV(),c=P.useRef(null),d=P.useRef(null),{data:u,isLoading:h}=ey({queryKey:["/api/courses",n]}),m={"course-1":[{id:1,title:"What is HTML? - Your First Web Page",completed:!1,playgroundCode:"<h1>Hello, World!</h1>\\n<p>This is my first HTML page!</p>\\n<p>HTML stands for <strong>HyperText Markup Language</strong>.</p>",content:{title:"What is HTML? - Your First Web Page",description:"Welcome to the exciting world of web development! HTML is the foundation of every website on the internet. Let's discover what makes the web work and create your very first webpage! ",sections:[{title:"What is HTML?",content:"HTML stands for HyperText Markup Language. Think of it as the skeleton of a website:\\n\\n **HyperText**: Text with links to other text\\n **Markup**: Special codes that describe content\\n **Language**: A system computers understand\\n\\nHTML tells browsers what each piece of content is - whether it's a heading, paragraph, image, or link. It's like the blueprint of a house!"},{title:"How Websites Work",content:"When you visit a website:\\n1. Your browser asks a server for the webpage\\n2. The server sends back HTML code\\n3. Your browser reads the HTML and displays it\\n4. You see the beautiful webpage!\\n\\nHTML is everywhere - every website uses it, from simple blogs to complex applications like Facebook and Google."},{title:"HTML Tags - The Building Blocks",content:"HTML uses 'tags' to mark up content:\\n\\n Tags are surrounded by angle brackets: `<tag>`\\n Most tags come in pairs: `<tag>content</tag>`\\n The opening tag starts the element\\n The closing tag ends it (has a forward slash)\\n\\nExample: `<h1>This is a heading</h1>`"},{title:"Try It Yourself!",content:"In the playground, try:\\n1. Change 'Hello, World!' to your own message\\n2. Add another paragraph with `<p>Your text here</p>`\\n3. Make some text bold with `<strong>bold text</strong>`\\n4. See how the changes appear instantly!\\n\\nCongratulations - you're now writing HTML! "}]}},{id:2,title:"HTML Document Structure & DOCTYPE",completed:!1,playgroundCode:'<!DOCTYPE html>\\n<html lang="en">\\n<head>\\n    <meta charset="UTF-8">\\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\\n    <title>My Amazing Webpage</title>\\n</head>\\n<body>\\n    <h1>Welcome to My Website!</h1>\\n    <p>This is a properly structured HTML document.</p>\\n</body>\\n</html>',content:{title:"HTML Document Structure & DOCTYPE",description:"Every HTML document follows a specific structure - like a recipe with essential ingredients! Learn the anatomy of a webpage and why proper structure matters. ",sections:[{title:"The DOCTYPE Declaration",content:"`<!DOCTYPE html>` tells the browser this is an HTML5 document.\\n\\n**Why it matters:**\\n Ensures your page displays correctly\\n Prevents 'quirks mode' rendering problems\\n Must be the very first line\\n Case doesn't matter, but lowercase is standard\\n\\nThink of DOCTYPE as showing your ID card to the browser - it identifies what kind of document you have!"},{title:"The HTML Element",content:"The `<html>` element wraps everything else:\\n\\n```html\\n<html lang=\"en\">\\n  <!-- Everything goes here -->\\n</html>\\n```\\n\\n**The lang attribute:**\\n Tells screen readers what language to use\\n Helps search engines understand your content\\n Use 'en' for English, 'es' for Spanish, etc.\\n Important for accessibility!"},{title:"Head vs Body - Two Important Sections",content:"Every HTML document has two main parts:\\n\\n**The `<head>` (invisible to users):**\\n Page title (shows in browser tab)\\n Meta information\\n Links to CSS and JavaScript files\\n Search engine information\\n\\n**The `<body>` (visible to users):**\\n All the content people see\\n Text, images, links, videos\\n Everything that makes up your webpage"},{title:"Essential Meta Tags",content:'Meta tags provide important information:\\n\\n `<meta charset="UTF-8">` - Handles all text characters\\n `<meta name="viewport"...>` - Makes your site mobile-friendly\\n `<title>` - Page title in browser tab and search results\\n\\nThese might seem invisible, but they\'re crucial for a professional website!'},{title:"Document Structure Practice! ",content:"In the playground, experiment with:\\n1. Change the page title and see it update in the browser tab\\n2. Add more content inside the `<body>`\\n3. Try different language codes in the lang attribute\\n4. Notice how the browser understands this structure\\n\\nProper structure is the foundation of every great website!"}]}},{id:3,title:"Headings and Text Formatting",completed:!1,playgroundCode:"<h1>This is a Main Heading</h1>\\n<h2>This is a Secondary Heading</h2>\\n<h3>This is a Smaller Heading</h3>\\n<h4>Even Smaller</h4>\\n<h5>Smaller Still</h5>\\n<h6>The Smallest Heading</h6>\\n\\n<p>This is regular paragraph text.</p>\\n<p><strong>This text is bold and important.</strong></p>\\n<p><em>This text is italic and emphasized.</em></p>\\n<p><strong><em>This text is both bold and italic!</em></strong></p>",content:{title:"Headings and Text Formatting",description:"Learn to organize your content with headings and make your text expressive with formatting! Headings create structure, while formatting adds emphasis and meaning to your words. ",sections:[{title:"The Six Heading Levels",content:"HTML has six heading levels, from h1 (biggest) to h6 (smallest):\\n\\n **h1**: Main page title (use only one per page!)\\n **h2**: Major section headings\\n **h3**: Sub-section headings\\n **h4, h5, h6**: Smaller subdivisions\\n\\nThink of headings like the outline of a book: Chapter (h1), Section (h2), Sub-section (h3), etc."},{title:"Creating Visual Hierarchy",content:"Headings create a 'visual hierarchy' that guides readers:\\n\\n Bigger headings = more important content\\n Smaller headings = supporting details\\n Proper heading order helps with accessibility\\n Screen readers use headings to navigate\\n\\nNever choose headings just for size - choose them for importance!"},{title:"Text Formatting Elements",content:"Make your text more expressive:\\n\\n **`<strong>`**: Important, serious text (usually bold)\\n **`<em>`**: Emphasized text (usually italic)\\n **`<mark>`**: Highlighted text (like a yellow marker)\\n **`<small>`**: Fine print or less important text\\n\\nThese tags have meaning, not just appearance - screen readers understand the difference!"},{title:"Heading Best Practices",content:"Follow these rules for great headings:\\n\\n Only one h1 per page (your main title)\\n Don't skip levels (h1  h2  h3, not h1  h4)\\n Keep headings short and descriptive\\n Use them for structure, not styling\\n Make them meaningful - 'Products' not 'Big Text'\\n\\nGood headings make your content scannable and accessible!"},{title:"Formatting Practice Challenge! ",content:"In the playground, try:\\n1. Create a heading hierarchy for a blog post about your hobby\\n2. Use strong and em tags to emphasize key points\\n3. Try combining bold and italic formatting\\n4. Create a simple article outline using different heading levels\\n\\nRemember: headings organize content, formatting adds emphasis!"}]}},{id:4,title:"Paragraphs, Line Breaks & Text Structure",completed:!1,playgroundCode:"<p>This is a regular paragraph. Paragraphs are the building blocks of text content on web pages.</p>\\n\\n<p>This is another paragraph. Notice the space between paragraphs - browsers add this automatically!</p>\\n\\n<p>You can have multiple sentences in a paragraph.<br>\\nUse the &lt;br&gt; tag to create line breaks within a paragraph.<br>\\nLike this!</p>\\n\\n<p>Here is a paragraph with some <strong>bold text</strong> and some <em>italic text</em> mixed in naturally with the content.</p>",content:{title:"Paragraphs, Line Breaks & Text Structure",description:"Master the art of organizing text! Paragraphs and line breaks are fundamental to creating readable, well-structured content that flows naturally. ",sections:[{title:"The Paragraph Element",content:"The `<p>` tag creates paragraphs - the basic unit of text:\\n\\n Each `<p>` tag creates a new paragraph\\n Browsers add space above and below paragraphs\\n Paragraphs are block-level elements (full width)\\n Perfect for body text, descriptions, articles\\n\\n**Example:**\\n```html\\n<p>This is one paragraph.</p>\\n<p>This is another paragraph.</p>\\n```"},{title:"Line Breaks vs Paragraphs",content:"Understanding when to use `<br>` vs `<p>`:\\n\\n**Use `<br>` for:**\\n Line breaks within the same thought\\n Addresses, poems, lyrics\\n Short lists within paragraphs\\n\\n**Use `<p>` for:**\\n Separate ideas or topics\\n Each distinct thought\\n Body text and articles\\n\\n**Remember:** Don't use multiple `<br>` tags for spacing - use CSS instead!"},{title:"Text Flow and Structure",content:"Good text structure makes content easy to read:\\n\\n **Short paragraphs**: 2-4 sentences ideal for web\\n **One idea per paragraph**: Keep it focused\\n **Logical flow**: Ideas should connect naturally\\n **Scannable content**: Break up long text blocks\\n\\nThink about your reader - make it easy for them to digest your content!"},{title:"White Space and Readability",content:"White space (empty areas) improves readability:\\n\\n Paragraphs create natural white space\\n Don't fear empty space - it helps readers\\n Break up text walls with headings\\n Use lists for multiple related items\\n\\nGood white space makes your content inviting, not intimidating!"},{title:"Text Structure Workshop! ",content:"In the playground, practice:\\n1. Write a short story using multiple paragraphs\\n2. Use line breaks for an address or poem\\n3. Mix formatting (bold, italic) naturally within paragraphs\\n4. Create content that's easy to scan and read\\n\\nWell-structured text is the foundation of good web content!"}]}},{id:5,title:"Lists - Organizing Information",completed:!1,playgroundCode:"<h1>My Favorite Things</h1>\\n\\n<h2>Unordered List (Bullets):</h2>\\n<ul>\\n    <li>Pizza</li>\\n    <li>Ice cream</li>\\n    <li>Movies</li>\\n    <li>Video games</li>\\n</ul>\\n\\n<h2>Ordered List (Numbers):</h2>\\n<ol>\\n    <li>Wake up</li>\\n    <li>Brush teeth</li>\\n    <li>Eat breakfast</li>\\n    <li>Go to work</li>\\n</ol>\\n\\n<h2>Nested Lists:</h2>\\n<ul>\\n    <li>Fruits\\n        <ul>\\n            <li>Apples</li>\\n            <li>Bananas</li>\\n            <li>Oranges</li>\\n        </ul>\\n    </li>\\n    <li>Vegetables\\n        <ul>\\n            <li>Carrots</li>\\n            <li>Broccoli</li>\\n        </ul>\\n    </li>\\n</ul>",content:{title:"Lists - Organizing Information",description:"Lists are perfect for organizing related information! Whether you need bullets or numbers, lists make content scannable and easy to understand. Let's master both types! ",sections:[{title:"Unordered Lists (Bullets)",content:"Use `<ul>` for lists where order doesn't matter:\\n\\n **`<ul>`**: Unordered list container\\n **`<li>`**: List item (each bullet point)\\n\\n**Perfect for:**\\n Features or benefits\\n Shopping lists\\n Navigation menus\\n Any items without specific order\\n\\n**Example:**\\n```html\\n<ul>\\n  <li>First item</li>\\n  <li>Second item</li>\\n</ul>\\n```"},{title:"Ordered Lists (Numbers)",content:"Use `<ol>` when sequence or ranking matters:\\n\\n **`<ol>`**: Ordered list container\\n **`<li>`**: List item (each numbered point)\\n\\n**Perfect for:**\\n Step-by-step instructions\\n Rankings or top 10 lists\\n Recipes\\n Any sequential information\\n\\n**Example:**\\n```html\\n<ol>\\n  <li>Step one</li>\\n  <li>Step two</li>\\n</ol>\\n```"},{title:"Nested Lists - Lists Within Lists",content:"Create hierarchical information with nested lists:\\n\\n```html\\n<ul>\\n  <li>Main topic\\n    <ul>\\n      <li>Subtopic 1</li>\\n      <li>Subtopic 2</li>\\n    </ul>\\n  </li>\\n</ul>\\n```\\n\\n**Great for:**\\n Outline structures\\n Category and subcategory organization\\n Multi-level navigation\\n Complex information hierarchies"},{title:"List Best Practices",content:"Make your lists effective:\\n\\n **Consistent format**: Keep items similar in structure\\n **Parallel language**: Start items with similar words\\n **Appropriate list type**: Order matters = `<ol>`, otherwise `<ul>`\\n **Reasonable length**: 5-9 items ideal for memory\\n **Meaningful content**: Each item should add value\\n\\nGood lists improve scannability and comprehension!"},{title:"Lists Practice Lab! ",content:"In the playground, create:\\n1. Your top 5 favorite movies (ordered list)\\n2. Things needed for a picnic (unordered list)\\n3. A nested list of hobbies with subcategories\\n4. Step-by-step instructions for making a sandwich\\n5. A site navigation structure using nested lists\\n\\nLists are everywhere on the web - master them!"}]}},{id:6,title:"Links - Connecting the Web",completed:!1,playgroundCode:'<h1>All About Links</h1>\\n\\n<p>Here are different types of links:</p>\\n\\n<p><a href="https://www.google.com">Visit Google</a></p>\\n\\n<p><a href="https://www.youtube.com" target="_blank">Open YouTube in New Tab</a></p>\\n\\n<p><a href="mailto:hello@example.com">Send me an Email</a></p>\\n\\n<p><a href="tel:+1-555-123-4567">Call this Phone Number</a></p>\\n\\n<h2 id="section1">Section 1</h2>\\n<p>This is section 1 content.</p>\\n\\n<h2 id="section2">Section 2</h2>\\n<p>This is section 2 content.</p>\\n\\n<p><a href="#section1">Jump to Section 1</a></p>\\n<p><a href="#section2">Jump to Section 2</a></p>',content:{title:"Links - Connecting the Web",description:"Links are what make the web 'web'! They connect pages, sites, and content together. Master the art of linking and you'll understand the true power of the internet. ",sections:[{title:"The Anchor Tag - Your Link Tool",content:'The `<a>` (anchor) tag creates all links:\\n\\n**Basic syntax:**\\n```html\\n<a href="destination">Link text</a>\\n```\\n\\n **href**: Where the link goes (the destination)\\n **Link text**: What users click on\\n **Clickable area**: The entire link text is clickable\\n\\nThe link text should describe where you\'re going!'},{title:"Types of Links",content:'Different types of links for different purposes:\\n\\n**External links:**\\n`<a href="https://google.com">Google</a>`\\n\\n**Internal links (same site):**\\n`<a href="/about">About Page</a>`\\n\\n**Email links:**\\n`<a href="mailto:user@email.com">Email Me</a>`\\n\\n**Phone links:**\\n`<a href="tel:+1234567890">Call Us</a>`\\n\\n**Section links (same page):**\\n`<a href="#section1">Go to Section 1</a>`'},{title:"Link Attributes and Behavior",content:'Control how links behave:\\n\\n**target="_blank"**: Opens in new tab/window\\n Use sparingly - let users choose\\n Good for external sites\\n\\n**title**: Tooltip text on hover\\n Provides extra information\\n Helpful for accessibility\\n\\n**Example:**\\n```html\\n<a href="https://example.com" \\n   target="_blank" \\n   title="Opens Example.com in new tab">\\n   Visit Example\\n</a>\\n```'},{title:"Writing Good Link Text",content:"Link text should be clear and descriptive:\\n\\n**Good link text:**\\n 'Download the user manual'\\n 'View our pricing page'\\n 'Contact our support team'\\n\\n**Avoid:**\\n 'Click here'\\n 'Read more'\\n 'This link'\\n\\nDescriptive links help with accessibility and user experience!"},{title:"Link Building Workshop! ",content:"In the playground, create:\\n1. Links to your favorite websites\\n2. An email link to contact you\\n3. Internal links that jump between sections\\n4. A phone number link\\n5. Links that open in new tabs (sparingly!)\\n\\nLinks are the highways of the internet - connect everything!"}]}},{id:7,title:"Images - Adding Visual Content",completed:!1,playgroundCode:'<h1>Working with Images</h1>\\n\\n<img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400" alt="Beautiful landscape with mountains and lake" width="400">\\n\\n<p>The image shows a man smiling.</p>\\n\\n<figure>\\n    <img src="https://images.unsplash.com/photo-1551963831-b3b1ca40c98e?w=300" alt="Fresh vegetables and fruits" width="300">\\n    <figcaption>Healthy fruits and vegetables for a balanced diet</figcaption>\\n</figure>\\n\\n<p>You can also use images as links:</p>\\n<a href="https://unsplash.com">\\n    <img src="https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=200" alt="Camera lens close-up" width="200">\\n</a>',content:{title:"Images - Adding Visual Content",description:"A picture is worth a thousand words! Images make websites engaging, informative, and memorable. Learn to add images properly with accessibility in mind. ",sections:[{title:"The Image Tag Basics",content:'The `<img>` tag adds images to your webpage:\\n\\n**Basic syntax:**\\n```html\\n<img src="image.jpg" alt="Description">\\n```\\n\\n**Key points:**\\n Self-closing tag (no closing tag needed)\\n `src` = source (where the image file is)\\n `alt` = alternative text (crucial for accessibility)\\n Images are inline elements by default'},{title:"Image Sources and Formats",content:"Where to get images and what formats to use:\\n\\n**Image sources:**\\n Your own photos/graphics\\n Stock photo sites (Unsplash, Pexels)\\n Online image URLs\\n Local files in your project\\n\\n**Best formats:**\\n **JPEG**: Photos, complex images\\n **PNG**: Graphics, logos, transparency\\n **WebP**: Modern format, smaller files\\n **SVG**: Vector graphics, icons"},{title:"Alt Text - Making Images Accessible",content:'Alt text is crucial for accessibility and SEO:\\n\\n**Good alt text:**\\n Describes what\'s in the image\\n Concise but descriptive\\n Provides context if needed\\n\\n**Examples:**\\n `alt="Red sports car parked on city street"`\\n `alt="Graph showing 25% increase in sales"`\\n `alt=""` (empty for decorative images)\\n\\n**Screen readers** use alt text to describe images to visually impaired users!'},{title:"Image Sizing and Responsive Images",content:'Control image size and make them mobile-friendly:\\n\\n**Size attributes:**\\n```html\\n<img src="photo.jpg" alt="Description" \\n     width="400" height="300">\\n```\\n\\n**CSS for responsive images:**\\n```css\\nimg { max-width: 100%; height: auto; }\\n```\\n\\n**Loading optimization:**\\n`loading="lazy"` for images below the fold'},{title:"Advanced Image Techniques",content:'Take your images further:\\n\\n**Figure and figcaption:**\\n```html\\n<figure>\\n  <img src="chart.jpg" alt="Sales data">\\n  <figcaption>Q4 sales increased 40%</figcaption>\\n</figure>\\n```\\n\\n**Clickable images:**\\n```html\\n<a href="larger-image.jpg">\\n  <img src="thumbnail.jpg" alt="Click to enlarge">\\n</a>\\n```\\n\\nFigures group images with their captions semantically!'},{title:"Image Practice Challenge! ",content:"In the playground, try:\\n1. Replace images with URLs from Unsplash (search for topics you like)\\n2. Write detailed, helpful alt text for each image\\n3. Add captions using `<figure>` and `<figcaption>`\\n4. Try different image sizes and see how they adapt\\n5. Create an image grid or gallery layout\\n6. Add `title` attributes for hover tooltips\\n\\nGreat images make websites memorable and engaging!"}]}},{id:8,title:"Tables - Organizing Data",completed:!1,playgroundCode:'<h1>Student Grade Report</h1>\\n\\n<table border="1" style="border-collapse: collapse; width: 100%;">\\n    <thead>\\n        <tr>\\n            <th>Student Name</th>\\n            <th>Math</th>\\n            <th>Science</th>\\n            <th>English</th>\\n            <th>Average</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        <tr>\\n            <td>Alice Johnson</td>\\n            <td>92</td>\\n            <td>88</td>\\n            <td>95</td>\\n            <td>91.7</td>\\n        </tr>\\n        <tr>\\n            <td>Bob Smith</td>\\n            <td>78</td>\\n            <td>85</td>\\n            <td>82</td>\\n            <td>81.7</td>\\n        </tr>\\n        <tr>\\n            <td>Carol Davis</td>\\n            <td>95</td>\\n            <td>92</td>\\n            <td>89</td>\\n            <td>92.0</td>\\n        </tr>\\n    </tbody>\\n</table>',content:{title:"Tables - Organizing Data",description:"Tables are perfect for displaying data that has relationships - like spreadsheets, schedules, and comparisons. Learn to create organized, accessible tables! ",sections:[{title:"Table Structure",content:"HTML tables use several elements working together:\\n\\n **`<table>`**: The container for everything\\n **`<tr>`**: Table row (horizontal)\\n **`<th>`**: Table header (column titles)\\n **`<td>`**: Table data (regular cells)\\n **`<thead>`**: Groups header rows\\n **`<tbody>`**: Groups body rows\\n\\nThink of it like building a house: table is the foundation, rows are floors, cells are rooms!"},{title:"Creating Your First Table",content:"Basic table structure:\\n\\n```html\\n<table>\\n  <tr>\\n    <th>Name</th>\\n    <th>Age</th>\\n    <th>City</th>\\n  </tr>\\n  <tr>\\n    <td>Alice</td>\\n    <td>25</td>\\n    <td>New York</td>\\n  </tr>\\n</table>\\n```\\n\\n**Key points:**\\n First row usually contains headers (`<th>`)\\n Each row should have the same number of cells\\n Headers help screen readers understand table structure"},{title:"Making Tables Accessible",content:"Tables need proper structure for accessibility:\\n\\n**Use semantic elements:**\\n```html\\n<table>\\n  <thead>\\n    <tr><th>Header 1</th><th>Header 2</th></tr>\\n  </thead>\\n  <tbody>\\n    <tr><td>Data 1</td><td>Data 2</td></tr>\\n  </tbody>\\n</table>\\n```\\n\\n**Add captions:**\\n```html\\n<table>\\n  <caption>Monthly Sales Report</caption>\\n  <!-- table content -->\\n</table>\\n```\\n\\nThis helps browsers and assistive technology understand your table!"},{title:"When to Use Tables",content:"Tables are for tabular data, not layout:\\n\\n**Good uses:**\\n Spreadsheet-like data\\n Comparisons (features, prices)\\n Schedules and calendars\\n Financial reports\\n Scientific data\\n\\n**Don't use tables for:**\\n Page layout (use CSS Grid/Flexbox instead)\\n Positioning elements\\n Creating columns of text\\n\\nTables are for data that makes sense in rows and columns!"},{title:"Table Practice Workshop! ",content:"In the playground, try:\\n1. Add more students to the grade report\\n2. Create a table comparing different smartphones\\n3. Build a weekly schedule table\\n4. Add a caption describing what the table shows\\n5. Experiment with different types of data\\n\\nTables are powerful tools for organizing complex information clearly!"}]}},{id:9,title:"Forms - Collecting User Input",completed:!1,playgroundCode:'<h1>Contact Us Form</h1>\\n\\n<form>\\n    <label for="name">Your Name:</label><br>\\n    <input type="text" id="name" name="name" required><br><br>\\n    \\n    <label for="email">Email Address:</label><br>\\n    <input type="email" id="email" name="email" required><br><br>\\n    \\n    <label for="subject">Subject:</label><br>\\n    <select id="subject" name="subject">\\n        <option value="">Choose a topic...</option>\\n        <option value="general">General Question</option>\\n        <option value="support">Technical Support</option>\\n        <option value="feedback">Feedback</option>\\n    </select><br><br>\\n    \\n    <label for="message">Your Message:</label><br>\\n    <textarea id="message" name="message" rows="5" cols="50" required></textarea><br><br>\\n    \\n    <input type="checkbox" id="newsletter" name="newsletter">\\n    <label for="newsletter">Subscribe to our newsletter</label><br><br>\\n    \\n    <input type="submit" value="Send Message">\\n    <input type="reset" value="Clear Form">\\n</form>',content:{title:"Forms - Collecting User Input",description:"Forms are how websites talk to users! From contact forms to surveys, forms make websites interactive. Let's master user-friendly forms! ",sections:[{title:"Form Basics",content:'Forms collect user data and send it somewhere:\\n\\n**Basic structure:**\\n```html\\n<form action="where-to-send" method="post">\\n  <input type="text" name="username">\\n  <button type="submit">Submit</button>\\n</form>\\n```\\n\\n**Key attributes:**\\n **action**: Where to send form data\\n **method**: How to send data ("get" or "post")\\n **name**: Identifies each input when form is submitted'},{title:"Input Types",content:'Different input types for different data:\\n\\n**Text inputs:**\\n `type="text"` - Regular text\\n `type="email"` - Email addresses\\n `type="password"` - Hidden text\\n `type="tel"` - Phone numbers\\n\\n**Other inputs:**\\n `type="number"` - Numbers only\\n `type="date"` - Date picker\\n `type="checkbox"` - Checkboxes\\n `type="radio"` - Radio buttons\\n\\nChoose the right input type for better user experience!'},{title:"Labels and Accessibility",content:'Always use labels with form inputs:\\n\\n**Proper labeling:**\\n```html\\n<label for="email">Email Address</label>\\n<input type="email" id="email" name="email">\\n```\\n\\n**Why labels matter:**\\n Screen readers can announce what each field is for\\n Clicking labels focuses the input (better UX)\\n Required for web accessibility\\n Makes forms easier to use on mobile\\n\\nThe `for` attribute must match the input\'s `id`!'},{title:"Form Validation",content:'HTML5 provides built-in validation:\\n\\n**Required fields:**\\n```html\\n<input type="email" name="email" required>\\n```\\n\\n**Input constraints:**\\n `maxlength` for text length\\n `min` and `max` for numbers\\n `pattern` for custom validation\\n `placeholder` for hints\\n\\n**Browser benefits:**\\n Shows error messages automatically\\n Prevents submission of invalid data\\n Better user experience'},{title:"Form Practice Workshop! ",content:'In the playground, experiment with:\\n1. Add your personal information to test the form\\n2. Try submitting with required fields empty\\n3. Add a new field with `type="date"` for birthdate\\n4. Create radio buttons for selecting preferences\\n5. Add more options to the dropdown menu\\n6. Test different input types\\n\\nForms are the bridge between users and your website!'}]}},{id:10,title:"HTML5 Semantic Elements",completed:!1,playgroundCode:'<header>\\n    <h1>My Personal Blog</h1>\\n    <nav>\\n        <ul>\\n            <li><a href="#home">Home</a></li>\\n            <li><a href="#about">About</a></li>\\n            <li><a href="#blog">Blog</a></li>\\n            <li><a href="#contact">Contact</a></li>\\n        </ul>\\n    </nav>\\n</header>\\n\\n<main>\\n    <article>\\n        <header>\\n            <h2>My First Blog Post</h2>\\n            <time datetime="2024-01-15">January 15, 2024</time>\\n        </header>\\n        \\n        <section>\\n            <h3>Introduction</h3>\\n            <p>This is my first blog post using semantic HTML5 elements!</p>\\n        </section>\\n        \\n        <section>\\n            <h3>What I Learned</h3>\\n            <p>Semantic elements make websites more meaningful and accessible.</p>\\n        </section>\\n    </article>\\n    \\n    <aside>\\n        <h3>Recent Posts</h3>\\n        <ul>\\n            <li><a href="#">Getting Started with HTML</a></li>\\n            <li><a href="#">CSS Basics</a></li>\\n        </ul>\\n    </aside>\\n</main>\\n\\n<footer>\\n    <p>&copy; 2024 My Personal Blog. All rights reserved.</p>\\n</footer>',content:{title:"HTML5 Semantic Elements",description:"HTML5 introduced amazing semantic elements that give meaning to your content! These elements make websites more accessible, SEO-friendly, and easier to understand. ",sections:[{title:"What Are Semantic Elements?",content:'Semantic elements clearly describe their meaning:\\n\\n**Before HTML5:** `<div class="header">`\\n**HTML5 Semantic:** `<header>`\\n\\n**Benefits:**\\n Better accessibility for screen readers\\n Improved SEO (search engines understand structure)\\n More readable code for developers\\n Consistent page structure across the web\\n\\nSemantic elements tell the story of your content!'},{title:"Essential Semantic Elements",content:"Core HTML5 semantic elements:\\n\\n **`<header>`**: Page or section header\\n **`<nav>`**: Navigation links\\n **`<main>`**: Main content area (one per page)\\n **`<article>`**: Independent content (blog posts)\\n **`<section>`**: Thematic grouping of content\\n **`<aside>`**: Related content (sidebars)\\n **`<footer>`**: Page or section footer\\n **`<figure>`**: Images with captions\\n **`<time>`**: Dates and times"},{title:"Building Page Structure",content:"Typical semantic page layout:\\n\\n```html\\n<header>\\n  <h1>Site Title</h1>\\n  <nav><!-- Navigation --></nav>\\n</header>\\n\\n<main>\\n  <article>\\n    <section><!-- Content --></section>\\n  </article>\\n  <aside><!-- Sidebar --></aside>\\n</main>\\n\\n<footer>\\n  <p>&copy; 2024 Your Site</p>\\n</footer>\\n```\\n\\nThis creates a clear, logical structure!"},{title:"Semantic vs Generic Elements",content:'When to use semantic elements vs `<div>`:\\n\\n**Use semantic elements when:**\\n Content has specific meaning\\n You want better accessibility\\n Structure is important\\n\\n**Use `<div>` when:**\\n You need a container purely for styling\\n No semantic meaning exists\\n Grouping elements for layout\\n\\n**Example:**\\n  `<article>` for blog posts\\n  `<div class="card">` for styling containers'},{title:"Semantic HTML Practice! ",content:"In the playground, explore:\\n1. Change the article content to your own blog post\\n2. Add more sections to the article\\n3. Update the aside with your own links\\n4. Try adding a `<figure>` with an image\\n5. Use `<time>` elements for different dates\\n\\nSemantic HTML makes the web better for everyone!"}]}},{id:11,title:"Advanced Text Elements & Formatting",completed:!1,playgroundCode:'<h1>Advanced Text Formatting</h1>\\n\\n<p>This text contains <code>inline code</code> and a <kbd>Ctrl+C</kbd> keyboard shortcut.</p>\\n\\n<blockquote>\\n    <p>"The best time to plant a tree was 20 years ago. The second best time is now."</p>\\n    <cite> Chinese Proverb</cite>\\n</blockquote>\\n\\n<p>Chemical formula: H<sub>2</sub>O</p>\\n<p>Mathematical expression: E = mc<sup>2</sup></p>\\n\\n<p>Use the <abbr title="HyperText Markup Language">HTML</abbr> element for web development.</p>\\n\\n<p><mark>Highlighted text</mark> stands out from the rest.</p>',content:{title:"Advanced Text Elements & Formatting",description:"Take your text formatting to the next level! Learn specialized elements for code, quotes, abbreviations, and more. These elements add semantic meaning and professional polish. ",sections:[{title:"Code and Technical Text",content:"Special elements for technical content:\\n\\n **`<code>`**: Inline code snippets\\n **`<pre>`**: Preformatted text (preserves spaces)\\n **`<kbd>`**: Keyboard input\\n **`<samp>`**: Sample computer output\\n **`<var>`**: Variables in programming\\n\\nThese elements help distinguish technical content from regular text and often display in monospace fonts."},{title:"Quotations and Citations",content:"Proper elements for quotes:\\n\\n**`<blockquote>`**: Long quotes (block-level)\\n```html\\n<blockquote>\\n  <p>Quote text here</p>\\n  <cite> Author Name</cite>\\n</blockquote>\\n```\\n\\n**`<q>`**: Short inline quotes\\n**`<cite>`**: Citation of works, authors\\n\\nUse these for proper semantic meaning and accessibility!"},{title:"Subscript and Superscript",content:"For mathematical and scientific notation:\\n\\n **`<sub>`**: Subscript (HO)\\n **`<sup>`**: Superscript (E=mc)\\n\\n**Perfect for:**\\n Chemical formulas\\n Mathematical expressions\\n Footnote references\\n Ordinal numbers (1st, 2nd, 3rd)"},{title:"Abbreviations and Definitions",content:'Help users understand terminology:\\n\\n**`<abbr>`**: Abbreviations with explanations\\n```html\\n<abbr title="HyperText Markup Language">HTML</abbr>\\n```\\n\\n**`<dfn>`**: Defining instance of a term\\n**`<mark>`**: Highlighted text\\n\\nThese elements improve accessibility and user understanding!'},{title:"Advanced Formatting Practice! ",content:"In the playground, try:\\n1. Create a scientific article with chemical formulas\\n2. Add code examples using proper code elements\\n3. Include a meaningful blockquote with citation\\n4. Use abbreviations with helpful title attributes\\n5. Highlight important terms with mark\\n\\nThese elements make your content more professional and accessible!"}]}},{id:12,title:"Accessibility - Making Websites for Everyone",completed:!1,playgroundCode:'<h1>Accessible Web Design</h1>\\n\\n<nav aria-label="Main navigation">\\n    <ul>\\n        <li><a href="#content" aria-label="Skip to main content">Skip to content</a></li>\\n        <li><a href="#home">Home</a></li>\\n        <li><a href="#about">About</a></li>\\n    </ul>\\n</nav>\\n\\n<main id="content">\\n    <h2>Contact Form</h2>\\n    <form>\\n        <label for="name">Full Name (required)</label>\\n        <input type="text" id="name" name="name" required aria-describedby="name-help">\\n        <small id="name-help">Enter your first and last name</small>\\n        \\n        <label for="email">Email Address</label>\\n        <input type="email" id="email" name="email" required>\\n        \\n        <button type="submit">Send Message</button>\\n    </form>\\n    \\n    <img src="https://images.unsplash.com/photo-1573495627256-6b3c5a7d0a10?w=300" alt="Person using a laptop computer at a wooden desk with coffee cup nearby">\\n</main>',content:{title:"Accessibility - Making Websites for Everyone",description:"Accessibility ensures everyone can use your website! Learn to create inclusive web experiences that work for all users, including those with disabilities. It's not just the right thing to doit makes better websites! ",sections:[{title:"Why Accessibility Matters",content:"Web accessibility benefits everyone:\\n\\n**Who benefits:**\\n People with disabilities (vision, hearing, motor, cognitive)\\n Users with temporary limitations (broken arm, bright sunlight)\\n Everyone using different devices or slow internet\\n\\n**Business benefits:**\\n Legal compliance\\n Larger audience reach\\n Better SEO\\n Improved usability for all"},{title:"Essential Accessibility Features",content:"Key accessibility practices:\\n\\n**Semantic HTML:**\\n Use proper headings for structure\\n Lists for grouped content\\n Semantic elements (nav, main, article)\\n\\n**Form accessibility:**\\n Labels with every input\\n Clear instructions and error messages\\n Logical tab order\\n\\n**Images:**\\n Meaningful alt text\\n Empty alt='' for decorative images"},{title:"ARIA Attributes",content:'ARIA provides extra accessibility information:\\n\\n**Common ARIA attributes:**\\n `aria-label`: Accessible name\\n `aria-describedby`: Additional description\\n `aria-labelledby`: References labeling element\\n `role`: Defines element purpose\\n\\n**Example:**\\n```html\\n<button aria-label="Close dialog"></button>\\n<nav aria-label="Main navigation">...\\n```'},{title:"Keyboard Navigation",content:"Ensure keyboard-only navigation works:\\n\\n**Essential features:**\\n All interactive elements focusable\\n Visible focus indicators\\n Logical tab order\\n Skip links for main content\\n\\n**Testing:**\\n Tab through your entire page\\n Use Enter/Space to activate elements\\n Ensure you can reach everything"},{title:"Accessibility Testing! ",content:"In the playground, test:\\n1. Navigate using only the Tab key\\n2. Notice proper form labels\\n3. See how aria-describedby provides context\\n4. Check meaningful alt text\\n5. Use browser dev tools to inspect accessibility\\n\\nAccessible websites are better websites for everyone!"}]}},{id:13,title:"Meta Tags - Information About Your Page",completed:!1,playgroundCode:'<!DOCTYPE html>\\n<html lang="en">\\n<head>\\n    <meta charset="UTF-8">\\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\\n    <title>My Amazing Website - Learn Web Development</title>\\n    \\n    <meta name="description" content="Learn web development with our comprehensive HTML tutorials and hands-on examples.">\\n    <meta name="author" content="Your Name">\\n    <meta name="robots" content="index, follow">\\n    \\n    <!-- Open Graph for social media -->\\n    <meta property="og:title" content="Learn Web Development">\\n    <meta property="og:description" content="Master HTML, CSS, and JavaScript with our beginner-friendly tutorials.">\\n    <meta property="og:image" content="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=1200">\\n    \\n    <meta name="theme-color" content="#007bff">\\n</head>\\n<body>\\n    <h1>Welcome to My Website! </h1>\\n    <p>This page demonstrates proper meta tag usage.</p>\\n</body>\\n</html>',content:{title:"Meta Tags - Information About Your Page",description:"Meta tags are like your website's business card! They tell search engines and social media what your page is about. Master meta tags for professional, discoverable websites! ",sections:[{title:"Essential Meta Tags",content:'Every webpage needs these meta tags:\\n\\n**Character encoding:**\\n`<meta charset="UTF-8">`\\n Must be first in head section\\n Supports all languages and emojis\\n\\n**Viewport (mobile-friendly):**\\n`<meta name="viewport" content="width=device-width, initial-scale=1.0">`\\n Makes sites work on mobile devices\\n Essential for responsive design'},{title:"SEO Meta Tags",content:'Help search engines understand your content:\\n\\n**Page description:**\\n`<meta name="description" content="Page description">`\\n Appears in search results\\n 150-160 characters ideal\\n Compelling copy that encourages clicks\\n\\n**Page title:**\\n`<title>Page Title - Site Name</title>`\\n Shows in browser tab\\n Most important SEO element'},{title:"Social Media Meta Tags",content:'Control how links look when shared:\\n\\n**Open Graph (Facebook, LinkedIn):**\\n```html\\n<meta property="og:title" content="Page Title">\\n<meta property="og:description" content="Description">\\n<meta property="og:image" content="image-url">\\n```\\n\\n**Twitter Cards:**\\n```html\\n<meta name="twitter:card" content="summary_large_image">\\n<meta name="twitter:title" content="Page Title">\\n```'},{title:"Additional Meta Tags",content:'Enhance user experience:\\n\\n**Theme color:**\\n`<meta name="theme-color" content="#007bff">`\\n Colors browser interface on mobile\\n\\n**Author and robots:**\\n`<meta name="author" content="Your Name">`\\n`<meta name="robots" content="index, follow">`\\n\\nThese improve professionalism and functionality!'},{title:"Meta Tags Practice! ",content:"In the playground:\\n1. Change the title and see it in the browser tab\\n2. Update the description for your own page\\n3. Add your name as the author\\n4. Experiment with theme-color\\n5. Update Open Graph tags for social sharing\\n\\nMeta tags are invisible but incredibly powerful!"}]}},{id:14,title:"Audio and Video - Multimedia Content",completed:!1,playgroundCode:'<h1>Multimedia Gallery </h1>\\n\\n<h2>Audio Example:</h2>\\n<audio controls>\\n    <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.wav" type="audio/wav">\\n    <p>Your browser does not support audio. <a href="#">Download audio</a> instead.</p>\\n</audio>\\n\\n<h2>Video Example:</h2>\\n<video width="400" controls poster="https://images.unsplash.com/photo-1536240478700-b869070f9279?w=400">\\n    <source src="#" type="video/mp4">\\n    <p>Your browser does not support video. <a href="#">Download video</a> instead.</p>\\n</video>\\n\\n<h2>Embedded Video (YouTube):</h2>\\n<iframe width="400" height="225" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video player" allowfullscreen>\\n</iframe>',content:{title:"Audio and Video - Multimedia Content",description:"Bring your websites to life with multimedia! Modern HTML5 makes it easy to embed audio and video that works across all devices. ",sections:[{title:"HTML5 Audio Element",content:'The `<audio>` element embeds sound:\\n\\n```html\\n<audio controls>\\n  <source src="audio.mp3" type="audio/mpeg">\\n  Your browser doesn\'t support audio.\\n</audio>\\n```\\n\\n**Key attributes:**\\n `controls` - Shows play/pause controls\\n `autoplay` - Auto-starts (use carefully!)\\n `loop` - Repeats audio\\n `muted` - Starts muted'},{title:"HTML5 Video Element",content:'The `<video>` element embeds video:\\n\\n```html\\n<video width="320" height="240" controls>\\n  <source src="movie.mp4" type="video/mp4">\\n  Your browser doesn\'t support video.\\n</video>\\n```\\n\\n**Key attributes:**\\n `width/height` - Dimensions\\n `controls` - Shows video controls\\n `poster` - Image before video loads\\n `muted` - Required for autoplay'},{title:"Embedded Content",content:'Use `<iframe>` for external content:\\n\\n**YouTube embed:**\\n```html\\n<iframe src="https://www.youtube.com/embed/VIDEO_ID" \\n        allowfullscreen>\\n</iframe>\\n```\\n\\n**Other embeds:**\\n Vimeo videos\\n Google Maps\\n Social media posts\\n\\n**Security:** Only embed trusted sources!'},{title:"Accessibility Best Practices",content:"Make multimedia accessible:\\n\\n**For videos:**\\n Include captions/subtitles\\n Provide transcripts\\n Don't autoplay with sound\\n Use descriptive titles\\n\\n**For audio:**\\n Provide transcripts\\n Include descriptive text\\n Offer alternative formats\\n\\nAccessible media serves all users!"},{title:"Multimedia Practice Studio! ",content:"In the playground:\\n1. Try the audio and video controls\\n2. Change video dimensions\\n3. Add your own YouTube video embed\\n4. Experiment with different attributes\\n5. Create a simple media gallery\\n\\nMultimedia makes websites engaging and interactive!"}]}},{id:15,title:"Building a Complete Web Page",completed:!1,playgroundCode:'<!DOCTYPE html>\\n<html lang="en">\\n<head>\\n    <meta charset="UTF-8">\\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\\n    <title>Sarah Johnson - Web Developer</title>\\n    <meta name="description" content="Professional web developer portfolio showcasing HTML, CSS, and JavaScript projects.">\\n</head>\\n<body>\\n    <header>\\n        <h1>Sarah Johnson</h1>\\n        <nav>\\n            <ul>\\n                <li><a href="#about">About</a></li>\\n                <li><a href="#projects">Projects</a></li>\\n                <li><a href="#contact">Contact</a></li>\\n            </ul>\\n        </nav>\\n    </header>\\n    \\n    <main>\\n        <section id="about">\\n            <h2>About Me</h2>\\n            <p>I create beautiful, functional websites using modern web technologies.</p>\\n        </section>\\n        \\n        <section id="projects">\\n            <h2>My Projects</h2>\\n            <article>\\n                <h3>Portfolio Website</h3>\\n                <p>Responsive portfolio built with HTML, CSS, and JavaScript.</p>\\n            </article>\\n        </section>\\n        \\n        <section id="contact">\\n            <h2>Contact Me</h2>\\n            <form>\\n                <label for="name">Name:</label>\\n                <input type="text" id="name" name="name" required>\\n                \\n                <label for="email">Email:</label>\\n                <input type="email" id="email" name="email" required>\\n                \\n                <label for="message">Message:</label>\\n                <textarea id="message" name="message" required></textarea>\\n                \\n                <button type="submit">Send</button>\\n            </form>\\n        </section>\\n    </main>\\n    \\n    <footer>\\n        <p>&copy; 2024 Sarah Johnson. All rights reserved.</p>\\n    </footer>\\n</body>\\n</html>',content:{title:"Building a Complete Web Page",description:"Time to put it all together! Let's build a complete, professional webpage using all the HTML skills you've learned. This combines structure, content, and best practices! ",sections:[{title:"Planning Your Page Structure",content:"Before coding, plan your structure:\\n\\n**Essential sections:**\\n Header with navigation\\n Main content area\\n Footer with info\\n\\n**Semantic structure:**\\n```html\\n<header>\\n  <nav><!-- Navigation --></nav>\\n</header>\\n<main>\\n  <section><!-- Content --></section>\\n</main>\\n<footer><!-- Site info --></footer>\\n```"},{title:"HTML Best Practices Applied",content:"Use everything you've learned:\\n\\n**Document structure:**\\n Proper DOCTYPE and html lang\\n Complete head with meta tags\\n Semantic elements\\n\\n**Content organization:**\\n Clear heading hierarchy\\n Meaningful alt text\\n Proper form structure\\n Logical navigation"},{title:"Content Strategy",content:"Create user-focused content:\\n\\n**Writing principles:**\\n Clear, concise language\\n Scannable text structure\\n Strong calls-to-action\\n\\n**Content sections:**\\n Hero: Clear value proposition\\n About: Build credibility\\n Work: Show examples\\n Contact: Easy to reach"},{title:"Quality Checklist",content:"Before launching, verify:\\n\\n**Technical:**\\n Valid HTML\\n Working links\\n Proper alt text\\n Form functionality\\n\\n**User experience:**\\n Mobile-friendly\\n Fast loading\\n Easy navigation\\n Accessible to all"},{title:"Complete Page Challenge! ",content:"In the playground:\\n1. Customize the portfolio for yourself\\n2. Add more sections and content\\n3. Include images with proper alt text\\n4. Test the form structure\\n5. Check the semantic HTML\\n\\nYou now have all the skills to build professional websites!"}]}},{id:16,title:"Divs, Spans & Generic Containers",completed:!1,playgroundCode:'<h1>Container Elements Demo</h1>\\n\\n<div class="container" style="border: 2px solid blue; padding: 20px; margin: 10px;">\\n    <h2>This is a DIV Container</h2>\\n    <p>DIVs are <span style="background: yellow;">block-level</span> elements that take full width.</p>\\n    \\n    <div class="card" style="background: lightblue; padding: 15px; margin: 10px 0;">\\n        <h3>Card Example</h3>\\n        <p>This entire card is a div with styling applied.</p>\\n    </div>\\n</div>\\n\\n<p>This paragraph has <span style="color: red; font-weight: bold;">highlighted text</span> using a span element.</p>\\n\\n<div style="display: flex; gap: 10px;">\\n    <div style="padding: 20px; background: lightgreen; flex: 1; text-align: center;">Box 1</div>\\n    <div style="padding: 20px; background: lightcoral; flex: 1; text-align: center;">Box 2</div>\\n    <div style="padding: 20px; background: lightyellow; flex: 1; text-align: center;">Box 3</div>\\n</div>',content:{title:"Divs, Spans & Generic Containers",description:"Meet the building blocks of web layouts! Divs and spans are the Swiss Army knives of HTML - they don't have specific meaning but are incredibly useful for organizing and styling content. ",sections:[{title:"The DIV Element - Your Layout Best Friend",content:"The `<div>` element is a generic container:\\n\\n**Key characteristics:**\\n Block-level element (takes full width)\\n No semantic meaning (purely for layout/styling)\\n Can contain any other elements\\n Essential for CSS layouts\\n\\n**Common uses:**\\n Page sections and layout containers\\n Cards and component wrappers\\n Styling groups\\n Grid and flexbox containers"},{title:"The SPAN Element - Inline Styling Hero",content:"The `<span>` element is for styling parts of text:\\n\\n**Key characteristics:**\\n Inline element (flows with text)\\n No semantic meaning\\n Perfect for styling text portions\\n Doesn't break text flow\\n\\n**Common uses:**\\n Highlighting specific words\\n Adding icons within text\\n Styling parts of sentences\\n Small decorative elements"},{title:"DIV vs SPAN - When to Use Which",content:"Choose the right container:\\n\\n**Use DIV when you need:**\\n Layout sections or containers\\n Block-level grouping\\n CSS grid or flexbox parents\\n Component wrappers\\n\\n**Use SPAN when you need:**\\n Inline styling\\n Text highlighting\\n Small icons or decorations\\n Elements that flow with text"},{title:"Semantic vs Generic Elements",content:'When to use semantic elements vs divs/spans:\\n\\n**Use semantic elements first:**\\n `<header>` instead of `<div class="header">`\\n `<nav>` instead of `<div class="navigation">`\\n `<main>` instead of `<div class="main-content">`\\n\\n**Use div/span when:**\\n No semantic element fits\\n Purely for styling/layout\\n Building complex layouts'},{title:"Container Practice Lab! ",content:"In the playground:\\n1. Add more content cards using divs\\n2. Use spans to highlight different words\\n3. Create layouts with flexbox containers\\n4. Build a simple grid using divs\\n5. Style specific words in sentences using spans\\n\\nContainers are the foundation of modern web layouts!"}]}},{id:17,title:"HTML Attributes & Classes",completed:!1,playgroundCode:'<h1 id="main-title" class="page-heading">HTML Attributes Demo</h1>\\n\\n<img src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=300" \\n     alt="Person coding on laptop" \\n     title="Click for tooltip" \\n     width="300" \\n     class="featured-image">\\n\\n<div class="container highlight" id="demo-section" data-theme="light">\\n    <h2>Multiple Attributes Example</h2>\\n    <p>This div has class, id, and data attributes.</p>\\n</div>\\n\\n<a href="https://example.com" target="_blank" class="external-link">Visit External Site</a>\\n\\n<p lang="en" class="intro-text">This paragraph is in English and has styling.</p>\\n\\n<button type="button" onclick="alert("Hello World!")" class="btn primary">Click Me!</button>',content:{title:"HTML Attributes & Classes",description:"Attributes are like adjectives for HTML elements - they provide extra information and control! Classes and IDs help organize and style your content. Master these fundamentals! ",sections:[{title:"What Are HTML Attributes?",content:'Attributes provide additional information about elements:\\n\\n**Basic syntax:**\\n```html\\n<element attribute="value">Content</element>\\n```\\n\\n**Key points:**\\n Written in the opening tag\\n Use quotes around values\\n Multiple attributes separated by spaces\\n Case-insensitive but lowercase is standard'},{title:"Universal Attributes",content:'These work on any HTML element:\\n\\n **id**: Unique identifier (`id="header"`)\\n **class**: CSS styling group (`class="button primary"`)\\n **title**: Tooltip text (`title="Click for help"`)\\n **lang**: Language (`lang="en"`)\\n **style**: Inline CSS\\n **data-***: Custom data storage'},{title:"Classes vs IDs",content:"Understanding the difference:\\n\\n**Classes:**\\n Can be reused on multiple elements\\n Use for styling groups\\n CSS selector: `.classname`\\n Multiple classes per element\\n\\n**IDs:**\\n Must be unique on the page\\n Use for specific elements\\n CSS selector: `#idname`\\n Good for JavaScript targets"},{title:"Element-Specific Attributes",content:"Different elements have special attributes:\\n\\n**Links (`<a>`):**\\n `href`, `target`, `rel`\\n\\n**Images (`<img>`):**\\n `src`, `alt`, `width`, `height`\\n\\n**Forms:**\\n `type`, `name`, `required`, `placeholder`\\n\\n**Media:**\\n `controls`, `autoplay`, `loop`"},{title:"Attributes Practice Workshop! ",content:"In the playground:\\n1. Add more classes to different elements\\n2. Create unique IDs and reference them\\n3. Add title attributes for tooltips\\n4. Use data-* attributes for custom data\\n5. Experiment with different attribute combinations\\n\\nAttributes unlock the full power of HTML elements!"}]}},{id:18,title:"Character Entities & Special Symbols",completed:!1,playgroundCode:"<h1>Special Characters & Symbols! </h1>\\n\\n<h2>HTML Character Entities:</h2>\\n<p>Display HTML tags safely:</p>\\n<ul>\\n    <li>&lt;h1&gt;This shows HTML tags literally&lt;/h1&gt;</li>\\n    <li>&amp; - Ampersand symbol</li>\\n    <li>&quot;quoted text&quot; - Quote marks</li>\\n    <li>&copy; 2024 - Copyright symbol</li>\\n    <li>&reg; - Registered trademark</li>\\n    <li>&trade; - Trademark</li>\\n</ul>\\n\\n<h2>Common Symbols:</h2>\\n<p>&hearts; &spades; &clubs; &diams; - Card suits</p>\\n<p>&larr; &uarr; &rarr; &darr; - Arrows</p>\\n<p>&frac12; &frac14; &frac34; - Fractions</p>\\n<p>&plusmn; &times; &divide; - Math symbols</p>\\n\\n<h2>Spaces and Dashes:</h2>\\n<p>Regular space vs&nbsp;&nbsp;&nbsp;non-breaking&nbsp;spaces</p>\\n<p>Em&mdash;dash and en&ndash;dash examples</p>",content:{title:"Character Entities & Special Symbols",description:"HTML character entities let you display special characters safely! These are essential for showing symbols that would otherwise break your code or not display correctly. ",sections:[{title:"Why Character Entities?",content:'Some characters need special treatment:\\n\\n**Problem characters:**\\n `<` and `>` - Look like HTML tags\\n `&` - Starts HTML entities\\n `"` and `\'` - Used for attributes\\n\\n**The solution:**\\nEntities represent them safely:\\n `&lt;` for `<`\\n `&gt;` for `>`\\n `&amp;` for `&`\\n `&quot;` for `"`'},{title:"Essential Entities",content:'Most important entities to know:\\n\\n**HTML-safe characters:**\\n `&lt;`  < (less than)\\n `&gt;`  > (greater than)\\n `&amp;`  & (ampersand)\\n `&quot;`  " (quote)\\n\\n**Common symbols:**\\n `&copy;`   (copyright)\\n `&reg;`   (registered)\\n `&trade;`   (trademark)\\n `&nbsp;`  non-breaking space'},{title:"Useful Symbol Entities",content:"Entities for special symbols:\\n\\n**Math symbols:**\\n `&times;`   (multiply)\\n `&divide;`   (divide)\\n `&plusmn;`   (plus/minus)\\n `&frac12;`   (one half)\\n\\n**Arrows and shapes:**\\n `&larr;`   (left arrow)\\n `&rarr;`   (right arrow)\\n `&hearts;`   (heart)\\n `&spades;`   (spade)"},{title:"Numeric Character References",content:"Use numbers for any character:\\n\\n**Decimal format:**\\n `&#169;`   (copyright)\\n `&#8364;`   (euro)\\n `&#8482;`   (trademark)\\n\\n**Hexadecimal format:**\\n `&#x00A9;`   (copyright)\\n `&#x20AC;`   (euro)\\n\\nUse these for characters without named entities!"},{title:"Special Characters Practice! ",content:"In the playground:\\n1. Display HTML tags as text using entities\\n2. Add copyright and trademark symbols\\n3. Use non-breaking spaces for better control\\n4. Try different arrow and math symbols\\n5. Experiment with numeric character codes\\n\\nEntities ensure your text displays correctly everywhere!"}]}},{id:19,title:"Comments - Notes for Developers",completed:!1,playgroundCode:'<!-- This is an HTML comment - invisible to users -->\\n<h1>Understanding HTML Comments</h1>\\n\\n<!-- \\n    Multi-line comments are useful for\\n    longer explanations and notes\\n-->\\n\\n<div class="header">\\n    <!-- TODO: Add company logo here -->\\n    <h2>Welcome to My Website</h2>\\n    \\n    <!-- Navigation menu - will be added later -->\\n    <!-- <nav>\\n        <ul>\\n            <li><a href="#">Home</a></li>\\n            <li><a href="#">About</a></li>\\n        </ul>\\n    </nav> -->\\n</div>\\n\\n<!-- Main Content Section -->\\n<main>\\n    <p>This content is visible to users.</p>\\n    \\n    <!-- FIXME: Update this text with real content -->\\n    <p>Placeholder text that needs to be replaced.</p>\\n    \\n    <!-- NOTE: Check with designer about color scheme -->\\n    <section style="background: lightblue; padding: 20px;">\\n        <h3>Featured Section</h3>\\n        <p>Important information goes here.</p>\\n    </section>\\n</main>\\n\\n<!-- \\n    Development reminders:\\n    - Test on different browsers\\n    - Optimize images for faster loading\\n    - Add proper alt text to all images\\n    - Consider accessibility improvements\\n-->',content:{title:"Comments - Notes for Developers",description:"HTML comments are like sticky notes in your code! They help you and other developers understand what's happening, plan changes, and organize complex projects. ",sections:[{title:"HTML Comment Syntax",content:"Comments are invisible to users but valuable to developers:\\n\\n**Basic syntax:**\\n```html\\n<!-- This is a comment -->\\n```\\n\\n**Multi-line comments:**\\n```html\\n<!-- \\n    This is a longer comment\\n    spanning multiple lines\\n-->\\n```\\n\\n**Key rules:**\\n Start with `<!--` and end with `-->`\\n Content is completely ignored by browsers\\n Cannot be nested inside each other"},{title:"When to Use Comments",content:"Comments serve many purposes:\\n\\n**Documentation:**\\n Explain complex sections\\n Note the purpose of code blocks\\n Provide context for future developers\\n\\n**Organization:**\\n Mark different page sections\\n Create visual separators\\n Label major components\\n\\n**Planning:**\\n Note future improvements (TODO)\\n Mark temporary solutions (FIXME)\\n Plan upcoming features"},{title:"Comment Best Practices",content:"Write helpful, professional comments:\\n\\n**Good practices:**\\n Keep comments up to date\\n Be clear and concise\\n Explain 'why', not just 'what'\\n Use consistent formatting\\n\\n**Common patterns:**\\n```html\\n<!-- TODO: Add mobile menu -->\\n<!-- FIXME: Fix alignment issue -->\\n<!-- NOTE: Check with client -->\\n<!-- HACK: Temporary workaround -->\\n```"},{title:"Temporarily Disabling Code",content:'Comments can hide code without deleting:\\n\\n**Commenting out code:**\\n```html\\n<!-- Temporarily hidden\\n<div class="promo-banner">\\n    <p>Special offer!</p>\\n</div>\\n-->\\n```\\n\\n**Sectioning large files:**\\n```html\\n<!-- ========== HEADER ========== -->\\n<!-- ========== MAIN ========== -->\\n<!-- ========== FOOTER ========== -->\\n```\\n\\nThis helps during development and debugging!'},{title:"Comments Practice Workshop! ",content:"In the playground:\\n1. Add comments explaining different sections\\n2. Use comments to temporarily hide content\\n3. Create TODO notes for future improvements\\n4. Practice multi-line comment formatting\\n5. Try commenting out entire code blocks\\n\\nGood comments make code maintenance much easier for everyone!"}]}},{id:20,title:"Inline vs Block Elements",completed:!1,playgroundCode:'<h1>Inline vs Block Elements Demo</h1>\\n\\n<h2>Block Elements (Full Width):</h2>\\n<div style="border: 2px solid red; margin: 5px; padding: 10px;">Block DIV - takes full width</div>\\n<div style="border: 2px solid red; margin: 5px; padding: 10px;">Another Block DIV - starts on new line</div>\\n<p style="border: 2px solid blue; margin: 5px; padding: 10px;">Block Paragraph</p>\\n<h3 style="border: 2px solid green; margin: 5px; padding: 10px;">Block Heading</h3>\\n\\n<h2>Inline Elements (Flow with Text):</h2>\\n<p>This paragraph contains \\n<span style="border: 2px solid red; padding: 2px;">inline span</span> and \\n<a href="#" style="border: 2px solid blue; padding: 2px;">inline link</a> and \\n<strong style="border: 2px solid green; padding: 2px;">inline bold</strong> and \\n<em style="border: 2px solid purple; padding: 2px;">inline italic</em> that all flow together.</p>\\n\\n<h2>Mixed Example:</h2>\\n<div style="border: 2px solid orange; padding: 15px; margin: 10px;">\\n    <p>This is a <strong>block paragraph</strong> inside a <em>block div</em>.</p>\\n    <p>It contains <span style="background: yellow;">inline spans</span> and <a href="#">inline links</a> that flow with text.</p>\\n</div>',content:{title:"Inline vs Block Elements",description:"Understanding element behavior is crucial for web layout! This fundamental concept affects how elements display and position on your webpage. ",sections:[{title:"Block Elements - Full Width Containers",content:"Block elements stack vertically like building blocks:\\n\\n**Characteristics:**\\n Take up full width available\\n Start on a new line\\n Push next element to new line\\n Can contain other elements\\n Width and height controllable with CSS\\n\\n**Common block elements:**\\n `<div>`, `<p>`, `<h1>`-`<h6>`\\n `<ul>`, `<ol>`, `<li>`\\n `<header>`, `<nav>`, `<main>`, `<footer>`"},{title:"Inline Elements - Flow with Text",content:"Inline elements flow within text like words in sentences:\\n\\n**Characteristics:**\\n Only take width of their content\\n Flow with surrounding text\\n Don't start on new lines\\n Cannot contain block elements\\n Width/height determined by content\\n\\n**Common inline elements:**\\n `<span>`, `<a>`, `<img>`\\n `<strong>`, `<em>`, `<code>`\\n `<small>`, `<sub>`, `<sup>`"},{title:"Inline-Block - Best of Both Worlds",content:"CSS can change element behavior:\\n\\n**display: inline-block**\\n Flows inline like inline elements\\n Accepts width/height like block elements\\n Great for navigation menus\\n Useful for button groups\\n\\n**display: block**\\n Forces inline elements to behave like block\\n\\n**display: inline**\\n Forces block elements to behave inline"},{title:"Layout Implications",content:"Understanding behavior affects design decisions:\\n\\n**Block element uses:**\\n Page sections and containers\\n Layout structure\\n Content that needs full width\\n When you need precise sizing\\n\\n**Inline element uses:**\\n Text formatting within paragraphs\\n Links within sentences\\n Small UI elements\\n Content flowing with text"},{title:"Element Behavior Experiment! ",content:"In the playground, observe:\\n1. How block elements stack vertically\\n2. How inline elements flow with text\\n3. The borders showing element boundaries\\n4. Different spacing and positioning\\n5. How elements interact with each other\\n\\nUnderstanding element behavior is fundamental to CSS layout!"}]}},{id:21,title:"Form Input Types & Validation",completed:!1,playgroundCode:'<h1>Modern Form Inputs Demo </h1>\\n\\n<form style="max-width: 500px; padding: 20px; border: 1px solid #ccc; border-radius: 10px;">\\n    <h2>Try Different Input Types:</h2>\\n    \\n    <label for="text-input">Text Input:</label><br>\\n    <input type="text" id="text-input" placeholder="Enter your name" required><br><br>\\n    \\n    <label for="email-input">Email Input:</label><br>\\n    <input type="email" id="email-input" placeholder="you@example.com" required><br><br>\\n    \\n    <label for="date-input">Date Input:</label><br>\\n    <input type="date" id="date-input"><br><br>\\n    \\n    <label for="number-input">Number Input:</label><br>\\n    <input type="number" id="number-input" min="1" max="100" placeholder="1-100"><br><br>\\n    \\n    <label for="range-input">Range Slider:</label><br>\\n    <input type="range" id="range-input" min="0" max="100" value="50"><br><br>\\n    \\n    <label for="color-input">Color Picker:</label><br>\\n    <input type="color" id="color-input" value="#3498db"><br><br>\\n    \\n    <label for="file-input">File Upload:</label><br>\\n    <input type="file" id="file-input" accept=".jpg,.png,.pdf"><br><br>\\n    \\n    <label for="search-input">Search Input:</label><br>\\n    <input type="search" id="search-input" placeholder="Search here..."><br><br>\\n    \\n    <input type="submit" value="Submit Form" style="background: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 5px;">\\n</form>',content:{title:"Form Input Types & Validation",description:"HTML5 revolutionized forms with powerful input types and built-in validation! Discover specialized inputs and learn to ensure users enter valid data. ",sections:[{title:"Modern HTML5 Input Types",content:'HTML5 introduced specialized input types:\\n\\n**Communication inputs:**\\n `type="email"` - Email validation\\n `type="tel"` - Phone numbers\\n `type="url"` - Web addresses\\n\\n**Date and time:**\\n `type="date"` - Date picker\\n `type="time"` - Time picker\\n `type="datetime-local"` - Date + time\\n\\n**Interactive inputs:**\\n `type="range"` - Slider control\\n `type="color"` - Color picker\\n `type="file"` - File upload'},{title:"Input Validation Attributes",content:"Control what users can enter:\\n\\n**Universal attributes:**\\n `required` - Field must be filled\\n `placeholder` - Hint text\\n `readonly` - Can't be edited\\n `disabled` - Can't be used\\n\\n**Text validation:**\\n `minlength/maxlength` - Character limits\\n `pattern` - Custom validation with regex\\n\\n**Number validation:**\\n `min/max` - Value limits\\n `step` - Increment size"},{title:"File Upload and Advanced Features",content:'Handle complex input types:\\n\\n**File inputs:**\\n```html\\n<input type="file" \\n       accept=".pdf,.jpg,.png" \\n       multiple>\\n```\\n `accept` - Limit file types\\n `multiple` - Allow multiple files\\n\\n**Search inputs:**\\n```html\\n<input type="search" \\n       placeholder="Search...">\\n```\\n Often includes clear button\\n Better mobile experience'},{title:"Form Validation Best Practices",content:"Create user-friendly validation:\\n\\n**HTML5 validation:**\\n Automatic error messages\\n Prevents invalid form submission\\n Works without JavaScript\\n Great user experience\\n\\n**Accessibility:**\\n Always use proper labels\\n Provide clear error messages\\n Don't rely only on color\\n Test with screen readers\\n\\n**Progressive enhancement:**\\nStart with HTML validation, enhance with CSS and JavaScript!"},{title:"Interactive Forms Challenge! ",content:"In the playground:\\n1. Try submitting with empty required fields\\n2. Enter invalid email formats and see validation\\n3. Use the color picker and range slider\\n4. Try the date picker on different devices\\n5. Upload different file types\\n6. Notice specialized mobile keyboards\\n\\nModern form inputs make data collection powerful and intuitive!"}]}},{id:22,title:"Advanced HTML Features",completed:!1,playgroundCode:'<h1>Advanced HTML Features</h1>\\n\\n<details>\\n    <summary>Click to expand this section</summary>\\n    <p>This content is hidden by default and can be expanded!</p>\\n    <ul>\\n        <li>Great for FAQ sections</li>\\n        <li>Reduces page clutter</li>\\n        <li>Native browser support</li>\\n    </ul>\\n</details>\\n\\n<br>\\n\\n<progress value="75" max="100">75%</progress>\\n<p>Loading progress: 75%</p>\\n\\n<meter value="6" min="0" max="10">6 out of 10</meter>\\n<p>Rating: 6 out of 10 stars</p>\\n\\n<br>\\n\\n<dialog id="demo-dialog" style="padding: 20px; border-radius: 10px; border: 2px solid #ccc;">\\n    <h3>This is a Dialog</h3>\\n    <p>Dialogs are great for modals and popups!</p>\\n    <button onclick="alert(\\"Dialog closed\\")">Close Dialog</button>\\n</dialog>\\n\\n<button onclick="alert(\\"Dialog opened\\")">Open Dialog</button>\\n\\n<br><br>\\n\\n<output for="range-demo" id="output-demo">50</output>\\n<input type="range" id="range-demo" min="0" max="100" value="50" \\n       oninput="document.getElementById(\\"output-demo\\").textContent = this.value">\\n<p>The output element shows calculated results!</p>',content:{title:"Advanced HTML Features",description:"Explore powerful HTML5 features that add interactivity and functionality! These advanced elements can enhance user experience without JavaScript. ",sections:[{title:"Details and Summary - Collapsible Content",content:"Create expandable sections with native HTML:\\n\\n```html\\n<details>\\n  <summary>Click to expand</summary>\\n  <p>Hidden content here...</p>\\n</details>\\n```\\n\\n**Perfect for:**\\n FAQ sections\\n Long content organization\\n Progressive disclosure\\n Reducing page clutter\\n\\n**Benefits:**\\n Works without JavaScript\\n Accessible by default\\n Keyboard navigation support"},{title:"Progress and Meter Elements",content:'Show progress and measurements:\\n\\n**Progress element:**\\n```html\\n<progress value="75" max="100">75%</progress>\\n```\\n Shows completion progress\\n Great for loading bars\\n Form submission progress\\n\\n**Meter element:**\\n```html\\n<meter value="6" min="0" max="10">6/10</meter>\\n```\\n Shows scalar measurements\\n Ratings, scores, percentages\\n Disk usage, temperatures'},{title:"Dialog Element - Native Modals",content:'Create modal dialogs with HTML:\\n\\n```html\\n<dialog id="my-dialog">\\n  <h3>Dialog Title</h3>\\n  <p>Dialog content...</p>\\n  <button>Close</button>\\n</dialog>\\n```\\n\\n**JavaScript to control:**\\n `dialog.showModal()` - Show as modal\\n `dialog.show()` - Show as regular dialog\\n `dialog.close()` - Close dialog\\n\\n**Benefits:**\\n Built-in accessibility\\n Proper focus management\\n ESC key support'},{title:"Output Element - Calculated Results",content:'Display calculated or user-generated results:\\n\\n```html\\n<output for="input1 input2">Result</output>\\n```\\n\\n**Use cases:**\\n Calculator results\\n Form field calculations\\n Real-time updates\\n Interactive demonstrations\\n\\n**The `for` attribute:**\\nReferences the IDs of related inputs that contribute to the calculation.'},{title:"Advanced Features Workshop! ",content:"In the playground, try:\\n1. Expand and collapse the details section\\n2. Watch the progress bar and meter\\n3. Open and close the dialog modal\\n4. Move the range slider to see output update\\n5. Create your own collapsible FAQ\\n6. Build a simple calculator with output\\n\\nThese features add powerful functionality with minimal code!"}]}},{id:23,title:"Performance & Best Practices",completed:!1,playgroundCode:'<!DOCTYPE html>\\n<html lang="en">\\n<head>\\n    <!-- Essential meta tags come first -->\\n    <meta charset="UTF-8">\\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\\n    \\n    <!-- Optimized title and description -->\\n    <title>Fast Loading Website - Performance Demo</title>\\n    <meta name="description" content="Demonstration of HTML performance best practices for faster loading websites.">\\n    \\n    <!-- Preload critical resources -->\\n    <link rel="preload" href="critical.css" as="style">\\n</head>\\n<body>\\n    <header>\\n        <h1>Performance-Optimized HTML</h1>\\n        <nav aria-label="Main navigation">\\n            <ul>\\n                <li><a href="#performance">Performance Tips</a></li>\\n                <li><a href="#optimization">Optimization</a></li>\\n            </ul>\\n        </nav>\\n    </header>\\n    \\n    <main>\\n        <section id="performance">\\n            <h2>HTML Performance Best Practices</h2>\\n            \\n            <!-- Optimized images with lazy loading -->\\n            <img src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=800&q=80" \\n                 alt="Person coding on laptop showing performance optimization" \\n                 width="800" height="450" \\n                 loading="lazy">\\n            \\n            <p>This page demonstrates performance optimizations:</p>\\n            <ul>\\n                <li>Minimal, clean HTML structure</li>\\n                <li>Proper image optimization with lazy loading</li>\\n                <li>Semantic markup for better accessibility</li>\\n                <li>Optimized meta tags for SEO</li>\\n            </ul>\\n        </section>\\n        \\n        <section id="optimization">\\n            <h2>Code Quality Checklist</h2>\\n            <ol>\\n                <li>Valid HTML markup </li>\\n                <li>Semantic element usage </li>\\n                <li>Proper heading hierarchy </li>\\n                <li>Accessible form labels </li>\\n                <li>Optimized images </li>\\n                <li>Clean, readable code </li>\\n            </ol>\\n        </section>\\n    </main>\\n    \\n    <footer>\\n        <p>&copy; 2024 Performance Demo. Built with optimized HTML!</p>\\n    </footer>\\n</body>\\n</html>',content:{title:"Performance & Best Practices",description:"Create fast, efficient websites with HTML best practices! Learn optimization techniques that improve loading speed, SEO, and user experience. ",sections:[{title:"HTML Performance Fundamentals",content:"Optimize HTML for speed and efficiency:\\n\\n**Key principles:**\\n Minimize HTML file size\\n Reduce unnecessary elements\\n Use semantic markup correctly\\n Optimize images and media\\n Implement lazy loading\\n\\n**Performance benefits:**\\n Faster page loading\\n Better user experience\\n Improved SEO rankings\\n Lower bandwidth usage\\n Better mobile performance"},{title:"Image Optimization",content:'Images often slow down websites:\\n\\n**Optimization techniques:**\\n```html\\n<img src="image.jpg" \\n     alt="Description" \\n     width="800" height="600" \\n     loading="lazy">\\n```\\n\\n**Best practices:**\\n Always specify width/height\\n Use `loading="lazy"` for below-fold images\\n Choose appropriate formats (WebP, JPEG, PNG)\\n Compress images for web\\n Use responsive images with srcset'},{title:"Code Quality Standards",content:"Write clean, maintainable HTML:\\n\\n**Structure:**\\n Consistent indentation\\n Logical element nesting\\n Proper closing of tags\\n Meaningful class and ID names\\n\\n**Validation:**\\n Use W3C HTML validator\\n Check for accessibility issues\\n Test across browsers\\n Validate forms work correctly\\n\\n**Organization:**\\n Group related elements\\n Use comments for complex sections\\n Keep files organized"},{title:"SEO and Meta Optimization",content:"Optimize for search engines:\\n\\n**Essential meta tags:**\\n Unique, descriptive titles\\n Compelling meta descriptions\\n Proper Open Graph tags\\n Structured data markup\\n\\n**Content optimization:**\\n Proper heading hierarchy\\n Descriptive alt text\\n Clean URL structures\\n Fast loading times\\n Mobile-friendly design"},{title:"Performance Testing! ",content:"In the playground, notice:\\n1. Clean, minimal HTML structure\\n2. Optimized images with lazy loading\\n3. Proper semantic markup\\n4. Efficient meta tag usage\\n5. Accessible navigation and content\\n\\nTest your own websites with:\\n PageSpeed Insights\\n Lighthouse audits\\n HTML validators\\n Accessibility checkers"}]}},{id:24,title:"HTML Project Planning & Structure",completed:!1,playgroundCode:'<!-- Website Planning Template -->\\n<!DOCTYPE html>\\n<html lang="en">\\n<head>\\n    <meta charset="UTF-8">\\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\\n    <title>[Your Project] - [Main Keyword]</title>\\n    <meta name="description" content="[150-160 character description of your project]">\\n</head>\\n<body>\\n    <!-- Header with site identity and navigation -->\\n    <header>\\n        <h1>[Your Site Name]</h1>\\n        <nav aria-label="Main navigation">\\n            <ul>\\n                <li><a href="#home">Home</a></li>\\n                <li><a href="#about">About</a></li>\\n                <li><a href="#services">Services</a></li>\\n                <li><a href="#contact">Contact</a></li>\\n            </ul>\\n        </nav>\\n    </header>\\n    \\n    <!-- Main content area -->\\n    <main>\\n        <!-- Hero/Introduction section -->\\n        <section id="home">\\n            <h2>[Compelling Headline]</h2>\\n            <p>[Brief description of what you offer]</p>\\n            <a href="#contact" class="cta-button">Get Started</a>\\n        </section>\\n        \\n        <!-- About section -->\\n        <section id="about">\\n            <h2>About [Your Business/Project]</h2>\\n            <p>[Your story, mission, or background]</p>\\n        </section>\\n        \\n        <!-- Services/Portfolio section -->\\n        <section id="services">\\n            <h2>What We Offer</h2>\\n            <div class="services-grid">\\n                <article>\\n                    <h3>Service 1</h3>\\n                    <p>Description of service</p>\\n                </article>\\n                <article>\\n                    <h3>Service 2</h3>\\n                    <p>Description of service</p>\\n                </article>\\n            </div>\\n        </section>\\n        \\n        <!-- Contact section -->\\n        <section id="contact">\\n            <h2>Contact Us</h2>\\n            <form>\\n                <label for="name">Name</label>\\n                <input type="text" id="name" name="name" required>\\n                \\n                <label for="email">Email</label>\\n                <input type="email" id="email" name="email" required>\\n                \\n                <label for="message">Message</label>\\n                <textarea id="message" name="message" required></textarea>\\n                \\n                <button type="submit">Send Message</button>\\n            </form>\\n        </section>\\n    </main>\\n    \\n    <!-- Footer with additional info -->\\n    <footer>\\n        <p>&copy; 2024 [Your Name/Company]. All rights reserved.</p>\\n        <nav aria-label="Footer navigation">\\n            <ul>\\n                <li><a href="#privacy">Privacy Policy</a></li>\\n                <li><a href="#terms">Terms of Service</a></li>\\n            </ul>\\n        </nav>\\n    </footer>\\n</body>\\n</html>',content:{title:"HTML Project Planning & Structure",description:"Learn to plan and structure HTML projects like a pro! Proper planning leads to better websites that are easier to build and maintain. ",sections:[{title:"Project Planning Phase",content:"Before writing code, plan your project:\\n\\n**Define your goals:**\\n What is the website's purpose?\\n Who is your target audience?\\n What actions should users take?\\n What content do you need?\\n\\n**Create a sitemap:**\\n List all pages needed\\n Plan navigation structure\\n Organize content hierarchy\\n Consider user journey\\n\\n**Content strategy:**\\n Write compelling headlines\\n Plan your messaging\\n Gather images and media\\n Organize information logically"},{title:"HTML Structure Best Practices",content:"Build a solid foundation:\\n\\n**Document structure:**\\n Proper DOCTYPE and html tag\\n Complete head section\\n Semantic body structure\\n Logical heading hierarchy\\n\\n**Page sections:**\\n Header with site identity\\n Navigation for user movement\\n Main content area\\n Footer with additional info\\n\\n**Content organization:**\\n Use semantic elements appropriately\\n Group related content in sections\\n Create clear information hierarchy\\n Ensure logical tab order"},{title:"Common Website Patterns",content:"Learn standard website structures:\\n\\n**Business website:**\\n Hero section with value prop\\n About section with credibility\\n Services/products showcase\\n Testimonials or portfolio\\n Contact information\\n\\n**Portfolio website:**\\n Personal introduction\\n Skills and expertise\\n Project showcase\\n Work process or approach\\n Contact and social links\\n\\n**Blog website:**\\n Recent posts listing\\n Categories and tags\\n About the author\\n Archive or search\\n Comment sections"},{title:"Development Workflow",content:"Follow a systematic approach:\\n\\n**1. Planning phase:**\\n Define requirements\\n Create wireframes\\n Plan content structure\\n Choose technology stack\\n\\n**2. Development phase:**\\n Write HTML structure first\\n Add content and test\\n Validate markup regularly\\n Test across devices\\n\\n**3. Launch phase:**\\n Final accessibility check\\n Performance optimization\\n SEO verification\\n Cross-browser testing"},{title:"Project Planning Workshop! ",content:"Use the playground template to:\\n1. Plan your own website project\\n2. Replace placeholder content with your ideas\\n3. Customize the structure for your needs\\n4. Add or remove sections as appropriate\\n5. Consider your target audience\\n6. Plan your content strategy\\n\\nGood planning saves time and creates better websites!"}]}},{id:25,title:"Final Project & HTML Mastery",completed:!1,playgroundCode:'<!DOCTYPE html>\\n<html lang="en">\\n<head>\\n    <meta charset="UTF-8">\\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\\n    <title>[Your Name] - Web Developer Portfolio</title>\\n    <meta name="description" content="Professional web developer portfolio showcasing HTML, CSS, and JavaScript projects. Available for freelance work.">\\n    <meta name="author" content="[Your Name]">\\n    \\n    <!-- Open Graph tags for social sharing -->\\n    <meta property="og:title" content="[Your Name] - Web Developer">\\n    <meta property="og:description" content="Professional web developer creating amazing digital experiences.">\\n    <meta property="og:type" content="website">\\n</head>\\n<body>\\n    <header>\\n        <h1>[Your Name]</h1>\\n        <p>Web Developer & Designer</p>\\n        \\n        <nav aria-label="Main navigation">\\n            <ul>\\n                <li><a href="#about">About</a></li>\\n                <li><a href="#skills">Skills</a></li>\\n                <li><a href="#projects">Projects</a></li>\\n                <li><a href="#contact">Contact</a></li>\\n            </ul>\\n        </nav>\\n    </header>\\n    \\n    <main>\\n        <section id="about">\\n            <h2>About Me</h2>\\n            <p>I am a passionate web developer who loves creating beautiful, functional websites. I specialize in HTML, CSS, and JavaScript, and I am always learning new technologies.</p>\\n            <p>My goal is to help businesses and individuals establish their online presence with clean, accessible, and performant websites.</p>\\n        </section>\\n        \\n        <section id="skills">\\n            <h2>Skills & Technologies</h2>\\n            <ul>\\n                <li><strong>HTML5</strong> - Semantic markup, accessibility, forms</li>\\n                <li><strong>CSS3</strong> - Responsive design, animations, modern layouts</li>\\n                <li><strong>JavaScript</strong> - Interactive functionality, API integration</li>\\n                <li><strong>Web Performance</strong> - Optimization, best practices</li>\\n                <li><strong>Accessibility</strong> - WCAG compliance, inclusive design</li>\\n            </ul>\\n        </section>\\n        \\n        <section id="projects">\\n            <h2>Featured Projects</h2>\\n            \\n            <article>\\n                <h3>Personal Portfolio Website</h3>\\n                <p>A responsive portfolio website built with semantic HTML5, modern CSS, and progressive enhancement. Features include dark mode, smooth animations, and full accessibility support.</p>\\n                <p><strong>Technologies:</strong> HTML5, CSS3, JavaScript</p>\\n            </article>\\n            \\n            <article>\\n                <h3>Local Business Website</h3>\\n                <p>Complete website redesign for a local restaurant featuring online menu, reservation system, and mobile-first responsive design.</p>\\n                <p><strong>Technologies:</strong> HTML5, CSS Grid, Contact Forms</p>\\n            </article>\\n            \\n            <article>\\n                <h3>Educational Platform</h3>\\n                <p>Interactive learning platform with progress tracking, multimedia content, and accessible design for all users.</p>\\n                <p><strong>Technologies:</strong> Semantic HTML, Advanced Forms, Media Elements</p>\\n            </article>\\n        </section>\\n        \\n        <section id="contact">\\n            <h2>Get in Touch</h2>\\n            <p>I am always interested in new opportunities and collaborations. Let us work together to bring your ideas to life!</p>\\n            \\n            <form>\\n                <label for="name">Your Name</label>\\n                <input type="text" id="name" name="name" required>\\n                \\n                <label for="email">Email Address</label>\\n                <input type="email" id="email" name="email" required>\\n                \\n                <label for="project">Project Type</label>\\n                <select id="project" name="project">\\n                    <option value="">Select project type...</option>\\n                    <option value="website">New Website</option>\\n                    <option value="redesign">Website Redesign</option>\\n                    <option value="maintenance">Website Maintenance</option>\\n                    <option value="consultation">Consultation</option>\\n                </select>\\n                \\n                <label for="message">Project Details</label>\\n                <textarea id="message" name="message" rows="5" required></textarea>\\n                \\n                <button type="submit">Send Message</button>\\n            </form>\\n        </section>\\n    </main>\\n    \\n    <footer>\\n        <p>&copy; 2024 [Your Name]. Built with semantic HTML5 and lots of passion! </p>\\n        <nav aria-label="Social links">\\n            <ul>\\n                <li><a href="#" aria-label="GitHub Profile">GitHub</a></li>\\n                <li><a href="#" aria-label="LinkedIn Profile">LinkedIn</a></li>\\n                <li><a href="#" aria-label="Twitter Profile">Twitter</a></li>\\n            </ul>\\n        </nav>\\n    </footer>\\n</body>\\n</html>',content:{title:"Final Project & HTML Mastery",description:"Congratulations on completing the HTML Fundamentals course!  Time to showcase everything you've learned by building your own professional portfolio website. You now have all the skills to create amazing web experiences!",sections:[{title:"Your HTML Journey - What You've Mastered",content:"Look how far you've come! You now understand:\\n\\n**Core HTML Skills:**\\n Document structure and semantic markup\\n Forms, tables, and multimedia content\\n Accessibility and inclusive design\\n SEO optimization and meta tags\\n Modern HTML5 features and best practices\\n\\n**Professional Skills:**\\n Code organization and validation\\n Performance optimization\\n Cross-browser compatibility\\n Project planning and structure\\n Industry best practices"},{title:"Final Project Requirements",content:"Build a complete portfolio website that demonstrates your skills:\\n\\n**Required Elements:**\\n Proper HTML5 document structure\\n Semantic markup throughout\\n Responsive meta tags\\n Navigation with internal links\\n Contact form with validation\\n Multimedia content (images/video)\\n Accessibility features\\n\\n**Bonus Features:**\\n Advanced form inputs\\n Social media meta tags\\n Performance optimizations\\n Creative use of HTML5 features"},{title:"Beyond HTML - Your Next Steps",content:"You have a solid HTML foundation! Here's what to learn next:\\n\\n**Immediate next steps:**\\n **CSS** - Style your HTML beautifully\\n **Responsive Design** - Mobile-first layouts\\n **JavaScript** - Add interactivity\\n **Git/GitHub** - Version control\\n\\n**Advanced topics:**\\n CSS Frameworks (Bootstrap, Tailwind)\\n JavaScript Frameworks (React, Vue)\\n Backend Development (Node.js, Python)\\n Web Performance Optimization\\n Progressive Web Apps"},{title:"Professional Development Tips",content:"Continue growing as a web developer:\\n\\n**Build your portfolio:**\\n Create diverse project types\\n Document your learning process\\n Show problem-solving skills\\n Include live demos\\n\\n**Join the community:**\\n Follow web development blogs\\n Join developer forums and Discord\\n Attend local meetups\\n Contribute to open source\\n\\n**Keep learning:**\\n Practice coding daily\\n Build real projects\\n Learn from other developers\\n Stay updated with web standards"},{title:"Congratulations! ",content:"You've completed the comprehensive HTML Fundamentals course!\\n\\n**Final challenge:**\\n1. Customize the portfolio template with your own information\\n2. Add your personal projects and experiences\\n3. Include your contact information\\n4. Validate your HTML with W3C validator\\n5. Test accessibility with screen readers\\n6. Share your creation with others!\\n\\n**Remember:** You now have the foundation to build any website. The web is your canvas - go create something amazing!\\n\\n**Keep coding, keep learning, keep building!** "}]}}],"course-2":H0e,"course-3":Q0e}[n??""]??[],_=m.find(R=>R.id===t)||m[0],b=R=>{let O=R;return O=O.replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold">$1</strong>'),O=O.replace(/`([^`]+)`/g,'<code class="bg-gray-100 px-1 py-0.5 rounded text-sm font-mono">$1</code>'),O=O.replace(/```html\\n([\s\S]*?)\\n```/g,'<pre class="bg-gray-50 p-3 rounded-lg overflow-x-auto my-3"><code class="text-sm font-mono">$1</code></pre>'),O=O.replace(/```([\s\S]*?)```/g,'<pre class="bg-gray-50 p-3 rounded-lg overflow-x-auto my-3"><code class="text-sm font-mono">$1</code></pre>'),O=O.replace(/^ (.+)$/gm,'<li class="mb-1">$1</li>'),O=O.replace(/^\d+\. (.+)$/gm,'<li class="mb-1">$1</li>'),O.split(/\\n\\n|\n\n/).map(F=>{const K=F.trim();return K?K.includes("<li>")?'<ul class="list-disc ml-6 space-y-1 my-3">'+K+"</ul>":K.includes("<pre>")?K:'<p class="mb-3 leading-relaxed">'+K.replace(/\\n|\n/g,"<br>")+"</p>":""}).filter(F=>F).join("")},v=()=>{const R=`lesson-${t}-${Date.now()}.html`,O=new Blob([s],{type:"text/html"}),B=URL.createObjectURL(O),z=document.createElement("a");z.href=B,z.download=R,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(B),l({title:"File Downloaded!",description:`Your code has been saved as ${R}`})},w=()=>{if(c.current){c.current.style.height="auto";const R=window.innerHeight*.7,O=Math.min(c.current.scrollHeight,R);c.current.style.height=`${O}px`}},y=()=>{if(d.current&&d.current.contentDocument){const R=d.current.contentDocument.body,O=d.current.contentDocument.documentElement,B=Math.max((R==null?void 0:R.scrollHeight)||0,(O==null?void 0:O.scrollHeight)||0,300);d.current.style.height=`${B}px`}};if(P.useEffect(()=>{w()},[s]),P.useEffect(()=>{const R=setTimeout(()=>{y()},100);return()=>clearTimeout(R)},[s]),P.useEffect(()=>{if(_&&_.playgroundCode&&!r){const R=_.playgroundCode.replace(/\\\\n/g,`
`).replace(/\\n/g,`
`).replace(/\\t/g,"	");o(R)}},[t,_,r]),P.useEffect(()=>{a(!1)},[t]),h)return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-yellow-50",children:[C.jsx(hh,{}),C.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),C.jsx("p",{className:"text-gray-600",children:e.course.loadingCourse})]})})]});if(!u)return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-yellow-50",children:[C.jsx(hh,{}),C.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:e.course.courseNotFound}),C.jsx("p",{className:"text-gray-600",children:"The course you're looking for doesn't exist."})]})})]});const S=e.courseContent[u.id],x=(S==null?void 0:S.title)||u.title,k=(S==null?void 0:S.description)||u.description,N=(R=>{var z,F;if(!R)return null;let O="";u.id==="course-1"?O="html":u.id==="course-2"?O="css":u.id==="course-3"&&(O="arduino");const B=(F=(z=e.lessonContent)==null?void 0:z[O])==null?void 0:F[R.id];return B&&B.title?{...R,content:{title:B.title,description:B.description,sections:B.sections}}:R})(_);return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-yellow-50",children:[C.jsx(hh,{}),C.jsx("div",{className:"bg-white shadow-sm border-b",children:C.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:C.jsx("div",{className:"flex items-center justify-between",children:C.jsxs("div",{children:[C.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:x}),C.jsx("p",{className:"mt-2 text-gray-600",children:k}),C.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[C.jsx(Eae,{variant:"secondary",children:u.level}),C.jsx("span",{className:"text-sm text-gray-500",children:u.duration}),C.jsxs("span",{className:"text-sm text-gray-500",children:[m.length," lessons"]})]})]})})})}),C.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[C.jsx("div",{className:"lg:col-span-1",children:C.jsx(Yt,{children:C.jsxs(ei,{className:"p-6",children:[C.jsx("h2",{className:"text-xl font-semibold mb-4",children:e.course.courseLessons}),C.jsx("div",{className:"space-y-3",children:m.map(R=>C.jsx("button",{onClick:()=>i(R.id),className:`w-full text-left p-3 rounded-lg transition-colors ${t===R.id?"bg-purple-100 border-purple-300 border-2":"bg-gray-50 hover:bg-gray-100 border border-gray-200"}`,children:C.jsxs("div",{className:"flex items-center gap-3",children:[R.completed?C.jsx(Ao,{className:"h-5 w-5 text-green-500 flex-shrink-0"}):t===R.id?C.jsx(nb,{className:"h-5 w-5 text-purple-600 flex-shrink-0"}):C.jsx(hye,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:R.title}),C.jsxs("p",{className:"text-xs text-gray-500",children:[e.course.lesson," ",R.id]})]})]})},R.id))})]})})}),C.jsx("div",{className:"lg:col-span-3",children:C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[C.jsx(Yt,{className:"lg:col-span-1",children:C.jsxs(ei,{className:"p-6",children:[C.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[C.jsx(Mre,{className:"h-6 w-6 text-purple-600"}),C.jsx("h2",{className:"text-xl font-semibold",children:e.course.lessonContent})]}),N?C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:N.content.title}),C.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:N.content.description})]}),C.jsx("div",{className:"space-y-6",children:N.content.sections.map((R,O)=>C.jsxs("div",{className:"border-l-4 border-purple-200 pl-4",children:[C.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:R.title}),C.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:b(R.content)}})]},O))})]}):C.jsx("p",{className:"text-gray-500",children:e.course.selectLesson})]})}),C.jsx(Yt,{className:"lg:col-span-1",children:C.jsxs(ei,{className:"p-6",children:[C.jsxs("div",{className:"flex items-center justify-between mb-6",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx(ib,{className:"h-6 w-6 text-purple-600"}),C.jsx("h2",{className:"text-xl font-semibold",children:e.course.interactivePlayground})]}),C.jsxs(Mn,{onClick:v,variant:"outline",size:"sm",className:"flex items-center gap-2","data-testid":"button-save",children:[C.jsx(Ore,{className:"h-4 w-4"}),e.course.save]})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="course-3"?e.course.arduinoCode:e.course.htmlCode}),C.jsx("textarea",{ref:c,value:s,onChange:R=>{o(R.target.value),a(!0)},className:"w-full min-h-40 max-h-[70vh] p-3 border border-gray-300 rounded-lg font-mono text-sm overflow-y-auto focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:n==="course-3"?"Arduino code appears here...":"Enter your HTML code here...","data-testid":"textarea-html-code"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="course-3"?e.course.wiringDiagram:e.lesson.preview}),C.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:n==="course-3"&&(N!=null&&N.wiringImage)?C.jsx("img",{src:N.wiringImage,alt:"Wiring diagram",className:"w-full h-auto rounded","data-testid":"img-wiring-diagram"}):C.jsx("iframe",{ref:d,srcDoc:`<!DOCTYPE html><html><head><meta charset="UTF-8"><style>body{font-family:system-ui,sans-serif;margin:8px;line-height:1.4;}</style></head><body>${s}</body></html>`,className:"w-full border-0",title:"HTML Preview","data-testid":"iframe-preview",onLoad:y})})]})]})]})})]})})]})})]})}function J0e({scholarship:n}){const{t:e}=ou(),t=e.scholarshipContent[n.id],i=(t==null?void 0:t.title)||n.title,s=(t==null?void 0:t.description)||n.description,o=(t==null?void 0:t.field)||n.field,r=(t==null?void 0:t.location)||n.location,a=h=>{switch(h){case"open":return"bg-green-100 text-green-800";case"closing_soon":return"bg-orange-100 text-orange-800";case"upcoming":return"bg-blue-100 text-blue-800";case"closed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=h=>{switch(h){case"open":return"Open";case"closing_soon":return"Closing Soon";case"upcoming":return"Upcoming";case"closed":return"Closed";default:return h}},c=h=>{const f=["bg-primary hover:bg-primary/90","bg-secondary hover:bg-secondary/90","bg-accent hover:bg-accent/90","bg-green-500 hover:bg-green-600","bg-purple-500 hover:bg-purple-600","bg-indigo-500 hover:bg-indigo-600"];return f[h%f.length]},d=h=>{const f=["from-primary to-secondary","from-secondary to-accent","from-accent to-primary","from-green-500 to-blue-500","from-purple-500 to-pink-500","from-indigo-500 to-purple-500"];return f[h%f.length]},u=n.id&&parseInt(n.id.slice(-1))||0;return C.jsx(Yt,{className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 overflow-hidden",children:C.jsxs(ei,{className:"p-6",children:[C.jsxs("div",{className:"flex items-start justify-between mb-4",children:[C.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${d(u)} rounded-lg flex items-center justify-center`,children:C.jsx(_ye,{className:"w-6 h-6 text-white"})}),C.jsxs("div",{className:"text-right",children:[C.jsxs("div",{className:"text-2xl font-bold text-success",children:["$",n.amount.toLocaleString()]}),C.jsx("div",{className:"text-sm text-gray-500",children:"Award Amount"})]})]}),C.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:i}),C.jsx("p",{className:"text-gray-600 mb-4",children:s}),C.jsxs("div",{className:"space-y-2 mb-4",children:[C.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[C.jsx(oye,{className:"w-4 h-4 mr-2 text-primary"}),C.jsxs("span",{children:[e.home.scholarships.deadline,": ",new Date(n.deadline).toLocaleDateString()]})]}),C.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[C.jsx(Dx,{className:"w-4 h-4 mr-2 text-primary"}),C.jsx("span",{children:o})]}),C.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[C.jsx(Are,{className:"w-4 h-4 mr-2 text-primary"}),C.jsx("span",{children:r})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a(n.status)}`,children:l(n.status)}),n.status==="closed"?C.jsx(Mn,{className:"bg-gray-400 text-white cursor-not-allowed",disabled:!0,children:"Applications Closed"}):C.jsx(Tn,{href:`/scholarships/${n.id}`,children:C.jsx(Mn,{className:`${c(u)} text-white`,children:"View Details"})})]})]})})}const $V=P.forwardRef(({className:n,type:e,...t},i)=>C.jsx("input",{type:e,className:Ji("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:i,...t}));$V.displayName="Input";function SZ(n,[e,t]){return Math.min(t,Math.max(e,n))}var eSe=P.createContext(void 0);function qV(n){const e=P.useContext(eSe);return n||e||"ltr"}var bF=0;function tSe(){P.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??xZ()),document.body.insertAdjacentElement("beforeend",n[1]??xZ()),bF++,()=>{bF===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),bF--}},[])}function xZ(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var vF="focusScope.autoFocusOnMount",wF="focusScope.autoFocusOnUnmount",kZ={bubbles:!1,cancelable:!0},iSe="FocusScope",Nae=P.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...r}=n,[a,l]=P.useState(null),c=da(s),d=da(o),u=P.useRef(null),h=Hn(e,m=>l(m)),f=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(i){let m=function(w){if(f.paused||!a)return;const y=w.target;a.contains(y)?u.current=y:cf(u.current,{select:!0})},_=function(w){if(f.paused||!a)return;const y=w.relatedTarget;y!==null&&(a.contains(y)||cf(u.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&cf(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",_);const v=new MutationObserver(b);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",_),v.disconnect()}}},[i,a,f.paused]),P.useEffect(()=>{if(a){DZ.add(f);const m=document.activeElement;if(!a.contains(m)){const b=new CustomEvent(vF,kZ);a.addEventListener(vF,c),a.dispatchEvent(b),b.defaultPrevented||(nSe(lSe(Iae(a)),{select:!0}),document.activeElement===m&&cf(a))}return()=>{a.removeEventListener(vF,c),setTimeout(()=>{const b=new CustomEvent(wF,kZ);a.addEventListener(wF,d),a.dispatchEvent(b),b.defaultPrevented||cf(m??document.body,{select:!0}),a.removeEventListener(wF,d),DZ.remove(f)},0)}}},[a,c,d,f]);const g=P.useCallback(m=>{if(!t&&!i||f.paused)return;const _=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(_&&b){const v=m.currentTarget,[w,y]=sSe(v);w&&y?!m.shiftKey&&b===y?(m.preventDefault(),t&&cf(w,{select:!0})):m.shiftKey&&b===w&&(m.preventDefault(),t&&cf(y,{select:!0})):b===v&&m.preventDefault()}},[t,i,f.paused]);return C.jsx(Ci.div,{tabIndex:-1,...r,ref:h,onKeyDown:g})});Nae.displayName=iSe;function nSe(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(cf(i,{select:e}),document.activeElement!==t)return}function sSe(n){const e=Iae(n),t=LZ(e,n),i=LZ(e.reverse(),n);return[t,i]}function Iae(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function LZ(n,e){for(const t of n)if(!oSe(t,{upTo:e}))return t}function oSe(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function rSe(n){return n instanceof HTMLInputElement&&"select"in n}function cf(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&rSe(n)&&e&&n.select()}}var DZ=aSe();function aSe(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=EZ(n,e),n.unshift(e)},remove(e){var t;n=EZ(n,e),(t=n[0])==null||t.resume()}}}function EZ(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function lSe(n){return n.filter(e=>e.tagName!=="A")}function cSe(n){const e=P.useRef({value:n,previous:n});return P.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var dSe=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},rv=new WeakMap,OD=new WeakMap,FD={},CF=0,Tae=function(n){return n&&(n.host||Tae(n.parentNode))},uSe=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=Tae(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},hSe=function(n,e,t,i){var s=uSe(e,Array.isArray(n)?n:[n]);FD[t]||(FD[t]=new WeakMap);var o=FD[t],r=[],a=new Set,l=new Set(s),c=function(u){!u||a.has(u)||(a.add(u),c(u.parentNode))};s.forEach(c);var d=function(u){!u||l.has(u)||Array.prototype.forEach.call(u.children,function(h){if(a.has(h))d(h);else try{var f=h.getAttribute(i),g=f!==null&&f!=="false",m=(rv.get(h)||0)+1,_=(o.get(h)||0)+1;rv.set(h,m),o.set(h,_),r.push(h),m===1&&g&&OD.set(h,!0),_===1&&h.setAttribute(t,"true"),g||h.setAttribute(i,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return d(e),a.clear(),CF++,function(){r.forEach(function(u){var h=rv.get(u)-1,f=o.get(u)-1;rv.set(u,h),o.set(u,f),h||(OD.has(u)||u.removeAttribute(i),OD.delete(u)),f||u.removeAttribute(t)}),CF--,CF||(rv=new WeakMap,rv=new WeakMap,OD=new WeakMap,FD={})}},fSe=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),s=dSe(n);return s?(i.push.apply(i,Array.from(s.querySelectorAll("[aria-live]"))),hSe(i,s,t,"aria-hidden")):function(){return null}},Td=function(){return Td=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Td.apply(this,arguments)};function Pae(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function gSe(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,o;i<s;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))}var fN="right-scroll-bar-position",gN="width-before-scroll-bar",mSe="with-scroll-bars-hidden",pSe="--removed-body-scroll-bar-size";function yF(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function _Se(n,e){var t=P.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var s=t.value;s!==i&&(t.value=i,t.callback(i,s))}}}})[0];return t.callback=e,t.facade}var bSe=typeof window<"u"?P.useLayoutEffect:P.useEffect,NZ=new WeakMap;function vSe(n,e){var t=_Se(null,function(i){return n.forEach(function(s){return yF(s,i)})});return bSe(function(){var i=NZ.get(t);if(i){var s=new Set(i),o=new Set(n),r=t.current;s.forEach(function(a){o.has(a)||yF(a,null)}),o.forEach(function(a){s.has(a)||yF(a,r)})}NZ.set(t,n)},[n]),t}function wSe(n){return n}function CSe(n,e){e===void 0&&(e=wSe);var t=[],i=!1,s={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var r=e(o,i);return t.push(r),function(){t=t.filter(function(a){return a!==r})}},assignSyncMedium:function(o){for(i=!0;t.length;){var r=t;t=[],r.forEach(o)}t={push:function(a){return o(a)},filter:function(){return t}}},assignMedium:function(o){i=!0;var r=[];if(t.length){var a=t;t=[],a.forEach(o),r=t}var l=function(){var d=r;r=[],d.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(d){r.push(d),c()},filter:function(d){return r=r.filter(d),t}}}};return s}function ySe(n){n===void 0&&(n={});var e=CSe(null);return e.options=Td({async:!0,ssr:!1},n),e}var Mae=function(n){var e=n.sideCar,t=Pae(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return P.createElement(i,Td({},t))};Mae.isSideCarExport=!0;function SSe(n,e){return n.useMedium(e),Mae}var Rae=ySe(),SF=function(){},KR=P.forwardRef(function(n,e){var t=P.useRef(null),i=P.useState({onScrollCapture:SF,onWheelCapture:SF,onTouchMoveCapture:SF}),s=i[0],o=i[1],r=n.forwardProps,a=n.children,l=n.className,c=n.removeScrollBar,d=n.enabled,u=n.shards,h=n.sideCar,f=n.noIsolation,g=n.inert,m=n.allowPinchZoom,_=n.as,b=_===void 0?"div":_,v=n.gapMode,w=Pae(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),y=h,S=vSe([t,e]),x=Td(Td({},w),s);return P.createElement(P.Fragment,null,d&&P.createElement(y,{sideCar:Rae,removeScrollBar:c,shards:u,noIsolation:f,inert:g,setCallbacks:o,allowPinchZoom:!!m,lockRef:t,gapMode:v}),r?P.cloneElement(P.Children.only(a),Td(Td({},x),{ref:S})):P.createElement(b,Td({},x,{className:l,ref:S}),a))});KR.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};KR.classNames={fullWidth:gN,zeroRight:fN};var xSe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kSe(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=xSe();return e&&n.setAttribute("nonce",e),n}function LSe(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function DSe(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var ESe=function(){var n=0,e=null;return{add:function(t){n==0&&(e=kSe())&&(LSe(e,t),DSe(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},NSe=function(){var n=ESe();return function(e,t){P.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Aae=function(){var n=NSe(),e=function(t){var i=t.styles,s=t.dynamic;return n(i,s),null};return e},ISe={left:0,top:0,right:0,gap:0},xF=function(n){return parseInt(n||"",10)||0},TSe=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[xF(t),xF(i),xF(s)]},PSe=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return ISe;var e=TSe(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},MSe=Aae(),Gw="data-scroll-locked",RSe=function(n,e,t,i){var s=n.left,o=n.top,r=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(mSe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Gw,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(r,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fN,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(gN,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(fN," .").concat(fN,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(gN," .").concat(gN,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Gw,`] {
    `).concat(pSe,": ").concat(a,`px;
  }
`)},IZ=function(){var n=parseInt(document.body.getAttribute(Gw)||"0",10);return isFinite(n)?n:0},ASe=function(){P.useEffect(function(){return document.body.setAttribute(Gw,(IZ()+1).toString()),function(){var n=IZ()-1;n<=0?document.body.removeAttribute(Gw):document.body.setAttribute(Gw,n.toString())}},[])},OSe=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,s=i===void 0?"margin":i;ASe();var o=P.useMemo(function(){return PSe(s)},[s]);return P.createElement(MSe,{styles:RSe(o,!e,s,t?"":"!important")})},Y3=!1;if(typeof window<"u")try{var WD=Object.defineProperty({},"passive",{get:function(){return Y3=!0,!0}});window.addEventListener("test",WD,WD),window.removeEventListener("test",WD,WD)}catch{Y3=!1}var av=Y3?{passive:!1}:!1,FSe=function(n){return n.tagName==="TEXTAREA"},Oae=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!FSe(n)&&t[e]==="visible")},WSe=function(n){return Oae(n,"overflowY")},BSe=function(n){return Oae(n,"overflowX")},TZ=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var s=Fae(n,i);if(s){var o=Wae(n,i),r=o[1],a=o[2];if(r>a)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},HSe=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},jSe=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},Fae=function(n,e){return n==="v"?WSe(e):BSe(e)},Wae=function(n,e){return n==="v"?HSe(e):jSe(e)},VSe=function(n,e){return n==="h"&&e==="rtl"?-1:1},zSe=function(n,e,t,i,s){var o=VSe(n,window.getComputedStyle(e).direction),r=o*i,a=t.target,l=e.contains(a),c=!1,d=r>0,u=0,h=0;do{var f=Wae(n,a),g=f[0],m=f[1],_=f[2],b=m-_-o*g;(g||b)&&Fae(n,a)&&(u+=b,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(u)<1||!s)||!d&&(Math.abs(h)<1||!s))&&(c=!0),c},BD=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},PZ=function(n){return[n.deltaX,n.deltaY]},MZ=function(n){return n&&"current"in n?n.current:n},USe=function(n,e){return n[0]===e[0]&&n[1]===e[1]},$Se=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},qSe=0,lv=[];function KSe(n){var e=P.useRef([]),t=P.useRef([0,0]),i=P.useRef(),s=P.useState(qSe++)[0],o=P.useState(Aae)[0],r=P.useRef(n);P.useEffect(function(){r.current=n},[n]),P.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var m=gSe([n.lockRef.current],(n.shards||[]).map(MZ),!0).filter(Boolean);return m.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=P.useCallback(function(m,_){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!r.current.allowPinchZoom;var b=BD(m),v=t.current,w="deltaX"in m?m.deltaX:v[0]-b[0],y="deltaY"in m?m.deltaY:v[1]-b[1],S,x=m.target,k=Math.abs(w)>Math.abs(y)?"h":"v";if("touches"in m&&k==="h"&&x.type==="range")return!1;var D=TZ(k,x);if(!D)return!0;if(D?S=k:(S=k==="v"?"h":"v",D=TZ(k,x)),!D)return!1;if(!i.current&&"changedTouches"in m&&(w||y)&&(i.current=S),!S)return!0;var N=i.current||S;return zSe(N,_,m,N==="h"?w:y,!0)},[]),l=P.useCallback(function(m){var _=m;if(!(!lv.length||lv[lv.length-1]!==o)){var b="deltaY"in _?PZ(_):BD(_),v=e.current.filter(function(S){return S.name===_.type&&(S.target===_.target||_.target===S.shadowParent)&&USe(S.delta,b)})[0];if(v&&v.should){_.cancelable&&_.preventDefault();return}if(!v){var w=(r.current.shards||[]).map(MZ).filter(Boolean).filter(function(S){return S.contains(_.target)}),y=w.length>0?a(_,w[0]):!r.current.noIsolation;y&&_.cancelable&&_.preventDefault()}}},[]),c=P.useCallback(function(m,_,b,v){var w={name:m,delta:_,target:b,should:v,shadowParent:GSe(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(y){return y!==w})},1)},[]),d=P.useCallback(function(m){t.current=BD(m),i.current=void 0},[]),u=P.useCallback(function(m){c(m.type,PZ(m),m.target,a(m,n.lockRef.current))},[]),h=P.useCallback(function(m){c(m.type,BD(m),m.target,a(m,n.lockRef.current))},[]);P.useEffect(function(){return lv.push(o),n.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,av),document.addEventListener("touchmove",l,av),document.addEventListener("touchstart",d,av),function(){lv=lv.filter(function(m){return m!==o}),document.removeEventListener("wheel",l,av),document.removeEventListener("touchmove",l,av),document.removeEventListener("touchstart",d,av)}},[]);var f=n.removeScrollBar,g=n.inert;return P.createElement(P.Fragment,null,g?P.createElement(o,{styles:$Se(s)}):null,f?P.createElement(OSe,{gapMode:n.gapMode}):null)}function GSe(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const YSe=SSe(Rae,KSe);var Bae=P.forwardRef(function(n,e){return P.createElement(KR,Td({},n,{ref:e,sideCar:YSe}))});Bae.classNames=KR.classNames;var ZSe=[" ","Enter","ArrowUp","ArrowDown"],QSe=[" ","Enter"],LL="Select",[GR,YR,XSe]=NV(LL),[Zy,SJe]=Fb(LL,[XSe,UR]),ZR=UR(),[JSe,hm]=Zy(LL),[exe,txe]=Zy(LL),Hae=n=>{const{__scopeSelect:e,children:t,open:i,defaultOpen:s,onOpenChange:o,value:r,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:h,required:f,form:g}=n,m=ZR(e),[_,b]=P.useState(null),[v,w]=P.useState(null),[y,S]=P.useState(!1),x=qV(c),[k=!1,D]=Lx({prop:i,defaultProp:s,onChange:o}),[N,R]=Lx({prop:r,defaultProp:a,onChange:l}),O=P.useRef(null),B=_?g||!!_.closest("form"):!0,[z,F]=P.useState(new Set),K=Array.from(z).map(Z=>Z.props.value).join(";");return C.jsx(l0e,{...m,children:C.jsxs(JSe,{required:f,scope:e,trigger:_,onTriggerChange:b,valueNode:v,onValueNodeChange:w,valueNodeHasChildren:y,onValueNodeHasChildrenChange:S,contentId:SL(),value:N,onValueChange:R,open:k,onOpenChange:D,dir:x,triggerPointerDownPosRef:O,disabled:h,children:[C.jsx(GR.Provider,{scope:e,children:C.jsx(exe,{scope:n.__scopeSelect,onNativeOptionAdd:P.useCallback(Z=>{F(re=>new Set(re).add(Z))},[]),onNativeOptionRemove:P.useCallback(Z=>{F(re=>{const q=new Set(re);return q.delete(Z),q})},[]),children:t})}),B?C.jsxs(ule,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:u,value:N,onChange:Z=>R(Z.target.value),disabled:h,form:g,children:[N===void 0?C.jsx("option",{value:""}):null,Array.from(z)]},K):null]})})};Hae.displayName=LL;var jae="SelectTrigger",Vae=P.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:i=!1,...s}=n,o=ZR(t),r=hm(jae,t),a=r.disabled||i,l=Hn(e,r.onTriggerChange),c=YR(t),d=P.useRef("touch"),[u,h,f]=hle(m=>{const _=c().filter(w=>!w.disabled),b=_.find(w=>w.value===r.value),v=fle(_,m,b);v!==void 0&&r.onValueChange(v.value)}),g=m=>{a||(r.onOpenChange(!0),f()),m&&(r.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return C.jsx(pae,{asChild:!0,...o,children:C.jsx(Ci.button,{type:"button",role:"combobox","aria-controls":r.contentId,"aria-expanded":r.open,"aria-required":r.required,"aria-autocomplete":"none",dir:r.dir,"data-state":r.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":dle(r.value)?"":void 0,...s,ref:l,onClick:At(s.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&g(m)}),onPointerDown:At(s.onPointerDown,m=>{d.current=m.pointerType;const _=m.target;_.hasPointerCapture(m.pointerId)&&_.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:At(s.onKeyDown,m=>{const _=u.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&h(m.key),!(_&&m.key===" ")&&ZSe.includes(m.key)&&(g(),m.preventDefault())})})})});Vae.displayName=jae;var zae="SelectValue",Uae=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,children:o,placeholder:r="",...a}=n,l=hm(zae,t),{onValueNodeHasChildrenChange:c}=l,d=o!==void 0,u=Hn(e,l.onValueNodeChange);return $o(()=>{c(d)},[c,d]),C.jsx(Ci.span,{...a,ref:u,style:{pointerEvents:"none"},children:dle(l.value)?C.jsx(C.Fragment,{children:r}):o})});Uae.displayName=zae;var ixe="SelectIcon",$ae=P.forwardRef((n,e)=>{const{__scopeSelect:t,children:i,...s}=n;return C.jsx(Ci.span,{"aria-hidden":!0,...s,ref:e,children:i||""})});$ae.displayName=ixe;var nxe="SelectPortal",qae=n=>C.jsx(IV,{asChild:!0,...n});qae.displayName=nxe;var ob="SelectContent",Kae=P.forwardRef((n,e)=>{const t=hm(ob,n.__scopeSelect),[i,s]=P.useState();if($o(()=>{s(new DocumentFragment)},[]),!t.open){const o=i;return o?Ob.createPortal(C.jsx(Gae,{scope:n.__scopeSelect,children:C.jsx(GR.Slot,{scope:n.__scopeSelect,children:C.jsx("div",{children:n.children})})}),o):null}return C.jsx(Yae,{...n,ref:e})});Kae.displayName=ob;var Xl=10,[Gae,fm]=Zy(ob),sxe="SelectContentImpl",oxe=kx("SelectContent.RemoveScroll"),Yae=P.forwardRef((n,e)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:r,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:f,sticky:g,hideWhenDetached:m,avoidCollisions:_,...b}=n,v=hm(ob,t),[w,y]=P.useState(null),[S,x]=P.useState(null),k=Hn(e,Ve=>y(Ve)),[D,N]=P.useState(null),[R,O]=P.useState(null),B=YR(t),[z,F]=P.useState(!1),K=P.useRef(!1);P.useEffect(()=>{if(w)return fSe(w)},[w]),tSe();const Z=P.useCallback(Ve=>{const[Tt,...Ei]=B().map(ut=>ut.ref.current),[Wt]=Ei.slice(-1),qt=document.activeElement;for(const ut of Ve)if(ut===qt||(ut==null||ut.scrollIntoView({block:"nearest"}),ut===Tt&&S&&(S.scrollTop=0),ut===Wt&&S&&(S.scrollTop=S.scrollHeight),ut==null||ut.focus(),document.activeElement!==qt))return},[B,S]),re=P.useCallback(()=>Z([D,w]),[Z,D,w]);P.useEffect(()=>{z&&re()},[z,re]);const{onOpenChange:q,triggerPointerDownPosRef:J}=v;P.useEffect(()=>{if(w){let Ve={x:0,y:0};const Tt=Wt=>{var qt,ut;Ve={x:Math.abs(Math.round(Wt.pageX)-(((qt=J.current)==null?void 0:qt.x)??0)),y:Math.abs(Math.round(Wt.pageY)-(((ut=J.current)==null?void 0:ut.y)??0))}},Ei=Wt=>{Ve.x<=10&&Ve.y<=10?Wt.preventDefault():w.contains(Wt.target)||q(!1),document.removeEventListener("pointermove",Tt),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",Tt),document.addEventListener("pointerup",Ei,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Tt),document.removeEventListener("pointerup",Ei,{capture:!0})}}},[w,q,J]),P.useEffect(()=>{const Ve=()=>q(!1);return window.addEventListener("blur",Ve),window.addEventListener("resize",Ve),()=>{window.removeEventListener("blur",Ve),window.removeEventListener("resize",Ve)}},[q]);const[ge,be]=hle(Ve=>{const Tt=B().filter(qt=>!qt.disabled),Ei=Tt.find(qt=>qt.ref.current===document.activeElement),Wt=fle(Tt,Ve,Ei);Wt&&setTimeout(()=>Wt.ref.current.focus())}),Qe=P.useCallback((Ve,Tt,Ei)=>{const Wt=!K.current&&!Ei;(v.value!==void 0&&v.value===Tt||Wt)&&(N(Ve),Wt&&(K.current=!0))},[v.value]),Me=P.useCallback(()=>w==null?void 0:w.focus(),[w]),Ze=P.useCallback((Ve,Tt,Ei)=>{const Wt=!K.current&&!Ei;(v.value!==void 0&&v.value===Tt||Wt)&&O(Ve)},[v.value]),at=i==="popper"?Z3:Zae,Et=at===Z3?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:f,sticky:g,hideWhenDetached:m,avoidCollisions:_}:{};return C.jsx(Gae,{scope:t,content:w,viewport:S,onViewportChange:x,itemRefCallback:Qe,selectedItem:D,onItemLeave:Me,itemTextRefCallback:Ze,focusSelectedItem:re,selectedItemText:R,position:i,isPositioned:z,searchRef:ge,children:C.jsx(Bae,{as:oxe,allowPinchZoom:!0,children:C.jsx(Nae,{asChild:!0,trapped:v.open,onMountAutoFocus:Ve=>{Ve.preventDefault()},onUnmountAutoFocus:At(s,Ve=>{var Tt;(Tt=v.trigger)==null||Tt.focus({preventScroll:!0}),Ve.preventDefault()}),children:C.jsx(OR,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:Ve=>Ve.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:C.jsx(at,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Ve=>Ve.preventDefault(),...b,...Et,onPlaced:()=>F(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:At(b.onKeyDown,Ve=>{const Tt=Ve.ctrlKey||Ve.altKey||Ve.metaKey;if(Ve.key==="Tab"&&Ve.preventDefault(),!Tt&&Ve.key.length===1&&be(Ve.key),["ArrowUp","ArrowDown","Home","End"].includes(Ve.key)){let Wt=B().filter(qt=>!qt.disabled).map(qt=>qt.ref.current);if(["ArrowUp","End"].includes(Ve.key)&&(Wt=Wt.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ve.key)){const qt=Ve.target,ut=Wt.indexOf(qt);Wt=Wt.slice(ut+1)}setTimeout(()=>Z(Wt)),Ve.preventDefault()}})})})})})})});Yae.displayName=sxe;var rxe="SelectItemAlignedPosition",Zae=P.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:i,...s}=n,o=hm(ob,t),r=fm(ob,t),[a,l]=P.useState(null),[c,d]=P.useState(null),u=Hn(e,k=>d(k)),h=YR(t),f=P.useRef(!1),g=P.useRef(!0),{viewport:m,selectedItem:_,selectedItemText:b,focusSelectedItem:v}=r,w=P.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&c&&m&&_&&b){const k=o.trigger.getBoundingClientRect(),D=c.getBoundingClientRect(),N=o.valueNode.getBoundingClientRect(),R=b.getBoundingClientRect();if(o.dir!=="rtl"){const qt=R.left-D.left,ut=N.left-qt,qi=k.left-ut,Ln=k.width+qi,Pr=Math.max(Ln,D.width),Mr=window.innerWidth-Xl,Xs=SZ(ut,[Xl,Math.max(Xl,Mr-Pr)]);a.style.minWidth=Ln+"px",a.style.left=Xs+"px"}else{const qt=D.right-R.right,ut=window.innerWidth-N.right-qt,qi=window.innerWidth-k.right-ut,Ln=k.width+qi,Pr=Math.max(Ln,D.width),Mr=window.innerWidth-Xl,Xs=SZ(ut,[Xl,Math.max(Xl,Mr-Pr)]);a.style.minWidth=Ln+"px",a.style.right=Xs+"px"}const O=h(),B=window.innerHeight-Xl*2,z=m.scrollHeight,F=window.getComputedStyle(c),K=parseInt(F.borderTopWidth,10),Z=parseInt(F.paddingTop,10),re=parseInt(F.borderBottomWidth,10),q=parseInt(F.paddingBottom,10),J=K+Z+z+q+re,ge=Math.min(_.offsetHeight*5,J),be=window.getComputedStyle(m),Qe=parseInt(be.paddingTop,10),Me=parseInt(be.paddingBottom,10),Ze=k.top+k.height/2-Xl,at=B-Ze,Et=_.offsetHeight/2,Ve=_.offsetTop+Et,Tt=K+Z+Ve,Ei=J-Tt;if(Tt<=Ze){const qt=O.length>0&&_===O[O.length-1].ref.current;a.style.bottom="0px";const ut=c.clientHeight-m.offsetTop-m.offsetHeight,qi=Math.max(at,Et+(qt?Me:0)+ut+re),Ln=Tt+qi;a.style.height=Ln+"px"}else{const qt=O.length>0&&_===O[0].ref.current;a.style.top="0px";const qi=Math.max(Ze,K+m.offsetTop+(qt?Qe:0)+Et)+Ei;a.style.height=qi+"px",m.scrollTop=Tt-Ze+m.offsetTop}a.style.margin=`${Xl}px 0`,a.style.minHeight=ge+"px",a.style.maxHeight=B+"px",i==null||i(),requestAnimationFrame(()=>f.current=!0)}},[h,o.trigger,o.valueNode,a,c,m,_,b,o.dir,i]);$o(()=>w(),[w]);const[y,S]=P.useState();$o(()=>{c&&S(window.getComputedStyle(c).zIndex)},[c]);const x=P.useCallback(k=>{k&&g.current===!0&&(w(),v==null||v(),g.current=!1)},[w,v]);return C.jsx(lxe,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:f,onScrollButtonChange:x,children:C.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:y},children:C.jsx(Ci.div,{...s,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Zae.displayName=rxe;var axe="SelectPopperPosition",Z3=P.forwardRef((n,e)=>{const{__scopeSelect:t,align:i="start",collisionPadding:s=Xl,...o}=n,r=ZR(t);return C.jsx(_ae,{...r,...o,ref:e,align:i,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Z3.displayName=axe;var[lxe,KV]=Zy(ob,{}),Q3="SelectViewport",Qae=P.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:i,...s}=n,o=fm(Q3,t),r=KV(Q3,t),a=Hn(e,o.onViewportChange),l=P.useRef(0);return C.jsxs(C.Fragment,{children:[C.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),C.jsx(GR.Slot,{scope:t,children:C.jsx(Ci.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:At(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=r;if(h!=null&&h.current&&u){const f=Math.abs(l.current-d.scrollTop);if(f>0){const g=window.innerHeight-Xl*2,m=parseFloat(u.style.minHeight),_=parseFloat(u.style.height),b=Math.max(m,_);if(b<g){const v=b+f,w=Math.min(g,v),y=v-w;u.style.height=w+"px",u.style.bottom==="0px"&&(d.scrollTop=y>0?y:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});Qae.displayName=Q3;var Xae="SelectGroup",[cxe,dxe]=Zy(Xae),uxe=P.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=SL();return C.jsx(cxe,{scope:t,id:s,children:C.jsx(Ci.div,{role:"group","aria-labelledby":s,...i,ref:e})})});uxe.displayName=Xae;var Jae="SelectLabel",ele=P.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=dxe(Jae,t);return C.jsx(Ci.div,{id:s.id,...i,ref:e})});ele.displayName=Jae;var OI="SelectItem",[hxe,tle]=Zy(OI),ile=P.forwardRef((n,e)=>{const{__scopeSelect:t,value:i,disabled:s=!1,textValue:o,...r}=n,a=hm(OI,t),l=fm(OI,t),c=a.value===i,[d,u]=P.useState(o??""),[h,f]=P.useState(!1),g=Hn(e,v=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,v,i,s)}),m=SL(),_=P.useRef("touch"),b=()=>{s||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return C.jsx(hxe,{scope:t,value:i,disabled:s,textId:m,isSelected:c,onItemTextChange:P.useCallback(v=>{u(w=>w||((v==null?void 0:v.textContent)??"").trim())},[]),children:C.jsx(GR.ItemSlot,{scope:t,value:i,disabled:s,textValue:d,children:C.jsx(Ci.div,{role:"option","aria-labelledby":m,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...r,ref:g,onFocus:At(r.onFocus,()=>f(!0)),onBlur:At(r.onBlur,()=>f(!1)),onClick:At(r.onClick,()=>{_.current!=="mouse"&&b()}),onPointerUp:At(r.onPointerUp,()=>{_.current==="mouse"&&b()}),onPointerDown:At(r.onPointerDown,v=>{_.current=v.pointerType}),onPointerMove:At(r.onPointerMove,v=>{var w;_.current=v.pointerType,s?(w=l.onItemLeave)==null||w.call(l):_.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:At(r.onPointerLeave,v=>{var w;v.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:At(r.onKeyDown,v=>{var y;((y=l.searchRef)==null?void 0:y.current)!==""&&v.key===" "||(QSe.includes(v.key)&&b(),v.key===" "&&v.preventDefault())})})})})});ile.displayName=OI;var v0="SelectItemText",nle=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,...o}=n,r=hm(v0,t),a=fm(v0,t),l=tle(v0,t),c=txe(v0,t),[d,u]=P.useState(null),h=Hn(e,b=>u(b),l.onItemTextChange,b=>{var v;return(v=a.itemTextRefCallback)==null?void 0:v.call(a,b,l.value,l.disabled)}),f=d==null?void 0:d.textContent,g=P.useMemo(()=>C.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:_}=c;return $o(()=>(m(g),()=>_(g)),[m,_,g]),C.jsxs(C.Fragment,{children:[C.jsx(Ci.span,{id:l.textId,...o,ref:h}),l.isSelected&&r.valueNode&&!r.valueNodeHasChildren?Ob.createPortal(o.children,r.valueNode):null]})});nle.displayName=v0;var sle="SelectItemIndicator",ole=P.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return tle(sle,t).isSelected?C.jsx(Ci.span,{"aria-hidden":!0,...i,ref:e}):null});ole.displayName=sle;var X3="SelectScrollUpButton",rle=P.forwardRef((n,e)=>{const t=fm(X3,n.__scopeSelect),i=KV(X3,n.__scopeSelect),[s,o]=P.useState(!1),r=Hn(e,i.onScrollButtonChange);return $o(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;o(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?C.jsx(lle,{...n,ref:r,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});rle.displayName=X3;var J3="SelectScrollDownButton",ale=P.forwardRef((n,e)=>{const t=fm(J3,n.__scopeSelect),i=KV(J3,n.__scopeSelect),[s,o]=P.useState(!1),r=Hn(e,i.onScrollButtonChange);return $o(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;o(d)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?C.jsx(lle,{...n,ref:r,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});ale.displayName=J3;var lle=P.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:i,...s}=n,o=fm("SelectScrollButton",t),r=P.useRef(null),a=YR(t),l=P.useCallback(()=>{r.current!==null&&(window.clearInterval(r.current),r.current=null)},[]);return P.useEffect(()=>()=>l(),[l]),$o(()=>{var d;const c=a().find(u=>u.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),C.jsx(Ci.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:At(s.onPointerDown,()=>{r.current===null&&(r.current=window.setInterval(i,50))}),onPointerMove:At(s.onPointerMove,()=>{var c;(c=o.onItemLeave)==null||c.call(o),r.current===null&&(r.current=window.setInterval(i,50))}),onPointerLeave:At(s.onPointerLeave,()=>{l()})})}),fxe="SelectSeparator",cle=P.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return C.jsx(Ci.div,{"aria-hidden":!0,...i,ref:e})});cle.displayName=fxe;var eW="SelectArrow",gxe=P.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=ZR(t),o=hm(eW,t),r=fm(eW,t);return o.open&&r.position==="popper"?C.jsx(bae,{...s,...i,ref:e}):null});gxe.displayName=eW;function dle(n){return n===""||n===void 0}var ule=P.forwardRef((n,e)=>{const{value:t,...i}=n,s=P.useRef(null),o=Hn(e,s),r=cSe(t);return P.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(r!==t&&d){const u=new Event("change",{bubbles:!0});d.call(a,t),a.dispatchEvent(u)}},[r,t]),C.jsx(yL,{asChild:!0,children:C.jsx("select",{...i,ref:o,defaultValue:t})})});ule.displayName="BubbleSelect";function hle(n){const e=da(n),t=P.useRef(""),i=P.useRef(0),s=P.useCallback(r=>{const a=t.current+r;e(a),function l(c){t.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),o=P.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,s,o]}function fle(n,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let r=mxe(n,Math.max(o,0));s.length===1&&(r=r.filter(c=>c!==t));const l=r.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function mxe(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var pxe=Hae,gle=Vae,_xe=Uae,bxe=$ae,vxe=qae,mle=Kae,wxe=Qae,ple=ele,_le=ile,Cxe=nle,yxe=ole,ble=rle,vle=ale,wle=cle;const kF=pxe,LF=_xe,mN=P.forwardRef(({className:n,children:e,...t},i)=>C.jsxs(gle,{ref:i,className:Ji("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,C.jsx(bxe,{asChild:!0,children:C.jsx(Tre,{className:"h-4 w-4 opacity-50"})})]}));mN.displayName=gle.displayName;const Cle=P.forwardRef(({className:n,...e},t)=>C.jsx(ble,{ref:t,className:Ji("flex cursor-default items-center justify-center py-1",n),...e,children:C.jsx(aye,{className:"h-4 w-4"})}));Cle.displayName=ble.displayName;const yle=P.forwardRef(({className:n,...e},t)=>C.jsx(vle,{ref:t,className:Ji("flex cursor-default items-center justify-center py-1",n),...e,children:C.jsx(Tre,{className:"h-4 w-4"})}));yle.displayName=vle.displayName;const pN=P.forwardRef(({className:n,children:e,position:t="popper",...i},s)=>C.jsx(vxe,{children:C.jsxs(mle,{ref:s,className:Ji("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...i,children:[C.jsx(Cle,{}),C.jsx(wxe,{className:Ji("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),C.jsx(yle,{})]})}));pN.displayName=mle.displayName;const Sxe=P.forwardRef(({className:n,...e},t)=>C.jsx(ple,{ref:t,className:Ji("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));Sxe.displayName=ple.displayName;const Fr=P.forwardRef(({className:n,children:e,...t},i)=>C.jsxs(_le,{ref:i,className:Ji("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[C.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:C.jsx(yxe,{children:C.jsx(rye,{className:"h-4 w-4"})})}),C.jsx(Cxe,{children:e})]}));Fr.displayName=_le.displayName;const xxe=P.forwardRef(({className:n,...e},t)=>C.jsx(wle,{ref:t,className:Ji("-mx-1 my-1 h-px bg-muted",n),...e}));xxe.displayName=wle.displayName;var kxe="Label",Sle=P.forwardRef((n,e)=>C.jsx(Ci.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Sle.displayName=kxe;var xle=Sle;const Lxe=HR("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),w0=P.forwardRef(({className:n,...e},t)=>C.jsx(xle,{ref:t,className:Ji(Lxe(),n),...e}));w0.displayName=xle.displayName;function Dxe(){const[n,e]=P.useState({search:"",field:"All Fields",amount:"Any Amount",deadline:"All Deadlines"}),{data:t,isLoading:i,refetch:s}=ey({queryKey:["/api/scholarships"],refetchOnMount:!0,refetchOnWindowFocus:!0,staleTime:0});console.log("Scholarships data received:",t);const o=(h,f)=>{e(g=>({...g,[h]:f}))},r=()=>{e({search:"",field:"All Fields",amount:"Any Amount",deadline:"All Deadlines"}),s()},a=h=>{if(h==null)return null;if(typeof h=="number")return h;if(typeof h=="string"){const f=h.replace(/[,\$\s]/g,""),g=parseFloat(f);return Number.isFinite(g)?g:null}return null},l=h=>{if(!h)return null;if(h instanceof Date)return h;if(typeof h=="string"){const f=new Date(h);if(!isNaN(f.getTime()))return f}return null},c=P.useMemo(()=>new Date,[]),d=P.useMemo(()=>{if(!Array.isArray(t))return[];const h=n.search.trim().toLowerCase(),f={"Any Amount":null,"$1,000 - $5,000":[1e3,5e3],"$5,000 - $10,000":[5e3,1e4],"$10,000+":[1e4,null]},g={"All Deadlines":null,"Next 30 days":30,"Next 3 months":90,"Next 6 months":180};return t.filter(m=>{if(h&&![m.title,m.name,m.description,m.summary,m.organization,m.field,m.fieldOfStudy,m.category].filter(Boolean).some(y=>String(y).toLowerCase().includes(h))||n.field&&n.field!=="All Fields"&&!(()=>{const w=n.field.toLowerCase(),y=[m.field,m.fieldOfStudy,m.category,m.tags];for(const S of y)if(S)if(Array.isArray(S))for(const x of S){if(!x)continue;const k=String(x).split(/[,;|]/).map(D=>D.trim().toLowerCase()).filter(Boolean);if(k.includes(w)||k.some(D=>D.includes(w)))return!0}else{const x=String(S).split(/[,;|]/).map(k=>k.trim().toLowerCase()).filter(Boolean);if(x.includes(w)||x.some(k=>k.includes(w)))return!0}return!1})())return!1;const _=f[n.amount];if(_){const v=a(m.amount??m.award??m.awardAmount??m.prize??m.value);if(v==null)return!1;const[w,y]=_;if(w!=null&&v<w||y!=null&&v>y)return!1}const b=g[n.deadline];if(b!=null){const v=l(m.deadline??m.applicationDeadline??m.dueDate);if(!v)return!1;const y=(v.getTime()-c.getTime())/(1e3*60*60*24);if(y<0||y>b)return!1}return!0})},[t,n,c]),u=d.length;return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsx(hh,{}),C.jsx("div",{className:"pt-24 pb-20",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"text-center mb-16",children:[C.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:["Tech ",C.jsx("span",{className:"gradient-text",children:"Scholarships"})]}),C.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Discover funding opportunities that can help you pursue your dreams in technology and computer science."})]}),C.jsx(Yt,{className:"mb-12",children:C.jsxs(ei,{className:"p-6",children:[C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[C.jsxs("div",{className:"relative",children:[C.jsx(w0,{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),C.jsxs("div",{className:"relative",children:[C.jsx($V,{id:"search",type:"text",placeholder:"Search scholarships...",value:n.search,onChange:h=>o("search",h.target.value),className:"pl-10"}),C.jsx(Fre,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),C.jsxs("div",{children:[C.jsx(w0,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Field of Study"}),C.jsxs(kF,{value:n.field,onValueChange:h=>o("field",h),children:[C.jsx(mN,{children:C.jsx(LF,{placeholder:"All Fields"})}),C.jsxs(pN,{children:[C.jsx(Fr,{value:"All Fields",children:"All Fields"}),C.jsx(Fr,{value:"Computer Science",children:"Computer Science"}),C.jsx(Fr,{value:"Engineering",children:"Engineering"}),C.jsx(Fr,{value:"Leadership",children:"Leadership"}),C.jsx(Fr,{value:"Cultural Exchange",children:"Cultural Exchange"})]})]})]}),C.jsxs("div",{children:[C.jsx(w0,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Award Amount"}),C.jsxs(kF,{value:n.amount,onValueChange:h=>o("amount",h),children:[C.jsx(mN,{children:C.jsx(LF,{placeholder:"Any Amount"})}),C.jsxs(pN,{children:[C.jsx(Fr,{value:"Any Amount",children:"Any Amount"}),C.jsx(Fr,{value:"$1,000 - $5,000",children:"$1,000 - $5,000"}),C.jsx(Fr,{value:"$5,000 - $10,000",children:"$5,000 - $10,000"}),C.jsx(Fr,{value:"$10,000+",children:"$10,000+"})]})]})]}),C.jsxs("div",{children:[C.jsx(w0,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deadline"}),C.jsxs(kF,{value:n.deadline,onValueChange:h=>o("deadline",h),children:[C.jsx(mN,{children:C.jsx(LF,{placeholder:"All Deadlines"})}),C.jsxs(pN,{children:[C.jsx(Fr,{value:"All Deadlines",children:"All Deadlines"}),C.jsx(Fr,{value:"Next 30 days",children:"Next 30 days"}),C.jsx(Fr,{value:"Next 3 months",children:"Next 3 months"}),C.jsx(Fr,{value:"Next 6 months",children:"Next 6 months"})]})]})]})]}),C.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[C.jsxs("p",{className:"text-gray-600",children:["Showing ",u," scholarships"]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx(Mn,{variant:"outline",onClick:r,children:"Clear Filters"}),C.jsx(Mn,{variant:"outline",onClick:()=>s(),children:"Refresh Data"})]})]})]})}),i?C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(h=>C.jsx(Yt,{className:"animate-pulse",children:C.jsxs(ei,{className:"p-6",children:[C.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),C.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),C.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})},h))}):d.length>0?C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(h=>C.jsx(J0e,{scholarship:h},h.id))}):C.jsxs("div",{className:"text-center py-16",children:[C.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No scholarships found"}),C.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters to find more opportunities."}),C.jsx(Mn,{onClick:r,variant:"outline",children:"Clear All Filters"})]})]})}),C.jsx(kL,{})]})}const Exe="/msostem/assets/techgirlstg-DY1psTek.jpg";function Nxe(){var _,b,v,w,y,S,x,k,D,N,R,O,B,z,F,K,Z,re,q,J,ge,be,Qe,Me,Ze,at,Et,Ve,Tt,Ei,Wt,qt,ut,qi,Ln,Pr,Mr,Xs,Vl,Rr,Gc,xm,km,gu,Yc,Ca,zl,mu,Lm,Zc,sl,Js,ya,ol,Cn,Eo,pu,Ar,ri,Qc,iv,nv,Dn,Ul,sv,Dm,Gh,pt,A,W,V,$,Y,oe,he,Ie,Oe,ht,Vt,Kt,Ai,Oi,As,No,Yh,Xe,ee,Ne,Ue,Ki,ys,ls,eo,Sa,Zh,Os,k1,L1,Uq,$q,qq,Kq,Gq,Yq,Zq,Qq,Xq,Jq,eK,tK,iK,nK,sK,oK,rK,aK,lK,cK,dK,uK,hK,fK,gK,mK,pK,_K,bK,vK,wK,CK,yK,SK,xK,kK,LK,DK,EK,NK,IK,TK,PK,MK,RK,AK,OK,FK,WK,BK,HK,jK,VK,zK,UK,$K,qK,KK,GK,YK,ZK,QK,XK,JK,eG,tG,iG,nG,sG,oG,rG,aG,lG,cG,dG,uG,hG,fG,gG,mG,pG,_G,bG,vG,wG,CG,yG,SG,xG,kG,LG,DG,EG;const{id:n}=SV(),{t:e}=ou(),{data:t,isLoading:i}=ey({queryKey:["/api/scholarships",n]});if(i)return C.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!t)return C.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Scholarship Not Found"}),C.jsx("p",{className:"text-gray-600",children:"The scholarship you're looking for doesn't exist."})]})});const s=t.id==="scholarship-1",o=t.id==="scholarship-2",r=t.id==="scholarship-3",a=t.id==="scholarship-4",l=t.id==="scholarship-5",c=e.scholarshipContent[t.id],d=(c==null?void 0:c.title)||t.title,u=(c==null?void 0:c.description)||t.description,h=(c==null?void 0:c.field)||t.field,f=(c==null?void 0:c.location)||t.location,g=(c==null?void 0:c.eligibility)||t.eligibility,m=(c==null?void 0:c.organizationName)||t.organizationName;return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsx(hh,{}),C.jsx("div",{className:"pt-24 pb-20",children:C.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"mb-8",children:[C.jsx(Eae,{className:`mb-4 ${t.status==="open"?"bg-green-100 text-green-800":t.status==="upcoming"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t.status==="open"?((_=c==null?void 0:c.badgeText)==null?void 0:_.open)||"Open for Applications":t.status==="upcoming"?((b=c==null?void 0:c.badgeText)==null?void 0:b.upcoming)||"Upcoming Application Period":((v=c==null?void 0:c.badgeText)==null?void 0:v.closingSoon)||"Closing Soon"}),C.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:d}),C.jsx("p",{className:"text-xl text-gray-600 mb-6",children:u}),C.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx(cye,{className:"w-4 h-4 mr-2"}),C.jsxs("span",{className:"font-medium",children:["$",t.amount.toLocaleString()," Value"]})]}),C.jsxs("div",{className:"flex items-center",children:[C.jsx(sye,{className:"w-4 h-4 mr-2"}),C.jsxs("span",{children:["Deadline:"," ",new Date(t.deadline).toLocaleDateString()]})]}),C.jsxs("div",{className:"flex items-center",children:[C.jsx(Are,{className:"w-4 h-4 mr-2"}),C.jsx("span",{children:f})]}),C.jsxs("div",{className:"flex items-center",children:[C.jsx(Wre,{className:"w-4 h-4 mr-2"}),C.jsx("span",{children:m})]})]})]}),s&&C.jsx("div",{className:"mb-8",children:C.jsx("img",{src:Exe,alt:"TechGirls program participants working on STEM projects",className:"w-full h-64 object-cover rounded-lg shadow-lg"})}),s?C.jsxs("div",{className:"space-y-8",children:[C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((w=c==null?void 0:c.aboutProgram)==null?void 0:w.title)||"About TechGirls Program"}),C.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:((y=c==null?void 0:c.aboutProgram)==null?void 0:y.description)||"TechGirls is a prestigious, fully-funded U.S. Department of State exchange program that empowers young women from around the world to pursue careers in science, technology, engineering, and mathematics (STEM). This life-changing opportunity combines intensive technology training at Virginia Tech University with cultural immersion across the United States."}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((x=(S=c==null?void 0:c.aboutProgram)==null?void 0:S.programHighlights)==null?void 0:x.title)||"Program Highlights"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((D=(k=c==null?void 0:c.aboutProgram)==null?void 0:k.programHighlights)==null?void 0:D.items)||["23-day intensive experience in the United States","38 hours of cutting-edge STEM coursework","Technology camp at Virginia Tech University","Host family cultural immersion experience","7-month mentoring program post-exchange"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((R=(N=c==null?void 0:c.aboutProgram)==null?void 0:N.whatsIncluded)==null?void 0:R.title)||"What's Included"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((B=(O=c==null?void 0:c.aboutProgram)==null?void 0:O.whatsIncluded)==null?void 0:B.items)||["Round-trip international airfare","All accommodation and meals","Educational activities and site visits","Tech company visits (NASA, Smithsonian)","Living stipend and cultural activities"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))})]})]})]})}),C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((z=c==null?void 0:c.eligibilityRequirements)==null?void 0:z.title)||"Eligibility Requirements"}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((K=(F=c==null?void 0:c.eligibilityRequirements)==null?void 0:F.basicRequirements)==null?void 0:K.title)||"Basic Requirements"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((re=(Z=c==null?void 0:c.eligibilityRequirements)==null?void 0:Z.basicRequirements)==null?void 0:re.items)||["Ages 15-17 at program start","Citizens/residents of eligible countries","Strong interest in STEM fields","Advanced intermediate English proficiency","Good academic standing","No prior coding experience required"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((J=(q=c==null?void 0:c.eligibilityRequirements)==null?void 0:q.personalQualities)==null?void 0:J.title)||"Personal Qualities"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((be=(ge=c==null?void 0:c.eligibilityRequirements)==null?void 0:ge.personalQualities)==null?void 0:be.items)||["Demonstrated leadership potential","Community service experience","Maturity and open-mindedness","Commitment to community action project","Limited prior U.S. experience (preferred)"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((Me=(Qe=c==null?void 0:c.eligibilityRequirements)==null?void 0:Qe.eligibleCountries)==null?void 0:Me.title)||"Eligible Countries/Territories (37 total)"}),C.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:C.jsxs("p",{className:"text-sm text-gray-700",children:[((Et=(at=(Ze=c==null?void 0:c.eligibilityRequirements)==null?void 0:Ze.eligibleCountries)==null?void 0:at.regions)==null?void 0:Et.subSaharanAfrica)||"Sub-Saharan Africa: Cameroon, Kenya, Nigeria, Rwanda, South Africa, Zambia",C.jsx("br",{}),((Ei=(Tt=(Ve=c==null?void 0:c.eligibilityRequirements)==null?void 0:Ve.eligibleCountries)==null?void 0:Tt.regions)==null?void 0:Ei.eastAsiaPacific)||"East Asia & Pacific: Cambodia, Fiji, Indonesia, Mongolia, Taiwan, Vietnam",C.jsx("br",{}),((ut=(qt=(Wt=c==null?void 0:c.eligibilityRequirements)==null?void 0:Wt.eligibleCountries)==null?void 0:qt.regions)==null?void 0:ut.europeEurasia)||"Europe & Eurasia: Albania, Cyprus, Greece, Kosovo, Montenegro, Trkiye",C.jsx("br",{}),((Pr=(Ln=(qi=c==null?void 0:c.eligibilityRequirements)==null?void 0:qi.eligibleCountries)==null?void 0:Ln.regions)==null?void 0:Pr.middleEastNorthAfrica)||"Middle East & North Africa: Algeria, Egypt, Jordan, Lebanon, Morocco, Palestinian Territories, Tunisia",C.jsx("br",{}),((Vl=(Xs=(Mr=c==null?void 0:c.eligibilityRequirements)==null?void 0:Mr.eligibleCountries)==null?void 0:Xs.regions)==null?void 0:Vl.southCentralAsia)||"South & Central Asia: Kazakhstan, Kyrgyzstan, Pakistan, Tajikistan, Turkmenistan, Uzbekistan",C.jsx("br",{}),((xm=(Gc=(Rr=c==null?void 0:c.eligibilityRequirements)==null?void 0:Rr.eligibleCountries)==null?void 0:Gc.regions)==null?void 0:xm.westernHemisphere)||"Western Hemisphere: Brazil, Costa Rica, Ecuador, Panama, Peru, Suriname",C.jsx("br",{}),((Yc=(gu=(km=c==null?void 0:c.eligibilityRequirements)==null?void 0:km.eligibleCountries)==null?void 0:gu.regions)==null?void 0:Yc.unitedStates)||"United States: U.S. citizens and residents are also eligible"]})})]})]})}),C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((Ca=c==null?void 0:c.programStructure)==null?void 0:Ca.title)||"Program Structure"}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"border-l-4 border-primary pl-6",children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:((mu=(zl=c==null?void 0:c.programStructure)==null?void 0:zl.phase1)==null?void 0:mu.title)||"Phase 1: Tech Camp at Virginia Tech"}),C.jsx("p",{className:"text-gray-700",children:((Zc=(Lm=c==null?void 0:c.programStructure)==null?void 0:Lm.phase1)==null?void 0:Zc.description)||"Intensive technology camp featuring hands-on STEM training, lab visits, job shadowing with tech professionals, and leadership workshops."})]}),C.jsxs("div",{className:"border-l-4 border-secondary pl-6",children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:((Js=(sl=c==null?void 0:c.programStructure)==null?void 0:sl.phase2)==null?void 0:Js.title)||"Phase 2: Community Immersion"}),C.jsx("p",{className:"text-gray-700 mb-2",children:((ol=(ya=c==null?void 0:c.programStructure)==null?void 0:ya.phase2)==null?void 0:ol.description)||"Cultural immersion in U.S. cities including Austin, Cincinnati, Denver, Detroit, Kansas City, or Seattle. Experience host family life and visit major tech companies."})]}),C.jsxs("div",{className:"border-l-4 border-accent pl-6",children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:((Eo=(Cn=c==null?void 0:c.programStructure)==null?void 0:Cn.phase3)==null?void 0:Eo.title)||"Phase 3: Community Action Project"}),C.jsx("p",{className:"text-gray-700",children:((Ar=(pu=c==null?void 0:c.programStructure)==null?void 0:pu.phase3)==null?void 0:Ar.description)||"Upon returning home, implement a community-based STEM project such as starting tech clubs, teaching coding, or organizing career fairs."})]})]})]})}),C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((ri=c==null?void 0:c.applicationInfo)==null?void 0:ri.title)||"Application Information"}),C.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[C.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:((iv=(Qc=c==null?void 0:c.applicationInfo)==null?void 0:Qc.timeline)==null?void 0:iv.title)||"2026 Application Timeline"}),C.jsx("ul",{className:"text-blue-800 space-y-1",children:(((Dn=(nv=c==null?void 0:c.applicationInfo)==null?void 0:nv.timeline)==null?void 0:Dn.items)||["Application Opens: Fall 2025","Application Deadline: December 2025","Notification: March 2026","Program Dates: July 2026"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((sv=(Ul=c==null?void 0:c.applicationInfo)==null?void 0:Ul.requirements)==null?void 0:sv.title)||"Application Requirements"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((Gh=(Dm=c==null?void 0:c.applicationInfo)==null?void 0:Dm.requirements)==null?void 0:Gh.items)||["Complete online application in English","Personal portrait/headshot photo","Most recent academic transcript","Essays and personal statements","All responses must be original work"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((A=(pt=c==null?void 0:c.applicationInfo)==null?void 0:pt.selectionProcess)==null?void 0:A.title)||"Selection Process"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((V=(W=c==null?void 0:c.applicationInfo)==null?void 0:W.selectionProcess)==null?void 0:V.items)||["Independent committee reviews applications","U.S. embassy interviews for international candidates","Legacy International interviews for U.S. candidates","Final selection and notification"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]})]})]})})]}):o?C.jsxs("div",{className:"space-y-8",children:[C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:(($=c==null?void 0:c.aboutProgram)==null?void 0:$.title)||"About Benjamin Franklin Transatlantic Fellowship"}),C.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:((Y=c==null?void 0:c.aboutProgram)==null?void 0:Y.description)||"The Benjamin Franklin Transatlantic Fellowship (BFTF) is a prestigious 4-week summer exchange program hosted by Purdue University that brings together young European leaders to explore diplomacy, leadership, and transatlantic relations in the United States. This fully-funded U.S. State Department program empowers participants to become future ambassadors of international cooperation."}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((he=(oe=c==null?void 0:c.aboutProgram)==null?void 0:oe.programHighlights)==null?void 0:he.title)||"Program Highlights"}),C.jsxs("ul",{className:"space-y-2 text-gray-700",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),(((Oe=(Ie=c==null?void 0:c.aboutProgram)==null?void 0:Ie.programHighlights)==null?void 0:Oe.items)||["4-week intensive program at Purdue University","Focus on diplomacy and transatlantic relations","Leadership development workshops","Cultural immersion in multiple U.S. cities","Multinational group interactions"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))]})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((Vt=(ht=c==null?void 0:c.aboutProgram)==null?void 0:ht.programComponents)==null?void 0:Vt.title)||"Program Components"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((Ai=(Kt=c==null?void 0:c.aboutProgram)==null?void 0:Kt.programComponents)==null?void 0:Ai.items)||["Academic seminars on U.S. foreign policy","Democracy and civil society discussions","Communications and advocacy training","Site visits to government institutions","Meetings with policy makers and experts"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))})]})]})]})}),C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((Oi=c==null?void 0:c.eligibilityRequirements)==null?void 0:Oi.title)||"Eligibility Requirements"}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((No=(As=c==null?void 0:c.eligibilityRequirements)==null?void 0:As.basicRequirements)==null?void 0:No.title)||"Basic Requirements"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((Xe=(Yh=c==null?void 0:c.eligibilityRequirements)==null?void 0:Yh.basicRequirements)==null?void 0:Xe.items)||["Ages 16-18 at program start","European citizenship or legal permanent residency","Strong academic achievement","High proficiency in English","Little to no prior U.S. experience","Commitment to return home post-program"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((Ne=(ee=c==null?void 0:c.eligibilityRequirements)==null?void 0:ee.personalQualities)==null?void 0:Ne.title)||"Personal Qualities"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((Ki=(Ue=c==null?void 0:c.eligibilityRequirements)==null?void 0:Ue.personalQualities)==null?void 0:Ki.items)||["Demonstrated leadership potential","Interest in diplomacy and international relations","Maturity and independence","Strong social skills and flexibility","Open-minded and tolerant attitude","Community service engagement"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((ls=(ys=c==null?void 0:c.eligibilityRequirements)==null?void 0:ys.eligibleCountries)==null?void 0:ls.title)||"Participating Countries"}),C.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:C.jsx("p",{className:"text-sm text-gray-700",children:((Sa=(eo=c==null?void 0:c.eligibilityRequirements)==null?void 0:eo.eligibleCountries)==null?void 0:Sa.description)||"European countries including: Albania, Austria, Belgium, Cyprus, Czech Republic, Estonia, Finland, France, Germany, Greece, Hungary, Ireland, Italy, Kosovo, Latvia, Lithuania, Luxembourg, Malta, Netherlands, Poland, Portugal, Slovakia, Slovenia, Spain, and others."})})]})]})})]}):r?C.jsxs("div",{className:"space-y-8",children:[C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((Zh=c==null?void 0:c.aboutProgram)==null?void 0:Zh.title)||"About Kennedy-Lugar Youth Exchange & Study (YES)"}),C.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:((Os=c==null?void 0:c.aboutProgram)==null?void 0:Os.description)||"The Kennedy-Lugar Youth Exchange & Study (YES) program is a competitive, merit-based scholarship program funded by the U.S. State Department that brings high school students from countries with significant Muslim populations to the United States for a full academic year. Students live with volunteer American host families and attend U.S. high schools, serving as cultural ambassadors."}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((L1=(k1=c==null?void 0:c.aboutProgram)==null?void 0:k1.programHighlights)==null?void 0:L1.title)||"Program Highlights"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:((($q=(Uq=c==null?void 0:c.aboutProgram)==null?void 0:Uq.programHighlights)==null?void 0:$q.items)||["Full academic year (9-10 months) in the U.S.","Live with volunteer American host families","Attend regular U.S. high schools","Cultural immersion and leadership development","Serve as youth cultural ambassadors"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((Kq=(qq=c==null?void 0:c.aboutProgram)==null?void 0:qq.whatsIncluded)==null?void 0:Kq.title)||"What's Included"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((Yq=(Gq=c==null?void 0:c.aboutProgram)==null?void 0:Gq.whatsIncluded)==null?void 0:Yq.items)||["Round-trip international airfare","Room and board with host family","High school tuition and fees","Medical benefits and visa fees","Orientation and ongoing support"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))})]})]})]})}),C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((Zq=c==null?void 0:c.eligibilityRequirements)==null?void 0:Zq.title)||"Eligibility Requirements"}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((Xq=(Qq=c==null?void 0:c.eligibilityRequirements)==null?void 0:Qq.basicRequirements)==null?void 0:Xq.title)||"Basic Requirements"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((eK=(Jq=c==null?void 0:c.eligibilityRequirements)==null?void 0:Jq.basicRequirements)==null?void 0:eK.items)||["Ages 15-18 (high school students)","Citizens/residents of participating countries","Merit-based selection through competition","Good academic standing","English language proficiency","No previous long-term U.S. experience"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((iK=(tK=c==null?void 0:c.eligibilityRequirements)==null?void 0:tK.personalQualities)==null?void 0:iK.title)||"Personal Qualities"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((sK=(nK=c==null?void 0:c.eligibilityRequirements)==null?void 0:nK.personalQualities)==null?void 0:sK.items)||["Leadership potential and maturity","Cultural curiosity and open-mindedness","Commitment to cultural exchange","Community service orientation","Academic excellence and motivation","Strong communication skills"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((rK=(oK=c==null?void 0:c.eligibilityRequirements)==null?void 0:oK.eligibleCountries)==null?void 0:rK.title)||"Participating Countries (45+ countries)"}),C.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:C.jsxs("p",{className:"text-sm text-gray-700",children:[((cK=(lK=(aK=c==null?void 0:c.eligibilityRequirements)==null?void 0:aK.eligibleCountries)==null?void 0:lK.regions)==null?void 0:cK.southeastAsia)||"Southeast Asia: Indonesia, Malaysia, Philippines, Thailand",C.jsx("br",{}),((hK=(uK=(dK=c==null?void 0:c.eligibilityRequirements)==null?void 0:dK.eligibleCountries)==null?void 0:uK.regions)==null?void 0:hK.europeEurasia)||"Europe & Eurasia: Bosnia and Herzegovina, Bulgaria, Turkey",C.jsx("br",{}),((mK=(gK=(fK=c==null?void 0:c.eligibilityRequirements)==null?void 0:fK.eligibleCountries)==null?void 0:gK.regions)==null?void 0:mK.middleEastNorthAfrica)||"Middle East & North Africa: Egypt, Jordan, Morocco, Tunisia",C.jsx("br",{}),((bK=(_K=(pK=c==null?void 0:c.eligibilityRequirements)==null?void 0:pK.eligibleCountries)==null?void 0:_K.regions)==null?void 0:bK.southCentralAsia)||"South & Central Asia: India, Pakistan",C.jsx("br",{}),((CK=(wK=(vK=c==null?void 0:c.eligibilityRequirements)==null?void 0:vK.eligibleCountries)==null?void 0:wK.regions)==null?void 0:CK.subSaharanAfrica)||"Sub-Saharan Africa: Ghana, Mali, Senegal, South Africa",C.jsx("br",{}),((SK=(yK=c==null?void 0:c.eligibilityRequirements)==null?void 0:yK.eligibleCountries)==null?void 0:SK.note)||"And many other countries with significant Muslim populations."]})})]})]})})]}):a?C.jsxs("div",{className:"space-y-8",children:[C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((xK=c==null?void 0:c.aboutProgram)==null?void 0:xK.title)||"About Future Leaders Exchange (FLEX)"}),C.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:((kK=c==null?void 0:c.aboutProgram)==null?void 0:kK.description)||"The Future Leaders Exchange (FLEX) program is a competitive, merit-based scholarship program funded by the U.S. State Department that brings high school students from Europe, Eurasia, and Central Asia to the United States for a full academic year. With over 32,000 alumni since 1993, FLEX promotes mutual understanding and lasting peace through youth exchange."}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((DK=(LK=c==null?void 0:c.aboutProgram)==null?void 0:LK.programHighlights)==null?void 0:DK.title)||"Program Highlights"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((NK=(EK=c==null?void 0:c.aboutProgram)==null?void 0:EK.programHighlights)==null?void 0:NK.items)||["Full academic year (9-10 months) in the U.S.","Live with volunteer American host families","Attend regular U.S. public high schools","Extremely competitive (1 in 50 acceptance rate)","Focus on democracy and entrepreneurship"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((TK=(IK=c==null?void 0:c.aboutProgram)==null?void 0:IK.programRequirements)==null?void 0:TK.title)||"Program Requirements"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((MK=(PK=c==null?void 0:c.aboutProgram)==null?void 0:PK.programRequirements)==null?void 0:MK.items)||["30+ hours of community service","Cultural orientation activities","Leadership development workshops","Cultural ambassador responsibilities","Alumni network participation"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))})]})]})]})}),C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((RK=c==null?void 0:c.eligibilityRequirements)==null?void 0:RK.title)||"Eligibility Requirements"}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((OK=(AK=c==null?void 0:c.eligibilityRequirements)==null?void 0:AK.basicRequirements)==null?void 0:OK.title)||"Basic Requirements"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((WK=(FK=c==null?void 0:c.eligibilityRequirements)==null?void 0:FK.basicRequirements)==null?void 0:WK.items)||["Ages 15-17 (some sources say up to 19)","Citizens of participating countries","Currently enrolled in high school","Strong academic performance","English language proficiency","No significant prior U.S. experience"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((HK=(BK=c==null?void 0:c.eligibilityRequirements)==null?void 0:BK.personalQualities)==null?void 0:HK.title)||"Personal Qualities"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((VK=(jK=c==null?void 0:c.eligibilityRequirements)==null?void 0:jK.personalQualities)==null?void 0:VK.items)||["Exceptional leadership potential","Strong character and maturity","Commitment to community service","Interest in democracy and free market economy","Cultural adaptability and openness","Academic excellence and curiosity"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((UK=(zK=c==null?void 0:c.eligibilityRequirements)==null?void 0:zK.eligibleCountries)==null?void 0:UK.title)||"Participating Countries (22 countries)"}),C.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:C.jsxs("p",{className:"text-sm text-gray-700",children:[((KK=(qK=($K=c==null?void 0:c.eligibilityRequirements)==null?void 0:$K.eligibleCountries)==null?void 0:qK.regions)==null?void 0:KK.easternEurope)||"Eastern Europe: Czech Republic, Estonia, Hungary, Latvia, Lithuania, Poland, Romania, Slovakia",C.jsx("br",{}),((ZK=(YK=(GK=c==null?void 0:c.eligibilityRequirements)==null?void 0:GK.eligibleCountries)==null?void 0:YK.regions)==null?void 0:ZK.southeastEurope)||"Southeast Europe: Greece, Montenegro, Serbia",C.jsx("br",{}),((JK=(XK=(QK=c==null?void 0:c.eligibilityRequirements)==null?void 0:QK.eligibleCountries)==null?void 0:XK.regions)==null?void 0:JK.eurasia)||"Eurasia: Armenia, Azerbaijan, Belarus, Georgia, Moldova, Russia, Ukraine",C.jsx("br",{}),((iG=(tG=(eG=c==null?void 0:c.eligibilityRequirements)==null?void 0:eG.eligibleCountries)==null?void 0:tG.regions)==null?void 0:iG.centralAsia)||"Central Asia: Kazakhstan, Kyrgyzstan, Tajikistan, Turkmenistan, Uzbekistan",C.jsx("br",{}),((oG=(sG=(nG=c==null?void 0:c.eligibilityRequirements)==null?void 0:nG.eligibleCountries)==null?void 0:sG.regions)==null?void 0:oG.eastAsia)||"East Asia: Mongolia"]})})]})]})})]}):l?C.jsxs("div",{className:"space-y-8",children:[C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((rG=c==null?void 0:c.aboutProgram)==null?void 0:rG.title)||"About AFS Global You Adventurer"}),C.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:((aG=c==null?void 0:c.aboutProgram)==null?void 0:aG.description)||"The AFS Global You Adventurer is a unique 5-week online exchange program designed for high school students around the world. This fully immersive, fully-funded program helps participants develop global competence, intercultural communication skills, leadership capacity, and digital collaboration skills. Through engaging activities, interactive discussions, and cross-cultural teamwork, students connect with peers from diverse backgrounds to become more empathetic, open-minded, and prepared to thrive in a globalized world."}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((cG=(lG=c==null?void 0:c.aboutProgram)==null?void 0:lG.programHighlights)==null?void 0:cG.title)||"Program Highlights"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((uG=(dG=c==null?void 0:c.aboutProgram)==null?void 0:dG.programHighlights)==null?void 0:uG.items)||["5-week interactive virtual exchange","Focus on global citizenship and intercultural skills","Leadership development and teamwork activities","Real-world challenges tied to UN Sustainable Development Goals (SDGs)","Daily online interactions with peers from around the world"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((fG=(hG=c==null?void 0:c.aboutProgram)==null?void 0:hG.programComponents)==null?void 0:fG.title)||"Program Components"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((mG=(gG=c==null?void 0:c.aboutProgram)==null?void 0:gG.programComponents)==null?void 0:mG.items)||["Global Competence Workshops: Training on communication, empathy, and cultural awareness","Sustainability Challenges: Projects related to the SDGs","Intercultural Dialogues: Interactive sessions with international peers","Leadership Activities: Team-based collaboration across time zones","Digital Collaboration Tools: Building skills in remote teamwork and problem-solving"]).map((Pt,Mt)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx(Ao,{className:"w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),Pt]},Mt))})]})]})]})}),C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:((pG=c==null?void 0:c.eligibilityRequirements)==null?void 0:pG.title)||"Eligibility Requirements"}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((bG=(_G=c==null?void 0:c.eligibilityRequirements)==null?void 0:_G.basicRequirements)==null?void 0:bG.title)||"Basic Requirements"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((wG=(vG=c==null?void 0:c.eligibilityRequirements)==null?void 0:vG.basicRequirements)==null?void 0:wG.items)||["Ages 1417 at the program start","Open to students anywhere in the world","Strong interest in global issues, culture, and leadership","High proficiency in English","Access to stable internet connection and computer"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((yG=(CG=c==null?void 0:c.eligibilityRequirements)==null?void 0:CG.personalQualities)==null?void 0:yG.title)||"Personal Qualities"}),C.jsx("ul",{className:"space-y-2 text-gray-700",children:(((xG=(SG=c==null?void 0:c.eligibilityRequirements)==null?void 0:SG.personalQualities)==null?void 0:xG.items)||["Curiosity and open-mindedness","Willingness to collaborate with peers from different cultures","Strong teamwork and communication skills","Respectful and inclusive attitude","Open-minded and tolerant attitude","Desire to become an active global citizen"]).map((Pt,Mt)=>C.jsxs("li",{children:[" ",Pt]},Mt))})]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:((LG=(kG=c==null?void 0:c.eligibilityRequirements)==null?void 0:kG.eligibleCountries)==null?void 0:LG.title)||"Participating Countries"}),C.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:C.jsx("p",{className:"text-sm text-gray-700",children:((EG=(DG=c==null?void 0:c.eligibilityRequirements)==null?void 0:DG.eligibleCountries)==null?void 0:EG.description)||"Countries from all over the world are eligible to participate in the AFS Global You Adventurer program."})})]})]})})]}):C.jsx(Yt,{children:C.jsxs(ei,{className:"p-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Scholarship Details"}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Field of Study"}),C.jsx("p",{className:"text-gray-700",children:h})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Eligibility"}),C.jsx("p",{className:"text-gray-700",children:g})]}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Organization"}),C.jsx("p",{className:"text-gray-700",children:m})]})]})]})}),C.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-8",children:[C.jsx(Mn,{asChild:!0,size:"lg",className:"bg-primary hover:bg-primary/90 text-white flex-1",children:C.jsxs("a",{href:t.applicationUrl||"#",target:"_blank",rel:"noopener noreferrer",children:[C.jsx(dye,{className:"w-5 h-5 mr-2"}),"Apply Now"]})}),s&&C.jsx(Mn,{asChild:!0,variant:"outline",size:"lg",className:"flex-1",children:C.jsxs("a",{href:"https://techgirlsglobal.org/",target:"_blank",rel:"noopener noreferrer",children:[C.jsx(Rre,{className:"w-5 h-5 mr-2"}),"Visit TechGirls Website"]})})]}),s&&C.jsx(Yt,{className:"mt-8",children:C.jsxs(ei,{className:"p-6",children:[C.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Need Help?"}),C.jsx("p",{className:"text-gray-700",children:"For specific country inquiries, contact your local U.S. embassy or consulate. General program questions can be submitted through the TechGirls website contact form."})]})})]})})]})}function xa(n,e=0){return n[n.length-(1+e)]}function Ixe(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function Li(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let i=0,s=n.length;i<s;i++)if(!t(n[i],e[i]))return!1;return!0}function Txe(n,e){const t=n.length-1;e<t&&(n[e]=n[t]),n.pop()}function Ix(n,e,t){return Pxe(n.length,i=>t(n[i],e))}function Pxe(n,e){let t=0,i=n-1;for(;t<=i;){const s=(t+i)/2|0,o=e(s);if(o<0)t=s+1;else if(o>0)i=s-1;else return s}return-(t+1)}function tW(n,e,t){if(n=n|0,n>=e.length)throw new TypeError("invalid index");const i=e[Math.floor(e.length*Math.random())],s=[],o=[],r=[];for(const a of e){const l=t(a,i);l<0?s.push(a):l>0?o.push(a):r.push(a)}return n<s.length?tW(n,s,t):n<s.length+r.length?r[0]:tW(n-(s.length+r.length),o,t)}function RZ(n,e){const t=[];let i;for(const s of n.slice(0).sort(e))!i||e(i[0],s)!==0?(i=[s],t.push(i)):i.push(s);return t}function*GV(n,e){let t,i;for(const s of n)i!==void 0&&e(i,s)?t.push(s):(t&&(yield t),t=[s]),i=s;t&&(yield t)}function kle(n,e){for(let t=0;t<=n.length;t++)e(t===0?void 0:n[t-1],t===n.length?void 0:n[t])}function Mxe(n,e){for(let t=0;t<n.length;t++)e(t===0?void 0:n[t-1],n[t],t+1===n.length?void 0:n[t+1])}function Tl(n){return n.filter(e=>!!e)}function AZ(n){let e=0;for(let t=0;t<n.length;t++)n[t]&&(n[e]=n[t],e+=1);n.length=e}function Lle(n){return!Array.isArray(n)||n.length===0}function Ys(n){return Array.isArray(n)&&n.length>0}function Lh(n,e=t=>t){const t=new Set;return n.filter(i=>{const s=e(i);return t.has(s)?!1:(t.add(s),!0)})}function YV(n,e){return n.length>0?n[0]:e}function Ro(n,e){let t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);const i=[];if(t<=e)for(let s=t;s<e;s++)i.push(s);else for(let s=t;s>e;s--)i.push(s);return i}function QR(n,e,t){const i=n.slice(0,e),s=n.slice(e);return i.concat(t,s)}function DF(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function HD(n,e){const t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function iW(n,e){for(const t of e)n.push(t)}function ZV(n){return Array.isArray(n)?n:[n]}function Rxe(n,e,t){const i=Dle(n,e),s=n.length,o=t.length;n.length=s+o;for(let r=s-1;r>=i;r--)n[r+o]=n[r];for(let r=0;r<o;r++)n[r+i]=t[r]}function OZ(n,e,t,i){const s=Dle(n,e);let o=n.splice(s,t);return o===void 0&&(o=[]),Rxe(n,s,i),o}function Dle(n,e){return e<0?Math.max(e+n.length,0):Math.min(e,n.length)}var Tx;(function(n){function e(o){return o<0}n.isLessThan=e;function t(o){return o<=0}n.isLessThanOrEqual=t;function i(o){return o>0}n.isGreaterThan=i;function s(o){return o===0}n.isNeitherLessOrGreaterThan=s,n.greaterThan=1,n.lessThan=-1,n.neitherLessOrGreaterThan=0})(Tx||(Tx={}));function mo(n,e){return(t,i)=>e(n(t),n(i))}function Axe(...n){return(e,t)=>{for(const i of n){const s=i(e,t);if(!Tx.isNeitherLessOrGreaterThan(s))return s}return Tx.neitherLessOrGreaterThan}}const Dl=(n,e)=>n-e,Oxe=(n,e)=>Dl(n?1:0,e?1:0);function Ele(n){return(e,t)=>-n(e,t)}class Dh{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const i=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,i}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const i=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,i}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const Sw=class Sw{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Sw(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new Sw(t=>this.iterate(i=>t(e(i))))}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(s=>((i||Tx.isGreaterThan(e(s,t)))&&(i=!1,t=s),!0)),t}};Sw.empty=new Sw(e=>{});let Bp=Sw;class FI{constructor(e){this._indexMap=e}static createSortPermutation(e,t){const i=Array.from(e.keys()).sort((s,o)=>t(e[s],e[o]));return new FI(i)}apply(e){return e.map((t,i)=>e[this._indexMap[i]])}inverse(){const e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new FI(e)}}function Vo(n){return typeof n=="string"}function Gn(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function Fxe(n){const e=Object.getPrototypeOf(Uint8Array);return typeof n=="object"&&n instanceof e}function jg(n){return typeof n=="number"&&!isNaN(n)}function FZ(n){return!!n&&typeof n[Symbol.iterator]=="function"}function Nle(n){return n===!0||n===!1}function Ks(n){return typeof n>"u"}function zd(n){return!Yr(n)}function Yr(n){return Ks(n)||n===null}function xt(n,e){if(!n)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function zf(n){if(Yr(n))throw new Error("Assertion Failed: argument is undefined or null");return n}function Px(n){return typeof n=="function"}function Wxe(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)Bxe(n[i],e[i])}function Bxe(n,e){if(Vo(e)){if(typeof n!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Px(e)){try{if(n instanceof e)return}catch{}if(!Yr(n)&&n.constructor===e||e.length===1&&e.call(void 0,n)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Bu(n){if(!n||typeof n!="object"||n instanceof RegExp)return n;const e=Array.isArray(n)?[]:{};return Object.entries(n).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?Bu(i):i}),e}function Hxe(n){if(!n||typeof n!="object")return n;const e=[n];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const i in t)if(Ile.call(t,i)){const s=t[i];typeof s=="object"&&!Object.isFrozen(s)&&!Fxe(s)&&e.push(s)}}return n}const Ile=Object.prototype.hasOwnProperty;function Tle(n,e){return nW(n,e,new Set)}function nW(n,e,t){if(Yr(n))return n;const i=e(n);if(typeof i<"u")return i;if(Array.isArray(n)){const s=[];for(const o of n)s.push(nW(o,e,t));return s}if(Gn(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);const s={};for(const o in n)Ile.call(n,o)&&(s[o]=nW(n[o],e,t));return t.delete(n),s}return n}function XR(n,e,t=!0){return Gn(n)?(Gn(e)&&Object.keys(e).forEach(i=>{i in n?t&&(Gn(n[i])&&Gn(e[i])?XR(n[i],e[i],t):n[i]=e[i]):n[i]=e[i]}),n):e}function _r(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!_r(n[t],e[t]))return!1}else{const s=[];for(i in n)s.push(i);s.sort();const o=[];for(i in e)o.push(i);if(o.sort(),!_r(s,o))return!1;for(t=0;t<s.length;t++)if(!_r(n[s[t]],e[s[t]]))return!1}return!0}function jxe(n){let e=[];for(;Object.prototype!==n;)e=e.concat(Object.getOwnPropertyNames(n)),n=Object.getPrototypeOf(n);return e}function sW(n){const e=[];for(const t of jxe(n))typeof n[t]=="function"&&e.push(t);return e}function Vxe(n,e){const t=s=>function(){const o=Array.prototype.slice.call(arguments,0);return e(s,o)},i={};for(const s of n)i[s]=t(s);return i}function Ple(){return globalThis._VSCODE_NLS_MESSAGES}function QV(){return globalThis._VSCODE_NLS_LANGUAGE}const zxe=QV()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function WI(n,e){let t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,(i,s)=>{const o=s[0],r=e[o];let a=i;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),zxe&&(t=""+t.replace(/[aouei]/g,"$&$&")+""),t}function p(n,e,...t){return WI(typeof n=="number"?Mle(n,e):e,t)}function Mle(n,e){var i;const t=(i=Ple())==null?void 0:i[n];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${n} !!!`)}return t}function Fe(n,e,...t){let i;typeof n=="number"?i=Mle(n,e):i=e;const s=WI(i,t);return{value:s,original:e===i?s:WI(e,t)}}const Xv="en";let BI=!1,HI=!1,_N=!1,Rle=!1,XV=!1,JV=!1,Ale=!1,jD,bN=Xv,WZ=Xv,Uxe,Kl;const fh=globalThis;let no;var mne;typeof fh.vscode<"u"&&typeof fh.vscode.process<"u"?no=fh.vscode.process:typeof process<"u"&&typeof((mne=process==null?void 0:process.versions)==null?void 0:mne.node)=="string"&&(no=process);var pne;const $xe=typeof((pne=no==null?void 0:no.versions)==null?void 0:pne.electron)=="string",qxe=$xe&&(no==null?void 0:no.type)==="renderer";var _ne;if(typeof no=="object"){BI=no.platform==="win32",HI=no.platform==="darwin",_N=no.platform==="linux",_N&&no.env.SNAP&&no.env.SNAP_REVISION,no.env.CI||no.env.BUILD_ARTIFACTSTAGINGDIRECTORY,jD=Xv,bN=Xv;const n=no.env.VSCODE_NLS_CONFIG;if(n)try{const e=JSON.parse(n);jD=e.userLocale,WZ=e.osLocale,bN=e.resolvedLanguage||Xv,Uxe=(_ne=e.languagePack)==null?void 0:_ne.translationsConfigFile}catch{}Rle=!0}else typeof navigator=="object"&&!qxe?(Kl=navigator.userAgent,BI=Kl.indexOf("Windows")>=0,HI=Kl.indexOf("Macintosh")>=0,JV=(Kl.indexOf("Macintosh")>=0||Kl.indexOf("iPad")>=0||Kl.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,_N=Kl.indexOf("Linux")>=0,Ale=(Kl==null?void 0:Kl.indexOf("Mobi"))>=0,XV=!0,bN=QV()||Xv,jD=navigator.language.toLowerCase(),WZ=jD):console.error("Unable to resolve platform.");const vs=BI,ct=HI,vo=_N,xc=Rle,Wb=XV,Kxe=XV&&typeof fh.importScripts=="function",Gxe=Kxe?fh.origin:void 0,Ac=JV,Ole=Ale,Gd=Kl,Yxe=bN,Zxe=typeof fh.postMessage=="function"&&!fh.importScripts,Fle=(()=>{if(Zxe){const n=[];fh.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,s=n.length;i<s;i++){const o=n[i];if(o.id===t.data.vscodeScheduleAsyncWork){n.splice(i,1),o.callback();return}}});let e=0;return t=>{const i=++e;n.push({id:i,callback:t}),fh.postMessage({vscodeScheduleAsyncWork:i},"*")}}return n=>setTimeout(n)})(),mr=HI||JV?2:BI?1:3;let BZ=!0,HZ=!1;function Wle(){if(!HZ){HZ=!0;const n=new Uint8Array(2);n[0]=1,n[1]=2,BZ=new Uint16Array(n.buffer)[0]===513}return BZ}const Ble=!!(Gd&&Gd.indexOf("Chrome")>=0),Qxe=!!(Gd&&Gd.indexOf("Firefox")>=0),Xxe=!!(!Ble&&Gd&&Gd.indexOf("Safari")>=0),Jxe=!!(Gd&&Gd.indexOf("Edg/")>=0),eke=!!(Gd&&Gd.indexOf("Android")>=0),Ls={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var _t;(function(n){function e(y){return y&&typeof y=="object"&&typeof y[Symbol.iterator]=="function"}n.is=e;const t=Object.freeze([]);function i(){return t}n.empty=i;function*s(y){yield y}n.single=s;function o(y){return e(y)?y:s(y)}n.wrap=o;function r(y){return y||t}n.from=r;function*a(y){for(let S=y.length-1;S>=0;S--)yield y[S]}n.reverse=a;function l(y){return!y||y[Symbol.iterator]().next().done===!0}n.isEmpty=l;function c(y){return y[Symbol.iterator]().next().value}n.first=c;function d(y,S){let x=0;for(const k of y)if(S(k,x++))return!0;return!1}n.some=d;function u(y,S){for(const x of y)if(S(x))return x}n.find=u;function*h(y,S){for(const x of y)S(x)&&(yield x)}n.filter=h;function*f(y,S){let x=0;for(const k of y)yield S(k,x++)}n.map=f;function*g(y,S){let x=0;for(const k of y)yield*S(k,x++)}n.flatMap=g;function*m(...y){for(const S of y)yield*S}n.concat=m;function _(y,S,x){let k=x;for(const D of y)k=S(k,D);return k}n.reduce=_;function*b(y,S,x=y.length){for(S<0&&(S+=y.length),x<0?x+=y.length:x>y.length&&(x=y.length);S<x;S++)yield y[S]}n.slice=b;function v(y,S=Number.POSITIVE_INFINITY){const x=[];if(S===0)return[x,y];const k=y[Symbol.iterator]();for(let D=0;D<S;D++){const N=k.next();if(N.done)return[x,n.empty()];x.push(N.value)}return[x,{[Symbol.iterator](){return k}}]}n.consume=v;async function w(y){const S=[];for await(const x of y)S.push(x);return Promise.resolve(S)}n.asyncToArray=w})(_t||(_t={}));var oh;let En=(oh=class{constructor(e){this.element=e,this.next=oh.Undefined,this.prev=oh.Undefined}},oh.Undefined=new oh(void 0),oh);class co{constructor(){this._first=En.Undefined,this._last=En.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===En.Undefined}clear(){let e=this._first;for(;e!==En.Undefined;){const t=e.next;e.prev=En.Undefined,e.next=En.Undefined,e=t}this._first=En.Undefined,this._last=En.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new En(e);if(this._first===En.Undefined)this._first=i,this._last=i;else if(t){const o=this._last;this._last=i,i.prev=o,o.next=i}else{const o=this._first;this._first=i,i.next=o,o.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==En.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==En.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==En.Undefined&&e.next!==En.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===En.Undefined&&e.next===En.Undefined?(this._first=En.Undefined,this._last=En.Undefined):e.next===En.Undefined?(this._last=this._last.prev,this._last.next=En.Undefined):e.prev===En.Undefined&&(this._first=this._first.next,this._first.prev=En.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==En.Undefined;)yield e.element,e=e.next}}const jI="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function tke(n=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of jI)n.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const ez=tke();function tz(n){let e=ez;if(n&&n instanceof RegExp)if(n.global)e=n;else{let t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}const Hle=new co;Hle.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Mx(n,e,t,i,s){if(e=tz(e),s||(s=_t.first(Hle)),t.length>s.maxLen){let c=n-s.maxLen/2;return c<0?c=0:i+=c,t=t.substring(c,n+s.maxLen/2),Mx(n,e,t,i,s)}const o=Date.now(),r=n-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-o>=s.timeBudget);c++){const d=r-s.windowSize*c;e.lastIndex=Math.max(0,d);const u=ike(e,t,r,a);if(!u&&l||(l=u,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function ike(n,e,t,i){let s;for(;s=n.exec(e);){const o=s.index||0;if(o<=t&&n.lastIndex>=t)return s;if(i>0&&o>i)return null}return null}const rd=8;class jle{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Vle{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class yi{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return JR(e,t)}compute(e,t,i){return i}}class iS{constructor(e,t){this.newValue=e,this.didChange=t}}function JR(n,e){if(typeof n!="object"||typeof e!="object"||!n||!e)return new iS(e,n!==e);if(Array.isArray(n)||Array.isArray(e)){const i=Array.isArray(n)&&Array.isArray(e)&&Li(n,e);return new iS(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const s=JR(n[i],e[i]);s.didChange&&(n[i]=s.newValue,t=!0)}return new iS(n,t)}class DL{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return JR(e,t)}validate(e){return this.defaultValue}}class Qy{constructor(e,t,i,s){this.id=e,this.name=t,this.defaultValue=i,this.schema=s}applyUpdate(e,t){return JR(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function Se(n,e){return typeof n>"u"?e:n==="false"?!1:!!n}class yt extends Qy{constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=i),super(e,t,i,s)}validate(e){return Se(e,this.defaultValue)}}function Vm(n,e,t,i){if(typeof n>"u")return e;let s=parseInt(n,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(i,s),s|0)}class Jt extends Qy{static clampedInt(e,t,i,s){return Vm(e,t,i,s)}constructor(e,t,i,s,o,r=void 0){typeof r<"u"&&(r.type="integer",r.default=i,r.minimum=s,r.maximum=o),super(e,t,i,r),this.minimum=s,this.maximum=o}validate(e){return Jt.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function nke(n,e,t,i){if(typeof n>"u")return e;const s=ea.float(n,e);return ea.clamp(s,t,i)}class ea extends Qy{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,s,o){typeof o<"u"&&(o.type="number",o.default=i),super(e,t,i,o),this.validationFn=s}validate(e){return this.validationFn(ea.float(e,this.defaultValue))}}class $s extends Qy{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,s=void 0){typeof s<"u"&&(s.type="string",s.default=i),super(e,t,i,s)}validate(e){return $s.string(e,this.defaultValue)}}function Bi(n,e,t,i){return typeof n!="string"?e:i&&n in i?i[n]:t.indexOf(n)===-1?e:n}class Wi extends Qy{constructor(e,t,i,s,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=i),super(e,t,i,o),this._allowedValues=s}validate(e){return Bi(e,this.defaultValue,this._allowedValues)}}class VD extends yi{constructor(e,t,i,s,o,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=s),super(e,t,i,a),this._allowedValues=o,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function ske(n){switch(n){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class oke extends yi{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),p("accessibilitySupport.on","Optimize for usage with a Screen Reader."),p("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:p("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class rke extends yi{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:p("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:p("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Se(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Se(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function ake(n){switch(n){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var ns;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(ns||(ns={}));function lke(n){switch(n){case"line":return ns.Line;case"block":return ns.Block;case"underline":return ns.Underline;case"line-thin":return ns.LineThin;case"block-outline":return ns.BlockOutline;case"underline-thin":return ns.UnderlineThin}}class cke extends DL{constructor(){super(143)}compute(e,t,i){const s=["monaco-editor"];return t.get(39)&&s.push(t.get(39)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(74)==="default"?s.push("mouse-default"):t.get(74)==="copy"&&s.push("mouse-copy"),t.get(112)&&s.push("showUnused"),t.get(141)&&s.push("showDeprecated"),s.join(" ")}}class dke extends yt{constructor(){super(37,"emptySelectionClipboard",!0,{description:p("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class uke extends yi{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:p("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[p("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),p("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),p("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:p("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[p("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),p("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),p("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:p("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:p("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:ct},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:p("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:p("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Se(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Bi(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Bi(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Se(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Se(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Se(t.loop,this.defaultValue.loop)}}}const Mu=class Mu extends yi{constructor(){super(51,"fontLigatures",Mu.OFF,{anyOf:[{type:"boolean",description:p("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:p("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:p("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Mu.OFF:e==="true"?Mu.ON:e:e?Mu.ON:Mu.OFF}};Mu.OFF='"liga" off, "calt" off',Mu.ON='"liga" on, "calt" on';let Vg=Mu;const Ru=class Ru extends yi{constructor(){super(54,"fontVariations",Ru.OFF,{anyOf:[{type:"boolean",description:p("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:p("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:p("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Ru.OFF:e==="true"?Ru.TRANSLATE:e:e?Ru.TRANSLATE:Ru.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}};Ru.OFF="normal",Ru.TRANSLATE="translate";let Rx=Ru;class hke extends DL{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class fke extends Qy{constructor(){super(52,"fontSize",po.fontSize,{type:"number",minimum:6,maximum:100,default:po.fontSize,description:p("fontSize","Controls the font size in pixels.")})}validate(e){const t=ea.float(e,this.defaultValue);return t===0?po.fontSize:ea.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}const hd=class hd extends yi{constructor(){super(53,"fontWeight",po.fontWeight,{anyOf:[{type:"number",minimum:hd.MINIMUM_VALUE,maximum:hd.MAXIMUM_VALUE,errorMessage:p("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:hd.SUGGESTION_VALUES}],default:po.fontWeight,description:p("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Jt.clampedInt(e,po.fontWeight,hd.MINIMUM_VALUE,hd.MAXIMUM_VALUE))}};hd.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],hd.MINIMUM_VALUE=1,hd.MAXIMUM_VALUE=1e3;let oW=hd;class gke extends yi{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[p("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),p("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),p("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:p("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:p("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:p("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:p("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:p("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:p("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:p("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:p("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:p("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:p("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:p("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:Bi(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Bi(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Bi(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Bi(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Bi(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Bi(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??Bi(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:$s.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:$s.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:$s.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:$s.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:$s.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:$s.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class mke extends yi{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:p("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:p("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:p("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:p("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:p("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),delay:Jt.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Se(t.sticky,this.defaultValue.sticky),hidingDelay:Jt.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Se(t.above,this.defaultValue.above)}}}class Yw extends DL{constructor(){super(146)}compute(e,t,i){return Yw.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let s=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(s=Math.max(s,t-1));const o=(i+e.viewLineCount+s)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:s,desiredRatio:o,minimapLineCount:r}}static _computeMinimapLayout(e,t){const i=e.outerWidth,s=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let h=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,m=e.minimap.side,_=e.verticalScrollbarWidth,b=e.viewLineCount,v=e.remainingWidth,w=e.isViewportWrapping,y=u?2:3;let S=Math.floor(o*s);const x=S/o;let k=!1,D=!1,N=y*h,R=h/o,O=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:q,extraLinesBeforeFirstLine:J,extraLinesBeyondLastLine:ge,desiredRatio:be,minimapLineCount:Qe}=Yw.computeContainedMinimapLineCount({viewLineCount:b,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:s,lineHeight:l,pixelRatio:o});if(b/Qe>1)k=!0,D=!0,h=1,N=1,R=h/o;else{let Ze=!1,at=h+1;if(g==="fit"){const Et=Math.ceil((J+b+ge)*N);w&&a&&v<=t.stableFitRemainingWidth?(Ze=!0,at=t.stableFitMaxMinimapScale):Ze=Et>S}if(g==="fill"||Ze){k=!0;const Et=h;N=Math.min(l*o,Math.max(1,Math.floor(1/be))),w&&a&&v<=t.stableFitRemainingWidth&&(at=t.stableFitMaxMinimapScale),h=Math.min(at,Math.max(1,Math.floor(N/y))),h>Et&&(O=Math.min(2,h/Et)),R=h/o/O,S=Math.ceil(Math.max(q,J+b+ge)*N),w?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=v,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const B=Math.floor(f*R),z=Math.min(B,Math.max(0,Math.floor((v-_-2)*R/(c+R)))+rd);let F=Math.floor(o*z);const K=F/o;F=Math.floor(F*O);const Z=u?1:2,re=m==="left"?0:i-z-_;return{renderMinimap:Z,minimapLeft:re,minimapWidth:z,minimapHeightIsEditorHeight:k,minimapIsSampling:D,minimapScale:h,minimapLineHeight:N,minimapCanvasInnerWidth:F,minimapCanvasInnerHeight:S,minimapCanvasOuterWidth:K,minimapCanvasOuterHeight:x}}static computeLayout(e,t){const i=t.outerWidth|0,s=t.outerHeight|0,o=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,u=e.get(138),h=u==="inherit"?e.get(137):u,f=h==="inherit"?e.get(133):h,g=e.get(136),m=t.isDominatedByLongLines,_=e.get(57),b=e.get(68).renderType!==0,v=e.get(69),w=e.get(106),y=e.get(84),S=e.get(73),x=e.get(104),k=x.verticalScrollbarSize,D=x.verticalHasArrows,N=x.arrowSize,R=x.horizontalScrollbarSize,O=e.get(43),B=e.get(111)!=="never";let z=e.get(66);O&&B&&(z+=16);let F=0;if(b){const Tt=Math.max(r,v);F=Math.round(Tt*l)}let K=0;_&&(K=o*t.glyphMarginDecorationLaneCount);let Z=0,re=Z+K,q=re+F,J=q+z;const ge=i-K-F-z;let be=!1,Qe=!1,Me=-1;h==="inherit"&&m?(be=!0,Qe=!0):f==="on"||f==="bounded"?Qe=!0:f==="wordWrapColumn"&&(Me=g);const Ze=Yw._computeMinimapLayout({outerWidth:i,outerHeight:s,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:w,paddingTop:y.top,paddingBottom:y.bottom,minimap:S,verticalScrollbarWidth:k,viewLineCount:d,remainingWidth:ge,isViewportWrapping:Qe},t.memory||new Vle);Ze.renderMinimap!==0&&Ze.minimapLeft===0&&(Z+=Ze.minimapWidth,re+=Ze.minimapWidth,q+=Ze.minimapWidth,J+=Ze.minimapWidth);const at=ge-Ze.minimapWidth,Et=Math.max(1,Math.floor((at-k-2)/a)),Ve=D?N:0;return Qe&&(Me=Math.max(1,Et),f==="bounded"&&(Me=Math.min(Me,g))),{width:i,height:s,glyphMarginLeft:Z,glyphMarginWidth:K,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:re,lineNumbersWidth:F,decorationsLeft:q,decorationsWidth:z,contentLeft:J,contentWidth:at,minimap:Ze,viewportColumn:Et,isWordWrapMinified:be,isViewportWrapping:Qe,wrappingColumn:Me,verticalScrollbarWidth:k,horizontalScrollbarHeight:R,overviewRuler:{top:Ve,width:k,height:s-2*Ve,right:0}}}}class pke extends yi{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[p("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),p("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:p("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return Bi(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var ml;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(ml||(ml={}));class _ke extends yi{constructor(){const e={enabled:ml.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[ml.Off,ml.OnCode,ml.On],default:e.enabled,enumDescriptions:[p("editor.lightbulb.enabled.off","Disable the code action menu."),p("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),p("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:p("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Bi(e.enabled,this.defaultValue.enabled,[ml.Off,ml.OnCode,ml.On])}}}class bke extends yi{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:p("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:p("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:p("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:p("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),maxLineCount:Jt.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Bi(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Se(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class vke extends yi{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:p("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[p("editor.inlayHints.on","Inlay hints are enabled"),p("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",ct?"Ctrl+Option":"Ctrl+Alt"),p("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",ct?"Ctrl+Option":"Ctrl+Alt"),p("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:p("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:p("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:p("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Bi(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Jt.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:$s.string(t.fontFamily,this.defaultValue.fontFamily),padding:Se(t.padding,this.defaultValue.padding)}}}class wke extends yi{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Jt.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Jt.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class Cke extends ea{constructor(){super(67,"lineHeight",po.lineHeight,e=>ea.clamp(e,0,150),{markdownDescription:p("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class yke extends yi{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:p("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:p("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),p("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),p("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:p("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:p("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:p("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:p("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:p("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:p("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:p("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:p("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:p("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:p("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),autohide:Se(t.autohide,this.defaultValue.autohide),size:Bi(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Bi(t.side,this.defaultValue.side,["right","left"]),showSlider:Bi(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Se(t.renderCharacters,this.defaultValue.renderCharacters),scale:Jt.clampedInt(t.scale,1,1,3),maxColumn:Jt.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Se(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Se(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:ea.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:ea.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function Ske(n){return n==="ctrlCmd"?ct?"metaKey":"ctrlKey":"altKey"}class xke extends yi{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Jt.clampedInt(t.top,0,0,1e3),bottom:Jt.clampedInt(t.bottom,0,0,1e3)}}}class kke extends yi{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:p("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:p("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),cycle:Se(t.cycle,this.defaultValue.cycle)}}}class Lke extends DL{constructor(){super(144)}compute(e,t,i){return e.pixelRatio}}class Dke extends yi{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class Eke extends yi{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[p("on","Quick suggestions show inside the suggest widget"),p("inline","Quick suggestions show as ghost text"),p("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:p("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:p("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:p("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:p("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:s}=e,o=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=Bi(t,this.defaultValue.other,o),typeof i=="boolean"?a=i?"on":"off":a=Bi(i,this.defaultValue.comments,o),typeof s=="boolean"?l=s?"on":"off":l=Bi(s,this.defaultValue.strings,o),{other:r,comments:a,strings:l}}}class Nke extends yi{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p("lineNumbers.off","Line numbers are not rendered."),p("lineNumbers.on","Line numbers are rendered as absolute number."),p("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),p("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:p("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}function VI(n){const e=n.get(99);return e==="editable"?n.get(92):e!=="on"}class Ike extends yi{constructor(){const e=[],t={type:"number",description:p("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:p("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:p("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Jt.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const s=i;t.push({column:Jt.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((i,s)=>i.column-s.column),t}return this.defaultValue}}class Tke extends yi{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function jZ(n,e){if(typeof n!="string")return e;switch(n){case"hidden":return 2;case"visible":return 3;default:return 1}}let Pke=class extends yi{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),p("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),p("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),p("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),p("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:p("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:p("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:p("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:p("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:p("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Jt.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=Jt.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Jt.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:jZ(t.vertical,this.defaultValue.vertical),horizontal:jZ(t.horizontal,this.defaultValue.horizontal),useShadows:Se(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Se(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Se(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Se(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Se(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Jt.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:s,verticalSliderSize:Jt.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:Se(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Se(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const Hr="inUntrustedWorkspace",Oo={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class Mke extends yi{constructor(){const e={nonBasicASCII:Hr,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Hr,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[Oo.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Hr],default:e.nonBasicASCII,description:p("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Oo.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:p("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Oo.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:p("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Oo.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Hr],default:e.includeComments,description:p("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Oo.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Hr],default:e.includeStrings,description:p("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Oo.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:p("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Oo.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:p("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(_r(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(_r(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const s=super.applyUpdate(e,t);return i?new iS(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Zw(t.nonBasicASCII,Hr,[!0,!1,Hr]),invisibleCharacters:Se(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Se(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Zw(t.includeComments,Hr,[!0,!1,Hr]),includeStrings:Zw(t.includeStrings,Hr,[!0,!1,Hr]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[s,o]of Object.entries(e))o===!0&&(i[s]=!0);return i}}class Rke extends yi{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:p("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[p("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),p("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),p("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:p("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:p("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:p("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),mode:Bi(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Bi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Se(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Se(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:$s.string(t.fontFamily,this.defaultValue.fontFamily)}}}class Ake extends yi{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:p("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[p("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),p("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),p("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:p("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:p("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),showToolbar:Bi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:$s.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Se(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class Oke extends yi{constructor(){const e={enabled:Ls.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Ls.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:p("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Se(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class Fke extends yi{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairs.true","Enables bracket pair guides."),p("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),p("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:p("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),p("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),p("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:p("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:p("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:p("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[p("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),p("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),p("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:p("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Zw(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Zw(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Se(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Se(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Zw(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Zw(n,e,t){const i=t.indexOf(n);return i===-1?e:t[i]}class Wke extends yi{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),p("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:p("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:p("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:p("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:p("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[p("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),p("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),p("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),p("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:p("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:p("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:p("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:p("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:p("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:p("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Bi(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Se(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Se(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Se(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Se(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Bi(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Se(t.showIcons,this.defaultValue.showIcons),showStatusBar:Se(t.showStatusBar,this.defaultValue.showStatusBar),preview:Se(t.preview,this.defaultValue.preview),previewMode:Bi(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Se(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Se(t.showMethods,this.defaultValue.showMethods),showFunctions:Se(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Se(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Se(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Se(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Se(t.showFields,this.defaultValue.showFields),showVariables:Se(t.showVariables,this.defaultValue.showVariables),showClasses:Se(t.showClasses,this.defaultValue.showClasses),showStructs:Se(t.showStructs,this.defaultValue.showStructs),showInterfaces:Se(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Se(t.showModules,this.defaultValue.showModules),showProperties:Se(t.showProperties,this.defaultValue.showProperties),showEvents:Se(t.showEvents,this.defaultValue.showEvents),showOperators:Se(t.showOperators,this.defaultValue.showOperators),showUnits:Se(t.showUnits,this.defaultValue.showUnits),showValues:Se(t.showValues,this.defaultValue.showValues),showConstants:Se(t.showConstants,this.defaultValue.showConstants),showEnums:Se(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Se(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Se(t.showKeywords,this.defaultValue.showKeywords),showWords:Se(t.showWords,this.defaultValue.showWords),showColors:Se(t.showColors,this.defaultValue.showColors),showFiles:Se(t.showFiles,this.defaultValue.showFiles),showReferences:Se(t.showReferences,this.defaultValue.showReferences),showFolders:Se(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Se(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Se(t.showSnippets,this.defaultValue.showSnippets),showUsers:Se(t.showUsers,this.defaultValue.showUsers),showIssues:Se(t.showIssues,this.defaultValue.showIssues)}}}class Bke extends yi{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:p("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Se(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Se(e.selectSubwords,this.defaultValue.selectSubwords)}}}class Hke extends yi{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:p("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:p("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class jke extends yi{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[p("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),p("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),p("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),p("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:p("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class Vke extends DL{constructor(){super(147)}compute(e,t,i){const s=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}class zke extends yi{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:p("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[p("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),p("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),showDropSelector:Bi(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class Uke extends yi{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:p("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:p("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[p("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),p("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Se(t.enabled,this.defaultValue.enabled),showPasteSelector:Bi(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const $ke="Consolas, 'Courier New', monospace",qke="Menlo, Monaco, 'Courier New', monospace",Kke="'Droid Sans Mono', 'monospace', monospace",po={fontFamily:ct?qke:vo?Kke:$ke,fontWeight:"normal",fontSize:ct?12:14,lineHeight:0,letterSpacing:0},Jv=[];function de(n){return Jv[n.id]=n,n}const zc={acceptSuggestionOnCommitCharacter:de(new yt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:de(new Wi(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:p("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:de(new oke),accessibilityPageSize:de(new Jt(3,"accessibilityPageSize",10,1,1073741824,{description:p("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:de(new $s(4,"ariaLabel",p("editorViewAccessibleLabel","Editor content"))),ariaRequired:de(new yt(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:de(new yt(8,"screenReaderAnnounceInlineSuggestion",!0,{description:p("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:de(new Wi(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),p("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:p("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:de(new Wi(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),p("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:p("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:de(new Wi(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:de(new Wi(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:p("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:de(new Wi(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),p("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:p("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:de(new VD(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],ske,{enumDescriptions:[p("editor.autoIndent.none","The editor will not insert indentation automatically."),p("editor.autoIndent.keep","The editor will keep the current line's indentation."),p("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),p("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),p("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:p("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:de(new yt(13,"automaticLayout",!1)),autoSurround:de(new Wi(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),p("editor.autoSurround.quotes","Surround with quotes but not brackets."),p("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:p("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:de(new Oke),bracketPairGuides:de(new Fke),stickyTabStops:de(new yt(117,"stickyTabStops",!1,{description:p("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:de(new yt(17,"codeLens",!0,{description:p("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:de(new $s(18,"codeLensFontFamily","",{description:p("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:de(new Jt(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:de(new yt(20,"colorDecorators",!0,{description:p("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:de(new Wi(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[p("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),p("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),p("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:p("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:de(new Jt(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:p("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:de(new yt(22,"columnSelection",!1,{description:p("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:de(new rke),contextmenu:de(new yt(24,"contextmenu",!0)),copyWithSyntaxHighlighting:de(new yt(25,"copyWithSyntaxHighlighting",!0,{description:p("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:de(new VD(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],ake,{description:p("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:de(new Wi(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[p("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),p("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),p("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:p("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:de(new VD(28,"cursorStyle",ns.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],lke,{description:p("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:de(new Jt(29,"cursorSurroundingLines",0,0,1073741824,{description:p("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:de(new Wi(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),p("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:p("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:de(new Jt(31,"cursorWidth",0,0,1073741824,{markdownDescription:p("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:de(new yt(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:de(new yt(33,"disableMonospaceOptimizations",!1)),domReadOnly:de(new yt(34,"domReadOnly",!1)),dragAndDrop:de(new yt(35,"dragAndDrop",!0,{description:p("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:de(new dke),dropIntoEditor:de(new zke),stickyScroll:de(new bke),experimentalWhitespaceRendering:de(new Wi(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[p("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),p("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),p("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:p("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:de(new $s(39,"extraEditorClassName","")),fastScrollSensitivity:de(new ea(40,"fastScrollSensitivity",5,n=>n<=0?5:n,{markdownDescription:p("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:de(new uke),fixedOverflowWidgets:de(new yt(42,"fixedOverflowWidgets",!1)),folding:de(new yt(43,"folding",!0,{description:p("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:de(new Wi(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),p("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:p("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:de(new yt(45,"foldingHighlight",!0,{description:p("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:de(new yt(46,"foldingImportsByDefault",!1,{description:p("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:de(new Jt(47,"foldingMaximumRegions",5e3,10,65e3,{description:p("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:de(new yt(48,"unfoldOnClickAfterEndOfLine",!1,{description:p("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:de(new $s(49,"fontFamily",po.fontFamily,{description:p("fontFamily","Controls the font family.")})),fontInfo:de(new hke),fontLigatures2:de(new Vg),fontSize:de(new fke),fontWeight:de(new oW),fontVariations:de(new Rx),formatOnPaste:de(new yt(55,"formatOnPaste",!1,{description:p("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:de(new yt(56,"formatOnType",!1,{description:p("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:de(new yt(57,"glyphMargin",!0,{description:p("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:de(new gke),hideCursorInOverviewRuler:de(new yt(59,"hideCursorInOverviewRuler",!1,{description:p("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:de(new mke),inDiffEditor:de(new yt(61,"inDiffEditor",!1)),letterSpacing:de(new ea(64,"letterSpacing",po.letterSpacing,n=>ea.clamp(n,-5,20),{description:p("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:de(new _ke),lineDecorationsWidth:de(new wke),lineHeight:de(new Cke),lineNumbers:de(new Nke),lineNumbersMinChars:de(new Jt(69,"lineNumbersMinChars",5,1,300)),linkedEditing:de(new yt(70,"linkedEditing",!1,{description:p("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:de(new yt(71,"links",!0,{description:p("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:de(new Wi(72,"matchBrackets","always",["always","near","never"],{description:p("matchBrackets","Highlight matching brackets.")})),minimap:de(new yke),mouseStyle:de(new Wi(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:de(new ea(75,"mouseWheelScrollSensitivity",1,n=>n===0?1:n,{markdownDescription:p("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:de(new yt(76,"mouseWheelZoom",!1,{markdownDescription:ct?p("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):p("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:de(new yt(77,"multiCursorMergeOverlapping",!0,{description:p("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:de(new VD(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],Ske,{markdownEnumDescriptions:[p("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:p({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:de(new Wi(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p("multiCursorPaste.spread","Each cursor pastes a single line of the text."),p("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:p("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:de(new Jt(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:p("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:de(new Wi(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[p("occurrencesHighlight.off","Does not highlight occurrences."),p("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),p("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:p("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:de(new yt(82,"overviewRulerBorder",!0,{description:p("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:de(new Jt(83,"overviewRulerLanes",3,0,3)),padding:de(new xke),pasteAs:de(new Uke),parameterHints:de(new kke),peekWidgetDefaultFocus:de(new Wi(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),p("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:p("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:de(new Dke),definitionLinkOpensInPeek:de(new yt(89,"definitionLinkOpensInPeek",!1,{description:p("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:de(new Eke),quickSuggestionsDelay:de(new Jt(91,"quickSuggestionsDelay",10,0,1073741824,{description:p("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:de(new yt(92,"readOnly",!1)),readOnlyMessage:de(new Tke),renameOnType:de(new yt(94,"renameOnType",!1,{description:p("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:p("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:de(new yt(95,"renderControlCharacters",!0,{description:p("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:de(new Wi(96,"renderFinalNewline",vo?"dimmed":"on",["off","on","dimmed"],{description:p("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:de(new Wi(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:p("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:de(new yt(98,"renderLineHighlightOnlyWhenFocus",!1,{description:p("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:de(new Wi(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:de(new Wi(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),p("renderWhitespace.selection","Render whitespace characters only on selected text."),p("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:p("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:de(new Jt(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:de(new yt(102,"roundedSelection",!0,{description:p("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:de(new Ike),scrollbar:de(new Pke),scrollBeyondLastColumn:de(new Jt(105,"scrollBeyondLastColumn",4,0,1073741824,{description:p("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:de(new yt(106,"scrollBeyondLastLine",!0,{description:p("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:de(new yt(107,"scrollPredominantAxis",!0,{description:p("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:de(new yt(108,"selectionClipboard",!0,{description:p("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:vo})),selectionHighlight:de(new yt(109,"selectionHighlight",!0,{description:p("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:de(new yt(110,"selectOnLineNumbers",!0)),showFoldingControls:de(new Wi(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[p("showFoldingControls.always","Always show the folding controls."),p("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),p("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:p("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:de(new yt(112,"showUnused",!0,{description:p("showUnused","Controls fading out of unused code.")})),showDeprecated:de(new yt(141,"showDeprecated",!0,{description:p("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:de(new vke),snippetSuggestions:de(new Wi(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),p("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),p("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),p("snippetSuggestions.none","Do not show snippet suggestions.")],description:p("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:de(new Bke),smoothScrolling:de(new yt(115,"smoothScrolling",!1,{description:p("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:de(new Jt(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:de(new Wke),inlineSuggest:de(new Rke),inlineEdit:de(new Ake),inlineCompletionsAccessibilityVerbose:de(new yt(150,"inlineCompletionsAccessibilityVerbose",!1,{description:p("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:de(new Jt(120,"suggestFontSize",0,0,1e3,{markdownDescription:p("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:de(new Jt(121,"suggestLineHeight",0,0,1e3,{markdownDescription:p("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:de(new yt(122,"suggestOnTriggerCharacters",!0,{description:p("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:de(new Wi(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p("suggestSelection.first","Always select the first suggestion."),p("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),p("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:p("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:de(new Wi(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),p("tabCompletion.off","Disable tab completions."),p("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:p("tabCompletion","Enables tab completions.")})),tabIndex:de(new Jt(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:de(new Mke),unusualLineTerminators:de(new Wi(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),p("unusualLineTerminators.off","Unusual line terminators are ignored."),p("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:p("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:de(new yt(128,"useShadowDOM",!0)),useTabStops:de(new yt(129,"useTabStops",!0,{description:p("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:de(new Wi(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[p("wordBreak.normal","Use the default line break rule."),p("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:p("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:de(new Hke),wordSeparators:de(new $s(132,"wordSeparators",jI,{description:p("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:de(new Wi(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),p({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:p({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:de(new $s(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:de(new $s(135,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:de(new Jt(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:p({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:de(new Wi(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:de(new Wi(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:de(new cke),defaultColorDecorators:de(new yt(148,"defaultColorDecorators",!1,{markdownDescription:p("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:de(new Lke),tabFocusMode:de(new yt(145,"tabFocusMode",!1,{markdownDescription:p("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:de(new Yw),wrappingInfo:de(new Vke),wrappingIndent:de(new jke),wrappingStrategy:de(new pke)};class Gke{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?ny.isErrorNoTelemetry(e)?new ny(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const zle=new Gke;function He(n){el(n)||zle.onUnexpectedError(n)}function en(n){el(n)||zle.onUnexpectedExternalError(n)}function VZ(n){if(n instanceof Error){const{name:e,message:t}=n,i=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:ny.isErrorNoTelemetry(n)}}return n}const zI="Canceled";function el(n){return n instanceof Pl?!0:n instanceof Error&&n.name===zI&&n.message===zI}class Pl extends Error{constructor(){super(zI),this.name=this.message}}function Yke(){const n=new Error(zI);return n.name=n.message,n}function ja(n){return n?new Error(`Illegal argument: ${n}`):new Error("Illegal argument")}function iz(n){return n?new Error(`Illegal state: ${n}`):new Error("Illegal state")}class Zke extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class ny extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof ny)return e;const t=new ny;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Dt extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Dt.prototype)}}function zg(n,e){const t=this;let i=!1,s;return function(){return i||(i=!0,s=n.apply(t,arguments)),s}}function eA(n){return typeof n=="object"&&n!==null&&typeof n.dispose=="function"&&n.dispose.length===0}function Qt(n){if(_t.is(n)){const e=[];for(const t of n)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function El(...n){return xe(()=>Qt(n))}function xe(n){return{dispose:zg(()=>{n()})}}const WM=class WM{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Qt(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?WM.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};WM.DISABLE_DISPOSED_WARNING=!1;let Q=WM;const Aq=class Aq{constructor(){this._store=new Q,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Aq.None=Object.freeze({dispose(){}});let U=Aq;class jn{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}}class Qke{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class Xke{constructor(e){this.object=e}dispose(){}}class nz{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Qt(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,i=!1){var s;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(s=this._store.get(e))==null||s.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))==null||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const Jke=globalThis.performance&&typeof globalThis.performance.now=="function";class Qn{static create(e){return new Qn(e)}constructor(e){this._now=Jke&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var ue;(function(n){n.None=()=>U.None;function e(z,F){return h(z,()=>{},0,void 0,!0,void 0,F)}n.defer=e;function t(z){return(F,K=null,Z)=>{let re=!1,q;return q=z(J=>{if(!re)return q?q.dispose():re=!0,F.call(K,J)},null,Z),re&&q.dispose(),q}}n.once=t;function i(z,F){return n.once(n.filter(z,F))}n.onceIf=i;function s(z,F,K){return d((Z,re=null,q)=>z(J=>Z.call(re,F(J)),null,q),K)}n.map=s;function o(z,F,K){return d((Z,re=null,q)=>z(J=>{F(J),Z.call(re,J)},null,q),K)}n.forEach=o;function r(z,F,K){return d((Z,re=null,q)=>z(J=>F(J)&&Z.call(re,J),null,q),K)}n.filter=r;function a(z){return z}n.signal=a;function l(...z){return(F,K=null,Z)=>{const re=El(...z.map(q=>q(J=>F.call(K,J))));return u(re,Z)}}n.any=l;function c(z,F,K,Z){let re=K;return s(z,q=>(re=F(re,q),re),Z)}n.reduce=c;function d(z,F){let K;const Z={onWillAddFirstListener(){K=z(re.fire,re)},onDidRemoveLastListener(){K==null||K.dispose()}},re=new j(Z);return F==null||F.add(re),re.event}function u(z,F){return F instanceof Array?F.push(z):F&&F.add(z),z}function h(z,F,K=100,Z=!1,re=!1,q,J){let ge,be,Qe,Me=0,Ze;const at={leakWarningThreshold:q,onWillAddFirstListener(){ge=z(Ve=>{Me++,be=F(be,Ve),Z&&!Qe&&(Et.fire(be),be=void 0),Ze=()=>{const Tt=be;be=void 0,Qe=void 0,(!Z||Me>1)&&Et.fire(Tt),Me=0},typeof K=="number"?(clearTimeout(Qe),Qe=setTimeout(Ze,K)):Qe===void 0&&(Qe=0,queueMicrotask(Ze))})},onWillRemoveListener(){re&&Me>0&&(Ze==null||Ze())},onDidRemoveLastListener(){Ze=void 0,ge.dispose()}},Et=new j(at);return J==null||J.add(Et),Et.event}n.debounce=h;function f(z,F=0,K){return n.debounce(z,(Z,re)=>Z?(Z.push(re),Z):[re],F,void 0,!0,void 0,K)}n.accumulate=f;function g(z,F=(Z,re)=>Z===re,K){let Z=!0,re;return r(z,q=>{const J=Z||!F(q,re);return Z=!1,re=q,J},K)}n.latch=g;function m(z,F,K){return[n.filter(z,F,K),n.filter(z,Z=>!F(Z),K)]}n.split=m;function _(z,F=!1,K=[],Z){let re=K.slice(),q=z(be=>{re?re.push(be):ge.fire(be)});Z&&Z.add(q);const J=()=>{re==null||re.forEach(be=>ge.fire(be)),re=null},ge=new j({onWillAddFirstListener(){q||(q=z(be=>ge.fire(be)),Z&&Z.add(q))},onDidAddFirstListener(){re&&(F?setTimeout(J):J())},onDidRemoveLastListener(){q&&q.dispose(),q=null}});return Z&&Z.add(ge),ge.event}n.buffer=_;function b(z,F){return(Z,re,q)=>{const J=F(new w);return z(function(ge){const be=J.evaluate(ge);be!==v&&Z.call(re,be)},void 0,q)}}n.chain=b;const v=Symbol("HaltChainable");class w{constructor(){this.steps=[]}map(F){return this.steps.push(F),this}forEach(F){return this.steps.push(K=>(F(K),K)),this}filter(F){return this.steps.push(K=>F(K)?K:v),this}reduce(F,K){let Z=K;return this.steps.push(re=>(Z=F(Z,re),Z)),this}latch(F=(K,Z)=>K===Z){let K=!0,Z;return this.steps.push(re=>{const q=K||!F(re,Z);return K=!1,Z=re,q?re:v}),this}evaluate(F){for(const K of this.steps)if(F=K(F),F===v)break;return F}}function y(z,F,K=Z=>Z){const Z=(...ge)=>J.fire(K(...ge)),re=()=>z.on(F,Z),q=()=>z.removeListener(F,Z),J=new j({onWillAddFirstListener:re,onDidRemoveLastListener:q});return J.event}n.fromNodeEventEmitter=y;function S(z,F,K=Z=>Z){const Z=(...ge)=>J.fire(K(...ge)),re=()=>z.addEventListener(F,Z),q=()=>z.removeEventListener(F,Z),J=new j({onWillAddFirstListener:re,onDidRemoveLastListener:q});return J.event}n.fromDOMEventEmitter=S;function x(z){return new Promise(F=>t(z)(F))}n.toPromise=x;function k(z){const F=new j;return z.then(K=>{F.fire(K)},()=>{F.fire(void 0)}).finally(()=>{F.dispose()}),F.event}n.fromPromise=k;function D(z,F){return z(K=>F.fire(K))}n.forward=D;function N(z,F,K){return F(K),z(Z=>F(Z))}n.runAndSubscribe=N;class R{constructor(F,K){this._observable=F,this._counter=0,this._hasChanged=!1;const Z={onWillAddFirstListener:()=>{F.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{F.removeObserver(this)}};this.emitter=new j(Z),K&&K.add(this.emitter)}beginUpdate(F){this._counter++}handlePossibleChange(F){}handleChange(F,K){this._hasChanged=!0}endUpdate(F){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function O(z,F){return new R(z,F).emitter.event}n.fromObservable=O;function B(z){return(F,K,Z)=>{let re=0,q=!1;const J={beginUpdate(){re++},endUpdate(){re--,re===0&&(z.reportChanges(),q&&(q=!1,F.call(K)))},handlePossibleChange(){},handleChange(){q=!0}};z.addObserver(J),z.reportChanges();const ge={dispose(){z.removeObserver(J)}};return Z instanceof Q?Z.add(ge):Array.isArray(Z)&&Z.push(ge),ge}}n.fromObservableLight=B})(ue||(ue={}));const xw=class xw{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${xw._idPool++}`,xw.all.add(this)}start(e){this._stopWatch=new Qn,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};xw.all=new Set,xw._idPool=0;let rW=xw,eLe=-1;const BM=class BM{constructor(e,t,i=(BM._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=i,this._warnCountdown=0}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;const[o,r]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`;console.warn(a),console.warn(o);const l=new tLe(a,o);this._errorHandler(l)}return()=>{const o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[i,s]of this._stacks)(!e||t<s)&&(e=[i,s],t=s);return e}};BM._idPool=1;let aW=BM;class sz{static create(){const e=new Error;return new sz(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class tLe extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class iLe extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class EF{constructor(e){this.value=e}}const nLe=2;let j=class{constructor(e){var t,i,s,o;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new aW((e==null?void 0:e.onListenerError)??He,((i=this._options)==null?void 0:i.leakWarningThreshold)??eLe):void 0,this._perfMon=(s=this._options)!=null&&s._profName?new rW(this._options._profName):void 0,this._deliveryQueue=(o=this._options)==null?void 0:o.deliveryQueue}dispose(){var e,t,i,s;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||i.call(t),(s=this._leakageMon)==null||s.dispose())}get event(){return this._event??(this._event=(e,t,i)=>{var a,l,c,d,u;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const h=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(h);const f=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],g=new iLe(`${h}. HINT: Stack shows most frequent listener (${f[1]}-times)`,f[0]);return(((a=this._options)==null?void 0:a.onListenerError)||He)(g),U.None}if(this._disposed)return U.None;t&&(e=e.bind(t));const s=new EF(e);let o;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(s.stack=sz.create(),o=this._leakageMon.check(s.stack,this._size+1)),this._listeners?this._listeners instanceof EF?(this._deliveryQueue??(this._deliveryQueue=new Ule),this._listeners=[this._listeners,s]):this._listeners.push(s):((c=(l=this._options)==null?void 0:l.onWillAddFirstListener)==null||c.call(l,this),this._listeners=s,(u=(d=this._options)==null?void 0:d.onDidAddFirstListener)==null||u.call(d,this)),this._size++;const r=xe(()=>{o==null||o(),this._removeListener(s)});return i instanceof Q?i.add(r):Array.isArray(i)&&i.push(r),r}),this._event}_removeListener(e){var o,r,a,l;if((r=(o=this._options)==null?void 0:o.onWillRemoveListener)==null||r.call(o,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(l=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||l.call(a,this),this._size=0;return}const t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const s=this._deliveryQueue.current===this;if(this._size*nLe<=t.length){let c=0;for(let d=0;d<t.length;d++)t[d]?t[c++]=t[d]:s&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=c}}_deliver(e,t){var s;if(!e)return;const i=((s=this._options)==null?void 0:s.onListenerError)||He;if(!i){e.value(t);return}try{e.value(t)}catch(o){i(o)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,s,o;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)==null||i.stop()),(s=this._perfMon)==null||s.start(this._size),this._listeners)if(this._listeners instanceof EF)this._deliver(this._listeners,e);else{const r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}(o=this._perfMon)==null||o.stop()}hasListeners(){return this._size>0}};const sLe=()=>new Ule;class Ule{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class rb extends j{constructor(e){super(e),this._isPaused=0,this._eventQueue=new co,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class $le extends rb{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class oLe extends j{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class rLe{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new j({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),xe(zg(()=>{this.hasListeners&&this.unhook(t);const s=this.events.indexOf(t);this.events.splice(s,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)==null||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)==null||e.dispose();this.events=[]}}class EL{constructor(){this.data=[]}wrapEvent(e,t,i){return(s,o,r)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>s.call(o,a)):s.call(o,a);return}const c=l;if(!c){s.call(o,t(i,a));return}c.items??(c.items=[]),c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??(c.reducedResult=i?c.items.reduce(t,i):c.items.reduce(t)),s.call(o,c.reducedResult)})},void 0,r)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const i=e();return this.data.pop(),t.buffers.forEach(s=>s()),i}}class zZ{constructor(){this.listening=!1,this.inputEvent=ue.None,this.inputEventListener=U.None,this.emitter=new j({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const qle=Object.freeze(function(n,e){const t=setTimeout(n.bind(e),0);return{dispose(){clearTimeout(t)}}});var Ye;(function(n){function e(t){return t===n.None||t===n.Cancelled||t instanceof vN?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}n.isCancellationToken=e,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ue.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:qle})})(Ye||(Ye={}));class vN{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?qle:(this._emitter||(this._emitter=new j),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let Pi=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new vN),this._token}cancel(){this._token?this._token instanceof vN&&this._token.cancel():this._token=Ye.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)==null||t.dispose(),this._token?this._token instanceof vN&&this._token.dispose():this._token=Ye.None}};function lW(n){const e=new Pi;return n.add({dispose(){e.cancel()}}),e.token}class oz{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const wN=new oz,cW=new oz,dW=new oz,Kle=new Array(230),aLe=Object.create(null),lLe=Object.create(null),rz=[];for(let n=0;n<=193;n++)rz[n]=-1;(function(){const n="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",n,n],[1,1,"Hyper",0,n,0,n,n,n],[1,2,"Super",0,n,0,n,n,n],[1,3,"Fn",0,n,0,n,n,n],[1,4,"FnLock",0,n,0,n,n,n],[1,5,"Suspend",0,n,0,n,n,n],[1,6,"Resume",0,n,0,n,n,n],[1,7,"Turbo",0,n,0,n,n,n],[1,8,"Sleep",0,n,0,"VK_SLEEP",n,n],[1,9,"WakeUp",0,n,0,n,n,n],[0,10,"KeyA",31,"A",65,"VK_A",n,n],[0,11,"KeyB",32,"B",66,"VK_B",n,n],[0,12,"KeyC",33,"C",67,"VK_C",n,n],[0,13,"KeyD",34,"D",68,"VK_D",n,n],[0,14,"KeyE",35,"E",69,"VK_E",n,n],[0,15,"KeyF",36,"F",70,"VK_F",n,n],[0,16,"KeyG",37,"G",71,"VK_G",n,n],[0,17,"KeyH",38,"H",72,"VK_H",n,n],[0,18,"KeyI",39,"I",73,"VK_I",n,n],[0,19,"KeyJ",40,"J",74,"VK_J",n,n],[0,20,"KeyK",41,"K",75,"VK_K",n,n],[0,21,"KeyL",42,"L",76,"VK_L",n,n],[0,22,"KeyM",43,"M",77,"VK_M",n,n],[0,23,"KeyN",44,"N",78,"VK_N",n,n],[0,24,"KeyO",45,"O",79,"VK_O",n,n],[0,25,"KeyP",46,"P",80,"VK_P",n,n],[0,26,"KeyQ",47,"Q",81,"VK_Q",n,n],[0,27,"KeyR",48,"R",82,"VK_R",n,n],[0,28,"KeyS",49,"S",83,"VK_S",n,n],[0,29,"KeyT",50,"T",84,"VK_T",n,n],[0,30,"KeyU",51,"U",85,"VK_U",n,n],[0,31,"KeyV",52,"V",86,"VK_V",n,n],[0,32,"KeyW",53,"W",87,"VK_W",n,n],[0,33,"KeyX",54,"X",88,"VK_X",n,n],[0,34,"KeyY",55,"Y",89,"VK_Y",n,n],[0,35,"KeyZ",56,"Z",90,"VK_Z",n,n],[0,36,"Digit1",22,"1",49,"VK_1",n,n],[0,37,"Digit2",23,"2",50,"VK_2",n,n],[0,38,"Digit3",24,"3",51,"VK_3",n,n],[0,39,"Digit4",25,"4",52,"VK_4",n,n],[0,40,"Digit5",26,"5",53,"VK_5",n,n],[0,41,"Digit6",27,"6",54,"VK_6",n,n],[0,42,"Digit7",28,"7",55,"VK_7",n,n],[0,43,"Digit8",29,"8",56,"VK_8",n,n],[0,44,"Digit9",30,"9",57,"VK_9",n,n],[0,45,"Digit0",21,"0",48,"VK_0",n,n],[1,46,"Enter",3,"Enter",13,"VK_RETURN",n,n],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",n,n],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",n,n],[1,49,"Tab",2,"Tab",9,"VK_TAB",n,n],[1,50,"Space",10,"Space",32,"VK_SPACE",n,n],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,n,0,n,n,n],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",n,n],[1,64,"F1",59,"F1",112,"VK_F1",n,n],[1,65,"F2",60,"F2",113,"VK_F2",n,n],[1,66,"F3",61,"F3",114,"VK_F3",n,n],[1,67,"F4",62,"F4",115,"VK_F4",n,n],[1,68,"F5",63,"F5",116,"VK_F5",n,n],[1,69,"F6",64,"F6",117,"VK_F6",n,n],[1,70,"F7",65,"F7",118,"VK_F7",n,n],[1,71,"F8",66,"F8",119,"VK_F8",n,n],[1,72,"F9",67,"F9",120,"VK_F9",n,n],[1,73,"F10",68,"F10",121,"VK_F10",n,n],[1,74,"F11",69,"F11",122,"VK_F11",n,n],[1,75,"F12",70,"F12",123,"VK_F12",n,n],[1,76,"PrintScreen",0,n,0,n,n,n],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",n,n],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",n,n],[1,79,"Insert",19,"Insert",45,"VK_INSERT",n,n],[1,80,"Home",14,"Home",36,"VK_HOME",n,n],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",n,n],[1,82,"Delete",20,"Delete",46,"VK_DELETE",n,n],[1,83,"End",13,"End",35,"VK_END",n,n],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",n,n],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",n],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",n],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",n],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",n],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",n,n],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",n,n],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",n,n],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",n,n],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",n,n],[1,94,"NumpadEnter",3,n,0,n,n,n],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",n,n],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",n,n],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",n,n],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",n,n],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",n,n],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",n,n],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",n,n],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",n,n],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",n,n],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",n,n],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",n,n],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",n,n],[1,107,"ContextMenu",58,"ContextMenu",93,n,n,n],[1,108,"Power",0,n,0,n,n,n],[1,109,"NumpadEqual",0,n,0,n,n,n],[1,110,"F13",71,"F13",124,"VK_F13",n,n],[1,111,"F14",72,"F14",125,"VK_F14",n,n],[1,112,"F15",73,"F15",126,"VK_F15",n,n],[1,113,"F16",74,"F16",127,"VK_F16",n,n],[1,114,"F17",75,"F17",128,"VK_F17",n,n],[1,115,"F18",76,"F18",129,"VK_F18",n,n],[1,116,"F19",77,"F19",130,"VK_F19",n,n],[1,117,"F20",78,"F20",131,"VK_F20",n,n],[1,118,"F21",79,"F21",132,"VK_F21",n,n],[1,119,"F22",80,"F22",133,"VK_F22",n,n],[1,120,"F23",81,"F23",134,"VK_F23",n,n],[1,121,"F24",82,"F24",135,"VK_F24",n,n],[1,122,"Open",0,n,0,n,n,n],[1,123,"Help",0,n,0,n,n,n],[1,124,"Select",0,n,0,n,n,n],[1,125,"Again",0,n,0,n,n,n],[1,126,"Undo",0,n,0,n,n,n],[1,127,"Cut",0,n,0,n,n,n],[1,128,"Copy",0,n,0,n,n,n],[1,129,"Paste",0,n,0,n,n,n],[1,130,"Find",0,n,0,n,n,n],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",n,n],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",n,n],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",n,n],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",n,n],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",n,n],[1,136,"KanaMode",0,n,0,n,n,n],[0,137,"IntlYen",0,n,0,n,n,n],[1,138,"Convert",0,n,0,n,n,n],[1,139,"NonConvert",0,n,0,n,n,n],[1,140,"Lang1",0,n,0,n,n,n],[1,141,"Lang2",0,n,0,n,n,n],[1,142,"Lang3",0,n,0,n,n,n],[1,143,"Lang4",0,n,0,n,n,n],[1,144,"Lang5",0,n,0,n,n,n],[1,145,"Abort",0,n,0,n,n,n],[1,146,"Props",0,n,0,n,n,n],[1,147,"NumpadParenLeft",0,n,0,n,n,n],[1,148,"NumpadParenRight",0,n,0,n,n,n],[1,149,"NumpadBackspace",0,n,0,n,n,n],[1,150,"NumpadMemoryStore",0,n,0,n,n,n],[1,151,"NumpadMemoryRecall",0,n,0,n,n,n],[1,152,"NumpadMemoryClear",0,n,0,n,n,n],[1,153,"NumpadMemoryAdd",0,n,0,n,n,n],[1,154,"NumpadMemorySubtract",0,n,0,n,n,n],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",n,n],[1,156,"NumpadClearEntry",0,n,0,n,n,n],[1,0,n,5,"Ctrl",17,"VK_CONTROL",n,n],[1,0,n,4,"Shift",16,"VK_SHIFT",n,n],[1,0,n,6,"Alt",18,"VK_MENU",n,n],[1,0,n,57,"Meta",91,"VK_COMMAND",n,n],[1,157,"ControlLeft",5,n,0,"VK_LCONTROL",n,n],[1,158,"ShiftLeft",4,n,0,"VK_LSHIFT",n,n],[1,159,"AltLeft",6,n,0,"VK_LMENU",n,n],[1,160,"MetaLeft",57,n,0,"VK_LWIN",n,n],[1,161,"ControlRight",5,n,0,"VK_RCONTROL",n,n],[1,162,"ShiftRight",4,n,0,"VK_RSHIFT",n,n],[1,163,"AltRight",6,n,0,"VK_RMENU",n,n],[1,164,"MetaRight",57,n,0,"VK_RWIN",n,n],[1,165,"BrightnessUp",0,n,0,n,n,n],[1,166,"BrightnessDown",0,n,0,n,n,n],[1,167,"MediaPlay",0,n,0,n,n,n],[1,168,"MediaRecord",0,n,0,n,n,n],[1,169,"MediaFastForward",0,n,0,n,n,n],[1,170,"MediaRewind",0,n,0,n,n,n],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",n,n],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",n,n],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",n,n],[1,174,"Eject",0,n,0,n,n,n],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",n,n],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",n,n],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",n,n],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",n,n],[1,179,"LaunchApp1",0,n,0,"VK_MEDIA_LAUNCH_APP1",n,n],[1,180,"SelectTask",0,n,0,n,n,n],[1,181,"LaunchScreenSaver",0,n,0,n,n,n],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",n,n],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",n,n],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",n,n],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",n,n],[1,186,"BrowserStop",0,n,0,"VK_BROWSER_STOP",n,n],[1,187,"BrowserRefresh",0,n,0,"VK_BROWSER_REFRESH",n,n],[1,188,"BrowserFavorites",0,n,0,"VK_BROWSER_FAVORITES",n,n],[1,189,"ZoomToggle",0,n,0,n,n,n],[1,190,"MailReply",0,n,0,n,n,n],[1,191,"MailForward",0,n,0,n,n,n],[1,192,"MailSend",0,n,0,n,n,n],[1,0,n,114,"KeyInComposition",229,n,n,n],[1,0,n,116,"ABNT_C2",194,"VK_ABNT_C2",n,n],[1,0,n,96,"OEM_8",223,"VK_OEM_8",n,n],[1,0,n,0,n,0,"VK_KANA",n,n],[1,0,n,0,n,0,"VK_HANGUL",n,n],[1,0,n,0,n,0,"VK_JUNJA",n,n],[1,0,n,0,n,0,"VK_FINAL",n,n],[1,0,n,0,n,0,"VK_HANJA",n,n],[1,0,n,0,n,0,"VK_KANJI",n,n],[1,0,n,0,n,0,"VK_CONVERT",n,n],[1,0,n,0,n,0,"VK_NONCONVERT",n,n],[1,0,n,0,n,0,"VK_ACCEPT",n,n],[1,0,n,0,n,0,"VK_MODECHANGE",n,n],[1,0,n,0,n,0,"VK_SELECT",n,n],[1,0,n,0,n,0,"VK_PRINT",n,n],[1,0,n,0,n,0,"VK_EXECUTE",n,n],[1,0,n,0,n,0,"VK_SNAPSHOT",n,n],[1,0,n,0,n,0,"VK_HELP",n,n],[1,0,n,0,n,0,"VK_APPS",n,n],[1,0,n,0,n,0,"VK_PROCESSKEY",n,n],[1,0,n,0,n,0,"VK_PACKET",n,n],[1,0,n,0,n,0,"VK_DBE_SBCSCHAR",n,n],[1,0,n,0,n,0,"VK_DBE_DBCSCHAR",n,n],[1,0,n,0,n,0,"VK_ATTN",n,n],[1,0,n,0,n,0,"VK_CRSEL",n,n],[1,0,n,0,n,0,"VK_EXSEL",n,n],[1,0,n,0,n,0,"VK_EREOF",n,n],[1,0,n,0,n,0,"VK_PLAY",n,n],[1,0,n,0,n,0,"VK_ZOOM",n,n],[1,0,n,0,n,0,"VK_NONAME",n,n],[1,0,n,0,n,0,"VK_PA1",n,n],[1,0,n,0,n,0,"VK_OEM_CLEAR",n,n]],t=[],i=[];for(const s of e){const[o,r,a,l,c,d,u,h,f]=s;if(i[r]||(i[r]=!0,aLe[a]=r,lLe[a.toLowerCase()]=r,o&&(rz[r]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);wN.define(l,c),cW.define(l,h||c),dW.define(l,f||h||c)}d&&(Kle[d]=l)}})();var Uu;(function(n){function e(a){return wN.keyCodeToStr(a)}n.toString=e;function t(a){return wN.strToKeyCode(a)}n.fromString=t;function i(a){return cW.keyCodeToStr(a)}n.toUserSettingsUS=i;function s(a){return dW.keyCodeToStr(a)}n.toUserSettingsGeneral=s;function o(a){return cW.strToKeyCode(a)||dW.strToKeyCode(a)}n.fromUserSettings=o;function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return wN.keyCodeToStr(a)}n.toElectronAccelerator=r})(Uu||(Uu={}));function pn(n,e){const t=(e&65535)<<16>>>0;return(n|t)>>>0}var UZ={};let Qw;const NF=globalThis.vscode;var bne;if(typeof NF<"u"&&typeof NF.process<"u"){const n=NF.process;Qw={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()}}}else typeof process<"u"&&typeof((bne=process==null?void 0:process.versions)==null?void 0:bne.node)=="string"?Qw={get platform(){return process.platform},get arch(){return process.arch},get env(){return UZ},cwd(){return UZ.VSCODE_CWD||process.cwd()}}:Qw={get platform(){return vs?"win32":ct?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const UI=Qw.cwd,uW=Qw.env,cLe=Qw.platform,dLe=65,uLe=97,hLe=90,fLe=122,ug=46,Bs=47,Wr=92,ef=58,gLe=63;class Gle extends Error{constructor(e,t,i){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const o=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${o} ${s} of type ${t}`;r+=`. Received type ${typeof i}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}function mLe(n,e){if(n===null||typeof n!="object")throw new Gle(e,"Object",n)}function $n(n,e){if(typeof n!="string")throw new Gle(e,"string",n)}const jh=cLe==="win32";function Ut(n){return n===Bs||n===Wr}function hW(n){return n===Bs}function tf(n){return n>=dLe&&n<=hLe||n>=uLe&&n<=fLe}function $I(n,e,t,i){let s="",o=0,r=-1,a=0,l=0;for(let c=0;c<=n.length;++c){if(c<n.length)l=n.charCodeAt(c);else{if(i(l))break;l=Bs}if(i(l)){if(!(r===c-1||a===1))if(a===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==ug||s.charCodeAt(s.length-2)!==ug){if(s.length>2){const d=s.lastIndexOf(t);d===-1?(s="",o=0):(s=s.slice(0,d),o=s.length-1-s.lastIndexOf(t)),r=c,a=0;continue}else if(s.length!==0){s="",o=0,r=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",o=2)}else s.length>0?s+=`${t}${n.slice(r+1,c)}`:s=n.slice(r+1,c),o=c-r-1;r=c,a=0}else l===ug&&a!==-1?++a:a=-1}return s}function pLe(n){return n?`${n[0]==="."?"":"."}${n}`:""}function Yle(n,e){mLe(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${pLe(e.ext)}`;return t?t===e.root?`${t}${i}`:`${t}${n}${i}`:i}const jo={resolve(...n){let e="",t="",i=!1;for(let s=n.length-1;s>=-1;s--){let o;if(s>=0){if(o=n[s],$n(o,`paths[${s}]`),o.length===0)continue}else e.length===0?o=UI():(o=uW[`=${e}`]||UI(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Wr)&&(o=`${e}\\`));const r=o.length;let a=0,l="",c=!1;const d=o.charCodeAt(0);if(r===1)Ut(d)&&(a=1,c=!0);else if(Ut(d))if(c=!0,Ut(o.charCodeAt(1))){let u=2,h=u;for(;u<r&&!Ut(o.charCodeAt(u));)u++;if(u<r&&u!==h){const f=o.slice(h,u);for(h=u;u<r&&Ut(o.charCodeAt(u));)u++;if(u<r&&u!==h){for(h=u;u<r&&!Ut(o.charCodeAt(u));)u++;(u===r||u!==h)&&(l=`\\\\${f}\\${o.slice(h,u)}`,a=u)}}}else a=1;else tf(d)&&o.charCodeAt(1)===ef&&(l=o.slice(0,2),a=2,r>2&&Ut(o.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(i){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,i=c,c&&e.length>0)break}return t=$I(t,!i,"\\",Ut),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){$n(n,"path");const e=n.length;if(e===0)return".";let t=0,i,s=!1;const o=n.charCodeAt(0);if(e===1)return hW(o)?"\\":n;if(Ut(o))if(s=!0,Ut(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Ut(n.charCodeAt(a));)a++;if(a<e&&a!==l){const c=n.slice(l,a);for(l=a;a<e&&Ut(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Ut(n.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${n.slice(l)}\\`;a!==l&&(i=`\\\\${c}\\${n.slice(l,a)}`,t=a)}}}else t=1;else tf(o)&&n.charCodeAt(1)===ef&&(i=n.slice(0,2),t=2,e>2&&Ut(n.charCodeAt(2))&&(s=!0,t=3));let r=t<e?$I(n.slice(t),!s,"\\",Ut):"";return r.length===0&&!s&&(r="."),r.length>0&&Ut(n.charCodeAt(e-1))&&(r+="\\"),i===void 0?s?`\\${r}`:r:s?`${i}\\${r}`:`${i}${r}`},isAbsolute(n){$n(n,"path");const e=n.length;if(e===0)return!1;const t=n.charCodeAt(0);return Ut(t)||e>2&&tf(t)&&n.charCodeAt(1)===ef&&Ut(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let o=0;o<n.length;++o){const r=n[o];$n(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let i=!0,s=0;if(typeof t=="string"&&Ut(t.charCodeAt(0))){++s;const o=t.length;o>1&&Ut(t.charCodeAt(1))&&(++s,o>2&&(Ut(t.charCodeAt(2))?++s:i=!1))}if(i){for(;s<e.length&&Ut(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return jo.normalize(e)},relative(n,e){if($n(n,"from"),$n(e,"to"),n===e)return"";const t=jo.resolve(n),i=jo.resolve(e);if(t===i||(n=t.toLowerCase(),e=i.toLowerCase(),n===e))return"";let s=0;for(;s<n.length&&n.charCodeAt(s)===Wr;)s++;let o=n.length;for(;o-1>s&&n.charCodeAt(o-1)===Wr;)o--;const r=o-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===Wr;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Wr;)l--;const c=l-a,d=r<c?r:c;let u=-1,h=0;for(;h<d;h++){const g=n.charCodeAt(s+h);if(g!==e.charCodeAt(a+h))break;g===Wr&&(u=h)}if(h!==d){if(u===-1)return i}else{if(c>d){if(e.charCodeAt(a+h)===Wr)return i.slice(a+h+1);if(h===2)return i.slice(a+h)}r>d&&(n.charCodeAt(s+h)===Wr?u=h:h===2&&(u=3)),u===-1&&(u=0)}let f="";for(h=s+u+1;h<=o;++h)(h===o||n.charCodeAt(h)===Wr)&&(f+=f.length===0?"..":"\\..");return a+=u,f.length>0?`${f}${i.slice(a,l)}`:(i.charCodeAt(a)===Wr&&++a,i.slice(a,l))},toNamespacedPath(n){if(typeof n!="string"||n.length===0)return n;const e=jo.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===Wr){if(e.charCodeAt(1)===Wr){const t=e.charCodeAt(2);if(t!==gLe&&t!==ug)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(tf(e.charCodeAt(0))&&e.charCodeAt(1)===ef&&e.charCodeAt(2)===Wr)return`\\\\?\\${e}`;return n},dirname(n){$n(n,"path");const e=n.length;if(e===0)return".";let t=-1,i=0;const s=n.charCodeAt(0);if(e===1)return Ut(s)?n:".";if(Ut(s)){if(t=i=1,Ut(n.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Ut(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Ut(n.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Ut(n.charCodeAt(a));)a++;if(a===e)return n;a!==l&&(t=i=a+1)}}}}else tf(s)&&n.charCodeAt(1)===ef&&(t=e>2&&Ut(n.charCodeAt(2))?3:2,i=t);let o=-1,r=!0;for(let a=e-1;a>=i;--a)if(Ut(n.charCodeAt(a))){if(!r){o=a;break}}else r=!1;if(o===-1){if(t===-1)return".";o=t}return n.slice(0,o)},basename(n,e){e!==void 0&&$n(e,"suffix"),$n(n,"path");let t=0,i=-1,s=!0,o;if(n.length>=2&&tf(n.charCodeAt(0))&&n.charCodeAt(1)===ef&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let r=e.length-1,a=-1;for(o=n.length-1;o>=t;--o){const l=n.charCodeAt(o);if(Ut(l)){if(!s){t=o+1;break}}else a===-1&&(s=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=o):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(o=n.length-1;o>=t;--o)if(Ut(n.charCodeAt(o))){if(!s){t=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":n.slice(t,i)},extname(n){$n(n,"path");let e=0,t=-1,i=0,s=-1,o=!0,r=0;n.length>=2&&n.charCodeAt(1)===ef&&tf(n.charCodeAt(0))&&(e=i=2);for(let a=n.length-1;a>=e;--a){const l=n.charCodeAt(a);if(Ut(l)){if(!o){i=a+1;break}continue}s===-1&&(o=!1,s=a+1),l===ug?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||s===-1||r===0||r===1&&t===s-1&&t===i+1?"":n.slice(t,s)},format:Yle.bind(null,"\\"),parse(n){$n(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.length;let i=0,s=n.charCodeAt(0);if(t===1)return Ut(s)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(Ut(s)){if(i=1,Ut(n.charCodeAt(1))){let u=2,h=u;for(;u<t&&!Ut(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&Ut(n.charCodeAt(u));)u++;if(u<t&&u!==h){for(h=u;u<t&&!Ut(n.charCodeAt(u));)u++;u===t?i=u:u!==h&&(i=u+1)}}}}else if(tf(s)&&n.charCodeAt(1)===ef){if(t<=2)return e.root=e.dir=n,e;if(i=2,Ut(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;i=3}}i>0&&(e.root=n.slice(0,i));let o=-1,r=i,a=-1,l=!0,c=n.length-1,d=0;for(;c>=i;--c){if(s=n.charCodeAt(c),Ut(s)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===ug?o===-1?o=c:d!==1&&(d=1):o!==-1&&(d=-1)}return a!==-1&&(o===-1||d===0||d===1&&o===a-1&&o===r+1?e.base=e.name=n.slice(r,a):(e.name=n.slice(r,o),e.base=n.slice(r,a),e.ext=n.slice(o,a))),r>0&&r!==i?e.dir=n.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},_Le=(()=>{if(jh){const n=/\\/g;return()=>{const e=UI().replace(n,"/");return e.slice(e.indexOf("/"))}}return()=>UI()})(),dn={resolve(...n){let e="",t=!1;for(let i=n.length-1;i>=-1&&!t;i--){const s=i>=0?n[i]:_Le();$n(s,`paths[${i}]`),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===Bs)}return e=$I(e,!t,"/",hW),t?`/${e}`:e.length>0?e:"."},normalize(n){if($n(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===Bs,t=n.charCodeAt(n.length-1)===Bs;return n=$I(n,!e,"/",hW),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return $n(n,"path"),n.length>0&&n.charCodeAt(0)===Bs},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];$n(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":dn.normalize(e)},relative(n,e){if($n(n,"from"),$n(e,"to"),n===e||(n=dn.resolve(n),e=dn.resolve(e),n===e))return"";const t=1,i=n.length,s=i-t,o=1,r=e.length-o,a=s<r?s:r;let l=-1,c=0;for(;c<a;c++){const u=n.charCodeAt(t+c);if(u!==e.charCodeAt(o+c))break;u===Bs&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(o+c)===Bs)return e.slice(o+c+1);if(c===0)return e.slice(o+c)}else s>a&&(n.charCodeAt(t+c)===Bs?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=i;++c)(c===i||n.charCodeAt(c)===Bs)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(n){return n},dirname(n){if($n(n,"path"),n.length===0)return".";const e=n.charCodeAt(0)===Bs;let t=-1,i=!0;for(let s=n.length-1;s>=1;--s)if(n.charCodeAt(s)===Bs){if(!i){t=s;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&$n(e,"ext"),$n(n,"path");let t=0,i=-1,s=!0,o;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let r=e.length-1,a=-1;for(o=n.length-1;o>=0;--o){const l=n.charCodeAt(o);if(l===Bs){if(!s){t=o+1;break}}else a===-1&&(s=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(i=o):(r=-1,i=a))}return t===i?i=a:i===-1&&(i=n.length),n.slice(t,i)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===Bs){if(!s){t=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":n.slice(t,i)},extname(n){$n(n,"path");let e=-1,t=0,i=-1,s=!0,o=0;for(let r=n.length-1;r>=0;--r){const a=n.charCodeAt(r);if(a===Bs){if(!s){t=r+1;break}continue}i===-1&&(s=!1,i=r+1),a===ug?e===-1?e=r:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||i===-1||o===0||o===1&&e===i-1&&e===t+1?"":n.slice(e,i)},format:Yle.bind(null,"/"),parse(n){$n(n,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;const t=n.charCodeAt(0)===Bs;let i;t?(e.root="/",i=1):i=0;let s=-1,o=0,r=-1,a=!0,l=n.length-1,c=0;for(;l>=i;--l){const d=n.charCodeAt(l);if(d===Bs){if(!a){o=l+1;break}continue}r===-1&&(a=!1,r=l+1),d===ug?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(r!==-1){const d=o===0&&t?1:o;s===-1||c===0||c===1&&s===r-1&&s===o+1?e.base=e.name=n.slice(d,r):(e.name=n.slice(d,s),e.base=n.slice(d,r),e.ext=n.slice(s,r))}return o>0?e.dir=n.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};dn.win32=jo.win32=jo;dn.posix=jo.posix=dn;const Zle=jh?jo.normalize:dn.normalize,bLe=jh?jo.join:dn.join,vLe=jh?jo.resolve:dn.resolve,wLe=jh?jo.relative:dn.relative,Qle=jh?jo.dirname:dn.dirname,hg=jh?jo.basename:dn.basename,CLe=jh?jo.extname:dn.extname,kc=jh?jo.sep:dn.sep,yLe=/^\w[\w\d+.-]*$/,SLe=/^\//,xLe=/^\/\//;function kLe(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!yLe.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!SLe.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(xLe.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function LLe(n,e){return!n&&!e?"file":n}function DLe(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==fc&&(e=fc+e):e=fc;break}return e}const ln="",fc="/",ELe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Le{static isUri(e){return e instanceof Le?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,s,o,r=!1){typeof e=="object"?(this.scheme=e.scheme||ln,this.authority=e.authority||ln,this.path=e.path||ln,this.query=e.query||ln,this.fragment=e.fragment||ln):(this.scheme=LLe(e,r),this.authority=t||ln,this.path=DLe(this.scheme,i||ln),this.query=s||ln,this.fragment=o||ln,kLe(this,r))}get fsPath(){return qI(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:s,query:o,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=ln),i===void 0?i=this.authority:i===null&&(i=ln),s===void 0?s=this.path:s===null&&(s=ln),o===void 0?o=this.query:o===null&&(o=ln),r===void 0?r=this.fragment:r===null&&(r=ln),t===this.scheme&&i===this.authority&&s===this.path&&o===this.query&&r===this.fragment?this:new cv(t,i,s,o,r)}static parse(e,t=!1){const i=ELe.exec(e);return i?new cv(i[2]||ln,zD(i[4]||ln),zD(i[5]||ln),zD(i[7]||ln),zD(i[9]||ln),t):new cv(ln,ln,ln,ln,ln)}static file(e){let t=ln;if(vs&&(e=e.replace(/\\/g,fc)),e[0]===fc&&e[1]===fc){const i=e.indexOf(fc,2);i===-1?(t=e.substring(2),e=fc):(t=e.substring(2,i),e=e.substring(i)||fc)}return new cv("file",t,e,ln,ln)}static from(e,t){return new cv(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return vs&&e.scheme==="file"?i=Le.file(jo.join(qI(e,!0),...t)).path:i=dn.join(e.path,...t),e.with({path:i})}toString(e=!1){return fW(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Le)return e;{const t=new cv(e);return t._formatted=e.external??null,t._fsPath=e._sep===Xle?e.fsPath??null:null,t}}else return e}}const Xle=vs?1:void 0;let cv=class extends Le{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=qI(this,!1)),this._fsPath}toString(e=!1){return e?fW(this,!0):(this._formatted||(this._formatted=fW(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Xle),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const Jle={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function $Z(n,e,t){let i,s=-1;for(let o=0;o<n.length;o++){const r=n.charCodeAt(o);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47||t&&r===91||t&&r===93||t&&r===58)s!==-1&&(i+=encodeURIComponent(n.substring(s,o)),s=-1),i!==void 0&&(i+=n.charAt(o));else{i===void 0&&(i=n.substr(0,o));const a=Jle[r];a!==void 0?(s!==-1&&(i+=encodeURIComponent(n.substring(s,o)),s=-1),i+=a):s===-1&&(s=o)}}return s!==-1&&(i+=encodeURIComponent(n.substring(s))),i!==void 0?i:n}function NLe(n){let e;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i===35||i===63?(e===void 0&&(e=n.substr(0,t)),e+=Jle[i]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function qI(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,vs&&(t=t.replace(/\//g,"\\")),t}function fW(n,e){const t=e?NLe:$Z;let i="",{scheme:s,authority:o,path:r,query:a,fragment:l}=n;if(s&&(i+=s,i+=":"),(o||s==="file")&&(i+=fc,i+=fc),o){let c=o.indexOf("@");if(c!==-1){const d=o.substr(0,c);o=o.substr(c+1),c=d.lastIndexOf(":"),c===-1?i+=t(d,!1,!1):(i+=t(d.substr(0,c),!1,!1),i+=":",i+=t(d.substr(c+1),!1,!0)),i+="@"}o=o.toLowerCase(),c=o.lastIndexOf(":"),c===-1?i+=t(o,!1,!0):(i+=t(o.substr(0,c),!1,!0),i+=o.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const c=r.charCodeAt(1);c>=65&&c<=90&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const c=r.charCodeAt(0);c>=65&&c<=90&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}i+=t(r,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),l&&(i+="#",i+=e?l:$Z(l,!1,!1)),i}function ece(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+ece(n.substr(3)):n}}const qZ=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function zD(n){return n.match(qZ)?n.replace(qZ,e=>ece(e)):n}let H=class zm{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new zm(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return zm.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return zm.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return zm.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,s=t.lineNumber|0;if(i===s){const o=e.column|0,r=t.column|0;return o-r}return i-s}clone(){return new zm(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new zm(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},E=class Jn{constructor(e,t,i,s){e>i||e===i&&t>s?(this.startLineNumber=i,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=s)}isEmpty(){return Jn.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Jn.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Jn.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Jn.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Jn.plusRange(this,e)}static plusRange(e,t){let i,s,o,r;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,r=e.endColumn),new Jn(i,s,o,r)}intersectRanges(e){return Jn.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return i<a?(i=a,s=l):i===a&&(s=Math.max(s,l)),o>c?(o=c,r=d):o===c&&(r=Math.min(r,d)),i>o||i===o&&s>r?null:new Jn(i,s,o,r)}equalsRange(e){return Jn.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Jn.getEndPosition(this)}static getEndPosition(e){return new H(e.endLineNumber,e.endColumn)}getStartPosition(){return Jn.getStartPosition(this)}static getStartPosition(e){return new H(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Jn(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Jn(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Jn.collapseToStart(this)}static collapseToStart(e){return new Jn(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Jn.collapseToEnd(this)}static collapseToEnd(e){return new Jn(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Jn(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Jn(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Jn(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,r=t.startLineNumber|0;if(o===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const u=e.endColumn|0,h=t.endColumn|0;return u-h}return c-d}return a-l}return o-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},Ce=class al extends E{constructor(e,t,i,s){super(e,t,i,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return al.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new al(this.startLineNumber,this.startColumn,e,t):new al(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new H(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new H(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new al(e,t,this.endLineNumber,this.endColumn):new al(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new al(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new al(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new al(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new al(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,s,o){return o===0?new al(e,t,i,s):new al(i,s,e,t)}};const gW=Object.create(null);function L(n,e){if(Vo(e)){const t=gW[e];if(t===void 0)throw new Error(`${n} references an unknown codicon: ${e}`);e=t}return gW[n]=e,{id:n}}function tce(){return gW}const ILe={add:L("add",6e4),plus:L("plus",6e4),gistNew:L("gist-new",6e4),repoCreate:L("repo-create",6e4),lightbulb:L("lightbulb",60001),lightBulb:L("light-bulb",60001),repo:L("repo",60002),repoDelete:L("repo-delete",60002),gistFork:L("gist-fork",60003),repoForked:L("repo-forked",60003),gitPullRequest:L("git-pull-request",60004),gitPullRequestAbandoned:L("git-pull-request-abandoned",60004),recordKeys:L("record-keys",60005),keyboard:L("keyboard",60005),tag:L("tag",60006),gitPullRequestLabel:L("git-pull-request-label",60006),tagAdd:L("tag-add",60006),tagRemove:L("tag-remove",60006),person:L("person",60007),personFollow:L("person-follow",60007),personOutline:L("person-outline",60007),personFilled:L("person-filled",60007),gitBranch:L("git-branch",60008),gitBranchCreate:L("git-branch-create",60008),gitBranchDelete:L("git-branch-delete",60008),sourceControl:L("source-control",60008),mirror:L("mirror",60009),mirrorPublic:L("mirror-public",60009),star:L("star",60010),starAdd:L("star-add",60010),starDelete:L("star-delete",60010),starEmpty:L("star-empty",60010),comment:L("comment",60011),commentAdd:L("comment-add",60011),alert:L("alert",60012),warning:L("warning",60012),search:L("search",60013),searchSave:L("search-save",60013),logOut:L("log-out",60014),signOut:L("sign-out",60014),logIn:L("log-in",60015),signIn:L("sign-in",60015),eye:L("eye",60016),eyeUnwatch:L("eye-unwatch",60016),eyeWatch:L("eye-watch",60016),circleFilled:L("circle-filled",60017),primitiveDot:L("primitive-dot",60017),closeDirty:L("close-dirty",60017),debugBreakpoint:L("debug-breakpoint",60017),debugBreakpointDisabled:L("debug-breakpoint-disabled",60017),debugHint:L("debug-hint",60017),terminalDecorationSuccess:L("terminal-decoration-success",60017),primitiveSquare:L("primitive-square",60018),edit:L("edit",60019),pencil:L("pencil",60019),info:L("info",60020),issueOpened:L("issue-opened",60020),gistPrivate:L("gist-private",60021),gitForkPrivate:L("git-fork-private",60021),lock:L("lock",60021),mirrorPrivate:L("mirror-private",60021),close:L("close",60022),removeClose:L("remove-close",60022),x:L("x",60022),repoSync:L("repo-sync",60023),sync:L("sync",60023),clone:L("clone",60024),desktopDownload:L("desktop-download",60024),beaker:L("beaker",60025),microscope:L("microscope",60025),vm:L("vm",60026),deviceDesktop:L("device-desktop",60026),file:L("file",60027),fileText:L("file-text",60027),more:L("more",60028),ellipsis:L("ellipsis",60028),kebabHorizontal:L("kebab-horizontal",60028),mailReply:L("mail-reply",60029),reply:L("reply",60029),organization:L("organization",60030),organizationFilled:L("organization-filled",60030),organizationOutline:L("organization-outline",60030),newFile:L("new-file",60031),fileAdd:L("file-add",60031),newFolder:L("new-folder",60032),fileDirectoryCreate:L("file-directory-create",60032),trash:L("trash",60033),trashcan:L("trashcan",60033),history:L("history",60034),clock:L("clock",60034),folder:L("folder",60035),fileDirectory:L("file-directory",60035),symbolFolder:L("symbol-folder",60035),logoGithub:L("logo-github",60036),markGithub:L("mark-github",60036),github:L("github",60036),terminal:L("terminal",60037),console:L("console",60037),repl:L("repl",60037),zap:L("zap",60038),symbolEvent:L("symbol-event",60038),error:L("error",60039),stop:L("stop",60039),variable:L("variable",60040),symbolVariable:L("symbol-variable",60040),array:L("array",60042),symbolArray:L("symbol-array",60042),symbolModule:L("symbol-module",60043),symbolPackage:L("symbol-package",60043),symbolNamespace:L("symbol-namespace",60043),symbolObject:L("symbol-object",60043),symbolMethod:L("symbol-method",60044),symbolFunction:L("symbol-function",60044),symbolConstructor:L("symbol-constructor",60044),symbolBoolean:L("symbol-boolean",60047),symbolNull:L("symbol-null",60047),symbolNumeric:L("symbol-numeric",60048),symbolNumber:L("symbol-number",60048),symbolStructure:L("symbol-structure",60049),symbolStruct:L("symbol-struct",60049),symbolParameter:L("symbol-parameter",60050),symbolTypeParameter:L("symbol-type-parameter",60050),symbolKey:L("symbol-key",60051),symbolText:L("symbol-text",60051),symbolReference:L("symbol-reference",60052),goToFile:L("go-to-file",60052),symbolEnum:L("symbol-enum",60053),symbolValue:L("symbol-value",60053),symbolRuler:L("symbol-ruler",60054),symbolUnit:L("symbol-unit",60054),activateBreakpoints:L("activate-breakpoints",60055),archive:L("archive",60056),arrowBoth:L("arrow-both",60057),arrowDown:L("arrow-down",60058),arrowLeft:L("arrow-left",60059),arrowRight:L("arrow-right",60060),arrowSmallDown:L("arrow-small-down",60061),arrowSmallLeft:L("arrow-small-left",60062),arrowSmallRight:L("arrow-small-right",60063),arrowSmallUp:L("arrow-small-up",60064),arrowUp:L("arrow-up",60065),bell:L("bell",60066),bold:L("bold",60067),book:L("book",60068),bookmark:L("bookmark",60069),debugBreakpointConditionalUnverified:L("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:L("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:L("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:L("debug-breakpoint-data-unverified",60072),debugBreakpointData:L("debug-breakpoint-data",60073),debugBreakpointDataDisabled:L("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:L("debug-breakpoint-log-unverified",60074),debugBreakpointLog:L("debug-breakpoint-log",60075),debugBreakpointLogDisabled:L("debug-breakpoint-log-disabled",60075),briefcase:L("briefcase",60076),broadcast:L("broadcast",60077),browser:L("browser",60078),bug:L("bug",60079),calendar:L("calendar",60080),caseSensitive:L("case-sensitive",60081),check:L("check",60082),checklist:L("checklist",60083),chevronDown:L("chevron-down",60084),chevronLeft:L("chevron-left",60085),chevronRight:L("chevron-right",60086),chevronUp:L("chevron-up",60087),chromeClose:L("chrome-close",60088),chromeMaximize:L("chrome-maximize",60089),chromeMinimize:L("chrome-minimize",60090),chromeRestore:L("chrome-restore",60091),circleOutline:L("circle-outline",60092),circle:L("circle",60092),debugBreakpointUnverified:L("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:L("terminal-decoration-incomplete",60092),circleSlash:L("circle-slash",60093),circuitBoard:L("circuit-board",60094),clearAll:L("clear-all",60095),clippy:L("clippy",60096),closeAll:L("close-all",60097),cloudDownload:L("cloud-download",60098),cloudUpload:L("cloud-upload",60099),code:L("code",60100),collapseAll:L("collapse-all",60101),colorMode:L("color-mode",60102),commentDiscussion:L("comment-discussion",60103),creditCard:L("credit-card",60105),dash:L("dash",60108),dashboard:L("dashboard",60109),database:L("database",60110),debugContinue:L("debug-continue",60111),debugDisconnect:L("debug-disconnect",60112),debugPause:L("debug-pause",60113),debugRestart:L("debug-restart",60114),debugStart:L("debug-start",60115),debugStepInto:L("debug-step-into",60116),debugStepOut:L("debug-step-out",60117),debugStepOver:L("debug-step-over",60118),debugStop:L("debug-stop",60119),debug:L("debug",60120),deviceCameraVideo:L("device-camera-video",60121),deviceCamera:L("device-camera",60122),deviceMobile:L("device-mobile",60123),diffAdded:L("diff-added",60124),diffIgnored:L("diff-ignored",60125),diffModified:L("diff-modified",60126),diffRemoved:L("diff-removed",60127),diffRenamed:L("diff-renamed",60128),diff:L("diff",60129),diffSidebyside:L("diff-sidebyside",60129),discard:L("discard",60130),editorLayout:L("editor-layout",60131),emptyWindow:L("empty-window",60132),exclude:L("exclude",60133),extensions:L("extensions",60134),eyeClosed:L("eye-closed",60135),fileBinary:L("file-binary",60136),fileCode:L("file-code",60137),fileMedia:L("file-media",60138),filePdf:L("file-pdf",60139),fileSubmodule:L("file-submodule",60140),fileSymlinkDirectory:L("file-symlink-directory",60141),fileSymlinkFile:L("file-symlink-file",60142),fileZip:L("file-zip",60143),files:L("files",60144),filter:L("filter",60145),flame:L("flame",60146),foldDown:L("fold-down",60147),foldUp:L("fold-up",60148),fold:L("fold",60149),folderActive:L("folder-active",60150),folderOpened:L("folder-opened",60151),gear:L("gear",60152),gift:L("gift",60153),gistSecret:L("gist-secret",60154),gist:L("gist",60155),gitCommit:L("git-commit",60156),gitCompare:L("git-compare",60157),compareChanges:L("compare-changes",60157),gitMerge:L("git-merge",60158),githubAction:L("github-action",60159),githubAlt:L("github-alt",60160),globe:L("globe",60161),grabber:L("grabber",60162),graph:L("graph",60163),gripper:L("gripper",60164),heart:L("heart",60165),home:L("home",60166),horizontalRule:L("horizontal-rule",60167),hubot:L("hubot",60168),inbox:L("inbox",60169),issueReopened:L("issue-reopened",60171),issues:L("issues",60172),italic:L("italic",60173),jersey:L("jersey",60174),json:L("json",60175),kebabVertical:L("kebab-vertical",60176),key:L("key",60177),law:L("law",60178),lightbulbAutofix:L("lightbulb-autofix",60179),linkExternal:L("link-external",60180),link:L("link",60181),listOrdered:L("list-ordered",60182),listUnordered:L("list-unordered",60183),liveShare:L("live-share",60184),loading:L("loading",60185),location:L("location",60186),mailRead:L("mail-read",60187),mail:L("mail",60188),markdown:L("markdown",60189),megaphone:L("megaphone",60190),mention:L("mention",60191),milestone:L("milestone",60192),gitPullRequestMilestone:L("git-pull-request-milestone",60192),mortarBoard:L("mortar-board",60193),move:L("move",60194),multipleWindows:L("multiple-windows",60195),mute:L("mute",60196),noNewline:L("no-newline",60197),note:L("note",60198),octoface:L("octoface",60199),openPreview:L("open-preview",60200),package:L("package",60201),paintcan:L("paintcan",60202),pin:L("pin",60203),play:L("play",60204),run:L("run",60204),plug:L("plug",60205),preserveCase:L("preserve-case",60206),preview:L("preview",60207),project:L("project",60208),pulse:L("pulse",60209),question:L("question",60210),quote:L("quote",60211),radioTower:L("radio-tower",60212),reactions:L("reactions",60213),references:L("references",60214),refresh:L("refresh",60215),regex:L("regex",60216),remoteExplorer:L("remote-explorer",60217),remote:L("remote",60218),remove:L("remove",60219),replaceAll:L("replace-all",60220),replace:L("replace",60221),repoClone:L("repo-clone",60222),repoForcePush:L("repo-force-push",60223),repoPull:L("repo-pull",60224),repoPush:L("repo-push",60225),report:L("report",60226),requestChanges:L("request-changes",60227),rocket:L("rocket",60228),rootFolderOpened:L("root-folder-opened",60229),rootFolder:L("root-folder",60230),rss:L("rss",60231),ruby:L("ruby",60232),saveAll:L("save-all",60233),saveAs:L("save-as",60234),save:L("save",60235),screenFull:L("screen-full",60236),screenNormal:L("screen-normal",60237),searchStop:L("search-stop",60238),server:L("server",60240),settingsGear:L("settings-gear",60241),settings:L("settings",60242),shield:L("shield",60243),smiley:L("smiley",60244),sortPrecedence:L("sort-precedence",60245),splitHorizontal:L("split-horizontal",60246),splitVertical:L("split-vertical",60247),squirrel:L("squirrel",60248),starFull:L("star-full",60249),starHalf:L("star-half",60250),symbolClass:L("symbol-class",60251),symbolColor:L("symbol-color",60252),symbolConstant:L("symbol-constant",60253),symbolEnumMember:L("symbol-enum-member",60254),symbolField:L("symbol-field",60255),symbolFile:L("symbol-file",60256),symbolInterface:L("symbol-interface",60257),symbolKeyword:L("symbol-keyword",60258),symbolMisc:L("symbol-misc",60259),symbolOperator:L("symbol-operator",60260),symbolProperty:L("symbol-property",60261),wrench:L("wrench",60261),wrenchSubaction:L("wrench-subaction",60261),symbolSnippet:L("symbol-snippet",60262),tasklist:L("tasklist",60263),telescope:L("telescope",60264),textSize:L("text-size",60265),threeBars:L("three-bars",60266),thumbsdown:L("thumbsdown",60267),thumbsup:L("thumbsup",60268),tools:L("tools",60269),triangleDown:L("triangle-down",60270),triangleLeft:L("triangle-left",60271),triangleRight:L("triangle-right",60272),triangleUp:L("triangle-up",60273),twitter:L("twitter",60274),unfold:L("unfold",60275),unlock:L("unlock",60276),unmute:L("unmute",60277),unverified:L("unverified",60278),verified:L("verified",60279),versions:L("versions",60280),vmActive:L("vm-active",60281),vmOutline:L("vm-outline",60282),vmRunning:L("vm-running",60283),watch:L("watch",60284),whitespace:L("whitespace",60285),wholeWord:L("whole-word",60286),window:L("window",60287),wordWrap:L("word-wrap",60288),zoomIn:L("zoom-in",60289),zoomOut:L("zoom-out",60290),listFilter:L("list-filter",60291),listFlat:L("list-flat",60292),listSelection:L("list-selection",60293),selection:L("selection",60293),listTree:L("list-tree",60294),debugBreakpointFunctionUnverified:L("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:L("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:L("debug-breakpoint-function-disabled",60296),debugStackframeActive:L("debug-stackframe-active",60297),circleSmallFilled:L("circle-small-filled",60298),debugStackframeDot:L("debug-stackframe-dot",60298),terminalDecorationMark:L("terminal-decoration-mark",60298),debugStackframe:L("debug-stackframe",60299),debugStackframeFocused:L("debug-stackframe-focused",60299),debugBreakpointUnsupported:L("debug-breakpoint-unsupported",60300),symbolString:L("symbol-string",60301),debugReverseContinue:L("debug-reverse-continue",60302),debugStepBack:L("debug-step-back",60303),debugRestartFrame:L("debug-restart-frame",60304),debugAlt:L("debug-alt",60305),callIncoming:L("call-incoming",60306),callOutgoing:L("call-outgoing",60307),menu:L("menu",60308),expandAll:L("expand-all",60309),feedback:L("feedback",60310),gitPullRequestReviewer:L("git-pull-request-reviewer",60310),groupByRefType:L("group-by-ref-type",60311),ungroupByRefType:L("ungroup-by-ref-type",60312),account:L("account",60313),gitPullRequestAssignee:L("git-pull-request-assignee",60313),bellDot:L("bell-dot",60314),debugConsole:L("debug-console",60315),library:L("library",60316),output:L("output",60317),runAll:L("run-all",60318),syncIgnored:L("sync-ignored",60319),pinned:L("pinned",60320),githubInverted:L("github-inverted",60321),serverProcess:L("server-process",60322),serverEnvironment:L("server-environment",60323),pass:L("pass",60324),issueClosed:L("issue-closed",60324),stopCircle:L("stop-circle",60325),playCircle:L("play-circle",60326),record:L("record",60327),debugAltSmall:L("debug-alt-small",60328),vmConnect:L("vm-connect",60329),cloud:L("cloud",60330),merge:L("merge",60331),export:L("export",60332),graphLeft:L("graph-left",60333),magnet:L("magnet",60334),notebook:L("notebook",60335),redo:L("redo",60336),checkAll:L("check-all",60337),pinnedDirty:L("pinned-dirty",60338),passFilled:L("pass-filled",60339),circleLargeFilled:L("circle-large-filled",60340),circleLarge:L("circle-large",60341),circleLargeOutline:L("circle-large-outline",60341),combine:L("combine",60342),gather:L("gather",60342),table:L("table",60343),variableGroup:L("variable-group",60344),typeHierarchy:L("type-hierarchy",60345),typeHierarchySub:L("type-hierarchy-sub",60346),typeHierarchySuper:L("type-hierarchy-super",60347),gitPullRequestCreate:L("git-pull-request-create",60348),runAbove:L("run-above",60349),runBelow:L("run-below",60350),notebookTemplate:L("notebook-template",60351),debugRerun:L("debug-rerun",60352),workspaceTrusted:L("workspace-trusted",60353),workspaceUntrusted:L("workspace-untrusted",60354),workspaceUnknown:L("workspace-unknown",60355),terminalCmd:L("terminal-cmd",60356),terminalDebian:L("terminal-debian",60357),terminalLinux:L("terminal-linux",60358),terminalPowershell:L("terminal-powershell",60359),terminalTmux:L("terminal-tmux",60360),terminalUbuntu:L("terminal-ubuntu",60361),terminalBash:L("terminal-bash",60362),arrowSwap:L("arrow-swap",60363),copy:L("copy",60364),personAdd:L("person-add",60365),filterFilled:L("filter-filled",60366),wand:L("wand",60367),debugLineByLine:L("debug-line-by-line",60368),inspect:L("inspect",60369),layers:L("layers",60370),layersDot:L("layers-dot",60371),layersActive:L("layers-active",60372),compass:L("compass",60373),compassDot:L("compass-dot",60374),compassActive:L("compass-active",60375),azure:L("azure",60376),issueDraft:L("issue-draft",60377),gitPullRequestClosed:L("git-pull-request-closed",60378),gitPullRequestDraft:L("git-pull-request-draft",60379),debugAll:L("debug-all",60380),debugCoverage:L("debug-coverage",60381),runErrors:L("run-errors",60382),folderLibrary:L("folder-library",60383),debugContinueSmall:L("debug-continue-small",60384),beakerStop:L("beaker-stop",60385),graphLine:L("graph-line",60386),graphScatter:L("graph-scatter",60387),pieChart:L("pie-chart",60388),bracket:L("bracket",60175),bracketDot:L("bracket-dot",60389),bracketError:L("bracket-error",60390),lockSmall:L("lock-small",60391),azureDevops:L("azure-devops",60392),verifiedFilled:L("verified-filled",60393),newline:L("newline",60394),layout:L("layout",60395),layoutActivitybarLeft:L("layout-activitybar-left",60396),layoutActivitybarRight:L("layout-activitybar-right",60397),layoutPanelLeft:L("layout-panel-left",60398),layoutPanelCenter:L("layout-panel-center",60399),layoutPanelJustify:L("layout-panel-justify",60400),layoutPanelRight:L("layout-panel-right",60401),layoutPanel:L("layout-panel",60402),layoutSidebarLeft:L("layout-sidebar-left",60403),layoutSidebarRight:L("layout-sidebar-right",60404),layoutStatusbar:L("layout-statusbar",60405),layoutMenubar:L("layout-menubar",60406),layoutCentered:L("layout-centered",60407),target:L("target",60408),indent:L("indent",60409),recordSmall:L("record-small",60410),errorSmall:L("error-small",60411),terminalDecorationError:L("terminal-decoration-error",60411),arrowCircleDown:L("arrow-circle-down",60412),arrowCircleLeft:L("arrow-circle-left",60413),arrowCircleRight:L("arrow-circle-right",60414),arrowCircleUp:L("arrow-circle-up",60415),layoutSidebarRightOff:L("layout-sidebar-right-off",60416),layoutPanelOff:L("layout-panel-off",60417),layoutSidebarLeftOff:L("layout-sidebar-left-off",60418),blank:L("blank",60419),heartFilled:L("heart-filled",60420),map:L("map",60421),mapHorizontal:L("map-horizontal",60421),foldHorizontal:L("fold-horizontal",60421),mapFilled:L("map-filled",60422),mapHorizontalFilled:L("map-horizontal-filled",60422),foldHorizontalFilled:L("fold-horizontal-filled",60422),circleSmall:L("circle-small",60423),bellSlash:L("bell-slash",60424),bellSlashDot:L("bell-slash-dot",60425),commentUnresolved:L("comment-unresolved",60426),gitPullRequestGoToChanges:L("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:L("git-pull-request-new-changes",60428),searchFuzzy:L("search-fuzzy",60429),commentDraft:L("comment-draft",60430),send:L("send",60431),sparkle:L("sparkle",60432),insert:L("insert",60433),mic:L("mic",60434),thumbsdownFilled:L("thumbsdown-filled",60435),thumbsupFilled:L("thumbsup-filled",60436),coffee:L("coffee",60437),snake:L("snake",60438),game:L("game",60439),vr:L("vr",60440),chip:L("chip",60441),piano:L("piano",60442),music:L("music",60443),micFilled:L("mic-filled",60444),repoFetch:L("repo-fetch",60445),copilot:L("copilot",60446),lightbulbSparkle:L("lightbulb-sparkle",60447),robot:L("robot",60448),sparkleFilled:L("sparkle-filled",60449),diffSingle:L("diff-single",60450),diffMultiple:L("diff-multiple",60451),surroundWith:L("surround-with",60452),share:L("share",60453),gitStash:L("git-stash",60454),gitStashApply:L("git-stash-apply",60455),gitStashPop:L("git-stash-pop",60456),vscode:L("vscode",60457),vscodeInsiders:L("vscode-insiders",60458),codeOss:L("code-oss",60459),runCoverage:L("run-coverage",60460),runAllCoverage:L("run-all-coverage",60461),coverage:L("coverage",60462),githubProject:L("github-project",60463),mapVertical:L("map-vertical",60464),foldVertical:L("fold-vertical",60464),mapVerticalFilled:L("map-vertical-filled",60465),foldVerticalFilled:L("fold-vertical-filled",60465),goToSearch:L("go-to-search",60466),percentage:L("percentage",60467),sortPercentage:L("sort-percentage",60467),attach:L("attach",60468)},TLe={dialogError:L("dialog-error","error"),dialogWarning:L("dialog-warning","warning"),dialogInfo:L("dialog-info","info"),dialogClose:L("dialog-close","close"),treeItemExpanded:L("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:L("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:L("tree-filter-on-type-off","list-selection"),treeFilterClear:L("tree-filter-clear","close"),treeItemLoading:L("tree-item-loading","loading"),menuSelection:L("menu-selection","check"),menuSubmenu:L("menu-submenu","chevron-right"),menuBarMore:L("menubar-more","more"),scrollbarButtonLeft:L("scrollbar-button-left","triangle-left"),scrollbarButtonRight:L("scrollbar-button-right","triangle-right"),scrollbarButtonUp:L("scrollbar-button-up","triangle-up"),scrollbarButtonDown:L("scrollbar-button-down","triangle-down"),toolBarMore:L("toolbar-more","more"),quickInputBack:L("quick-input-back","arrow-left"),dropDownButton:L("drop-down-button",60084),symbolCustomColor:L("symbol-customcolor",60252),exportIcon:L("export",60332),workspaceUnspecified:L("workspace-unspecified",60355),newLine:L("newline",60394),thumbsDownFilled:L("thumbsdown-filled",60435),thumbsUpFilled:L("thumbsup-filled",60436),gitFetch:L("git-fetch",60445),lightbulbSparkleAutofix:L("lightbulb-sparkle-autofix",60447),debugBreakpointPending:L("debug-breakpoint-pending",60377)},ae={...ILe,...TLe};let ice=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),xe(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var s;(s=this._factories.get(e))==null||s.dispose();const i=new PLe(this,e,t);return this._factories.set(e,i),xe(()=>{const o=this._factories.get(e);!o||o!==i||(this._factories.delete(e),o.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class PLe extends U{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let Ax=class{constructor(e,t,i){this.offset=e,this.type=t,this.language=i,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class az{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class tA{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var ur;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(ur||(ur={}));var Ox;(function(n){const e=new Map;e.set(0,ae.symbolMethod),e.set(1,ae.symbolFunction),e.set(2,ae.symbolConstructor),e.set(3,ae.symbolField),e.set(4,ae.symbolVariable),e.set(5,ae.symbolClass),e.set(6,ae.symbolStruct),e.set(7,ae.symbolInterface),e.set(8,ae.symbolModule),e.set(9,ae.symbolProperty),e.set(10,ae.symbolEvent),e.set(11,ae.symbolOperator),e.set(12,ae.symbolUnit),e.set(13,ae.symbolValue),e.set(15,ae.symbolEnum),e.set(14,ae.symbolConstant),e.set(15,ae.symbolEnum),e.set(16,ae.symbolEnumMember),e.set(17,ae.symbolKeyword),e.set(27,ae.symbolSnippet),e.set(18,ae.symbolText),e.set(19,ae.symbolColor),e.set(20,ae.symbolFile),e.set(21,ae.symbolReference),e.set(22,ae.symbolCustomColor),e.set(23,ae.symbolFolder),e.set(24,ae.symbolTypeParameter),e.set(25,ae.account),e.set(26,ae.issues);function t(o){let r=e.get(o);return r||(console.info("No codicon found for CompletionItemKind "+o),r=ae.symbolProperty),r}n.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function s(o,r){let a=i.get(o);return typeof a>"u"&&!r&&(a=9),a}n.fromString=s})(Ox||(Ox={}));var Lc;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(Lc||(Lc={}));class nce{constructor(e,t,i,s){this.range=e,this.text=t,this.completionKind=i,this.isSnippetText=s}equals(e){return E.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var Fx;(function(n){n[n.Automatic=0]="Automatic",n[n.PasteAs=1]="PasteAs"})(Fx||(Fx={}));var Ud;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(Ud||(Ud={}));var sy;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(sy||(sy={}));function MLe(n){return n&&Le.isUri(n.uri)&&E.isIRange(n.range)&&(E.isIRange(n.originSelectionRange)||E.isIRange(n.targetSelectionRange))}const RLe={17:p("Array","array"),16:p("Boolean","boolean"),4:p("Class","class"),13:p("Constant","constant"),8:p("Constructor","constructor"),9:p("Enum","enumeration"),21:p("EnumMember","enumeration member"),23:p("Event","event"),7:p("Field","field"),0:p("File","file"),11:p("Function","function"),10:p("Interface","interface"),19:p("Key","key"),5:p("Method","method"),1:p("Module","module"),2:p("Namespace","namespace"),20:p("Null","null"),15:p("Number","number"),18:p("Object","object"),24:p("Operator","operator"),3:p("Package","package"),6:p("Property","property"),14:p("String","string"),22:p("Struct","struct"),25:p("TypeParameter","type parameter"),12:p("Variable","variable")};function ALe(n,e){return p("symbolAriaLabel","{0} ({1})",n,RLe[e])}var KI;(function(n){const e=new Map;e.set(0,ae.symbolFile),e.set(1,ae.symbolModule),e.set(2,ae.symbolNamespace),e.set(3,ae.symbolPackage),e.set(4,ae.symbolClass),e.set(5,ae.symbolMethod),e.set(6,ae.symbolProperty),e.set(7,ae.symbolField),e.set(8,ae.symbolConstructor),e.set(9,ae.symbolEnum),e.set(10,ae.symbolInterface),e.set(11,ae.symbolFunction),e.set(12,ae.symbolVariable),e.set(13,ae.symbolConstant),e.set(14,ae.symbolString),e.set(15,ae.symbolNumber),e.set(16,ae.symbolBoolean),e.set(17,ae.symbolArray),e.set(18,ae.symbolObject),e.set(19,ae.symbolKey),e.set(20,ae.symbolNull),e.set(21,ae.symbolEnumMember),e.set(22,ae.symbolStruct),e.set(23,ae.symbolEvent),e.set(24,ae.symbolOperator),e.set(25,ae.symbolTypeParameter);function t(i){let s=e.get(i);return s||(console.info("No codicon found for SymbolKind "+i),s=ae.symbolProperty),s}n.toIcon=t})(KI||(KI={}));const cl=class cl{static fromValue(e){switch(e){case"comment":return cl.Comment;case"imports":return cl.Imports;case"region":return cl.Region}return new cl(e)}constructor(e){this.value=e}};cl.Comment=new cl("comment"),cl.Imports=new cl("imports"),cl.Region=new cl("region");let Ug=cl;var mW;(function(n){n[n.AIGenerated=1]="AIGenerated"})(mW||(mW={}));var Wx;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(Wx||(Wx={}));var pW;(function(n){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}n.is=e})(pW||(pW={}));var GI;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(GI||(GI={}));class OLe{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const Hi=new ice,_W=new ice;var YI;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(YI||(YI={}));var bW;(function(n){n[n.Unknown=0]="Unknown",n[n.Disabled=1]="Disabled",n[n.Enabled=2]="Enabled"})(bW||(bW={}));var vW;(function(n){n[n.Invoke=1]="Invoke",n[n.Auto=2]="Auto"})(vW||(vW={}));var wW;(function(n){n[n.None=0]="None",n[n.KeepWhitespace=1]="KeepWhitespace",n[n.InsertAsSnippet=4]="InsertAsSnippet"})(wW||(wW={}));var CW;(function(n){n[n.Method=0]="Method",n[n.Function=1]="Function",n[n.Constructor=2]="Constructor",n[n.Field=3]="Field",n[n.Variable=4]="Variable",n[n.Class=5]="Class",n[n.Struct=6]="Struct",n[n.Interface=7]="Interface",n[n.Module=8]="Module",n[n.Property=9]="Property",n[n.Event=10]="Event",n[n.Operator=11]="Operator",n[n.Unit=12]="Unit",n[n.Value=13]="Value",n[n.Constant=14]="Constant",n[n.Enum=15]="Enum",n[n.EnumMember=16]="EnumMember",n[n.Keyword=17]="Keyword",n[n.Text=18]="Text",n[n.Color=19]="Color",n[n.File=20]="File",n[n.Reference=21]="Reference",n[n.Customcolor=22]="Customcolor",n[n.Folder=23]="Folder",n[n.TypeParameter=24]="TypeParameter",n[n.User=25]="User",n[n.Issue=26]="Issue",n[n.Snippet=27]="Snippet"})(CW||(CW={}));var yW;(function(n){n[n.Deprecated=1]="Deprecated"})(yW||(yW={}));var SW;(function(n){n[n.Invoke=0]="Invoke",n[n.TriggerCharacter=1]="TriggerCharacter",n[n.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(SW||(SW={}));var xW;(function(n){n[n.EXACT=0]="EXACT",n[n.ABOVE=1]="ABOVE",n[n.BELOW=2]="BELOW"})(xW||(xW={}));var kW;(function(n){n[n.NotSet=0]="NotSet",n[n.ContentFlush=1]="ContentFlush",n[n.RecoverFromMarkers=2]="RecoverFromMarkers",n[n.Explicit=3]="Explicit",n[n.Paste=4]="Paste",n[n.Undo=5]="Undo",n[n.Redo=6]="Redo"})(kW||(kW={}));var LW;(function(n){n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(LW||(LW={}));var DW;(function(n){n[n.Text=0]="Text",n[n.Read=1]="Read",n[n.Write=2]="Write"})(DW||(DW={}));var EW;(function(n){n[n.None=0]="None",n[n.Keep=1]="Keep",n[n.Brackets=2]="Brackets",n[n.Advanced=3]="Advanced",n[n.Full=4]="Full"})(EW||(EW={}));var NW;(function(n){n[n.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",n[n.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",n[n.accessibilitySupport=2]="accessibilitySupport",n[n.accessibilityPageSize=3]="accessibilityPageSize",n[n.ariaLabel=4]="ariaLabel",n[n.ariaRequired=5]="ariaRequired",n[n.autoClosingBrackets=6]="autoClosingBrackets",n[n.autoClosingComments=7]="autoClosingComments",n[n.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",n[n.autoClosingDelete=9]="autoClosingDelete",n[n.autoClosingOvertype=10]="autoClosingOvertype",n[n.autoClosingQuotes=11]="autoClosingQuotes",n[n.autoIndent=12]="autoIndent",n[n.automaticLayout=13]="automaticLayout",n[n.autoSurround=14]="autoSurround",n[n.bracketPairColorization=15]="bracketPairColorization",n[n.guides=16]="guides",n[n.codeLens=17]="codeLens",n[n.codeLensFontFamily=18]="codeLensFontFamily",n[n.codeLensFontSize=19]="codeLensFontSize",n[n.colorDecorators=20]="colorDecorators",n[n.colorDecoratorsLimit=21]="colorDecoratorsLimit",n[n.columnSelection=22]="columnSelection",n[n.comments=23]="comments",n[n.contextmenu=24]="contextmenu",n[n.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",n[n.cursorBlinking=26]="cursorBlinking",n[n.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",n[n.cursorStyle=28]="cursorStyle",n[n.cursorSurroundingLines=29]="cursorSurroundingLines",n[n.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",n[n.cursorWidth=31]="cursorWidth",n[n.disableLayerHinting=32]="disableLayerHinting",n[n.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",n[n.domReadOnly=34]="domReadOnly",n[n.dragAndDrop=35]="dragAndDrop",n[n.dropIntoEditor=36]="dropIntoEditor",n[n.emptySelectionClipboard=37]="emptySelectionClipboard",n[n.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",n[n.extraEditorClassName=39]="extraEditorClassName",n[n.fastScrollSensitivity=40]="fastScrollSensitivity",n[n.find=41]="find",n[n.fixedOverflowWidgets=42]="fixedOverflowWidgets",n[n.folding=43]="folding",n[n.foldingStrategy=44]="foldingStrategy",n[n.foldingHighlight=45]="foldingHighlight",n[n.foldingImportsByDefault=46]="foldingImportsByDefault",n[n.foldingMaximumRegions=47]="foldingMaximumRegions",n[n.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",n[n.fontFamily=49]="fontFamily",n[n.fontInfo=50]="fontInfo",n[n.fontLigatures=51]="fontLigatures",n[n.fontSize=52]="fontSize",n[n.fontWeight=53]="fontWeight",n[n.fontVariations=54]="fontVariations",n[n.formatOnPaste=55]="formatOnPaste",n[n.formatOnType=56]="formatOnType",n[n.glyphMargin=57]="glyphMargin",n[n.gotoLocation=58]="gotoLocation",n[n.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",n[n.hover=60]="hover",n[n.inDiffEditor=61]="inDiffEditor",n[n.inlineSuggest=62]="inlineSuggest",n[n.inlineEdit=63]="inlineEdit",n[n.letterSpacing=64]="letterSpacing",n[n.lightbulb=65]="lightbulb",n[n.lineDecorationsWidth=66]="lineDecorationsWidth",n[n.lineHeight=67]="lineHeight",n[n.lineNumbers=68]="lineNumbers",n[n.lineNumbersMinChars=69]="lineNumbersMinChars",n[n.linkedEditing=70]="linkedEditing",n[n.links=71]="links",n[n.matchBrackets=72]="matchBrackets",n[n.minimap=73]="minimap",n[n.mouseStyle=74]="mouseStyle",n[n.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",n[n.mouseWheelZoom=76]="mouseWheelZoom",n[n.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",n[n.multiCursorModifier=78]="multiCursorModifier",n[n.multiCursorPaste=79]="multiCursorPaste",n[n.multiCursorLimit=80]="multiCursorLimit",n[n.occurrencesHighlight=81]="occurrencesHighlight",n[n.overviewRulerBorder=82]="overviewRulerBorder",n[n.overviewRulerLanes=83]="overviewRulerLanes",n[n.padding=84]="padding",n[n.pasteAs=85]="pasteAs",n[n.parameterHints=86]="parameterHints",n[n.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",n[n.placeholder=88]="placeholder",n[n.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",n[n.quickSuggestions=90]="quickSuggestions",n[n.quickSuggestionsDelay=91]="quickSuggestionsDelay",n[n.readOnly=92]="readOnly",n[n.readOnlyMessage=93]="readOnlyMessage",n[n.renameOnType=94]="renameOnType",n[n.renderControlCharacters=95]="renderControlCharacters",n[n.renderFinalNewline=96]="renderFinalNewline",n[n.renderLineHighlight=97]="renderLineHighlight",n[n.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",n[n.renderValidationDecorations=99]="renderValidationDecorations",n[n.renderWhitespace=100]="renderWhitespace",n[n.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",n[n.roundedSelection=102]="roundedSelection",n[n.rulers=103]="rulers",n[n.scrollbar=104]="scrollbar",n[n.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",n[n.scrollBeyondLastLine=106]="scrollBeyondLastLine",n[n.scrollPredominantAxis=107]="scrollPredominantAxis",n[n.selectionClipboard=108]="selectionClipboard",n[n.selectionHighlight=109]="selectionHighlight",n[n.selectOnLineNumbers=110]="selectOnLineNumbers",n[n.showFoldingControls=111]="showFoldingControls",n[n.showUnused=112]="showUnused",n[n.snippetSuggestions=113]="snippetSuggestions",n[n.smartSelect=114]="smartSelect",n[n.smoothScrolling=115]="smoothScrolling",n[n.stickyScroll=116]="stickyScroll",n[n.stickyTabStops=117]="stickyTabStops",n[n.stopRenderingLineAfter=118]="stopRenderingLineAfter",n[n.suggest=119]="suggest",n[n.suggestFontSize=120]="suggestFontSize",n[n.suggestLineHeight=121]="suggestLineHeight",n[n.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",n[n.suggestSelection=123]="suggestSelection",n[n.tabCompletion=124]="tabCompletion",n[n.tabIndex=125]="tabIndex",n[n.unicodeHighlighting=126]="unicodeHighlighting",n[n.unusualLineTerminators=127]="unusualLineTerminators",n[n.useShadowDOM=128]="useShadowDOM",n[n.useTabStops=129]="useTabStops",n[n.wordBreak=130]="wordBreak",n[n.wordSegmenterLocales=131]="wordSegmenterLocales",n[n.wordSeparators=132]="wordSeparators",n[n.wordWrap=133]="wordWrap",n[n.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",n[n.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",n[n.wordWrapColumn=136]="wordWrapColumn",n[n.wordWrapOverride1=137]="wordWrapOverride1",n[n.wordWrapOverride2=138]="wordWrapOverride2",n[n.wrappingIndent=139]="wrappingIndent",n[n.wrappingStrategy=140]="wrappingStrategy",n[n.showDeprecated=141]="showDeprecated",n[n.inlayHints=142]="inlayHints",n[n.editorClassName=143]="editorClassName",n[n.pixelRatio=144]="pixelRatio",n[n.tabFocusMode=145]="tabFocusMode",n[n.layoutInfo=146]="layoutInfo",n[n.wrappingInfo=147]="wrappingInfo",n[n.defaultColorDecorators=148]="defaultColorDecorators",n[n.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",n[n.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(NW||(NW={}));var IW;(function(n){n[n.TextDefined=0]="TextDefined",n[n.LF=1]="LF",n[n.CRLF=2]="CRLF"})(IW||(IW={}));var TW;(function(n){n[n.LF=0]="LF",n[n.CRLF=1]="CRLF"})(TW||(TW={}));var PW;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(PW||(PW={}));var MW;(function(n){n[n.Increase=0]="Increase",n[n.Decrease=1]="Decrease"})(MW||(MW={}));var RW;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(RW||(RW={}));var AW;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(AW||(AW={}));var OW;(function(n){n[n.Type=1]="Type",n[n.Parameter=2]="Parameter"})(OW||(OW={}));var FW;(function(n){n[n.Automatic=0]="Automatic",n[n.Explicit=1]="Explicit"})(FW||(FW={}));var WW;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(WW||(WW={}));var BW;(function(n){n[n.DependsOnKbLayout=-1]="DependsOnKbLayout",n[n.Unknown=0]="Unknown",n[n.Backspace=1]="Backspace",n[n.Tab=2]="Tab",n[n.Enter=3]="Enter",n[n.Shift=4]="Shift",n[n.Ctrl=5]="Ctrl",n[n.Alt=6]="Alt",n[n.PauseBreak=7]="PauseBreak",n[n.CapsLock=8]="CapsLock",n[n.Escape=9]="Escape",n[n.Space=10]="Space",n[n.PageUp=11]="PageUp",n[n.PageDown=12]="PageDown",n[n.End=13]="End",n[n.Home=14]="Home",n[n.LeftArrow=15]="LeftArrow",n[n.UpArrow=16]="UpArrow",n[n.RightArrow=17]="RightArrow",n[n.DownArrow=18]="DownArrow",n[n.Insert=19]="Insert",n[n.Delete=20]="Delete",n[n.Digit0=21]="Digit0",n[n.Digit1=22]="Digit1",n[n.Digit2=23]="Digit2",n[n.Digit3=24]="Digit3",n[n.Digit4=25]="Digit4",n[n.Digit5=26]="Digit5",n[n.Digit6=27]="Digit6",n[n.Digit7=28]="Digit7",n[n.Digit8=29]="Digit8",n[n.Digit9=30]="Digit9",n[n.KeyA=31]="KeyA",n[n.KeyB=32]="KeyB",n[n.KeyC=33]="KeyC",n[n.KeyD=34]="KeyD",n[n.KeyE=35]="KeyE",n[n.KeyF=36]="KeyF",n[n.KeyG=37]="KeyG",n[n.KeyH=38]="KeyH",n[n.KeyI=39]="KeyI",n[n.KeyJ=40]="KeyJ",n[n.KeyK=41]="KeyK",n[n.KeyL=42]="KeyL",n[n.KeyM=43]="KeyM",n[n.KeyN=44]="KeyN",n[n.KeyO=45]="KeyO",n[n.KeyP=46]="KeyP",n[n.KeyQ=47]="KeyQ",n[n.KeyR=48]="KeyR",n[n.KeyS=49]="KeyS",n[n.KeyT=50]="KeyT",n[n.KeyU=51]="KeyU",n[n.KeyV=52]="KeyV",n[n.KeyW=53]="KeyW",n[n.KeyX=54]="KeyX",n[n.KeyY=55]="KeyY",n[n.KeyZ=56]="KeyZ",n[n.Meta=57]="Meta",n[n.ContextMenu=58]="ContextMenu",n[n.F1=59]="F1",n[n.F2=60]="F2",n[n.F3=61]="F3",n[n.F4=62]="F4",n[n.F5=63]="F5",n[n.F6=64]="F6",n[n.F7=65]="F7",n[n.F8=66]="F8",n[n.F9=67]="F9",n[n.F10=68]="F10",n[n.F11=69]="F11",n[n.F12=70]="F12",n[n.F13=71]="F13",n[n.F14=72]="F14",n[n.F15=73]="F15",n[n.F16=74]="F16",n[n.F17=75]="F17",n[n.F18=76]="F18",n[n.F19=77]="F19",n[n.F20=78]="F20",n[n.F21=79]="F21",n[n.F22=80]="F22",n[n.F23=81]="F23",n[n.F24=82]="F24",n[n.NumLock=83]="NumLock",n[n.ScrollLock=84]="ScrollLock",n[n.Semicolon=85]="Semicolon",n[n.Equal=86]="Equal",n[n.Comma=87]="Comma",n[n.Minus=88]="Minus",n[n.Period=89]="Period",n[n.Slash=90]="Slash",n[n.Backquote=91]="Backquote",n[n.BracketLeft=92]="BracketLeft",n[n.Backslash=93]="Backslash",n[n.BracketRight=94]="BracketRight",n[n.Quote=95]="Quote",n[n.OEM_8=96]="OEM_8",n[n.IntlBackslash=97]="IntlBackslash",n[n.Numpad0=98]="Numpad0",n[n.Numpad1=99]="Numpad1",n[n.Numpad2=100]="Numpad2",n[n.Numpad3=101]="Numpad3",n[n.Numpad4=102]="Numpad4",n[n.Numpad5=103]="Numpad5",n[n.Numpad6=104]="Numpad6",n[n.Numpad7=105]="Numpad7",n[n.Numpad8=106]="Numpad8",n[n.Numpad9=107]="Numpad9",n[n.NumpadMultiply=108]="NumpadMultiply",n[n.NumpadAdd=109]="NumpadAdd",n[n.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",n[n.NumpadSubtract=111]="NumpadSubtract",n[n.NumpadDecimal=112]="NumpadDecimal",n[n.NumpadDivide=113]="NumpadDivide",n[n.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",n[n.ABNT_C1=115]="ABNT_C1",n[n.ABNT_C2=116]="ABNT_C2",n[n.AudioVolumeMute=117]="AudioVolumeMute",n[n.AudioVolumeUp=118]="AudioVolumeUp",n[n.AudioVolumeDown=119]="AudioVolumeDown",n[n.BrowserSearch=120]="BrowserSearch",n[n.BrowserHome=121]="BrowserHome",n[n.BrowserBack=122]="BrowserBack",n[n.BrowserForward=123]="BrowserForward",n[n.MediaTrackNext=124]="MediaTrackNext",n[n.MediaTrackPrevious=125]="MediaTrackPrevious",n[n.MediaStop=126]="MediaStop",n[n.MediaPlayPause=127]="MediaPlayPause",n[n.LaunchMediaPlayer=128]="LaunchMediaPlayer",n[n.LaunchMail=129]="LaunchMail",n[n.LaunchApp2=130]="LaunchApp2",n[n.Clear=131]="Clear",n[n.MAX_VALUE=132]="MAX_VALUE"})(BW||(BW={}));var HW;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(HW||(HW={}));var jW;(function(n){n[n.Unnecessary=1]="Unnecessary",n[n.Deprecated=2]="Deprecated"})(jW||(jW={}));var VW;(function(n){n[n.Inline=1]="Inline",n[n.Gutter=2]="Gutter"})(VW||(VW={}));var zW;(function(n){n[n.Normal=1]="Normal",n[n.Underlined=2]="Underlined"})(zW||(zW={}));var UW;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.TEXTAREA=1]="TEXTAREA",n[n.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",n[n.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",n[n.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",n[n.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",n[n.CONTENT_TEXT=6]="CONTENT_TEXT",n[n.CONTENT_EMPTY=7]="CONTENT_EMPTY",n[n.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",n[n.CONTENT_WIDGET=9]="CONTENT_WIDGET",n[n.OVERVIEW_RULER=10]="OVERVIEW_RULER",n[n.SCROLLBAR=11]="SCROLLBAR",n[n.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",n[n.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(UW||(UW={}));var $W;(function(n){n[n.AIGenerated=1]="AIGenerated"})($W||($W={}));var qW;(function(n){n[n.Invoke=0]="Invoke",n[n.Automatic=1]="Automatic"})(qW||(qW={}));var KW;(function(n){n[n.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",n[n.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",n[n.TOP_CENTER=2]="TOP_CENTER"})(KW||(KW={}));var GW;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(GW||(GW={}));var YW;(function(n){n[n.Word=0]="Word",n[n.Line=1]="Line",n[n.Suggest=2]="Suggest"})(YW||(YW={}));var ZW;(function(n){n[n.Left=0]="Left",n[n.Right=1]="Right",n[n.None=2]="None",n[n.LeftOfInjectedText=3]="LeftOfInjectedText",n[n.RightOfInjectedText=4]="RightOfInjectedText"})(ZW||(ZW={}));var QW;(function(n){n[n.Off=0]="Off",n[n.On=1]="On",n[n.Relative=2]="Relative",n[n.Interval=3]="Interval",n[n.Custom=4]="Custom"})(QW||(QW={}));var XW;(function(n){n[n.None=0]="None",n[n.Text=1]="Text",n[n.Blocks=2]="Blocks"})(XW||(XW={}));var JW;(function(n){n[n.Smooth=0]="Smooth",n[n.Immediate=1]="Immediate"})(JW||(JW={}));var eB;(function(n){n[n.Auto=1]="Auto",n[n.Hidden=2]="Hidden",n[n.Visible=3]="Visible"})(eB||(eB={}));var tB;(function(n){n[n.LTR=0]="LTR",n[n.RTL=1]="RTL"})(tB||(tB={}));var iB;(function(n){n.Off="off",n.OnCode="onCode",n.On="on"})(iB||(iB={}));var nB;(function(n){n[n.Invoke=1]="Invoke",n[n.TriggerCharacter=2]="TriggerCharacter",n[n.ContentChange=3]="ContentChange"})(nB||(nB={}));var sB;(function(n){n[n.File=0]="File",n[n.Module=1]="Module",n[n.Namespace=2]="Namespace",n[n.Package=3]="Package",n[n.Class=4]="Class",n[n.Method=5]="Method",n[n.Property=6]="Property",n[n.Field=7]="Field",n[n.Constructor=8]="Constructor",n[n.Enum=9]="Enum",n[n.Interface=10]="Interface",n[n.Function=11]="Function",n[n.Variable=12]="Variable",n[n.Constant=13]="Constant",n[n.String=14]="String",n[n.Number=15]="Number",n[n.Boolean=16]="Boolean",n[n.Array=17]="Array",n[n.Object=18]="Object",n[n.Key=19]="Key",n[n.Null=20]="Null",n[n.EnumMember=21]="EnumMember",n[n.Struct=22]="Struct",n[n.Event=23]="Event",n[n.Operator=24]="Operator",n[n.TypeParameter=25]="TypeParameter"})(sB||(sB={}));var oB;(function(n){n[n.Deprecated=1]="Deprecated"})(oB||(oB={}));var rB;(function(n){n[n.Hidden=0]="Hidden",n[n.Blink=1]="Blink",n[n.Smooth=2]="Smooth",n[n.Phase=3]="Phase",n[n.Expand=4]="Expand",n[n.Solid=5]="Solid"})(rB||(rB={}));var aB;(function(n){n[n.Line=1]="Line",n[n.Block=2]="Block",n[n.Underline=3]="Underline",n[n.LineThin=4]="LineThin",n[n.BlockOutline=5]="BlockOutline",n[n.UnderlineThin=6]="UnderlineThin"})(aB||(aB={}));var lB;(function(n){n[n.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",n[n.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",n[n.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",n[n.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(lB||(lB={}));var cB;(function(n){n[n.None=0]="None",n[n.Same=1]="Same",n[n.Indent=2]="Indent",n[n.DeepIndent=3]="DeepIndent"})(cB||(cB={}));var rh;let FLe=(rh=class{static chord(e,t){return pn(e,t)}},rh.CtrlCmd=2048,rh.Shift=1024,rh.Alt=512,rh.WinCtrl=256,rh);function sce(){return{editor:void 0,languages:void 0,CancellationTokenSource:Pi,Emitter:j,KeyCode:BW,KeyMod:FLe,Position:H,Range:E,Selection:Ce,SelectionDirection:tB,MarkerSeverity:HW,MarkerTag:jW,Uri:Le,Token:Ax}}function WLe(n,e){const t=n;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const Gt=window;function oce(n){return n}class BLe{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=oce):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class KZ{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=oce):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const i=this._fn(e);return this._map.set(e,i),this._map2.set(t,i),i}}class Oc{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function rce(n){return!n||typeof n!="string"?!0:n.trim().length===0}const HLe=/{(\d+)}/g;function ab(n,...e){return e.length===0?n:n.replace(HLe,function(t,i){const s=parseInt(i,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function jLe(n){return n.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function nS(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function ua(n){return n.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function VLe(n,e=" "){const t=NL(n,e);return ace(t,e)}function NL(n,e){if(!n||!e)return n;const t=e.length;if(t===0||n.length===0)return n;let i=0;for(;n.indexOf(e,i)===i;)i=i+t;return n.substring(i)}function ace(n,e){if(!n||!e)return n;const t=e.length,i=n.length;if(t===0||i===0)return n;let s=i,o=-1;for(;o=n.lastIndexOf(e,s-1),!(o===-1||o+t!==s);){if(o===0)return"";s=o}return n.substring(0,s)}function zLe(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function ULe(n){return n.replace(/\*/g,"")}function lce(n,e,t={}){if(!n)throw new Error("Cannot create regex from empty string");e||(n=ua(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(n,i)}function $Le(n){return n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$"?!1:!!(n.exec("")&&n.lastIndex===0)}function ru(n){return n.split(/\r\n|\r|\n/)}function qLe(n){const e=[],t=n.split(/(\r\n|\r|\n)/);for(let i=0;i<Math.ceil(t.length/2);i++)e.push(t[2*i]+(t[2*i+1]??""));return e}function Zs(n){for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function Zt(n,e=0,t=n.length){for(let i=e;i<t;i++){const s=n.charCodeAt(i);if(s!==32&&s!==9)return n.substring(e,i)}return n.substring(e,t)}function Dc(n,e=n.length-1){for(let t=e;t>=0;t--){const i=n.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function Bx(n,e){return n<e?-1:n>e?1:0}function lz(n,e,t=0,i=n.length,s=0,o=e.length){for(;t<i&&s<o;t++,s++){const l=n.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const r=i-t,a=o-s;return r<a?-1:r>a?1:0}function dB(n,e){return IL(n,e,0,n.length,0,e.length)}function IL(n,e,t=0,i=n.length,s=0,o=e.length){for(;t<i&&s<o;t++,s++){let l=n.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return lz(n.toLowerCase(),e.toLowerCase(),t,i,s,o);Uf(l)&&(l-=32),Uf(c)&&(c-=32);const d=l-c;if(d!==0)return d}const r=i-t,a=o-s;return r<a?-1:r>a?1:0}function UD(n){return n>=48&&n<=57}function Uf(n){return n>=97&&n<=122}function kd(n){return n>=65&&n<=90}function ew(n,e){return n.length===e.length&&IL(n,e)===0}function cz(n,e){const t=e.length;return e.length>n.length?!1:IL(n,e,0,t)===0}function $g(n,e){const t=Math.min(n.length,e.length);let i;for(i=0;i<t;i++)if(n.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function ZI(n,e){const t=Math.min(n.length,e.length);let i;const s=n.length-1,o=e.length-1;for(i=0;i<t;i++)if(n.charCodeAt(s-i)!==e.charCodeAt(o-i))return i;return t}function Pn(n){return 55296<=n&&n<=56319}function lb(n){return 56320<=n&&n<=57343}function dz(n,e){return(n-55296<<10)+(e-56320)+65536}function QI(n,e,t){const i=n.charCodeAt(t);if(Pn(i)&&t+1<e){const s=n.charCodeAt(t+1);if(lb(s))return dz(i,s)}return i}function KLe(n,e){const t=n.charCodeAt(e-1);if(lb(t)&&e>1){const i=n.charCodeAt(e-2);if(Pn(i))return dz(i,t)}return t}class uz{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=KLe(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=QI(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class XI{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new uz(e,t)}nextGraphemeLength(){const e=JI.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const o=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(GZ(s,r)){t.setOffset(o);break}s=r}return t.offset-i}prevGraphemeLength(){const e=JI.getInstance(),t=this._iterator,i=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const o=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(GZ(r,s)){t.setOffset(o);break}s=r}return i-t.offset}eol(){return this._iterator.eol()}}function hz(n,e){return new XI(n,e).nextGraphemeLength()}function cce(n,e){return new XI(n,e).prevGraphemeLength()}function GLe(n,e){e>0&&lb(n.charCodeAt(e))&&e--;const t=e+hz(n,e);return[t-cce(n,t),t]}let IF;function YLe(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function oy(n){return IF||(IF=YLe()),IF.test(n)}const ZLe=/^[\t\n\r\x20-\x7E]*$/;function TL(n){return ZLe.test(n)}const dce=/[\u2028\u2029]/;function uce(n){return dce.test(n)}function qg(n){return n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}function fz(n){return n>=127462&&n<=127487||n===8986||n===8987||n===9200||n===9203||n>=9728&&n<=10175||n===11088||n===11093||n>=127744&&n<=128591||n>=128640&&n<=128764||n>=128992&&n<=129008||n>=129280&&n<=129535||n>=129648&&n<=129782}const QLe="\uFEFF";function gz(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function XLe(n,e=!1){return n?(e&&(n=n.replace(/\\./g,"")),n.toLowerCase()!==n):!1}function hce(n){return n=n%(2*26),n<26?String.fromCharCode(97+n):String.fromCharCode(65+n-26)}function GZ(n,e){return n===0?e!==5&&e!==7:n===2&&e===3?!1:n===4||n===2||n===3||e===4||e===2||e===3?!0:!(n===8&&(e===8||e===9||e===11||e===12)||(n===11||n===9)&&(e===9||e===10)||(n===12||n===10)&&e===10||e===5||e===13||e===7||n===1||n===13&&e===14||n===6&&e===6)}const fp=class fp{static getInstance(){return fp._INSTANCE||(fp._INSTANCE=new fp),fp._INSTANCE}constructor(){this._data=JLe()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let s=1;for(;s<=i;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}};fp._INSTANCE=null;let JI=fp;function JLe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function eDe(n,e){if(n===0)return 0;const t=tDe(n,e);if(t!==void 0)return t;const i=new uz(e,n);return i.prevCodePoint(),i.offset}function tDe(n,e){const t=new uz(e,n);let i=t.prevCodePoint();for(;iDe(i)||i===65039||i===8419;){if(t.offset===0)return;i=t.prevCodePoint()}if(!fz(i))return;let s=t.offset;return s>0&&t.prevCodePoint()===8205&&(s=t.offset),s}function iDe(n){return 127995<=n&&n<=127999}const fce="",fd=class fd{static getInstance(e){return fd.cache.get(Array.from(e))}static getLocales(){return fd._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};fd.ambiguousCharacterData=new Oc(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),fd.cache=new BLe({getCacheKey:JSON.stringify},e=>{function t(d){const u=new Map;for(let h=0;h<d.length;h+=2)u.set(d[h],d[h+1]);return u}function i(d,u){const h=new Map(d);for(const[f,g]of u)h.set(f,g);return h}function s(d,u){if(!d)return u;const h=new Map;for(const[f,g]of d)u.has(f)&&h.set(f,g);return h}const o=fd.ambiguousCharacterData.value;let r=e.filter(d=>!d.startsWith("_")&&d in o);r.length===0&&(r=["_default"]);let a;for(const d of r){const u=t(o[d]);a=s(a,u)}const l=t(o._common),c=i(l,a);return new fd(c)}),fd._locales=new Oc(()=>Object.keys(fd.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let Hx=fd;const kw=class kw{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(kw.getRawData())),this._data}static isInvisibleCharacter(e){return kw.getData().has(e)}static get codePoints(){return kw.getData()}};kw._data=void 0;let Hp=kw;const HM=class HM{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};HM.INSTANCE=new HM;let uB=HM;function gce(n,e,t){typeof e=="string"&&(e=n.matchMedia(e)),e.addEventListener("change",t)}function nDe(n){return uB.INSTANCE.getZoomFactor(n)}const Xy=navigator.userAgent,$a=Xy.indexOf("Firefox")>=0,jp=Xy.indexOf("AppleWebKit")>=0,PL=Xy.indexOf("Chrome")>=0,Eh=!PL&&Xy.indexOf("Safari")>=0,mce=!PL&&!Eh&&jp;Xy.indexOf("Electron/")>=0;const YZ=Xy.indexOf("Android")>=0;let CN=!1;if(typeof Gt.matchMedia=="function"){const n=Gt.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Gt.matchMedia("(display-mode: fullscreen)");CN=n.matches,gce(Gt,n,({matches:t})=>{CN&&e.matches||(CN=t)})}function sDe(){return CN}const mz={clipboard:{writeText:xc||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:xc||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:xc||sDe()?0:navigator.keyboard||Eh?1:2,touch:"ontouchstart"in Gt||navigator.maxTouchPoints>0,pointerEvents:Gt.PointerEvent&&("ontouchstart"in Gt||navigator.maxTouchPoints>0)};function hB(n,e){if(typeof n=="number"){if(n===0)return null;const t=(n&65535)>>>0,i=(n&4294901760)>>>16;return i!==0?new TF([$D(t,e),$D(i,e)]):new TF([$D(t,e)])}else{const t=[];for(let i=0;i<n.length;i++)t.push($D(n[i],e));return new TF(t)}}function $D(n,e){const t=!!(n&2048),i=!!(n&256),s=e===2?i:t,o=!!(n&1024),r=!!(n&512),a=e===2?t:i,l=n&255;return new Nh(s,o,r,a,l)}class Nh{constructor(e,t,i,s,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyCode=o}equals(e){return e instanceof Nh&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class TF{constructor(e){if(e.length===0)throw ja("chords");this.chords=e}}class oDe{constructor(e,t,i,s,o,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=s,this.keyLabel=o,this.keyAriaLabel=r}}class rDe{}function aDe(n){if(n.charCode){const t=String.fromCharCode(n.charCode).toUpperCase();return Uu.fromString(t)}const e=n.keyCode;if(e===3)return 7;if($a)switch(e){case 59:return 85;case 60:if(vo)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(ct)return 57;break}else if(jp){if(ct&&e===93)return 57;if(!ct&&e===92)return 57}return Kle[e]||0}const lDe=ct?256:2048,cDe=512,dDe=1024,uDe=ct?2048:256;class ti{constructor(e){var i;this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(i=t.getModifierState)==null?void 0:i.call(t,"AltGraph"),this.keyCode=aDe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=lDe),this.altKey&&(t|=cDe),this.shiftKey&&(t|=dDe),this.metaKey&&(t|=uDe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Nh(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const ZZ=new WeakMap;function hDe(n){if(!n.parent||n.parent===n)return null;try{const e=n.location,t=n.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return n.parent}class fDe{static getSameOriginWindowChain(e){let t=ZZ.get(e);if(!t){t=[],ZZ.set(e,t);let i=e,s;do s=hDe(i),s?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=s;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,s=0;const o=this.getSameOriginWindowChain(e);for(const r of o){const a=r.window.deref();if(i+=(a==null?void 0:a.scrollY)??0,s+=(a==null?void 0:a.scrollX)??0,a===t||!r.iframeElement)break;const l=r.iframeElement.getBoundingClientRect();i+=l.top,s+=l.left}return{top:i,left:s}}}class Sl{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const i=fDe.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class cb{constructor(e,t=0,i=0){var o;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let s=!1;if(PL){const r=navigator.userAgent.match(/Chrome\/(\d+)/);s=(r?parseInt(r[1]):123)<=122}if(e){const r=e,a=e,l=((o=e.view)==null?void 0:o.devicePixelRatio)||1;if(typeof r.wheelDeltaY<"u")s?this.deltaY=r.wheelDeltaY/(120*l):this.deltaY=r.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?$a&&!ct?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")Eh&&vs?this.deltaX=-(r.wheelDeltaX/120):s?this.deltaX=r.wheelDeltaX/(120*l):this.deltaX=r.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?$a&&!ct?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}}const pce=Symbol("MicrotaskDelay");function fB(n){return!!n&&typeof n.then=="function"}function On(n){const e=new Pi,t=n(e.token),i=new Promise((s,o)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),o(new Pl)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),s(a)},a=>{r.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(s,o){return i.then(s,o)}catch(s){return this.then(void 0,s)}finally(s){return i.finally(s)}}}function ML(n,e,t){return new Promise((i,s)=>{const o=e.onCancellationRequested(()=>{o.dispose(),i(t)});n.then(i,s).finally(()=>o.dispose())})}class gDe{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const i=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,i};this.queuedPromise=new Promise(i=>{this.activePromise.then(t,t).then(i)})}return new Promise((t,i)=>{this.queuedPromise.then(t,i)})}return this.activePromise=e(),new Promise((t,i)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,i(s)})})}dispose(){this.isDisposed=!0}}const mDe=(n,e)=>{let t=!0;const i=setTimeout(()=>{t=!1,e()},n);return{isTriggered:()=>t,dispose:()=>{clearTimeout(i),t=!1}}},pDe=n=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,n())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class qa{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((s,o)=>{this.doResolve=s,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const s=this.task;return this.task=null,s()}}));const i=()=>{var s;this.deferred=null,(s=this.doResolve)==null||s.call(this,null)};return this.deferred=t===pce?pDe(i):mDe(t,i),this.completionPromise}isTriggered(){var e;return!!((e=this.deferred)!=null&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)==null||e.call(this,new Pl),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)==null||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class _ce{constructor(e){this.delayer=new qa(e),this.throttler=new gDe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function Ih(n,e){return e?new Promise((t,i)=>{const s=setTimeout(()=>{o.dispose(),t()},n),o=e.onCancellationRequested(()=>{clearTimeout(s),o.dispose(),i(new Pl)})}):On(t=>Ih(n,t))}function Kg(n,e=0,t){const i=setTimeout(()=>{n(),t&&s.dispose()},e),s=xe(()=>{clearTimeout(i),t==null||t.deleteAndLeak(s)});return t==null||t.add(s),s}function pz(n,e=i=>!!i,t=null){let i=0;const s=n.length,o=()=>{if(i>=s)return Promise.resolve(t);const r=n[i++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):o())};return o()}class Bl{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Dt("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Dt("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class _z{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new Dt("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const s=i.setInterval(()=>{e()},t);this.disposable=xe(()=>{i.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class $t{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)==null||e.call(this)}}let bce,sS;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?sS=(n,e)=>{Fle(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:sS=(n,e,t)=>{const i=n.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let s=!1;return{dispose(){s||(s=!0,n.cancelIdleCallback(i))}}},bce=n=>sS(globalThis,n)})();class vce{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=sS(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class _De extends vce{constructor(e){super(globalThis,e)}}class Jy{get isRejected(){var e;return((e=this.outcome)==null?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new Pl)}}var gB;(function(n){async function e(i){let s;const o=await Promise.all(i.map(r=>r.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return o}n.settled=e;function t(i){return new Promise(async(s,o)=>{try{await i(s,o)}catch(r){o(r)}})}n.withAsyncBody=t})(gB||(gB={}));const nr=class nr{static fromArray(e){return new nr(t=>{t.emitMany(e)})}static fromPromise(e){return new nr(async t=>{t.emitMany(await e)})}static fromPromises(e){return new nr(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new nr(async t=>{await Promise.all(e.map(async i=>{for await(const s of i)t.emitOne(s)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new j,queueMicrotask(async()=>{const i={emitOne:s=>this.emitOne(s),emitMany:s=>this.emitMany(s),reject:s=>this.reject(s)};try{await Promise.resolve(e(i)),this.resolve()}catch(s){this.reject(s)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await ue.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var t;return(t=this._onReturn)==null||t.call(this),{done:!0,value:void 0}}}}static map(e,t){return new nr(async i=>{for await(const s of e)i.emitOne(t(s))})}map(e){return nr.map(this,e)}static filter(e,t){return new nr(async i=>{for await(const s of e)t(s)&&i.emitOne(s)})}filter(e){return nr.filter(this,e)}static coalesce(e){return nr.filter(e,t=>!!t)}coalesce(){return nr.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return nr.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};nr.EMPTY=nr.fromArray([]);let ta=nr;class bDe extends ta{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function vDe(n){const e=new Pi,t=n(e.token);return new bDe(e,async i=>{const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),i.reject(new Pl)});try{for await(const o of t){if(e.token.isCancellationRequested)return;i.emitOne(o)}s.dispose(),e.dispose()}catch(o){s.dispose(),e.dispose(),i.reject(o)}})}/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:wce,setPrototypeOf:QZ,isFrozen:wDe,getPrototypeOf:CDe,getOwnPropertyDescriptor:yDe}=Object;let{freeze:Sr,seal:Ml,create:Cce}=Object,{apply:mB,construct:pB}=typeof Reflect<"u"&&Reflect;Sr||(Sr=function(e){return e});Ml||(Ml=function(e){return e});mB||(mB=function(e,t,i){return e.apply(t,i)});pB||(pB=function(e,t){return new e(...t)});const qD=Ka(Array.prototype.forEach),XZ=Ka(Array.prototype.pop),F1=Ka(Array.prototype.push),yN=Ka(String.prototype.toLowerCase),PF=Ka(String.prototype.toString),JZ=Ka(String.prototype.match),W1=Ka(String.prototype.replace),SDe=Ka(String.prototype.indexOf),xDe=Ka(String.prototype.trim),Jl=Ka(Object.prototype.hasOwnProperty),er=Ka(RegExp.prototype.test),B1=kDe(TypeError);function Ka(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return mB(n,e,i)}}function kDe(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return pB(n,t)}}function Xt(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yN;QZ&&QZ(n,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const o=t(s);o!==s&&(wDe(e)||(e[i]=o),s=o)}n[s]=!0}return n}function LDe(n){for(let e=0;e<n.length;e++)Jl(n,e)||(n[e]=null);return n}function Um(n){const e=Cce(null);for(const[t,i]of wce(n))Jl(n,t)&&(Array.isArray(i)?e[t]=LDe(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=Um(i):e[t]=i);return e}function H1(n,e){for(;n!==null;){const i=yDe(n,e);if(i){if(i.get)return Ka(i.get);if(typeof i.value=="function")return Ka(i.value)}n=CDe(n)}function t(){return null}return t}const eQ=Sr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),MF=Sr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),RF=Sr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),DDe=Sr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),AF=Sr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),EDe=Sr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),tQ=Sr(["#text"]),iQ=Sr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),OF=Sr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nQ=Sr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),KD=Sr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),NDe=Ml(/\{\{[\w\W]*|[\w\W]*\}\}/gm),IDe=Ml(/<%[\w\W]*|[\w\W]*%>/gm),TDe=Ml(/\${[\w\W]*}/gm),PDe=Ml(/^data-[\-\w.\u00B7-\uFFFF]/),MDe=Ml(/^aria-[\-\w]+$/),yce=Ml(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),RDe=Ml(/^(?:\w+script|data):/i),ADe=Ml(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Sce=Ml(/^html$/i),ODe=Ml(/^[a-z][.\w]*(-[.\w]+)+$/i);var sQ=Object.freeze({__proto__:null,MUSTACHE_EXPR:NDe,ERB_EXPR:IDe,TMPLIT_EXPR:TDe,DATA_ATTR:PDe,ARIA_ATTR:MDe,IS_ALLOWED_URI:yce,IS_SCRIPT_OR_DATA:RDe,ATTR_WHITESPACE:ADe,DOCTYPE_NAME:Sce,CUSTOM_ELEMENT:ODe});const j1={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},FDe=function(){return typeof window>"u"?null:window},WDe=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(i=t.getAttribute(s));const o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function xce(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FDe();const e=Xe=>xce(Xe);if(e.version="3.1.7",e.removed=[],!n||!n.document||n.document.nodeType!==j1.document)return e.isSupported=!1,e;let{document:t}=n;const i=t,s=i.currentScript,{DocumentFragment:o,HTMLTemplateElement:r,Node:a,Element:l,NodeFilter:c,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:u,DOMParser:h,trustedTypes:f}=n,g=l.prototype,m=H1(g,"cloneNode"),_=H1(g,"remove"),b=H1(g,"nextSibling"),v=H1(g,"childNodes"),w=H1(g,"parentNode");if(typeof r=="function"){const Xe=t.createElement("template");Xe.content&&Xe.content.ownerDocument&&(t=Xe.content.ownerDocument)}let y,S="";const{implementation:x,createNodeIterator:k,createDocumentFragment:D,getElementsByTagName:N}=t,{importNode:R}=i;let O={};e.isSupported=typeof wce=="function"&&typeof w=="function"&&x&&x.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:B,ERB_EXPR:z,TMPLIT_EXPR:F,DATA_ATTR:K,ARIA_ATTR:Z,IS_SCRIPT_OR_DATA:re,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:J}=sQ;let{IS_ALLOWED_URI:ge}=sQ,be=null;const Qe=Xt({},[...eQ,...MF,...RF,...AF,...tQ]);let Me=null;const Ze=Xt({},[...iQ,...OF,...nQ,...KD]);let at=Object.seal(Cce(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Et=null,Ve=null,Tt=!0,Ei=!0,Wt=!1,qt=!0,ut=!1,qi=!0,Ln=!1,Pr=!1,Mr=!1,Xs=!1,Vl=!1,Rr=!1,Gc=!0,xm=!1;const km="user-content-";let gu=!0,Yc=!1,Ca={},zl=null;const mu=Xt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Lm=null;const Zc=Xt({},["audio","video","img","source","image","track"]);let sl=null;const Js=Xt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ya="http://www.w3.org/1998/Math/MathML",ol="http://www.w3.org/2000/svg",Cn="http://www.w3.org/1999/xhtml";let Eo=Cn,pu=!1,Ar=null;const ri=Xt({},[ya,ol,Cn],PF);let Qc=null;const iv=["application/xhtml+xml","text/html"],nv="text/html";let Dn=null,Ul=null;const sv=t.createElement("form"),Dm=function(ee){return ee instanceof RegExp||ee instanceof Function},Gh=function(){let ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ul&&Ul===ee)){if((!ee||typeof ee!="object")&&(ee={}),ee=Um(ee),Qc=iv.indexOf(ee.PARSER_MEDIA_TYPE)===-1?nv:ee.PARSER_MEDIA_TYPE,Dn=Qc==="application/xhtml+xml"?PF:yN,be=Jl(ee,"ALLOWED_TAGS")?Xt({},ee.ALLOWED_TAGS,Dn):Qe,Me=Jl(ee,"ALLOWED_ATTR")?Xt({},ee.ALLOWED_ATTR,Dn):Ze,Ar=Jl(ee,"ALLOWED_NAMESPACES")?Xt({},ee.ALLOWED_NAMESPACES,PF):ri,sl=Jl(ee,"ADD_URI_SAFE_ATTR")?Xt(Um(Js),ee.ADD_URI_SAFE_ATTR,Dn):Js,Lm=Jl(ee,"ADD_DATA_URI_TAGS")?Xt(Um(Zc),ee.ADD_DATA_URI_TAGS,Dn):Zc,zl=Jl(ee,"FORBID_CONTENTS")?Xt({},ee.FORBID_CONTENTS,Dn):mu,Et=Jl(ee,"FORBID_TAGS")?Xt({},ee.FORBID_TAGS,Dn):{},Ve=Jl(ee,"FORBID_ATTR")?Xt({},ee.FORBID_ATTR,Dn):{},Ca=Jl(ee,"USE_PROFILES")?ee.USE_PROFILES:!1,Tt=ee.ALLOW_ARIA_ATTR!==!1,Ei=ee.ALLOW_DATA_ATTR!==!1,Wt=ee.ALLOW_UNKNOWN_PROTOCOLS||!1,qt=ee.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ut=ee.SAFE_FOR_TEMPLATES||!1,qi=ee.SAFE_FOR_XML!==!1,Ln=ee.WHOLE_DOCUMENT||!1,Xs=ee.RETURN_DOM||!1,Vl=ee.RETURN_DOM_FRAGMENT||!1,Rr=ee.RETURN_TRUSTED_TYPE||!1,Mr=ee.FORCE_BODY||!1,Gc=ee.SANITIZE_DOM!==!1,xm=ee.SANITIZE_NAMED_PROPS||!1,gu=ee.KEEP_CONTENT!==!1,Yc=ee.IN_PLACE||!1,ge=ee.ALLOWED_URI_REGEXP||yce,Eo=ee.NAMESPACE||Cn,at=ee.CUSTOM_ELEMENT_HANDLING||{},ee.CUSTOM_ELEMENT_HANDLING&&Dm(ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(at.tagNameCheck=ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ee.CUSTOM_ELEMENT_HANDLING&&Dm(ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(at.attributeNameCheck=ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ee.CUSTOM_ELEMENT_HANDLING&&typeof ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(at.allowCustomizedBuiltInElements=ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ut&&(Ei=!1),Vl&&(Xs=!0),Ca&&(be=Xt({},tQ),Me=[],Ca.html===!0&&(Xt(be,eQ),Xt(Me,iQ)),Ca.svg===!0&&(Xt(be,MF),Xt(Me,OF),Xt(Me,KD)),Ca.svgFilters===!0&&(Xt(be,RF),Xt(Me,OF),Xt(Me,KD)),Ca.mathMl===!0&&(Xt(be,AF),Xt(Me,nQ),Xt(Me,KD))),ee.ADD_TAGS&&(be===Qe&&(be=Um(be)),Xt(be,ee.ADD_TAGS,Dn)),ee.ADD_ATTR&&(Me===Ze&&(Me=Um(Me)),Xt(Me,ee.ADD_ATTR,Dn)),ee.ADD_URI_SAFE_ATTR&&Xt(sl,ee.ADD_URI_SAFE_ATTR,Dn),ee.FORBID_CONTENTS&&(zl===mu&&(zl=Um(zl)),Xt(zl,ee.FORBID_CONTENTS,Dn)),gu&&(be["#text"]=!0),Ln&&Xt(be,["html","head","body"]),be.table&&(Xt(be,["tbody"]),delete Et.tbody),ee.TRUSTED_TYPES_POLICY){if(typeof ee.TRUSTED_TYPES_POLICY.createHTML!="function")throw B1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ee.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw B1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=ee.TRUSTED_TYPES_POLICY,S=y.createHTML("")}else y===void 0&&(y=WDe(f,s)),y!==null&&typeof S=="string"&&(S=y.createHTML(""));Sr&&Sr(ee),Ul=ee}},pt=Xt({},["mi","mo","mn","ms","mtext"]),A=Xt({},["annotation-xml"]),W=Xt({},["title","style","font","a","script"]),V=Xt({},[...MF,...RF,...DDe]),$=Xt({},[...AF,...EDe]),Y=function(ee){let Ne=w(ee);(!Ne||!Ne.tagName)&&(Ne={namespaceURI:Eo,tagName:"template"});const Ue=yN(ee.tagName),Ki=yN(Ne.tagName);return Ar[ee.namespaceURI]?ee.namespaceURI===ol?Ne.namespaceURI===Cn?Ue==="svg":Ne.namespaceURI===ya?Ue==="svg"&&(Ki==="annotation-xml"||pt[Ki]):!!V[Ue]:ee.namespaceURI===ya?Ne.namespaceURI===Cn?Ue==="math":Ne.namespaceURI===ol?Ue==="math"&&A[Ki]:!!$[Ue]:ee.namespaceURI===Cn?Ne.namespaceURI===ol&&!A[Ki]||Ne.namespaceURI===ya&&!pt[Ki]?!1:!$[Ue]&&(W[Ue]||!V[Ue]):!!(Qc==="application/xhtml+xml"&&Ar[ee.namespaceURI]):!1},oe=function(ee){F1(e.removed,{element:ee});try{w(ee).removeChild(ee)}catch{_(ee)}},he=function(ee,Ne){try{F1(e.removed,{attribute:Ne.getAttributeNode(ee),from:Ne})}catch{F1(e.removed,{attribute:null,from:Ne})}if(Ne.removeAttribute(ee),ee==="is"&&!Me[ee])if(Xs||Vl)try{oe(Ne)}catch{}else try{Ne.setAttribute(ee,"")}catch{}},Ie=function(ee){let Ne=null,Ue=null;if(Mr)ee="<remove></remove>"+ee;else{const ls=JZ(ee,/^[\r\n\t ]+/);Ue=ls&&ls[0]}Qc==="application/xhtml+xml"&&Eo===Cn&&(ee='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ee+"</body></html>");const Ki=y?y.createHTML(ee):ee;if(Eo===Cn)try{Ne=new h().parseFromString(Ki,Qc)}catch{}if(!Ne||!Ne.documentElement){Ne=x.createDocument(Eo,"template",null);try{Ne.documentElement.innerHTML=pu?S:Ki}catch{}}const ys=Ne.body||Ne.documentElement;return ee&&Ue&&ys.insertBefore(t.createTextNode(Ue),ys.childNodes[0]||null),Eo===Cn?N.call(Ne,Ln?"html":"body")[0]:Ln?Ne.documentElement:ys},Oe=function(ee){return k.call(ee.ownerDocument||ee,ee,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},ht=function(ee){return ee instanceof u&&(typeof ee.nodeName!="string"||typeof ee.textContent!="string"||typeof ee.removeChild!="function"||!(ee.attributes instanceof d)||typeof ee.removeAttribute!="function"||typeof ee.setAttribute!="function"||typeof ee.namespaceURI!="string"||typeof ee.insertBefore!="function"||typeof ee.hasChildNodes!="function")},Vt=function(ee){return typeof a=="function"&&ee instanceof a},Kt=function(ee,Ne,Ue){O[ee]&&qD(O[ee],Ki=>{Ki.call(e,Ne,Ue,Ul)})},Ai=function(ee){let Ne=null;if(Kt("beforeSanitizeElements",ee,null),ht(ee))return oe(ee),!0;const Ue=Dn(ee.nodeName);if(Kt("uponSanitizeElement",ee,{tagName:Ue,allowedTags:be}),ee.hasChildNodes()&&!Vt(ee.firstElementChild)&&er(/<[/\w]/g,ee.innerHTML)&&er(/<[/\w]/g,ee.textContent)||ee.nodeType===j1.progressingInstruction||qi&&ee.nodeType===j1.comment&&er(/<[/\w]/g,ee.data))return oe(ee),!0;if(!be[Ue]||Et[Ue]){if(!Et[Ue]&&As(Ue)&&(at.tagNameCheck instanceof RegExp&&er(at.tagNameCheck,Ue)||at.tagNameCheck instanceof Function&&at.tagNameCheck(Ue)))return!1;if(gu&&!zl[Ue]){const Ki=w(ee)||ee.parentNode,ys=v(ee)||ee.childNodes;if(ys&&Ki){const ls=ys.length;for(let eo=ls-1;eo>=0;--eo){const Sa=m(ys[eo],!0);Sa.__removalCount=(ee.__removalCount||0)+1,Ki.insertBefore(Sa,b(ee))}}}return oe(ee),!0}return ee instanceof l&&!Y(ee)||(Ue==="noscript"||Ue==="noembed"||Ue==="noframes")&&er(/<\/no(script|embed|frames)/i,ee.innerHTML)?(oe(ee),!0):(ut&&ee.nodeType===j1.text&&(Ne=ee.textContent,qD([B,z,F],Ki=>{Ne=W1(Ne,Ki," ")}),ee.textContent!==Ne&&(F1(e.removed,{element:ee.cloneNode()}),ee.textContent=Ne)),Kt("afterSanitizeElements",ee,null),!1)},Oi=function(ee,Ne,Ue){if(Gc&&(Ne==="id"||Ne==="name")&&(Ue in t||Ue in sv))return!1;if(!(Ei&&!Ve[Ne]&&er(K,Ne))){if(!(Tt&&er(Z,Ne))){if(!Me[Ne]||Ve[Ne]){if(!(As(ee)&&(at.tagNameCheck instanceof RegExp&&er(at.tagNameCheck,ee)||at.tagNameCheck instanceof Function&&at.tagNameCheck(ee))&&(at.attributeNameCheck instanceof RegExp&&er(at.attributeNameCheck,Ne)||at.attributeNameCheck instanceof Function&&at.attributeNameCheck(Ne))||Ne==="is"&&at.allowCustomizedBuiltInElements&&(at.tagNameCheck instanceof RegExp&&er(at.tagNameCheck,Ue)||at.tagNameCheck instanceof Function&&at.tagNameCheck(Ue))))return!1}else if(!sl[Ne]){if(!er(ge,W1(Ue,q,""))){if(!((Ne==="src"||Ne==="xlink:href"||Ne==="href")&&ee!=="script"&&SDe(Ue,"data:")===0&&Lm[ee])){if(!(Wt&&!er(re,W1(Ue,q,"")))){if(Ue)return!1}}}}}}return!0},As=function(ee){return ee!=="annotation-xml"&&JZ(ee,J)},No=function(ee){Kt("beforeSanitizeAttributes",ee,null);const{attributes:Ne}=ee;if(!Ne)return;const Ue={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Me};let Ki=Ne.length;for(;Ki--;){const ys=Ne[Ki],{name:ls,namespaceURI:eo,value:Sa}=ys,Zh=Dn(ls);let Os=ls==="value"?Sa:xDe(Sa);if(Ue.attrName=Zh,Ue.attrValue=Os,Ue.keepAttr=!0,Ue.forceKeepAttr=void 0,Kt("uponSanitizeAttribute",ee,Ue),Os=Ue.attrValue,Ue.forceKeepAttr||(he(ls,ee),!Ue.keepAttr))continue;if(!qt&&er(/\/>/i,Os)){he(ls,ee);continue}ut&&qD([B,z,F],L1=>{Os=W1(Os,L1," ")});const k1=Dn(ee.nodeName);if(Oi(k1,Zh,Os)){if(xm&&(Zh==="id"||Zh==="name")&&(he(ls,ee),Os=km+Os),qi&&er(/((--!?|])>)|<\/(style|title)/i,Os)){he(ls,ee);continue}if(y&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!eo)switch(f.getAttributeType(k1,Zh)){case"TrustedHTML":{Os=y.createHTML(Os);break}case"TrustedScriptURL":{Os=y.createScriptURL(Os);break}}try{eo?ee.setAttributeNS(eo,ls,Os):ee.setAttribute(ls,Os),ht(ee)?oe(ee):XZ(e.removed)}catch{}}}Kt("afterSanitizeAttributes",ee,null)},Yh=function Xe(ee){let Ne=null;const Ue=Oe(ee);for(Kt("beforeSanitizeShadowDOM",ee,null);Ne=Ue.nextNode();)Kt("uponSanitizeShadowNode",Ne,null),!Ai(Ne)&&(Ne.content instanceof o&&Xe(Ne.content),No(Ne));Kt("afterSanitizeShadowDOM",ee,null)};return e.sanitize=function(Xe){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ne=null,Ue=null,Ki=null,ys=null;if(pu=!Xe,pu&&(Xe="<!-->"),typeof Xe!="string"&&!Vt(Xe))if(typeof Xe.toString=="function"){if(Xe=Xe.toString(),typeof Xe!="string")throw B1("dirty is not a string, aborting")}else throw B1("toString is not a function");if(!e.isSupported)return Xe;if(Pr||Gh(ee),e.removed=[],typeof Xe=="string"&&(Yc=!1),Yc){if(Xe.nodeName){const Sa=Dn(Xe.nodeName);if(!be[Sa]||Et[Sa])throw B1("root node is forbidden and cannot be sanitized in-place")}}else if(Xe instanceof a)Ne=Ie("<!---->"),Ue=Ne.ownerDocument.importNode(Xe,!0),Ue.nodeType===j1.element&&Ue.nodeName==="BODY"||Ue.nodeName==="HTML"?Ne=Ue:Ne.appendChild(Ue);else{if(!Xs&&!ut&&!Ln&&Xe.indexOf("<")===-1)return y&&Rr?y.createHTML(Xe):Xe;if(Ne=Ie(Xe),!Ne)return Xs?null:Rr?S:""}Ne&&Mr&&oe(Ne.firstChild);const ls=Oe(Yc?Xe:Ne);for(;Ki=ls.nextNode();)Ai(Ki)||(Ki.content instanceof o&&Yh(Ki.content),No(Ki));if(Yc)return Xe;if(Xs){if(Vl)for(ys=D.call(Ne.ownerDocument);Ne.firstChild;)ys.appendChild(Ne.firstChild);else ys=Ne;return(Me.shadowroot||Me.shadowrootmode)&&(ys=R.call(i,ys,!0)),ys}let eo=Ln?Ne.outerHTML:Ne.innerHTML;return Ln&&be["!doctype"]&&Ne.ownerDocument&&Ne.ownerDocument.doctype&&Ne.ownerDocument.doctype.name&&er(Sce,Ne.ownerDocument.doctype.name)&&(eo="<!DOCTYPE "+Ne.ownerDocument.doctype.name+`>
`+eo),ut&&qD([B,z,F],Sa=>{eo=W1(eo,Sa," ")}),y&&Rr?y.createHTML(eo):eo},e.setConfig=function(){let Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Gh(Xe),Pr=!0},e.clearConfig=function(){Ul=null,Pr=!1},e.isValidAttribute=function(Xe,ee,Ne){Ul||Gh({});const Ue=Dn(Xe),Ki=Dn(ee);return Oi(Ue,Ki,Ne)},e.addHook=function(Xe,ee){typeof ee=="function"&&(O[Xe]=O[Xe]||[],F1(O[Xe],ee))},e.removeHook=function(Xe){if(O[Xe])return XZ(O[Xe])},e.removeHooks=function(Xe){O[Xe]&&(O[Xe]=[])},e.removeAllHooks=function(){O={}},e}var au=xce();au.version;au.isSupported;const kce=au.sanitize;au.setConfig;au.clearConfig;au.isValidAttribute;const Lce=au.addHook,Dce=au.removeHook;au.removeHooks;au.removeAllHooks;var je;(function(n){n.inMemory="inmemory",n.vscode="vscode",n.internal="private",n.walkThrough="walkThrough",n.walkThroughSnippet="walkThroughSnippet",n.http="http",n.https="https",n.file="file",n.mailto="mailto",n.untitled="untitled",n.data="data",n.command="command",n.vscodeRemote="vscode-remote",n.vscodeRemoteResource="vscode-remote-resource",n.vscodeManagedRemoteResource="vscode-managed-remote-resource",n.vscodeUserData="vscode-userdata",n.vscodeCustomEditor="vscode-custom-editor",n.vscodeNotebookCell="vscode-notebook-cell",n.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",n.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",n.vscodeNotebookCellOutput="vscode-notebook-cell-output",n.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",n.vscodeNotebookMetadata="vscode-notebook-metadata",n.vscodeInteractiveInput="vscode-interactive-input",n.vscodeSettings="vscode-settings",n.vscodeWorkspaceTrust="vscode-workspace-trust",n.vscodeTerminal="vscode-terminal",n.vscodeChatCodeBlock="vscode-chat-code-block",n.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",n.vscodeChatSesssion="vscode-chat-editor",n.webviewPanel="webview-panel",n.vscodeWebview="vscode-webview",n.extension="extension",n.vscodeFileResource="vscode-file",n.tmp="tmp",n.vsls="vsls",n.vscodeSourceControl="vscode-scm",n.commentsInput="comment",n.codeSetting="code-setting",n.outputChannel="output"})(je||(je={}));function iA(n,e){return Le.isUri(n)?ew(n.scheme,e):cz(n,e+":")}function _B(n,...e){return e.some(t=>iA(n,t))}const BDe="tkn";class HDe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return dn.join(this._serverRootPath,je.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return He(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const s=this._ports[t],o=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(r+=`&${BDe}=${encodeURIComponent(o)}`),Le.from({scheme:Wb?this._preferredWebSchema:je.vscodeRemoteResource,authority:`${i}:${s}`,path:this._remoteResourcesPath,query:r})}}const Ece=new HDe,jDe="vscode-app",VS=class VS{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===je.vscodeRemote?Ece.rewrite(e):e.scheme===je.file&&(xc||Gxe===`${je.vscodeFileResource}://${VS.FALLBACK_AUTHORITY}`)?e.with({scheme:je.vscodeFileResource,authority:e.authority||VS.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(Le.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return Le.joinPath(Le.parse(i,!0),e);const s=bLe(i,e);return Le.file(s)}return Le.parse(t.toUrl(e))}};VS.FALLBACK_AUTHORITY=jDe;let bB=VS;const nA=new bB;var vB;(function(n){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);n.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(o){let r;typeof o=="string"?r=new URL(o).searchParams:o instanceof URL?r=o.searchParams:Le.isUri(o)&&(r=new URL(o.toString(!0)).searchParams);const a=r==null?void 0:r.get(t);if(a)return e.get(a)}n.getHeadersFromQuery=i;function s(o,r,a){if(!globalThis.crossOriginIsolated)return;const l=r&&a?"3":a?"2":"1";o instanceof URLSearchParams?o.set(t,l):o[t]=l}n.addSearchParam=s})(vB||(vB={}));function sA(n){return oA(n,0)}function oA(n,e){switch(typeof n){case"object":return n===null?Qu(349,e):Array.isArray(n)?zDe(n,e):UDe(n,e);case"string":return bz(n,e);case"boolean":return VDe(n,e);case"number":return Qu(n,e);case"undefined":return Qu(937,e);default:return Qu(617,e)}}function Qu(n,e){return(e<<5)-e+n|0}function VDe(n,e){return Qu(n?433:863,e)}function bz(n,e){e=Qu(149417,e);for(let t=0,i=n.length;t<i;t++)e=Qu(n.charCodeAt(t),e);return e}function zDe(n,e){return e=Qu(104579,e),n.reduce((t,i)=>oA(i,t),e)}function UDe(n,e){return e=Qu(181387,e),Object.keys(n).sort().reduce((t,i)=>(t=bz(i,t),oA(n[i],t)),e)}function FF(n,e,t=32){const i=t-e,s=~((1<<i)-1);return(n<<e|(s&n)>>>i)>>>0}function oQ(n,e=0,t=n.byteLength,i=0){for(let s=0;s<t;s++)n[e+s]=i}function $De(n,e,t="0"){for(;n.length<e;)n=t+n;return n}function V1(n,e=32){return n instanceof ArrayBuffer?Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join(""):$De((n>>>0).toString(16),e/4)}const jM=class jM{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let s=this._buffLen,o=this._leftoverHighSurrogate,r,a;for(o!==0?(r=o,a=-1,o=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(Pn(r))if(a+1<t){const c=e.charCodeAt(a+1);lb(c)?(a++,l=dz(r,c)):l=65533}else{o=r;break}else lb(r)&&(l=65533);if(s=this._push(i,s,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=o}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),V1(this._h0)+V1(this._h1)+V1(this._h2)+V1(this._h3)+V1(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,oQ(this._buff,this._buffLen),this._buffLen>56&&(this._step(),oQ(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=jM._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,FF(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let i=this._h0,s=this._h1,o=this._h2,r=this._h3,a=this._h4,l,c,d;for(let u=0;u<80;u++)u<20?(l=s&o|~s&r,c=1518500249):u<40?(l=s^o^r,c=1859775393):u<60?(l=s&o|s&r|o&r,c=2400959708):(l=s^o^r,c=3395469782),d=FF(i,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=r,r=o,o=FF(s,30),s=i,i=d;this._h0=this._h0+i&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}};jM._bigBlock32=new DataView(new ArrayBuffer(320));let wB=jM;const{registerWindow:IJe,getWindow:Te,getDocument:TJe,getWindows:Nce,getWindowsCount:qDe,getWindowId:eT,getWindowById:rQ,hasWindow:PJe,onDidRegisterWindow:rA,onWillUnregisterWindow:KDe,onDidUnregisterWindow:GDe}=function(){const n=new Map;WLe(Gt,1);const e={window:Gt,disposables:new Q};n.set(Gt.vscodeWindowId,e);const t=new j,i=new j,s=new j;function o(r,a){return(typeof r=="number"?n.get(r):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:i.event,registerWindow(r){if(n.has(r.vscodeWindowId))return U.None;const a=new Q,l={window:r,disposables:a.add(new Q)};return n.set(r.vscodeWindowId,l),a.add(xe(()=>{n.delete(r.vscodeWindowId),i.fire(r)})),a.add(G(r,le.BEFORE_UNLOAD,()=>{s.fire(r)})),t.fire(l),a},getWindows(){return n.values()},getWindowsCount(){return n.size},getWindowId(r){return r.vscodeWindowId},hasWindow(r){return n.has(r)},getWindowById:o,getWindow(r){var c;const a=r;if((c=a==null?void 0:a.ownerDocument)!=null&&c.defaultView)return a.ownerDocument.defaultView.window;const l=r;return l!=null&&l.view?l.view.window:Gt},getDocument(r){return Te(r).document}}}();function os(n){for(;n.firstChild;)n.firstChild.remove()}class YDe{constructor(e,t,i,s){this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function G(n,e,t,i){return new YDe(n,e,t,i)}function Ice(n,e){return function(t){return e(new Sl(n,t))}}function ZDe(n){return function(e){return n(new ti(e))}}const Fi=function(e,t,i,s){let o=i;return t==="click"||t==="mousedown"||t==="contextmenu"?o=Ice(Te(e),i):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=ZDe(i)),G(e,t,o,s)},QDe=function(e,t,i){const s=Ice(Te(e),t);return XDe(e,s,i)};function XDe(n,e,t){return G(n,Ac&&mz.pointerEvents?le.POINTER_DOWN:le.MOUSE_DOWN,e,t)}function C0(n,e,t){return sS(n,e,t)}class WF extends vce{constructor(e,t){super(e,t)}}let tT,xr;class vz extends _z{constructor(e){super(),this.defaultTarget=e&&Te(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}}class BF{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){He(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const n=new Map,e=new Map,t=new Map,i=new Map,s=o=>{t.set(o,!1);const r=n.get(o)??[];for(e.set(o,r),n.set(o,[]),i.set(o,!0);r.length>0;)r.sort(BF.sort),r.shift().execute();i.set(o,!1)};xr=(o,r,a=0)=>{const l=eT(o),c=new BF(r,a);let d=n.get(l);return d||(d=[],n.set(l,d)),d.push(c),t.get(l)||(t.set(l,!0),o.requestAnimationFrame(()=>s(l))),c},tT=(o,r,a)=>{const l=eT(o);if(i.get(l)){const c=new BF(r,a);let d=e.get(l);return d||(d=[],e.set(l,d)),d.push(c),c}else return xr(o,r,a)}})();function aA(n){return Te(n).getComputedStyle(n,null)}function Gg(n,e){const t=Te(n),i=t.document;if(n!==i.body)return new jt(n.clientWidth,n.clientHeight);if(Ac&&(t!=null&&t.visualViewport))return new jt(t.visualViewport.width,t.visualViewport.height);if(t!=null&&t.innerWidth&&t.innerHeight)return new jt(t.innerWidth,t.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new jt(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new jt(i.documentElement.clientWidth,i.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class sn{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,i){const s=aA(e),o=s?s.getPropertyValue(t):"0";return sn.convertToPixels(e,o)}static getBorderLeftWidth(e){return sn.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return sn.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return sn.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return sn.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return sn.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return sn.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return sn.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return sn.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return sn.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return sn.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return sn.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return sn.getDimension(e,"margin-bottom","marginBottom")}}const gp=class gp{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new gp(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof gp?e:new gp(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};gp.None=new gp(0,0);let jt=gp;function Tce(n){let e=n.offsetParent,t=n.offsetTop,i=n.offsetLeft;for(;(n=n.parentNode)!==null&&n!==n.ownerDocument.body&&n!==n.ownerDocument.documentElement;){t-=n.scrollTop;const s=Mce(n)?null:aA(n);s&&(i-=s.direction!=="rtl"?n.scrollLeft:-n.scrollLeft),n===e&&(i+=sn.getBorderLeftWidth(n),t+=sn.getBorderTopWidth(n),t+=n.offsetTop,i+=n.offsetLeft,e=n.offsetParent)}return{left:i,top:t}}function JDe(n,e,t){typeof e=="number"&&(n.style.width=`${e}px`),typeof t=="number"&&(n.style.height=`${t}px`)}function Qi(n){const e=n.getBoundingClientRect(),t=Te(n);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function Pce(n){let e=n,t=1;do{const i=aA(e).zoom;i!=null&&i!=="1"&&(t*=i),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function lr(n){const e=sn.getMarginLeft(n)+sn.getMarginRight(n);return n.offsetWidth+e}function HF(n){const e=sn.getBorderLeftWidth(n)+sn.getBorderRightWidth(n),t=sn.getPaddingLeft(n)+sn.getPaddingRight(n);return n.offsetWidth-e-t}function eEe(n){const e=sn.getBorderTopWidth(n)+sn.getBorderBottomWidth(n),t=sn.getPaddingTop(n)+sn.getPaddingBottom(n);return n.offsetHeight-e-t}function Xu(n){const e=sn.getMarginTop(n)+sn.getMarginBottom(n);return n.offsetHeight+e}function Rn(n,e){return!!(e!=null&&e.contains(n))}function tEe(n,e,t){for(;n&&n.nodeType===n.ELEMENT_NODE;){if(n.classList.contains(e))return n;if(t){if(typeof t=="string"){if(n.classList.contains(t))return null}else if(n===t)return null}n=n.parentNode}return null}function jF(n,e,t){return!!tEe(n,e,t)}function Mce(n){return n&&!!n.host&&!!n.mode}function iT(n){return!!db(n)}function db(n){var e;for(;n.parentNode;){if(n===((e=n.ownerDocument)==null?void 0:e.body))return null;n=n.parentNode}return Mce(n)?n:null}function _s(){let n=e1().activeElement;for(;n!=null&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function lA(n){return _s()===n}function Rce(n){return Rn(_s(),n)}function e1(){return qDe()<=1?Gt.document:Array.from(Nce()).map(({window:e})=>e.document).find(e=>e.hasFocus())??Gt.document}function y0(){var e;return((e=e1().defaultView)==null?void 0:e.window)??Gt}const wz=new Map;function Ace(){return new iEe}class iEe{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=ha(Gt.document.head,t=>t.innerText=e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function ha(n=Gt.document.head,e,t){const i=document.createElement("style");if(i.type="text/css",i.media="screen",e==null||e(i),n.appendChild(i),t&&t.add(xe(()=>i.remove())),n===Gt.document.head){const s=new Set;wz.set(i,s);for(const{window:o,disposables:r}of Nce()){if(o===Gt)continue;const a=r.add(nEe(i,s,o));t==null||t.add(a)}}return i}function nEe(n,e,t){var o,r;const i=new Q,s=n.cloneNode(!0);t.document.head.appendChild(s),i.add(xe(()=>s.remove()));for(const a of Fce(n))(r=s.sheet)==null||r.insertRule(a.cssText,(o=s.sheet)==null?void 0:o.cssRules.length);return i.add(sEe.observe(n,i,{childList:!0})(()=>{s.textContent=n.textContent})),e.add(s),i.add(xe(()=>e.delete(s))),i}const sEe=new class{constructor(){this.mutationObservers=new Map}observe(n,e,t){let i=this.mutationObservers.get(n);i||(i=new Map,this.mutationObservers.set(n,i));const s=sA(t);let o=i.get(s);if(o)o.users+=1;else{const r=new j,a=new MutationObserver(c=>r.fire(c));a.observe(n,t);const l=o={users:1,observer:a,onDidMutate:r.event};e.add(xe(()=>{l.users-=1,l.users===0&&(r.dispose(),a.disconnect(),i==null||i.delete(s),(i==null?void 0:i.size)===0&&this.mutationObservers.delete(n))})),i.set(s,o)}return o.onDidMutate}};let VF=null;function Oce(){return VF||(VF=ha()),VF}function Fce(n){var e,t;return(e=n==null?void 0:n.sheet)!=null&&e.rules?n.sheet.rules:(t=n==null?void 0:n.sheet)!=null&&t.cssRules?n.sheet.cssRules:[]}function nT(n,e,t=Oce()){var i;if(!(!t||!e)){(i=t.sheet)==null||i.insertRule(`${n} {${e}}`,0);for(const s of wz.get(t)??[])nT(n,e,s)}}function CB(n,e=Oce()){var s;if(!e)return;const t=Fce(e),i=[];for(let o=0;o<t.length;o++){const r=t[o];oEe(r)&&r.selectorText.indexOf(n)!==-1&&i.push(o)}for(let o=i.length-1;o>=0;o--)(s=e.sheet)==null||s.deleteRule(i[o]);for(const o of wz.get(e)??[])CB(n,o)}function oEe(n){return typeof n.selectorText=="string"}function Fn(n){return n instanceof HTMLElement||n instanceof Te(n).HTMLElement}function aQ(n){return n instanceof HTMLAnchorElement||n instanceof Te(n).HTMLAnchorElement}function rEe(n){return n instanceof SVGElement||n instanceof Te(n).SVGElement}function Cz(n){return n instanceof MouseEvent||n instanceof Te(n).MouseEvent}function Hu(n){return n instanceof KeyboardEvent||n instanceof Te(n).KeyboardEvent}const le={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:jp?"webkitAnimationStart":"animationstart",ANIMATION_END:jp?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:jp?"webkitAnimationIteration":"animationiteration"};function aEe(n){const e=n;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const gt={stop:(n,e)=>(n.preventDefault(),e&&n.stopPropagation(),n)};function lEe(n){const e=[];for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)e[t]=n.scrollTop,n=n.parentNode;return e}function cEe(n,e){for(let t=0;n&&n.nodeType===n.ELEMENT_NODE;t++)n.scrollTop!==e[t]&&(n.scrollTop=e[t]),n=n.parentNode}class sT extends U{static hasFocusWithin(e){if(Fn(e)){const t=db(e),i=t?t.activeElement:e.ownerDocument.activeElement;return Rn(i,e)}else{const t=e;return Rn(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new j),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new j),this.onDidBlur=this._onDidBlur.event;let t=sT.hasFocusWithin(e),i=!1;const s=()=>{i=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(i=!0,(Fn(e)?Te(e):e).setTimeout(()=>{i&&(i=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{sT.hasFocusWithin(e)!==t&&(t?o():s())},this._register(G(e,le.FOCUS,s,!0)),this._register(G(e,le.BLUR,o,!0)),Fn(e)&&(this._register(G(e,le.FOCUS_IN,()=>this._refreshStateHandler())),this._register(G(e,le.FOCUS_OUT,()=>this._refreshStateHandler())))}}function Fc(n){return new sT(n)}function dEe(n,e){return n.after(e),e}function ne(n,...e){if(n.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function yz(n,e){return n.insertBefore(e,n.firstChild),e}function rs(n,...e){n.innerText="",ne(n,...e)}const uEe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var jx;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.SVG="http://www.w3.org/2000/svg"})(jx||(jx={}));function Wce(n,e,t,...i){const s=uEe.exec(e);if(!s)throw new Error("Bad use of emmet");const o=s[1]||"div";let r;return n!==jx.HTML?r=document.createElementNS(n,o):r=document.createElement(o),s[3]&&(r.id=s[3]),s[4]&&(r.className=s[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...i),r}function ce(n,e,...t){return Wce(jx.HTML,n,e,...t)}ce.SVG=function(n,e,...t){return Wce(jx.SVG,n,e,...t)};function hEe(n,...e){n?hr(...e):ro(...e)}function hr(...n){for(const e of n)e.style.display="",e.removeAttribute("aria-hidden")}function ro(...n){for(const e of n)e.style.display="none",e.setAttribute("aria-hidden","true")}function lQ(n,e){const t=n.devicePixelRatio*e;return Math.max(1,Math.floor(t))/n.devicePixelRatio}function Bce(n){Gt.open(n,"_blank","noopener")}function fEe(n,e){const t=()=>{e(),i=xr(n,t)};let i=xr(n,t);return xe(()=>i.dispose())}Ece.setPreferredWebSchema(/^https:/.test(Gt.location.href)?"https":"http");function Th(n){return n?`url('${nA.uriToBrowserUri(n).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function zF(n){return`'${n.replace(/'/g,"%27")}'`}function gh(n,e){if(n!==void 0){const t=n.match(/^\s*var\((.+)\)$/);if(t){const i=t[1].split(",",2);return i.length===2&&(e=gh(i[1].trim(),e)),`var(${i[0]}, ${e})`}return n}return e}function gEe(n,e=!1){const t=document.createElement("a");return Lce("afterSanitizeAttributes",i=>{for(const s of["href","src"])if(i.hasAttribute(s)){const o=i.getAttribute(s);if(s==="href"&&o.startsWith("#"))continue;if(t.href=o,!n.includes(t.protocol.replace(/:$/,""))){if(e&&s==="src"&&t.href.startsWith("data:"))continue;i.removeAttribute(s)}}}),xe(()=>{Dce("afterSanitizeAttributes")})}const mEe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class Ju extends j{constructor(){super(),this._subscriptions=new Q,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(ue.runAndSubscribe(rA,({window:e,disposables:t})=>this.registerListeners(e,t),{window:Gt,disposables:this._subscriptions}))}registerListeners(e,t){t.add(G(e,"keydown",i=>{if(i.defaultPrevented)return;const s=new ti(i);if(!(s.keyCode===6&&i.repeat)){if(i.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(i.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(i.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(i.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(s.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=i,this.fire(this._keyStatus))}},!0)),t.add(G(e,"keyup",i=>{i.defaultPrevented||(!i.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!i.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!i.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!i.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=i.altKey,this._keyStatus.ctrlKey=i.ctrlKey,this._keyStatus.metaKey=i.metaKey,this._keyStatus.shiftKey=i.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=i,this.fire(this._keyStatus)))},!0)),t.add(G(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(G(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(G(e.document.body,"mousemove",i=>{i.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(G(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Ju.instance||(Ju.instance=new Ju),Ju.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class pEe extends U{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(G(this.element,le.DRAG_START,e=>{var t,i;(i=(t=this.callbacks).onDragStart)==null||i.call(t,e)})),this.callbacks.onDrag&&this._register(G(this.element,le.DRAG,e=>{var t,i;(i=(t=this.callbacks).onDrag)==null||i.call(t,e)})),this._register(G(this.element,le.DRAG_ENTER,e=>{var t,i;this.counter++,this.dragStartTime=e.timeStamp,(i=(t=this.callbacks).onDragEnter)==null||i.call(t,e)})),this._register(G(this.element,le.DRAG_OVER,e=>{var t,i;e.preventDefault(),(i=(t=this.callbacks).onDragOver)==null||i.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(G(this.element,le.DRAG_LEAVE,e=>{var t,i;this.counter--,this.counter===0&&(this.dragStartTime=0,(i=(t=this.callbacks).onDragLeave)==null||i.call(t,e))})),this._register(G(this.element,le.DRAG_END,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDragEnd)==null||i.call(t,e)})),this._register(G(this.element,le.DROP,e=>{var t,i;this.counter=0,this.dragStartTime=0,(i=(t=this.callbacks).onDrop)==null||i.call(t,e)}))}}const Hce=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function rt(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const s=Hce.exec(n);if(!s||!s.groups)throw new Error("Bad use of h");const o=s.groups.tag||"div",r=document.createElement(o);s.groups.id&&(r.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=r),i)for(const c of i)Fn(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,h]of Object.entries(d))r.style.setProperty(oT(u),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?r.tabIndex=d:r.setAttribute(oT(c),d.toString());return l.root=r,l}function dv(n,...e){let t,i;Array.isArray(e[0])?(t={},i=e[0]):(t=e[0]||{},i=e[1]);const s=Hce.exec(n);if(!s||!s.groups)throw new Error("Bad use of h");const o=s.groups.tag||"div",r=document.createElementNS("http://www.w3.org/2000/svg",o);s.groups.id&&(r.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=r),i)for(const c of i)Fn(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,h]of Object.entries(d))r.style.setProperty(oT(u),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?r.tabIndex=d:r.setAttribute(oT(c),d.toString());return l.root=r,l}function oT(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class _Ee extends U{constructor(e){super(),this._onDidChange=this._register(new j),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var i;(i=this._mediaQueryList)==null||i.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class bEe extends U{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new j),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new _Ee(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),i=e.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/s}}class vEe{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=eT(e);let i=this.mapWindowIdToPixelRatioMonitor.get(t);return i||(i=new bEe(e),this.mapWindowIdToPixelRatioMonitor.set(t,i),ue.once(GDe)(({vscodeWindowId:s})=>{s===t&&(i==null||i.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),i}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const Vx=new vEe;class jce{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=ql(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=ql(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=ql(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=ql(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=ql(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=ql(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=ql(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=ql(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=ql(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=ql(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=ql(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function ql(n){return typeof n=="number"?`${n}px`:n}function Ot(n){return new jce(n)}function as(n,e){n instanceof jce?(n.setFontFamily(e.getMassagedFontFamily()),n.setFontWeight(e.fontWeight),n.setFontSize(e.fontSize),n.setFontFeatureSettings(e.fontFeatureSettings),n.setFontVariationSettings(e.fontVariationSettings),n.setLineHeight(e.lineHeight),n.setLetterSpacing(e.letterSpacing)):(n.style.fontFamily=e.getMassagedFontFamily(),n.style.fontWeight=e.fontWeight,n.style.fontSize=e.fontSize+"px",n.style.fontFeatureSettings=e.fontFeatureSettings,n.style.fontVariationSettings=e.fontVariationSettings,n.style.lineHeight=e.lineHeight+"px",n.style.letterSpacing=e.letterSpacing+"px")}class wEe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class Sz{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){var t;this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),(t=this._container)==null||t.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");as(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");as(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const s=document.createElement("div");as(s,this._bareFontInfo),s.style.fontStyle="italic",e.appendChild(s);const o=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=i),r.type===1&&(a=s),a.appendChild(document.createElement("br"));const l=document.createElement("span");Sz._render(l,r),a.appendChild(l),o.push(l)}this._container=e,this._testElements=o}static _render(e,t){if(t.chr===" "){let i="";for(let s=0;s<8;s++)i+=i;e.innerText=i}else{let i=t.chr;for(let s=0;s<8;s++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const i=this._requests[e],s=this._testElements[e];i.fulfill(s.offsetWidth/256)}}}function CEe(n,e,t){new Sz(e,t).read(n)}const Ma=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new j,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(n){n=Math.min(Math.max(-5,n),20),this._zoomLevel!==n&&(this._zoomLevel=n,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},yEe=ct?1.5:1.35,UF=8;class Vp{static createFromValidatedSettings(e,t,i){const s=e.get(49),o=e.get(53),r=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),d=e.get(64);return Vp._create(s,o,r,a,l,c,d,t,i)}static _create(e,t,i,s,o,r,a,l,c){r===0?r=yEe*i:r<UF&&(r=r*i),r=Math.round(r),r<UF&&(r=UF);const d=1+(c?0:Ma.getZoomLevel()*.1);return i*=d,r*=d,o===Rx.TRANSLATE&&(t==="normal"||t==="bold"?o=Rx.OFF:(o=`'wght' ${parseInt(t,10)}`,t="normal")),new Vp({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:i,fontFeatureSettings:s,fontVariationSettings:o,lineHeight:r,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=po.fontFamily,t=Vp._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const SEe=2;class yB extends Vp{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=SEe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class xEe extends U{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new j),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=eT(e);let i=this._cache.get(t);return i||(i=new kEe,this._cache.set(t,i)),i}_writeToCache(e,t,i){this._ensureCache(e).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),i=t.getValues();let s=!1;for(const o of i)o.isTrusted||(s=!0,t.remove(o));s&&this._onDidChange.fire()}readFontInfo(e,t){const i=this._ensureCache(e);if(!i.has(t)){let s=this._actualReadFontInfo(e,t);(s.typicalHalfwidthCharacterWidth<=2||s.typicalFullwidthCharacterWidth<=2||s.spaceWidth<=2||s.maxDigitWidth<=2)&&(s=new yB({pixelRatio:Vx.getInstance(e).value,fontFamily:s.fontFamily,fontWeight:s.fontWeight,fontSize:s.fontSize,fontFeatureSettings:s.fontFeatureSettings,fontVariationSettings:s.fontVariationSettings,lineHeight:s.lineHeight,letterSpacing:s.letterSpacing,isMonospace:s.isMonospace,typicalHalfwidthCharacterWidth:Math.max(s.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(s.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:s.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(s.spaceWidth,5),middotWidth:Math.max(s.middotWidth,5),wsmiddotWidth:Math.max(s.wsmiddotWidth,5),maxDigitWidth:Math.max(s.maxDigitWidth,5)},!1)),this._writeToCache(e,t,s)}return i.get(t)}_createRequest(e,t,i,s){const o=new wEe(e,t);return i.push(o),s==null||s.push(o),o}_actualReadFontInfo(e,t){const i=[],s=[],o=this._createRequest("n",0,i,s),r=this._createRequest("",0,i,null),a=this._createRequest(" ",0,i,s),l=this._createRequest("0",0,i,s),c=this._createRequest("1",0,i,s),d=this._createRequest("2",0,i,s),u=this._createRequest("3",0,i,s),h=this._createRequest("4",0,i,s),f=this._createRequest("5",0,i,s),g=this._createRequest("6",0,i,s),m=this._createRequest("7",0,i,s),_=this._createRequest("8",0,i,s),b=this._createRequest("9",0,i,s),v=this._createRequest("",0,i,s),w=this._createRequest("",0,i,null),y=this._createRequest("",0,i,s),S=this._createRequest("",0,i,null),x="|/-_ilm%";for(let O=0,B=x.length;O<B;O++)this._createRequest(x.charAt(O),0,i,s),this._createRequest(x.charAt(O),1,i,s),this._createRequest(x.charAt(O),2,i,s);CEe(e,t,i);const k=Math.max(l.width,c.width,d.width,u.width,h.width,f.width,g.width,m.width,_.width,b.width);let D=t.fontFeatureSettings===Vg.OFF;const N=s[0].width;for(let O=1,B=s.length;D&&O<B;O++){const z=N-s[O].width;if(z<-.001||z>.001){D=!1;break}}let R=!0;return D&&w.width!==N&&(R=!1),w.width>v.width&&(R=!1),new yB({pixelRatio:Vx.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:D,typicalHalfwidthCharacterWidth:o.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:R,spaceWidth:a.width,middotWidth:y.width,wsmiddotWidth:S.width,maxDigitWidth:k},!0)}}class kEe{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const SB=new xEe;var vc;(function(n){n.serviceIds=new Map,n.DI_TARGET="$di$target",n.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[n.DI_DEPENDENCIES]||[]}n.getServiceDependencies=e})(vc||(vc={}));const ke=dt("instantiationService");function LEe(n,e,t){e[vc.DI_TARGET]===e?e[vc.DI_DEPENDENCIES].push({id:n,index:t}):(e[vc.DI_DEPENDENCIES]=[{id:n,index:t}],e[vc.DI_TARGET]=e)}function dt(n){if(vc.serviceIds.has(n))return vc.serviceIds.get(n);const e=function(t,i,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");LEe(e,t,s)};return e.toString=()=>n,vc.serviceIds.set(n,e),e}const kt=dt("codeEditorService"),gi=dt("modelService"),Zo=dt("textModelService");class br extends U{constructor(e,t="",i="",s=!0,o){super(),this._onDidChange=this._register(new j),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=s,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class ub extends U{constructor(){super(...arguments),this._onWillRun=this._register(new j),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new j),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let i;try{await this.runAction(e,t)}catch(s){i=s}this._onDidRun.fire({action:e,error:i})}async runAction(e,t){await e.run(t)}}const zS=class zS{constructor(){this.id=zS.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new zS,...i]:t=i);return t}async run(){}};zS.ID="vs.actions.separator";let Wn=zS;class ry{get actions(){return this._actions}constructor(e,t,i,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=s,this._actions=i}async run(){}}const VM=class VM extends br{constructor(){super(VM.ID,p("submenu.empty","(empty)"),void 0,!1)}};VM.ID="vs.actions.empty";let xB=VM;function zp(n){return{id:n.id,label:n.label,tooltip:n.tooltip??n.label,class:n.class,enabled:n.enabled??!0,checked:n.checked,run:async(...e)=>n.run(...e)}}var kB;(function(n){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}n.isThemeColor=e})(kB||(kB={}));var Re;(function(n){n.iconNameSegment="[A-Za-z0-9]+",n.iconNameExpression="[A-Za-z0-9-]+",n.iconModifierExpression="~[A-Za-z]+",n.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${n.iconNameExpression})(${n.iconModifierExpression})?$`);function t(h){const f=e.exec(h.id);if(!f)return t(ae.error);const[,g,m]=f,_=["codicon","codicon-"+g];return m&&_.push("codicon-modifier-"+m.substring(1)),_}n.asClassNameArray=t;function i(h){return t(h).join(" ")}n.asClassName=i;function s(h){return"."+t(h).join(".")}n.asCSSSelector=s;function o(h){return h&&typeof h=="object"&&typeof h.id=="string"&&(typeof h.color>"u"||kB.isThemeColor(h.color))}n.isThemeIcon=o;const r=new RegExp(`^\\$\\((${n.iconNameExpression}(?:${n.iconModifierExpression})?)\\)$`);function a(h){const f=r.exec(h);if(!f)return;const[,g]=f;return{id:g}}n.fromString=a;function l(h){return{id:h}}n.fromId=l;function c(h,f){let g=h.id;const m=g.lastIndexOf("~");return m!==-1&&(g=g.substring(0,m)),f&&(g=`${g}~${f}`),{id:g}}n.modify=c;function d(h){const f=h.id.lastIndexOf("~");if(f!==-1)return h.id.substring(f+1)}n.getModifier=d;function u(h,f){var g,m;return h.id===f.id&&((g=h.color)==null?void 0:g.id)===((m=f.color)==null?void 0:m.id)}n.isEqual=u})(Re||(Re={}));const oi=dt("commandService"),bt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new j,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(n,e){if(!n)throw new Error("invalid command");if(typeof n=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:n,handler:e})}if(n.metadata&&Array.isArray(n.metadata.args)){const r=[];for(const l of n.metadata.args)r.push(l.constraint);const a=n.handler;n.handler=function(l,...c){return Wxe(c,r),a(l,...c)}}const{id:t}=n;let i=this._commands.get(t);i||(i=new co,this._commands.set(t,i));const s=i.unshift(n),o=xe(()=>{s();const r=this._commands.get(t);r!=null&&r.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(n,e){return bt.registerCommand(n,(t,...i)=>t.get(oi).executeCommand(e,...i))}getCommand(n){const e=this._commands.get(n);if(!(!e||e.isEmpty()))return _t.first(e)}getCommands(){const n=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&n.set(e,t)}return n}};bt.registerCommand("noop",()=>{});function $F(...n){switch(n.length){case 1:return p("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",n[0]);case 2:return p("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",n[0],n[1]);case 3:return p("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",n[0],n[1],n[2]);default:return}}const DEe=p("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),EEe=p("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");var ah;let z1=(ah=class{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw iz(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error($F("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error($F("&&"));break;case 124:this._match(124)?this._addToken(16):this._error($F("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=ah._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(DEe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(EEe);return}const o=this._input.charCodeAt(e);if(t)t=!1;else if(o===47&&!i){e++;break}else o===91?i=!0:o===92?t=!0:o===93&&(i=!1);e++}for(;e<this._input.length&&ah._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const s=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}},ah._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),ah._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]),ah);const Ns=new Map;Ns.set("false",!1);Ns.set("true",!0);Ns.set("isMac",ct);Ns.set("isLinux",vo);Ns.set("isWindows",vs);Ns.set("isWeb",Wb);Ns.set("isMacNative",ct&&!Wb);Ns.set("isEdge",Jxe);Ns.set("isFirefox",Qxe);Ns.set("isChrome",Ble);Ns.set("isSafari",Xxe);const NEe=Object.prototype.hasOwnProperty,IEe={regexParsingWithErrorRecovery:!0},TEe=p("contextkey.parser.error.emptyString","Empty context key expression"),PEe=p("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),MEe=p("contextkey.parser.error.noInAfterNot","'in' after 'not'."),cQ=p("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),REe=p("contextkey.parser.error.unexpectedToken","Unexpected token"),AEe=p("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),OEe=p("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),FEe=p("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var Ad;let WEe=(Ad=class{constructor(e=IEe){this._config=e,this._scanner=new z1,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:TEe,offset:0,lexeme:"",additionalInfo:PEe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),s=i.type===17?AEe:void 0;throw this._parsingErrors.push({message:REe,offset:i.offset,lexeme:z1.getLexeme(i),additionalInfo:s}),Ad._parseError}return t}catch(t){if(t!==Ad._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:X.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:X.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),wo.INSTANCE;case 12:return this._advance(),qo.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,cQ),t==null?void 0:t.negate()}case 17:return this._advance(),Hb.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),X.true();case 12:return this._advance(),X.false();case 0:{this._advance();const t=this._expr();return this._consume(1,cQ),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const s=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),s.type!==10)throw this._errExpectedButGot("REGEX",s);const o=s.lexeme,r=o.lastIndexOf("/"),a=r===o.length-1?void 0:this._removeFlagsGY(o.substring(r+1));let l;try{l=new RegExp(o.substring(1,r),a)}catch{throw this._errExpectedButGot("REGEX",s)}return zx.create(t,l)}switch(s.type){case 10:case 19:{const o=[s.lexeme];this._advance();let r=this._peek(),a=0;for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&r.type!==15&&r.type!==16;){switch(r.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<r.lexeme.length;h++)r.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;o.push(z1.getLexeme(r)),this._advance(),r=this._peek()}const l=o.join(""),c=l.lastIndexOf("/"),d=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let u;try{u=new RegExp(l.substring(1,c),d)}catch{throw this._errExpectedButGot("REGEX",s)}return X.regex(t,u)}case 18:{const o=s.lexeme;this._advance();let r=null;if(!rce(o)){const a=o.indexOf("/"),l=o.lastIndexOf("/");if(a!==l&&a>=0){const c=o.slice(a+1,l),d=o[l+1]==="i"?"i":"";try{r=new RegExp(c,d)}catch{throw this._errExpectedButGot("REGEX",s)}}}if(r===null)throw this._errExpectedButGot("REGEX",s);return zx.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,MEe);const s=this._value();return X.notIn(t,s)}switch(this._peek().type){case 3:{this._advance();const s=this._value();if(this._previous().type===18)return X.equals(t,s);switch(s){case"true":return X.has(t);case"false":return X.not(t);default:return X.equals(t,s)}}case 4:{this._advance();const s=this._value();if(this._previous().type===18)return X.notEquals(t,s);switch(s){case"true":return X.not(t);case"false":return X.has(t);default:return X.notEquals(t,s)}}case 5:return this._advance(),mA.create(t,this._value());case 6:return this._advance(),pA.create(t,this._value());case 7:return this._advance(),fA.create(t,this._value());case 8:return this._advance(),gA.create(t,this._value());case 13:return this._advance(),X.in(t,this._value());default:return X.has(t)}}case 20:throw this._parsingErrors.push({message:OEe,offset:e.offset,lexeme:"",additionalInfo:FEe}),Ad._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const s=p("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,z1.getLexeme(t)),o=t.offset,r=z1.getLexeme(t);return this._parsingErrors.push({message:s,offset:o,lexeme:r,additionalInfo:i}),Ad._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},Ad._parseError=new Error,Ad);const Oq=class Oq{static false(){return wo.INSTANCE}static true(){return qo.INSTANCE}static has(e){return Bb.create(e)}static equals(e,t){return t1.create(e,t)}static notEquals(e,t){return uA.create(e,t)}static regex(e,t){return zx.create(e,t)}static in(e,t){return cA.create(e,t)}static notIn(e,t){return dA.create(e,t)}static not(e){return Hb.create(e)}static and(...e){return Sp.create(e,null,!0)}static or(...e){return $u.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};Oq._parser=new WEe({regexParsingWithErrorRecovery:!1});let X=Oq;function BEe(n,e){const t=n?n.substituteConstants():void 0,i=e?e.substituteConstants():void 0;return!t&&!i?!0:!t||!i?!1:t.equals(i)}function oS(n,e){return n.cmp(e)}const zM=class zM{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return qo.INSTANCE}};zM.INSTANCE=new zM;let wo=zM;const UM=class UM{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return wo.INSTANCE}};UM.INSTANCE=new UM;let qo=UM;class Bb{static create(e,t=null){const i=Ns.get(e);return typeof i=="boolean"?i?qo.INSTANCE:wo.INSTANCE:new Bb(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:zce(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ns.get(this.key);return typeof e=="boolean"?e?qo.INSTANCE:wo.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Hb.create(this.key,this)),this.negated}}class t1{static create(e,t,i=null){if(typeof t=="boolean")return t?Bb.create(e,i):Hb.create(e,i);const s=Ns.get(e);return typeof s=="boolean"?t===(s?"true":"false")?qo.INSTANCE:wo.INSTANCE:new t1(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:jb(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ns.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?qo.INSTANCE:wo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=uA.create(this.key,this.value,this)),this.negated}}class cA{static create(e,t){return new cA(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:jb(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?NEe.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=dA.create(this.key,this.valueKey)),this.negated}}class dA{static create(e,t){return new dA(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=cA.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class uA{static create(e,t,i=null){if(typeof t=="boolean")return t?Hb.create(e,i):Bb.create(e,i);const s=Ns.get(e);return typeof s=="boolean"?t===(s?"true":"false")?wo.INSTANCE:qo.INSTANCE:new uA(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:jb(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ns.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?wo.INSTANCE:qo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=t1.create(this.key,this.value,this)),this.negated}}class Hb{static create(e,t=null){const i=Ns.get(e);return typeof i=="boolean"?i?wo.INSTANCE:qo.INSTANCE:new Hb(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:zce(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ns.get(this.key);return typeof e=="boolean"?e?wo.INSTANCE:qo.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Bb.create(this.key,this)),this.negated}}function hA(n,e){if(typeof n=="string"){const t=parseFloat(n);isNaN(t)||(n=t)}return typeof n=="string"||typeof n=="number"?e(n):wo.INSTANCE}class fA{static create(e,t,i=null){return hA(t,s=>new fA(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:jb(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=pA.create(this.key,this.value,this)),this.negated}}class gA{static create(e,t,i=null){return hA(t,s=>new gA(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:jb(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=mA.create(this.key,this.value,this)),this.negated}}class mA{static create(e,t,i=null){return hA(t,s=>new mA(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:jb(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=gA.create(this.key,this.value,this)),this.negated}}class pA{static create(e,t,i=null){return hA(t,s=>new pA(e,s,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:jb(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=fA.create(this.key,this.value,this)),this.negated}}class zx{static create(e,t){return new zx(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=xz.create(this)),this.negated}}class xz{static create(e){return new xz(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function Vce(n){let e=null;for(let t=0,i=n.length;t<i;t++){const s=n[t].substituteConstants();if(n[t]!==s&&e===null){e=[];for(let o=0;o<t;o++)e[o]=n[o]}e!==null&&(e[t]=s)}return e===null?n:e}class Sp{static create(e,t,i){return Sp._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=oS(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Vce(this.expr);return e===this.expr?this:Sp.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const s=[];let o=!1;for(const r of e)if(r){if(r.type===1){o=!0;continue}if(r.type===0)return wo.INSTANCE;if(r.type===6){s.push(...r.expr);continue}s.push(r)}if(s.length===0&&o)return qo.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(oS);for(let r=1;r<s.length;r++)s[r-1].equals(s[r])&&(s.splice(r,1),r--);if(s.length===1)return s[0];for(;s.length>1;){const r=s[s.length-1];if(r.type!==9)break;s.pop();const a=s.pop(),l=s.length===0,c=$u.create(r.expr.map(d=>Sp.create([d,a],null,i)),null,l);c&&(s.push(c),s.sort(oS))}if(s.length===1)return s[0];if(i){for(let r=0;r<s.length;r++)for(let a=r+1;a<s.length;a++)if(s[r].negate().equals(s[a]))return wo.INSTANCE;if(s.length===1)return s[0]}return new Sp(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=$u.create(e,this,!0)}return this.negated}}class $u{static create(e,t,i){return $u._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const s=oS(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Vce(this.expr);return e===this.expr?this:$u.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let s=[],o=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){o=!0;continue}if(l.type===1)return qo.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&o)return wo.INSTANCE;s.sort(oS)}if(s.length!==0){if(s.length===1)return s[0];for(let r=1;r<s.length;r++)s[r-1].equals(s[r])&&(s.splice(r,1),r--);if(s.length===1)return s[0];if(i){for(let r=0;r<s.length;r++)for(let a=r+1;a<s.length;a++)if(s[r].negate().equals(s[a]))return qo.INSTANCE;if(s.length===1)return s[0]}return new $u(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),s=[];for(const o of uQ(t))for(const r of uQ(i))s.push(Sp.create([o,r],null,!1));e.unshift($u.create(s,null,!1))}this.negated=$u.create(e,this,!0)}return this.negated}}const Lw=class Lw extends Bb{static all(){return Lw._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?Lw._info.push({...i,key:e}):i!==!0&&Lw._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return t1.create(this.key,e)}};Lw._info=[];let me=Lw;const Ae=dt("contextKeyService");function zce(n,e){return n<e?-1:n>e?1:0}function jb(n,e,t,i){return n<t?-1:n>t?1:e<i?-1:e>i?1:0}function LB(n,e){if(n.type===0||e.type===1)return!0;if(n.type===9)return e.type===9?dQ(n.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(LB(n,t))return!0;return!1}if(n.type===6){if(e.type===6)return dQ(e.expr,n.expr);for(const t of n.expr)if(LB(t,e))return!0;return!1}return n.equals(e)}function dQ(n,e){let t=0,i=0;for(;t<n.length&&i<e.length;){const s=n[t].cmp(e[i]);if(s<0)return!1;s===0&&t++,i++}return t===n.length}function uQ(n){return n.type===9?n.expr:[n]}function qF(n,e){if(!n)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function _A(n,e="Unreachable"){throw new Error(e)}function hQ(n){n||He(new Dt("Soft Assertion Failed"))}function hb(n){if(!n()){debugger;n(),He(new Dt("Assertion Failed"))}}function kz(n,e){let t=0;for(;t<n.length-1;){const i=n[t],s=n[t+1];if(!e(i,s))return!1;t++}return!0}class HEe{constructor(){this.data=new Map}add(e,t){qF(Vo(e)),qF(Gn(t)),qF(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Mi=new HEe;class Lz{constructor(){this._coreKeybindings=new co,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(mr===1){if(e&&e.win)return e.win}else if(mr===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=Lz.bindToCurrentPlatform(e),i=new Q;if(t&&t.primary){const s=hB(t.primary,mr);s&&i.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let s=0,o=t.secondary.length;s<o;s++){const r=t.secondary[s],a=hB(r,mr);a&&i.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-s-1,e.when))}return i}registerCommandAndKeybindingRule(e){return El(this.registerKeybindingRule(e),bt.registerCommand(e))}_registerDefaultKeybinding(e,t,i,s,o,r){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:i,when:r,weight1:s,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,xe(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(VEe)),this._cachedMergedKeybindings.slice(0)}}const Co=new Lz,jEe={EditorModes:"platform.keybindingsRegistry"};Mi.add(jEe.EditorModes,Co);function VEe(n,e){if(n.weight1!==e.weight1)return n.weight1-e.weight1;if(n.command&&e.command){if(n.command<e.command)return-1;if(n.command>e.command)return 1}return n.weight2-e.weight2}var zEe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fQ=function(n,e){return function(t,i){e(t,i,n)}},SN;function Xw(n){return n.command!==void 0}function UEe(n){return n.submenu!==void 0}const M=class M{constructor(e){if(M._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);M._instances.set(e,this),this.id=e}};M._instances=new Map,M.CommandPalette=new M("CommandPalette"),M.DebugBreakpointsContext=new M("DebugBreakpointsContext"),M.DebugCallStackContext=new M("DebugCallStackContext"),M.DebugConsoleContext=new M("DebugConsoleContext"),M.DebugVariablesContext=new M("DebugVariablesContext"),M.NotebookVariablesContext=new M("NotebookVariablesContext"),M.DebugHoverContext=new M("DebugHoverContext"),M.DebugWatchContext=new M("DebugWatchContext"),M.DebugToolBar=new M("DebugToolBar"),M.DebugToolBarStop=new M("DebugToolBarStop"),M.DebugCallStackToolbar=new M("DebugCallStackToolbar"),M.DebugCreateConfiguration=new M("DebugCreateConfiguration"),M.EditorContext=new M("EditorContext"),M.SimpleEditorContext=new M("SimpleEditorContext"),M.EditorContent=new M("EditorContent"),M.EditorLineNumberContext=new M("EditorLineNumberContext"),M.EditorContextCopy=new M("EditorContextCopy"),M.EditorContextPeek=new M("EditorContextPeek"),M.EditorContextShare=new M("EditorContextShare"),M.EditorTitle=new M("EditorTitle"),M.EditorTitleRun=new M("EditorTitleRun"),M.EditorTitleContext=new M("EditorTitleContext"),M.EditorTitleContextShare=new M("EditorTitleContextShare"),M.EmptyEditorGroup=new M("EmptyEditorGroup"),M.EmptyEditorGroupContext=new M("EmptyEditorGroupContext"),M.EditorTabsBarContext=new M("EditorTabsBarContext"),M.EditorTabsBarShowTabsSubmenu=new M("EditorTabsBarShowTabsSubmenu"),M.EditorTabsBarShowTabsZenModeSubmenu=new M("EditorTabsBarShowTabsZenModeSubmenu"),M.EditorActionsPositionSubmenu=new M("EditorActionsPositionSubmenu"),M.ExplorerContext=new M("ExplorerContext"),M.ExplorerContextShare=new M("ExplorerContextShare"),M.ExtensionContext=new M("ExtensionContext"),M.GlobalActivity=new M("GlobalActivity"),M.CommandCenter=new M("CommandCenter"),M.CommandCenterCenter=new M("CommandCenterCenter"),M.LayoutControlMenuSubmenu=new M("LayoutControlMenuSubmenu"),M.LayoutControlMenu=new M("LayoutControlMenu"),M.MenubarMainMenu=new M("MenubarMainMenu"),M.MenubarAppearanceMenu=new M("MenubarAppearanceMenu"),M.MenubarDebugMenu=new M("MenubarDebugMenu"),M.MenubarEditMenu=new M("MenubarEditMenu"),M.MenubarCopy=new M("MenubarCopy"),M.MenubarFileMenu=new M("MenubarFileMenu"),M.MenubarGoMenu=new M("MenubarGoMenu"),M.MenubarHelpMenu=new M("MenubarHelpMenu"),M.MenubarLayoutMenu=new M("MenubarLayoutMenu"),M.MenubarNewBreakpointMenu=new M("MenubarNewBreakpointMenu"),M.PanelAlignmentMenu=new M("PanelAlignmentMenu"),M.PanelPositionMenu=new M("PanelPositionMenu"),M.ActivityBarPositionMenu=new M("ActivityBarPositionMenu"),M.MenubarPreferencesMenu=new M("MenubarPreferencesMenu"),M.MenubarRecentMenu=new M("MenubarRecentMenu"),M.MenubarSelectionMenu=new M("MenubarSelectionMenu"),M.MenubarShare=new M("MenubarShare"),M.MenubarSwitchEditorMenu=new M("MenubarSwitchEditorMenu"),M.MenubarSwitchGroupMenu=new M("MenubarSwitchGroupMenu"),M.MenubarTerminalMenu=new M("MenubarTerminalMenu"),M.MenubarViewMenu=new M("MenubarViewMenu"),M.MenubarHomeMenu=new M("MenubarHomeMenu"),M.OpenEditorsContext=new M("OpenEditorsContext"),M.OpenEditorsContextShare=new M("OpenEditorsContextShare"),M.ProblemsPanelContext=new M("ProblemsPanelContext"),M.SCMInputBox=new M("SCMInputBox"),M.SCMChangesSeparator=new M("SCMChangesSeparator"),M.SCMChangesContext=new M("SCMChangesContext"),M.SCMIncomingChanges=new M("SCMIncomingChanges"),M.SCMIncomingChangesContext=new M("SCMIncomingChangesContext"),M.SCMIncomingChangesSetting=new M("SCMIncomingChangesSetting"),M.SCMOutgoingChanges=new M("SCMOutgoingChanges"),M.SCMOutgoingChangesContext=new M("SCMOutgoingChangesContext"),M.SCMOutgoingChangesSetting=new M("SCMOutgoingChangesSetting"),M.SCMIncomingChangesAllChangesContext=new M("SCMIncomingChangesAllChangesContext"),M.SCMIncomingChangesHistoryItemContext=new M("SCMIncomingChangesHistoryItemContext"),M.SCMOutgoingChangesAllChangesContext=new M("SCMOutgoingChangesAllChangesContext"),M.SCMOutgoingChangesHistoryItemContext=new M("SCMOutgoingChangesHistoryItemContext"),M.SCMChangeContext=new M("SCMChangeContext"),M.SCMResourceContext=new M("SCMResourceContext"),M.SCMResourceContextShare=new M("SCMResourceContextShare"),M.SCMResourceFolderContext=new M("SCMResourceFolderContext"),M.SCMResourceGroupContext=new M("SCMResourceGroupContext"),M.SCMSourceControl=new M("SCMSourceControl"),M.SCMSourceControlInline=new M("SCMSourceControlInline"),M.SCMSourceControlTitle=new M("SCMSourceControlTitle"),M.SCMHistoryTitle=new M("SCMHistoryTitle"),M.SCMTitle=new M("SCMTitle"),M.SearchContext=new M("SearchContext"),M.SearchActionMenu=new M("SearchActionContext"),M.StatusBarWindowIndicatorMenu=new M("StatusBarWindowIndicatorMenu"),M.StatusBarRemoteIndicatorMenu=new M("StatusBarRemoteIndicatorMenu"),M.StickyScrollContext=new M("StickyScrollContext"),M.TestItem=new M("TestItem"),M.TestItemGutter=new M("TestItemGutter"),M.TestProfilesContext=new M("TestProfilesContext"),M.TestMessageContext=new M("TestMessageContext"),M.TestMessageContent=new M("TestMessageContent"),M.TestPeekElement=new M("TestPeekElement"),M.TestPeekTitle=new M("TestPeekTitle"),M.TestCallStack=new M("TestCallStack"),M.TouchBarContext=new M("TouchBarContext"),M.TitleBarContext=new M("TitleBarContext"),M.TitleBarTitleContext=new M("TitleBarTitleContext"),M.TunnelContext=new M("TunnelContext"),M.TunnelPrivacy=new M("TunnelPrivacy"),M.TunnelProtocol=new M("TunnelProtocol"),M.TunnelPortInline=new M("TunnelInline"),M.TunnelTitle=new M("TunnelTitle"),M.TunnelLocalAddressInline=new M("TunnelLocalAddressInline"),M.TunnelOriginInline=new M("TunnelOriginInline"),M.ViewItemContext=new M("ViewItemContext"),M.ViewContainerTitle=new M("ViewContainerTitle"),M.ViewContainerTitleContext=new M("ViewContainerTitleContext"),M.ViewTitle=new M("ViewTitle"),M.ViewTitleContext=new M("ViewTitleContext"),M.CommentEditorActions=new M("CommentEditorActions"),M.CommentThreadTitle=new M("CommentThreadTitle"),M.CommentThreadActions=new M("CommentThreadActions"),M.CommentThreadAdditionalActions=new M("CommentThreadAdditionalActions"),M.CommentThreadTitleContext=new M("CommentThreadTitleContext"),M.CommentThreadCommentContext=new M("CommentThreadCommentContext"),M.CommentTitle=new M("CommentTitle"),M.CommentActions=new M("CommentActions"),M.CommentsViewThreadActions=new M("CommentsViewThreadActions"),M.InteractiveToolbar=new M("InteractiveToolbar"),M.InteractiveCellTitle=new M("InteractiveCellTitle"),M.InteractiveCellDelete=new M("InteractiveCellDelete"),M.InteractiveCellExecute=new M("InteractiveCellExecute"),M.InteractiveInputExecute=new M("InteractiveInputExecute"),M.InteractiveInputConfig=new M("InteractiveInputConfig"),M.ReplInputExecute=new M("ReplInputExecute"),M.IssueReporter=new M("IssueReporter"),M.NotebookToolbar=new M("NotebookToolbar"),M.NotebookStickyScrollContext=new M("NotebookStickyScrollContext"),M.NotebookCellTitle=new M("NotebookCellTitle"),M.NotebookCellDelete=new M("NotebookCellDelete"),M.NotebookCellInsert=new M("NotebookCellInsert"),M.NotebookCellBetween=new M("NotebookCellBetween"),M.NotebookCellListTop=new M("NotebookCellTop"),M.NotebookCellExecute=new M("NotebookCellExecute"),M.NotebookCellExecuteGoTo=new M("NotebookCellExecuteGoTo"),M.NotebookCellExecutePrimary=new M("NotebookCellExecutePrimary"),M.NotebookDiffCellInputTitle=new M("NotebookDiffCellInputTitle"),M.NotebookDiffCellMetadataTitle=new M("NotebookDiffCellMetadataTitle"),M.NotebookDiffCellOutputsTitle=new M("NotebookDiffCellOutputsTitle"),M.NotebookOutputToolbar=new M("NotebookOutputToolbar"),M.NotebookOutlineFilter=new M("NotebookOutlineFilter"),M.NotebookOutlineActionMenu=new M("NotebookOutlineActionMenu"),M.NotebookEditorLayoutConfigure=new M("NotebookEditorLayoutConfigure"),M.NotebookKernelSource=new M("NotebookKernelSource"),M.BulkEditTitle=new M("BulkEditTitle"),M.BulkEditContext=new M("BulkEditContext"),M.TimelineItemContext=new M("TimelineItemContext"),M.TimelineTitle=new M("TimelineTitle"),M.TimelineTitleContext=new M("TimelineTitleContext"),M.TimelineFilterSubMenu=new M("TimelineFilterSubMenu"),M.AccountsContext=new M("AccountsContext"),M.SidebarTitle=new M("SidebarTitle"),M.PanelTitle=new M("PanelTitle"),M.AuxiliaryBarTitle=new M("AuxiliaryBarTitle"),M.AuxiliaryBarHeader=new M("AuxiliaryBarHeader"),M.TerminalInstanceContext=new M("TerminalInstanceContext"),M.TerminalEditorInstanceContext=new M("TerminalEditorInstanceContext"),M.TerminalNewDropdownContext=new M("TerminalNewDropdownContext"),M.TerminalTabContext=new M("TerminalTabContext"),M.TerminalTabEmptyAreaContext=new M("TerminalTabEmptyAreaContext"),M.TerminalStickyScrollContext=new M("TerminalStickyScrollContext"),M.WebviewContext=new M("WebviewContext"),M.InlineCompletionsActions=new M("InlineCompletionsActions"),M.InlineEditsActions=new M("InlineEditsActions"),M.InlineEditActions=new M("InlineEditActions"),M.NewFile=new M("NewFile"),M.MergeInput1Toolbar=new M("MergeToolbar1Toolbar"),M.MergeInput2Toolbar=new M("MergeToolbar2Toolbar"),M.MergeBaseToolbar=new M("MergeBaseToolbar"),M.MergeInputResultToolbar=new M("MergeToolbarResultToolbar"),M.InlineSuggestionToolbar=new M("InlineSuggestionToolbar"),M.InlineEditToolbar=new M("InlineEditToolbar"),M.ChatContext=new M("ChatContext"),M.ChatCodeBlock=new M("ChatCodeblock"),M.ChatCompareBlock=new M("ChatCompareBlock"),M.ChatMessageTitle=new M("ChatMessageTitle"),M.ChatExecute=new M("ChatExecute"),M.ChatExecuteSecondary=new M("ChatExecuteSecondary"),M.ChatInputSide=new M("ChatInputSide"),M.AccessibleView=new M("AccessibleView"),M.MultiDiffEditorFileToolbar=new M("MultiDiffEditorFileToolbar"),M.DiffEditorHunkToolbar=new M("DiffEditorHunkToolbar"),M.DiffEditorSelectionToolbar=new M("DiffEditorSelectionToolbar");let we=M;const pa=dt("menuService"),US=class US{static for(e){let t=this._all.get(e);return t||(t=new US(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const i of e)i instanceof US&&t.add(i.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};US._all=new Map;let ep=US;const Yn=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new oLe({merge:ep.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(n){return this._commands.set(n.id,n),this._onDidChangeMenu.fire(ep.for(we.CommandPalette)),xe(()=>{this._commands.delete(n.id)&&this._onDidChangeMenu.fire(ep.for(we.CommandPalette))})}getCommand(n){return this._commands.get(n)}getCommands(){const n=new Map;return this._commands.forEach((e,t)=>n.set(t,e)),n}appendMenuItem(n,e){let t=this._menuItems.get(n);t||(t=new co,this._menuItems.set(n,t));const i=t.push(e);return this._onDidChangeMenu.fire(ep.for(n)),xe(()=>{i(),this._onDidChangeMenu.fire(ep.for(n))})}appendMenuItems(n){const e=new Q;for(const{id:t,item:i}of n)e.add(this.appendMenuItem(t,i));return e}getMenuItems(n){let e;return this._menuItems.has(n)?e=[...this._menuItems.get(n)]:e=[],n===we.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(n){const e=new Set;for(const t of n)Xw(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,i)=>{e.has(i)||n.push({command:t})})}};class Jw extends ry{constructor(e,t,i){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,i,"submenu"),this.item=e,this.hideActions=t}}let vr=SN=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,i,s,o,r,a){var c;this.hideActions=s,this.menuKeybinding=o,this._commandService=a,this.id=e.id,this.label=SN.label(e,i),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:(c=e.tooltip)==null?void 0:c.value)??"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&Re.isThemeIcon(d.icon)&&(l=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}l||(l=Re.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new SN(t,void 0,i,s,void 0,r,a):void 0,this._options=i,this.class=l&&Re.asClassName(l)}run(...e){var i,s;let t=[];return(i=this._options)!=null&&i.arg&&(t=[...t,this._options.arg]),(s=this._options)!=null&&s.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};vr=SN=zEe([fQ(5,Ae),fQ(6,oi)],vr);class xo{constructor(e){this.desc=e}}function ni(n){const e=[],t=new n,{f1:i,menu:s,keybinding:o,...r}=t.desc;if(bt.getCommand(r.id))throw new Error(`Cannot register two commands with the same id: ${r.id}`);if(e.push(bt.registerCommand({id:r.id,handler:(a,...l)=>t.run(a,...l),metadata:r.metadata})),Array.isArray(s))for(const a of s)e.push(Yn.appendMenuItem(a.id,{command:{...r,precondition:a.precondition===null?void 0:r.precondition},...a}));else s&&e.push(Yn.appendMenuItem(s.id,{command:{...r,precondition:s.precondition===null?void 0:r.precondition},...s}));if(i&&(e.push(Yn.appendMenuItem(we.CommandPalette,{command:r,when:r.precondition})),e.push(Yn.addCommand(r))),Array.isArray(o))for(const a of o)e.push(Co.registerKeybindingRule({...a,id:r.id,when:r.precondition?X.and(r.precondition,a.when):a.when}));else o&&e.push(Co.registerKeybindingRule({...o,id:r.id,when:r.precondition?X.and(r.precondition,o.when):o.when}));return{dispose(){Qt(e)}}}const Ps=dt("telemetryService"),ws=dt("logService");var Wo;(function(n){n[n.Off=0]="Off",n[n.Trace=1]="Trace",n[n.Debug=2]="Debug",n[n.Info=3]="Info",n[n.Warning=4]="Warning",n[n.Error=5]="Error"})(Wo||(Wo={}));const Uce=Wo.Info;class $ce extends U{constructor(){super(...arguments),this.level=Uce,this._onDidChangeLogLevel=this._register(new j),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Wo.Off&&this.level<=e}}class $Ee extends $ce{constructor(e=Uce,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(Wo.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(Wo.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(Wo.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(Wo.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(Wo.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class qEe extends $ce{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function KEe(n){switch(n){case Wo.Trace:return"trace";case Wo.Debug:return"debug";case Wo.Info:return"info";case Wo.Warning:return"warn";case Wo.Error:return"error";case Wo.Off:return"off"}}new me("logLevel",KEe(Wo.Info));class bA{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let i=t.kbExpr;this.precondition&&(i?i=X.and(i,this.precondition):i=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:i,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Co.registerKeybindingRule(s)}}bt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Yn.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class i1 extends bA{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,i,s){return this._implementations.push({priority:e,name:t,implementation:i,when:s}),this._implementations.sort((o,r)=>r.priority-o.priority),{dispose:()=>{for(let o=0;o<this._implementations.length;o++)if(this._implementations[o].implementation===i){this._implementations.splice(o,1);return}}}}runCommand(e,t){const i=e.get(ws),s=e.get(Ae);i.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const o of this._implementations){if(o.when){const a=s.getContext(_s());if(!o.when.evaluate(a))continue}const r=o.implementation(e,t);if(r)return i.trace(`Command '${this.id}' was handled by '${o.name}'.`),typeof r=="boolean"?void 0:r}i.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class qce extends bA{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class xn extends bA{static bindToContribution(e){return class extends xn{constructor(i){super(i),this._callback=i.handler}runEditorCommand(i,s,o){const r=e(s);r&&this._callback(r,o)}}}static runEditorCommand(e,t,i,s){const o=e.get(kt),r=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(Ae).contextMatchesRules(i??void 0))return s(a,r,t)})}runCommand(e,t){return xn.runEditorCommand(e,t,this.precondition,(i,s,o)=>this.runEditorCommand(i,s,o))}}class _e extends xn{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function i(s){return s.menuId||(s.menuId=we.EditorContext),s.title||(s.title=e.label),s.when=X.and(e.precondition,s.when),s}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(i)):e.contextMenuOpts&&t.push(i(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(_e.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,i){return this.reportTelemetry(e,t),this.run(e,t,i||{})}reportTelemetry(e,t){e.get(Ps).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class Kce extends _e{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((i,s)=>s[0]-i[0]),{dispose:()=>{for(let i=0;i<this._implementations.length;i++)if(this._implementations[i][1]===t){this._implementations.splice(i,1);return}}}}run(e,t,i){for(const s of this._implementations){const o=s[1](e,t,i);if(o)return typeof o=="boolean"?void 0:o}}}class Uc extends xo{run(e,...t){const i=e.get(kt),s=i.getFocusedCodeEditor()||i.getActiveCodeEditor();if(s)return s.invokeWithinContext(o=>{var c;const r=o.get(Ae),a=o.get(ws);if(!r.contextMatchesRules(this.desc.precondition??void 0)){a.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,(c=this.desc.precondition)==null?void 0:c.serialize());return}return this.runEditorCommand(o,s,...t)})}}function Qo(n,e){bt.registerCommand(n,function(t,...i){const s=t.get(ke),[o,r]=i;xt(Le.isUri(o)),xt(H.isIPosition(r));const a=t.get(gi).getModel(o);if(a){const l=H.lift(r);return s.invokeFunction(e,a,l,...i.slice(2))}return t.get(Zo).createModelReference(o).then(l=>new Promise((c,d)=>{try{const u=s.invokeFunction(e,l.object.textEditorModel,H.lift(r),i.slice(2));c(u)}catch(u){d(u)}}).finally(()=>{l.dispose()}))})}function fe(n){return Ra.INSTANCE.registerEditorCommand(n),n}function se(n){const e=new n;return Ra.INSTANCE.registerEditorAction(e),e}function Gce(n){return Ra.INSTANCE.registerEditorAction(n),n}function GEe(n){Ra.INSTANCE.registerEditorAction(n)}function wt(n,e,t){Ra.INSTANCE.registerEditorContribution(n,e,t)}var Up;(function(n){function e(r){return Ra.INSTANCE.getEditorCommand(r)}n.getEditorCommand=e;function t(){return Ra.INSTANCE.getEditorActions()}n.getEditorActions=t;function i(){return Ra.INSTANCE.getEditorContributions()}n.getEditorContributions=i;function s(r){return Ra.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}n.getSomeEditorContributions=s;function o(){return Ra.INSTANCE.getDiffEditorContributions()}n.getDiffEditorContributions=o})(Up||(Up={}));const YEe={EditorCommonContributions:"editor.contributions"},$M=class $M{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,i){this.editorContributions.push({id:e,ctor:t,instantiation:i})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};$M.INSTANCE=new $M;let Ra=$M;Mi.add(YEe.EditorCommonContributions,Ra.INSTANCE);function RL(n){return n.register(),n}const Yce=RL(new i1({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:we.MenubarEditMenu,group:"1_do",title:p({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:we.CommandPalette,group:"",title:p("undo","Undo"),order:1}]}));RL(new qce(Yce,{id:"default:undo",precondition:void 0}));const Zce=RL(new i1({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:we.MenubarEditMenu,group:"1_do",title:p({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:we.CommandPalette,group:"",title:p("redo","Redo"),order:1}]}));RL(new qce(Zce,{id:"default:redo",precondition:void 0}));const ZEe=RL(new i1({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:we.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:we.CommandPalette,group:"",title:p("selectAll","Select All"),order:1}]})),QEe="modulepreload",XEe=function(n){return"/msostem/"+n},gQ={},De=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=XEe(l),l in gQ)return;gQ[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":QEe,c||(u.as="script"),u.crossOrigin="",u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),c)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return s.then(r=>{for(const a of r||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},mQ="default",JEe="$initialize";let pQ=!1;function DB(n){Wb&&(pQ||(pQ=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(n.message))}class eNe{constructor(e,t,i,s,o){this.vsWorker=e,this.req=t,this.channel=i,this.method=s,this.args=o,this.type=0}}class _Q{constructor(e,t,i,s){this.vsWorker=e,this.seq=t,this.res=i,this.err=s,this.type=1}}class tNe{constructor(e,t,i,s,o){this.vsWorker=e,this.req=t,this.channel=i,this.eventName=s,this.arg=o,this.type=2}}class iNe{constructor(e,t,i){this.vsWorker=e,this.req=t,this.event=i,this.type=3}}class nNe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class sNe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,i){const s=String(++this._lastSentReq);return new Promise((o,r)=>{this._pendingReplies[s]={resolve:o,reject:r},this._send(new eNe(this._workerId,s,e,t,i))})}listen(e,t,i){let s=null;const o=new j({onWillAddFirstListener:()=>{s=String(++this._lastSentReq),this._pendingEmitters.set(s,o),this._send(new tNe(this._workerId,s,e,t,i))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(s),this._send(new nNe(this._workerId,s)),s=null}});return o.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const i={get:(s,o)=>(typeof o=="string"&&!s[o]&&(Xce(o)?s[o]=r=>this.listen(e,o,r):Qce(o)?s[o]=this.listen(e,o,void 0):o.charCodeAt(0)===36&&(s[o]=async(...r)=>(await(t==null?void 0:t()),this.sendMessage(e,o,r)))),s[o])};return new Proxy(Object.create(null),i)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let i=e.err;e.err.$isError&&(i=new Error,i.name=e.err.name,i.message=e.err.message,i.stack=e.err.stack),t.reject(i);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(s=>{this._send(new _Q(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=VZ(s.detail)),this._send(new _Q(this._workerId,t,void 0,VZ(s)))})}_handleSubscribeEventMessage(e){const t=e.req,i=this._handler.handleEvent(e.channel,e.eventName,e.arg)(s=>{this._send(new iNe(this._workerId,t,s))});this._pendingEvents.set(t,i)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let i=0;i<e.args.length;i++)e.args[i]instanceof ArrayBuffer&&t.push(e.args[i]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class oNe extends U{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},o=>{this._protocol.handleMessage(o)},o=>{He(o)})),this._protocol=new sNe({sendMessage:(o,r)=>{this._worker.postMessage(o,r)},handleMessage:(o,r,a)=>this._handleMessage(o,r,a),handleEvent:(o,r,a)=>this._handleEvent(o,r,a)}),this._protocol.setWorkerId(this._worker.getId());let i=null;const s=globalThis.require;typeof s<"u"&&typeof s.getConfig=="function"?i=s.getConfig():typeof globalThis.requirejs<"u"&&(i=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(mQ,JEe,[this._worker.getId(),JSON.parse(JSON.stringify(i)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(mQ,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(o=>{this._onError("Worker failed to load "+t.amdModuleId,o)})}_handleMessage(e,t,i){const s=this._localChannels.get(e);if(!s)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof s[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(s[t].apply(s,i))}catch(o){return Promise.reject(o)}}_handleEvent(e,t,i){const s=this._localChannels.get(e);if(!s)throw new Error(`Missing channel ${e} on main thread`);if(Xce(t)){const o=s[t].call(s,i);if(typeof o!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return o}if(Qce(t)){const o=s[t];if(typeof o!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return o}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function Qce(n){return n[0]==="o"&&n[1]==="n"&&kd(n.charCodeAt(2))}function Xce(n){return/^onDynamic/.test(n)&&kd(n.charCodeAt(9))}function Vh(n,e){var i;const t=globalThis.MonacoEnvironment;if(t!=null&&t.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(n,e)}catch(s){He(s);return}try{return(i=globalThis.trustedTypes)==null?void 0:i.createPolicy(n,e)}catch(s){He(s);return}}let tw;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?tw=globalThis.workerttPolicy:tw=Vh("defaultWorkerFactory",{createScriptURL:n=>n});function rNe(n,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const i=t.getWorkerUrl("workerMain.js",e);return new Worker(tw?tw.createScriptURL(i):i,{name:e,type:"module"})}}if(n){const i=aNe(e,n.toString(!0)),s=new Worker(tw?tw.createScriptURL(i):i,{name:e,type:"module"});return lNe(s)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function aNe(n,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const o=e.lastIndexOf("?"),r=e.lastIndexOf("#",o),a=o>0?new URLSearchParams(e.substring(o+1,~r?r:void 0)):new URLSearchParams;vB.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${n}`:e=`${e}#${n}`}const s=new Blob([Tl([`/*${n}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(Ple())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(QV())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${n}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(s)}function lNe(n){return new Promise((e,t)=>{n.onmessage=function(i){i.data.type==="vscode-worker-ready"&&(n.onmessage=null,e(n))},n.onerror=t})}function cNe(n){return typeof n.then=="function"}class dNe extends U{constructor(e,t,i,s,o,r){super(),this.id=i,this.label=s;const a=rNe(e,s);cNe(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){o(c.data)},l.onmessageerror=r,typeof l.addEventListener=="function"&&l.addEventListener("error",r)}),this._register(xe(()=>{var l;(l=this.worker)==null||l.then(c=>{c.onmessage=null,c.onmessageerror=null,c.removeEventListener("error",r),c.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var i;(i=this.worker)==null||i.then(s=>{try{s.postMessage(e,t)}catch(o){He(o),He(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:o}))}})}}class uNe{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=nA.asBrowserUri(`${e}.esm.js`)}}const qM=class qM{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,i){const s=++qM.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new dNe(e.esmModuleLocation,e.amdModuleId,s,e.label||"anonymous"+s,t,o=>{DB(o),this._webWorkerFailedBeforeError=o,i(o)})}};qM.LAST_WORKER_ID=0;let EB=qM;function hNe(n,e){const t=typeof n=="string"?new uNe(n,e):n;return new oNe(new EB,t)}var mn;(function(n){n[n.None=0]="None",n[n.Indent=1]="Indent",n[n.IndentOutdent=2]="IndentOutdent",n[n.Outdent=3]="Outdent"})(mn||(mn={}));class KF{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,i=e.notIn.length;t<i;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const i=e.findTokenIndexAtOffset(t-2),s=e.getStandardTokenType(i);return this.isOK(s)}_findNeutralCharacterInRange(e,t){for(let i=e;i<=t;i++){const s=String.fromCharCode(i);if(!this.open.includes(s)&&!this.close.includes(s))return s}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class fNe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)U1(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),U1(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),U1(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),U1(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&U1(this.autoClosingPairsCloseSingleChar,t.close,t)}}function U1(n,e,t){n.has(e)?n.get(e).push(t):n.set(e,[t])}const Dw=class Dw{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new KF(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new KF({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new KF({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Dw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Dw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};Dw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,Dw.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let NB=Dw;function xp(n,e){const t=n.getCount(),i=n.findTokenIndexAtOffset(e),s=n.getLanguageId(i);let o=i;for(;o+1<t&&n.getLanguageId(o+1)===s;)o++;let r=i;for(;r>0&&n.getLanguageId(r-1)===s;)r--;return new gNe(n,s,r,o+1,n.getStartOffset(r),n.getEndOffset(o))}class gNe{constructor(e,t,i,s,o,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=i,this._lastTokenIndex=s,this.firstCharOffset=o,this._lastCharOffset=r,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function ad(n){return(n&3)!==0}const bQ=typeof Buffer<"u";let GF;class vA{static wrap(e){return bQ&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new vA(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return bQ?this.buffer.toString():(GF||(GF=new TextDecoder),GF.decode(this.buffer))}}function mNe(n,e){return n[e+0]<<0>>>0|n[e+1]<<8>>>0}function pNe(n,e,t){n[t+0]=e&255,e=e>>>8,n[t+1]=e&255}function sc(n,e){return n[e]*2**24+n[e+1]*2**16+n[e+2]*2**8+n[e+3]}function oc(n,e,t){n[t+3]=e,e=e>>>8,n[t+2]=e,e=e>>>8,n[t+1]=e,e=e>>>8,n[t]=e}function vQ(n,e){return n[e]}function wQ(n,e,t){n[t]=e}let YF;function Jce(){return YF||(YF=new TextDecoder("UTF-16LE")),YF}let ZF;function _Ne(){return ZF||(ZF=new TextDecoder("UTF-16BE")),ZF}let QF;function ede(){return QF||(QF=Wle()?Jce():_Ne()),QF}function bNe(n,e,t){const i=new Uint16Array(n.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?vNe(n,e,t):Jce().decode(i)}function vNe(n,e,t){const i=[];let s=0;for(let o=0;o<t;o++){const r=mNe(n,e);e+=2,i[s++]=String.fromCharCode(r)}return i.join("")}class n1{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return ede().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Pn(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let i=0;i<t;i++)this._buffer[this._bufferLength++]=e.charCodeAt(i)}}class rT{constructor(e,t,i,s,o,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=i,this.close=s,this.forwardRegex=o,this.reversedRegex=r,this._openSet=rT._toSet(this.open),this._closeSet=rT._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const i of e)t.add(i);return t}}function wNe(n){const e=n.length;n=n.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const i=(r,a)=>{const[l,c]=r,[d,u]=a;return l===d||l===u||c===d||c===u},s=(r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let r=0;r<e;r++){const a=n[r];for(let l=r+1;l<e;l++){const c=n[l];i(a,c)&&s(t[r],t[l])}}const o=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[d,u]=n[c];a.push(d),l.push(u)}a.length>0&&o.push({open:a,close:l})}return o}class CNe{constructor(e,t){this._richEditBracketsBrand=void 0;const i=wNe(t);this.brackets=i.map((s,o)=>new rT(e,o,s.open,s.close,yNe(s.open,s.close,i,o),SNe(s.open,s.close,i,o))),this.forwardRegex=xNe(this.brackets),this.reversedRegex=kNe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const o of s.open)this.textIsBracket[o]=s,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of s.close)this.textIsBracket[o]=s,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}function tde(n,e,t,i){for(let s=0,o=e.length;s<o;s++){if(s===t)continue;const r=e[s];for(const a of r.open)a.indexOf(n)>=0&&i.push(a);for(const a of r.close)a.indexOf(n)>=0&&i.push(a)}}function ide(n,e){return n.length-e.length}function wA(n){if(n.length<=1)return n;const e=[],t=new Set;for(const i of n)t.has(i)||(e.push(i),t.add(i));return e}function yNe(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let o=0,r=s.length;o<r;o++)tde(s[o],t,i,s);return s=wA(s),s.sort(ide),s.reverse(),AL(s)}function SNe(n,e,t,i){let s=[];s=s.concat(n),s=s.concat(e);for(let o=0,r=s.length;o<r;o++)tde(s[o],t,i,s);return s=wA(s),s.sort(ide),s.reverse(),AL(s.map(Dz))}function xNe(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=wA(e),AL(e)}function kNe(n){let e=[];for(const t of n){for(const i of t.open)e.push(i);for(const i of t.close)e.push(i)}return e=wA(e),AL(e.map(Dz))}function LNe(n){const e=/^[\w ]+$/.test(n);return n=ua(n),e?`\\b${n}\\b`:n}function AL(n,e){const t=`(${n.map(LNe).join(")|(")})`;return lce(t,!0,e)}const Dz=function(){function n(i){const s=new Uint16Array(i.length);let o=0;for(let r=i.length-1;r>=0;r--)s[o++]=i.charCodeAt(r);return ede().decode(s)}let e=null,t=null;return function(s){return e!==s&&(e=s,t=n(e)),t}}();class ll{static _findPrevBracketInText(e,t,i,s){const o=i.match(e);if(!o)return null;const r=i.length-(o.index||0),a=o[0].length,l=s+r;return new E(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,i,s,o){const a=Dz(i).substring(i.length-o,i.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,i,s){const o=i.match(e);if(!o)return null;const r=o.index||0,a=o[0].length;if(a===0)return null;const l=s+r;return new E(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,i,s,o){const r=i.substring(s,o);return this.findNextBracketInText(e,t,r,s)}}class DNe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const i of t.close){const s=i.charAt(i.length-1);e.push(s)}return Lh(e)}onElectricCharacter(e,t,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(i-1);if(ad(t.getStandardTokenType(s)))return null;const o=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,i-1)+e,a=ll.findPrevBracketInRange(o,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function GD(n){return n.global&&(n.lastIndex=0),!0}class ENe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&GD(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&GD(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&GD(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&GD(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class iw{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const i=iw._createOpenBracketRegExp(t[0]),s=iw._createCloseBracketRegExp(t[1]);i&&s&&this._brackets.push({open:t[0],openRegExp:i,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,i,s){if(e>=3)for(let o=0,r=this._regExpRules.length;o<r;o++){const a=this._regExpRules[o];if([{reg:a.beforeText,text:i},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&i.length>0&&s.length>0)for(let o=0,r=this._brackets.length;o<r;o++){const a=this._brackets[o];if(a.openRegExp.test(i)&&a.closeRegExp.test(s))return{indentAction:mn.IndentOutdent}}if(e>=2&&i.length>0){for(let o=0,r=this._brackets.length;o<r;o++)if(this._brackets[o].openRegExp.test(i))return{indentAction:mn.Indent}}return null}static _createOpenBracketRegExp(e){let t=ua(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",iw._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=ua(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,iw._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return He(t),null}}}const nt=dt("configurationService");function IB(n,e){const t=Object.create(null);for(const i in n)nde(t,i,n[i],e);return t}function nde(n,e,t,i){const s=e.split("."),o=s.pop();let r=n;for(let a=0;a<s.length;a++){const l=s[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":if(c===null){i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:i(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[o]=t}catch{i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(r)}`)}else i(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(r)}`)}function NNe(n,e){const t=e.split(".");sde(n,t)}function sde(n,e){const t=e.shift();if(e.length===0){delete n[t];return}if(Object.keys(n).indexOf(t)!==-1){const i=n[t];typeof i=="object"&&!Array.isArray(i)&&(sde(i,e),Object.keys(i).length===0&&delete n[t])}}function CQ(n,e,t){function i(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),o=i(n,s);return typeof o>"u"?t:o}function INe(n){return n.replace(/[\[\]]/g,"")}const Di=dt("languageService");class Ld{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const ode=[];function mt(n,e,t){e instanceof Ld||(e=new Ld(e,[],!!t)),ode.push([n,e])}function yQ(){return ode}const Zi=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),CA={JSONContribution:"base.contributions.json"};function TNe(n){return n.length>0&&n.charAt(n.length-1)==="#"?n.substring(0,n.length-1):n}class PNe{constructor(){this._onDidChangeSchema=new j,this.schemasById={}}registerSchema(e,t){this.schemasById[TNe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const MNe=new PNe;Mi.add(CA.JSONContribution,MNe);const Hl={Configuration:"base.contributions.configuration"},$1="vscode://schemas/settings/resourceLanguage",SQ=Mi.as(CA.JSONContribution);class RNe{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new j,this._onDidUpdateConfiguration=new j,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:p("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},SQ.registerSchema($1,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),SQ.registerSchema($1,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const i=[];for(const{overrides:s,source:o}of e)for(const r in s){t.add(r);const a=this.configurationDefaultsOverrides.get(r)??this.configurationDefaultsOverrides.set(r,{configurationDefaultOverrides:[]}).get(r),l=s[r];if(a.configurationDefaultOverrides.push({value:l,source:o}),Yg.test(r)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(r,l,o,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(r,c,o),i.push(...aT(r))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(r,l,o,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const d=this.configurationProperties[r];d&&(this.updatePropertyDefaultValue(r,d),this.updateSchema(r,d))}}this.doRegisterOverrideIdentifiers(i)}updateDefaultOverrideProperty(e,t,i){const s={type:"object",default:t.value,description:p("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",INe(e)),$ref:$1,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.configurationProperties[e]=s,this.defaultLanguageConfigurationOverridesNode.properties[e]=s}mergeDefaultConfigurationsForOverrideIdentifier(e,t,i,s){const o=(s==null?void 0:s.value)||{},r=(s==null?void 0:s.source)??new Map;if(!(r instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(Gn(l)&&(Ks(o[a])||Gn(o[a]))){if(o[a]={...o[a]??{},...l},i)for(const d in l)r.set(`${a}.${d}`,i)}else o[a]=l,i?r.set(a,i):r.delete(a)}return{value:o,source:r}}mergeDefaultConfigurationsForConfigurationProperty(e,t,i,s){const o=this.configurationProperties[e],r=(s==null?void 0:s.value)??(o==null?void 0:o.defaultDefaultValue);let a=i;if(Gn(t)&&(o!==void 0&&o.type==="object"||o===void 0&&(Ks(r)||Gn(r)))){if(a=(s==null?void 0:s.source)??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&a.set(`${e}.${c}`,i);t={...Gn(r)?r:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(s=>{this.validateAndRegisterProperties(s,t,s.extensionInfo,s.restrictedProperties,void 0,i),this.configurationContributors.push(s),this.registerJSONConfiguration(s)})}validateAndRegisterProperties(e,t=!0,i,s,o=3,r){var c;o=Yr(e.scope)?o:e.scope;const a=e.properties;if(a)for(const d in a){const u=a[d];if(t&&FNe(d,u)){delete a[d];continue}if(u.source=i,u.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,u),Yg.test(d)?u.scope=void 0:(u.scope=Yr(u.scope)?o:u.scope,u.restricted=Yr(u.restricted)?!!(s!=null&&s.includes(d)):u.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d],(c=a[d].policy)!=null&&c.name&&this.policyConfigurations.set(a[d].policy.name,d);!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),r.add(d)}const l=e.allOf;if(l)for(const d of l)this.validateAndRegisterProperties(d,t,i,s,o,r)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=i=>{const s=i.properties;if(s)for(const r in s)this.updateSchema(r,s[r]);const o=i.allOf;o==null||o.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:p("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:$1};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){p("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),p("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){var r;const i=(r=this.configurationDefaultsOverrides.get(e))==null?void 0:r.configurationDefaultOverrideValue;let s,o;i&&(!t.disallowConfigurationDefault||!i.source)&&(s=i.value,o=i.source),Ks(s)&&(s=t.defaultDefaultValue,o=void 0),Ks(s)&&(s=ONe(t.type)),t.default=s,t.defaultValueSource=o}}const rde="\\[([^\\]]+)\\]",xQ=new RegExp(rde,"g"),ANe=`^(${rde})+$`,Yg=new RegExp(ANe);function aT(n){const e=[];if(Yg.test(n)){let t=xQ.exec(n);for(;t!=null&&t.length;){const i=t[1].trim();i&&e.push(i),t=xQ.exec(n)}}return Lh(e)}function ONe(n){switch(Array.isArray(n)?n[0]:n){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const xN=new RNe;Mi.add(Hl.Configuration,xN);function FNe(n,e){var t,i,s,o;return n.trim()?Yg.test(n)?p("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",n):xN.getConfigurationProperties()[n]!==void 0?p("config.property.duplicate","Cannot register '{0}'. This property is already registered.",n):(t=e.policy)!=null&&t.name&&xN.getPolicyConfigurations().get((i=e.policy)==null?void 0:i.name)!==void 0?p("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",n,(s=e.policy)==null?void 0:s.name,xN.getPolicyConfigurations().get((o=e.policy)==null?void 0:o.name)):null:p("config.property.empty","Cannot register an empty property")}const WNe={ModesRegistry:"editor.modesRegistry"};class BNe{constructor(){this._onDidChangeLanguages=new j,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,i=this._languages.length;t<i;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const ay=new BNe;Mi.add(WNe.ModesRegistry,ay);const _o="plaintext",HNe=".txt";ay.registerLanguage({id:_o,extensions:[HNe],aliases:[p("plainText.alias","Plain Text"),"text"],mimetypes:[Zi.text]});Mi.as(Hl.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class jNe{constructor(e,t){this.languageId=e;const i=t.brackets?kQ(t.brackets):[],s=new KZ(a=>{const l=new Set;return{info:new VNe(this,a,l),closing:l}}),o=new KZ(a=>{const l=new Set,c=new Set;return{info:new zNe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of i){const c=s.get(a),d=o.get(l);c.closing.add(d.info),d.opening.add(c.info)}const r=t.colorizedBracketPairs?kQ(t.colorizedBracketPairs):i.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of r){const c=s.get(a),d=o.get(l);c.closing.add(d.info),d.openingColorized.add(c.info),d.opening.add(c.info)}this._openingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...o.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return AL(t,e)}}function kQ(n){return n.filter(([e,t])=>e!==""&&t!=="")}class ade{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class VNe extends ade{constructor(e,t,i){super(e,t),this.openedBrackets=i,this.isOpeningBracket=!0}}class zNe extends ade{constructor(e,t,i,s){super(e,t),this.openingBrackets=i,this.openingColorizedBrackets=s,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var UNe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},LQ=function(n,e){return function(t,i){e(t,i,n)}};class XF{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const Ri=dt("languageConfigurationService");let TB=class extends U{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new GNe),this.onDidChangeEmitter=this._register(new j),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const i=new Set(Object.values(PB));this._register(this.configurationService.onDidChangeConfiguration(s=>{const o=s.change.keys.some(a=>i.has(a)),r=s.change.overrides.filter(([a,l])=>l.some(c=>i.has(c))).map(([a])=>a);if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new XF(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new XF(a)))})),this._register(this._registry.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new XF(s.languageId))}))}register(e,t,i){return this._registry.register(e,t,i)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=$Ne(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};TB=UNe([LQ(0,nt),LQ(1,Di)],TB);function $Ne(n,e,t,i){let s=e.getLanguageConfiguration(n);if(!s){if(!i.isRegisteredLanguageId(n))return new eC(n,{});s=new eC(n,{})}const o=qNe(s.languageId,t),r=cde([s.underlyingConfig,o]);return new eC(s.languageId,r)}const PB={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function qNe(n,e){const t=e.getValue(PB.brackets,{overrideIdentifier:n}),i=e.getValue(PB.colorizedBracketPairs,{overrideIdentifier:n});return{brackets:DQ(t),colorizedBracketPairs:DQ(i)}}function DQ(n){if(Array.isArray(n))return n.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function lde(n,e,t){const i=n.getLineContent(e);let s=Zt(i);return s.length>t-1&&(s=s.substring(0,t-1)),s}class KNe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const i=new EQ(e,t,++this._order);return this._entries.push(i),this._resolved=null,xe(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===i){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new eC(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(EQ.cmp),cde(this._entries.map(e=>e.configuration)))}}function cde(n){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of n)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class EQ{constructor(e,t,i){this.configuration=e,this.priority=t,this.order=i}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class NQ{constructor(e){this.languageId=e}}class GNe extends U{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new j),this.onDidChange=this._onDidChange.event,this._register(this.register(_o,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,i=0){let s=this._entries.get(e);s||(s=new KNe(e),this._entries.set(e,s));const o=s.register(t,i);return this._onDidChange.fire(new NQ(e)),xe(()=>{o.dispose(),this._onDidChange.fire(new NQ(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class eC{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new iw(this.underlyingConfig):null,this.comments=eC._handleComments(this.underlyingConfig),this.characterPair=new NB(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||ez,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new ENe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new jNe(e,this.underlyingConfig)}getWordDefinition(){return tz(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new CNe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new DNe(this.brackets)),this._electricCharacter}onEnter(e,t,i,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,i,s):null}getAutoClosingPairs(){return new fNe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const i={};if(t.lineComment&&(i.lineCommentToken=t.lineComment),t.blockComment){const[s,o]=t.blockComment;i.blockCommentStartToken=s,i.blockCommentEndToken=o}return i}}mt(Ri,TB,1);class df{constructor(e,t,i,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=i,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class IQ{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let i=0,s=e.length;i<s;i++)t[i]=e.charCodeAt(i);return t}}function YNe(n,e,t){return new Pd(new IQ(n),new IQ(e)).ComputeDiff(t).changes}class uv{static Assert(e,t){if(!e)throw new Error(t)}}class hv{static Copy(e,t,i,s,o){for(let r=0;r<o;r++)i[s+r]=e[t+r]}static Copy2(e,t,i,s,o){for(let r=0;r<o;r++)i[s+r]=e[t+r]}}class TQ{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new df(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Pd{constructor(e,t,i=null){this.ContinueProcessingPredicate=i,this._originalSequence=e,this._modifiedSequence=t;const[s,o,r]=Pd._getElements(e),[a,l,c]=Pd._getElements(t);this._hasStrings=r&&c,this._originalStringElements=s,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Pd._isStringArray(t)){const i=new Int32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=bz(t[s],0);return[t,i,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const i=Pd._getStrictElement(this._originalSequence,e),s=Pd._getStrictElement(this._modifiedSequence,t);return i===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,i,s,o){const r=[!1];let a=this.ComputeDiffRecursive(e,t,i,s,r);return o&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,i,s,o){for(o[0]=!1;e<=t&&i<=s&&this.ElementsAreEqual(e,i);)e++,i++;for(;t>=e&&s>=i&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||i>s){let u;return i<=s?(uv.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new df(e,0,i,s-i+1)]):e<=t?(uv.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new df(e,t-e+1,i,0)]):(uv.Assert(e===t+1,"originalStart should only be one more than originalEnd"),uv.Assert(i===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,i,s,r,a,o),c=r[0],d=a[0];if(l!==null)return l;if(!o[0]){const u=this.ComputeDiffRecursive(e,c,i,d,o);let h=[];return o[0]?h=[new df(c+1,t-(c+1)+1,d+1,s-(d+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,d+1,s,o),this.ConcatenateChanges(u,h)}return[new df(e,t-e+1,i,s-i+1)]}WALKTRACE(e,t,i,s,o,r,a,l,c,d,u,h,f,g,m,_,b,v){let w=null,y=null,S=new TQ,x=t,k=i,D=f[0]-_[0]-s,N=-1073741824,R=this.m_forwardHistory.length-1;do{const O=D+e;O===x||O<k&&c[O-1]<c[O+1]?(u=c[O+1],g=u-D-s,u<N&&S.MarkNextChange(),N=u,S.AddModifiedElement(u+1,g),D=O+1-e):(u=c[O-1]+1,g=u-D-s,u<N&&S.MarkNextChange(),N=u-1,S.AddOriginalElement(u,g+1),D=O-1-e),R>=0&&(c=this.m_forwardHistory[R],e=c[0],x=1,k=c.length-1)}while(--R>=-1);if(w=S.getReverseChanges(),v[0]){let O=f[0]+1,B=_[0]+1;if(w!==null&&w.length>0){const z=w[w.length-1];O=Math.max(O,z.getOriginalEnd()),B=Math.max(B,z.getModifiedEnd())}y=[new df(O,h-O+1,B,m-B+1)]}else{S=new TQ,x=r,k=a,D=f[0]-_[0]-l,N=1073741824,R=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const O=D+o;O===x||O<k&&d[O-1]>=d[O+1]?(u=d[O+1]-1,g=u-D-l,u>N&&S.MarkNextChange(),N=u+1,S.AddOriginalElement(u+1,g+1),D=O+1-o):(u=d[O-1],g=u-D-l,u>N&&S.MarkNextChange(),N=u,S.AddModifiedElement(u+1,g+1),D=O-1-o),R>=0&&(d=this.m_reverseHistory[R],o=d[0],x=1,k=d.length-1)}while(--R>=-1);y=S.getChanges()}return this.ConcatenateChanges(w,y)}ComputeRecursionPoint(e,t,i,s,o,r,a){let l=0,c=0,d=0,u=0,h=0,f=0;e--,i--,o[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(s-i),m=g+1,_=new Int32Array(m),b=new Int32Array(m),v=s-i,w=t-e,y=e-i,S=t-s,k=(w-v)%2===0;_[v]=e,b[w]=t,a[0]=!1;for(let D=1;D<=g/2+1;D++){let N=0,R=0;d=this.ClipDiagonalBound(v-D,D,v,m),u=this.ClipDiagonalBound(v+D,D,v,m);for(let B=d;B<=u;B+=2){B===d||B<u&&_[B-1]<_[B+1]?l=_[B+1]:l=_[B-1]+1,c=l-(B-v)-y;const z=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[B]=l,l+c>N+R&&(N=l,R=c),!k&&Math.abs(B-w)<=D-1&&l>=b[B])return o[0]=l,r[0]=c,z<=b[B]&&D<=1448?this.WALKTRACE(v,d,u,y,w,h,f,S,_,b,l,t,o,c,s,r,k,a):null}const O=(N-e+(R-i)-D)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(N,O))return a[0]=!0,o[0]=N,r[0]=R,O>0&&D<=1448?this.WALKTRACE(v,d,u,y,w,h,f,S,_,b,l,t,o,c,s,r,k,a):(e++,i++,[new df(e,t-e+1,i,s-i+1)]);h=this.ClipDiagonalBound(w-D,D,w,m),f=this.ClipDiagonalBound(w+D,D,w,m);for(let B=h;B<=f;B+=2){B===h||B<f&&b[B-1]>=b[B+1]?l=b[B+1]-1:l=b[B-1],c=l-(B-w)-S;const z=l;for(;l>e&&c>i&&this.ElementsAreEqual(l,c);)l--,c--;if(b[B]=l,k&&Math.abs(B-v)<=D&&l<=_[B])return o[0]=l,r[0]=c,z>=_[B]&&D<=1448?this.WALKTRACE(v,d,u,y,w,h,f,S,_,b,l,t,o,c,s,r,k,a):null}if(D<=1447){let B=new Int32Array(u-d+2);B[0]=v-d+1,hv.Copy2(_,d,B,1,u-d+1),this.m_forwardHistory.push(B),B=new Int32Array(f-h+2),B[0]=w-h+1,hv.Copy2(b,h,B,1,f-h+1),this.m_reverseHistory.push(B)}}return this.WALKTRACE(v,d,u,y,w,h,f,S,_,b,l,t,o,c,s,r,k,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const i=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=i.originalLength>0,a=i.modifiedLength>0;for(;i.originalStart+i.originalLength<s&&i.modifiedStart+i.modifiedLength<o&&(!r||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!a||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){const c=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!c)break;i.originalStart++,i.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const i=e[t];let s=0,o=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,o=u.modifiedStart+u.modifiedLength}const r=i.originalLength>0,a=i.modifiedLength>0;let l=0,c=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(let u=1;;u++){const h=i.originalStart-u,f=i.modifiedStart-u;if(h<s||f<o||r&&!this.OriginalElementsAreEqual(h,h+i.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+i.modifiedLength))break;const m=(h===s&&f===o?5:0)+this._boundaryScore(h,i.originalLength,f,i.modifiedLength);m>c&&(c=m,l=u)}i.originalStart-=l,i.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,i=e.length;t<i;t++){const s=e[t-1],o=e[t],r=o.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=o.originalStart+o.originalLength,c=l-a,d=s.modifiedStart,u=o.modifiedStart+o.modifiedLength,h=u-d;if(r<5&&c<20&&h<20){const f=this._findBetterContiguousSequence(a,c,d,h,r);if(f){const[g,m]=f;(g!==s.originalStart+s.originalLength||m!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=g-s.originalStart,s.modifiedLength=m-s.modifiedStart,o.originalStart=g+r,o.modifiedStart=m+r,o.originalLength=l-o.originalStart,o.modifiedLength=u-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,i,s,o){if(t<o||s<o)return null;const r=e+t-o+1,a=i+s-o+1;let l=0,c=0,d=0;for(let u=e;u<r;u++)for(let h=i;h<a;h++){const f=this._contiguousSequenceScore(u,h,o);f>0&&f>l&&(l=f,c=u,d=h)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,i){let s=0;for(let o=0;o<i;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;s+=this._originalStringElements[e+o].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const i=e+t;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1}_boundaryScore(e,t,i,s){const o=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(i,s)?1:0;return o+r}ConcatenateChanges(e,t){const i=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],i)){const s=new Array(e.length+t.length-1);return hv.Copy(e,0,s,0,e.length-1),s[e.length-1]=i[0],hv.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return hv.Copy(e,0,s,0,e.length),hv.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,i){if(uv.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),uv.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let o=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),i[0]=new df(s,o,r,a),!0}else return i[0]=null,!1}ClipDiagonalBound(e,t,i,s){if(e>=0&&e<s)return e;const o=i,r=s-i-1,a=t%2===0;if(e<0){const l=o%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?s-1:s-2}}}function lT(n){return n<0?0:n>255?255:n|0}function fv(n){return n<0?0:n>4294967295?4294967295:n|0}class s1{constructor(e){const t=lT(e);this._defaultValue=t,this._asciiMap=s1._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=lT(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class cT{constructor(){this._actual=new s1(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}}class ZNe{constructor(e,t,i){const s=new Uint8Array(e*t);for(let o=0,r=e*t;o<r;o++)s[o]=i;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class QNe{constructor(e){let t=0,i=0;for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];l>t&&(t=l),a>i&&(i=a),c>i&&(i=c)}t++,i++;const s=new ZNe(i,t,0);for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let JF=null;function XNe(){return JF===null&&(JF=new QNe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),JF}let q1=null;function JNe(){if(q1===null){q1=new s1(0);const n=` 	<>'"`;for(let t=0;t<n.length;t++)q1.set(n.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)q1.set(e.charCodeAt(t),2)}return q1}class dT{static _createLink(e,t,i,s,o){let r=o-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:i,startColumn:s+1,endLineNumber:i,endColumn:r+2},url:t.substring(s,r+1)}}static computeLinks(e,t=XNe()){const i=JNe(),s=[];for(let o=1,r=e.getLineCount();o<=r;o++){const a=e.getLineContent(o),l=a.length;let c=0,d=0,u=0,h=1,f=!1,g=!1,m=!1,_=!1;for(;c<l;){let b=!1;const v=a.charCodeAt(c);if(h===13){let w;switch(v){case 40:f=!0,w=0;break;case 41:w=f?0:1;break;case 91:m=!0,g=!0,w=0;break;case 93:m=!1,w=g?0:1;break;case 123:_=!0,w=0;break;case 125:w=_?0:1;break;case 39:case 34:case 96:u===v?w=1:u===39||u===34||u===96?w=0:w=1;break;case 42:w=u===42?1:0;break;case 124:w=u===124?1:0;break;case 32:w=m?0:1;break;default:w=i.get(v)}w===1&&(s.push(dT._createLink(i,a,o,d,c)),b=!0)}else if(h===12){let w;v===91?(g=!0,w=0):w=i.get(v),w===1?b=!0:h=13}else h=t.nextState(h,v),h===0&&(b=!0);b&&(h=1,f=!1,g=!1,_=!1,d=c+1,u=v),c++}h===13&&s.push(dT._createLink(i,a,o,d,l))}return s}}function eIe(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:dT.computeLinks(n)}const KM=class KM{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,i,s,o){if(e&&t){const r=this.doNavigateValueSet(t,o);if(r)return{range:e,value:r}}if(i&&s){const r=this.doNavigateValueSet(s,o);if(r)return{range:i,value:r}}return null}doNavigateValueSet(e,t){const i=this.numberReplace(e,t);return i!==null?i:this.textReplace(e,t)}numberReplace(e,t){const i=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let s=Number(e);const o=parseFloat(e);return!isNaN(s)&&!isNaN(o)&&s===o?s===0&&!t?null:(s=Math.floor(s*i),s+=t?i:-i,String(s/i)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,i){let s=null;for(let o=0,r=e.length;s===null&&o<r;o++)s=this.valueSetReplace(e[o],t,i);return s}valueSetReplace(e,t,i){let s=e.indexOf(t);return s>=0?(s+=i?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}};KM.INSTANCE=new KM;let MB=KM;const $S=class $S{static getChannel(e){return e.getChannel($S.CHANNEL_NAME)}static setChannel(e,t){e.setChannel($S.CHANNEL_NAME,t)}};$S.CHANNEL_NAME="editorWorkerHost";let RB=$S;var PQ,MQ;class tIe{constructor(e,t){this.uri=e,this.value=t}}function iIe(n){return Array.isArray(n)}const mp=class mp{constructor(e,t){if(this[PQ]="ResourceMap",e instanceof mp)this.map=new Map(e.map),this.toKey=t??mp.defaultToKey;else if(iIe(e)){this.map=new Map,this.toKey=t??mp.defaultToKey;for(const[i,s]of e)this.set(i,s)}else this.map=new Map,this.toKey=e??mp.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new tIe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,s]of this.map)e(s.value,s.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(PQ=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};mp.defaultToKey=e=>e.toString();let Zn=mp;class nIe{constructor(){this[MQ]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let s=this._map.get(e);if(s)s.value=t,i!==0&&this.touch(s,i);else{switch(s={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:i.key,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:i.value,done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let i=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const o={value:[i.key,i.value],done:!1};return i=i.next,o}else return{value:void 0,done:!0}}};return s}[(MQ=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.previous,i--;this._tail=t,this._size=i,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(i.previous=s,s.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,s=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=s,s.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class sIe extends nIe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class lu extends sIe{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class oIe{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class Ez{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class rIe extends s1{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,s=e.length;i<s;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const s of this._getIntlSegmenterWordsOnLine(e)){if(s.index>t)break;i=s}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const RQ=new lu(10);function Ga(n,e){const t=`${n}/${e.join(",")}`;let i=RQ.get(t);return i||(i=new rIe(n,e),RQ.set(t,i)),i}var aa;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=4]="Right",n[n.Full=7]="Full"})(aa||(aa={}));var Rl;(function(n){n[n.Left=1]="Left",n[n.Center=2]="Center",n[n.Right=3]="Right"})(Rl||(Rl={}));var xl;(function(n){n[n.Both=0]="Both",n[n.Right=1]="Right",n[n.Left=2]="Left",n[n.None=3]="None"})(xl||(xl={}));class kN{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&_r(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class Ux{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function aIe(n){return n&&typeof n.read=="function"}class e4{constructor(e,t,i,s,o,r){this.identifier=e,this.range=t,this.text=i,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=o,this._isTracked=r}}class lIe{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class cIe{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}function dde(n){return!n.isTooLargeForSyncing()&&!n.isForSimpleWidget}const dIe=999;class $m{constructor(e,t,i,s){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=uIe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=lce(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new lIe(t,this.wordSeparators?Ga(this.wordSeparators,[]):null,i?this.searchString:null)}}function uIe(n){if(!n||n.length===0)return!1;for(let e=0,t=n.length;e<t;e++){const i=n.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const s=n.charCodeAt(e);if(s===110||s===114||s===87)return!0}}return!1}function tp(n,e,t){if(!t)return new Ux(n,null);const i=[];for(let s=0,o=e.length;s<o;s++)i[s]=e[s];return new Ux(n,i)}class AQ{constructor(e){const t=[];let i=0;for(let s=0,o=e.length;s<o;s++)e.charCodeAt(s)===10&&(t[i++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let i=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;i<s;){const o=i+((s-i)/2>>0);t[o]>=e?s=o-1:t[o+1]>=e?(i=o,s=o):i=o+1}return i+1}}class YD{static findMatches(e,t,i,s,o){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,i,new nw(r.wordSeparators,r.regex),s,o):this._doFindMatchesLineByLine(e,i,r,s,o):[]}static _getMultilineMatchRange(e,t,i,s,o,r){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let c;if(s){const f=s.findLineFeedCountBeforeOffset(o+r.length)-l;c=a+r.length+f}else c=a+r.length;const d=e.getPositionAt(a),u=e.getPositionAt(c);return new E(d.lineNumber,d.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,i,s,o){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new AQ(a):null,c=[];let d=0,u;for(i.reset(0);u=i.next(a);)if(c[d++]=tp(this._getMultilineMatchRange(e,r,a,l,u.index,u[0]),u,s),d>=o)return c;return c}static _doFindMatchesLineByLine(e,t,i,s,o){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(i,c,t.startLineNumber,t.startColumn-1,a,r,s,o),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(i,l,t.startLineNumber,t.startColumn-1,a,r,s,o);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<o;c++)a=this._findMatchesInLine(i,e.getLineContent(c),c,0,a,r,s,o);if(a<o){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(i,c,t.endLineNumber,0,a,r,s,o)}return r}static _findMatchesInLine(e,t,i,s,o,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=t.length;let m=-f;for(;(m=t.indexOf(h,m+f))!==-1;)if((!c||Nz(c,t,g,m,f))&&(r[o++]=new Ux(new E(i,m+1+s,i,m+1+f+s),null),o>=l))return o;return o}const d=new nw(e.wordSeparators,e.regex);let u;d.reset(0);do if(u=d.next(t),u&&(r[o++]=tp(new E(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),o>=l))return o;while(u);return o}static findNextMatch(e,t,i,s){const o=t.parseSearchRequest();if(!o)return null;const r=new nw(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,i,r,s):this._doFindNextMatchLineByLine(e,i,r,s)}static _doFindNextMatchMultiline(e,t,i,s){const o=new H(t.lineNumber,1),r=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new E(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new AQ(l):null;i.reset(t.column-1);const d=i.next(l);return d?tp(this._getMultilineMatchRange(e,r,l,c,d.index,d[0]),d,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new H(1,1),i,s):null}static _doFindNextMatchLineByLine(e,t,i,s){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(i,a,r,t.column,s);if(l)return l;for(let c=1;c<=o;c++){const d=(r+c-1)%o,u=e.getLineContent(d+1),h=this._findFirstMatchInLine(i,u,d+1,1,s);if(h)return h}return null}static _findFirstMatchInLine(e,t,i,s,o){e.reset(s-1);const r=e.next(t);return r?tp(new E(i,r.index+1,i,r.index+1+r[0].length),r,o):null}static findPreviousMatch(e,t,i,s){const o=t.parseSearchRequest();if(!o)return null;const r=new nw(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,i,r,s):this._doFindPreviousMatchLineByLine(e,i,r,s)}static _doFindPreviousMatchMultiline(e,t,i,s){const o=this._doFindMatchesMultiline(e,new E(1,1,t.lineNumber,t.column),i,s,10*dIe);if(o.length>0)return o[o.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new H(r,e.getLineMaxColumn(r)),i,s):null}static _doFindPreviousMatchLineByLine(e,t,i,s){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(i,a,r,s);if(l)return l;for(let c=1;c<=o;c++){const d=(o+r-c-1)%o,u=e.getLineContent(d+1),h=this._findLastMatchInLine(i,u,d+1,s);if(h)return h}return null}static _findLastMatchInLine(e,t,i,s){let o=null,r;for(e.reset(0);r=e.next(t);)o=tp(new E(i,r.index+1,i,r.index+1+r[0].length),r,s);return o}}function hIe(n,e,t,i,s){if(i===0)return!0;const o=e.charCodeAt(i-1);if(n.get(o)!==0||o===13||o===10)return!0;if(s>0){const r=e.charCodeAt(i);if(n.get(r)!==0)return!0}return!1}function fIe(n,e,t,i,s){if(i+s===t)return!0;const o=e.charCodeAt(i+s);if(n.get(o)!==0||o===13||o===10)return!0;if(s>0){const r=e.charCodeAt(i+s-1);if(n.get(r)!==0)return!0}return!1}function Nz(n,e,t,i,s){return hIe(n,e,t,i,s)&&fIe(n,e,t,i,s)}class nw{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const s=i.index,o=i[0].length;if(s===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){QI(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=o,!this._wordSeparators||Nz(this._wordSeparators,e,t,s,o))return i}while(i);return null}}class Iz{static computeUnicodeHighlights(e,t,i){const s=i?i.startLineNumber:1,o=i?i.endLineNumber:e.getLineCount(),r=new OQ(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${gIe(Array.from(a))}`,"g");const c=new nw(null,l),d=[];let u=!1,h,f=0,g=0,m=0;e:for(let _=s,b=o;_<=b;_++){const v=e.getLineContent(_),w=v.length;c.reset(0);do if(h=c.next(v),h){let y=h.index,S=h.index+h[0].length;if(y>0){const N=v.charCodeAt(y-1);Pn(N)&&y--}if(S+1<w){const N=v.charCodeAt(S-1);Pn(N)&&S++}const x=v.substring(y,S);let k=Mx(y+1,ez,v,0);k&&k.endColumn<=y+1&&(k=null);const D=r.shouldHighlightNonBasicASCII(x,k?k.word:null);if(D!==0){if(D===3?f++:D===2?g++:D===1?m++:_A(),d.length>=1e3){u=!0;break e}d.push(new E(_,y+1,_,S+1))}}while(h)}return{ranges:d,hasMore:u,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:m}}static computeUnicodeHighlightReason(e,t){const i=new OQ(t);switch(i.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const o=e.codePointAt(0),r=i.ambiguousCharacters.getPrimaryConfusable(o),a=Hx.getLocales().filter(l=>!Hx.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(o));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function gIe(n,e){return`[${ua(n.map(i=>String.fromCodePoint(i)).join(""))}]`}class OQ{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Hx.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Hp.codePoints)FQ(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const i=e.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,o=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=TL(r);s=s||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Hp.isInvisibleCharacter(a)&&(o=!0)}return!s&&o?0:this.options.invisibleCharacters&&!FQ(e)&&Hp.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function FQ(n){return n===" "||n===`
`||n==="	"}class LN{constructor(e,t,i){this.changes=e,this.moves=t,this.hitTimeout=i}}class ude{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class st{static addRange(e,t){let i=0;for(;i<t.length&&t[i].endExclusive<e.start;)i++;let s=i;for(;s<t.length&&t[s].start<=e.endExclusive;)s++;if(i===s)t.splice(i,0,e);else{const o=Math.min(e.start,t[i].start),r=Math.max(e.endExclusive,t[s-1].endExclusive);t.splice(i,s-i,new st(o,r))}}static tryCreate(e,t){if(!(e>t))return new st(e,t)}static ofLength(e){return new st(0,e)}static ofStartAndLength(e,t){return new st(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Dt(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new st(this.start+e,this.endExclusive+e)}deltaStart(e){return new st(this.start+e,this.endExclusive)}deltaEnd(e){return new st(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new st(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);if(t<=i)return new st(t,i)}intersects(e){const t=Math.max(this.start,e.start),i=Math.min(this.endExclusive,e.endExclusive);return t<i}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Dt(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Dt(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class Tz{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let i=t;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=e.endExclusive;)i++;if(t===i)this._sortedRanges.splice(t,0,e);else{const s=Math.min(e.start,this._sortedRanges[t].start),o=Math.max(e.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(t,i-t,new st(s,o))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new Tz;for(const i of this._sortedRanges){const s=i.intersect(e);s&&t.addRange(s)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function $x(n,e){const t=mIe(n,e);if(t!==-1)return n[t]}function mIe(n,e,t=n.length-1){for(let i=t;i>=0;i--){const s=n[i];if(e(s))return i}return-1}function ly(n,e){const t=qx(n,e);return t===-1?void 0:n[t]}function qx(n,e,t=0,i=n.length){let s=t,o=i;for(;s<o;){const r=Math.floor((s+o)/2);e(n[r])?s=r+1:o=r}return s-1}function pIe(n,e){const t=Kx(n,e);return t===n.length?void 0:n[t]}function Kx(n,e,t=0,i=n.length){let s=t,o=i;for(;s<o;){const r=Math.floor((s+o)/2);e(n[r])?o=r:s=r+1}return s}const GM=class GM{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(GM.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=qx(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};GM.assertInvariants=!1;let uT=GM;function Pz(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>0&&(t=s)}return t}function _Ie(n,e){if(n.length===0)return;let t=n[0];for(let i=1;i<n.length;i++){const s=n[i];e(s,t)>=0&&(t=s)}return t}function bIe(n,e){return Pz(n,(t,i)=>-e(t,i))}function vIe(n,e){if(n.length===0)return-1;let t=0;for(let i=1;i<n.length;i++){const s=n[i];e(s,n[t])>0&&(t=i)}return t}function wIe(n,e){for(const t of n){const i=e(t);if(i!==void 0)return i}}let $e=class ku{static fromRangeInclusive(e){return new ku(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new Aa(e[0].slice());for(let i=1;i<e.length;i++)t=t.getUnion(new Aa(e[i].slice()));return t.ranges}static join(e){if(e.length===0)throw new Dt("lineRanges cannot be empty");let t=e[0].startLineNumber,i=e[0].endLineNumberExclusive;for(let s=1;s<e.length;s++)t=Math.min(t,e[s].startLineNumber),i=Math.max(i,e[s].endLineNumberExclusive);return new ku(t,i)}static ofLength(e,t){return new ku(e,e+t)}static deserialize(e){return new ku(e[0],e[1])}constructor(e,t){if(e>t)throw new Dt(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new ku(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new ku(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new ku(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=i)return new ku(t,i)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new E(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new E(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let i=this.startLineNumber;i<this.endLineNumberExclusive;i++)t.push(e(i));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new st(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class Aa{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=Kx(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),i=qx(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)this._normalizedRanges.splice(t,0,e);else if(t===i-1){const s=this._normalizedRanges[t];this._normalizedRanges[t]=s.join(e)}else{const s=this._normalizedRanges[t].join(this._normalizedRanges[i-1]).join(e);this._normalizedRanges.splice(t,i-t,s)}}contains(e){const t=ly(this._normalizedRanges,i=>i.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=ly(this._normalizedRanges,i=>i.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let i=0,s=0,o=null;for(;i<this._normalizedRanges.length||s<e._normalizedRanges.length;){let r=null;if(i<this._normalizedRanges.length&&s<e._normalizedRanges.length){const a=this._normalizedRanges[i],l=e._normalizedRanges[s];a.startLineNumber<l.startLineNumber?(r=a,i++):(r=l,s++)}else i<this._normalizedRanges.length?(r=this._normalizedRanges[i],i++):(r=e._normalizedRanges[s],s++);o===null?o=r:o.endLineNumberExclusive>=r.startLineNumber?o=new $e(o.startLineNumber,Math.max(o.endLineNumberExclusive,r.endLineNumberExclusive)):(t.push(o),o=r)}return o!==null&&t.push(o),new Aa(t)}subtractFrom(e){const t=Kx(this._normalizedRanges,r=>r.endLineNumberExclusive>=e.startLineNumber),i=qx(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===i)return new Aa([e]);const s=[];let o=e.startLineNumber;for(let r=t;r<i;r++){const a=this._normalizedRanges[r];a.startLineNumber>o&&s.push(new $e(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&s.push(new $e(o,e.endLineNumberExclusive)),new Aa(s)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let i=0,s=0;for(;i<this._normalizedRanges.length&&s<e._normalizedRanges.length;){const o=this._normalizedRanges[i],r=e._normalizedRanges[s],a=o.intersect(r);a&&!a.isEmpty&&t.push(a),o.endLineNumberExclusive<r.endLineNumberExclusive?i++:s++}return new Aa(t)}getWithDelta(e){return new Aa(this._normalizedRanges.map(t=>t.delta(e)))}}const bf=class bf{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new bf(0,t.column-e.column):new bf(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return bf.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,i=0;for(const s of e)s===`
`?(t++,i=0):i++;return new bf(t,i)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new E(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new E(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new H(e.lineNumber,e.column+this.columnCount):new H(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};bf.zero=new bf(0,0);let Al=bf;class CIe{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new st(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new Al(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class Mz{constructor(e){this.edits=e,hb(()=>kz(e,(t,i)=>t.range.getEndPosition().isBeforeOrEqual(i.range.getStartPosition())))}apply(e){let t="",i=new H(1,1);for(const o of this.edits){const r=o.range,a=r.getStartPosition(),l=r.getEndPosition(),c=WQ(i,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=o.text,i=l}const s=WQ(i,e.endPositionExclusive);return s.isEmpty()||(t+=e.getValueOfRange(s)),t}applyToString(e){const t=new yIe(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,i=0,s=0;for(const o of this.edits){const r=Al.ofText(o.text),a=H.lift({lineNumber:o.range.startLineNumber+i,column:o.range.startColumn+(o.range.startLineNumber===t?s:0)}),l=r.createRange(a);e.push(l),i=l.endLineNumber-o.range.endLineNumber,s=l.endColumn-o.range.endColumn,t=o.range.endLineNumber}return e}}class Yd{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function WQ(n,e){if(n.lineNumber===e.lineNumber&&n.column===Number.MAX_SAFE_INTEGER)return E.fromPositions(e,e);if(!n.isBeforeOrEqual(e))throw new Dt("start must be before end");return new E(n.lineNumber,n.column,e.lineNumber,e.column)}class hde{get endPositionExclusive(){return this.length.addToPosition(new H(1,1))}}class yIe extends hde{constructor(e){super(),this.value=e,this._t=new CIe(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class qs{static inverse(e,t,i){const s=[];let o=1,r=1;for(const l of e){const c=new qs(new $e(o,l.original.startLineNumber),new $e(r,l.modified.startLineNumber));c.modified.isEmpty||s.push(c),o=l.original.endLineNumberExclusive,r=l.modified.endLineNumberExclusive}const a=new qs(new $e(o,t+1),new $e(r,i+1));return a.modified.isEmpty||s.push(a),s}static clip(e,t,i){const s=[];for(const o of e){const r=o.original.intersect(t),a=o.modified.intersect(i);r&&!r.isEmpty&&a&&!a.isEmpty&&s.push(new qs(r,a))}return s}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new qs(this.modified,this.original)}join(e){return new qs(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new qr(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Dt("not a valid diff");return new qr(new E(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new E(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new qr(new E(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new E(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(BQ(this.original.endLineNumberExclusive,e)&&BQ(this.modified.endLineNumberExclusive,t))return new qr(new E(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new E(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new qr(E.fromPositions(new H(this.original.startLineNumber,1),gv(new H(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),E.fromPositions(new H(this.modified.startLineNumber,1),gv(new H(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new qr(E.fromPositions(gv(new H(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),gv(new H(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),E.fromPositions(gv(new H(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),gv(new H(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new Dt}}function gv(n,e){if(n.lineNumber<1)return new H(1,1);if(n.lineNumber>e.length)return new H(e.length,e[e.length-1].length+1);const t=e[n.lineNumber-1];return n.column>t.length+1?new H(n.lineNumber,t.length+1):n}function BQ(n,e){return n>=1&&n<=e.length}class la extends qs{static fromRangeMappings(e){const t=$e.join(e.map(s=>$e.fromRangeInclusive(s.originalRange))),i=$e.join(e.map(s=>$e.fromRangeInclusive(s.modifiedRange)));return new la(t,i,e)}constructor(e,t,i){super(e,t),this.innerChanges=i}flip(){var e;return new la(this.modified,this.original,(e=this.innerChanges)==null?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new la(this.original,this.modified,[this.toRangeMapping()])}}class qr{static assertSorted(e){for(let t=1;t<e.length;t++){const i=e[t-1],s=e[t];if(!(i.originalRange.getEndPosition().isBeforeOrEqual(s.originalRange.getStartPosition())&&i.modifiedRange.getEndPosition().isBeforeOrEqual(s.modifiedRange.getStartPosition())))throw new Dt("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new qr(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new Yd(this.originalRange,t)}}const SIe=3;class xIe{computeDiff(e,t,i){var l;const o=new DIe(e,t,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),r=[];let a=null;for(const c of o.changes){let d;c.originalEndLineNumber===0?d=new $e(c.originalStartLineNumber+1,c.originalStartLineNumber+1):d=new $e(c.originalStartLineNumber,c.originalEndLineNumber+1);let u;c.modifiedEndLineNumber===0?u=new $e(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):u=new $e(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let h=new la(d,u,(l=c.charChanges)==null?void 0:l.map(f=>new qr(new E(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new E(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===h.modified.startLineNumber||a.original.endLineNumberExclusive===h.original.startLineNumber)&&(h=new la(a.original.join(h.original),a.modified.join(h.modified),a.innerChanges&&h.innerChanges?a.innerChanges.concat(h.innerChanges):void 0),r.pop()),r.push(h),a=h}return hb(()=>kz(r,(c,d)=>d.original.startLineNumber-c.original.endLineNumberExclusive===d.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<d.original.startLineNumber&&c.modified.endLineNumberExclusive<d.modified.startLineNumber)),new LN(r,[],o.quitEarly)}}function fde(n,e,t,i){return new Pd(n,e,t).ComputeDiff(i)}let HQ=class{constructor(e){const t=[],i=[];for(let s=0,o=e.length;s<o;s++)t[s]=AB(e[s],1),i[s]=OB(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=i}getElements(){const e=[];for(let t=0,i=this.lines.length;t<i;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,i){const s=[],o=[],r=[];let a=0;for(let l=t;l<=i;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let h=d;h<u;h++)s[a]=c.charCodeAt(h-1),o[a]=l+1,r[a]=h,a++;!e&&l<i&&(s[a]=10,o[a]=l+1,r[a]=c.length+1,a++)}return new kIe(s,o,r)}};class kIe{constructor(e,t,i){this._charCodes=e,this._lineNumbers=t,this._columns=i}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class tC{constructor(e,t,i,s,o,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=i,this.originalEndColumn=s,this.modifiedStartLineNumber=o,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,i){const s=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=i.getStartLineNumber(e.modifiedStart),c=i.getStartColumn(e.modifiedStart),d=i.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=i.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new tC(s,o,r,a,l,c,d,u)}}function LIe(n){if(n.length<=1)return n;const e=[n[0]];let t=e[0];for(let i=1,s=n.length;i<s;i++){const o=n[i],r=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<SIe?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}class rS{constructor(e,t,i,s,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=s,this.charChanges=o}static createFromDiffResult(e,t,i,s,o,r,a){let l,c,d,u,h;if(t.originalLength===0?(l=i.getStartLineNumber(t.originalStart)-1,c=0):(l=i.getStartLineNumber(t.originalStart),c=i.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=s.getStartLineNumber(t.modifiedStart)-1,u=0):(d=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const f=i.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){let m=fde(f,g,o,!0).changes;a&&(m=LIe(m)),h=[];for(let _=0,b=m.length;_<b;_++)h.push(tC.createFromDiffChange(m[_],f,g))}}return new rS(l,c,d,u,h)}}class DIe{constructor(e,t,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new HQ(e),this.modified=new HQ(t),this.continueLineDiff=jQ(i.maxComputationTime),this.continueCharDiff=jQ(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=fde(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,i=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(rS.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:a}}const s=[];let o=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;o<d&&r<u;){const h=this.originalLines[o],f=this.modifiedLines[r];if(h!==f){{let g=AB(h,1),m=AB(f,1);for(;g>1&&m>1;){const _=h.charCodeAt(g-2),b=f.charCodeAt(m-2);if(_!==b)break;g--,m--}(g>1||m>1)&&this._pushTrimWhitespaceCharChange(s,o+1,1,g,r+1,1,m)}{let g=OB(h,1),m=OB(f,1);const _=h.length+1,b=f.length+1;for(;g<_&&m<b;){const v=h.charCodeAt(g-1),w=h.charCodeAt(m-1);if(v!==w)break;g++,m++}(g<_||m<b)&&this._pushTrimWhitespaceCharChange(s,o+1,g,_,r+1,m,b)}}o++,r++}c&&(s.push(rS.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:i,changes:s}}_pushTrimWhitespaceCharChange(e,t,i,s,o,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,i,s,o,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new tC(t,i,t,s,o,r,o,a)]),e.push(new rS(t,t,o,o,l))}_mergeTrimWhitespaceCharChange(e,t,i,s,o,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===o?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new tC(t,i,t,s,o,r,o,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===o?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new tC(t,i,t,s,o,r,o,a)),!0):!1}}function AB(n,e){const t=Zs(n);return t===-1?e:t+1}function OB(n,e){const t=Dc(n);return t===-1?e:t+2}function jQ(n){if(n===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<n}class mh{static trivial(e,t){return new mh([new In(st.ofLength(e.length),st.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new mh([new In(st.ofLength(e.length),st.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class In{static invert(e,t){const i=[];return kle(e,(s,o)=>{i.push(In.fromOffsetPairs(s?s.getEndExclusives():eh.zero,o?o.getStarts():new eh(t,(s?s.seq2Range.endExclusive-s.seq1Range.endExclusive:0)+t)))}),i}static fromOffsetPairs(e,t){return new In(new st(e.offset1,t.offset1),new st(e.offset2,t.offset2))}static assertSorted(e){let t;for(const i of e){if(t&&!(t.seq1Range.endExclusive<=i.seq1Range.start&&t.seq2Range.endExclusive<=i.seq2Range.start))throw new Dt("Sequence diffs must be sorted");t=i}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new In(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new In(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new In(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new In(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new In(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),i=this.seq2Range.intersect(e.seq2Range);if(!(!t||!i))return new In(t,i)}getStarts(){return new eh(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new eh(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const pp=class pp{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new pp(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};pp.zero=new pp(0,0),pp.max=new pp(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let eh=pp;const YM=class YM{isValid(){return!0}};YM.instance=new YM;let Gx=YM;class EIe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Dt("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class t4{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,i){this.array[e+t*this.width]=i}}function FB(n){return n===32||n===9}const qS=class qS{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,i){this.range=e,this.lines=t,this.source=i,this.histogram=[];let s=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){const r=t[o];for(let l=0;l<r.length;l++){s++;const c=r[l],d=qS.getKey(c);this.histogram[d]=(this.histogram[d]||0)+1}s++;const a=qS.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=s}computeSimilarity(e){let t=0;const i=Math.max(this.histogram.length,e.histogram.length);for(let s=0;s<i;s++)t+=Math.abs((this.histogram[s]??0)-(e.histogram[s]??0));return 1-t/(this.totalCount+e.totalCount)}};qS.chrKeys=new Map;let hT=qS;class NIe{compute(e,t,i=Gx.instance,s){if(e.length===0||t.length===0)return mh.trivial(e,t);const o=new t4(e.length,t.length),r=new t4(e.length,t.length),a=new t4(e.length,t.length);for(let g=0;g<e.length;g++)for(let m=0;m<t.length;m++){if(!i.isValid())return mh.trivialTimedOut(e,t);const _=g===0?0:o.get(g-1,m),b=m===0?0:o.get(g,m-1);let v;e.getElement(g)===t.getElement(m)?(g===0||m===0?v=0:v=o.get(g-1,m-1),g>0&&m>0&&r.get(g-1,m-1)===3&&(v+=a.get(g-1,m-1)),v+=s?s(g,m):1):v=-1;const w=Math.max(_,b,v);if(w===v){const y=g>0&&m>0?a.get(g-1,m-1):0;a.set(g,m,y+1),r.set(g,m,3)}else w===_?(a.set(g,m,0),r.set(g,m,1)):w===b&&(a.set(g,m,0),r.set(g,m,2));o.set(g,m,w)}const l=[];let c=e.length,d=t.length;function u(g,m){(g+1!==c||m+1!==d)&&l.push(new In(new st(g+1,c),new st(m+1,d))),c=g,d=m}let h=e.length-1,f=t.length-1;for(;h>=0&&f>=0;)r.get(h,f)===3?(u(h,f),h--,f--):r.get(h,f)===1?h--:f--;return u(-1,-1),l.reverse(),new mh(l,!1)}}class gde{compute(e,t,i=Gx.instance){if(e.length===0||t.length===0)return mh.trivial(e,t);const s=e,o=t;function r(m,_){for(;m<s.length&&_<o.length&&s.getElement(m)===o.getElement(_);)m++,_++;return m}let a=0;const l=new IIe;l.set(0,r(0,0));const c=new TIe;c.set(0,l.get(0)===0?null:new VQ(null,0,0,l.get(0)));let d=0;e:for(;;){if(a++,!i.isValid())return mh.trivialTimedOut(s,o);const m=-Math.min(a,o.length+a%2),_=Math.min(a,s.length+a%2);for(d=m;d<=_;d+=2){const b=d===_?-1:l.get(d+1),v=d===m?-1:l.get(d-1)+1,w=Math.min(Math.max(b,v),s.length),y=w-d;if(w>s.length||y>o.length)continue;const S=r(w,y);l.set(d,S);const x=w===b?c.get(d+1):c.get(d-1);if(c.set(d,S!==w?new VQ(x,w,y,S-w):x),l.get(d)===s.length&&l.get(d)-d===o.length)break e}}let u=c.get(d);const h=[];let f=s.length,g=o.length;for(;;){const m=u?u.x+u.length:0,_=u?u.y+u.length:0;if((m!==f||_!==g)&&h.push(new In(new st(m,f),new st(_,g))),!u)break;f=u.x,g=u.y,u=u.prev}return h.reverse(),new mh(h,!1)}}class VQ{constructor(e,t,i,s){this.prev=e,this.x=t,this.y=i,this.length=s}}class IIe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const i=this.negativeArr;this.negativeArr=new Int32Array(i.length*2),this.negativeArr.set(i)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const i=this.positiveArr;this.positiveArr=new Int32Array(i.length*2),this.positiveArr.set(i)}this.positiveArr[e]=t}}}class TIe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class fT{constructor(e,t,i){this.lines=e,this.range=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let s=this.range.startLineNumber;s<=this.range.endLineNumber;s++){let o=e[s-1],r=0;s===this.range.startLineNumber&&this.range.startColumn>1&&(r=this.range.startColumn-1,o=o.substring(r)),this.lineStartOffsets.push(r);let a=0;if(!i){const c=o.trimStart();a=o.length-c.length,o=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=s===this.range.endLineNumber?Math.min(this.range.endColumn-1-r-a,o.length):o.length;for(let c=0;c<l;c++)this.elements.push(o.charCodeAt(c));s<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new st(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=UQ(e>0?this.elements[e-1]:-1),i=UQ(e<this.elements.length?this.elements[e]:-1);if(t===7&&i===8)return 0;if(t===8)return 150;let s=0;return t!==i&&(s+=10,t===0&&i===1&&(s+=1)),s+=zQ(t),s+=zQ(i),s}translateOffset(e,t="right"){const i=qx(this.firstElementOffsetByLineIdx,o=>o<=e),s=e-this.firstElementOffsetByLineIdx[i];return new H(this.range.startLineNumber+i,1+this.lineStartOffsets[i]+s+(s===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[i]))}translateRange(e){const t=this.translateOffset(e.start,"right"),i=this.translateOffset(e.endExclusive,"left");return i.isBefore(t)?E.fromPositions(i,i):E.fromPositions(t,i)}findWordContaining(e){if(e<0||e>=this.elements.length||!i4(this.elements[e]))return;let t=e;for(;t>0&&i4(this.elements[t-1]);)t--;let i=e;for(;i<this.elements.length&&i4(this.elements[i]);)i++;return new st(t,i)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=ly(this.firstElementOffsetByLineIdx,s=>s<=e.start)??0,i=pIe(this.firstElementOffsetByLineIdx,s=>e.endExclusive<=s)??this.elements.length;return new st(t,i)}}function i4(n){return n>=97&&n<=122||n>=65&&n<=90||n>=48&&n<=57}const PIe={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function zQ(n){return PIe[n]}function UQ(n){return n===10?8:n===13?7:FB(n)?6:n>=97&&n<=122?0:n>=65&&n<=90?1:n>=48&&n<=57?2:n===-1?3:n===44||n===59?5:4}function MIe(n,e,t,i,s,o){let{moves:r,excludedChanges:a}=AIe(n,e,t,o);if(!o.isValid())return[];const l=n.filter(d=>!a.has(d)),c=OIe(l,i,s,e,t,o);return iW(r,c),r=FIe(r),r=r.filter(d=>{const u=d.original.toOffsetRange().slice(e).map(f=>f.trim());return u.join(`
`).length>=15&&RIe(u,f=>f.length>=2)>=2}),r=WIe(n,r),r}function RIe(n,e){let t=0;for(const i of n)e(i)&&t++;return t}function AIe(n,e,t,i){const s=[],o=n.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new hT(l.original,e,l)),r=new Set(n.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new hT(l.modified,t,l))),a=new Set;for(const l of o){let c=-1,d;for(const u of r){const h=l.computeSimilarity(u);h>c&&(c=h,d=u)}if(c>.9&&d&&(r.delete(d),s.push(new qs(l.range,d.range)),a.add(l.source),a.add(d.source)),!i.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}function OIe(n,e,t,i,s,o){const r=[],a=new Ez;for(const h of n)for(let f=h.original.startLineNumber;f<h.original.endLineNumberExclusive-2;f++){const g=`${e[f-1]}:${e[f+1-1]}:${e[f+2-1]}`;a.add(g,{range:new $e(f,f+3)})}const l=[];n.sort(mo(h=>h.modified.startLineNumber,Dl));for(const h of n){let f=[];for(let g=h.modified.startLineNumber;g<h.modified.endLineNumberExclusive-2;g++){const m=`${t[g-1]}:${t[g+1-1]}:${t[g+2-1]}`,_=new $e(g,g+3),b=[];a.forEach(m,({range:v})=>{for(const y of f)if(y.originalLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive&&y.modifiedLineRange.endLineNumberExclusive+1===_.endLineNumberExclusive){y.originalLineRange=new $e(y.originalLineRange.startLineNumber,v.endLineNumberExclusive),y.modifiedLineRange=new $e(y.modifiedLineRange.startLineNumber,_.endLineNumberExclusive),b.push(y);return}const w={modifiedLineRange:_,originalLineRange:v};l.push(w),b.push(w)}),f=b}if(!o.isValid())return[]}l.sort(Ele(mo(h=>h.modifiedLineRange.length,Dl)));const c=new Aa,d=new Aa;for(const h of l){const f=h.modifiedLineRange.startLineNumber-h.originalLineRange.startLineNumber,g=c.subtractFrom(h.modifiedLineRange),m=d.subtractFrom(h.originalLineRange).getWithDelta(f),_=g.getIntersection(m);for(const b of _.ranges){if(b.length<3)continue;const v=b,w=b.delta(-f);r.push(new qs(w,v)),c.addRange(v),d.addRange(w)}}r.sort(mo(h=>h.original.startLineNumber,Dl));const u=new uT(n);for(let h=0;h<r.length;h++){const f=r[h],g=u.findLastMonotonous(x=>x.original.startLineNumber<=f.original.startLineNumber),m=ly(n,x=>x.modified.startLineNumber<=f.modified.startLineNumber),_=Math.max(f.original.startLineNumber-g.original.startLineNumber,f.modified.startLineNumber-m.modified.startLineNumber),b=u.findLastMonotonous(x=>x.original.startLineNumber<f.original.endLineNumberExclusive),v=ly(n,x=>x.modified.startLineNumber<f.modified.endLineNumberExclusive),w=Math.max(b.original.endLineNumberExclusive-f.original.endLineNumberExclusive,v.modified.endLineNumberExclusive-f.modified.endLineNumberExclusive);let y;for(y=0;y<_;y++){const x=f.original.startLineNumber-y-1,k=f.modified.startLineNumber-y-1;if(x>i.length||k>s.length||c.contains(k)||d.contains(x)||!$Q(i[x-1],s[k-1],o))break}y>0&&(d.addRange(new $e(f.original.startLineNumber-y,f.original.startLineNumber)),c.addRange(new $e(f.modified.startLineNumber-y,f.modified.startLineNumber)));let S;for(S=0;S<w;S++){const x=f.original.endLineNumberExclusive+S,k=f.modified.endLineNumberExclusive+S;if(x>i.length||k>s.length||c.contains(k)||d.contains(x)||!$Q(i[x-1],s[k-1],o))break}S>0&&(d.addRange(new $e(f.original.endLineNumberExclusive,f.original.endLineNumberExclusive+S)),c.addRange(new $e(f.modified.endLineNumberExclusive,f.modified.endLineNumberExclusive+S))),(y>0||S>0)&&(r[h]=new qs(new $e(f.original.startLineNumber-y,f.original.endLineNumberExclusive+S),new $e(f.modified.startLineNumber-y,f.modified.endLineNumberExclusive+S)))}return r}function $Q(n,e,t){if(n.trim()===e.trim())return!0;if(n.length>300&&e.length>300)return!1;const s=new gde().compute(new fT([n],new E(1,1,1,n.length),!1),new fT([e],new E(1,1,1,e.length),!1),t);let o=0;const r=In.invert(s.diffs,n.length);for(const d of r)d.seq1Range.forEach(u=>{FB(n.charCodeAt(u))||o++});function a(d){let u=0;for(let h=0;h<n.length;h++)FB(d.charCodeAt(h))||u++;return u}const l=a(n.length>e.length?n:e);return o/l>.6&&l>10}function FIe(n){if(n.length===0)return n;n.sort(mo(t=>t.original.startLineNumber,Dl));const e=[n[0]];for(let t=1;t<n.length;t++){const i=e[e.length-1],s=n[t],o=s.original.startLineNumber-i.original.endLineNumberExclusive,r=s.modified.startLineNumber-i.modified.endLineNumberExclusive;if(o>=0&&r>=0&&o+r<=2){e[e.length-1]=i.join(s);continue}e.push(s)}return e}function WIe(n,e){const t=new uT(n);return e=e.filter(i=>{const s=t.findLastMonotonous(a=>a.original.startLineNumber<i.original.endLineNumberExclusive)||new qs(new $e(1,1),new $e(1,1)),o=ly(n,a=>a.modified.startLineNumber<i.modified.endLineNumberExclusive);return s!==o}),e}function WB(n,e,t){let i=t;return i=qQ(n,e,i),i=qQ(n,e,i),i=BIe(n,e,i),i}function qQ(n,e,t){if(t.length===0)return t;const i=[];i.push(t[0]);for(let o=1;o<t.length;o++){const r=i[i.length-1];let a=t[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-r.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(n.getElement(a.seq1Range.start-c)!==n.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){i[i.length-1]=new In(new st(r.seq1Range.start,a.seq1Range.endExclusive-l),new st(r.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}i.push(a)}const s=[];for(let o=0;o<i.length-1;o++){const r=i[o+1];let a=i[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=r.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!n.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){i[o+1]=new In(new st(a.seq1Range.start+l,r.seq1Range.endExclusive),new st(a.seq2Range.start+l,r.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}s.push(a)}return i.length>0&&s.push(i[i.length-1]),s}function BIe(n,e,t){if(!n.getBoundaryScore||!e.getBoundaryScore)return t;for(let i=0;i<t.length;i++){const s=i>0?t[i-1]:void 0,o=t[i],r=i+1<t.length?t[i+1]:void 0,a=new st(s?s.seq1Range.endExclusive+1:0,r?r.seq1Range.start-1:n.length),l=new st(s?s.seq2Range.endExclusive+1:0,r?r.seq2Range.start-1:e.length);o.seq1Range.isEmpty?t[i]=KQ(o,n,e,a,l):o.seq2Range.isEmpty&&(t[i]=KQ(o.swap(),e,n,l,a).swap())}return t}function KQ(n,e,t,i,s){let r=1;for(;n.seq1Range.start-r>=i.start&&n.seq2Range.start-r>=s.start&&t.isStronglyEqual(n.seq2Range.start-r,n.seq2Range.endExclusive-r)&&r<100;)r++;r--;let a=0;for(;n.seq1Range.start+a<i.endExclusive&&n.seq2Range.endExclusive+a<s.endExclusive&&t.isStronglyEqual(n.seq2Range.start+a,n.seq2Range.endExclusive+a)&&a<100;)a++;if(r===0&&a===0)return n;let l=0,c=-1;for(let d=-r;d<=a;d++){const u=n.seq2Range.start+d,h=n.seq2Range.endExclusive+d,f=n.seq1Range.start+d,g=e.getBoundaryScore(f)+t.getBoundaryScore(u)+t.getBoundaryScore(h);g>c&&(c=g,l=d)}return n.delta(l)}function HIe(n,e,t){const i=[];for(const s of t){const o=i[i.length-1];if(!o){i.push(s);continue}s.seq1Range.start-o.seq1Range.endExclusive<=2||s.seq2Range.start-o.seq2Range.endExclusive<=2?i[i.length-1]=new In(o.seq1Range.join(s.seq1Range),o.seq2Range.join(s.seq2Range)):i.push(s)}return i}function jIe(n,e,t){const i=In.invert(t,n.length),s=[];let o=new eh(0,0);function r(l,c){if(l.offset1<o.offset1||l.offset2<o.offset2)return;const d=n.findWordContaining(l.offset1),u=e.findWordContaining(l.offset2);if(!d||!u)return;let h=new In(d,u);const f=h.intersect(c);let g=f.seq1Range.length,m=f.seq2Range.length;for(;i.length>0;){const _=i[0];if(!(_.seq1Range.intersects(h.seq1Range)||_.seq2Range.intersects(h.seq2Range)))break;const v=n.findWordContaining(_.seq1Range.start),w=e.findWordContaining(_.seq2Range.start),y=new In(v,w),S=y.intersect(_);if(g+=S.seq1Range.length,m+=S.seq2Range.length,h=h.join(y),h.seq1Range.endExclusive>=_.seq1Range.endExclusive)i.shift();else break}g+m<(h.seq1Range.length+h.seq2Range.length)*2/3&&s.push(h),o=h.getEndExclusives()}for(;i.length>0;){const l=i.shift();l.seq1Range.isEmpty||(r(l.getStarts(),l),r(l.getEndExclusives().delta(-1),l))}return VIe(t,s)}function VIe(n,e){const t=[];for(;n.length>0||e.length>0;){const i=n[0],s=e[0];let o;i&&(!s||i.seq1Range.start<s.seq1Range.start)?o=n.shift():o=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=o.seq1Range.start?t[t.length-1]=t[t.length-1].join(o):t.push(o)}return t}function zIe(n,e,t){let i=t;if(i.length===0)return i;let s=0,o;do{o=!1;const r=[i[0]];for(let a=1;a<i.length;a++){let d=function(h,f){const g=new st(c.seq1Range.endExclusive,l.seq1Range.start);return n.getText(g).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};const l=i[a],c=r[r.length-1];d(c,l)?(o=!0,r[r.length-1]=r[r.length-1].join(l)):r.push(l)}i=r}while(s++<10&&o);return i}function UIe(n,e,t){let i=t;if(i.length===0)return i;let s=0,o;do{o=!1;const a=[i[0]];for(let l=1;l<i.length;l++){let u=function(f,g){const m=new st(d.seq1Range.endExclusive,c.seq1Range.start);if(n.countLinesIn(m)>5||m.length>500)return!1;const b=n.getText(m).trim();if(b.length>20||b.split(/\r\n|\r|\n/).length>1)return!1;const v=n.countLinesIn(f.seq1Range),w=f.seq1Range.length,y=e.countLinesIn(f.seq2Range),S=f.seq2Range.length,x=n.countLinesIn(g.seq1Range),k=g.seq1Range.length,D=e.countLinesIn(g.seq2Range),N=g.seq2Range.length,R=2*40+50;function O(B){return Math.min(B,R)}return Math.pow(Math.pow(O(v*40+w),1.5)+Math.pow(O(y*40+S),1.5),1.5)+Math.pow(Math.pow(O(x*40+k),1.5)+Math.pow(O(D*40+N),1.5),1.5)>(R**1.5)**1.5*1.3};const c=i[l],d=a[a.length-1];u(d,c)?(o=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(s++<10&&o);const r=[];return Mxe(i,(a,l,c)=>{let d=l;function u(b){return b.length>0&&b.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const h=n.extendToFullLines(l.seq1Range),f=n.getText(new st(h.start,l.seq1Range.start));u(f)&&(d=d.deltaStart(-f.length));const g=n.getText(new st(l.seq1Range.endExclusive,h.endExclusive));u(g)&&(d=d.deltaEnd(g.length));const m=In.fromOffsetPairs(a?a.getEndExclusives():eh.zero,c?c.getStarts():eh.max),_=d.intersect(m);r.length>0&&_.getStarts().equals(r[r.length-1].getEndExclusives())?r[r.length-1]=r[r.length-1].join(_):r.push(_)}),r}class GQ{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:YQ(this.lines[e-1]),i=e===this.lines.length?0:YQ(this.lines[e]);return 1e3-(t+i)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function YQ(n){let e=0;for(;e<n.length&&(n.charCodeAt(e)===32||n.charCodeAt(e)===9);)e++;return e}class mde{constructor(){this.dynamicProgrammingDiffing=new NIe,this.myersDiffingAlgorithm=new gde}computeDiff(e,t,i){if(e.length<=1&&Li(e,t,(S,x)=>S===x))return new LN([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new LN([new la(new $e(1,e.length+1),new $e(1,t.length+1),[new qr(new E(1,1,e.length,e[e.length-1].length+1),new E(1,1,t.length,t[t.length-1].length+1))])],[],!1);const s=i.maxComputationTimeMs===0?Gx.instance:new EIe(i.maxComputationTimeMs),o=!i.ignoreTrimWhitespace,r=new Map;function a(S){let x=r.get(S);return x===void 0&&(x=r.size,r.set(S,x)),x}const l=e.map(S=>a(S.trim())),c=t.map(S=>a(S.trim())),d=new GQ(l,e),u=new GQ(c,t),h=d.length+u.length<1700?this.dynamicProgrammingDiffing.compute(d,u,s,(S,x)=>e[S]===t[x]?t[x].length===0?.1:1+Math.log(1+t[x].length):.99):this.myersDiffingAlgorithm.compute(d,u,s);let f=h.diffs,g=h.hitTimeout;f=WB(d,u,f),f=zIe(d,u,f);const m=[],_=S=>{if(o)for(let x=0;x<S;x++){const k=b+x,D=v+x;if(e[k]!==t[D]){const N=this.refineDiff(e,t,new In(new st(k,k+1),new st(D,D+1)),s,o);for(const R of N.mappings)m.push(R);N.hitTimeout&&(g=!0)}}};let b=0,v=0;for(const S of f){hb(()=>S.seq1Range.start-b===S.seq2Range.start-v);const x=S.seq1Range.start-b;_(x),b=S.seq1Range.endExclusive,v=S.seq2Range.endExclusive;const k=this.refineDiff(e,t,S,s,o);k.hitTimeout&&(g=!0);for(const D of k.mappings)m.push(D)}_(e.length-b);const w=ZQ(m,e,t);let y=[];return i.computeMoves&&(y=this.computeMoves(w,e,t,l,c,s,o)),hb(()=>{function S(k,D){if(k.lineNumber<1||k.lineNumber>D.length)return!1;const N=D[k.lineNumber-1];return!(k.column<1||k.column>N.length+1)}function x(k,D){return!(k.startLineNumber<1||k.startLineNumber>D.length+1||k.endLineNumberExclusive<1||k.endLineNumberExclusive>D.length+1)}for(const k of w){if(!k.innerChanges)return!1;for(const D of k.innerChanges)if(!(S(D.modifiedRange.getStartPosition(),t)&&S(D.modifiedRange.getEndPosition(),t)&&S(D.originalRange.getStartPosition(),e)&&S(D.originalRange.getEndPosition(),e)))return!1;if(!x(k.modified,t)||!x(k.original,e))return!1}return!0}),new LN(w,y,g)}computeMoves(e,t,i,s,o,r,a){return MIe(e,t,i,s,o,r).map(d=>{const u=this.refineDiff(t,i,new In(d.original.toOffsetRange(),d.modified.toOffsetRange()),r,a),h=ZQ(u.mappings,t,i,!0);return new ude(d,h)})}refineDiff(e,t,i,s,o){const a=qIe(i).toRangeMapping2(e,t),l=new fT(e,a.originalRange,o),c=new fT(t,a.modifiedRange,o),d=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,s):this.myersDiffingAlgorithm.compute(l,c,s);let u=d.diffs;return u=WB(l,c,u),u=jIe(l,c,u),u=HIe(l,c,u),u=UIe(l,c,u),{mappings:u.map(f=>new qr(l.translateRange(f.seq1Range),c.translateRange(f.seq2Range))),hitTimeout:d.hitTimeout}}}function ZQ(n,e,t,i=!1){const s=[];for(const o of GV(n.map(r=>$Ie(r,e,t)),(r,a)=>r.original.overlapOrTouch(a.original)||r.modified.overlapOrTouch(a.modified))){const r=o[0],a=o[o.length-1];s.push(new la(r.original.join(a.original),r.modified.join(a.modified),o.map(l=>l.innerChanges[0])))}return hb(()=>!i&&s.length>0&&(s[0].modified.startLineNumber!==s[0].original.startLineNumber||t.length-s[s.length-1].modified.endLineNumberExclusive!==e.length-s[s.length-1].original.endLineNumberExclusive)?!1:kz(s,(o,r)=>r.original.startLineNumber-o.original.endLineNumberExclusive===r.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<r.original.startLineNumber&&o.modified.endLineNumberExclusive<r.modified.startLineNumber)),s}function $Ie(n,e,t){let i=0,s=0;n.modifiedRange.endColumn===1&&n.originalRange.endColumn===1&&n.originalRange.startLineNumber+i<=n.originalRange.endLineNumber&&n.modifiedRange.startLineNumber+i<=n.modifiedRange.endLineNumber&&(s=-1),n.modifiedRange.startColumn-1>=t[n.modifiedRange.startLineNumber-1].length&&n.originalRange.startColumn-1>=e[n.originalRange.startLineNumber-1].length&&n.originalRange.startLineNumber<=n.originalRange.endLineNumber+s&&n.modifiedRange.startLineNumber<=n.modifiedRange.endLineNumber+s&&(i=1);const o=new $e(n.originalRange.startLineNumber+i,n.originalRange.endLineNumber+1+s),r=new $e(n.modifiedRange.startLineNumber+i,n.modifiedRange.endLineNumber+1+s);return new la(o,r,[n])}function qIe(n){return new qs(new $e(n.seq1Range.start+1,n.seq1Range.endExclusive+1),new $e(n.seq2Range.start+1,n.seq2Range.endExclusive+1))}const QQ={getLegacy:()=>new xIe,getDefault:()=>new mde};function fg(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}class Ct{constructor(e,t,i,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,i))|0,this.a=fg(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class bl{constructor(e,t,i,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=fg(Math.max(Math.min(1,t),0),3),this.l=fg(Math.max(Math.min(1,i),0),3),this.a=fg(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,o=e.a,r=Math.max(t,i,s),a=Math.min(t,i,s);let l=0,c=0;const d=(a+r)/2,u=r-a;if(u>0){switch(c=Math.min(d<=.5?u/(2*d):u/(2-2*d),1),r){case t:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-t)/u+2;break;case s:l=(t-i)/u+4;break}l*=60,l=Math.round(l)}return new bl(l,c,d,o)}static _hue2rgb(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}static toRGBA(e){const t=e.h/360,{s:i,l:s,a:o}=e;let r,a,l;if(i===0)r=a=l=s;else{const c=s<.5?s*(1+i):s+i-s*i,d=2*s-c;r=bl._hue2rgb(d,c,t+1/3),a=bl._hue2rgb(d,c,t),l=bl._hue2rgb(d,c,t-1/3)}return new Ct(Math.round(r*255),Math.round(a*255),Math.round(l*255),o)}}class Wd{constructor(e,t,i,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=fg(Math.max(Math.min(1,t),0),3),this.v=fg(Math.max(Math.min(1,i),0),3),this.a=fg(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,i=e.g/255,s=e.b/255,o=Math.max(t,i,s),r=Math.min(t,i,s),a=o-r,l=o===0?0:a/o;let c;return a===0?c=0:o===t?c=((i-s)/a%6+6)%6:o===i?c=(s-t)/a+2:c=(t-i)/a+4,new Wd(Math.round(c*60),l,o,e.a)}static toRGBA(e){const{h:t,s:i,v:s,a:o}=e,r=s*i,a=r*(1-Math.abs(t/60%2-1)),l=s-r;let[c,d,u]=[0,0,0];return t<60?(c=r,d=a):t<120?(c=a,d=r):t<180?(d=r,u=a):t<240?(d=a,u=r):t<300?(c=a,u=r):t<=360&&(c=r,u=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),u=Math.round((u+l)*255),new Ct(c,d,u,o)}}const Yi=class Yi{static fromHex(e){return Yi.Format.CSS.parseHex(e)||Yi.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:bl.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Wd.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Ct)this.rgba=e;else if(e instanceof bl)this._hsla=e,this.rgba=bl.toRGBA(e);else if(e instanceof Wd)this._hsva=e,this.rgba=Wd.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Ct.equals(this.rgba,e.rgba)&&bl.equals(this.hsla,e.hsla)&&Wd.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Yi._relativeLuminanceForComponent(this.rgba.r),t=Yi._relativeLuminanceForComponent(this.rgba.g),i=Yi._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*i;return fg(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t>i}isDarkerThan(e){const t=this.getRelativeLuminance(),i=e.getRelativeLuminance();return t<i}lighten(e){return new Yi(new bl(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Yi(new bl(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:i,b:s,a:o}=this.rgba;return new Yi(new Ct(t,i,s,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Yi(new Ct(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:i,b:s,a:o}=this.rgba;return new Yi(new Ct(e.rgba.r-o*(e.rgba.r-t),e.rgba.g-o*(e.rgba.g-i),e.rgba.b-o*(e.rgba.b-s),1))}toString(){return this._toString||(this._toString=Yi.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,i){if(e.isLighterThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(o-s)/o,e.lighten(i)}static getDarkerColor(e,t,i){if(e.isDarkerThan(t))return e;i=i||.5;const s=e.getRelativeLuminance(),o=t.getRelativeLuminance();return i=i*(s-o)/s,e.darken(i)}};Yi.white=new Yi(new Ct(255,255,255,1)),Yi.black=new Yi(new Ct(0,0,0,1)),Yi.red=new Yi(new Ct(255,0,0,1)),Yi.blue=new Yi(new Ct(0,0,255,1)),Yi.green=new Yi(new Ct(0,255,0,1)),Yi.cyan=new Yi(new Ct(0,255,255,1)),Yi.lightgrey=new Yi(new Ct(211,211,211,1)),Yi.transparent=new Yi(new Ct(0,0,0,0));let te=Yi;(function(n){(function(e){(function(t){function i(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:n.Format.CSS.formatRGBA(f)}t.formatRGB=i;function s(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=s;function o(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:n.Format.CSS.formatHSLA(f)}t.formatHSL=o;function r(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=r;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?n.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function d(f){return f.isOpaque()?n.Format.CSS.formatHex(f):n.Format.CSS.formatRGBA(f)}t.format=d;function u(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const m=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),_=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6));return new n(new Ct(m,_,b,1))}if(g===9){const m=16*h(f.charCodeAt(1))+h(f.charCodeAt(2)),_=16*h(f.charCodeAt(3))+h(f.charCodeAt(4)),b=16*h(f.charCodeAt(5))+h(f.charCodeAt(6)),v=16*h(f.charCodeAt(7))+h(f.charCodeAt(8));return new n(new Ct(m,_,b,v/255))}if(g===4){const m=h(f.charCodeAt(1)),_=h(f.charCodeAt(2)),b=h(f.charCodeAt(3));return new n(new Ct(16*m+m,16*_+_,16*b+b))}if(g===5){const m=h(f.charCodeAt(1)),_=h(f.charCodeAt(2)),b=h(f.charCodeAt(3)),v=h(f.charCodeAt(4));return new n(new Ct(16*m+m,16*_+_,16*b+b,(16*v+v)/255))}return null}t.parseHex=u;function h(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(n.Format||(n.Format={}))})(te||(te={}));function pde(n){const e=[];for(const t of n){const i=Number(t);(i||i===0&&t.replace(/\s/g,"")!=="")&&e.push(i)}return e}function Rz(n,e,t,i){return{red:n/255,blue:t/255,green:e/255,alpha:i}}function K1(n,e){const t=e.index,i=e[0].length;if(!t)return;const s=n.positionAt(t);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+i}}function KIe(n,e){if(!n)return;const t=te.Format.CSS.parseHex(e);if(t)return{range:n,color:Rz(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function XQ(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),o=pde(s);return{range:n,color:Rz(o[0],o[1],o[2],t?o[3]:1)}}function JQ(n,e,t){if(!n||e.length!==1)return;const s=e[0].values(),o=pde(s),r=new te(new bl(o[0],o[1]/100,o[2]/100,t?o[3]:1));return{range:n,color:Rz(r.rgba.r,r.rgba.g,r.rgba.b,r.rgba.a)}}function G1(n,e){return typeof n=="string"?[...n.matchAll(e)]:n.findMatches(e)}function GIe(n){const e=[],i=G1(n,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(const s of i){const o=s.filter(c=>c!==void 0),r=o[1],a=o[2];if(!a)continue;let l;if(r==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=XQ(K1(n,s),G1(a,c),!1)}else if(r==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=XQ(K1(n,s),G1(a,c),!0)}else if(r==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=JQ(K1(n,s),G1(a,c),!1)}else if(r==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=JQ(K1(n,s),G1(a,c),!0)}else r==="#"&&(l=KIe(K1(n,s),r+a));l&&e.push(l)}return e}function YIe(n){return!n||typeof n.getValue!="function"||typeof n.positionAt!="function"?[]:GIe(n)}const eX=new RegExp("\\bMARK:\\s*(.*)$","d"),ZIe=/^-+|-+$/g;function QIe(n,e){var i;let t=[];if(e.findRegionSectionHeaders&&((i=e.foldingRules)!=null&&i.markers)){const s=XIe(n,e);t=t.concat(s)}if(e.findMarkSectionHeaders){const s=JIe(n);t=t.concat(s)}return t}function XIe(n,e){const t=[],i=n.getLineCount();for(let s=1;s<=i;s++){const o=n.getLineContent(s),r=o.match(e.foldingRules.markers.start);if(r){const a={startLineNumber:s,startColumn:r[0].length+1,endLineNumber:s,endColumn:o.length+1};if(a.endColumn>a.startColumn){const l={range:a,..._de(o.substring(r[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function JIe(n){const e=[],t=n.getLineCount();for(let i=1;i<=t;i++){const s=n.getLineContent(i);eTe(s,i,e)}return e}function eTe(n,e,t){eX.lastIndex=0;const i=eX.exec(n);if(i){const s=i.indices[1][0]+1,o=i.indices[1][1]+1,r={startLineNumber:e,startColumn:s,endLineNumber:e,endColumn:o};if(r.endColumn>r.startColumn){const a={range:r,..._de(i[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function _de(n){n=n.trim();const e=n.startsWith("-");return n=n.replace(ZIe,""),{text:n,hasSeparatorLine:e}}class tTe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=fv(e);const i=this.values,s=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(i.length+o),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=fv(e),t=fv(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=fv(e),t=fv(t);const i=this.values,s=this.prefixSum;if(e>=i.length)return!1;const o=i.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=fv(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,s=0,o=0,r=0;for(;t<=i;)if(s=t+(i-t)/2|0,o=this.prefixSum[s],r=o-this.values[s],e<r)i=s-1;else if(e>=o)t=s+1;else break;return new bde(s,e-r)}}class iTe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],i=t>0?this._prefixSum[t-1]:0;return new bde(t,e-i)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=QR(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const i=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+i;for(let o=0;o<i;o++)this._indexBySum[s+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class bde{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class nTe{constructor(e,t,i,s){this._uri=e,this._lines=t,this._eol=i,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new H(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let s=0;s<t;s++)i[s]=this._lines[s].length+e;this._lineStarts=new tTe(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=ru(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const s=new Uint32Array(i.length-1);for(let o=1;o<i.length;o++)this._lines.splice(e.lineNumber+o-1,0,i[o]),s[o-1]=i[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}const tX=60*1e3;class sTe extends U{constructor(e,t,i=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!i){const s=new _z;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(tX/2)),this._register(s)}}dispose(){for(const e in this._syncedModels)Qt(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const i of e){const s=i.toString();this._syncedModels[s]||this._beginModelSync(i,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const i in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[i]>tX&&t.push(i);for(const i of t)this._stopModelSync(i)}_beginModelSync(e,t){const i=this._modelService.getModel(e);if(!i||!t&&i.isTooLargeForSyncing())return;const s=e.toString();this._proxy.$acceptNewModel({url:i.uri.toString(),lines:i.getLinesContent(),EOL:i.getEOL(),versionId:i.getVersionId()});const o=new Q;o.add(i.onDidChangeContent(r=>{this._proxy.$acceptModelChanged(s.toString(),r)})),o.add(i.onWillDispose(()=>{this._stopModelSync(s)})),o.add(xe(()=>{this._proxy.$acceptRemovedModel(s)})),this._syncedModels[s]=o}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Qt(t)}}class oTe{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new rTe(Le.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class rTe extends nTe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let i=0;i<this._lines.length;i++){const s=this._lines[i],o=this.offsetAt(new H(i+1,1)),r=s.matchAll(e);for(const a of r)(a.index||a.index===0)&&(a.index=a.index+o),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const i=Mx(e.column,tz(t),this._lines[e.lineNumber-1],0);return i?new E(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn):null}words(e){const t=this._lines,i=this._wordenize.bind(this);let s=0,o="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=o.substring(a[r].start,a[r].end);r+=1,yield l}else if(s<t.length)o=t[s],a=i(o,e),r=0,s+=1;else break}}}getLineWords(e,t){const i=this._lines[e-1],s=this._wordenize(i,t),o=[];for(const r of s)o.push({word:i.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return o}_wordenize(e,t){const i=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)i.push({start:s.index,end:s.index+s[0].length});return i}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,i=e.startLineNumber-1,s=e.endLineNumber-1,o=[];o.push(this._lines[i].substring(e.startColumn-1));for(let r=i+1;r<s;r++)o.push(this._lines[r]);return o.push(this._lines[s].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,i)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),i=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||i.lineNumber!==e.endLineNumber||i.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:i.lineNumber,endColumn:i.column}:e}_validatePosition(e){if(!H.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:i}=e,s=!1;if(t<1)t=1,i=1,s=!0;else if(t>this._lines.length)t=this._lines.length,i=this._lines[t-1].length+1,s=!0;else{const o=this._lines[t-1].length+1;i<1?(i=1,s=!0):i>o&&(i=o,s=!0)}return s?{lineNumber:t,column:i}:e}}const ZM=class ZM{constructor(){this._workerTextModelSyncServer=new oTe}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,i){const s=this._getModel(e);return s?Iz.computeUnicodeHighlights(s,t,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const i=this._getModel(e);return i?QIe(i,t):[]}async $computeDiff(e,t,i,s){const o=this._getModel(e),r=this._getModel(t);return!o||!r?null:DN.computeDiff(o,r,i,s)}static computeDiff(e,t,i,s){const o=s==="advanced"?QQ.getDefault():QQ.getLegacy(),r=e.getLinesContent(),a=t.getLinesContent(),l=o.computeDiff(r,a,i),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function d(u){return u.map(h=>{var f;return[h.original.startLineNumber,h.original.endLineNumberExclusive,h.modified.startLineNumber,h.modified.endLineNumberExclusive,(f=h.innerChanges)==null?void 0:f.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:d(l.changes),moves:l.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,d(u.changes)])}}static _modelsAreIdentical(e,t){const i=e.getLineCount(),s=t.getLineCount();if(i!==s)return!1;for(let o=1;o<=i;o++){const r=e.getLineContent(o),a=t.getLineContent(o);if(r!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,i){const s=this._getModel(e);if(!s)return t;const o=[];let r;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return E.compareRangesUsingStarts(l.range,c.range);const d=l.range?0:1,u=c.range?0:1;return d-u});let a=0;for(let l=1;l<t.length;l++)E.getEndPosition(t[a].range).equals(E.getStartPosition(t[l].range))?(t[a].range=E.fromPositions(E.getStartPosition(t[a].range),E.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:d}of t){if(typeof d=="number"&&(r=d),E.isEmpty(l)&&!c)continue;const u=s.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,s.eol),u===c)continue;if(Math.max(c.length,u.length)>DN._diffLimit){o.push({range:l,text:c});continue}const h=YNe(u,c,i),f=s.offsetAt(E.lift(l).getStartPosition());for(const g of h){const m=s.positionAt(f+g.originalStart),_=s.positionAt(f+g.originalStart+g.originalLength),b={text:c.substr(g.modifiedStart,g.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:_.lineNumber,endColumn:_.column}};s.getValueInRange(b.range)!==b.text&&o.push(b)}}return typeof r=="number"&&o.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),o}async $computeLinks(e){const t=this._getModel(e);return t?eIe(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?YIe(t):null}async $textualSuggest(e,t,i,s){const o=new Qn,r=new RegExp(i,s),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(r))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>DN._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}}async $computeWordRanges(e,t,i,s){const o=this._getModel(e);if(!o)return Object.create(null);const r=new RegExp(i,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=o.getLineWords(l,r);for(const d of c){if(!isNaN(Number(d.word)))continue;let u=a[d.word];u||(u=[],a[d.word]=u),u.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a}async $navigateValueSet(e,t,i,s,o){const r=this._getModel(e);if(!r)return null;const a=new RegExp(s,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),c=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=r.getValueInRange(c);return MB.INSTANCE.navigateValueSet(t,l,c,d,i)}};ZM._diffLimit=1e5,ZM._suggestionsLimit=1e4;let BB=ZM;class DN extends BB{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,i){const r={host:Vxe(i,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(sW(this._foreignModule))):new Promise((a,l)=>{const c=d=>{this._foreignModule=d.create(r,t),a(sW(this._foreignModule))};{const d=nA.asBrowserUri(`${e}.js`).toString(!0);De(()=>import(`${d}`),[]).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(i){return Promise.reject(i)}}}typeof importScripts=="function"&&(globalThis.monaco=sce());const yA=dt("textResourceConfigurationService"),vde=dt("textResourcePropertiesService"),ve=dt("ILanguageFeaturesService");var Az=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ip=function(n,e){return function(t,i){e(t,i,n)}};const iX=5*60*1e3;function np(n,e){const t=n.getModel(e);return!(!t||t.isTooLargeForSyncing())}let HB=class extends U{constructor(e,t,i,s,o,r){super(),this._languageConfigurationService=o,this._modelService=t,this._workerManager=this._register(new jB(e,this._modelService)),this._logService=s,this._register(r.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!np(this._modelService,a.uri))return Promise.resolve({links:[]});const d=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return d&&{links:d}}})),this._register(r.completionProvider.register("*",new aTe(this._workerManager,i,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return np(this._modelService,e)}async computedUnicodeHighlights(e,t,i){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,i)}async computeDiff(e,t,i,s){const r=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),i,s);if(!r)return null;return{identical:r.identical,quitEarly:r.quitEarly,changes:l(r.changes),moves:r.moves.map(c=>new ude(new qs(new $e(c[0],c[1]),new $e(c[2],c[3])),l(c[4])))};function l(c){return c.map(d=>{var u;return new la(new $e(d[0],d[1]),new $e(d[2],d[3]),(u=d[4])==null?void 0:u.map(h=>new qr(new E(h[0],h[1],h[2],h[3]),new E(h[4],h[5],h[6],h[7]))))})}}async computeMoreMinimalEdits(e,t,i=!1){if(Ys(t)){if(!np(this._modelService,e))return Promise.resolve(t);const s=Qn.create(),o=this._workerWithResources([e]).then(r=>r.$computeMoreMinimalEdits(e.toString(),t,i));return o.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),s.elapsed())),Promise.race([o,Ih(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return np(this._modelService,e)}async navigateValueSet(e,t,i){const s=this._modelService.getModel(e);if(!s)return null;const o=this._languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),r=o.source,a=o.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,i,r,a)}canComputeWordRanges(e){return np(this._modelService,e)}async computeWordRanges(e,t){const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const s=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),o=s.source,r=s.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,o,r)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};HB=Az([ip(1,gi),ip(2,yA),ip(3,ws),ip(4,Ri),ip(5,ve)],HB);class aTe{constructor(e,t,i,s){this.languageConfigurationService=s,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=i}async provideCompletionItems(e,t){const i=this._configurationService.getValue(e.uri,t,"editor");if(i.wordBasedSuggestions==="off")return;const s=[];if(i.wordBasedSuggestions==="currentDocument")np(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())np(this._modelService,u.uri)&&(u===e?s.unshift(u.uri):(i.wordBasedSuggestions==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const o=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new E(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):E.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=await(await this._workerManager.withWorker()).textualSuggest(s,r==null?void 0:r.word,o);if(d)return{duration:d.duration,suggestions:d.words.map(u=>({kind:18,label:u,insertText:u,range:{insert:l,replace:a}}))}}}let jB=class extends U{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new vz).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(iX/2),Gt),this._register(this._modelService.onModelRemoved(s=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>iX&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new gT(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};jB=Az([ip(1,gi)],jB);class lTe{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let gT=class extends U{constructor(e,t,i){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=i,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(hNe(this._workerDescriptor)),RB.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){DB(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return DB(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new lTe(new DN(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new sTe(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(Yke());const i=await this._getProxy();return this._getOrCreateModelManager(i).ensureSyncedResources(e,t),i}async textualSuggest(e,t,i){const s=await this.workerWithSyncedResources(e),o=i.source,r=i.flags;return s.$textualSuggest(e.map(a=>a.toString()),t,o,r)}dispose(){super.dispose(),this._disposed=!0}};gT=Az([ip(2,gi)],gT);var Fa;(function(n){n.DARK="dark",n.LIGHT="light",n.HIGH_CONTRAST_DARK="hcDark",n.HIGH_CONTRAST_LIGHT="hcLight"})(Fa||(Fa={}));function Ec(n){return n===Fa.HIGH_CONTRAST_DARK||n===Fa.HIGH_CONTRAST_LIGHT}function cy(n){return n===Fa.DARK||n===Fa.HIGH_CONTRAST_DARK}const kn=dt("themeService");function ji(n){return{id:n}}function VB(n){switch(n){case Fa.DARK:return"vs-dark";case Fa.HIGH_CONTRAST_DARK:return"hc-black";case Fa.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const wde={ThemingContribution:"base.contributions.theming"};class cTe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new j}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),xe(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const Cde=new cTe;Mi.add(wde.ThemingContribution,Cde);function tl(n){return Cde.onColorThemeChange(n)}class dTe extends U{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var uTe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},hTe=function(n,e){return function(t,i){e(t,i,n)}};let zB=class extends U{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new j),this._onCodeEditorAdd=this._register(new j),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new j),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new j),this._onDiffEditorAdd=this._register(new j),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new j),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new co,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const i of t){if(i.hasTextFocus())return i;i.hasWidgetFocus()&&(e=i)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(i=>i.removeDecorationsByType(e))))}setModelProperty(e,t,i){const s=e.toString();let o;this._modelProperties.has(s)?o=this._modelProperties.get(s):(o=new Map,this._modelProperties.set(s,o)),o.set(t,i)}getModelProperty(e,t){const i=e.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(t)}async openCodeEditor(e,t,i){for(const s of this._codeEditorOpenHandlers){const o=await s(e,t,i);if(o!==null)return o}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return xe(t)}};zB=uTe([hTe(0,kn)],zB);var fTe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nX=function(n,e){return function(t,i){e(t,i,n)}};let mT=class extends zB{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(i,s,o)=>s?this.doOpenEditor(s,i):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===je.http||o===je.https)return Bce(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const o={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){const i=e.getModel();return i&&i.uri.toString()!==t.toString()?null:i}};mT=fTe([nX(0,Ae),nX(1,kn)],mT);mt(kt,mT,0);const gm=dt("layoutService");var yde=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Sde=function(n,e){return function(t,i){e(t,i,n)}};let pT=class{get mainContainer(){var e;return((e=YV(this._codeEditorService.listCodeEditors()))==null?void 0:e.getContainerDomNode())??Gt.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return(e==null?void 0:e.getContainerDomNode())??this.mainContainer}get mainContainerDimension(){return Gg(this.mainContainer)}get activeContainerDimension(){return Gg(this.activeContainer)}get containers(){return Tl(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())==null||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=ue.None,this.onDidLayoutActiveContainer=ue.None,this.onDidLayoutContainer=ue.None,this.onDidChangeActiveContainer=ue.None,this.onDidAddContainer=ue.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};pT=yde([Sde(0,kt)],pT);let UB=class extends pT{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};UB=yde([Sde(1,kt)],UB);mt(gm,pT,1);var Yx;(function(n){n[n.Ignore=0]="Ignore",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error"})(Yx||(Yx={}));(function(n){const e="error",t="warning",i="warn",s="info",o="ignore";function r(l){return l?ew(e,l)?n.Error:ew(t,l)||ew(i,l)?n.Warning:ew(s,l)?n.Info:n.Ignore:n.Ignore}n.fromValue=r;function a(l){switch(l){case n.Error:return e;case n.Warning:return t;case n.Info:return s;default:return o}}n.toString=a})(Yx||(Yx={}));const on=Yx,OL=dt("dialogService");var SA=on;const rn=dt("notificationService");class gTe{}const Oz=dt("undoRedoService");class xde{constructor(e,t){this.resource=e,this.elements=t}}const Ew=class Ew{constructor(){this.id=Ew._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Ew._ID=0,Ew.None=new Ew;let $B=Ew;const Nw=class Nw{constructor(){this.id=Nw._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Nw._ID=0,Nw.None=new Nw;let sp=Nw;var mTe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},sX=function(n,e){return function(t,i){e(t,i,n)}};function ZD(n){return n.scheme===je.file?n.fsPath:n.path}let kde=0;class QD{constructor(e,t,i,s,o,r,a){this.id=++kde,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class oX{constructor(e,t){this.resourceLabel=e,this.reason=t}}class rX{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);const i=[];return e.length>0&&i.push(p({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&i.push(p({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),i.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class pTe{constructor(e,t,i,s,o,r,a){this.id=++kde,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=i,this.groupId=s,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,i){this.removedResources||(this.removedResources=new rX),this.removedResources.has(t)||this.removedResources.set(t,new oX(e,i))}setValid(e,t,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new rX),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new oX(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Lde{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const i of this._past)t(i.actual)&&this._setElementValidFlag(i,e);for(const i of this._future)t(i.actual)&&this._setElementValidFlag(i,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let i=0,s=this._past.length;i<s;i++)t.push(this._past[i].id);for(let i=this._future.length-1;i>=0;i--)t.push(this._future[i].id);return new xde(e,t)}restoreSnapshot(e){const t=e.elements.length;let i=!0,s=0,o=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];i&&(s>=t||c.id!==e.elements[s])&&(i=!1,o=0),!i&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];i&&(s>=t||l.id!==e.elements[s])&&(i=!1,r=a),!i&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const i of this._past)e.push(i.actual);for(const i of this._future)t.push(i.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let i=this._past.length-1;i>=0;i--)if(this._past[i]===e){t.has(this.strResource)?this._past[i]=t.get(this.strResource):this._past.splice(i,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let i=this._future.length-1;i>=0;i--)if(this._future[i]===e){t.has(this.strResource)?this._future[i]=t.get(this.strResource):this._future.splice(i,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class n4{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,i=this.editStacks.length;t<i;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const Dde=new Lde("","");Dde.locked=!0;let qB=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const i of this._editStacks)t.push(i[1].toString());console.log(t.join(`
`))}pushElement(e,t=$B.None,i=sp.None){if(e.type===0){const s=ZD(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new QD(e,s,o,t.id,t.nextOrder(),i.id,i.nextOrder()))}else{const s=new Set,o=[],r=[];for(const a of e.resources){const l=ZD(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),o.push(l),r.push(c))}o.length===1?this._pushElement(new QD(e,o[0],r[0],t.id,t.nextOrder(),i.id,i.nextOrder())):this._pushElement(new pTe(e,o,r,t.id,t.nextOrder(),i.id,i.nextOrder()))}}_pushElement(e){for(let t=0,i=e.strResources.length;t<i;t++){const s=e.resourceLabels[t],o=e.strResources[t];let r;this._editStacks.has(o)?r=this._editStacks.get(o):(r=new Lde(s,o),this._editStacks.set(o,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const i=this._editStacks.get(t);if(i.hasFutureElements())return null;const s=i.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const o of i){const r=ZD(o.resource),a=this.getUriComparisonKey(o.resource),l=new QD(o,r,a,0,0,0,0);s.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const i=e.actual.split(),s=new Map;for(const o of i){const r=ZD(o.resource),a=this.getUriComparisonKey(o.resource),l=new QD(o,r,a,0,0,0,0);s.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,i){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,i)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new xde(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const i=this._editStacks.get(t);i.restoreSnapshot(e),!i.hasPastElements()&&!i.hasFutureElements()&&(i.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,i=s)}return[t,i]}canUndo(e){if(e instanceof sp){const[,i]=this._findClosestUndoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){He(e);for(const i of t.strResources)this.removeElements(i);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,i,s,o){const r=this._acquireLocks(i);let a;try{a=t()}catch(l){return r(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),s.dispose(),o()),l=>(r(),s.dispose(),this._onError(l,e))):(r(),s.dispose(),o())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return U.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?U.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(U.None);const i=e.actual.prepareUndoRedo();return i?eA(i)?t(i):i.then(s=>t(s)):t(U.None)}_getAffectedEditStacks(e){const t=[];for(const i of e.strResources)t.push(this._editStacks.get(i)||Dde);return new n4(t)}_tryToSplitAndUndo(e,t,i,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,i),this._notificationService.warn(s),new XD(this._undo(e,0,!0));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(s),new XD}_checkWorkspaceUndo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of i.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(e,t,null,p({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,i){const s=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,s,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,i)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const i=t.getClosestPastElement();if(i){if(i===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(i.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,i,s){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(d){d[d.All=0]="All",d[d.This=1]="This",d[d.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:on.Info,message:p("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:p({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",i.editStacks.length),run:()=>a.All},{label:p({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,i,!1);if(c)return c.returnValue;s=!0}let o;try{o=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,i,!0);if(r)return o.dispose(),r.returnValue;for(const a of i.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),i,o,()=>this._continueUndoInGroup(t.groupId,s))}_resourceUndo(e,t,i){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=p({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new n4([e]),s,()=>this._continueUndoInGroup(t.groupId,i))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,i=s)}return[t,i]}_continueUndoInGroup(e,t){if(!e)return;const[,i]=this._findClosestUndoElementInGroup(e);if(i)return this._undo(i,0,t)}undo(e){if(e instanceof sp){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,i){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),o=s.getClosestPastElement();if(!o)return;if(o.groupId){const[a,l]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&l)return this._undo(l,t,i)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,i):this._resourceUndo(s,o,i)}finally{}}async _confirmAndContinueUndo(e,t,i){if((await this._dialogService.confirm({message:p("confirmDifferentSource","Would you like to undo '{0}'?",i.label),primaryButton:p({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:p("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,i=s)}return[t,i]}canRedo(e){if(e instanceof sp){const[,i]=this._findClosestRedoElementWithSource(e.id);return!!i}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,i,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,i),this._notificationService.warn(s),new XD(this._redo(e));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(s),new XD}_checkWorkspaceRedo(e,t,i,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,p({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of i.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of i.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(e,t,null,p({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,i,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,i)}async _executeWorkspaceRedo(e,t,i){let s;try{s=await this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const o=this._checkWorkspaceRedo(e,t,i,!0);if(o)return s.dispose(),o.returnValue;for(const r of i.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),i,s,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=p({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new n4([e]),i,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,i=null;for(const[s,o]of this._editStacks){const r=o.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,i=s)}return[t,i]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof sp){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),i=t.getClosestFutureElement();if(i){if(i.groupId){const[s,o]=this._findClosestRedoElementInGroup(i.groupId);if(i!==s&&o)return this._redo(o)}try{return i.type===1?this._workspaceRedo(e,i):this._resourceRedo(t,i)}finally{}}}};qB=mTe([sX(0,OL),sX(1,rn)],qB);class XD{constructor(e){this.returnValue=e}}mt(Oz,qB,1);function so(n,e,t){return Math.min(Math.max(n,e),t)}class Ede{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class _Te{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const Fz=dt("environmentService");var bTe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},aX=function(n,e){return function(t,i){e(t,i,n)}};const _a=dt("ILanguageFeatureDebounceService");var _T;(function(n){const e=new WeakMap;let t=0;function i(s){let o=e.get(s);return o===void 0&&(o=++t,e.set(s,o)),o}n.of=i})(_T||(_T={}));class vTe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class wTe{constructor(e,t,i,s,o,r){this._logService=e,this._name=t,this._registry=i,this._default=s,this._min=o,this._max=r,this._cache=new lu(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,i)=>oA(_T.of(i),t),0)}get(e){const t=this._key(e),i=this._cache.get(t);return i?so(i.value,this._min,this._max):this.default()}update(e,t){const i=this._key(e);let s=this._cache.get(i);s||(s=new _Te(6),this._cache.set(i,s));const o=so(s.update(t),this._min,this._max);return iA(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${o}ms`),o}_overall(){const e=new Ede;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return so(e,this._min,this._max)}}let KB=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,i){const s=(i==null?void 0:i.min)??50,o=(i==null?void 0:i.max)??s**2,r=(i==null?void 0:i.key)??void 0,a=`${_T.of(e)},${s}${r?","+r:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new vTe(s*1.5)):l=new wTe(this._logService,t,e,this._overallAverage()|0||s*1.5,s,o),this._data.set(a,l)),l}_overallAverage(){const e=new Ede;for(const t of this._data.values())e.update(t.default());return e.value}};KB=bTe([aX(0,ws),aX(1,Fz)],KB);mt(_a,KB,1);class Bo{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let i="mtk"+this.getForeground(e);const s=this.getFontStyle(e);return s&1&&(i+=" mtki"),s&2&&(i+=" mtkb"),s&4&&(i+=" mtku"),s&8&&(i+=" mtks"),i}static getInlineStyleFromMetadata(e,t){const i=this.getForeground(e),s=this.getFontStyle(e);let o=`color: ${t[i]};`;s&1&&(o+="font-style: italic;"),s&2&&(o+="font-weight: bold;");let r="";return s&4&&(r+=" underline"),s&8&&(r+=" line-through"),r&&(o+=`text-decoration:${r};`),o}static getPresentationFromMetadata(e){const t=this.getForeground(e),i=this.getFontStyle(e);return{foreground:t,italic:!!(i&1),bold:!!(i&2),underline:!!(i&4),strikethrough:!!(i&8)}}}function Zg(n){let e=0,t=0,i=0,s=0;for(let o=0,r=n.length;o<r;o++){const a=n.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<r&&n.charCodeAt(o+1)===10?(s|=2,o++):s|=3,i=o+1):a===10&&(s|=1,e===0&&(t=o),e++,i=o+1)}return e===0&&(t=n.length),[e,t,n.length-i,s]}class aS{static create(e,t){return new aS(e,new bT(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new E(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,i,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber,[s,o,r]=this._tokens.split(t,e.startColumn-1,i,e.endColumn-1);return[new aS(this._startLineNumber,s),new aS(this._startLineNumber+r,o)]}applyEdit(e,t){const[i,s,o]=Zg(t);this.acceptEdit(e,i,s,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,i,s,o){this._acceptDeleteRange(e),this._acceptInsertText(new H(e.startLineNumber,e.startColumn),t,i,s,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,i=e.endLineNumber-this._startLineNumber;if(i<0){const o=i-t;this._startLineNumber-=o;return}const s=this._tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&i>=s+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const o=-t;this._startLineNumber-=o,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,i,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,i,e.endColumn-1)}}_acceptInsertText(e,t,i,s,o){if(t===0&&i===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,i,s,o)}}class bT{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let i=0;i<this._tokenCount;i++)t.push(`(${this._getDeltaLine(i)+e},${this._getStartCharacter(i)}-${this._getEndCharacter(i)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),i=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new E(0,t+1,i,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,i=this._getTokenCount()-1;for(;t<i;){const s=t+Math.floor((i-t)/2),o=this._getDeltaLine(s);if(o<e)t=s+1;else if(o>e)i=s-1;else{let r=s;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=s;for(;a<i&&this._getDeltaLine(a+1)===e;)a++;return new lX(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new lX(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,i,s){const o=this._tokens,r=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<r;d++){const u=4*d,h=o[u],f=o[u+1],g=o[u+2],m=o[u+3];if((h>e||h===e&&g>=t)&&(h<i||h===i&&f<=s))l=!0;else{if(a===0&&(c=h),l){const _=4*a;o[_]=h-c,o[_+1]=f,o[_+2]=g,o[_+3]=m}a++}}return this._tokenCount=a,c}split(e,t,i,s){const o=this._tokens,r=this._tokenCount,a=[],l=[];let c=a,d=0,u=0;for(let h=0;h<r;h++){const f=4*h,g=o[f],m=o[f+1],_=o[f+2],b=o[f+3];if(g>e||g===e&&_>=t){if(g<i||g===i&&m<=s)continue;c!==l&&(c=l,d=0,u=g)}c[d++]=g-u,c[d++]=m,c[d++]=_,c[d++]=b}return[new bT(new Uint32Array(a)),new bT(new Uint32Array(l)),u]}acceptDeleteRange(e,t,i,s,o){const r=this._tokens,a=this._tokenCount,l=s-t;let c=0,d=!1;for(let u=0;u<a;u++){const h=4*u;let f=r[h],g=r[h+1],m=r[h+2];const _=r[h+3];if(f<t||f===t&&m<=i){c++;continue}else if(f===t&&g<i)f===s&&m>o?m-=o-i:m=i;else if(f===t&&g===i)if(f===s&&m>o)m-=o-i;else{d=!0;continue}else if(f<s||f===s&&g<o)if(f===s&&m>o)f=t,g=i,m=g+(m-o);else{d=!0;continue}else if(f>s){if(l===0&&!d){c=a;break}f-=l}else if(f===s&&g>=o)e&&f===0&&(g+=e,m+=e),f-=l,g-=o-i,m-=o-i;else throw new Error("Not possible!");const b=4*c;r[b]=f,r[b+1]=g,r[b+2]=m,r[b+3]=_,c++}this._tokenCount=c}acceptInsertText(e,t,i,s,o,r){const a=i===0&&s===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const u=4*d;let h=l[u],f=l[u+1],g=l[u+2];if(!(h<e||h===e&&g<t)){if(h===e&&g===t)if(a)g+=1;else continue;else if(h===e&&f<t&&t<g)i===0?g+=s:g=t;else{if(h===e&&f===t&&a)continue;if(h===e)if(h+=i,i===0)f+=s,g+=s;else{const m=g-f;f=o+(f-t),g=f+m}else h+=i}l[u]=h,l[u+1]=f,l[u+2]=g}}}}class lX{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var CTe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},s4=function(n,e){return function(t,i){e(t,i,n)}};let GB=class{constructor(e,t,i,s){this._legend=e,this._themeService=t,this._languageService=i,this._logService=s,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new YB}getMetadata(e,t,i){const s=this._languageService.languageIdCodec.encodeLanguageId(i),o=this._hashTable.get(e,t,s);let r;if(o)r=o.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,i);if(typeof d>"u")r=2147483647;else{if(r=0,typeof d.italic<"u"){const u=(d.italic?1:0)<<11;r|=u|1}if(typeof d.bold<"u"){const u=(d.bold?2:0)<<11;r|=u|2}if(typeof d.underline<"u"){const u=(d.underline?4:0)<<11;r|=u|4}if(typeof d.strikethrough<"u"){const u=(d.strikethrough?8:0)<<11;r|=u|8}if(d.foreground){const u=d.foreground<<15;r|=u|16}r===0&&(r=2147483647)}}else r=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,r)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,i,s,o){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${i}: The provided start offset ${s} is outside the previous data (length ${o}).`))}};GB=CTe([s4(1,kn),s4(2,Di),s4(3,ws)],GB);function Nde(n,e,t){const i=n.data,s=n.data.length/5|0,o=Math.max(Math.ceil(s/1024),400),r=[];let a=0,l=1,c=0;for(;a<s;){const d=a;let u=Math.min(d+o,s);if(u<s){let v=u;for(;v-1>d&&i[5*v]===0;)v--;if(v-1===d){let w=u;for(;w+1<s&&i[5*w]===0;)w++;u=w}else u=v}let h=new Uint32Array((u-d)*4),f=0,g=0,m=0,_=0;for(;a<u;){const v=5*a,w=i[v],y=i[v+1],S=l+w|0,x=w===0?c+y|0:y,k=i[v+2],D=x+k|0,N=i[v+3],R=i[v+4];if(D<=x)e.warnInvalidLengthSemanticTokens(S,x+1);else if(m===S&&_>x)e.warnOverlappingSemanticTokens(S,x+1);else{const O=e.getMetadata(N,R,t);O!==2147483647&&(g===0&&(g=S),h[f]=S-g,h[f+1]=x,h[f+2]=D,h[f+3]=O,f+=4,m=S,_=D)}l=S,c=x,a++}f!==h.length&&(h=h.subarray(0,f));const b=aS.create(g,h);r.push(b)}return r}class yTe{constructor(e,t,i,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=i,this.metadata=s,this.next=null}}const Au=class Au{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Au._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Au._SIZES.length?2/3*this._currentLength:0),this._elements=[],Au._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let i=0;i<t;i++)e[i]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,i){return this._hash2(this._hash2(e,t),i)%this._currentLength}get(e,t,i){const s=this._hashFunc(e,t,i);let o=this._elements[s];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===i)return o;o=o.next}return null}add(e,t,i,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const o=this._elements;this._currentLengthIndex++,this._currentLength=Au._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Au._SIZES.length?2/3*this._currentLength:0),this._elements=[],Au._nullOutEntries(this._elements,this._currentLength);for(const r of o){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new yTe(e,t,i,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Au._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let YB=Au;const xA=dt("semanticTokensStylingService");var STe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},o4=function(n,e){return function(t,i){e(t,i,n)}};let ZB=class extends U{constructor(e,t,i){super(),this._themeService=e,this._logService=t,this._languageService=i,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new GB(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};ZB=STe([o4(0,kn),o4(1,ws),o4(2,Di)],ZB);mt(xA,ZB,1);function nf(n){return n===47||n===92}function Ide(n){return n.replace(/[\\/]/g,dn.sep)}function xTe(n){return n.indexOf("/")===-1&&(n=Ide(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}function cX(n,e=dn.sep){if(!n)return"";const t=n.length,i=n.charCodeAt(0);if(nf(i)){if(nf(n.charCodeAt(1))&&!nf(n.charCodeAt(2))){let o=3;const r=o;for(;o<t&&!nf(n.charCodeAt(o));o++);if(r!==o&&!nf(n.charCodeAt(o+1))){for(o+=1;o<t;o++)if(nf(n.charCodeAt(o)))return n.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(Tde(i)&&n.charCodeAt(1)===58)return nf(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let s=n.indexOf("://");if(s!==-1){for(s+=3;s<t;s++)if(nf(n.charCodeAt(s)))return n.slice(0,s+1)}return""}function QB(n,e,t,i=kc){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(t){if(!cz(n,e))return!1;if(e.length===n.length)return!0;let o=e.length;return e.charAt(e.length-1)===i&&o--,n.charAt(o)===i}return e.charAt(e.length-1)!==i&&(e+=i),n.indexOf(e)===0}function Tde(n){return n>=65&&n<=90||n>=97&&n<=122}function kTe(n,e=vs){return e?Tde(n.charCodeAt(0))&&n.charCodeAt(1)===58:!1}const JD="**",dX="/",EN="[/\\\\]",NN="[^/\\\\]",LTe=/\//g;function uX(n,e){switch(n){case 0:return"";case 1:return`${NN}*?`;default:return`(?:${EN}|${NN}+${EN}${e?`|${EN}${NN}+`:""})*?`}}function hX(n,e){if(!n)return[];const t=[];let i=!1,s=!1,o="";for(const r of n){switch(r){case e:if(!i&&!s){t.push(o),o="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1;break}o+=r}return o&&t.push(o),t}function Pde(n){if(!n)return"";let e="";const t=hX(n,dX);if(t.every(i=>i===JD))e=".*";else{let i=!1;t.forEach((s,o)=>{if(s===JD){if(i)return;e+=uX(2,o===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const d of s){if(d!=="}"&&r){a+=d;continue}if(l&&(d!=="]"||!c)){let u;d==="-"?u=d:(d==="^"||d==="!")&&!c?u="^":d===dX?u="":u=ua(d),c+=u;continue}switch(d){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const h=`(?:${hX(a,",").map(f=>Pde(f)).join("|")})`;e+=h,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=NN;continue;case"*":e+=uX(1);continue;default:e+=ua(d)}}o<t.length-1&&(t[o+1]!==JD||o+2<t.length)&&(e+=EN)}i=s===JD})}return e}const DTe=/^\*\*\/\*\.[\w\.-]+$/,ETe=/^\*\*\/([\w\.-]+)\/?$/,NTe=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,ITe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,TTe=/^\*\*((\/[\w\.-]+)+)\/?$/,PTe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,fX=new lu(1e4),gX=function(){return!1},$d=function(){return null};function Wz(n,e){if(!n)return $d;let t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let s=fX.get(i);if(s)return mX(s,n);let o;return DTe.test(t)?s=MTe(t.substr(4),t):(o=ETe.exec(r4(t,e)))?s=RTe(o[1],t):(e.trimForExclusions?ITe:NTe).test(t)?s=ATe(t,e):(o=TTe.exec(r4(t,e)))?s=pX(o[1].substr(1),t,!0):(o=PTe.exec(r4(t,e)))?s=pX(o[1],t,!1):s=OTe(t),fX.set(i,s),mX(s,n)}function mX(n,e){if(typeof e=="string")return n;const t=function(i,s){return QB(i,e.base,!vo)?n(NL(i.substr(e.base.length),kc),s):null};return t.allBasenames=n.allBasenames,t.allPaths=n.allPaths,t.basenames=n.basenames,t.patterns=n.patterns,t}function r4(n,e){return e.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function MTe(n,e){return function(t,i){return typeof t=="string"&&t.endsWith(n)?e:null}}function RTe(n,e){const t=`/${n}`,i=`\\${n}`,s=function(r,a){return typeof r!="string"?null:a?a===n?e:null:r===n||r.endsWith(t)||r.endsWith(i)?e:null},o=[n];return s.basenames=o,s.patterns=[e],s.allBasenames=o,s}function ATe(n,e){const t=Rde(n.slice(1,-1).split(",").map(a=>Wz(a,e)).filter(a=>a!==$d),n),i=t.length;if(!i)return $d;if(i===1)return t[0];const s=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return n;return null},o=t.find(a=>!!a.allBasenames);o&&(s.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(s.allPaths=r),s}function pX(n,e,t){const i=kc===dn.sep,s=i?n:n.replace(LTe,kc),o=kc+s,r=dn.sep+n;let a;return t?a=function(l,c){return typeof l=="string"&&(l===s||l.endsWith(o)||!i&&(l===n||l.endsWith(r)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===s||!i&&l===n)?e:null},a.allPaths=[(t?"*/":"./")+n],a}function OTe(n){try{const e=new RegExp(`^${Pde(n)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return $d}}function FTe(n,e,t){return!n||typeof e!="string"?!1:Mde(n)(e,void 0,t)}function Mde(n,e={}){if(!n)return gX;if(typeof n=="string"||WTe(n)){const t=Wz(n,e);if(t===$d)return gX;const i=function(s,o){return!!t(s,o)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return BTe(n,e)}function WTe(n){const e=n;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function BTe(n,e){const t=Rde(Object.getOwnPropertyNames(n).map(a=>HTe(a,n[a],e)).filter(a=>a!==$d)),i=t.length;if(!i)return $d;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(d,u){let h;for(let f=0,g=t.length;f<g;f++){const m=t[f](d,u);if(typeof m=="string")return m;fB(m)&&(h||(h=[]),h.push(m))}return h?(async()=>{for(const f of h){const g=await f;if(typeof g=="string")return g}return null})():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,u)=>u.allPaths?d.concat(u.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let d,u;for(let h=0,f=t.length;h<f;h++){const g=t[h];g.requiresSiblings&&c&&(l||(l=hg(a)),d||(d=l.substr(0,l.length-CLe(a).length)));const m=g(a,l,d,c);if(typeof m=="string")return m;fB(m)&&(u||(u=[]),u.push(m))}return u?(async()=>{for(const h of u){const f=await h;if(typeof f=="string")return f}return null})():null},o=t.find(a=>!!a.allBasenames);o&&(s.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(s.allPaths=r),s}function HTe(n,e,t){if(e===!1)return $d;const i=Wz(n,t);if(i===$d)return $d;if(typeof e=="boolean")return i;if(e){const s=e.when;if(typeof s=="string"){const o=(r,a,l,c)=>{if(!c||!i(r,a))return null;const d=s.replace("$(basename)",()=>l),u=c(d);return fB(u)?u.then(h=>h?n:null):u?n:null};return o.requiresSiblings=!0,o}}return i}function Rde(n,e){const t=n.filter(a=>!!a.basenames);if(t.length<2)return n;const i=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=i.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const o=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const u=a.charCodeAt(d-1);if(u===47||u===92)break}l=a.substr(d)}const c=i.indexOf(l);return c!==-1?s[c]:null};o.basenames=i,o.patterns=s,o.allBasenames=i;const r=n.filter(a=>!a.basenames);return r.push(o),r}function Bz(n,e,t,i,s,o){if(Array.isArray(n)){let r=0;for(const a of n){const l=Bz(a,e,t,i,s,o);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof n=="string")return i?n==="*"?5:n===t?10:0:0;if(n){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=n;if(!i&&!c)return 0;d&&s&&(e=s);let u=0;if(l)if(l===e.scheme)u=10;else if(l==="*")u=5;else return 0;if(r)if(r===t)u=10;else if(r==="*")u=Math.max(u,5);else return 0;if(d)if(d===o)u=10;else if(d==="*"&&o!==void 0)u=Math.max(u,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h={...a,base:Zle(a.base)},h===e.fsPath||FTe(h,e.fsPath))u=10;else return 0}return u}else return 0}}function Ade(n){return typeof n=="string"?!1:Array.isArray(n)?n.every(Ade):!!n.exclusive}class _X{constructor(e,t,i,s,o){this.uri=e,this.languageId=t,this.notebookUri=i,this.notebookType=s,this.recursive=o}equals(e){var t,i;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)==null?void 0:t.toString())===((i=e.notebookUri)==null?void 0:i.toString())&&this.recursive===e.recursive}}class Ni{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new j,this.onDidChange=this._onDidChange.event}register(e,t){let i={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(i),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),xe(()=>{if(i){const s=this._entries.indexOf(i);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),i=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const i of this._entries)i._score>0&&t.push(i.provider);return t}ordered(e,t=!1){const i=[];return this._orderedForEach(e,t,s=>i.push(s.provider)),i}orderedGroups(e){const t=[];let i,s;return this._orderedForEach(e,!1,o=>{i&&s===o._score?i.push(o.provider):(s=o._score,i=[o.provider],t.push(i))}),t}_orderedForEach(e,t,i){this._updateScores(e,t);for(const s of this._entries)s._score>0&&i(s)}_updateScores(e,t){var o,r;const i=(o=this._notebookInfoResolver)==null?void 0:o.call(this,e.uri),s=i?new _X(e.uri,e.getLanguageId(),i.uri,i.type,t):new _X(e.uri,e.getLanguageId(),void 0,void 0,t);if(!((r=this._lastCandidate)!=null&&r.equals(s))){this._lastCandidate=s;for(const a of this._entries)if(a._score=Bz(a.selector,s.uri,s.languageId,dde(e),s.notebookUri,s.notebookType),Ade(a.selector)&&a._score>0)if(t)a._score=0;else{for(const l of this._entries)l._score=0;a._score=1e3;break}this._entries.sort(Ni._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:S0(e.selector)&&!S0(t.selector)?1:!S0(e.selector)&&S0(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function S0(n){return typeof n=="string"?!1:Array.isArray(n)?n.some(S0):!!n.isBuiltin}class jTe{constructor(){this.referenceProvider=new Ni(this._score.bind(this)),this.renameProvider=new Ni(this._score.bind(this)),this.newSymbolNamesProvider=new Ni(this._score.bind(this)),this.codeActionProvider=new Ni(this._score.bind(this)),this.definitionProvider=new Ni(this._score.bind(this)),this.typeDefinitionProvider=new Ni(this._score.bind(this)),this.declarationProvider=new Ni(this._score.bind(this)),this.implementationProvider=new Ni(this._score.bind(this)),this.documentSymbolProvider=new Ni(this._score.bind(this)),this.inlayHintsProvider=new Ni(this._score.bind(this)),this.colorProvider=new Ni(this._score.bind(this)),this.codeLensProvider=new Ni(this._score.bind(this)),this.documentFormattingEditProvider=new Ni(this._score.bind(this)),this.documentRangeFormattingEditProvider=new Ni(this._score.bind(this)),this.onTypeFormattingEditProvider=new Ni(this._score.bind(this)),this.signatureHelpProvider=new Ni(this._score.bind(this)),this.hoverProvider=new Ni(this._score.bind(this)),this.documentHighlightProvider=new Ni(this._score.bind(this)),this.multiDocumentHighlightProvider=new Ni(this._score.bind(this)),this.selectionRangeProvider=new Ni(this._score.bind(this)),this.foldingRangeProvider=new Ni(this._score.bind(this)),this.linkProvider=new Ni(this._score.bind(this)),this.inlineCompletionsProvider=new Ni(this._score.bind(this)),this.inlineEditProvider=new Ni(this._score.bind(this)),this.completionProvider=new Ni(this._score.bind(this)),this.linkedEditingRangeProvider=new Ni(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new Ni(this._score.bind(this)),this.documentSemanticTokensProvider=new Ni(this._score.bind(this)),this.documentDropEditProvider=new Ni(this._score.bind(this)),this.documentPasteEditProvider=new Ni(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)==null?void 0:t.call(this,e)}}mt(ve,jTe,1);function Hz(n){return`--vscode-${n.replace(/\./g,"-")}`}function pe(n){return`var(${Hz(n)})`}function VTe(n,e){return`var(${Hz(n)}, ${e})`}function zTe(n){return n!==null&&typeof n=="object"&&"light"in n&&"dark"in n}const Ode={ColorContribution:"base.contributions.colors"},UTe="default";class $Te{constructor(){this._onDidChangeSchema=new j,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,i,s=!1,o){const r={id:e,description:i,defaults:t,needsTransparency:s,deprecationMessage:o};this.colorsById[e]=r;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),s&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=p("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:i,oneOf:[a,{type:"string",const:UTe,description:p("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const i=this.colorsById[e];if(i!=null&&i.defaults){const s=zTe(i.defaults)?i.defaults[t.type]:i.defaults;return Gl(s,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,i)=>{const s=t.indexOf(".")===-1?0:1,o=i.indexOf(".")===-1?0:1;return s!==o?s-o:t.localeCompare(i)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const kA=new $Te;Mi.add(Ode.ColorContribution,kA);function T(n,e,t,i,s){return kA.registerColor(n,e,t,i,s)}function qTe(n,e){var t,i,s,o;switch(n.op){case 0:return(t=Gl(n.value,e))==null?void 0:t.darken(n.factor);case 1:return(i=Gl(n.value,e))==null?void 0:i.lighten(n.factor);case 2:return(s=Gl(n.value,e))==null?void 0:s.transparent(n.factor);case 3:{const r=Gl(n.background,e);return r?(o=Gl(n.value,e))==null?void 0:o.makeOpaque(r):Gl(n.value,e)}case 4:for(const r of n.values){const a=Gl(r,e);if(a)return a}return;case 6:return Gl(e.defines(n.if)?n.then:n.else,e);case 5:{const r=Gl(n.value,e);if(!r)return;const a=Gl(n.background,e);return a?r.isDarkerThan(a)?te.getLighterColor(r,a,n.factor).transparent(n.transparency):te.getDarkerColor(r,a,n.factor).transparent(n.transparency):r.transparent(n.factor*n.transparency)}default:throw _A()}}function Vb(n,e){return{op:0,value:n,factor:e}}function Nc(n,e){return{op:1,value:n,factor:e}}function et(n,e){return{op:2,value:n,factor:e}}function Zx(...n){return{op:4,values:n}}function KTe(n,e,t){return{op:6,if:n,then:e,else:t}}function bX(n,e,t,i){return{op:5,value:n,background:e,factor:t,transparency:i}}function Gl(n,e){if(n!==null){if(typeof n=="string")return n[0]==="#"?te.fromHex(n):e.getColor(n);if(n instanceof te)return n;if(typeof n=="object")return qTe(n,e)}}const Fde="vscode://schemas/workbench-colors",Wde=Mi.as(CA.JSONContribution);Wde.registerSchema(Fde,kA.getColorSchema());const vX=new $t(()=>Wde.notifySchemaChanged(Fde),200);kA.onDidChangeSchema(()=>{vX.isScheduled()||vX.schedule()});const ot=T("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},p("foreground","Overall foreground color. This color is only used if not overridden by a component."));T("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},p("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));T("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},p("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));T("descriptionForeground",{light:"#717171",dark:et(ot,.7),hcDark:et(ot,.7),hcLight:et(ot,.7)},p("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const vT=T("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},p("iconForeground","The default color for icons in the workbench.")),Zd=T("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},p("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),vt=T("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},p("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),vi=T("contrastActiveBorder",{light:null,dark:null,hcDark:Zd,hcLight:Zd},p("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));T("selection.background",null,p("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const GTe=T("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},p("textLinkForeground","Foreground color for links in text."));T("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},p("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));T("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:te.black,hcLight:"#292929"},p("textSeparatorForeground","Color for text separators."));T("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},p("textPreformatForeground","Foreground color for preformatted text segments."));T("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},p("textPreformatBackground","Background color for preformatted text segments."));T("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},p("textBlockQuoteBackground","Background color for block quotes in text."));T("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:te.white,hcLight:"#292929"},p("textBlockQuoteBorder","Border color for block quotes in text."));T("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:te.black,hcLight:"#F2F2F2"},p("textCodeBlockBackground","Background color for code blocks in text."));T("sash.hoverBorder",Zd,p("sashActiveBorder","Border color of active sashes."));const IN=T("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:te.black,hcLight:"#0F4A85"},p("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),YTe=T("badge.foreground",{dark:te.white,light:"#333",hcDark:te.white,hcLight:te.white},p("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),jz=T("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},p("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Bde=T("scrollbarSlider.background",{dark:te.fromHex("#797979").transparent(.4),light:te.fromHex("#646464").transparent(.4),hcDark:et(vt,.6),hcLight:et(vt,.4)},p("scrollbarSliderBackground","Scrollbar slider background color.")),Hde=T("scrollbarSlider.hoverBackground",{dark:te.fromHex("#646464").transparent(.7),light:te.fromHex("#646464").transparent(.7),hcDark:et(vt,.8),hcLight:et(vt,.8)},p("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),jde=T("scrollbarSlider.activeBackground",{dark:te.fromHex("#BFBFBF").transparent(.4),light:te.fromHex("#000000").transparent(.6),hcDark:vt,hcLight:vt},p("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),ZTe=T("progressBar.background",{dark:te.fromHex("#0E70C0"),light:te.fromHex("#0E70C0"),hcDark:vt,hcLight:vt},p("progressBarBackground","Background color of the progress bar that can show for long running operations.")),Ol=T("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:te.black,hcLight:te.white},p("editorBackground","Editor background color.")),cu=T("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:te.white,hcLight:ot},p("editorForeground","Editor default foreground color."));T("editorStickyScroll.background",Ol,p("editorStickyScrollBackground","Background color of sticky scroll in the editor"));T("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:te.fromHex("#0F4A85").transparent(.1)},p("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));T("editorStickyScroll.border",{dark:null,light:null,hcDark:vt,hcLight:vt},p("editorStickyScrollBorder","Border color of sticky scroll in the editor"));T("editorStickyScroll.shadow",jz,p("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const ia=T("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:te.white},p("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),LA=T("editorWidget.foreground",ot,p("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Vz=T("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:vt,hcLight:vt},p("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));T("editorWidget.resizeBorder",null,p("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));T("editorError.background",null,p("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const DA=T("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},p("editorError.foreground","Foreground color of error squigglies in the editor.")),QTe=T("editorError.border",{dark:null,light:null,hcDark:te.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},p("errorBorder","If set, color of double underlines for errors in the editor.")),XTe=T("editorWarning.background",null,p("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Ph=T("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},p("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),Qx=T("editorWarning.border",{dark:null,light:null,hcDark:te.fromHex("#FFCC00").transparent(.8),hcLight:te.fromHex("#FFCC00").transparent(.8)},p("warningBorder","If set, color of double underlines for warnings in the editor."));T("editorInfo.background",null,p("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Qd=T("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},p("editorInfo.foreground","Foreground color of info squigglies in the editor.")),Xx=T("editorInfo.border",{dark:null,light:null,hcDark:te.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},p("infoBorder","If set, color of double underlines for infos in the editor.")),JTe=T("editorHint.foreground",{dark:te.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},p("editorHint.foreground","Foreground color of hint squigglies in the editor."));T("editorHint.border",{dark:null,light:null,hcDark:te.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},p("hintBorder","If set, color of double underlines for hints in the editor."));const ePe=T("editorLink.activeForeground",{dark:"#4E94CE",light:te.blue,hcDark:te.cyan,hcLight:"#292929"},p("activeLinkForeground","Color of active links.")),$f=T("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},p("editorSelectionBackground","Color of the editor selection.")),tPe=T("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:te.white},p("editorSelectionForeground","Color of the selected text for high contrast.")),Vde=T("editor.inactiveSelectionBackground",{light:et($f,.5),dark:et($f,.5),hcDark:et($f,.7),hcLight:et($f,.5)},p("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),zz=T("editor.selectionHighlightBackground",{light:bX($f,Ol,.3,.6),dark:bX($f,Ol,.3,.6),hcDark:null,hcLight:null},p("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:vi,hcLight:vi},p("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));T("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},p("editorFindMatch","Color of the current search match."));const iPe=T("editor.findMatchForeground",null,p("editorFindMatchForeground","Text color of the current search match.")),th=T("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},p("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),nPe=T("editor.findMatchHighlightForeground",null,p("findMatchHighlightForeground","Foreground color of the other search matches."),!0);T("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},p("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.findMatchBorder",{light:null,dark:null,hcDark:vi,hcLight:vi},p("editorFindMatchBorder","Border color of the current search match."));const qf=T("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:vi,hcLight:vi},p("findMatchHighlightBorder","Border color of the other search matches.")),sPe=T("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:et(vi,.4),hcLight:et(vi,.4)},p("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},p("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const wT=T("editorHoverWidget.background",ia,p("hoverBackground","Background color of the editor hover."));T("editorHoverWidget.foreground",LA,p("hoverForeground","Foreground color of the editor hover."));const zde=T("editorHoverWidget.border",Vz,p("hoverBorder","Border color of the editor hover."));T("editorHoverWidget.statusBarBackground",{dark:Nc(wT,.2),light:Vb(wT,.05),hcDark:ia,hcLight:ia},p("statusBarBackground","Background color of the editor hover status bar."));const Uz=T("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:te.white,hcLight:te.black},p("editorInlayHintForeground","Foreground color of inline hints")),$z=T("editorInlayHint.background",{dark:et(IN,.1),light:et(IN,.1),hcDark:et(te.white,.1),hcLight:et(IN,.1)},p("editorInlayHintBackground","Background color of inline hints")),oPe=T("editorInlayHint.typeForeground",Uz,p("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),rPe=T("editorInlayHint.typeBackground",$z,p("editorInlayHintBackgroundTypes","Background color of inline hints for types")),aPe=T("editorInlayHint.parameterForeground",Uz,p("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),lPe=T("editorInlayHint.parameterBackground",$z,p("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),cPe=T("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},p("editorLightBulbForeground","The color used for the lightbulb actions icon."));T("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));T("editorLightBulbAi.foreground",cPe,p("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));T("editor.snippetTabstopHighlightBackground",{dark:new te(new Ct(124,124,124,.3)),light:new te(new Ct(10,50,100,.2)),hcDark:new te(new Ct(124,124,124,.3)),hcLight:new te(new Ct(10,50,100,.2))},p("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));T("editor.snippetTabstopHighlightBorder",null,p("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));T("editor.snippetFinalTabstopHighlightBackground",null,p("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));T("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new te(new Ct(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},p("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const XB=new te(new Ct(155,185,85,.2)),JB=new te(new Ct(255,0,0,.2)),dPe=T("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},p("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),uPe=T("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},p("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);T("diffEditor.insertedLineBackground",{dark:XB,light:XB,hcDark:null,hcLight:null},p("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);T("diffEditor.removedLineBackground",{dark:JB,light:JB,hcDark:null,hcLight:null},p("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);T("diffEditorGutter.insertedLineBackground",null,p("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));T("diffEditorGutter.removedLineBackground",null,p("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const hPe=T("diffEditorOverview.insertedForeground",null,p("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),fPe=T("diffEditorOverview.removedForeground",null,p("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));T("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},p("diffEditorInsertedOutline","Outline color for the text that got inserted."));T("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},p("diffEditorRemovedOutline","Outline color for text that got removed."));T("diffEditor.border",{dark:null,light:null,hcDark:vt,hcLight:vt},p("diffEditorBorder","Border color between the two text editors."));T("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},p("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));T("diffEditor.unchangedRegionBackground","sideBar.background",p("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));T("diffEditor.unchangedRegionForeground","foreground",p("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));T("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},p("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const o1=T("widget.shadow",{dark:et(te.black,.36),light:et(te.black,.16),hcDark:null,hcLight:null},p("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),Ude=T("widget.border",{dark:null,light:null,hcDark:vt,hcLight:vt},p("widgetBorder","Border color of widgets such as find/replace inside the editor.")),wX=T("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},p("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));T("toolbar.hoverOutline",{dark:null,light:null,hcDark:vi,hcLight:vi},p("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));T("toolbar.activeBackground",{dark:Nc(wX,.1),light:Vb(wX,.1),hcDark:null,hcLight:null},p("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const gPe=T("breadcrumb.foreground",et(ot,.8),p("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),mPe=T("breadcrumb.background",Ol,p("breadcrumbsBackground","Background color of breadcrumb items.")),CX=T("breadcrumb.focusForeground",{light:Vb(ot,.2),dark:Nc(ot,.1),hcDark:Nc(ot,.1),hcLight:Nc(ot,.1)},p("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),pPe=T("breadcrumb.activeSelectionForeground",{light:Vb(ot,.2),dark:Nc(ot,.1),hcDark:Nc(ot,.1),hcLight:Nc(ot,.1)},p("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));T("breadcrumbPicker.background",ia,p("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const $de=.5,yX=te.fromHex("#40C8AE").transparent($de),SX=te.fromHex("#40A6FF").transparent($de),xX=te.fromHex("#606060").transparent(.4),qz=.4,dy=1,eH=T("merge.currentHeaderBackground",{dark:yX,light:yX,hcDark:null,hcLight:null},p("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);T("merge.currentContentBackground",et(eH,qz),p("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const tH=T("merge.incomingHeaderBackground",{dark:SX,light:SX,hcDark:null,hcLight:null},p("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);T("merge.incomingContentBackground",et(tH,qz),p("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const iH=T("merge.commonHeaderBackground",{dark:xX,light:xX,hcDark:null,hcLight:null},p("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);T("merge.commonContentBackground",et(iH,qz),p("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const uy=T("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},p("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));T("editorOverviewRuler.currentContentForeground",{dark:et(eH,dy),light:et(eH,dy),hcDark:uy,hcLight:uy},p("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));T("editorOverviewRuler.incomingContentForeground",{dark:et(tH,dy),light:et(tH,dy),hcDark:uy,hcLight:uy},p("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));T("editorOverviewRuler.commonContentForeground",{dark:et(iH,dy),light:et(iH,dy),hcDark:uy,hcLight:uy},p("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const a4=T("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},p("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),qde=T("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",p("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),_Pe=T("problemsErrorIcon.foreground",DA,p("problemsErrorIconForeground","The color used for the problems error icon.")),bPe=T("problemsWarningIcon.foreground",Ph,p("problemsWarningIconForeground","The color used for the problems warning icon.")),vPe=T("problemsInfoIcon.foreground",Qd,p("problemsInfoIconForeground","The color used for the problems info icon.")),nH=T("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},p("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),EA=T("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},p("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),kX=T("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},p("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),wPe=T("minimap.infoHighlight",{dark:Qd,light:Qd,hcDark:Xx,hcLight:Xx},p("minimapInfo","Minimap marker color for infos.")),CPe=T("minimap.warningHighlight",{dark:Ph,light:Ph,hcDark:Qx,hcLight:Qx},p("overviewRuleWarning","Minimap marker color for warnings.")),yPe=T("minimap.errorHighlight",{dark:new te(new Ct(255,18,18,.7)),light:new te(new Ct(255,18,18,.7)),hcDark:new te(new Ct(255,50,50,1)),hcLight:"#B5200D"},p("minimapError","Minimap marker color for errors.")),SPe=T("minimap.background",null,p("minimapBackground","Minimap background color.")),xPe=T("minimap.foregroundOpacity",te.fromHex("#000f"),p("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));T("minimapSlider.background",et(Bde,.5),p("minimapSliderBackground","Minimap slider background color."));T("minimapSlider.hoverBackground",et(Hde,.5),p("minimapSliderHoverBackground","Minimap slider background color when hovering."));T("minimapSlider.activeBackground",et(jde,.5),p("minimapSliderActiveBackground","Minimap slider background color when clicked on."));T("charts.foreground",ot,p("chartsForeground","The foreground color used in charts."));T("charts.lines",et(ot,.5),p("chartsLines","The color used for horizontal lines in charts."));T("charts.red",DA,p("chartsRed","The red color used in chart visualizations."));T("charts.blue",Qd,p("chartsBlue","The blue color used in chart visualizations."));T("charts.yellow",Ph,p("chartsYellow","The yellow color used in chart visualizations."));T("charts.orange",nH,p("chartsOrange","The orange color used in chart visualizations."));T("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},p("chartsGreen","The green color used in chart visualizations."));T("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("chartsPurple","The purple color used in chart visualizations."));const sH=T("input.background",{dark:"#3C3C3C",light:te.white,hcDark:te.black,hcLight:te.white},p("inputBoxBackground","Input box background.")),Kde=T("input.foreground",ot,p("inputBoxForeground","Input box foreground.")),Gde=T("input.border",{dark:null,light:null,hcDark:vt,hcLight:vt},p("inputBoxBorder","Input box border.")),NA=T("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:vt,hcLight:vt},p("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),kPe=T("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},p("inputOption.hoverBackground","Background color of activated options in input fields.")),FL=T("inputOption.activeBackground",{dark:et(Zd,.4),light:et(Zd,.2),hcDark:te.transparent,hcLight:te.transparent},p("inputOption.activeBackground","Background hover color of options in input fields.")),IA=T("inputOption.activeForeground",{dark:te.white,light:te.black,hcDark:ot,hcLight:ot},p("inputOption.activeForeground","Foreground color of activated options in input fields."));T("input.placeholderForeground",{light:et(ot,.5),dark:et(ot,.5),hcDark:et(ot,.7),hcLight:et(ot,.7)},p("inputPlaceholderForeground","Input box foreground color for placeholder text."));const LPe=T("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:te.black,hcLight:te.white},p("inputValidationInfoBackground","Input validation background color for information severity.")),DPe=T("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:ot},p("inputValidationInfoForeground","Input validation foreground color for information severity.")),EPe=T("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:vt,hcLight:vt},p("inputValidationInfoBorder","Input validation border color for information severity.")),NPe=T("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:te.black,hcLight:te.white},p("inputValidationWarningBackground","Input validation background color for warning severity.")),IPe=T("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:ot},p("inputValidationWarningForeground","Input validation foreground color for warning severity.")),TPe=T("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:vt,hcLight:vt},p("inputValidationWarningBorder","Input validation border color for warning severity.")),PPe=T("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:te.black,hcLight:te.white},p("inputValidationErrorBackground","Input validation background color for error severity.")),MPe=T("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:ot},p("inputValidationErrorForeground","Input validation foreground color for error severity.")),RPe=T("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:vt,hcLight:vt},p("inputValidationErrorBorder","Input validation border color for error severity.")),TA=T("dropdown.background",{dark:"#3C3C3C",light:te.white,hcDark:te.black,hcLight:te.white},p("dropdownBackground","Dropdown background.")),APe=T("dropdown.listBackground",{dark:null,light:null,hcDark:te.black,hcLight:te.white},p("dropdownListBackground","Dropdown list background.")),Kz=T("dropdown.foreground",{dark:"#F0F0F0",light:ot,hcDark:te.white,hcLight:ot},p("dropdownForeground","Dropdown foreground.")),Gz=T("dropdown.border",{dark:TA,light:"#CECECE",hcDark:vt,hcLight:vt},p("dropdownBorder","Dropdown border.")),Yde=T("button.foreground",te.white,p("buttonForeground","Button foreground color.")),OPe=T("button.separator",et(Yde,.4),p("buttonSeparator","Button separator color.")),x0=T("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},p("buttonBackground","Button background color.")),FPe=T("button.hoverBackground",{dark:Nc(x0,.2),light:Vb(x0,.2),hcDark:x0,hcLight:x0},p("buttonHoverBackground","Button background color when hovering.")),WPe=T("button.border",vt,p("buttonBorder","Button border color.")),BPe=T("button.secondaryForeground",{dark:te.white,light:te.white,hcDark:te.white,hcLight:ot},p("buttonSecondaryForeground","Secondary button foreground color.")),oH=T("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:te.white},p("buttonSecondaryBackground","Secondary button background color.")),HPe=T("button.secondaryHoverBackground",{dark:Nc(oH,.2),light:Vb(oH,.2),hcDark:null,hcLight:null},p("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),k0=T("radio.activeForeground",IA,p("radioActiveForeground","Foreground color of active radio option.")),jPe=T("radio.activeBackground",FL,p("radioBackground","Background color of active radio option.")),VPe=T("radio.activeBorder",NA,p("radioActiveBorder","Border color of the active radio option.")),zPe=T("radio.inactiveForeground",null,p("radioInactiveForeground","Foreground color of inactive radio option.")),UPe=T("radio.inactiveBackground",null,p("radioInactiveBackground","Background color of inactive radio option.")),$Pe=T("radio.inactiveBorder",{light:et(k0,.2),dark:et(k0,.2),hcDark:et(k0,.4),hcLight:et(k0,.2)},p("radioInactiveBorder","Border color of the inactive radio option.")),qPe=T("radio.inactiveHoverBackground",kPe,p("radioHoverBackground","Background color of inactive active radio option when hovering.")),KPe=T("checkbox.background",TA,p("checkbox.background","Background color of checkbox widget."));T("checkbox.selectBackground",ia,p("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const GPe=T("checkbox.foreground",Kz,p("checkbox.foreground","Foreground color of checkbox widget.")),YPe=T("checkbox.border",Gz,p("checkbox.border","Border color of checkbox widget."));T("checkbox.selectBorder",vT,p("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const ZPe=T("keybindingLabel.background",{dark:new te(new Ct(128,128,128,.17)),light:new te(new Ct(221,221,221,.4)),hcDark:te.transparent,hcLight:te.transparent},p("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),QPe=T("keybindingLabel.foreground",{dark:te.fromHex("#CCCCCC"),light:te.fromHex("#555555"),hcDark:te.white,hcLight:ot},p("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),XPe=T("keybindingLabel.border",{dark:new te(new Ct(51,51,51,.6)),light:new te(new Ct(204,204,204,.4)),hcDark:new te(new Ct(111,195,223)),hcLight:vt},p("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),JPe=T("keybindingLabel.bottomBorder",{dark:new te(new Ct(68,68,68,.6)),light:new te(new Ct(187,187,187,.4)),hcDark:new te(new Ct(111,195,223)),hcLight:ot},p("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),eMe=T("list.focusBackground",null,p("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),tMe=T("list.focusForeground",null,p("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),iMe=T("list.focusOutline",{dark:Zd,light:Zd,hcDark:vi,hcLight:vi},p("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),nMe=T("list.focusAndSelectionOutline",null,p("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),fb=T("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:te.fromHex("#0F4A85").transparent(.1)},p("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Jx=T("list.activeSelectionForeground",{dark:te.white,light:te.white,hcDark:null,hcLight:null},p("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Zde=T("list.activeSelectionIconForeground",null,p("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),sMe=T("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:te.fromHex("#0F4A85").transparent(.1)},p("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),oMe=T("list.inactiveSelectionForeground",null,p("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),rMe=T("list.inactiveSelectionIconForeground",null,p("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),aMe=T("list.inactiveFocusBackground",null,p("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),lMe=T("list.inactiveFocusOutline",null,p("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Qde=T("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:te.white.transparent(.1),hcLight:te.fromHex("#0F4A85").transparent(.1)},p("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Xde=T("list.hoverForeground",null,p("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),cMe=T("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},p("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),dMe=T("list.dropBetweenBackground",{dark:vT,light:vT,hcDark:null,hcLight:null},p("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),sw=T("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Zd,hcLight:Zd},p("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),uMe=T("list.focusHighlightForeground",{dark:sw,light:KTe(fb,sw,"#BBE7FF"),hcDark:sw,hcLight:sw},p("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));T("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},p("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));T("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},p("listErrorForeground","Foreground color of list items containing errors."));T("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},p("listWarningForeground","Foreground color of list items containing warnings."));const hMe=T("listFilterWidget.background",{light:Vb(ia,0),dark:Nc(ia,0),hcDark:ia,hcLight:ia},p("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),fMe=T("listFilterWidget.outline",{dark:te.transparent,light:te.transparent,hcDark:"#f38518",hcLight:"#007ACC"},p("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),gMe=T("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:vt,hcLight:vt},p("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),mMe=T("listFilterWidget.shadow",o1,p("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));T("list.filterMatchBackground",{dark:th,light:th,hcDark:null,hcLight:null},p("listFilterMatchHighlight","Background color of the filtered match."));T("list.filterMatchBorder",{dark:qf,light:qf,hcDark:vt,hcLight:vi},p("listFilterMatchHighlightBorder","Border color of the filtered match."));T("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},p("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const Jde=T("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},p("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),pMe=T("tree.inactiveIndentGuidesStroke",et(Jde,.4),p("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),_Me=T("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},p("tableColumnsBorder","Table border color between columns.")),bMe=T("tree.tableOddRowsBackground",{dark:et(ot,.04),light:et(ot,.04),hcDark:null,hcLight:null},p("tableOddRowsBackgroundColor","Background color for odd table rows."));T("editorActionList.background",ia,p("editorActionListBackground","Action List background color."));T("editorActionList.foreground",LA,p("editorActionListForeground","Action List foreground color."));T("editorActionList.focusForeground",Jx,p("editorActionListFocusForeground","Action List foreground color for the focused item."));T("editorActionList.focusBackground",fb,p("editorActionListFocusBackground","Action List background color for the focused item."));const vMe=T("menu.border",{dark:null,light:null,hcDark:vt,hcLight:vt},p("menuBorder","Border color of menus.")),wMe=T("menu.foreground",Kz,p("menuForeground","Foreground color of menu items.")),CMe=T("menu.background",TA,p("menuBackground","Background color of menu items.")),yMe=T("menu.selectionForeground",Jx,p("menuSelectionForeground","Foreground color of the selected menu item in menus.")),SMe=T("menu.selectionBackground",fb,p("menuSelectionBackground","Background color of the selected menu item in menus.")),xMe=T("menu.selectionBorder",{dark:null,light:null,hcDark:vi,hcLight:vi},p("menuSelectionBorder","Border color of the selected menu item in menus.")),kMe=T("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:vt,hcLight:vt},p("menuSeparatorBackground","Color of a separator menu item in menus.")),LX=T("quickInput.background",ia,p("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),LMe=T("quickInput.foreground",LA,p("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),DMe=T("quickInputTitle.background",{dark:new te(new Ct(255,255,255,.105)),light:new te(new Ct(0,0,0,.06)),hcDark:"#000000",hcLight:te.white},p("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),eue=T("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:te.white,hcLight:"#0F4A85"},p("pickerGroupForeground","Quick picker color for grouping labels.")),EMe=T("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:te.white,hcLight:"#0F4A85"},p("pickerGroupBorder","Quick picker color for grouping borders.")),DX=T("quickInput.list.focusBackground",null,"",void 0,p("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),ek=T("quickInputList.focusForeground",Jx,p("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Yz=T("quickInputList.focusIconForeground",Zde,p("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),tk=T("quickInputList.focusBackground",{dark:Zx(DX,fb),light:Zx(DX,fb),hcDark:null,hcLight:null},p("quickInput.listFocusBackground","Quick picker background color for the focused item."));T("search.resultsInfoForeground",{light:ot,dark:et(ot,.65),hcDark:ot,hcLight:ot},p("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));T("searchEditor.findMatchBackground",{light:et(th,.66),dark:et(th,.66),hcDark:th,hcLight:th},p("searchEditor.queryMatch","Color of the Search Editor query matches."));T("searchEditor.findMatchBorder",{light:et(qf,.66),dark:et(qf,.66),hcDark:qf,hcLight:qf},p("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var NMe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},EX=function(n,e){return function(t,i){e(t,i,n)}};const du=dt("hoverService");let hy=class extends U{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,i={},s,o){super(),this.placement=e,this.instantHover=t,this.overrideOptions=i,this.configurationService=s,this.hoverService=o,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new Q),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const i=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const s=Fn(e.target)?[e.target]:e.target.targetElements;for(const r of s)this.hoverDisposables.add(Fi(r,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const o=Fn(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:o,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};hy=NMe([EX(3,nt),EX(4,du)],hy);const zh=dt("contextViewService"),Er=dt("contextMenuService"),Ft=dt("keybindingService");class r1{constructor(){this._hooks=new Q,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,s,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=o;let r=e;try{e.setPointerCapture(t),this._hooks.add(xe(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{r=Te(e)}this._hooks.add(G(r,le.POINTER_MOVE,a=>{if(a.buttons!==i){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(G(r,le.POINTER_UP,a=>this.stopMonitoring(!0)))}}function an(n,e,t){let i=null,s=null;if(typeof t.value=="function"?(i="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(i="get",s=t.get),!s)throw new Error("not supported");const o=`$memoize$${e}`;t[i]=function(...r){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,r)}),this[o]}}var IMe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},si;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(si||(si={}));const hs=class hs extends U{constructor(){super(),this.dispatched=!1,this.targets=new co,this.ignoreTargets=new co,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(ue.runAndSubscribe(rA,({window:e,disposables:t})=>{t.add(G(e.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(G(e.document,"touchend",i=>this.onTouchEnd(e,i))),t.add(G(e.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:Gt,disposables:this._store}))}static addTarget(e){if(!hs.isTouchDevice())return U.None;hs.INSTANCE||(hs.INSTANCE=new hs);const t=hs.INSTANCE.targets.push(e);return xe(t)}static ignoreTarget(e){if(!hs.isTouchDevice())return U.None;hs.INSTANCE||(hs.INSTANCE=new hs);const t=hs.INSTANCE.ignoreTargets.push(e);return xe(t)}static isTouchDevice(){return"ontouchstart"in Gt||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,s=e.targetTouches.length;i<s;i++){const o=e.targetTouches.item(i);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};const r=this.newGestureEvent(si.Start,o.target);r.pageX=o.pageX,r.pageY=o.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const i=Date.now(),s=Object.keys(this.activeTouches).length;for(let o=0,r=t.changedTouches.length;o<r;o++){const a=t.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<hs.HOLD_DELAY&&Math.abs(l.initialPageX-xa(l.rollingPageX))<30&&Math.abs(l.initialPageY-xa(l.rollingPageY))<30){const d=this.newGestureEvent(si.Tap,l.initialTarget);d.pageX=xa(l.rollingPageX),d.pageY=xa(l.rollingPageY),this.dispatchEvent(d)}else if(c>=hs.HOLD_DELAY&&Math.abs(l.initialPageX-xa(l.rollingPageX))<30&&Math.abs(l.initialPageY-xa(l.rollingPageY))<30){const d=this.newGestureEvent(si.Contextmenu,l.initialTarget);d.pageX=xa(l.rollingPageX),d.pageY=xa(l.rollingPageY),this.dispatchEvent(d)}else if(s===1){const d=xa(l.rollingPageX),u=xa(l.rollingPageY),h=xa(l.rollingTimestamps)-l.rollingTimestamps[0],f=d-l.rollingPageX[0],g=u-l.rollingPageY[0],m=[...this.targets].filter(_=>l.initialTarget instanceof Node&&_.contains(l.initialTarget));this.inertia(e,m,i,Math.abs(f)/h,f>0?1:-1,d,Math.abs(g)/h,g>0?1:-1,u)}this.dispatchEvent(this.newGestureEvent(si.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const i=document.createEvent("CustomEvent");return i.initEvent(e,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(e){if(e.type===si.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>hs.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,e.tapCount=i}else(e.type===si.Change||e.type===si.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(e.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(e.initialTarget)){let s=0,o=e.initialTarget;for(;o&&o!==i;)s++,o=o.parentElement;t.push([s,i])}t.sort((i,s)=>i[0]-s[0]);for(const[i,s]of t)s.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,i,s,o,r,a,l,c){this.handle=xr(e,()=>{const d=Date.now(),u=d-i;let h=0,f=0,g=!0;s+=hs.SCROLL_FRICTION*u,a+=hs.SCROLL_FRICTION*u,s>0&&(g=!1,h=o*s*u),a>0&&(g=!1,f=l*a*u);const m=this.newGestureEvent(si.Change);m.translationX=h,m.translationY=f,t.forEach(_=>_.dispatchEvent(m)),g||this.inertia(e,t,d,s,o,r+h,a,l,c+f)})}onTouchMove(e){const t=Date.now();for(let i=0,s=e.changedTouches.length;i<s;i++){const o=e.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}const r=this.activeTouches[o.identifier],a=this.newGestureEvent(si.Change,r.initialTarget);a.translationX=o.pageX-xa(r.rollingPageX),a.translationY=o.pageY-xa(r.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(o.pageX),r.rollingPageY.push(o.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};hs.SCROLL_FRICTION=-.005,hs.HOLD_DELAY=700,hs.CLEAR_TAP_COUNT_TIME=400;let Is=hs;IMe([an],Is,"isTouchDevice",null);let ba=class extends U{onclick(e,t){this._register(G(e,le.CLICK,i=>t(new Sl(Te(e),i))))}onmousedown(e,t){this._register(G(e,le.MOUSE_DOWN,i=>t(new Sl(Te(e),i))))}onmouseover(e,t){this._register(G(e,le.MOUSE_OVER,i=>t(new Sl(Te(e),i))))}onmouseleave(e,t){this._register(G(e,le.MOUSE_LEAVE,i=>t(new Sl(Te(e),i))))}onkeydown(e,t){this._register(G(e,le.KEY_DOWN,i=>t(new ti(i))))}onkeyup(e,t){this._register(G(e,le.KEY_UP,i=>t(new ti(i))))}oninput(e,t){this._register(G(e,le.INPUT,t))}onblur(e,t){this._register(G(e,le.BLUR,t))}onfocus(e,t){this._register(G(e,le.FOCUS,t))}ignoreGesture(e){return Is.ignoreTarget(e)}};const fy=11;class TMe extends ba{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Re.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=fy+"px",this.domNode.style.height=fy+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new r1),this._register(Fi(this.bgDomNode,le.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Fi(this.domNode,le.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new vz),this._pointerdownScheduleRepeatTimer=this._register(new Bl)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Te(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class PMe extends U{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Bl)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const MMe=140;class tue extends ba{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new PMe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new r1),this._shouldRender=!0,this.domNode=Ot(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(G(this.domNode.domNode,le.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new TMe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,s){this.slider=Ot(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(G(this.slider.domNode,le.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);i<=o&&o<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{const o=Qi(this.domNode.domNode);t=e.pageX-o.left,i=e.pageY-o.top}const s=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{const r=this._sliderOrthogonalPointerPosition(o),a=Math.abs(r-i);if(vs&&a>MMe){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const c=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const RMe=20;class gy{constructor(e,t,i,s,o,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=o,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new gy(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,i,s,o){const r=Math.max(0,i-e),a=Math.max(0,r-2*t),l=s>0&&s>i;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(RMe,Math.floor(i*a/s))),d=(a-c)/(s-i),u=o*d;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=gy._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let i=this._scrollPosition;return t<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class AMe extends tue{constructor(e,t,i){const s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new gy(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-fy)/2,a=(t.horizontalScrollbarSize-fy)/2;this._createArrow({className:"scra",icon:ae.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new cb(null,1,0))}),this._createArrow({className:"scra",icon:ae.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new cb(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class OMe extends tue{constructor(e,t,i){const s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new gy(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-fy)/2,a=(t.verticalScrollbarSize-fy)/2;this._createArrow({className:"scra",icon:ae.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new cb(null,0,1))}),this._createArrow({className:"scra",icon:ae.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new cb(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class CT{constructor(e,t,i,s,o,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,i=i|0,s=s|0,o=o|0,r=r|0,a=a|0),this.rawScrollLeft=s,this.rawScrollTop=a,t<0&&(t=0),s+t>i&&(s=i-t),s<0&&(s=0),o<0&&(o=0),a+o>r&&(a=r-o),a<0&&(a=0),this.width=t,this.scrollWidth=i,this.scrollLeft=s,this.height=o,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new CT(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new CT(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const i=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:s,scrollLeftChanged:o,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}class a1 extends U{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new j),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new CT(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var s;const i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(s=this._smoothScrolling)==null||s.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let s;t?s=new ik(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const i=this._state.withScrollPosition(e);this._smoothScrolling=ik.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}}class NX{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}}function l4(n,e){const t=e-n;return function(i){return n+t*BMe(i)}}function FMe(n,e,t){return function(i){return i<t?n(i/t):e((i-t)/(1-t))}}class ik{constructor(e,t,i,s){this.from=e,this.to=t,this.duration=s,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,i){if(Math.abs(e-t)>2.5*i){let o,r;return e<t?(o=e+.75*i,r=t-.75*i):(o=e-.75*i,r=t+.75*i),FMe(l4(e,o),l4(r,t),.33)}return l4(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const i=this.scrollLeft(t),s=this.scrollTop(t);return new NX(i,s,!1)}return new NX(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,i){return ik.start(e,t,i)}static start(e,t,i){i=i+10;const s=Date.now()-10;return new ik(e,t,s,i)}}function WMe(n){return Math.pow(n,3)}function BMe(n){return 1-WMe(1-n)}const HMe=500,IX=50;class jMe{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}}const QM=class QM{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,i=1,s=this._rear;do{const o=s===this._front?e:Math.pow(2,-i);if(e-=o,t+=this._memory[s].score*o,s===this._front)break;s=(this._capacity+s-1)%this._capacity,i++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(PL){const t=Te(e.browserEvent),i=nDe(t);this.accept(Date.now(),e.deltaX*i,e.deltaY*i)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,i){let s=null;const o=new jMe(e,t,i);this._front===-1&&this._rear===-1?(this._memory[0]=o,this._front=0,this._rear=0):(s=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=o),o.score=this._computeScore(o,s)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let i=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(i+=.25),t){const s=Math.abs(e.deltaX),o=Math.abs(e.deltaY),r=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(s,r),1),c=Math.max(Math.min(o,a),1),d=Math.max(s,r),u=Math.max(o,a);d%l===0&&u%c===0&&(i-=.5)}return Math.min(Math.max(i,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};QM.INSTANCE=new QM;let yT=QM;class Zz extends ba{get options(){return this._options}constructor(e,t,i){super(),this._onScroll=this._register(new j),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new j),e.style.overflow="hidden",this._options=VMe(t),this._scrollable=i,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const s={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new OMe(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new AMe(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Ot(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Ot(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Ot(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new Bl),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Qt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,ct&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new cb(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Qt(this._mouseWheelToDispose),e)){const i=s=>{this._onMouseWheel(new cb(s))};this._mouseWheelToDispose.push(G(this._listenOnDomNode,le.MOUSE_WHEEL,i,{passive:!1}))}}_onMouseWheel(e){var o;if((o=e.browserEvent)!=null&&o.defaultPrevented)return;const t=yT.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+r===0?a=r=0:Math.abs(r)>=Math.abs(a)?a=0:r=0),this._options.flipAxes&&([r,a]=[a,r]);const l=!ct&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let d={};if(r){const u=IX*r,h=c.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(d,h)}if(a){const u=IX*a,h=c.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(d,h)}d=this._scrollable.validateScrollPosition(d),(c.scrollLeft!==d.scrollLeft||c.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),i=!0)}let s=i;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,s=i?" left":"",o=t?" top":"",r=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${o}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),HMe)}}class iue extends Zz{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new a1({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>xr(Te(e),s)});super(e,t,i),this._register(i)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class PA extends Zz{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class WL extends Zz{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const i=new a1({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>xr(Te(e),s)});super(e,t,i),this._register(i),this._element=e,this._register(this.onScroll(s=>{s.scrollTopChanged&&(this._element.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this._element.scrollLeft=s.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function VMe(n){const e={lazyRender:typeof n.lazyRender<"u"?n.lazyRender:!1,className:typeof n.className<"u"?n.className:"",useShadows:typeof n.useShadows<"u"?n.useShadows:!0,handleMouseWheel:typeof n.handleMouseWheel<"u"?n.handleMouseWheel:!0,flipAxes:typeof n.flipAxes<"u"?n.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof n.consumeMouseWheelIfScrollbarIsNeeded<"u"?n.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof n.alwaysConsumeMouseWheel<"u"?n.alwaysConsumeMouseWheel:!1,scrollYToX:typeof n.scrollYToX<"u"?n.scrollYToX:!1,mouseWheelScrollSensitivity:typeof n.mouseWheelScrollSensitivity<"u"?n.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof n.fastScrollSensitivity<"u"?n.fastScrollSensitivity:5,scrollPredominantAxis:typeof n.scrollPredominantAxis<"u"?n.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof n.mouseWheelSmoothScroll<"u"?n.mouseWheelSmoothScroll:!0,arrowSize:typeof n.arrowSize<"u"?n.arrowSize:11,listenOnDomNode:typeof n.listenOnDomNode<"u"?n.listenOnDomNode:null,horizontal:typeof n.horizontal<"u"?n.horizontal:1,horizontalScrollbarSize:typeof n.horizontalScrollbarSize<"u"?n.horizontalScrollbarSize:10,horizontalSliderSize:typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:0,horizontalHasArrows:typeof n.horizontalHasArrows<"u"?n.horizontalHasArrows:!1,vertical:typeof n.vertical<"u"?n.vertical:1,verticalScrollbarSize:typeof n.verticalScrollbarSize<"u"?n.verticalScrollbarSize:10,verticalHasArrows:typeof n.verticalHasArrows<"u"?n.verticalHasArrows:!1,verticalSliderSize:typeof n.verticalSliderSize<"u"?n.verticalSliderSize:0,scrollByPage:typeof n.scrollByPage<"u"?n.scrollByPage:!1};return e.horizontalSliderSize=typeof n.horizontalSliderSize<"u"?n.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof n.verticalSliderSize<"u"?n.verticalSliderSize:e.verticalScrollbarSize,ct&&(e.className+=" mac"),e}const eE=ce;let Qz=class extends U{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new WL(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class MA extends U{static render(e,t,i){return new MA(e,t,i)}constructor(e,t,i){super(),this.actionLabel=t.label,this.actionKeybindingLabel=i,this.actionContainer=ne(e,eE("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=ne(this.actionContainer,eE("a.action")),this.action.setAttribute("role","button"),t.iconClass&&ne(this.action,eE(`span.icon.${t.iconClass}`));const s=ne(this.action,eE("span"));s.textContent=i?`${t.label} (${i})`:t.label,this._store.add(new sue(this.actionContainer,t.run)),this._store.add(new oue(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function nue(n,e){return n&&e?p("acessibleViewHint","Inspect this in the accessible view with {0}.",e):n?p("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class sue extends U{constructor(e,t){super(),this._register(G(e,le.CLICK,i=>{i.stopPropagation(),i.preventDefault(),t(e)}))}}class oue extends U{constructor(e,t,i){super(),this._register(G(e,le.KEY_DOWN,s=>{const o=new ti(s);i.some(r=>o.equals(r))&&(s.stopPropagation(),s.preventDefault(),t(e))}))}}const Xo=dt("openerService");function zMe(n){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(n.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},n=n.with({fragment:""})),{selection:e,uri:n}}class ft{get event(){return this.emitter.event}constructor(e,t,i){const s=o=>this.emitter.fire(o);this.emitter=new j({onWillAddFirstListener:()=>e.addEventListener(t,s,i),onDidRemoveLastListener:()=>e.removeEventListener(t,s,i)})}dispose(){this.emitter.dispose()}}function UMe(n,e={}){const t=Xz(e);return t.textContent=n,t}function $Me(n,e={}){const t=Xz(e);return rue(t,KMe(n,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function Xz(n){const e=n.inline?"span":"div",t=document.createElement(e);return n.className&&(t.className=n.className),t}class qMe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function rue(n,e,t,i){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&i)s=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");t.disposables.add(Fi(o,"click",r=>{t.callback(String(e.index),r)})),s=o}else e.type===8?s=document.createElement("br"):e.type===1&&(s=n);s&&n!==s&&n.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(o=>{rue(s,o,t,i)})}function KMe(n,e){const t={type:1,children:[]};let i=0,s=t;const o=[],r=new qMe(n);for(;!r.eos();){let a=r.next();const l=a==="\\"&&rH(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&GMe(a,e)&&a===r.peek()){r.advance(),s.type===2&&(s=o.pop());const c=rH(a,e);if(s.type===c||s.type===5&&c===6)s=o.pop();else{const d={type:c,children:[]};c===5&&(d.index=i,i++),s.children.push(d),o.push(s),s=d}}else if(a===`
`)s.type===2&&(s=o.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),o.push(s),s=c}else s.content+=a}return s.type===2&&(s=o.pop()),t}function GMe(n,e){return rH(n,e)!==0}function rH(n,e){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const YMe=new RegExp(`(\\\\)?\\$\\((${Re.iconNameExpression}(?:${Re.iconModifierExpression})?)\\)`,"g");function gg(n){const e=new Array;let t,i=0,s=0;for(;(t=YMe.exec(n))!==null;){s=t.index||0,i<s&&e.push(n.substring(i,s)),i=(t.index||0)+t[0].length;const[,o,r]=t;e.push(o?`$(${r})`:gb({id:r}))}return i<n.length&&e.push(n.substring(i)),e}function gb(n){const e=ce("span");return e.classList.add(...Re.asClassNameArray(n)),e}function ZMe(n){const e=QMe(n);if(e&&e.length>0)return new Uint32Array(e)}let jr=0;const Lf=new Uint32Array(10);function QMe(n){if(jr=0,Jc(n,c4,4352),jr>0||(Jc(n,d4,4449),jr>0)||(Jc(n,u4,4520),jr>0)||(Jc(n,Em,12593),jr))return Lf.subarray(0,jr);if(n>=44032&&n<=55203){const e=n-44032,t=e%588,i=Math.floor(e/588),s=Math.floor(t/28),o=t%28-1;if(i<c4.length?Jc(i,c4,0):4352+i-12593<Em.length&&Jc(4352+i,Em,12593),s<d4.length?Jc(s,d4,0):4449+s-12593<Em.length&&Jc(4449+s-12593,Em,12593),o>=0&&(o<u4.length?Jc(o,u4,0):4520+o-12593<Em.length&&Jc(4520+o-12593,Em,12593)),jr>0)return Lf.subarray(0,jr)}}function Jc(n,e,t){n>=t&&n<t+e.length&&XMe(e[n-t])}function XMe(n){n!==0&&(Lf[jr++]=n&255,n>>8&&(Lf[jr++]=n>>8&255),n>>16&&(Lf[jr++]=n>>16&255))}const c4=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),d4=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),u4=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),Em=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function Jz(...n){return function(e,t){for(let i=0,s=n.length;i<s;i++){const o=n[i](e,t);if(o)return o}return null}}aue.bind(void 0,!1);const nk=aue.bind(void 0,!0);function aue(n,e,t){if(!t||t.length<e.length)return null;let i;return n?i=cz(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}function lue(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t===-1?null:[{start:t,end:t+n.length}]}function cue(n,e){return aH(n.toLowerCase(),e.toLowerCase(),0,0)}function aH(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]===e[i]){let s=null;return(s=aH(n,e,t+1,i+1))?iU({start:i,end:i+1},s):null}return aH(n,e,t,i+1)}function eU(n){return 97<=n&&n<=122}function RA(n){return 65<=n&&n<=90}function tU(n){return 48<=n&&n<=57}function due(n){return n===32||n===9||n===10||n===13}const uue=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(n=>uue.add(n.charCodeAt(0)));function ST(n){return due(n)||uue.has(n)}function TX(n,e){return n===e||ST(n)&&ST(e)}const h4=new Map;function PX(n){if(h4.has(n))return h4.get(n);let e;const t=ZMe(n);return t&&(e=t),h4.set(n,e),e}function hue(n){return eU(n)||RA(n)||tU(n)}function iU(n,e){return e.length===0?e=[n]:n.end===e[0].start?e[0].start=n.start:e.unshift(n),e}function fue(n,e){for(let t=e;t<n.length;t++){const i=n.charCodeAt(t);if(RA(i)||tU(i)||t>0&&!hue(n.charCodeAt(t-1)))return t}return n.length}function lH(n,e,t,i){if(t===n.length)return[];if(i===e.length)return null;if(n[t]!==e[i].toLowerCase())return null;{let s=null,o=i+1;for(s=lH(n,e,t+1,i+1);!s&&(o=fue(e,o))<e.length;)s=lH(n,e,t+1,o),o++;return s===null?null:iU({start:i,end:i+1},s)}}function JMe(n){let e=0,t=0,i=0,s=0,o=0;for(let d=0;d<n.length;d++)o=n.charCodeAt(d),RA(o)&&e++,eU(o)&&t++,hue(o)&&i++,tU(o)&&s++;const r=e/n.length,a=t/n.length,l=i/n.length,c=s/n.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}function e2e(n){const{upperPercent:e,lowerPercent:t}=n;return t===0&&e>.6}function t2e(n){const{upperPercent:e,lowerPercent:t,alphaPercent:i,numericPercent:s}=n;return t>.2&&e<.8&&i>.6&&s<.2}function i2e(n){let e=0,t=0,i=0,s=0;for(let o=0;o<n.length;o++)i=n.charCodeAt(o),RA(i)&&e++,eU(i)&&t++,due(i)&&s++;return(e===0||t===0)&&s===0?n.length<=30:e<=5}function gue(n,e){if(!e||(e=e.trim(),e.length===0)||!i2e(n))return null;e.length>60&&(e=e.substring(0,60));const t=JMe(e);if(!t2e(t)){if(!e2e(t))return null;e=e.toLowerCase()}let i=null,s=0;for(n=n.toLowerCase();s<e.length&&(i=lH(n,e,0,s))===null;)s=fue(e,s+1);return i}function n2e(n,e,t=!1){if(!e||e.length===0)return null;let i=null,s=0;for(n=n.toLowerCase(),e=e.toLowerCase();s<e.length&&(i=cH(n,e,0,s,t),i===null);)s=mue(e,s+1);return i}function cH(n,e,t,i,s){let o=0;if(t===n.length)return[];if(i===e.length)return null;if(!TX(n.charCodeAt(t),e.charCodeAt(i))){const l=PX(n.charCodeAt(t));if(!l)return null;for(let c=0;c<l.length;c++)if(!TX(l[c],e.charCodeAt(i+c)))return null;o+=l.length-1}let r=null,a=i+o+1;if(r=cH(n,e,t+1,a,s),!s)for(;!r&&(a=mue(e,a))<e.length;)r=cH(n,e,t+1,a,s),a++;if(!r)return null;if(n.charCodeAt(t)!==e.charCodeAt(i)){const l=PX(n.charCodeAt(t));if(!l)return r;for(let c=0;c<l.length;c++)if(l[c]!==e.charCodeAt(i+c))return r}return iU({start:i,end:i+o+1},r)}function mue(n,e){for(let t=e;t<n.length;t++)if(ST(n.charCodeAt(t))||t>0&&ST(n.charCodeAt(t-1)))return t;return n.length}const s2e=Jz(nk,gue,lue),o2e=Jz(nk,gue,cue),MX=new lu(1e4);function RX(n,e,t=!1){if(typeof n!="string"||typeof e!="string")return null;let i=MX.get(n);i||(i=new RegExp(zLe(n),"i"),MX.set(n,i));const s=i.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?o2e(n,e):s2e(n,e)}function r2e(n,e){const t=mb(n,n.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?BL(t):null}function a2e(n,e,t,i,s,o){const r=Math.min(13,n.length);for(;t<r;t++){const a=mb(n,e,t,i,s,o,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,o]}function BL(n){if(typeof n>"u")return[];const e=[],t=n[1];for(let i=n.length-1;i>1;i--){const s=n[i]+t,o=e[e.length-1];o&&o.end===s?o.end=s+1:e.push({start:s,end:s+1})}return e}const Kf=128;function nU(){const n=[],e=[];for(let t=0;t<=Kf;t++)e[t]=0;for(let t=0;t<=Kf;t++)n.push(e.slice(0));return n}function pue(n){const e=[];for(let t=0;t<=n;t++)e[t]=0;return e}const _ue=pue(2*Kf),dH=pue(2*Kf),vu=nU(),Nm=nU(),tE=nU();function iE(n,e){if(e<0||e>=n.length)return!1;const t=n.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!fz(t)}}function AX(n,e){if(e<0||e>=n.length)return!1;switch(n.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function TN(n,e,t){return e[n]!==t[n]}function l2e(n,e,t,i,s,o,r=!1){for(;e<t&&s<o;)n[e]===i[s]&&(r&&(_ue[e]=s),e+=1),s+=1;return e===t}var Ic;(function(n){n.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}n.isDefault=e})(Ic||(Ic={}));const Fq=class Fq{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};Fq.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let sk=Fq;function mb(n,e,t,i,s,o,r=sk.default){const a=n.length>Kf?Kf:n.length,l=i.length>Kf?Kf:i.length;if(t>=a||o>=l||a-t>l-o||!l2e(e,t,a,s,o,l,!0))return;c2e(a,l,t,o,e,s);let c=1,d=1,u=t,h=o;const f=[!1];for(c=1,u=t;u<a;c++,u++){const v=_ue[u],w=dH[u],y=u+1<a?dH[u+1]:l;for(d=v-o+1,h=v;h<y;d++,h++){let S=Number.MIN_SAFE_INTEGER,x=!1;h<=w&&(S=d2e(n,e,u,t,i,s,h,l,o,vu[c-1][d-1]===0,f));let k=0;S!==Number.MAX_SAFE_INTEGER&&(x=!0,k=S+Nm[c-1][d-1]);const D=h>v,N=D?Nm[c][d-1]+(vu[c][d-1]>0?-5:0):0,R=h>v+1&&vu[c][d-1]>0,O=R?Nm[c][d-2]+(vu[c][d-2]>0?-5:0):0;if(R&&(!D||O>=N)&&(!x||O>=k))Nm[c][d]=O,tE[c][d]=3,vu[c][d]=0;else if(D&&(!x||N>=k))Nm[c][d]=N,tE[c][d]=2,vu[c][d]=0;else if(x)Nm[c][d]=k,tE[c][d]=1,vu[c][d]=vu[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!r.firstMatchCanBeWeak)return;c--,d--;const g=[Nm[c][d],o];let m=0,_=0;for(;c>=1;){let v=d;do{const w=tE[c][v];if(w===3)v=v-2;else if(w===2)v=v-1;else break}while(v>=1);m>1&&e[t+c-1]===s[o+d-1]&&!TN(v+o-1,i,s)&&m+1>vu[c][v]&&(v=d),v===d?m++:m=1,_||(_=v),c--,d=v-1,g.push(d)}l-o===a&&r.boostFullMatch&&(g[0]+=2);const b=_-a;return g[0]-=b,g}function c2e(n,e,t,i,s,o){let r=n-1,a=e-1;for(;r>=t&&a>=i;)s[r]===o[a]&&(dH[r]=a,r--),a--}function d2e(n,e,t,i,s,o,r,a,l,c,d){if(e[t]!==o[r])return Number.MIN_SAFE_INTEGER;let u=1,h=!1;return r===t-i?u=n[t]===s[r]?7:5:TN(r,s,o)&&(r===0||!TN(r-1,s,o))?(u=n[t]===s[r]?7:5,h=!0):iE(o,r)&&(r===0||!iE(o,r-1))?u=5:(iE(o,r-1)||AX(o,r-1))&&(u=5,h=!0),u>1&&t===i&&(d[0]=!0),h||(h=TN(r,s,o)||iE(o,r-1)||AX(o,r-1)),t===i?r>l&&(u-=h?3:5):c?u+=h?2:0:u+=h?0:1,r+1===a&&(u-=h?3:5),u}function u2e(n,e,t,i,s,o,r){return h2e(n,e,t,i,s,o,!0,r)}function h2e(n,e,t,i,s,o,r,a){let l=mb(n,e,t,i,s,o,a);if(l&&!r)return l;if(n.length>=3){const c=Math.min(7,n.length-1);for(let d=t+1;d<c;d++){const u=f2e(n,d);if(u){const h=mb(u,u.toLowerCase(),t,i,s,o,a);h&&(h[0]-=3,(!l||h[0]>l[0])&&(l=h))}}}return l}function f2e(n,e){if(e+1>=n.length)return;const t=n[e],i=n[e+1];if(t!==i)return n.slice(0,e)+i+t+n.slice(e+2)}const g2e="$(",sU=new RegExp(`\\$\\(${Re.iconNameExpression}(?:${Re.iconModifierExpression})?\\)`,"g"),m2e=new RegExp(`(\\\\)?${sU.source}`,"g");function p2e(n){return n.replace(m2e,(e,t)=>t?e:`\\${e}`)}const _2e=new RegExp(`\\\\${sU.source}`,"g");function b2e(n){return n.replace(_2e,e=>`\\${e}`)}const v2e=new RegExp(`(\\s)?(\\\\)?${sU.source}(\\s)?`,"g");function oU(n){return n.indexOf(g2e)===-1?n:n.replace(v2e,(e,t,i,s)=>i?e:t||s||"")}function w2e(n){return n?n.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const f4=new RegExp(`\\$\\(${Re.iconNameCharacter}+\\)`,"g");function L0(n){f4.lastIndex=0;let e="";const t=[];let i=0;for(;;){const s=f4.lastIndex,o=f4.exec(n),r=n.substring(s,o==null?void 0:o.index);if(r.length>0){e+=r;for(let a=0;a<r.length;a++)t.push(i)}if(!o)break;i+=o[0].length}return{text:e,iconOffsets:t}}function g4(n,e,t=!1){const{text:i,iconOffsets:s}=e;if(!s||s.length===0)return RX(n,i,t);const o=NL(i," "),r=i.length-o.length,a=RX(n,o,t);if(a)for(const l of a){const c=s[l.start+r]+r;l.start+=c,l.end+=c}return a}function ld(n){return qI(n,!0)}class C2e{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:Bx(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===je.file)return QB(ld(e),ld(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(FX(e.authority,t.authority))return QB(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Le.joinPath(e,...t)}basenameOrAuthority(e){return Ya(e)||e.authority}basename(e){return dn.basename(e.path)}extname(e){return dn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===je.file?t=Le.file(Qle(ld(e))).path:(t=dn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===je.file?t=Le.file(Zle(ld(e))).path:t=dn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!FX(e.authority,t.authority))return;if(e.scheme===je.file){const o=wLe(ld(e),ld(t));return vs?Ide(o):o}let i=e.path||"/";const s=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(const r=Math.min(i.length,s.length);o<r&&!(i.charCodeAt(o)!==s.charCodeAt(o)&&i.charAt(o).toLowerCase()!==s.charAt(o).toLowerCase());o++);i=s.substr(0,o)+i.substr(o)}return dn.relative(i,s)}resolvePath(e,t){if(e.scheme===je.file){const i=Le.file(vLe(ld(e),t));return e.with({authority:i.authority,path:i.path})}return t=xTe(t),e.with({path:dn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&ew(e,t)}hasTrailingPathSeparator(e,t=kc){if(e.scheme===je.file){const i=ld(e);return i.length>cX(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=kc){return WX(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=kc){let i=!1;if(e.scheme===je.file){const s=ld(e);i=s!==void 0&&s.length===cX(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;i=s.length===1&&s.charCodeAt(s.length-1)===47}return!i&&!WX(e,t)?e.with({path:e.path+"/"}):e}}const wi=new C2e(()=>!1),ok=wi.isEqual.bind(wi);wi.isEqualOrParent.bind(wi);wi.getComparisonKey.bind(wi);const y2e=wi.basenameOrAuthority.bind(wi),Ya=wi.basename.bind(wi),S2e=wi.extname.bind(wi),AA=wi.dirname.bind(wi),x2e=wi.joinPath.bind(wi),k2e=wi.normalizePath.bind(wi),L2e=wi.relativePath.bind(wi),OX=wi.resolvePath.bind(wi);wi.isAbsolutePath.bind(wi);const FX=wi.isEqualAuthority.bind(wi),WX=wi.hasTrailingPathSeparator.bind(wi);wi.removeTrailingPathSeparator.bind(wi);wi.addTrailingPathSeparator.bind(wi);var Qg;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&i.set(a,l)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&i.set(n.META_DATA_MIME,o),i}n.parseMetaData=e})(Qg||(Qg={}));class Ds{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw ja("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=E2e(this.supportThemeIcons?p2e(e):e).replace(/([ \t]+)/g,(i,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${N2e(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(ua(t),"g");return e.replace(i,(s,o)=>e.charAt(o-1)!=="\\"?`\\${s}`:s)}}function my(n){return Tc(n)?!n.value:Array.isArray(n)?n.every(my):!0}function Tc(n){return n instanceof Ds?!0:n&&typeof n=="object"?typeof n.value=="string"&&(typeof n.isTrusted=="boolean"||typeof n.isTrusted=="object"||n.isTrusted===void 0)&&(typeof n.supportThemeIcons=="boolean"||n.supportThemeIcons===void 0):!1}function D2e(n,e){return n===e?!0:!n||!e?!1:n.value===e.value&&n.isTrusted===e.isTrusted&&n.supportThemeIcons===e.supportThemeIcons&&n.supportHtml===e.supportHtml&&(n.baseUri===e.baseUri||!!n.baseUri&&!!e.baseUri&&ok(Le.from(n.baseUri),Le.from(e.baseUri)))}function E2e(n){return n.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function N2e(n,e){var s;const t=((s=n.match(/^`+/gm))==null?void 0:s.reduce((o,r)=>o.length>r.length?o:r).length)??0,i=t>=3?t+1:3;return[`${"`".repeat(i)}${e}`,n,`${"`".repeat(i)}`].join(`
`)}function nE(n){return n.replace(/"/g,"&quot;")}function m4(n){return n&&n.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function I2e(n){const e=[],t=n.split("|").map(s=>s.trim());n=t[0];const i=t[1];if(i){const s=/height=(\d+)/.exec(i),o=/width=(\d+)/.exec(i),r=s?s[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:n,dimensions:e}}class rU{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const uH=new rU("id#");let Ms={};(function(){function n(e,t){t(Ms)}n.amd=!0,function(e,t){typeof n=="function"&&n.amd?n(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function i(pt){e.defaults=pt}const s=/[&<>"']/,o=new RegExp(s.source,"g"),r=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(r.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=pt=>l[pt];function d(pt,A){if(A){if(s.test(pt))return pt.replace(o,c)}else if(r.test(pt))return pt.replace(a,c);return pt}const u=/(^|[^\[])\^/g;function h(pt,A){let W=typeof pt=="string"?pt:pt.source;A=A||"";const V={replace:($,Y)=>{let oe=typeof Y=="string"?Y:Y.source;return oe=oe.replace(u,"$1"),W=W.replace($,oe),V},getRegex:()=>new RegExp(W,A)};return V}function f(pt){try{pt=encodeURI(pt).replace(/%25/g,"%")}catch{return null}return pt}const g={exec:()=>null};function m(pt,A){const W=pt.replace(/\|/g,(Y,oe,he)=>{let Ie=!1,Oe=oe;for(;--Oe>=0&&he[Oe]==="\\";)Ie=!Ie;return Ie?"|":" |"}),V=W.split(/ \|/);let $=0;if(V[0].trim()||V.shift(),V.length>0&&!V[V.length-1].trim()&&V.pop(),A)if(V.length>A)V.splice(A);else for(;V.length<A;)V.push("");for(;$<V.length;$++)V[$]=V[$].trim().replace(/\\\|/g,"|");return V}function _(pt,A,W){const V=pt.length;if(V===0)return"";let $=0;for(;$<V;){const Y=pt.charAt(V-$-1);if(Y===A&&!W)$++;else if(Y!==A&&W)$++;else break}return pt.slice(0,V-$)}function b(pt,A){if(pt.indexOf(A[1])===-1)return-1;let W=0;for(let V=0;V<pt.length;V++)if(pt[V]==="\\")V++;else if(pt[V]===A[0])W++;else if(pt[V]===A[1]&&(W--,W<0))return V;return-1}function v(pt,A,W,V){const $=A.href,Y=A.title?d(A.title):null,oe=pt[1].replace(/\\([\[\]])/g,"$1");if(pt[0].charAt(0)!=="!"){V.state.inLink=!0;const he={type:"link",raw:W,href:$,title:Y,text:oe,tokens:V.inlineTokens(oe)};return V.state.inLink=!1,he}return{type:"image",raw:W,href:$,title:Y,text:d(oe)}}function w(pt,A){const W=pt.match(/^(\s+)(?:```)/);if(W===null)return A;const V=W[1];return A.split(`
`).map($=>{const Y=$.match(/^\s+/);if(Y===null)return $;const[oe]=Y;return oe.length>=V.length?$.slice(V.length):$}).join(`
`)}class y{constructor(A){hn(this,"options");hn(this,"rules");hn(this,"lexer");this.options=A||e.defaults}space(A){const W=this.rules.block.newline.exec(A);if(W&&W[0].length>0)return{type:"space",raw:W[0]}}code(A){const W=this.rules.block.code.exec(A);if(W){const V=W[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:W[0],codeBlockStyle:"indented",text:this.options.pedantic?V:_(V,`
`)}}}fences(A){const W=this.rules.block.fences.exec(A);if(W){const V=W[0],$=w(V,W[3]||"");return{type:"code",raw:V,lang:W[2]?W[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):W[2],text:$}}}heading(A){const W=this.rules.block.heading.exec(A);if(W){let V=W[2].trim();if(/#$/.test(V)){const $=_(V,"#");(this.options.pedantic||!$||/ $/.test($))&&(V=$.trim())}return{type:"heading",raw:W[0],depth:W[1].length,text:V,tokens:this.lexer.inline(V)}}}hr(A){const W=this.rules.block.hr.exec(A);if(W)return{type:"hr",raw:_(W[0],`
`)}}blockquote(A){const W=this.rules.block.blockquote.exec(A);if(W){let V=_(W[0],`
`).split(`
`),$="",Y="";const oe=[];for(;V.length>0;){let he=!1;const Ie=[];let Oe;for(Oe=0;Oe<V.length;Oe++)if(/^ {0,3}>/.test(V[Oe]))Ie.push(V[Oe]),he=!0;else if(!he)Ie.push(V[Oe]);else break;V=V.slice(Oe);const ht=Ie.join(`
`),Vt=ht.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");$=$?`${$}
${ht}`:ht,Y=Y?`${Y}
${Vt}`:Vt;const Kt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(Vt,oe,!0),this.lexer.state.top=Kt,V.length===0)break;const Ai=oe[oe.length-1];if((Ai==null?void 0:Ai.type)==="code")break;if((Ai==null?void 0:Ai.type)==="blockquote"){const Oi=Ai,As=Oi.raw+`
`+V.join(`
`),No=this.blockquote(As);oe[oe.length-1]=No,$=$.substring(0,$.length-Oi.raw.length)+No.raw,Y=Y.substring(0,Y.length-Oi.text.length)+No.text;break}else if((Ai==null?void 0:Ai.type)==="list"){const Oi=Ai,As=Oi.raw+`
`+V.join(`
`),No=this.list(As);oe[oe.length-1]=No,$=$.substring(0,$.length-Ai.raw.length)+No.raw,Y=Y.substring(0,Y.length-Oi.raw.length)+No.raw,V=As.substring(oe[oe.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:$,tokens:oe,text:Y}}}list(A){let W=this.rules.block.list.exec(A);if(W){let V=W[1].trim();const $=V.length>1,Y={type:"list",raw:"",ordered:$,start:$?+V.slice(0,-1):"",loose:!1,items:[]};V=$?`\\d{1,9}\\${V.slice(-1)}`:`\\${V}`,this.options.pedantic&&(V=$?V:"[*+-]");const oe=new RegExp(`^( {0,3}${V})((?:[	 ][^\\n]*)?(?:\\n|$))`);let he=!1;for(;A;){let Ie=!1,Oe="",ht="";if(!(W=oe.exec(A))||this.rules.block.hr.test(A))break;Oe=W[0],A=A.substring(Oe.length);let Vt=W[2].split(`
`,1)[0].replace(/^\t+/,Yh=>" ".repeat(3*Yh.length)),Kt=A.split(`
`,1)[0],Ai=!Vt.trim(),Oi=0;if(this.options.pedantic?(Oi=2,ht=Vt.trimStart()):Ai?Oi=W[1].length+1:(Oi=W[2].search(/[^ ]/),Oi=Oi>4?1:Oi,ht=Vt.slice(Oi),Oi+=W[1].length),Ai&&/^ *$/.test(Kt)&&(Oe+=Kt+`
`,A=A.substring(Kt.length+1),Ie=!0),!Ie){const Yh=new RegExp(`^ {0,${Math.min(3,Oi-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Xe=new RegExp(`^ {0,${Math.min(3,Oi-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ee=new RegExp(`^ {0,${Math.min(3,Oi-1)}}(?:\`\`\`|~~~)`),Ne=new RegExp(`^ {0,${Math.min(3,Oi-1)}}#`);for(;A;){const Ue=A.split(`
`,1)[0];if(Kt=Ue,this.options.pedantic&&(Kt=Kt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ee.test(Kt)||Ne.test(Kt)||Yh.test(Kt)||Xe.test(A))break;if(Kt.search(/[^ ]/)>=Oi||!Kt.trim())ht+=`
`+Kt.slice(Oi);else{if(Ai||Vt.search(/[^ ]/)>=4||ee.test(Vt)||Ne.test(Vt)||Xe.test(Vt))break;ht+=`
`+Kt}!Ai&&!Kt.trim()&&(Ai=!0),Oe+=Ue+`
`,A=A.substring(Ue.length+1),Vt=Kt.slice(Oi)}}Y.loose||(he?Y.loose=!0:/\n *\n *$/.test(Oe)&&(he=!0));let As=null,No;this.options.gfm&&(As=/^\[[ xX]\] /.exec(ht),As&&(No=As[0]!=="[ ] ",ht=ht.replace(/^\[[ xX]\] +/,""))),Y.items.push({type:"list_item",raw:Oe,task:!!As,checked:No,loose:!1,text:ht,tokens:[]}),Y.raw+=Oe}Y.items[Y.items.length-1].raw=Y.items[Y.items.length-1].raw.trimEnd(),Y.items[Y.items.length-1].text=Y.items[Y.items.length-1].text.trimEnd(),Y.raw=Y.raw.trimEnd();for(let Ie=0;Ie<Y.items.length;Ie++)if(this.lexer.state.top=!1,Y.items[Ie].tokens=this.lexer.blockTokens(Y.items[Ie].text,[]),!Y.loose){const Oe=Y.items[Ie].tokens.filter(Vt=>Vt.type==="space"),ht=Oe.length>0&&Oe.some(Vt=>/\n.*\n/.test(Vt.raw));Y.loose=ht}if(Y.loose)for(let Ie=0;Ie<Y.items.length;Ie++)Y.items[Ie].loose=!0;return Y}}html(A){const W=this.rules.block.html.exec(A);if(W)return{type:"html",block:!0,raw:W[0],pre:W[1]==="pre"||W[1]==="script"||W[1]==="style",text:W[0]}}def(A){const W=this.rules.block.def.exec(A);if(W){const V=W[1].toLowerCase().replace(/\s+/g," "),$=W[2]?W[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",Y=W[3]?W[3].substring(1,W[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):W[3];return{type:"def",tag:V,raw:W[0],href:$,title:Y}}}table(A){const W=this.rules.block.table.exec(A);if(!W||!/[:|]/.test(W[2]))return;const V=m(W[1]),$=W[2].replace(/^\||\| *$/g,"").split("|"),Y=W[3]&&W[3].trim()?W[3].replace(/\n[ \t]*$/,"").split(`
`):[],oe={type:"table",raw:W[0],header:[],align:[],rows:[]};if(V.length===$.length){for(const he of $)/^ *-+: *$/.test(he)?oe.align.push("right"):/^ *:-+: *$/.test(he)?oe.align.push("center"):/^ *:-+ *$/.test(he)?oe.align.push("left"):oe.align.push(null);for(let he=0;he<V.length;he++)oe.header.push({text:V[he],tokens:this.lexer.inline(V[he]),header:!0,align:oe.align[he]});for(const he of Y)oe.rows.push(m(he,oe.header.length).map((Ie,Oe)=>({text:Ie,tokens:this.lexer.inline(Ie),header:!1,align:oe.align[Oe]})));return oe}}lheading(A){const W=this.rules.block.lheading.exec(A);if(W)return{type:"heading",raw:W[0],depth:W[2].charAt(0)==="="?1:2,text:W[1],tokens:this.lexer.inline(W[1])}}paragraph(A){const W=this.rules.block.paragraph.exec(A);if(W){const V=W[1].charAt(W[1].length-1)===`
`?W[1].slice(0,-1):W[1];return{type:"paragraph",raw:W[0],text:V,tokens:this.lexer.inline(V)}}}text(A){const W=this.rules.block.text.exec(A);if(W)return{type:"text",raw:W[0],text:W[0],tokens:this.lexer.inline(W[0])}}escape(A){const W=this.rules.inline.escape.exec(A);if(W)return{type:"escape",raw:W[0],text:d(W[1])}}tag(A){const W=this.rules.inline.tag.exec(A);if(W)return!this.lexer.state.inLink&&/^<a /i.test(W[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(W[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(W[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(W[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:W[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:W[0]}}link(A){const W=this.rules.inline.link.exec(A);if(W){const V=W[2].trim();if(!this.options.pedantic&&/^</.test(V)){if(!/>$/.test(V))return;const oe=_(V.slice(0,-1),"\\");if((V.length-oe.length)%2===0)return}else{const oe=b(W[2],"()");if(oe>-1){const Ie=(W[0].indexOf("!")===0?5:4)+W[1].length+oe;W[2]=W[2].substring(0,oe),W[0]=W[0].substring(0,Ie).trim(),W[3]=""}}let $=W[2],Y="";if(this.options.pedantic){const oe=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec($);oe&&($=oe[1],Y=oe[3])}else Y=W[3]?W[3].slice(1,-1):"";return $=$.trim(),/^</.test($)&&(this.options.pedantic&&!/>$/.test(V)?$=$.slice(1):$=$.slice(1,-1)),v(W,{href:$&&$.replace(this.rules.inline.anyPunctuation,"$1"),title:Y&&Y.replace(this.rules.inline.anyPunctuation,"$1")},W[0],this.lexer)}}reflink(A,W){let V;if((V=this.rules.inline.reflink.exec(A))||(V=this.rules.inline.nolink.exec(A))){const $=(V[2]||V[1]).replace(/\s+/g," "),Y=W[$.toLowerCase()];if(!Y){const oe=V[0].charAt(0);return{type:"text",raw:oe,text:oe}}return v(V,Y,V[0],this.lexer)}}emStrong(A,W,V=""){let $=this.rules.inline.emStrongLDelim.exec(A);if(!$||$[3]&&V.match(/[\p{L}\p{N}]/u))return;if(!($[1]||$[2]||"")||!V||this.rules.inline.punctuation.exec(V)){const oe=[...$[0]].length-1;let he,Ie,Oe=oe,ht=0;const Vt=$[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Vt.lastIndex=0,W=W.slice(-1*A.length+oe);($=Vt.exec(W))!=null;){if(he=$[1]||$[2]||$[3]||$[4]||$[5]||$[6],!he)continue;if(Ie=[...he].length,$[3]||$[4]){Oe+=Ie;continue}else if(($[5]||$[6])&&oe%3&&!((oe+Ie)%3)){ht+=Ie;continue}if(Oe-=Ie,Oe>0)continue;Ie=Math.min(Ie,Ie+Oe+ht);const Kt=[...$[0]][0].length,Ai=A.slice(0,oe+$.index+Kt+Ie);if(Math.min(oe,Ie)%2){const As=Ai.slice(1,-1);return{type:"em",raw:Ai,text:As,tokens:this.lexer.inlineTokens(As)}}const Oi=Ai.slice(2,-2);return{type:"strong",raw:Ai,text:Oi,tokens:this.lexer.inlineTokens(Oi)}}}}codespan(A){const W=this.rules.inline.code.exec(A);if(W){let V=W[2].replace(/\n/g," ");const $=/[^ ]/.test(V),Y=/^ /.test(V)&&/ $/.test(V);return $&&Y&&(V=V.substring(1,V.length-1)),V=d(V,!0),{type:"codespan",raw:W[0],text:V}}}br(A){const W=this.rules.inline.br.exec(A);if(W)return{type:"br",raw:W[0]}}del(A){const W=this.rules.inline.del.exec(A);if(W)return{type:"del",raw:W[0],text:W[2],tokens:this.lexer.inlineTokens(W[2])}}autolink(A){const W=this.rules.inline.autolink.exec(A);if(W){let V,$;return W[2]==="@"?(V=d(W[1]),$="mailto:"+V):(V=d(W[1]),$=V),{type:"link",raw:W[0],text:V,href:$,tokens:[{type:"text",raw:V,text:V}]}}}url(A){var V;let W;if(W=this.rules.inline.url.exec(A)){let $,Y;if(W[2]==="@")$=d(W[0]),Y="mailto:"+$;else{let oe;do oe=W[0],W[0]=((V=this.rules.inline._backpedal.exec(W[0]))==null?void 0:V[0])??"";while(oe!==W[0]);$=d(W[0]),W[1]==="www."?Y="http://"+W[0]:Y=W[0]}return{type:"link",raw:W[0],text:$,href:Y,tokens:[{type:"text",raw:$,text:$}]}}}inlineText(A){const W=this.rules.inline.text.exec(A);if(W){let V;return this.lexer.state.inRawBlock?V=W[0]:V=d(W[0]),{type:"text",raw:W[0],text:V}}}}const S=/^(?: *(?:\n|$))+/,x=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,k=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,D=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,N=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,R=/(?:[*+-]|\d{1,9}[.)])/,O=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,R).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),B=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,z=/^[^\n]+/,F=/(?!\s*\])(?:\\.|[^\[\]\\])+/,K=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",F).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Z=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,R).getRegex(),re="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",q=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,J=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",q).replace("tag",re).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ge=h(B).replace("hr",D).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",re).getRegex(),Qe={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ge).getRegex(),code:x,def:K,fences:k,heading:N,hr:D,html:J,lheading:O,list:Z,newline:S,paragraph:ge,table:g,text:z},Me=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",D).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",re).getRegex(),Ze={...Qe,table:Me,paragraph:h(B).replace("hr",D).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Me).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",re).getRegex()},at={...Qe,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",q).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(B).replace("hr",D).replace("heading",` *#{1,6} *[^
]`).replace("lheading",O).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Et=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ve=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Tt=/^( {2,}|\\)\n(?!\s*$)/,Ei=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Wt="\\p{P}\\p{S}",qt=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Wt).getRegex(),ut=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,qi=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Wt).getRegex(),Ln=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Wt).getRegex(),Pr=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Wt).getRegex(),Mr=h(/\\([punct])/,"gu").replace(/punct/g,Wt).getRegex(),Xs=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Vl=h(q).replace("(?:-->|$)","-->").getRegex(),Rr=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Vl).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Gc=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xm=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Gc).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),km=h(/^!?\[(label)\]\[(ref)\]/).replace("label",Gc).replace("ref",F).getRegex(),gu=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",F).getRegex(),Yc=h("reflink|nolink(?!\\()","g").replace("reflink",km).replace("nolink",gu).getRegex(),Ca={_backpedal:g,anyPunctuation:Mr,autolink:Xs,blockSkip:ut,br:Tt,code:Ve,del:g,emStrongLDelim:qi,emStrongRDelimAst:Ln,emStrongRDelimUnd:Pr,escape:Et,link:xm,nolink:gu,punctuation:qt,reflink:km,reflinkSearch:Yc,tag:Rr,text:Ei,url:g},zl={...Ca,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",Gc).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Gc).getRegex()},mu={...Ca,escape:h(Et).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Lm={...mu,br:h(Tt).replace("{2,}","*").getRegex(),text:h(mu.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Zc={normal:Qe,gfm:Ze,pedantic:at},sl={normal:Ca,gfm:mu,breaks:Lm,pedantic:zl};class Js{constructor(A){hn(this,"tokens");hn(this,"options");hn(this,"state");hn(this,"tokenizer");hn(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=A||e.defaults,this.options.tokenizer=this.options.tokenizer||new y,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const W={block:Zc.normal,inline:sl.normal};this.options.pedantic?(W.block=Zc.pedantic,W.inline=sl.pedantic):this.options.gfm&&(W.block=Zc.gfm,this.options.breaks?W.inline=sl.breaks:W.inline=sl.gfm),this.tokenizer.rules=W}static get rules(){return{block:Zc,inline:sl}}static lex(A,W){return new Js(W).lex(A)}static lexInline(A,W){return new Js(W).inlineTokens(A)}lex(A){A=A.replace(/\r\n|\r/g,`
`),this.blockTokens(A,this.tokens);for(let W=0;W<this.inlineQueue.length;W++){const V=this.inlineQueue[W];this.inlineTokens(V.src,V.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(A,W=[],V=!1){this.options.pedantic?A=A.replace(/\t/g,"    ").replace(/^ +$/gm,""):A=A.replace(/^( *)(\t+)/gm,(he,Ie,Oe)=>Ie+"    ".repeat(Oe.length));let $,Y,oe;for(;A;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(he=>($=he.call({lexer:this},A,W))?(A=A.substring($.raw.length),W.push($),!0):!1))){if($=this.tokenizer.space(A)){A=A.substring($.raw.length),$.raw.length===1&&W.length>0?W[W.length-1].raw+=`
`:W.push($);continue}if($=this.tokenizer.code(A)){A=A.substring($.raw.length),Y=W[W.length-1],Y&&(Y.type==="paragraph"||Y.type==="text")?(Y.raw+=`
`+$.raw,Y.text+=`
`+$.text,this.inlineQueue[this.inlineQueue.length-1].src=Y.text):W.push($);continue}if($=this.tokenizer.fences(A)){A=A.substring($.raw.length),W.push($);continue}if($=this.tokenizer.heading(A)){A=A.substring($.raw.length),W.push($);continue}if($=this.tokenizer.hr(A)){A=A.substring($.raw.length),W.push($);continue}if($=this.tokenizer.blockquote(A)){A=A.substring($.raw.length),W.push($);continue}if($=this.tokenizer.list(A)){A=A.substring($.raw.length),W.push($);continue}if($=this.tokenizer.html(A)){A=A.substring($.raw.length),W.push($);continue}if($=this.tokenizer.def(A)){A=A.substring($.raw.length),Y=W[W.length-1],Y&&(Y.type==="paragraph"||Y.type==="text")?(Y.raw+=`
`+$.raw,Y.text+=`
`+$.raw,this.inlineQueue[this.inlineQueue.length-1].src=Y.text):this.tokens.links[$.tag]||(this.tokens.links[$.tag]={href:$.href,title:$.title});continue}if($=this.tokenizer.table(A)){A=A.substring($.raw.length),W.push($);continue}if($=this.tokenizer.lheading(A)){A=A.substring($.raw.length),W.push($);continue}if(oe=A,this.options.extensions&&this.options.extensions.startBlock){let he=1/0;const Ie=A.slice(1);let Oe;this.options.extensions.startBlock.forEach(ht=>{Oe=ht.call({lexer:this},Ie),typeof Oe=="number"&&Oe>=0&&(he=Math.min(he,Oe))}),he<1/0&&he>=0&&(oe=A.substring(0,he+1))}if(this.state.top&&($=this.tokenizer.paragraph(oe))){Y=W[W.length-1],V&&(Y==null?void 0:Y.type)==="paragraph"?(Y.raw+=`
`+$.raw,Y.text+=`
`+$.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Y.text):W.push($),V=oe.length!==A.length,A=A.substring($.raw.length);continue}if($=this.tokenizer.text(A)){A=A.substring($.raw.length),Y=W[W.length-1],Y&&Y.type==="text"?(Y.raw+=`
`+$.raw,Y.text+=`
`+$.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Y.text):W.push($);continue}if(A){const he="Infinite loop on byte: "+A.charCodeAt(0);if(this.options.silent){console.error(he);break}else throw new Error(he)}}return this.state.top=!0,W}inline(A,W=[]){return this.inlineQueue.push({src:A,tokens:W}),W}inlineTokens(A,W=[]){let V,$,Y,oe=A,he,Ie,Oe;if(this.tokens.links){const ht=Object.keys(this.tokens.links);if(ht.length>0)for(;(he=this.tokenizer.rules.inline.reflinkSearch.exec(oe))!=null;)ht.includes(he[0].slice(he[0].lastIndexOf("[")+1,-1))&&(oe=oe.slice(0,he.index)+"["+"a".repeat(he[0].length-2)+"]"+oe.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(he=this.tokenizer.rules.inline.blockSkip.exec(oe))!=null;)oe=oe.slice(0,he.index)+"["+"a".repeat(he[0].length-2)+"]"+oe.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(he=this.tokenizer.rules.inline.anyPunctuation.exec(oe))!=null;)oe=oe.slice(0,he.index)+"++"+oe.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;A;)if(Ie||(Oe=""),Ie=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(ht=>(V=ht.call({lexer:this},A,W))?(A=A.substring(V.raw.length),W.push(V),!0):!1))){if(V=this.tokenizer.escape(A)){A=A.substring(V.raw.length),W.push(V);continue}if(V=this.tokenizer.tag(A)){A=A.substring(V.raw.length),$=W[W.length-1],$&&V.type==="text"&&$.type==="text"?($.raw+=V.raw,$.text+=V.text):W.push(V);continue}if(V=this.tokenizer.link(A)){A=A.substring(V.raw.length),W.push(V);continue}if(V=this.tokenizer.reflink(A,this.tokens.links)){A=A.substring(V.raw.length),$=W[W.length-1],$&&V.type==="text"&&$.type==="text"?($.raw+=V.raw,$.text+=V.text):W.push(V);continue}if(V=this.tokenizer.emStrong(A,oe,Oe)){A=A.substring(V.raw.length),W.push(V);continue}if(V=this.tokenizer.codespan(A)){A=A.substring(V.raw.length),W.push(V);continue}if(V=this.tokenizer.br(A)){A=A.substring(V.raw.length),W.push(V);continue}if(V=this.tokenizer.del(A)){A=A.substring(V.raw.length),W.push(V);continue}if(V=this.tokenizer.autolink(A)){A=A.substring(V.raw.length),W.push(V);continue}if(!this.state.inLink&&(V=this.tokenizer.url(A))){A=A.substring(V.raw.length),W.push(V);continue}if(Y=A,this.options.extensions&&this.options.extensions.startInline){let ht=1/0;const Vt=A.slice(1);let Kt;this.options.extensions.startInline.forEach(Ai=>{Kt=Ai.call({lexer:this},Vt),typeof Kt=="number"&&Kt>=0&&(ht=Math.min(ht,Kt))}),ht<1/0&&ht>=0&&(Y=A.substring(0,ht+1))}if(V=this.tokenizer.inlineText(Y)){A=A.substring(V.raw.length),V.raw.slice(-1)!=="_"&&(Oe=V.raw.slice(-1)),Ie=!0,$=W[W.length-1],$&&$.type==="text"?($.raw+=V.raw,$.text+=V.text):W.push(V);continue}if(A){const ht="Infinite loop on byte: "+A.charCodeAt(0);if(this.options.silent){console.error(ht);break}else throw new Error(ht)}}return W}}class ya{constructor(A){hn(this,"options");hn(this,"parser");this.options=A||e.defaults}space(A){return""}code({text:A,lang:W,escaped:V}){var oe;const $=(oe=(W||"").match(/^\S*/))==null?void 0:oe[0],Y=A.replace(/\n$/,"")+`
`;return $?'<pre><code class="language-'+d($)+'">'+(V?Y:d(Y,!0))+`</code></pre>
`:"<pre><code>"+(V?Y:d(Y,!0))+`</code></pre>
`}blockquote({tokens:A}){return`<blockquote>
${this.parser.parse(A)}</blockquote>
`}html({text:A}){return A}heading({tokens:A,depth:W}){return`<h${W}>${this.parser.parseInline(A)}</h${W}>
`}hr(A){return`<hr>
`}list(A){const W=A.ordered,V=A.start;let $="";for(let he=0;he<A.items.length;he++){const Ie=A.items[he];$+=this.listitem(Ie)}const Y=W?"ol":"ul",oe=W&&V!==1?' start="'+V+'"':"";return"<"+Y+oe+`>
`+$+"</"+Y+`>
`}listitem(A){let W="";if(A.task){const V=this.checkbox({checked:!!A.checked});A.loose?A.tokens.length>0&&A.tokens[0].type==="paragraph"?(A.tokens[0].text=V+" "+A.tokens[0].text,A.tokens[0].tokens&&A.tokens[0].tokens.length>0&&A.tokens[0].tokens[0].type==="text"&&(A.tokens[0].tokens[0].text=V+" "+A.tokens[0].tokens[0].text)):A.tokens.unshift({type:"text",raw:V+" ",text:V+" "}):W+=V+" "}return W+=this.parser.parse(A.tokens,!!A.loose),`<li>${W}</li>
`}checkbox({checked:A}){return"<input "+(A?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:A}){return`<p>${this.parser.parseInline(A)}</p>
`}table(A){let W="",V="";for(let Y=0;Y<A.header.length;Y++)V+=this.tablecell(A.header[Y]);W+=this.tablerow({text:V});let $="";for(let Y=0;Y<A.rows.length;Y++){const oe=A.rows[Y];V="";for(let he=0;he<oe.length;he++)V+=this.tablecell(oe[he]);$+=this.tablerow({text:V})}return $&&($=`<tbody>${$}</tbody>`),`<table>
<thead>
`+W+`</thead>
`+$+`</table>
`}tablerow({text:A}){return`<tr>
${A}</tr>
`}tablecell(A){const W=this.parser.parseInline(A.tokens),V=A.header?"th":"td";return(A.align?`<${V} align="${A.align}">`:`<${V}>`)+W+`</${V}>
`}strong({tokens:A}){return`<strong>${this.parser.parseInline(A)}</strong>`}em({tokens:A}){return`<em>${this.parser.parseInline(A)}</em>`}codespan({text:A}){return`<code>${A}</code>`}br(A){return"<br>"}del({tokens:A}){return`<del>${this.parser.parseInline(A)}</del>`}link({href:A,title:W,tokens:V}){const $=this.parser.parseInline(V),Y=f(A);if(Y===null)return $;A=Y;let oe='<a href="'+A+'"';return W&&(oe+=' title="'+W+'"'),oe+=">"+$+"</a>",oe}image({href:A,title:W,text:V}){const $=f(A);if($===null)return V;A=$;let Y=`<img src="${A}" alt="${V}"`;return W&&(Y+=` title="${W}"`),Y+=">",Y}text(A){return"tokens"in A&&A.tokens?this.parser.parseInline(A.tokens):A.text}}class ol{strong({text:A}){return A}em({text:A}){return A}codespan({text:A}){return A}del({text:A}){return A}html({text:A}){return A}text({text:A}){return A}link({text:A}){return""+A}image({text:A}){return""+A}br(){return""}}class Cn{constructor(A){hn(this,"options");hn(this,"renderer");hn(this,"textRenderer");this.options=A||e.defaults,this.options.renderer=this.options.renderer||new ya,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ol}static parse(A,W){return new Cn(W).parse(A)}static parseInline(A,W){return new Cn(W).parseInline(A)}parse(A,W=!0){let V="";for(let $=0;$<A.length;$++){const Y=A[$];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Y.type]){const he=Y,Ie=this.options.extensions.renderers[he.type].call({parser:this},he);if(Ie!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(he.type)){V+=Ie||"";continue}}const oe=Y;switch(oe.type){case"space":{V+=this.renderer.space(oe);continue}case"hr":{V+=this.renderer.hr(oe);continue}case"heading":{V+=this.renderer.heading(oe);continue}case"code":{V+=this.renderer.code(oe);continue}case"table":{V+=this.renderer.table(oe);continue}case"blockquote":{V+=this.renderer.blockquote(oe);continue}case"list":{V+=this.renderer.list(oe);continue}case"html":{V+=this.renderer.html(oe);continue}case"paragraph":{V+=this.renderer.paragraph(oe);continue}case"text":{let he=oe,Ie=this.renderer.text(he);for(;$+1<A.length&&A[$+1].type==="text";)he=A[++$],Ie+=`
`+this.renderer.text(he);W?V+=this.renderer.paragraph({type:"paragraph",raw:Ie,text:Ie,tokens:[{type:"text",raw:Ie,text:Ie}]}):V+=Ie;continue}default:{const he='Token with "'+oe.type+'" type was not found.';if(this.options.silent)return console.error(he),"";throw new Error(he)}}}return V}parseInline(A,W){W=W||this.renderer;let V="";for(let $=0;$<A.length;$++){const Y=A[$];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Y.type]){const he=this.options.extensions.renderers[Y.type].call({parser:this},Y);if(he!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Y.type)){V+=he||"";continue}}const oe=Y;switch(oe.type){case"escape":{V+=W.text(oe);break}case"html":{V+=W.html(oe);break}case"link":{V+=W.link(oe);break}case"image":{V+=W.image(oe);break}case"strong":{V+=W.strong(oe);break}case"em":{V+=W.em(oe);break}case"codespan":{V+=W.codespan(oe);break}case"br":{V+=W.br(oe);break}case"del":{V+=W.del(oe);break}case"text":{V+=W.text(oe);break}default:{const he='Token with "'+oe.type+'" type was not found.';if(this.options.silent)return console.error(he),"";throw new Error(he)}}}return V}}class Eo{constructor(A){hn(this,"options");this.options=A||e.defaults}preprocess(A){return A}postprocess(A){return A}processAllTokens(A){return A}}hn(Eo,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class pu{constructor(...A){hn(this,"defaults",t());hn(this,"options",this.setOptions);hn(this,"parse",this.parseMarkdown(Js.lex,Cn.parse));hn(this,"parseInline",this.parseMarkdown(Js.lexInline,Cn.parseInline));hn(this,"Parser",Cn);hn(this,"Renderer",ya);hn(this,"TextRenderer",ol);hn(this,"Lexer",Js);hn(this,"Tokenizer",y);hn(this,"Hooks",Eo);this.use(...A)}walkTokens(A,W){var $,Y;let V=[];for(const oe of A)switch(V=V.concat(W.call(this,oe)),oe.type){case"table":{const he=oe;for(const Ie of he.header)V=V.concat(this.walkTokens(Ie.tokens,W));for(const Ie of he.rows)for(const Oe of Ie)V=V.concat(this.walkTokens(Oe.tokens,W));break}case"list":{const he=oe;V=V.concat(this.walkTokens(he.items,W));break}default:{const he=oe;(Y=($=this.defaults.extensions)==null?void 0:$.childTokens)!=null&&Y[he.type]?this.defaults.extensions.childTokens[he.type].forEach(Ie=>{const Oe=he[Ie].flat(1/0);V=V.concat(this.walkTokens(Oe,W))}):he.tokens&&(V=V.concat(this.walkTokens(he.tokens,W)))}}return V}use(...A){const W=this.defaults.extensions||{renderers:{},childTokens:{}};return A.forEach(V=>{const $={...V};if($.async=this.defaults.async||$.async||!1,V.extensions&&(V.extensions.forEach(Y=>{if(!Y.name)throw new Error("extension name required");if("renderer"in Y){const oe=W.renderers[Y.name];oe?W.renderers[Y.name]=function(...he){let Ie=Y.renderer.apply(this,he);return Ie===!1&&(Ie=oe.apply(this,he)),Ie}:W.renderers[Y.name]=Y.renderer}if("tokenizer"in Y){if(!Y.level||Y.level!=="block"&&Y.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const oe=W[Y.level];oe?oe.unshift(Y.tokenizer):W[Y.level]=[Y.tokenizer],Y.start&&(Y.level==="block"?W.startBlock?W.startBlock.push(Y.start):W.startBlock=[Y.start]:Y.level==="inline"&&(W.startInline?W.startInline.push(Y.start):W.startInline=[Y.start]))}"childTokens"in Y&&Y.childTokens&&(W.childTokens[Y.name]=Y.childTokens)}),$.extensions=W),V.renderer){const Y=this.defaults.renderer||new ya(this.defaults);for(const oe in V.renderer){if(!(oe in Y))throw new Error(`renderer '${oe}' does not exist`);if(["options","parser"].includes(oe))continue;const he=oe,Ie=V.renderer[he],Oe=Y[he];Y[he]=(...ht)=>{let Vt=Ie.apply(Y,ht);return Vt===!1&&(Vt=Oe.apply(Y,ht)),Vt||""}}$.renderer=Y}if(V.tokenizer){const Y=this.defaults.tokenizer||new y(this.defaults);for(const oe in V.tokenizer){if(!(oe in Y))throw new Error(`tokenizer '${oe}' does not exist`);if(["options","rules","lexer"].includes(oe))continue;const he=oe,Ie=V.tokenizer[he],Oe=Y[he];Y[he]=(...ht)=>{let Vt=Ie.apply(Y,ht);return Vt===!1&&(Vt=Oe.apply(Y,ht)),Vt}}$.tokenizer=Y}if(V.hooks){const Y=this.defaults.hooks||new Eo;for(const oe in V.hooks){if(!(oe in Y))throw new Error(`hook '${oe}' does not exist`);if(oe==="options")continue;const he=oe,Ie=V.hooks[he],Oe=Y[he];Eo.passThroughHooks.has(oe)?Y[he]=ht=>{if(this.defaults.async)return Promise.resolve(Ie.call(Y,ht)).then(Kt=>Oe.call(Y,Kt));const Vt=Ie.call(Y,ht);return Oe.call(Y,Vt)}:Y[he]=(...ht)=>{let Vt=Ie.apply(Y,ht);return Vt===!1&&(Vt=Oe.apply(Y,ht)),Vt}}$.hooks=Y}if(V.walkTokens){const Y=this.defaults.walkTokens,oe=V.walkTokens;$.walkTokens=function(he){let Ie=[];return Ie.push(oe.call(this,he)),Y&&(Ie=Ie.concat(Y.call(this,he))),Ie}}this.defaults={...this.defaults,...$}}),this}setOptions(A){return this.defaults={...this.defaults,...A},this}lexer(A,W){return Js.lex(A,W??this.defaults)}parser(A,W){return Cn.parse(A,W??this.defaults)}parseMarkdown(A,W){return($,Y)=>{const oe={...Y},he={...this.defaults,...oe},Ie=this.onError(!!he.silent,!!he.async);if(this.defaults.async===!0&&oe.async===!1)return Ie(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof $>"u"||$===null)return Ie(new Error("marked(): input parameter is undefined or null"));if(typeof $!="string")return Ie(new Error("marked(): input parameter is of type "+Object.prototype.toString.call($)+", string expected"));if(he.hooks&&(he.hooks.options=he),he.async)return Promise.resolve(he.hooks?he.hooks.preprocess($):$).then(Oe=>A(Oe,he)).then(Oe=>he.hooks?he.hooks.processAllTokens(Oe):Oe).then(Oe=>he.walkTokens?Promise.all(this.walkTokens(Oe,he.walkTokens)).then(()=>Oe):Oe).then(Oe=>W(Oe,he)).then(Oe=>he.hooks?he.hooks.postprocess(Oe):Oe).catch(Ie);try{he.hooks&&($=he.hooks.preprocess($));let Oe=A($,he);he.hooks&&(Oe=he.hooks.processAllTokens(Oe)),he.walkTokens&&this.walkTokens(Oe,he.walkTokens);let ht=W(Oe,he);return he.hooks&&(ht=he.hooks.postprocess(ht)),ht}catch(Oe){return Ie(Oe)}}}onError(A,W){return V=>{if(V.message+=`
Please report this to https://github.com/markedjs/marked.`,A){const $="<p>An error occurred:</p><pre>"+d(V.message+"",!0)+"</pre>";return W?Promise.resolve($):$}if(W)return Promise.reject(V);throw V}}}const Ar=new pu;function ri(pt,A){return Ar.parse(pt,A)}ri.options=ri.setOptions=function(pt){return Ar.setOptions(pt),ri.defaults=Ar.defaults,i(ri.defaults),ri},ri.getDefaults=t,ri.defaults=e.defaults,ri.use=function(...pt){return Ar.use(...pt),ri.defaults=Ar.defaults,i(ri.defaults),ri},ri.walkTokens=function(pt,A){return Ar.walkTokens(pt,A)},ri.parseInline=Ar.parseInline,ri.Parser=Cn,ri.parser=Cn.parse,ri.Renderer=ya,ri.TextRenderer=ol,ri.Lexer=Js,ri.lexer=Js.lex,ri.Tokenizer=y,ri.Hooks=Eo,ri.parse=ri;const Qc=ri.options,iv=ri.setOptions,nv=ri.use,Dn=ri.walkTokens,Ul=ri.parseInline,sv=ri,Dm=Cn.parse,Gh=Js.lex;e.Hooks=Eo,e.Lexer=Js,e.Marked=pu,e.Parser=Cn,e.Renderer=ya,e.TextRenderer=ol,e.Tokenizer=y,e.getDefaults=t,e.lexer=Gh,e.marked=ri,e.options=Qc,e.parse=sv,e.parseInline=Ul,e.parser=Dm,e.setOptions=iv,e.use=nv,e.walkTokens=Dn})})();Ms.Hooks||exports.Hooks;Ms.Lexer||exports.Lexer;Ms.Marked||exports.Marked;Ms.Parser||exports.Parser;var bue=Ms.Renderer||exports.Renderer;Ms.TextRenderer||exports.TextRenderer;Ms.Tokenizer||exports.Tokenizer;var T2e=Ms.defaults||exports.defaults;Ms.getDefaults||exports.getDefaults;var OA=Ms.lexer||exports.lexer;Ms.marked||exports.marked;Ms.options||exports.options;var vue=Ms.parse||exports.parse;Ms.parseInline||exports.parseInline;var P2e=Ms.parser||exports.parser;Ms.setOptions||exports.setOptions;Ms.use||exports.use;Ms.walkTokens||exports.walkTokens;function M2e(n){return JSON.stringify(n,R2e)}function hH(n){let e=JSON.parse(n);return e=fH(e),e}function R2e(n,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function fH(n,e=0){if(!n||e>200)return n;if(typeof n=="object"){switch(n.$mid){case 1:return Le.revive(n);case 2:return new RegExp(n.source,n.flags);case 17:return new Date(n.source)}if(n instanceof vA||n instanceof Uint8Array)return n;if(Array.isArray(n))for(let t=0;t<n.length;++t)n[t]=fH(n[t],e+1);else for(const t in n)Object.hasOwnProperty.call(n,t)&&(n[t]=fH(n[t],e+1))}return n}const p4=Object.freeze({image:({href:n,title:e,text:t})=>{let i=[],s=[];return n&&({href:n,dimensions:i}=I2e(n),s.push(`src="${nE(n)}"`)),t&&s.push(`alt="${nE(t)}"`),e&&s.push(`title="${nE(e)}"`),i.length&&(s=s.concat(i)),"<img "+s.join(" ")+">"},paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>`},link({href:n,title:e,tokens:t}){let i=this.parser.parseInline(t);return typeof n!="string"?"":(n===i&&(i=m4(i)),e=typeof e=="string"?nE(m4(e)):"",n=m4(n),n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${n}" title="${e||n}" draggable="false">${i}</a>`)}});function FA(n,e={},t={}){const i=new Q;let s=!1;const o=Xz(e),r=function(m){let _;try{_=hH(decodeURIComponent(m))}catch{}return _?(_=Tle(_,b=>{if(n.uris&&n.uris[b])return Le.revive(n.uris[b])}),encodeURIComponent(JSON.stringify(_))):m},a=function(m,_){const b=n.uris&&n.uris[m];let v=Le.revive(b);return _?m.startsWith(je.data+":")?m:(v||(v=Le.parse(m)),nA.uriToBrowserUri(v).toString(!0)):!v||Le.parse(m).toString()===v.toString()?m:(v.query&&(v=v.with({query:r(v.query)})),v.toString())},l=new bue;l.image=p4.image,l.link=p4.link,l.paragraph=p4.paragraph;const c=[],d=[];if(e.codeBlockRendererSync?l.code=({text:m,lang:_})=>{const b=uH.nextId(),v=e.codeBlockRendererSync(BX(_),m);return d.push([b,v]),`<div class="code" data-code="${b}">${nS(m)}</div>`}:e.codeBlockRenderer&&(l.code=({text:m,lang:_})=>{const b=uH.nextId(),v=e.codeBlockRenderer(BX(_),m);return c.push(v.then(w=>[b,w])),`<div class="code" data-code="${b}">${nS(m)}</div>`}),e.actionHandler){const m=function(v){let w=v.target;if(!(w.tagName!=="A"&&(w=w.parentElement,!w||w.tagName!=="A")))try{let y=w.dataset.href;y&&(n.baseUri&&(y=_4(Le.from(n.baseUri),y)),e.actionHandler.callback(y,v))}catch(y){He(y)}finally{v.preventDefault()}},_=e.actionHandler.disposables.add(new ft(o,"click")),b=e.actionHandler.disposables.add(new ft(o,"auxclick"));e.actionHandler.disposables.add(ue.any(_.event,b.event)(v=>{const w=new Sl(Te(o),v);!w.leftButton&&!w.middleButton||m(w)})),e.actionHandler.disposables.add(G(o,"keydown",v=>{const w=new ti(v);!w.equals(10)&&!w.equals(3)||m(w)}))}n.supportHtml||(l.html=({text:m})=>{var b;return(b=e.sanitizerOptions)!=null&&b.replaceWithPlaintext?nS(m):(n.isTrusted?m.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?m:""}),t.renderer=l;let u=n.value??"";u.length>1e5&&(u=`${u.substr(0,1e5)}`),n.supportThemeIcons&&(u=b2e(u));let h;if(e.fillInIncompleteTokens){const m={...T2e,...t},_=OA(u,m),b=K2e(_);h=P2e(b,m)}else h=vue(u,{...t,async:!1});n.supportThemeIcons&&(h=gg(h).map(_=>typeof _=="string"?_:_.outerHTML).join(""));const g=new DOMParser().parseFromString(gH({isTrusted:n.isTrusted,...e.sanitizerOptions},h),"text/html");if(g.body.querySelectorAll("img, audio, video, source").forEach(m=>{const _=m.getAttribute("src");if(_){let b=_;try{n.baseUri&&(b=_4(Le.from(n.baseUri),b))}catch{}if(m.setAttribute("src",a(b,!0)),e.remoteImageIsAllowed){const v=Le.parse(b);v.scheme!==je.file&&v.scheme!==je.data&&!e.remoteImageIsAllowed(v)&&m.replaceWith(ce("",void 0,m.outerHTML))}}}),g.body.querySelectorAll("a").forEach(m=>{const _=m.getAttribute("href");if(m.setAttribute("href",""),!_||/^data:|javascript:/i.test(_)||/^command:/i.test(_)&&!n.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(_))m.replaceWith(...m.childNodes);else{let b=a(_,!1);n.baseUri&&(b=_4(Le.from(n.baseUri),_)),m.dataset.href=b}}),o.innerHTML=gH({isTrusted:n.isTrusted,...e.sanitizerOptions},g.body.innerHTML),c.length>0)Promise.all(c).then(m=>{var v;if(s)return;const _=new Map(m),b=o.querySelectorAll("div[data-code]");for(const w of b){const y=_.get(w.dataset.code??"");y&&rs(w,y)}(v=e.asyncRenderCallback)==null||v.call(e)});else if(d.length>0){const m=new Map(d),_=o.querySelectorAll("div[data-code]");for(const b of _){const v=m.get(b.dataset.code??"");v&&rs(b,v)}}if(e.asyncRenderCallback)for(const m of o.getElementsByTagName("img")){const _=i.add(G(m,"load",()=>{_.dispose(),e.asyncRenderCallback()}))}return{element:o,dispose:()=>{s=!0,i.dispose()}}}function BX(n){if(!n)return"";const e=n.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:n}function _4(n,e){return/^\w[\w\d+.-]*:/.test(e)?e:n.path.endsWith("/")?OX(n,e).toString():OX(AA(n),e).toString()}const A2e=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function gH(n,e){const{config:t,allowedSchemes:i}=F2e(n),s=new Q;s.add(HX("uponSanitizeAttribute",(o,r)=>{var a;if(r.attrName==="style"||r.attrName==="class"){if(o.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}else if(o.tagName==="INPUT"&&((a=o.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"){if(r.attrName==="type"&&r.attrValue==="checkbox"||r.attrName==="disabled"||r.attrName==="checked"){r.keepAttr=!0;return}r.keepAttr=!1}})),s.add(HX("uponSanitizeElement",(o,r)=>{var a;if(r.tagName==="input"&&(((a=o.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"?o.setAttribute("disabled",""):n.replaceWithPlaintext||o.remove()),n.replaceWithPlaintext&&!r.allowedTags[r.tagName]&&r.tagName!=="body"&&o.parentElement){let l,c;if(r.tagName==="#comment")l=`<!--${o.textContent}-->`;else{const f=A2e.includes(r.tagName),g=o.attributes.length?" "+Array.from(o.attributes).map(m=>`${m.name}="${m.value}"`).join(" "):"";l=`<${r.tagName}${g}>`,f||(c=`</${r.tagName}>`)}const d=document.createDocumentFragment(),u=o.parentElement.ownerDocument.createTextNode(l);d.appendChild(u);const h=c?o.parentElement.ownerDocument.createTextNode(c):void 0;for(;o.firstChild;)d.appendChild(o.firstChild);h&&d.appendChild(h),o.nodeType===Node.COMMENT_NODE?o.parentElement.insertBefore(d,o):o.parentElement.replaceChild(d,o)}})),s.add(gEe(i));try{return kce(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{s.dispose()}}const O2e=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function F2e(n){const e=[je.http,je.https,je.mailto,je.data,je.file,je.vscodeFileResource,je.vscodeRemote,je.vscodeRemoteResource];return n.isTrusted&&e.push(je.command),{config:{ALLOWED_TAGS:n.allowedTags??[...mEe],ALLOWED_ATTR:O2e,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function W2e(n){return typeof n=="string"?n:B2e(n)}function B2e(n,e){let t=n.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}`);const i=vue(t,{async:!1,renderer:V2e.value}).replace(/&(#\d+|[a-zA-Z]+);/g,s=>H2e.get(s)??s);return gH({isTrusted:!1},i).toString()}const H2e=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function j2e(){const n=new bue;return n.code=({text:e})=>e,n.blockquote=({text:e})=>e+`
`,n.html=e=>"",n.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.hr=()=>"",n.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},n.listitem=({text:e})=>e+`
`,n.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},n.table=function({header:e,rows:t}){return e.map(i=>this.tablecell(i)).join(" ")+`
`+t.map(i=>i.map(s=>this.tablecell(s)).join(" ")).join(`
`)+`
`},n.tablerow=({text:e})=>e,n.tablecell=function({tokens:e}){return this.parser.parseInline(e)},n.strong=({text:e})=>e,n.em=({text:e})=>e,n.codespan=({text:e})=>e,n.br=e=>`
`,n.del=({text:e})=>e,n.image=e=>"",n.text=({text:e})=>e,n.link=({text:e})=>e,n}const V2e=new Oc(n=>j2e());function xT(n){let e="";return n.forEach(t=>{e+=t.raw}),e}function wue(n){var e,t;if(n.tokens)for(let i=n.tokens.length-1;i>=0;i--){const s=n.tokens[i];if(s.type==="text"){const o=s.raw.split(`
`),r=o[o.length-1];if(r.includes("`"))return Y2e(n);if(r.includes("**"))return tRe(n);if(r.match(/\*\w/))return Z2e(n);if(r.match(/(^|\s)__\w/))return iRe(n);if(r.match(/(^|\s)_\w/))return Q2e(n);if(z2e(r)||U2e(r)&&n.tokens.slice(0,i).some(a=>a.type==="text"&&a.raw.match(/\[[^\]]*$/))){const a=n.tokens.slice(i+1);return((e=a[0])==null?void 0:e.type)==="link"&&((t=a[1])==null?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)||r.match(/^[^"]* +"[^"]*$/)?J2e(n):X2e(n)}else if(r.match(/(^|\s)\[\w*/))return eRe(n)}}}function z2e(n){return!!n.match(/(^|\s)\[.*\]\(\w*/)}function U2e(n){return!!n.match(/^[^\[]*\]\([^\)]*$/)}function $2e(n){var l;const e=n.items[n.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let i;if((t==null?void 0:t.type)==="text"&&!("inRawBlock"in e)&&(i=wue(t)),!i||i.type!=="paragraph")return;const s=xT(n.items.slice(0,-1)),o=(l=e.raw.match(/^(\s*(-|\d+\.|\*) +)/))==null?void 0:l[0];if(!o)return;const r=o+xT(e.tokens.slice(0,-1))+i.raw,a=OA(s+r)[0];if(a.type==="list")return a}const q2e=3;function K2e(n){for(let e=0;e<q2e;e++){const t=G2e(n);if(t)n=t;else break}return n}function G2e(n){let e,t;for(e=0;e<n.length;e++){const i=n[e];if(i.type==="paragraph"&&i.raw.match(/(\n|^)\|/)){t=nRe(n.slice(e));break}if(e===n.length-1&&i.type==="list"){const s=$2e(i);if(s){t=[s];break}}if(e===n.length-1&&i.type==="paragraph"){const s=wue(i);if(s){t=[s];break}}}if(t){const i=[...n.slice(0,e),...t];return i.links=n.links,i}return null}function Y2e(n){return mm(n,"`")}function Z2e(n){return mm(n,"*")}function Q2e(n){return mm(n,"_")}function X2e(n){return mm(n,")")}function J2e(n){return mm(n,'")')}function eRe(n){return mm(n,"](https://microsoft.com)")}function tRe(n){return mm(n,"**")}function iRe(n){return mm(n,"__")}function mm(n,e){const t=xT(Array.isArray(n)?n:[n]);return OA(t+e)[0]}function nRe(n){const e=xT(n),t=e.split(`
`);let i,s=!1;for(let o=0;o<t.length;o++){const r=t[o].trim();if(typeof i>"u"&&r.match(/^\s*\|/)){const a=r.match(/(\|[^\|]+)(?=\||$)/g);a&&(i=a.length)}else if(typeof i=="number")if(r.match(/^\s*\|/)){if(o!==t.length-1)return;s=!0}else return}if(typeof i=="number"&&i>0){const o=s?t.slice(0,-1).join(`
`):e,r=!!o.match(/\|\s*$/),a=o+(r?"":"|")+`
|${" --- |".repeat(i)}`;return OA(a)}}function HX(n,e){return Lce(n,e),xe(()=>Dce(n))}const Ou=class Ou{static createEmpty(e,t){const i=Ou.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=i,new Ou(s,e,t)}static createFromTextAndMetadata(e,t){let i=0,s="";const o=new Array;for(const{text:r,metadata:a}of e)o.push(i+r.length,a),i+=r.length,s+=r;return new Ou(new Uint32Array(o),s,t)}constructor(e,t,i){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=i}equals(e){return e instanceof Ou?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,i){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,o=s+(i<<1);for(let r=s;r<o;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],i=Bo.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(i)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Bo.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Bo.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Bo.getClassNameFromMetadata(t)}getInlineStyle(e,t){const i=this._tokens[(e<<1)+1];return Bo.getInlineStyleFromMetadata(i,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return Bo.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Ou.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,i){return new aU(this,e,t,i)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let o=0;o<s;o++)e[o<<1]=e[o+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let i=0,s=(e.length>>>1)-1;for(;i<s;){const o=i+Math.floor((s-i)/2),r=e[o<<1];if(r===t)return o+1;r<t?i=o+1:r>t&&(s=o)}return i}withInserted(e){if(e.length===0)return this;let t=0,i=0,s="";const o=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=i<e.length?e[i]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];o.push(s.length,c),t++,r=a}else if(l){if(l.offset>r){s+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];o.push(s.length,c),r=l.offset}s+=l.text,o.push(s.length,l.tokenMetadata),i++}else break}return new Ou(new Uint32Array(o),s,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),i=this.getEndOffset(e);return this._text.substring(t,i)}forEach(e){const t=this.getCount();for(let i=0;i<t;i++)e(i)}};Ou.defaultTokenMetadata=(32768|2<<24)>>>0;let Xn=Ou;class aU{constructor(e,t,i,s){this._source=e,this._startOffset=t,this._endOffset=i,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let o=this._firstTokenIndex,r=e.getCount();o<r&&!(e.getStartOffset(o)>=i);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof aU?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,i=this._source.getStartOffset(t),s=this._source.getEndOffset(t);let o=this._source.getTokenText(t);return i<this._startOffset&&(o=o.substring(this._startOffset-i)),s>this._endOffset&&(o=o.substring(0,o.length-(s-this._endOffset))),o}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}function sRe(n,e){const t=e.lineNumber;if(!n.tokenization.isCheapToTokenize(t))return;n.tokenization.forceTokenization(t);const i=n.tokenization.getLineTokens(t),s=i.findTokenIndexAtOffset(e.column-1);return i.getStandardTokenType(s)}const py=new class{clone(){return this}equals(n){return this===n}};function lU(n,e){return new az([new Ax(0,"",n)],e)}function WA(n,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(n<<0|0|0|32768|2<<24)>>>0,new tA(t,e===null?py:e)}const jX={getInitialState:()=>py,tokenizeEncoded:(n,e,t)=>WA(0,t)};async function oRe(n,e,t){if(!t)return VX(e,n.languageIdCodec,jX);const i=await Hi.getOrCreate(t);return VX(e,n.languageIdCodec,i||jX)}function rRe(n,e,t,i,s,o,r){let a="<div>",l=i,c=0,d=!0;for(let u=0,h=e.getCount();u<h;u++){const f=e.getEndOffset(u);if(f<=i)continue;let g="";for(;l<f&&l<s;l++){const m=n.charCodeAt(l);switch(m){case 9:{let _=o-(l+c)%o;for(c+=_-1;_>0;)r&&d?(g+="&#160;",d=!1):(g+=" ",d=!0),_--;break}case 60:g+="&lt;",d=!1;break;case 62:g+="&gt;",d=!1;break;case 38:g+="&amp;",d=!1;break;case 0:g+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:g+="",d=!1;break;case 13:g+="&#8203",d=!1;break;case 32:r&&d?(g+="&#160;",d=!1):(g+=" ",d=!0);break;default:g+=String.fromCharCode(m),d=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${g}</span>`,f>s||l>=s)break}return a+="</div>",a}function VX(n,e,t){let i='<div class="monaco-tokenized-source">';const s=ru(n);let o=t.getInitialState();for(let r=0,a=s.length;r<a;r++){const l=s[r];r>0&&(i+="<br/>");const c=t.tokenizeEncoded(l,!0,o);Xn.convertToEndOffset(c.tokens,l.length);const u=new Xn(c.tokens,l,e).inflate();let h=0;for(let f=0,g=u.getCount();f<g;f++){const m=u.getClassName(f),_=u.getEndOffset(f);i+=`<span class="${m}">${nS(l.substring(h,_))}</span>`,h=_}o=c.endState}return i+="</div>",i}var aRe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},zX=function(n,e){return function(t,i){e(t,i,n)}},mH,e_;let Mh=(e_=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new j,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new Q,o=s.add(FA(e,{...this._getRenderOptions(e,s),...t},i));return o.element.classList.add("rendered-markdown"),{element:o.element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(i,s)=>{var l,c;let o;i?o=this._languageService.getLanguageIdByLanguageName(i):this._options.editor&&(o=(l=this._options.editor.getModel())==null?void 0:l.getLanguageId()),o||(o=_o);const r=await oRe(this._languageService,s,o),a=document.createElement("span");if(a.innerHTML=((c=mH._ttpTokenizer)==null?void 0:c.createHTML(r))??r,this._options.editor){const d=this._options.editor.getOption(50);as(a,d)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>cU(this._openerService,i,e.isTrusted),disposables:t}}}},mH=e_,e_._ttpTokenizer=Vh("tokenizeToString",{createHTML(e){return e}}),e_);Mh=mH=aRe([zX(1,Di),zX(2,Xo)],Mh);async function cU(n,e,t){try{return await n.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:lRe(t)})}catch(i){return He(i),!1}}function lRe(n){return n===!0?!0:n&&Array.isArray(n.enabledCommands)?n.enabledCommands:!1}const Nr=dt("accessibilityService"),HL=new me("accessibilityModeEnabled",!1),UX=2e4;let op,PN,pH,MN,_H;function cRe(n){op=document.createElement("div"),op.className="monaco-aria-container";const e=()=>{const i=document.createElement("div");return i.className="monaco-alert",i.setAttribute("role","alert"),i.setAttribute("aria-atomic","true"),op.appendChild(i),i};PN=e(),pH=e();const t=()=>{const i=document.createElement("div");return i.className="monaco-status",i.setAttribute("aria-live","polite"),i.setAttribute("aria-atomic","true"),op.appendChild(i),i};MN=t(),_H=t(),n.appendChild(op)}function yo(n){op&&(PN.textContent!==n?(os(pH),kT(PN,n)):(os(PN),kT(pH,n)))}function Xd(n){op&&(MN.textContent!==n?(os(_H),kT(MN,n)):(os(MN),kT(_H,n)))}function kT(n,e){os(n),e.length>UX&&(e=e.substr(0,UX)),n.textContent=e,n.style.visibility="hidden",n.style.visibility="visible"}var dRe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Y1=function(n,e){return function(t,i){e(t,i,n)}};const ed=ce;let bH=class extends ba{get _targetWindow(){return Te(this._target.targetElements[0])}get _targetDocumentElement(){return Te(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,i,s,o,r){var h,f,g,m,_,b,v;super(),this._keybindingService=t,this._configurationService=i,this._openerService=s,this._instantiationService=o,this._accessibilityService=r,this._messageListeners=new Q,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new j),this._onRequestLayout=this._register(new j),this._linkHandler=e.linkHandler||(w=>cU(this._openerService,w,Tc(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new uRe(e.target),this._hoverPointer=(h=e.appearance)!=null&&h.showPointer?ed("div.workbench-hover-pointer"):void 0,this._hover=this._register(new Qz),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(f=e.appearance)!=null&&f.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(g=e.appearance)!=null&&g.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(m=e.position)!=null&&m.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=((_=e.position)==null?void 0:_.hoverPosition)??3,this.onmousedown(this._hover.containerDomNode,w=>w.stopPropagation()),this.onkeydown(this._hover.containerDomNode,w=>{w.equals(9)&&this.dispose()}),this._register(G(this._targetWindow,"blur",()=>this.dispose()));const a=ed("div.hover-row.markdown-hover"),l=ed("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if(Fn(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const w=e.content,y=this._instantiationService.createInstance(Mh,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||po.fontFamily}),{element:S}=y.render(w,{actionHandler:{callback:x=>this._linkHandler(x),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(S)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const w=ed("div.hover-row.status-bar"),y=ed("div.actions");e.actions.forEach(S=>{const x=this._keybindingService.lookupKeybinding(S.commandId),k=x?x.getLabel():null;MA.render(y,{label:S.label,commandId:S.commandId,run:D=>{S.run(D),this.dispose()},iconClass:S.iconClass},k)}),w.appendChild(y),this._hover.containerDomNode.appendChild(w)}this._hoverContainer=ed("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:((b=e.persistence)==null?void 0:b.hideOnHover)===void 0?c=typeof e.content=="string"||Tc(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,(v=e.appearance)!=null&&v.showHoverHint){const w=ed("div.hover-row.status-bar"),y=ed("div.info");y.textContent=p("hoverhint","Hold {0} key to mouse over",ct?"Option":"Alt"),w.appendChild(y),this._hover.containerDomNode.appendChild(w)}const d=[...this._target.targetElements];c||d.push(this._hoverContainer);const u=this._register(new $X(d));if(this._register(u.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const w=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new $X(w)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=u}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const i=yz(this._hoverContainer,ed("div")),s=ne(this._hoverContainer,ed("div"));i.tabIndex=0,s.tabIndex=0,this._register(G(s,"focus",o=>{e.focus(),o.preventDefault()})),this._register(G(i,"focus",o=>{t.focus(),o.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(e.childNodes.length-t-1);if(i.nodeType===i.ELEMENT_NODE){const o=i;if(typeof o.tabIndex=="number"&&o.tabIndex>=0)return o}const s=this.findLastFocusableChild(i);if(s)return s}}render(e){var s;e.appendChild(this._hoverContainer);const i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&nue(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:s.getAriaLabel());i&&Xd(i),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=d=>{const u=Pce(d),h=d.getBoundingClientRect();return{top:h.top*u,bottom:h.bottom*u,right:h.right*u,left:h.left*u}},t=this._target.targetElements.map(d=>e(d)),{top:i,right:s,bottom:o,left:r}=t[0],a=s-r,l=o-i,c={top:i,right:s,bottom:o,left:r,width:a,height:l,center:{x:r+a/2,y:i+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const i=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-i}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-i}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const i=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-i):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-i))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const i=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let i=Math.round(t/2)-3;const s=this._x+i;(s<e.left||s>e.right)&&(i=e.center.x-this._x-3),this._hoverPointer.style.left=`${i}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};bH=dRe([Y1(1,Ft),Y1(2,nt),Y1(3,Xo),Y1(4,ke),Y1(5,Nr)],bH);class $X extends ba{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new j),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=Te(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(Te(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class uRe{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var Ss;(function(n){function e(o,r){if(o.start>=r.end||r.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,r.start),l=Math.min(o.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}n.intersect=e;function t(o){return o.end-o.start<=0}n.isEmpty=t;function i(o,r){return!t(e(o,r))}n.intersects=i;function s(o,r){const a=[],l={start:o.start,end:Math.min(r.start,o.end)},c={start:Math.max(r.end,o.start),end:o.end};return t(l)||a.push(l),t(c)||a.push(c),a}n.relativeComplement=s})(Ss||(Ss={}));function hRe(n){const e=n;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Gf;(function(n){n[n.AVOID=0]="AVOID",n[n.ALIGN=1]="ALIGN"})(Gf||(Gf={}));function ow(n,e,t){const i=t.mode===Gf.ALIGN?t.offset:t.offset+t.size,s=t.mode===Gf.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=n-i?i:e<=s?s-e:Math.max(n-e,0):e<=s?s-e:e<=n-i?i:0}const Iw=class Iw extends U{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=U.None,this.toDisposeOnSetContainer=U.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ce(".context-view"),ro(this.view),this.setContainer(e,t),this._register(xe(()=>this.setContainer(null,1)))}setContainer(e,t){var s;this.useFixedPosition=t!==1;const i=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&i===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,(s=this.shadowRootHostElement)==null||s.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=ce(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=fRe,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ce("slot"))}else this.container.appendChild(this.view);const o=new Q;Iw.BUBBLE_UP_EVENTS.forEach(r=>{o.add(Fi(this.container,r,a=>{this.onDOMEvent(a,!1)}))}),Iw.BUBBLE_DOWN_EVENTS.forEach(r=>{o.add(Fi(this.container,r,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=o}}show(e){var t,i;this.isVisible()&&this.hide(),os(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",hr(this.view),this.toDisposeOnClean=e.render(this.view)||U.None,this.delegate=e,this.doLayout(),(i=(t=this.delegate).focus)==null||i.call(t)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Ac&&mz.pointerEvents)){this.hide();return}(t=(e=this.delegate)==null?void 0:e.layout)==null||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(Fn(e)){const h=Qi(e),f=Pce(e);t={top:h.top*f,left:h.left*f,width:h.width*f,height:h.height*f}}else hRe(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const i=lr(this.view),s=Xu(this.view),o=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const d=y0();if(a===0){const h={offset:t.top-d.pageYOffset,size:t.height,position:o===0?0:1},f={offset:t.left,size:t.width,position:r===0?0:1,mode:Gf.ALIGN};l=ow(d.innerHeight,s,h)+d.pageYOffset,Ss.intersects({start:l,end:l+s},{start:h.offset,end:h.offset+h.size})&&(f.mode=Gf.AVOID),c=ow(d.innerWidth,i,f)}else{const h={offset:t.left,size:t.width,position:r===0?0:1},f={offset:t.top,size:t.height,position:o===0?0:1,mode:Gf.ALIGN};c=ow(d.innerWidth,i,h),Ss.intersects({start:c,end:c+i},{start:h.offset,end:h.offset+h.size})&&(f.mode=Gf.AVOID),l=ow(d.innerHeight,s,f)+d.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const u=Qi(this.container);this.view.style.top=`${l-(this.useFixedPosition?Qi(this.view).top:u.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Qi(this.view).left:u.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),ro(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,Te(e).document.activeElement):t&&!Rn(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};Iw.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],Iw.BUBBLE_DOWN_EVENTS=["click"];let vH=Iw;const fRe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var gRe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},mRe=function(n,e){return function(t,i){e(t,i,n)}};let LT=class extends U{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new vH(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,i){let s;t?t===this.layoutService.getContainer(Te(t))?s=1:i?s=3:s=2:s=1,this.contextView.setContainer(t??this.layoutService.activeContainer,s),this.contextView.show(e);const o={close:()=>{this.openContextView===o&&this.hideContextView()}};return this.openContextView=o,o}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};LT=gRe([mRe(0,gm)],LT);class pRe extends LT{getContextViewElement(){return this.contextView.getViewElement()}}class _Re{constructor(e,t,i){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=i}async update(e,t,i){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||Vo(e)||Fn(e))s=e;else if(!Px(e.markdown))s=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(p("iconLabel.loading","Loading..."),t,i),this._cancellationTokenSource=new Pi;const o=this._cancellationTokenSource.token;if(s=await e.markdown(o),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||o.isCancellationRequested)return}this.show(s,t,i)}show(e,t,i){var o;const s=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,actions:i==null?void 0:i.actions,linkHandler:i==null?void 0:i.linkHandler,trapFocus:i==null?void 0:i.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!s,showHoverHint:(o=i==null?void 0:i.appearance)==null?void 0:o.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(r,t)}s==null||s.dispose()}hasContent(e){return e?Tc(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)==null?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)==null||e.dispose(),(t=this._cancellationTokenSource)==null||t.dispose(!0),this._cancellationTokenSource=void 0}}var bRe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Z1=function(n,e){return function(t,i){e(t,i,n)}};let wH=class extends U{constructor(e,t,i,s,o){super(),this._instantiationService=e,this._keybindingService=i,this._layoutService=s,this._accessibilityService=o,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new LT(this._layoutService))}showHover(e,t,i){var l,c,d,u;if(qX(this._currentHoverOptions)===qX(e)||this._currentHover&&((c=(l=this._currentHoverOptions)==null?void 0:l.persistence)!=null&&c.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const s=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),o=_s();i||(s&&o?o.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=o):this._lastFocusedElementBeforeOpen=void 0);const r=new Q,a=this._instantiationService.createInstance(bH,e);if((d=e.persistence)!=null&&d.sticky&&(a.isLocked=!0),a.onDispose(()=>{var f,g;((f=this._currentHover)==null?void 0:f.domNode)&&Rce(this._currentHover.domNode)&&((g=this._lastFocusedElementBeforeOpen)==null||g.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),r.dispose()},void 0,r),!e.container){const h=Fn(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(Te(h))}if(this._contextViewHandler.showContextView(new vRe(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,r),(u=e.persistence)!=null&&u.sticky)r.add(G(Te(e.container).document,le.MOUSE_DOWN,h=>{Rn(h.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const f of e.target.targetElements)r.add(G(f,le.CLICK,()=>this.hideHover()));else r.add(G(e.target,le.CLICK,()=>this.hideHover()));const h=_s();if(h){const f=Te(h).document;r.add(G(h,le.KEY_DOWN,g=>{var m;return this._keyDown(g,a,!!((m=e.persistence)!=null&&m.hideOnKeyDown))})),r.add(G(f,le.KEY_DOWN,g=>{var m;return this._keyDown(g,a,!!((m=e.persistence)!=null&&m.hideOnKeyDown))})),r.add(G(h,le.KEY_UP,g=>this._keyUp(g,a))),r.add(G(f,le.KEY_UP,g=>this._keyUp(g,a)))}}if("IntersectionObserver"in Gt){const h=new IntersectionObserver(g=>this._intersectionChange(g,a),{threshold:0}),f="targetElements"in e.target?e.target.targetElements[0]:e.target;h.observe(f),r.add(xe(()=>h.disconnect()))}return this._currentHover=a,a}hideHover(){var e;(e=this._currentHover)!=null&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,i){var r,a;if(e.key==="Alt"){t.isLocked=!0;return}const s=new ti(e);this._keybindingService.resolveKeyboardEvent(s).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(s,s.target).kind!==0||i&&(!((r=this._currentHoverOptions)!=null&&r.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(a=this._lastFocusedElementBeforeOpen)==null||a.focus())}_keyUp(e,t){var i;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(i=this._lastFocusedElementBeforeOpen)==null||i.focus()))}setupManagedHover(e,t,i,s){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let o,r;const a=(w,y)=>{var x;const S=r!==void 0;w&&(r==null||r.dispose(),r=void 0),y&&(o==null||o.dispose(),o=void 0),S&&((x=e.onDidHideHover)==null||x.call(e),r=void 0)},l=(w,y,S,x)=>new Bl(async()=>{(!r||r.isDisposed)&&(r=new _Re(e,S||t,w>0),await r.update(typeof i=="function"?i():i,y,{...s,trapFocus:x}))},w);let c=!1;const d=G(t,le.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),u=G(t,le.MOUSE_UP,()=>{c=!1},!0),h=G(t,le.MOUSE_LEAVE,w=>{c=!1,a(!1,w.fromElement===t)},!0),f=w=>{if(o)return;const y=new Q,S={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const x=k=>{S.x=k.x+10,Fn(k.target)&&KX(k.target,t)!==t&&a(!0,!0)};y.add(G(t,le.MOUSE_MOVE,x,!0))}o=y,!(Fn(w.target)&&KX(w.target,t)!==t)&&y.add(l(e.delay,!1,S))},g=G(t,le.MOUSE_OVER,f,!0),m=()=>{if(c||o)return;const w={targetElements:[t],dispose:()=>{}},y=new Q,S=()=>a(!0,!0);y.add(G(t,le.BLUR,S,!0)),y.add(l(e.delay,!1,w)),o=y};let _;const b=t.tagName.toLowerCase();b!=="input"&&b!=="textarea"&&(_=G(t,le.FOCUS,m,!0));const v={show:w=>{a(!1,!0),l(0,w,void 0,w)},hide:()=>{a(!0,!0)},update:async(w,y)=>{i=w,await(r==null?void 0:r.update(i,void 0,y))},dispose:()=>{this._managedHovers.delete(t),g.dispose(),h.dispose(),d.dispose(),u.dispose(),_==null||_.dispose(),a(!0,!0)}};return this._managedHovers.set(t,v),v}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};wH=bRe([Z1(0,ke),Z1(1,Er),Z1(2,Ft),Z1(3,gm),Z1(4,Nr)],wH);function qX(n){if(n!==void 0)return(n==null?void 0:n.id)??n}class vRe{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function KX(n,e){for(e=e??Te(n).document.body;!n.hasAttribute("custom-hover")&&n!==e;)n=n.parentElement;return n}mt(du,wH,1);tl((n,e)=>{const t=n.getColor(zde);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const jL=dt("IWorkspaceEditService");class dU{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(mg.is(t))return mg.lift(t);if(iC.is(t))return iC.lift(t);throw new Error("Unsupported edit")})}}class mg extends dU{static is(e){return e instanceof mg?!0:Gn(e)&&Le.isUri(e.resource)&&Gn(e.textEdit)}static lift(e){return e instanceof mg?e:new mg(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,i=void 0,s){super(s),this.resource=e,this.textEdit=t,this.versionId=i}}class iC extends dU{static is(e){return e instanceof iC?!0:Gn(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof iC?e:new iC(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,i={},s){super(s),this.oldResource=e,this.newResource=t,this.options=i}}const cs={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},VL=Object.freeze({id:"editor",order:5,type:"object",title:p("editorConfigurationTitle","Editor"),scope:5}),DT={...VL,properties:{"editor.tabSize":{type:"number",default:Ls.tabSize,minimum:1,markdownDescription:p("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:p("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Ls.insertSpaces,markdownDescription:p("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Ls.detectIndentation,markdownDescription:p("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Ls.trimAutoWhitespace,description:p("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Ls.largeFileOptimizations,description:p("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[p("wordBasedSuggestions.off","Turn off Word Based Suggestions."),p("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),p("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),p("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:p("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[p("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),p("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),p("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:p("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:p("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:p("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:p("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:p("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:p("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:p("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:p("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:p("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:p("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:p("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:cs.maxComputationTime,description:p("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:cs.maxFileSize,description:p("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:cs.renderSideBySide,description:p("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:cs.renderSideBySideInlineBreakpoint,description:p("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:cs.useInlineViewWhenSpaceIsLimited,description:p("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:cs.renderMarginRevertIcon,description:p("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:cs.renderGutterMenu,description:p("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:cs.ignoreTrimWhitespace,description:p("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:cs.renderIndicators,description:p("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:cs.diffCodeLens,description:p("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:cs.diffWordWrap,markdownEnumDescriptions:[p("wordWrap.off","Lines will never wrap."),p("wordWrap.on","Lines will wrap at the viewport width."),p("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:cs.diffAlgorithm,markdownEnumDescriptions:[p("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),p("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:cs.hideUnchangedRegions.enabled,markdownDescription:p("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:cs.hideUnchangedRegions.revealLineCount,markdownDescription:p("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:cs.hideUnchangedRegions.minimumLineCount,markdownDescription:p("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:cs.hideUnchangedRegions.contextLineCount,markdownDescription:p("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:cs.experimental.showMoves,markdownDescription:p("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:cs.experimental.showEmptyDecorations,description:p("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:cs.experimental.useTrueInlineView,description:p("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function wRe(n){return typeof n.type<"u"||typeof n.anyOf<"u"}for(const n of Jv){const e=n.schema;if(typeof e<"u")if(wRe(e))DT.properties[`editor.${n.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(DT.properties[t]=e[t])}let sE=null;function Cue(){return sE===null&&(sE=Object.create(null),Object.keys(DT.properties).forEach(n=>{sE[n]=!0})),sE}function CRe(n){return Cue()[`editor.${n}`]||!1}function yRe(n){return Cue()[`diffEditor.${n}`]||!1}const SRe=Mi.as(Hl.Configuration);SRe.registerConfiguration(DT);class Ii{static insert(e,t){return{range:new E(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function oE(n){return Object.isFrozen(n)?n:Hxe(n)}class ss{static createEmptyModel(e){return new ss({},[],[],void 0,e)}constructor(e,t,i,s,o){this._contents=e,this._keys=t,this._overrides=i,this.raw=s,this.logService=o,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if((e=this.raw)!=null&&e.length){const t=this.raw.map(i=>{if(i instanceof ss)return i;const s=new xRe("",this.logService);return s.parseRaw(i),s.configurationModel});this._rawConfiguration=t.reduce((i,s)=>s===i?s:i.merge(s),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?CQ(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return oE(i.rawConfiguration.getValue(e))},get override(){return t?oE(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return oE(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const s=[];for(const{contents:o,identifiers:r,keys:a}of i.rawConfiguration.overrides){const l=new ss(o,a,[],void 0,i.logService).getValue(e);l!==void 0&&s.push({identifiers:r,value:l})}return s.length?oE(s):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?CQ(i,e):i:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var r,a;const t=Bu(this.contents),i=Bu(this.overrides),s=[...this.keys],o=(r=this.raw)!=null&&r.length?[...this.raw]:[this];for(const l of e)if(o.push(...(a=l.raw)!=null&&a.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(t,l.contents);for(const c of l.overrides){const[d]=i.filter(u=>Li(u.identifiers,c.identifiers));d?(this.mergeContents(d.contents,c.contents),d.keys.push(...c.keys),d.keys=Lh(d.keys)):i.push(Bu(c))}for(const c of l.keys)s.indexOf(c)===-1&&s.push(c)}return new ss(t,s,i,o.every(l=>l instanceof ss)?void 0:o,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const s of Lh([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[s];const r=t[s];r&&(typeof o=="object"&&typeof r=="object"?(o=Bu(o),this.mergeContents(o,r)):o=r),i[s]=o}return new ss(i,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&Gn(e[i])&&Gn(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=Bu(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const s=o=>{o&&(i?this.mergeContents(i,o):i=Bu(o))};for(const o of this.overrides)o.identifiers.length===1&&o.identifiers[0]===e?t=o.contents:o.identifiers.includes(e)&&s(o.contents);return s(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),NNe(this.contents,e),Yg.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>Li(i.identifiers,aT(e))),1))}updateValue(e,t,i){if(nde(this.contents,e,t,s=>this.logService.error(s)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),Yg.test(e)){const s=aT(e),o={identifiers:s,keys:Object.keys(this.contents[e]),contents:IB(this.contents[e],a=>this.logService.error(a))},r=this.overrides.findIndex(a=>Li(a.identifiers,s));r!==-1?this.overrides[r]=o:this.overrides.push(o)}}}class xRe{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||ss.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:i,keys:s,overrides:o,restricted:r,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new ss(i,s,o,a?[e]:void 0,this.logService),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const i=Mi.as(Hl.Configuration).getConfigurationProperties(),s=this.filter(e,i,!0,t);e=s.raw;const o=IB(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),r=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:o,keys:r,overrides:a,restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}filter(e,t,i,s){var l,c,d;let o=!1;if(!(s!=null&&s.scopes)&&!(s!=null&&s.skipRestricted)&&!((l=s==null?void 0:s.exclude)!=null&&l.length))return{raw:e,restricted:[],hasExcludedProperties:o};const r={},a=[];for(const u in e)if(Yg.test(u)&&i){const h=this.filter(e[u],t,!1,s);r[u]=h.raw,o=o||h.hasExcludedProperties,a.push(...h.restricted)}else{const h=t[u],f=h?typeof h.scope<"u"?h.scope:3:void 0;h!=null&&h.restricted&&a.push(u),!((c=s.exclude)!=null&&c.includes(u))&&((d=s.include)!=null&&d.includes(u)||(f===void 0||s.scopes===void 0||s.scopes.includes(f))&&!(s.skipRestricted&&(h!=null&&h.restricted)))?r[u]=e[u]:o=!0}return{raw:r,restricted:a,hasExcludedProperties:o}}toOverrides(e,t){const i=[];for(const s of Object.keys(e))if(Yg.test(s)){const o={};for(const r in e[s])o[r]=e[s][r];i.push({identifiers:aT(s),keys:Object.keys(o),contents:IB(o,t)})}return i}}class kRe{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=s,this.defaultConfiguration=o,this.policyConfiguration=r,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=d,this.workspaceConfiguration=u,this.folderConfigurationModel=h,this.memoryConfigurationModel=f}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class BA{constructor(e,t,i,s,o,r,a,l,c,d){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=s,this._remoteUserConfiguration=o,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Zn,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let s;i.resource?(s=this._memoryConfigurationByResource.get(i.resource),s||(s=ss.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(i.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const s=this.getConsolidatedConfigurationModel(e,t,i),o=this.getFolderConfigurationModelForResource(t.resource,i),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of s.overrides)for(const c of l.identifiers)s.getOverrideValue(e,c)!==void 0&&a.add(c);return new kRe(e,t,s.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,o||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,i){let s=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(s=s.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(s=s.merge(this._policyConfiguration)),s}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(i=this.getFolderConsolidatedConfiguration(s.uri)||i);const o=this._memoryConfigurationByResource.get(e);o&&(i=i.merge(o))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=i.merge(s),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:s,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:s,keys:o}]),e},[])}}static parse(e,t){const i=this.parseConfigurationModel(e.defaults,t),s=this.parseConfigurationModel(e.policy,t),o=this.parseConfigurationModel(e.application,t),r=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,d)=>(c.set(Le.revive(d[0]),this.parseConfigurationModel(d[1],t)),c),new Zn);return new BA(i,s,o,r,ss.createEmptyModel(t),a,l,ss.createEmptyModel(t),new Zn,t)}static parseConfigurationModel(e,t){return new ss(e.contents,e.keys,e.overrides,void 0,t)}}class LRe{constructor(e,t,i,s,o){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=s,this.logService=o,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const r of e.keys)this.affectedKeys.add(r);for(const[,r]of e.overrides)for(const a of r)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const r of this.affectedKeys)this._affectsConfigStr+=r+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=BA.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var a;const i=this._marker+e,s=this._affectsConfigStr.indexOf(i);if(s<0)return!1;const o=s+i.length;if(o>=this._affectsConfigStr.length)return!1;const r=this._affectsConfigStr.charCodeAt(o);if(r!==this._markerCode1&&r!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(a=this.previous)==null?void 0:a.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!_r(l,c)}return!0}}class DRe{constructor(){this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const lS=new DRe,ET={kind:0},ERe={kind:1};function NRe(n,e,t){return{kind:2,commandId:n,commandArgs:e,isBubble:t}}class cS{constructor(e,t,i){var s;this._log=i,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const o of e){const r=o.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=cS.handleRemovals([].concat(e).concat(t));for(let o=0,r=this._keybindings.length;o<r;o++){const a=this._keybindings[o];if(a.chords.length===0)continue;const l=(s=a.when)==null?void 0:s.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,i){if(t){for(let s=0;s<t.length;s++)if(t[s]!==e.chords[s])return!1}return!(i&&i.type!==1&&(!e.when||!BEe(i,e.when)))}static handleRemovals(e){const t=new Map;for(let s=0,o=e.length;s<o;s++){const r=e[s];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const i=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];if(!r.command||r.command.length===0){i.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){i.push(r);continue}let l=!1;for(const c of a){const d=c.when;if(this._isTargetedForRemoval(r,c.chords,d)){l=!0;break}}if(!l){i.push(r);continue}}return i}_addKeyPress(e,t){const i=this._map.get(e);if(typeof i>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.command===t.command)continue;let r=!0;for(let a=1;a<o.chords.length&&a<t.chords.length;a++)if(o.chords[a]!==t.chords[a]){r=!1;break}r&&cS.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}i.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let i=0,s=t.length;i<s;i++)if(t[i]===e){t.splice(i,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:LB(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const i=this._lookupMap.get(e);if(typeof i>"u"||i.length===0)return null;if(i.length===1)return i[0];for(let s=i.length-1;s>=0;s--){const o=i[s];if(t.contextMatchesRules(o.when))return o}return i[i.length-1]}resolve(e,t,i){const s=[...t,i];this._log(`| Resolving ${s}`);const o=this._map.get(s[0]);if(o===void 0)return this._log("\\ No keybinding entries."),ET;let r=null;if(s.length<2)r=o;else{r=[];for(let l=0,c=o.length;l<c;l++){const d=o[l];if(s.length>d.chords.length)continue;let u=!0;for(let h=1;h<s.length;h++)if(d.chords[h]!==s[h]){u=!1;break}u&&r.push(d)}}const a=this._findCommand(e,r);return a?s.length<a.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${a.chords.length-s.length} more chord(s), when: ${GX(a.when)}, source: ${YX(a)}.`),ERe):(this._log(`\\ From ${r.length} keybinding entries, matched ${a.command}, when: ${GX(a.when)}, source: ${YX(a)}.`),NRe(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),ET)}_findCommand(e,t){for(let i=t.length-1;i>=0;i--){const s=t[i];if(cS._contextMatchesRules(e,s.when))return s}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function GX(n){return n?`${n.serialize()}`:"no when condition"}function YX(n){return n.extensionId?n.isBuiltinExtension?`built-in extension ${n.extensionId}`:`user extension ${n.extensionId}`:n.isDefault?"built-in":"user"}const IRe=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class TRe extends U{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ue.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,i,s,o){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=i,this._notificationService=s,this._logService=o,this._onDidUpdateKeybindings=this._register(new j),this._currentChords=[],this._currentChordChecker=new _z,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=rw.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Bl,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const i=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(i)return i.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const i=this.resolveKeyboardEvent(e);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),ET;const[s]=i.getDispatchChords();if(s===null)return this._log("\\ Keyboard event cannot be dispatched"),ET;const o=this._contextKeyService.getContext(t),r=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(o,r,s)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw iz("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(p("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const i=this._currentChords.map(({label:s})=>s).join(", ");this._currentChordStatusMessage=this._notificationService.status(p("next.chord","({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),lS.enabled&&lS.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],lS.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const i=this.resolveKeyboardEvent(e),[s]=i.getSingleModifierDispatchChords();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=rw.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=rw.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(i,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[o]=i.getChords();return this._ignoreSingleModifiers=new rw(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,i=!1){let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let o=null,r=null;if(i){const[d]=e.getSingleModifierDispatchChords();o=d,r=d?[d]:[]}else[o]=e.getDispatchChords(),r=this._currentChords.map(({keypress:d})=>d);if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,r,o);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const d=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${d}, ${l}".`),this._notificationService.status(p("missing.chord","The key combination ({0}, {1}) is not a command.",d,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(o,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const d=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${d}, ${l}".`),this._notificationService.status(p("missing.chord","The key combination ({0}, {1}) is not a command.",d,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(s=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>this._notificationService.warn(d))}finally{this._currentlyDispatchingCommandId=null}IRe.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const XM=class XM{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};XM.EMPTY=new XM(null);let rw=XM;class ZX{constructor(e,t,i,s,o,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?CH(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=CH(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=i,this.when=s,this.isDefault=o,this.extensionId=r,this.isBuiltinExtension=a}}function CH(n){const e=[];for(let t=0,i=n.length;t<i;t++){const s=n[t];if(!s)return[];e.push(s)}return e}class HA{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}toLabel(e,t,i){if(t.length===0)return null;const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=i(a);if(l===null)return null;s[o]=ARe(a,l,this.modifierLabels[e])}return s.join(" ")}}const uU=new HA({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:p({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),PRe=new HA({ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:p({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:p({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:p({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:p({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:p({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),MRe=new HA({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),RRe=new HA({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function ARe(n,e,t){if(e===null)return"";const i=[];return n.ctrlKey&&i.push(t.ctrlKey),n.shiftKey&&i.push(t.shiftKey),n.altKey&&i.push(t.altKey),n.metaKey&&i.push(t.metaKey),e!==""&&i.push(e),i.join(t.separator)}class ORe extends rDe{constructor(e,t){if(super(),t.length===0)throw ja("chords");this._os=e,this._chords=t}getLabel(){return uU.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return PRe.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:MRe.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return RRe.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new oDe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class rk extends ORe{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return Uu.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Uu.toString(e.keyCode)}_getElectronAccelerator(e){return Uu.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Uu.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return rk.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Uu.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=rz[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof Nh)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Nh(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const i=CH(e.chords.map(s=>this._toKeyCodeChord(s)));return i.length>0?[new rk(i,t)]:[]}}const _y=dt("labelService"),yue=dt("progressService"),Wq=class Wq{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};Wq.None=Object.freeze({report(){}});let wc=Wq;const pm=dt("editorProgressService");class FRe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class WRe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?lz(e,this._value,0,e.length,this._from,this._to):IL(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class BRe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?lz(e,this._value,0,e.length,this._from,this._to):IL(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class HRe{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new BRe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return dB(e,this._value.scheme);if(this._states[this._stateIdx]===2)return dB(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Bx(e,this._value.query);if(this._states[this._stateIdx]===5)return Bx(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class rE{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}}class nC{static forUris(e=()=>!1,t=()=>!1){return new nC(new HRe(e,t))}static forStrings(){return new nC(new FRe)}static forConfigKeys(){return new nC(new WRe)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let s;this._root||(this._root=new rE,this._root.segment=i.value());const o=[];for(s=this._root;;){const a=i.cmp(s.segment);if(a>0)s.left||(s.left=new rE,s.left.segment=i.value()),o.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new rE,s.right.segment=i.value()),o.push([1,s]),s=s.right;else if(i.hasNext())i.next(),s.mid||(s.mid=new rE,s.mid.segment=i.value()),o.push([0,s]),s=s.mid;else break}const r=s.value;s.value=t,s.key=e;for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=o[a][0],u=o[a+1][0];if(d===1&&u===1)o[a][1]=l.rotateLeft();else if(d===-1&&u===-1)o[a][1]=l.rotateRight();else if(d===1&&u===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(d===-1&&u===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return r}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),s=[];let o=this._root;for(;o;){const r=i.cmp(o.segment);if(r>0)s.push([-1,o]),o=o.left;else if(r<0)s.push([1,o]),o=o.right;else if(i.hasNext())i.next(),s.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const r=this._min(o.right);if(r.key){const{key:a,value:l,segment:c}=r;this._delete(r.key,!1),o.key=a,o.value=l,o.segment=c}}else{const r=o.left??o.right;if(s.length>0){const[a,l]=s[s.length-1];switch(a){case-1:l.left=r;break;case 0:l.mid=r;break;case 1:l.right=r;break}}else this._root=r}for(let r=s.length-1;r>=0;r--){const a=s[r][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[r][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[r][1]=a.rotateRight()),r>0)switch(s[r-1][0]){case-1:s[r-1][1].left=s[r][1];break;case 1:s[r-1][1].right=s[r][1];break;case 0:s[r-1][1].mid=s[r][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,s;for(;i;){const o=t.cmp(i.segment);if(o>0)i=i.left;else if(o<0)i=i.right;else if(t.hasNext())t.next(),s=i.value||s,i=i.mid;else break}return i&&i.value||s}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let s=this._root;for(;s;){const o=i.cmp(s.segment);if(o>0)s=s.left;else if(o<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this._entries(s.mid):t?s.value:void 0}}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const pb=dt("contextService");function yH(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&Le.isUri(e.uri)}function jRe(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&!yH(n)&&!URe(n)}const VRe={id:"empty-window"};function zRe(n,e){if(typeof n=="string"||typeof n>"u")return typeof n=="string"?{id:hg(n)}:VRe;const t=n;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function URe(n){const e=n;return typeof(e==null?void 0:e.id)=="string"&&Le.isUri(e.configPath)}class $Re{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const SH="code-workspace";p("codeWorkspace","Code Workspace");const Sue="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function qRe(n){return n.id===Sue}var xH;(function(n){n.inspectTokensAction=p("inspectTokens","Developer: Inspect Tokens")})(xH||(xH={}));var NT;(function(n){n.gotoLineActionLabel=p("gotoLineActionLabel","Go to Line/Column...")})(NT||(NT={}));var kH;(function(n){n.helpQuickAccessActionLabel=p("helpQuickAccess","Show all Quick Access Providers")})(kH||(kH={}));var IT;(function(n){n.quickCommandActionLabel=p("quickCommandActionLabel","Command Palette"),n.quickCommandHelp=p("quickCommandActionHelp","Show And Run Commands")})(IT||(IT={}));var ak;(function(n){n.quickOutlineActionLabel=p("quickOutlineActionLabel","Go to Symbol..."),n.quickOutlineByCategoryActionLabel=p("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(ak||(ak={}));var LH;(function(n){n.editorViewAccessibleLabel=p("editorViewAccessibleLabel","Editor content")})(LH||(LH={}));var DH;(function(n){n.toggleHighContrast=p("toggleHighContrast","Toggle High Contrast Theme")})(DH||(DH={}));var EH;(function(n){n.bulkEditServiceSummary=p("bulkEditServiceSummary","Made {0} edits in {1} files")})(EH||(EH={}));const xue=dt("workspaceTrustManagementService");let by=[],hU=[],kue=[];function aE(n,e=!1){KRe(n,!1,e)}function KRe(n,e,t){const i=GRe(n,e);by.push(i),i.userConfigured?kue.push(i):hU.push(i),t&&!i.userConfigured&&by.forEach(s=>{s.mime===i.mime||s.userConfigured||(i.extension&&s.extension===i.extension&&console.warn(`Overwriting extension <<${i.extension}>> to now point to mime <<${i.mime}>>`),i.filename&&s.filename===i.filename&&console.warn(`Overwriting filename <<${i.filename}>> to now point to mime <<${i.mime}>>`),i.filepattern&&s.filepattern===i.filepattern&&console.warn(`Overwriting filepattern <<${i.filepattern}>> to now point to mime <<${i.mime}>>`),i.firstline&&s.firstline===i.firstline&&console.warn(`Overwriting firstline <<${i.firstline}>> to now point to mime <<${i.mime}>>`))})}function GRe(n,e){return{id:n.id,mime:n.mime,filename:n.filename,extension:n.extension,filepattern:n.filepattern,firstline:n.firstline,userConfigured:e,filenameLowercase:n.filename?n.filename.toLowerCase():void 0,extensionLowercase:n.extension?n.extension.toLowerCase():void 0,filepatternLowercase:n.filepattern?Mde(n.filepattern.toLowerCase()):void 0,filepatternOnPath:n.filepattern?n.filepattern.indexOf(dn.sep)>=0:!1}}function YRe(){by=by.filter(n=>n.userConfigured),hU=[]}function ZRe(n,e){return QRe(n,e).map(t=>t.id)}function QRe(n,e){let t;if(n)switch(n.scheme){case je.file:t=n.fsPath;break;case je.data:{t=Qg.parseMetaData(n).get(Qg.META_DATA_LABEL);break}case je.vscodeNotebookCell:t=void 0;break;default:t=n.path}if(!t)return[{id:"unknown",mime:Zi.unknown}];t=t.toLowerCase();const i=hg(t),s=QX(t,i,kue);if(s)return[s,{id:_o,mime:Zi.text}];const o=QX(t,i,hU);if(o)return[o,{id:_o,mime:Zi.text}];if(e){const r=XRe(e);if(r)return[r,{id:_o,mime:Zi.text}]}return[{id:"unknown",mime:Zi.unknown}]}function QX(n,e,t){var r;let i,s,o;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){i=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?n:e;(r=l.filepatternLowercase)!=null&&r.call(l,c)&&(s=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}if(i)return i;if(s)return s;if(o)return o}function XRe(n){if(gz(n)&&(n=n.substr(1)),n.length>0)for(let e=by.length-1;e>=0;e--){const t=by[e];if(!t.firstline)continue;const i=n.match(t.firstline);if(i&&i.length>0)return t}}const lE=Object.prototype.hasOwnProperty,XX="vs.editor.nullLanguage";class JRe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(XX,0),this._register(_o,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||XX}}const KS=class KS extends U{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new j),this.onDidChange=this._onDidChange.event,KS.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new JRe,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(ay.onDidChangeLanguages(i=>{this._initializeFromRegistry()})))}dispose(){KS.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},YRe();const e=[].concat(ay.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const i=this._languages[t];i.name&&(this._nameMap[i.name]=i.identifier),i.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=i.identifier}),i.mimetypes.forEach(s=>{this._mimeTypesMap[s]=i.identifier})}),Mi.as(Hl.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let i;lE.call(this._languages,t)?i=this._languages[t]:(this.languageIdCodec.register(t),i={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=i),this._mergeLanguage(i,e)}_mergeLanguage(e,t){const i=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${i}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)aE({id:i,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)aE({id:i,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)aE({id:i,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);$Le(l)||aE({id:i,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(i);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(const a of o)!a||a.length===0||e.aliases.push(a);const r=o!==null&&o.length>0;if(!(r&&o[0]===null)){const a=(r?o[0]:null)||i;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?lE.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return lE.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&lE.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:ZRe(e,t)}};KS.instanceCount=0;let NH=KS;const fa=(n,e)=>n===e;function TT(n=fa){return(e,t)=>Li(e,t,n)}function eAe(){return(n,e)=>n.equals(e)}function IH(n,e,t){if(t!==void 0){const i=n;return i==null||e===void 0||e===null?e===i:t(i,e)}else{const i=n;return(s,o)=>s==null||o===void 0||o===null?o===s:i(s,o)}}function PT(n,e){if(n===e)return!0;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!PT(n[t],e[t]))return!1;return!0}if(n&&typeof n=="object"&&e&&typeof e=="object"&&Object.getPrototypeOf(n)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const t=n,i=e,s=Object.keys(t),o=Object.keys(i),r=new Set(o);if(s.length!==o.length)return!1;for(const a of s)if(!r.has(a)||!PT(t[a],i[a]))return!1;return!0}return!1}class Ts{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return tAe(e,this)}}const JX=new Map,TH=new WeakMap;function tAe(n,e){const t=TH.get(n);if(t)return t;const i=iAe(n,e);if(i){let s=JX.get(i)??0;s++,JX.set(i,s);const o=s===1?i:`${i}#${s}`;return TH.set(n,o),o}}function iAe(n,e){const t=TH.get(n);if(t)return t;const i=e.owner?sAe(e.owner)+".":"";let s;const o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(s=o(),s!==void 0)return i+s}else return i+o;const r=e.referenceFn;if(r!==void 0&&(s=fU(r),s!==void 0))return i+s;if(e.owner!==void 0){const a=nAe(e.owner,n);if(a!==void 0)return i+a}}function nAe(n,e){for(const t in n)if(n[t]===e)return t}const eJ=new Map,tJ=new WeakMap;function sAe(n){const e=tJ.get(n);if(e)return e;const t=oAe(n);let i=eJ.get(t)??0;i++,eJ.set(t,i);const s=i===1?t:`${t}#${i}`;return tJ.set(n,s),s}function oAe(n){const e=n.constructor;return e?e.name:"Object"}function fU(n){const e=n.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),s=i?i[1]:void 0;return s==null?void 0:s.trim()}let rAe;function Lue(){return rAe}let Due;function aAe(n){Due=n}let Eue;function lAe(n){Eue=n}let PH;function cAe(n){PH=n}class Nue{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,s=t===void 0?e:t;return PH({owner:i,debugName:()=>{const o=fU(s);if(o!==void 0)return o;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:s},o=>s(this.read(o),o))}flatten(){return PH({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(Due(this,t)),this}keepObserved(e){return e.add(Eue(this)),this}}class l1 extends Nue{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function Ti(n,e){const t=new c1(n,e);try{n(t)}finally{t.finish()}}let cE;function D0(n){if(cE)n(cE);else{const e=new c1(n,void 0);cE=e;try{n(e)}finally{e.finish(),cE=void 0}}}async function Iue(n,e){const t=new c1(n,e);try{await n(t)}finally{t.finish()}}function _b(n,e,t){n?e(n):Ti(e,t)}class c1{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():fU(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:i,observable:s}=e[t];i.endUpdate(s)}this.updatingObservers=null}}function it(n,e){let t;return typeof n=="string"?t=new Ts(void 0,n,void 0):t=new Ts(n,void 0,void 0),new gU(t,e,fa)}class gU extends l1{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._value=t}get(){return this._value}set(e,t,i){var o;if(i===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new c1(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),(o=Lue())==null||o.handleObservableChanged(this,{oldValue:r,newValue:e,change:i,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,i)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function lk(n,e){let t;return typeof n=="string"?t=new Ts(void 0,n,void 0):t=new Ts(n,void 0,void 0),new dAe(t,e,fa)}class dAe extends gU{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)==null||e.dispose()}}function ye(n,e){return e!==void 0?new bb(new Ts(n,void 0,e),e,void 0,void 0,void 0,fa):new bb(new Ts(void 0,void 0,n),n,void 0,void 0,void 0,fa)}function zL(n,e,t){return new uAe(new Ts(n,void 0,e),e,void 0,void 0,void 0,fa,t)}function Zr(n,e){return new bb(new Ts(n.owner,n.debugName,n.debugReferenceFn),e,void 0,void 0,n.onLastObserverRemoved,n.equalsFn??fa)}cAe(Zr);function Tue(n,e){return new bb(new Ts(n.owner,n.debugName,void 0),e,n.createEmptyChangeSummary,n.handleChange,void 0,n.equalityComparer??fa)}function _m(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);const s=new Q;return new bb(new Ts(i,void 0,t),o=>(s.clear(),t(o,s)),void 0,void 0,()=>s.dispose(),fa)}function Us(n,e){let t,i;e===void 0?(t=n,i=void 0):(i=n,t=e);let s;return new bb(new Ts(i,void 0,t),o=>{s?s.clear():s=new Q;const r=t(o);return r&&s.add(r),r},void 0,void 0,()=>{s&&(s.dispose(),s=void 0)},fa)}class bb extends l1{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,s,o=void 0,r){var a;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=i,this._handleChange=s,this._handleLastObserverRemoved=o,this._equalityComparator=r,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)==null?void 0:a.call(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)==null||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)==null?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var r;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,i=this.value;this.state=3;const s=this.changeSummary;this.changeSummary=(r=this.createChangeSummary)==null?void 0:r.call(this);try{this.value=this._computeFn(this,s)}finally{for(const a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(i,this.value))for(const a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const i of this.observers)i.handlePossibleChange(this);if(t)for(const i of this.observers)i.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const i of t)i.endUpdate(this)}hb(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const i=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:o=>o===e},this.changeSummary):!0,s=this.state===3;if(i&&(this.state===1||s)&&(this.state=2,s))for(const o of this.observers)o.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class uAe extends bb{constructor(e,t,i,s,o=void 0,r,a){super(e,t,i,s,o,r),this.set=a}}function Be(n){return new jA(new Ts(void 0,void 0,n),n,void 0,void 0)}function UL(n,e){return new jA(new Ts(n.owner,n.debugName,n.debugReferenceFn??e),e,void 0,void 0)}function $L(n,e){return new jA(new Ts(n.owner,n.debugName,n.debugReferenceFn??e),e,n.createEmptyChangeSummary,n.handleChange)}function hAe(n,e){const t=new Q,i=$L({owner:n.owner,debugName:n.debugName,debugReferenceFn:n.debugReferenceFn??e,createEmptyChangeSummary:n.createEmptyChangeSummary,handleChange:n.handleChange},(s,o)=>{t.clear(),e(s,o,t)});return xe(()=>{i.dispose(),t.dispose()})}function zo(n){const e=new Q,t=UL({owner:void 0,debugName:void 0,debugReferenceFn:n},i=>{e.clear(),n(i,e)});return xe(()=>{t.dispose(),e.dispose()})}class jA{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,s){var o;this._debugNameData=e,this._runFn=t,this.createChangeSummary=i,this._handleChange=s,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(o=this.createChangeSummary)==null?void 0:o.call(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var i,s;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(i=Lue())==null||i.handleAutorunTriggered(this);const o=this.changeSummary;this.changeSummary=(s=this.createChangeSummary)==null?void 0:s.call(this),this._runFn(this,o)}}finally{for(const o of this.dependenciesToBeRemoved)o.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,hb(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(n){n.Observer=jA})(Be||(Be={}));function Wa(n){return new fAe(n)}class fAe extends Nue{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function Ht(...n){let e,t,i;return n.length===3?[e,t,i]=n:[t,i]=n,new Yf(new Ts(e,void 0,i),t,i,()=>Yf.globalTransaction,fa)}function gAe(n,e,t){return new Yf(new Ts(n.owner,n.debugName,n.debugReferenceFn??t),e,t,()=>Yf.globalTransaction,n.equalsFn??fa)}class Yf extends l1{constructor(e,t,i,s,o){super(),this._debugNameData=e,this.event=t,this._getValue=i,this._getTransaction=s,this._equalityComparator=o,this.hasValue=!1,this.handleEvent=r=>{const a=this._getValue(r),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&_b(this._getTransaction(),d=>{for(const u of this.observers)d.updateObserver(u,this),u.handleChange(this,void 0)},()=>{const d=this.getDebugName();return"Event fired"+(d?`: ${d}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(n){n.Observer=Yf;function e(t,i){let s=!1;Yf.globalTransaction===void 0&&(Yf.globalTransaction=t,s=!0);try{i()}finally{s&&(Yf.globalTransaction=void 0)}}n.batchEventsGlobally=e})(Ht||(Ht={}));function ms(n,e){return new mAe(n,e)}class mAe extends l1{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{Ti(i=>{for(const s of this.observers)i.updateObserver(s,this),s.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function d1(n){return typeof n=="string"?new iJ(n):new iJ(void 0,n)}class iJ extends l1{get debugName(){return new Ts(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){Ti(i=>{this.trigger(i,t)},()=>`Trigger signal ${this.debugName}`);return}for(const i of this.observers)e.updateObserver(i,this),i.handleChange(this,t)}get(){}}function pAe(n){const e=new Pue(!1,void 0);return n.addObserver(e),xe(()=>{n.removeObserver(e)})}lAe(pAe);function u1(n,e){const t=new Pue(!0,e);return n.addObserver(t),e?e(n.get()):n.reportChanges(),xe(()=>{n.removeObserver(t)})}aAe(u1);class Pue{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function qL(n,e){let t;return Zr({owner:n,debugReferenceFn:e},s=>(t=e(s,t),t))}function _Ae(n,e,t,i){let s=new nJ(t,i);return Zr({debugReferenceFn:t,owner:n,onLastObserverRemoved:()=>{s.dispose(),s=new nJ(t)}},r=>(s.setItems(e.read(r)),s.getItems()))}class nJ{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){const t=[],i=new Set(this._cache.keys());for(const s of e){const o=this._keySelector?this._keySelector(s):s;let r=this._cache.get(o);if(r)i.delete(o);else{const a=new Q;r={out:this._map(s,a),store:a},this._cache.set(o,r)}t.push(r.out)}for(const s of i)this._cache.get(s).store.dispose(),this._cache.delete(s);this._items=t}getItems(){return this._items}}function bAe(n,e){return qL(n,(t,i)=>i??e(t))}class VA{static fromFn(e){return new VA(e())}constructor(e){this._value=it(this,void 0),this.promiseResult=this._value,this.promise=e.then(t=>(Ti(i=>{this._value.set(new sJ(t,void 0),i)}),t),t=>{throw Ti(i=>{this._value.set(new sJ(void 0,t),i)}),t})}}class sJ{constructor(e,t){this.data=e,this.error=t}}function Mue(n,e,t,i){return e||(e=s=>s!=null),new Promise((s,o)=>{let r=!0,a=!1;const l=n.map(d=>({isFinished:e(d),error:t?t(d):!1,state:d})),c=Be(d=>{const{isFinished:u,error:h,state:f}=l.read(d);(u||h)&&(r?a=!0:c.dispose(),h?o(h===!0?f:h):s(f))});if(i){const d=i.onCancellationRequested(()=>{c.dispose(),d.dispose(),o(new Pl)});if(i.isCancellationRequested){c.dispose(),d.dispose(),o(new Pl);return}}r=!1,a&&c.dispose()})}class vAe extends l1{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i){super(),this._debugNameData=e,this._equalityComparator=i,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(i===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new c1(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),i!==void 0&&this._deltas.push(i),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(o,r)=>{},handlePossibleChange:o=>{}},this),this._updateCounter>1)for(const o of this.observers)o.handlePossibleChange(this)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function MH(n,e){return n.lazy?new vAe(new Ts(n.owner,n.debugName,void 0),e,n.equalsFn??fa):new gU(new Ts(n.owner,n.debugName,void 0),e,n.equalsFn??fa)}const GS=class GS extends U{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new j),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new j),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new j({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,GS.instanceCount++,this._registry=this._register(new NH(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){GS.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const i=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return YV(i,null)}createById(e){return new oJ(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new oJ(this.onDidChange,()=>{const i=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(i)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=_o),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Hi.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};GS.instanceCount=0;let RH=GS;class oJ{constructor(e,t){this._value=Ht(this,e,()=>t()),this.onDidChange=ue.fromObservable(this._value)}get languageId(){return this._value.get()}}const ck={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Zi.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},wAe=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let zA=wAe;const CAe=new Oc(()=>zA("mouse",!1)),yAe=new Oc(()=>zA("element",!1));function SAe(n){zA=n}function ko(n){return n==="element"?yAe.value:CAe.value}function vy(){return zA("element",!0)}let Rue={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function xAe(n){Rue=n}function $c(){return Rue}class kAe{constructor(e){this.spliceables=e}splice(e,t,i){this.spliceables.forEach(s=>s.splice(e,t,i))}}class Im extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function rJ(n,e){const t=[];for(const i of e){if(n.start>=i.range.end)continue;if(n.end<i.range.start)break;const s=Ss.intersect(n,i.range);Ss.isEmpty(s)||t.push({range:s,size:i.size})}return t}function AH({start:n,end:e},t){return{start:n+t,end:e+t}}function LAe(n){const e=[];let t=null;for(const i of n){const s=i.range.start,o=i.range.end,r=i.size;if(t&&r===t.size){t.range.end=o;continue}t={range:{start:s,end:o},size:r},e.push(t)}return e}function DAe(...n){return LAe(n.reduce((e,t)=>e.concat(t),[]))}class EAe{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,i=[]){const s=i.length-t,o=rJ({start:0,end:e},this.groups),r=rJ({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:AH(l.range,s),size:l.size})),a=i.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=DAe(o,a,r),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,i=this._paddingTop;for(const s of this.groups){const o=s.range.end-s.range.start,r=i+o*s.size;if(e<r)return t+Math.floor((e-i)/s.size);t+=o,i=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,i=0;for(const s of this.groups){const o=s.range.end-s.range.start,r=i+o;if(e<r)return this._paddingTop+t+(e-i)*s.size;t+=o*s.size,i=r}return-1}}class NAe{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),i=!1;if(t)i=this.transactionNodesPendingRemoval.has(t.domNode),i&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const s=ce(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(s);t={domNode:s,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:i}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:i}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(i).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const i of e)this.getRenderer(t).disposeTemplate(i.templateData),i.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var Uh=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};const Tm={CurrentDragAndDropData:void 0},td={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(n){return[n]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class KL{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class IAe{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class TAe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const i=e.files.item(t);i&&(i.size||i.type)&&this.files.push(i)}}}getData(){return{types:this.types,files:this.files}}}function PAe(n,e){return Array.isArray(n)&&Array.isArray(e)?Li(n,e):n===e}class MAe{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,i,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,i)=>i+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const JM=class JM{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:HF(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,i,s=td){var r,a;if(this.virtualDelegate=t,this.domId=`list_id_${++JM.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new qa(50),this.splicing=!1,this.dragOverAnimationStopDisposable=U.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=U.None,this.onDragLeaveTimeout=U.None,this.disposables=new Q,this._onDidChangeContentHeight=new j,this._onDidChangeContentWidth=new j,this.onDidChangeContentHeight=ue.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(s.paddingTop??0);for(const l of i)this.renderers.set(l.templateId,l);this.cache=this.disposables.add(new NAe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=s.horizontalScrolling??td.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof s.paddingBottom>"u"?0:s.paddingBottom,this.accessibilityProvider=new MAe(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(s.transformOptimization??td.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Is.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new a1({forceIntegerValues:!0,smoothScrollDuration:s.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:l=>xr(Te(this.domNode),l)})),this.scrollableElement=this.disposables.add(new PA(this.rowsContainer,{alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel??td.alwaysConsumeMouseWheel,horizontal:1,vertical:s.verticalScrollMode??td.verticalScrollMode,useShadows:s.useShadows??td.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(G(this.rowsContainer,si.Change,l=>this.onTouchChange(l))),this.disposables.add(G(this.scrollableElement.getDomNode(),"scroll",l=>l.target.scrollTop=0)),this.disposables.add(G(this.domNode,"dragover",l=>this.onDragOver(this.toDragEvent(l)))),this.disposables.add(G(this.domNode,"drop",l=>this.onDrop(this.toDragEvent(l)))),this.disposables.add(G(this.domNode,"dragleave",l=>this.onDragLeave(this.toDragEvent(l)))),this.disposables.add(G(this.domNode,"dragend",l=>this.onDragEnd(l))),this.setRowLineHeight=s.setRowLineHeight??td.setRowLineHeight,this.setRowHeight=s.setRowHeight??td.setRowHeight,this.supportDynamicHeights=s.supportDynamicHeights??td.supportDynamicHeights,this.dnd=s.dnd??this.disposables.add(td.dnd),this.layout((r=s.initialSize)==null?void 0:r.height,(a=s.initialSize)==null?void 0:a.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new EAe(e)}splice(e,t,i=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,i=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},r=Ss.intersect(s,o),a=new Map;for(let S=r.end-1;S>=r.start;S--){const x=this.items[S];if(x.dragStartDisposable.dispose(),x.checkedDisposable.dispose(),x.row){let k=a.get(x.templateId);k||(k=[],a.set(x.templateId,k));const D=this.renderers.get(x.templateId);D&&D.disposeElement&&D.disposeElement(x.element,S,x.row.templateData,x.size),k.unshift(x.row)}x.row=null,x.stale=!0}const l={start:e+t,end:this.items.length},c=Ss.intersect(l,s),d=Ss.relativeComplement(l,s),u=i.map(S=>({id:String(this.itemId++),element:S,templateId:this.virtualDelegate.getTemplateId(S),size:this.virtualDelegate.getHeight(S),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(S),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:U.None,checkedDisposable:U.None,stale:!1}));let h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),h=this.items,this.items=u):(this.rangeMap.splice(e,t,u),h=this.items.splice(e,t,...u));const f=i.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),m=AH(c,f),_=Ss.intersect(g,m);for(let S=_.start;S<_.end;S++)this.updateItemInDOM(this.items[S],S);const b=Ss.relativeComplement(m,g);for(const S of b)for(let x=S.start;x<S.end;x++)this.removeItemFromDOM(x);const v=d.map(S=>AH(S,f)),y=[{start:e,end:e+i.length},...v].map(S=>Ss.intersect(g,S)).reverse();for(const S of y)for(let x=S.end-1;x>=S.start;x--){const k=this.items[x],D=a.get(k.templateId),N=D==null?void 0:D.pop();this.insertItemInDOM(x,N)}for(const S of a.values())for(const x of S)this.cache.release(x);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(S=>S.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=xr(Te(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const i={height:typeof e=="number"?e:eEe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:HF(this.domNode)})}render(e,t,i,s,o,r=!1){const a=this.getRenderRange(t,i),l=Ss.relativeComplement(a,e).reverse(),c=Ss.relativeComplement(e,a);if(r){const d=Ss.intersect(e,a);for(let u=d.start;u<d.end;u++)this.updateItemInDOM(this.items[u],u)}this.cache.transact(()=>{for(const d of c)for(let u=d.start;u<d.end;u++)this.removeItemFromDOM(u);for(const d of l)for(let u=d.end-1;u>=d.start;u--)this.insertItemInDOM(u)}),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=i}insertItemInDOM(e,t){var l,c;const i=this.items[e];if(!i.row)if(t)i.row=t,i.stale=!0;else{const d=this.cache.alloc(i.templateId);i.row=d.row,i.stale||(i.stale=d.isReusingConnectedDomNode)}const s=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",s);const o=this.accessibilityProvider.isChecked(i.element);if(typeof o=="boolean")i.row.domNode.setAttribute("aria-checked",String(!!o));else if(o){const d=u=>i.row.domNode.setAttribute("aria-checked",String(!!u));d(o.value),i.checkedDisposable=o.onDidChange(()=>d(o.value))}if(i.stale||!i.row.domNode.parentElement){const d=((c=(l=this.items.at(e+1))==null?void 0:l.row)==null?void 0:c.domNode)??null;(i.row.domNode.parentElement!==this.rowsContainer||i.row.domNode.nextElementSibling!==d)&&this.rowsContainer.insertBefore(i.row.domNode,d),i.stale=!1}this.updateItemInDOM(i,e);const r=this.renderers.get(i.templateId);if(!r)throw new Error(`No renderer found for template id ${i.templateId}`);r==null||r.renderElement(i.element,e,i.row.templateData,i.size);const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=G(i.row.domNode,"dragstart",d=>this.onDragStart(i.element,a,d))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=HF(e.row.domNode);const t=Te(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return ue.map(this.disposables.add(new ft(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return ue.map(this.disposables.add(new ft(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return ue.filter(ue.map(this.disposables.add(new ft(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return ue.map(this.disposables.add(new ft(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return ue.map(this.disposables.add(new ft(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return ue.map(this.disposables.add(new ft(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return ue.any(ue.map(this.disposables.add(new ft(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),ue.map(this.disposables.add(new ft(this.domNode,si.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return ue.map(this.disposables.add(new ft(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return ue.map(this.disposables.add(new ft(this.rowsContainer,si.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),i=typeof t>"u"?void 0:this.items[t],s=i&&i.element,o=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:s,sector:o}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,i){var o,r;if(!i.dataTransfer)return;const s=this.dnd.getDragElements(e);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(ck.TEXT,t),i.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(s,i)),typeof a>"u"&&(a=String(s.length));const l=ce(".monaco-drag-image");l.textContent=a,(u=>{for(;u&&!u.classList.contains("monaco-workbench");)u=u.parentElement;return u||this.domNode.ownerDocument})(this.domNode).appendChild(l),i.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>l.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new KL(s),Tm.CurrentDragAndDropData=new IAe(s),(r=(o=this.dnd).onDragStart)==null||r.call(o,this.currentDragData,i)}onDragOver(e){var o,r;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Tm.CurrentDragAndDropData&&Tm.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Tm.CurrentDragAndDropData)this.currentDragData=Tm.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new TAe}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&((o=t.effect)==null?void 0:o.type)===0?"copy":"move";let i;typeof t!="boolean"&&t.feedback?i=t.feedback:typeof e.index>"u"?i=[-1]:i=[e.index],i=Lh(i).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),i=i[0]===-1?[-1]:i;let s=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(PAe(this.currentDragFeedback,i)&&this.currentDragFeedbackPosition===s)return!0;if(this.currentDragFeedback=i,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),i[0]===-1)this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=xe(()=>{this.domNode.classList.remove(s),this.rowsContainer.classList.remove(s)});else{if(i.length>1&&s!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");s==="drop-target-after"&&i[0]<this.length-1&&(i[0]+=1,s="drop-target-before");for(const a of i){const l=this.items[a];l.dropTarget=!0,(r=l.row)==null||r.domNode.classList.add(s)}this.currentDragFeedbackDisposable=xe(()=>{var a;for(const l of i){const c=this.items[l];c.dropTarget=!1,(a=c.row)==null||a.domNode.classList.remove(s)}})}return!0}onDragLeave(e){var t,i;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Kg(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((i=(t=this.dnd).onDragLeave)==null||i.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Tm.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Tm.CurrentDragAndDropData=void 0,(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=U.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=Tce(this.domNode).top;this.dragOverAnimationDisposable=fEe(Te(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Kg(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,i=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-i))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const i=e.offsetY/this.items[t].size,s=Math.floor(i/.25);return so(s,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let i=e;for(;(Fn(i)||rEe(i))&&i!==this.rowsContainer&&t.contains(i);){const s=i.getAttribute("data-index");if(s){const o=Number(s);if(!isNaN(o))return o}i=i.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,i){const s=this.getRenderRange(e,t);let o,r;e===this.elementTop(s.start)?(o=s.start,r=0):s.end-s.start>1&&(o=s.start+1,r=this.elementTop(o)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const u=this.probeDynamicHeight(d);u!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=Ss.relativeComplement(s,l);for(const h of d)for(let f=h.start;f<h.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const u=Ss.relativeComplement(l,s).reverse();for(const h of u)for(let f=h.end-1;f>=h.start;f--)this.insertItemInDOM(f);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof o=="number"){const h=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(o)-r+h;this.setScrollTop(f,i)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var r,a,l;const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(t.element);if(c!==null){const d=t.size;return t.size=c,t.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const i=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!Rn(t.row.domNode,Te(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-i;const{row:s}=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const o=this.renderers.get(t.templateId);if(!o)throw new Dt("Missing renderer for templateId: "+t.templateId);return o.renderElement(t.element,e,s.templateData,void 0),t.size=s.domNode.offsetHeight,(r=o.disposeElement)==null||r.call(o,t.element,e,s.templateData,void 0),(l=(a=this.virtualDelegate).setDynamicHeight)==null||l.call(a,t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,s.domNode.remove(),this.cache.release(s),t.size-i}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t,i;for(const s of this.items)if(s.dragStartDisposable.dispose(),s.checkedDisposable.dispose(),s.row){const o=this.renderers.get(s.row.templateId);o&&((e=o.disposeElement)==null||e.call(o,s.element,-1,s.row.templateData,void 0),o.disposeTemplate(s.row.templateData))}this.items=[],(t=this.domNode)==null||t.remove(),(i=this.dragOverAnimationDisposable)==null||i.dispose(),this.disposables.dispose()}};JM.InstanceCount=0;let Fl=JM;Uh([an],Fl.prototype,"onMouseClick",null);Uh([an],Fl.prototype,"onMouseDblClick",null);Uh([an],Fl.prototype,"onMouseMiddleClick",null);Uh([an],Fl.prototype,"onMouseDown",null);Uh([an],Fl.prototype,"onMouseOver",null);Uh([an],Fl.prototype,"onMouseOut",null);Uh([an],Fl.prototype,"onContextMenu",null);Uh([an],Fl.prototype,"onTouchStart",null);Uh([an],Fl.prototype,"onTap",null);var bm=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};class RAe{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,i){const s=this.renderedElements.findIndex(o=>o.templateData===i);if(s>=0){const o=this.renderedElements[s];this.trait.unrender(i),o.index=t}else{const o={index:t,templateData:i};this.renderedElements.push(o)}this.trait.renderIndex(t,i)}splice(e,t,i){const s=[];for(const o of this.renderedElements)o.index<e?s.push(o):o.index>=e+t&&s.push({index:o.index+i-t,templateData:o.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:i}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,i)}disposeTemplate(e){const t=this.renderedElements.findIndex(i=>i.templateData===e);t<0||this.renderedElements.splice(t,1)}}let MT=class{get name(){return this._trait}get renderer(){return new RAe(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new j,this.onChange=this._onChange.event}splice(e,t,i){const s=i.length-t,o=e+t,r=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)r.push(this.sortedIndexes[a++]);for(let l=0;l<i.length;l++)i[l]&&r.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=o;)r.push(this.sortedIndexes[a++]+s);this.renderer.splice(e,t,i.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(lJ),t)}_set(e,t,i){const s=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=OH(o,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:i}),s}get(){return this.indexes}contains(e){return Ix(this.sortedIndexes,e,lJ)>=0}dispose(){Qt(this._onChange)}};bm([an],MT.prototype,"renderer",null);class AAe extends MT{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class b4{constructor(e,t,i){this.trait=e,this.view=t,this.identityProvider=i}splice(e,t,i){if(!this.identityProvider)return this.trait.splice(e,t,new Array(i.length).fill(!1));const s=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(s.length===0)return this.trait.splice(e,t,new Array(i.length).fill(!1));const o=new Set(s),r=i.map(a=>o.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,r)}}function pg(n){return n.tagName==="INPUT"||n.tagName==="TEXTAREA"}function GL(n,e){return n.classList.contains(e)?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:GL(n.parentElement,e)}function E0(n){return GL(n,"monaco-editor")}function OAe(n){return GL(n,"monaco-custom-toggle")}function FAe(n){return GL(n,"action-item")}function dS(n){return GL(n,"monaco-tree-sticky-row")}function dk(n){return n.classList.contains("monaco-tree-sticky-container")}function Aue(n){return n.tagName==="A"&&n.classList.contains("monaco-button")||n.tagName==="DIV"&&n.classList.contains("monaco-button-dropdown")?!0:n.classList.contains("monaco-list")||!n.parentElement?!1:Aue(n.parentElement)}class Oue{get onKeyDown(){return ue.chain(this.disposables.add(new ft(this.view.domNode,"keydown")).event,e=>e.filter(t=>!pg(t.target)).map(t=>new ti(t)))}constructor(e,t,i){this.list=e,this.view=t,this.disposables=new Q,this.multipleSelectionDisposables=new Q,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown(s=>{switch(s.keyCode){case 3:return this.onEnter(s);case 16:return this.onUpArrow(s);case 18:return this.onDownArrow(s);case 11:return this.onPageUpArrow(s);case 12:return this.onPageDownArrow(s);case 9:return this.onEscape(s);case 31:this.multipleSelectionSupport&&(ct?s.metaKey:s.ctrlKey)&&this.onCtrlA(s)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Ro(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}bm([an],Oue.prototype,"onKeyDown",null);var Md;(function(n){n[n.Automatic=0]="Automatic",n[n.Trigger=1]="Trigger"})(Md||(Md={}));var aw;(function(n){n[n.Idle=0]="Idle",n[n.Typing=1]="Typing"})(aw||(aw={}));const WAe=new class{mightProducePrintableCharacter(n){return n.ctrlKey||n.metaKey||n.altKey?!1:n.keyCode>=31&&n.keyCode<=56||n.keyCode>=21&&n.keyCode<=30||n.keyCode>=98&&n.keyCode<=107||n.keyCode>=85&&n.keyCode<=95}};class BAe{constructor(e,t,i,s,o){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=s,this.delegate=o,this.enabled=!1,this.state=aw.Idle,this.mode=Md.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Q,this.disposables=new Q,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??Md.Automatic}enable(){if(this.enabled)return;let e=!1;const t=ue.chain(this.enabledDisposables.add(new ft(this.view.domNode,"keydown")).event,o=>o.filter(r=>!pg(r.target)).filter(()=>this.mode===Md.Automatic||this.triggered).map(r=>new ti(r)).filter(r=>e||this.keyboardNavigationEventFilter(r)).filter(r=>this.delegate.mightProducePrintableCharacter(r)).forEach(r=>gt.stop(r,!0)).map(r=>r.browserEvent.key)),i=ue.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);ue.reduce(ue.any(t,i),(o,r)=>r===null?null:(o||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),i(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),i(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var t;const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const i=(t=this.list.options.accessibilityProvider)==null?void 0:t.getAriaLabel(this.list.element(e[0]));typeof i=="string"?yo(i):i&&yo(i.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=aw.Idle,this.triggered=!1;return}const t=this.list.getFocus(),i=t.length>0?t[0]:0,s=this.state===aw.Idle?1:0;this.state=aw.Typing;for(let o=0;o<this.list.length;o++){const r=(i+o+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(nk(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}const c=r2e(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}else if(typeof l>"u"||nk(e,l)){this.previouslyFocused=i,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class HAe{constructor(e,t){this.list=e,this.view=t,this.disposables=new Q;const i=ue.chain(this.disposables.add(new ft(t.domNode,"keydown")).event,o=>o.filter(r=>!pg(r.target)).map(r=>new ti(r)));ue.chain(i,o=>o.filter(r=>r.keyCode===2&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const i=this.view.domElement(t[0]);if(!i)return;const s=i.querySelector("[tabIndex]");if(!s||!Fn(s)||s.tabIndex===-1)return;const o=Te(s).getComputedStyle(s);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function Fue(n){return ct?n.browserEvent.metaKey:n.browserEvent.ctrlKey}function Wue(n){return n.browserEvent.shiftKey}function jAe(n){return Cz(n)&&n.button===2}const aJ={isSelectionSingleChangeEvent:Fue,isSelectionRangeChangeEvent:Wue};class Bue{constructor(e){this.list=e,this.disposables=new Q,this._onPointer=new j,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||aJ),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Is.addTarget(e.getHTMLElement()))),ue.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||aJ))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){E0(e.browserEvent.target)||_s()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(pg(e.browserEvent.target)||E0(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||pg(e.browserEvent.target)||E0(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),jAe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(pg(e.browserEvent.target)||E0(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof i>"u"&&(i=this.list.getFocus()[0]??t,this.list.setAnchor(i));const s=Math.min(i,t),o=Math.max(i,t),r=Ro(s,o+1),a=this.list.getSelection(),l=UAe(OH(a,[i]),i);if(l.length===0)return;const c=OH(r,$Ae(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),o=s.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}class Hue{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,i=[];e.listBackground&&i.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(i.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),i.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&i.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&i.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(i.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(i.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),i.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&i.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&i.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const s=gh(e.listFocusAndSelectionOutline,gh(e.listSelectionOutline,e.listFocusOutline??""));s&&i.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),e.listFocusOutline&&i.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const o=gh(e.listSelectionOutline,e.listInactiveFocusOutline??"");o&&i.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${o}; outline-offset: -1px; }`),e.listSelectionOutline&&i.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&i.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&i.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&i.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),i.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&i.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&i.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=i.join(`
`)}}const VAe={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:te.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:te.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:te.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},zAe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function UAe(n,e){const t=n.indexOf(e);if(t===-1)return[];const i=[];let s=t-1;for(;s>=0&&n[s]===e-(t-s);)i.push(n[s--]);for(i.reverse(),s=t;s<n.length&&n[s]===e+(s-t);)i.push(n[s++]);return i}function OH(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){t.push(n[i]),i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):t.push(e[s++]);return t}function $Ae(n,e){const t=[];let i=0,s=0;for(;i<n.length||s<e.length;)if(i>=n.length)t.push(e[s++]);else if(s>=e.length)t.push(n[i++]);else if(n[i]===e[s]){i++,s++;continue}else n[i]<e[s]?t.push(n[i++]):s++;return t}const lJ=(n,e)=>n-e;class qAe{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,i,s){let o=0;for(const r of this.renderers)r.renderElement(e,t,i[o++],s)}disposeElement(e,t,i,s){var r;let o=0;for(const a of this.renderers)(r=a.disposeElement)==null||r.call(a,e,t,i[o],s),o+=1}disposeTemplate(e){let t=0;for(const i of this.renderers)i.disposeTemplate(e[t++])}}class KAe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new Q}}renderElement(e,t,i){const s=this.accessibilityProvider.getAriaLabel(e),o=s&&typeof s!="string"?s:Wa(s);i.disposables.add(Be(a=>{this.setAriaLabel(a.readObservable(o),i.container)}));const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?i.container.setAttribute("aria-level",`${r}`):i.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,i,s){i.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class GAe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)==null||s.call(i,e,t)}onDragOver(e,t,i,s,o){return this.dnd.onDragOver(e,t,i,s,o)}onDragLeave(e,t,i,s){var o,r;(r=(o=this.dnd).onDragLeave)==null||r.call(o,e,t,i,s)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}drop(e,t,i,s,o){this.dnd.drop(e,t,i,s,o)}dispose(){this.dnd.dispose()}}let va=class{get onDidChangeFocus(){return ue.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return ue.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=ue.chain(this.disposables.add(new ft(this.view.domNode,"keydown")).event,o=>o.map(r=>new ti(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>gt.stop(r,!0)).filter(()=>!1)),i=ue.chain(this.disposables.add(new ft(this.view.domNode,"keyup")).event,o=>o.forEach(()=>e=!1).map(r=>new ti(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>gt.stop(r,!0)).map(({browserEvent:r})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,d=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:d,browserEvent:r}})),s=ue.chain(this.view.onContextMenu,o=>o.filter(r=>!e).map(({element:r,index:a,browserEvent:l})=>({element:r,index:a,anchor:new Sl(Te(this.view.domNode),l),browserEvent:l})));return ue.any(t,i,s)}get onKeyDown(){return this.disposables.add(new ft(this.view.domNode,"keydown")).event}get onDidFocus(){return ue.signal(this.disposables.add(new ft(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return ue.signal(this.disposables.add(new ft(this.view.domNode,"blur",!0)).event)}constructor(e,t,i,s,o=zAe){var c,d,u;this.user=e,this._options=o,this.focus=new MT("focused"),this.anchor=new MT("anchor"),this.eventBufferer=new EL,this._ariaLabel="",this.disposables=new Q,this._onDidDispose=new j,this.onDidDispose=this._onDidDispose.event;const r=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(c=this._options.accessibilityProvider)==null?void 0:c.getWidgetRole():"list";this.selection=new AAe(r!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(a.push(new KAe(this.accessibilityProvider)),(u=(d=this.accessibilityProvider).onDidChangeActiveDescendant)==null||u.call(d,this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(h=>new qAe(h.templateId,[...a,h]));const l={...o,dnd:o.dnd&&new GAe(this,o.dnd)};if(this.view=this.createListView(t,i,s,l),this.view.domNode.setAttribute("role",r),o.styleController)this.styleController=o.styleController(this.view.domId);else{const h=ha(this.view.domNode);this.styleController=new Hue(h,this.view.domId)}if(this.spliceable=new kAe([new b4(this.focus,this.view,o.identityProvider),new b4(this.selection,this.view,o.identityProvider),new b4(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new HAe(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new Oue(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const h=o.keyboardNavigationDelegate||WAe;this.typeNavigationController=new BAe(this,this.view,o.keyboardNavigationLabelProvider,o.keyboardNavigationEventFilter??(()=>!0),h),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,i,s){return new Fl(e,t,i,s)}createMouseController(e){return new Bue(this)}updateOptions(e={}){var t,i;this._options={...this._options,...e},(t=this.typeNavigationController)==null||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(i=this.keyboardController)==null||i.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,i=[]){if(e<0||e>this.view.length)throw new Im(this.user,`Invalid start index: ${e}`);if(t<0)throw new Im(this.user,`Invalid delete count: ${t}`);t===0&&i.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,i))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const i of e)if(i<0||i>=this.length)throw new Im(this.user,`Invalid index ${i}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Im(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return YV(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const i of e)if(i<0||i>=this.length)throw new Im(this.user,`Invalid index ${i}`);this.focus.set(e,t)}focusNext(e=1,t=!1,i,s){if(this.length===0)return;const o=this.focus.get(),r=this.findNextIndex(o.length>0?o[0]+e:0,t,s);r>-1&&this.setFocus([r],i)}focusPrevious(e=1,t=!1,i,s){if(this.length===0)return;const o=this.focus.get(),r=this.findPreviousIndex(o.length>0?o[0]-e:0,t,s);r>-1&&this.setFocus([r],i)}async focusNextPage(e,t){let i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;const s=this.getFocus()[0];if(s!==i&&(s===void 0||i>s)){const o=this.findPreviousIndex(i,!1,t);o>-1&&s!==o?this.setFocus([o],e):this.setFocus([i],e)}else{const o=this.view.getScrollTop();let r=o+this.view.renderHeight;i>s&&(r-=this.view.elementHeight(i)),this.view.setScrollTop(r),this.view.getScrollTop()!==o&&(this.setFocus([]),await Ih(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,i=()=>0){let s;const o=i(),r=this.view.getScrollTop()+o;r===0?s=this.view.indexAt(r):s=this.view.indexAfter(r-1);const a=this.getFocus()[0];if(a!==s&&(a===void 0||a>=s)){const l=this.findNextIndex(s,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([s],e)}else{const l=r;this.view.setScrollTop(r-this.view.renderHeight-o),this.view.getScrollTop()+i()!==l&&(this.setFocus([]),await Ih(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(this.length===0)return;const i=this.findPreviousIndex(this.length-1,!1,t);i>-1&&this.setFocus([i],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,i){if(this.length===0)return;const s=this.findNextIndex(e,!1,i);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!i||i(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,i){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!i||i(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,i=0){if(e<0||e>=this.length)throw new Im(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),o=this.view.elementTop(e),r=this.view.elementHeight(e);if(jg(t)){const a=r-this.view.renderHeight+i;this.view.setScrollTop(a*so(t,0,1)+o-i)}else{const a=o+r,l=s+this.view.renderHeight;o<s+i&&a>=l||(o<s+i||a>=l&&r>=this.view.renderHeight?this.view.setScrollTop(o-i):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new Im(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),s=this.view.elementTop(e),o=this.view.elementHeight(e);if(s<i+t||s+o>i+this.view.renderHeight)return null;const r=o-this.view.renderHeight+t;return Math.abs((i+t-s)/r)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(i=>this.view.element(i)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var t;const e=this.focus.get();if(e.length>0){let i;(t=this.accessibilityProvider)!=null&&t.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};bm([an],va.prototype,"onDidChangeFocus",null);bm([an],va.prototype,"onDidChangeSelection",null);bm([an],va.prototype,"onContextMenu",null);bm([an],va.prototype,"onKeyDown",null);bm([an],va.prototype,"onDidFocus",null);bm([an],va.prototype,"onDidBlur",null);const kp=ce,jue="selectOption.entry.template";class YAe{get templateId(){return jue}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=ne(e,kp(".option-text")),t.detail=ne(e,kp(".option-detail")),t.decoratorRight=ne(e,kp(".option-decorator-right")),t}renderElement(e,t,i){const s=i,o=e.text,r=e.detail,a=e.decoratorRight,l=e.isDisabled;s.text.textContent=o,s.detail.textContent=r||"",s.decoratorRight.innerText=a||"",l?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(e){}}const gd=class gd extends U{constructor(e,t,i,s,o){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=o||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=gd.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new j,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(i),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register($c().setupManagedHover(ko("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return jue}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ce(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=ne(this.selectDropDownContainer,kp(".select-box-details-pane"));const t=ne(this.selectDropDownContainer,kp(".select-box-dropdown-container-width-control")),i=ne(t,kp(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",ne(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=ha(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(G(this.selectDropDownContainer,le.DRAG_START,s=>{gt.stop(s,!0)}))}registerListeners(){this._register(Fi(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(G(this.selectElement,le.CLICK,t=>{gt.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(G(this.selectElement,le.MOUSE_DOWN,t=>{gt.stop(t)}));let e;this._register(G(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(G(this.selectElement,"touchend",t=>{gt.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(G(this.selectElement,le.KEY_DOWN,t=>{const i=new ti(t);let s=!1;ct?(i.keyCode===18||i.keyCode===16||i.keyCode===10||i.keyCode===3)&&(s=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(s=!0),s&&(this.showSelectDropDown(),gt.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){Li(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled)),typeof i.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)==null||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",i=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=i}styleList(){const e=this.styles.selectBackground??"",t=gh(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const i=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=i,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,i)=>{this.updateDetail(i),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=Te(this.selectElement),i=Qi(this.selectElement),s=Te(this.selectElement).getComputedStyle(this.selectElement),o=parseFloat(s.getPropertyValue("--dropdown-padding-top"))+parseFloat(s.getPropertyValue("--dropdown-padding-bottom")),r=t.innerHeight-i.top-i.height-(this.selectBoxOptions.minBottomMargin||0),a=i.top-gd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),d=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=d,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let u=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const h=this._hasDetails?this._cachedMaxDetailsHeight:0,f=u+o+h,g=Math.floor((r-o-h)/this.getHeight()),m=Math.floor((a-o-h)/this.getHeight());if(e)return i.top+i.height>t.innerHeight-22||i.top<gd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&m<1?!1:(g<gd.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&m>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(i.top+i.height>t.innerHeight-22||i.top<gd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&g<1||this._dropDownPosition===1&&m<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&g+m<1)return this.hideSelectDropDown(!0),!1;f>r&&(u=g*this.getHeight())}else f>a&&(u=m*this.getHeight());return this.selectList.layout(u),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=u+o+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=u+o+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=d,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let i=0,s=0;this.options.forEach((o,r)=>{const a=o.detail?o.detail.length:0,l=o.decoratorRight?o.decoratorRight.length:0,c=o.text.length+a+l;c>s&&(i=r,s=c)}),e.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),t=lr(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=ne(e,kp(".select-box-dropdown-list-container")),this.listRenderer=new YAe,this.selectList=this._register(new va("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:s=>{let o=s.text;return s.detail&&(o+=`. ${s.detail}`),s.decoratorRight&&(o+=`. ${s.decoratorRight}`),s.description&&(o+=`. ${s.description}`),o},getWidgetAriaLabel:()=>p({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>ct?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new ft(this.selectDropDownListContainer,"keydown")),i=ue.chain(t.event,s=>s.filter(()=>this.selectList.length>0).map(o=>new ti(o)));this._register(ue.chain(i,s=>s.filter(o=>o.keyCode===3))(this.onEnter,this)),this._register(ue.chain(i,s=>s.filter(o=>o.keyCode===2))(this.onEnter,this)),this._register(ue.chain(i,s=>s.filter(o=>o.keyCode===9))(this.onEscape,this)),this._register(ue.chain(i,s=>s.filter(o=>o.keyCode===16))(this.onUpArrow,this)),this._register(ue.chain(i,s=>s.filter(o=>o.keyCode===18))(this.onDownArrow,this)),this._register(ue.chain(i,s=>s.filter(o=>o.keyCode===12))(this.onPageDown,this)),this._register(ue.chain(i,s=>s.filter(o=>o.keyCode===11))(this.onPageUp,this)),this._register(ue.chain(i,s=>s.filter(o=>o.keyCode===14))(this.onHome,this)),this._register(ue.chain(i,s=>s.filter(o=>o.keyCode===13))(this.onEnd,this)),this._register(ue.chain(i,s=>s.filter(o=>o.keyCode>=21&&o.keyCode<=56||o.keyCode>=85&&o.keyCode<=113))(this.onCharacter,this)),this._register(G(this.selectList.getHTMLElement(),le.POINTER_UP,s=>this.onPointerUp(s))),this._register(this.selectList.onMouseOver(s=>typeof s.index<"u"&&this.selectList.setFocus([s.index]))),this._register(this.selectList.onDidChangeFocus(s=>this.onListFocus(s))),this._register(G(this.selectDropDownContainer,le.FOCUS_OUT,s=>{!this._isVisible||Rn(s.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;gt.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const i=t.closest(".monaco-list-row");if(!i)return;const s=Number(i.getAttribute("data-index")),o=i.classList.contains("option-disabled");s>=0&&s<this.options.length&&!o&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const i=o=>{for(let r=0;r<o.childNodes.length;r++){const a=o.childNodes.item(r);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():i(a)}},s=FA({value:e,supportThemeIcons:!0},{actionHandler:t});return s.element.classList.add("select-box-description-markdown"),i(s.element),s.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],i=(t==null?void 0:t.description)??"",s=(t==null?void 0:t.descriptionIsMarkdown)??!1;if(i){if(s){const o=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(i,o))}else this.selectionDetailsPane.innerText=i;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){gt.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){gt.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){gt.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(gt.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){gt.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){gt.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){gt.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){gt.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Uu.toString(e.keyCode);let i=-1;for(let s=0;s<this.options.length-1;s++)if(i=(s+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===t&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),gt.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};gd.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,gd.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,gd.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let FH=gd;class ZAe extends U{constructor(e,t,i,s){super(),this.selected=0,this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new j),this.styles=i,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Is.addTarget(this.selectElement)),[si.Tap].forEach(e=>{this._register(G(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Fi(this.selectElement,"click",e=>{gt.stop(e,!0)})),this._register(Fi(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Fi(this.selectElement,"keydown",e=>{let t=!1;ct?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!Li(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((i,s)=>{this.selectElement.add(this.createOption(i.text,s,i.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,i){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!i,s}}class QAe extends ba{constructor(e,t,i,s,o){super(),ct&&!(o!=null&&o.useCustomDrawn)?this.selectBoxDelegate=new ZAe(e,t,s,o):this.selectBoxDelegate=new FH(e,t,i,s,o),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class gc extends U{get action(){return this._action}constructor(e,t,i={}){super(),this.options=i,this._context=e||this,this._action=t,t instanceof br&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new ub)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Is.addTarget(e));const i=this.options&&this.options.draggable;i&&(e.draggable=!0,$a&&this._register(G(e,le.DRAG_START,s=>{var o;return(o=s.dataTransfer)==null?void 0:o.setData(ck.TEXT,this._action.label)}))),this._register(G(t,si.Tap,s=>this.onClick(s,!0))),this._register(G(t,le.MOUSE_DOWN,s=>{i||gt.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),ct&&this._register(G(t,le.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(G(t,le.CLICK,s=>{gt.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(G(t,le.DBLCLICK,s=>{gt.stop(s,!0)})),[le.MOUSE_UP,le.MOUSE_OUT].forEach(s=>{this._register(G(t,s,o=>{gt.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var s;gt.stop(e,!0);const i=Yr(this._context)?(s=this.options)!=null&&s.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var t;if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),(t=this.options.hoverDelegate)!=null&&t.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const i=this.options.hoverDelegate??ko("element");this.customHover=this._store.add($c().setupManagedHover(i,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class wy extends gc{constructor(e,t,i){super(e,t,i),this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass=""}render(e){super.render(e),xt(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const i=document.createElement("span");i.classList.add("keybinding"),i.textContent=this.options.keybinding,this.element.appendChild(i)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Wn.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=p({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)==null||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)==null||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)==null||t.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class XAe extends gc{constructor(e,t,i,s,o,r,a){super(e,t),this.selectBox=new QAe(i,s,o,r,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)==null||e.focus()}blur(){var e;(e=this.selectBox)==null||e.blur()}render(e){this.selectBox.render(e)}}class JAe extends ub{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new j),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ne(e,ce(".monaco-dropdown")),this._label=ne(this._element,ce(".dropdown-label"));let i=t.labelRenderer;i||(i=o=>(o.textContent=t.label||"",null));for(const o of[le.CLICK,le.MOUSE_DOWN,si.Tap])this._register(G(this.element,o,r=>gt.stop(r,!0)));for(const o of[le.MOUSE_DOWN,si.Tap])this._register(G(this._label,o,r=>{Cz(r)&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register(G(this._label,le.KEY_UP,o=>{const r=new ti(o);(r.equals(3)||r.equals(10))&&(gt.stop(o,!0),this.visible?this.hide():this.show())}));const s=i(this._label);s&&this._register(s),this._register(Is.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class eOe extends JAe{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class RT extends gc{constructor(e,t,i,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new j),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=o=>{this.element=ne(o,ce("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register($c().setupManagedHover(this.options.hoverDelegate??ko("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},i=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new eOe(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var r;(r=this.element)==null||r.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return o.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)==null||e.show()}updateEnabled(){var t,i;const e=!this.action.enabled;(t=this.actionItem)==null||t.classList.toggle("disabled",e),(i=this.element)==null||i.classList.toggle("disabled",e)}}function tOe(n){return n&&typeof n=="object"&&typeof n.original=="string"&&typeof n.value=="string"}function iOe(n){return n?n.condition!==void 0:!1}var sC;(function(n){n[n.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",n[n.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(sC||(sC={}));var lw;(function(n){n[n.None=0]="None",n[n.Initialized=1]="Initialized",n[n.Closed=2]="Closed"})(lw||(lw={}));const e2=class e2 extends U{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new rb),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=lw.None,this.cache=new Map,this.flushDelayer=this._register(new _ce(e2.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,i;this._onDidChangeStorage.pause();try{(t=e.changed)==null||t.forEach((s,o)=>this.acceptExternal(o,s)),(i=e.deleted)==null||i.forEach(s=>this.acceptExternal(s,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===lw.Closed)return;let i=!1;Yr(t)?i=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0),i&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const i=this.cache.get(e);return Yr(i)?t:i}getBoolean(e,t){const i=this.get(e);return Yr(i)?t:i==="true"}getNumber(e,t){const i=this.get(e);return Yr(i)?t:parseInt(i,10)}async set(e,t,i=!1){if(this.state===lw.Closed)return;if(Yr(t))return this.delete(e,i);const s=Gn(t)||Array.isArray(t)?M2e(t):String(t);if(this.cache.get(e)!==s)return this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:i}),this.doFlush()}async delete(e,t=!1){if(!(this.state===lw.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())==null||t()})}async doFlush(e){return this.options.hint===sC.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};e2.DEFAULT_FLUSH_DELAY=100;let uS=e2;class v4{constructor(){this.onDidChangeItemsExternal=ue.None,this.items=new Map}async updateItems(e){var t,i;(t=e.insert)==null||t.forEach((s,o)=>this.items.set(o,s)),(i=e.delete)==null||i.forEach(s=>this.items.delete(s))}}const RN="__$__targetStorageMarker",jl=dt("storageService");var uk;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(uk||(uk={}));function nOe(n){const e=n.get(RN);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const t2=class t2 extends U{constructor(e={flushInterval:t2.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new rb),this._onDidChangeTarget=this._register(new rb),this._onWillSaveState=this._register(new j),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,i){return ue.filter(this._onDidChangeValue.event,s=>s.scope===e&&(t===void 0||s.key===t),i)}emitDidChangeValue(e,t){const{key:i,external:s}=t;if(i===RN){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:i,target:this.getKeyTargets(e)[i],external:s})}get(e,t,i){var s;return(s=this.getStorage(t))==null?void 0:s.get(e,i)}getBoolean(e,t,i){var s;return(s=this.getStorage(t))==null?void 0:s.getBoolean(e,i)}getNumber(e,t,i){var s;return(s=this.getStorage(t))==null?void 0:s.getNumber(e,i)}store(e,t,i,s,o=!1){if(Yr(t)){this.remove(e,i,o);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,i,s),(r=this.getStorage(i))==null||r.set(e,t,o)})}remove(e,t,i=!1){this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,t,void 0),(s=this.getStorage(t))==null||s.delete(e,i)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,i,s=!1){var r,a;const o=this.getKeyTargets(t);typeof i=="number"?o[e]!==i&&(o[e]=i,(r=this.getStorage(t))==null||r.set(RN,JSON.stringify(o),s)):typeof o[e]=="number"&&(delete o[e],(a=this.getStorage(t))==null||a.set(RN,JSON.stringify(o),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?nOe(t):Object.create(null)}};t2.DEFAULT_FLUSH_INTERVAL=60*1e3;let WH=t2;class sOe extends WH{constructor(){super(),this.applicationStorage=this._register(new uS(new v4,{hint:sC.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new uS(new v4,{hint:sC.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new uS(new v4,{hint:sC.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function oOe(n,e){const t={...e};for(const i in n){const s=n[i];t[i]=s!==void 0?pe(s):void 0}return t}const rOe={keybindingLabelBackground:pe(ZPe),keybindingLabelForeground:pe(QPe),keybindingLabelBorder:pe(XPe),keybindingLabelBottomBorder:pe(JPe),keybindingLabelShadow:pe(o1)},aOe={buttonForeground:pe(Yde),buttonSeparator:pe(OPe),buttonBackground:pe(x0),buttonHoverBackground:pe(FPe),buttonSecondaryForeground:pe(BPe),buttonSecondaryBackground:pe(oH),buttonSecondaryHoverBackground:pe(HPe),buttonBorder:pe(WPe)},lOe={progressBarBackground:pe(ZTe)},AT={inputActiveOptionBorder:pe(NA),inputActiveOptionForeground:pe(IA),inputActiveOptionBackground:pe(FL)};pe(k0),pe(jPe),pe(VPe),pe(zPe),pe(UPe),pe($Pe),pe(qPe);pe(KPe),pe(YPe),pe(GPe);pe(ia),pe(LA),pe(o1),pe(vt),pe(_Pe),pe(bPe),pe(vPe),pe(GTe);const OT={inputBackground:pe(sH),inputForeground:pe(Kde),inputBorder:pe(Gde),inputValidationInfoBorder:pe(EPe),inputValidationInfoBackground:pe(LPe),inputValidationInfoForeground:pe(DPe),inputValidationWarningBorder:pe(TPe),inputValidationWarningBackground:pe(NPe),inputValidationWarningForeground:pe(IPe),inputValidationErrorBorder:pe(RPe),inputValidationErrorBackground:pe(PPe),inputValidationErrorForeground:pe(MPe)},cOe={listFilterWidgetBackground:pe(hMe),listFilterWidgetOutline:pe(fMe),listFilterWidgetNoMatchesOutline:pe(gMe),listFilterWidgetShadow:pe(mMe),inputBoxStyles:OT,toggleStyles:AT},Vue={badgeBackground:pe(IN),badgeForeground:pe(YTe),badgeBorder:pe(vt)};pe(mPe),pe(gPe),pe(CX),pe(CX),pe(pPe);const zb={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:pe(eMe),listFocusForeground:pe(tMe),listFocusOutline:pe(iMe),listActiveSelectionBackground:pe(fb),listActiveSelectionForeground:pe(Jx),listActiveSelectionIconForeground:pe(Zde),listFocusAndSelectionOutline:pe(nMe),listFocusAndSelectionBackground:pe(fb),listFocusAndSelectionForeground:pe(Jx),listInactiveSelectionBackground:pe(sMe),listInactiveSelectionIconForeground:pe(rMe),listInactiveSelectionForeground:pe(oMe),listInactiveFocusBackground:pe(aMe),listInactiveFocusOutline:pe(lMe),listHoverBackground:pe(Qde),listHoverForeground:pe(Xde),listDropOverBackground:pe(cMe),listDropBetweenBackground:pe(dMe),listSelectionOutline:pe(vi),listHoverOutline:pe(vi),treeIndentGuidesStroke:pe(Jde),treeInactiveIndentGuidesStroke:pe(pMe),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:pe(jz),tableColumnsBorder:pe(_Me),tableOddRowsBackgroundColor:pe(bMe)};function Ub(n){return oOe(n,zb)}const dOe={selectBackground:pe(TA),selectListBackground:pe(APe),selectForeground:pe(Kz),decoratorRightForeground:pe(eue),selectBorder:pe(Gz),focusBorder:pe(Zd),listFocusBackground:pe(tk),listInactiveSelectionIconForeground:pe(Yz),listFocusForeground:pe(ek),listFocusOutline:VTe(vi,te.transparent.toString()),listHoverBackground:pe(Qde),listHoverForeground:pe(Xde),listHoverOutline:pe(vi),selectListBorder:pe(Vz),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},uOe={shadowColor:pe(o1),borderColor:pe(vMe),foregroundColor:pe(wMe),backgroundColor:pe(CMe),selectionForegroundColor:pe(yMe),selectionBackgroundColor:pe(SMe),selectionBorderColor:pe(xMe),separatorColor:pe(kMe),scrollbarShadow:pe(jz),scrollbarSliderBackground:pe(Bde),scrollbarSliderHoverBackground:pe(Hde),scrollbarSliderActiveBackground:pe(jde)};var UA=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ho=function(n,e){return function(t,i){e(t,i,n)}};function hOe(n,e,t,i){let s,o,r;if(Array.isArray(n))r=n,s=e,o=t;else{const c=e;r=n.getActions(c),s=t,o=i}const a=Ju.getInstance(),l=a.keyStatus.altKey||(vs||vo)&&a.keyStatus.shiftKey;zue(r,s,l,o?c=>c===o:c=>c==="navigation")}function $A(n,e,t,i,s,o){let r,a,l,c,d;if(Array.isArray(n))d=n,r=e,a=t,l=i,c=s;else{const h=e;d=n.getActions(h),r=t,a=i,l=s,c=o}zue(d,r,!1,typeof a=="string"?h=>h===a:a,l,c)}function zue(n,e,t,i=r=>r==="navigation",s=()=>!1,o=!1){let r,a;Array.isArray(e)?(r=e,a=e):(r=e.primary,a=e.secondary);const l=new Set;for(const[c,d]of n){let u;i(c)?(u=r,u.length>0&&o&&u.push(new Wn)):(u=a,u.length>0&&u.push(new Wn));for(let h of d){t&&(h=h instanceof vr&&h.alt?h.alt:h);const f=u.push(h);h instanceof ry&&l.add({group:c,action:h,index:f-1})}}for(const{group:c,action:d,index:u}of l){const h=i(c)?r:a,f=d.actions;s(d,c,h.length)&&h.splice(u,1,...f)}}let Xg=class extends wy{constructor(e,t,i,s,o,r,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._options=t,this._keybindingService=i,this._notificationService=s,this._contextKeyService=o,this._themeService=r,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new jn),this._altKey=Ju.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const i=()=>{var o;const s=!!((o=this._menuItemAction.alt)!=null&&o.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(G(e,"mouseleave",s=>{t=!1,i()})),this._register(G(e,"mouseenter",s=>{t=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var o;const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let s=t?p("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&((o=this._menuItemAction.alt)!=null&&o.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?p("titleAndKb","{0} ({1})",r,l):r;s=p("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,uU.modifierLabels[mr].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:i}=this;if(!t||!i)return;const s=this._commandAction.checked&&iOe(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(s)if(Re.isThemeIcon(s)){const o=Re.asClassNameArray(s);i.classList.add(...o),this._itemClassDispose.value=xe(()=>{i.classList.remove(...o)})}else i.style.backgroundImage=cy(this._themeService.getColorTheme().type)?Th(s.dark):Th(s.light),i.classList.add("icon"),this._itemClassDispose.value=El(xe(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};Xg=UA([Ho(2,Ft),Ho(3,rn),Ho(4,Ae),Ho(5,kn),Ho(6,Er),Ho(7,Nr)],Xg);class mU extends Xg{render(e){var t;this.options.label=!0,this.options.icon=!1,super.render(e),e.classList.add("text-only"),e.classList.toggle("use-comma",((t=this._options)==null?void 0:t.useComma)??!1)}updateLabel(){var t;const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const i=mU._symbolPrintEnter(e);(t=this._options)!=null&&t.conversational?this.label.textContent=p({key:"content2",comment:['A label with keybindg like "ESC to dismiss"']},"{1} to {0}",this._action.label,i):this.label.textContent=p({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,i)}}static _symbolPrintEnter(e){var t;return(t=e.getLabel())==null?void 0:t.replace(/\benter\b/gi,"").replace(/\bEscape\b/gi,"Esc")}}let BH=class extends RT{constructor(e,t,i,s,o){const r={...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!1,classNames:(t==null?void 0:t.classNames)??(Re.isThemeIcon(e.item.icon)?Re.asClassName(e.item.icon):void 0),keybindingProvider:(t==null?void 0:t.keybindingProvider)??(a=>i.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},s,r),this._keybindingService=i,this._contextMenuService=s,this._themeService=o}render(e){super.render(e),xt(this.element),e.classList.add("menu-entry");const t=this._action,{icon:i}=t.item;if(i&&!Re.isThemeIcon(i)){this.element.classList.add("icon");const s=()=>{this.element&&(this.element.style.backgroundImage=cy(this._themeService.getColorTheme().type)?Th(i.dark):Th(i.light))};s(),this._register(this._themeService.onDidColorThemeChange(()=>{s()}))}}};BH=UA([Ho(2,Ft),Ho(3,Er),Ho(4,kn)],BH);let HH=class extends gc{constructor(e,t,i,s,o,r,a,l){super(null,e),this._keybindingService=i,this._notificationService=s,this._contextMenuService=o,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const d=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;d&&(c=e.actions.find(h=>d===h.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(Xg,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const u={keybindingProvider:h=>this._keybindingService.lookupKeybinding(h.id),...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!0,classNames:(t==null?void 0:t.classNames)??["codicon","codicon-chevron-down"],actionRunner:(t==null?void 0:t.actionRunner)??new ub};this._dropdown=new RT(e,e.actions,this._contextMenuService,u),this._register(this._dropdown.actionRunner.onDidRun(h=>{h.action instanceof vr&&this.update(h.action)}))}update(e){var t;(t=this._options)!=null&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Xg,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends ub{async runAction(i,s){await i.run(void 0)}},this._container&&this._defaultAction.render(yz(this._container,ce(".action-container")))}_getDefaultActionKeybindingLabel(e){var i;let t;if((i=this._options)!=null&&i.renderKeybindingWithDefaultActionLabel){const s=this._keybindingService.lookupKeybinding(e.id);s&&(t=`(${s.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ce(".action-container");this._defaultAction.render(ne(this._container,t)),this._register(G(t,le.KEY_DOWN,s=>{const o=new ti(s);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));const i=ce(".dropdown-action-container");this._dropdown.render(ne(this._container,i)),this._register(G(i,le.KEY_DOWN,s=>{var r;const o=new ti(s);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(r=this._defaultAction.element)==null||r.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};HH=UA([Ho(2,Ft),Ho(3,rn),Ho(4,Er),Ho(5,pa),Ho(6,ke),Ho(7,jl)],HH);let jH=class extends XAe{constructor(e,t){super(null,e,e.actions.map(i=>({text:i.id===Wn.ID?"":i.label,isDisabled:!i.enabled})),0,t,dOe,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(i=>i.checked)))}render(e){super.render(e),e.style.borderColor=pe(Gz)}runAction(e,t){const i=this.action.actions[t];i&&this.actionRunner.run(i)}};jH=UA([Ho(1,zh)],jH);function Uue(n,e,t){return e instanceof vr?n.createInstance(Xg,e,t):e instanceof Jw?e.item.isSelection?n.createInstance(jH,e):e.item.rememberDefaultAction?n.createInstance(HH,e,{...t,persistLastActionId:!0}):n.createInstance(BH,e,t):void 0}class ca extends U{constructor(e,t={}){var o,r;super(),this._actionRunnerDisposables=this._register(new Q),this.viewItemDisposables=this._register(new nz),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new j),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new j({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new j),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new j),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:((o=this.options.triggerKeys)==null?void 0:o.keyDown)??!1,keys:((r=this.options.triggerKeys)==null?void 0:r.keys)??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(vy()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new ub,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(a=>this._onDidRun.fire(a))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(a=>this._onWillRun.fire(a))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let i,s;switch(this._orientation){case 0:i=[15],s=[17];break;case 1:i=[16],s=[18],this.domNode.className+=" vertical";break}this._register(G(this.domNode,le.KEY_DOWN,a=>{const l=new ti(a);let c=!0;const d=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;i&&(l.equals(i[0])||l.equals(i[1]))?c=this.focusPrevious():s&&(l.equals(s[0])||l.equals(s[1]))?c=this.focusNext():l.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():l.equals(14)?c=this.focusFirst():l.equals(13)?c=this.focusLast():l.equals(2)&&d instanceof gc&&d.trapsArrowNavigation?c=this.focusNext(void 0,!0):this.isTriggerKeyEvent(l)?this._triggerKeys.keyDown?this.doTrigger(l):this.triggerKeyDown=!0:c=!1,c&&(l.preventDefault(),l.stopPropagation())})),this._register(G(this.domNode,le.KEY_UP,a=>{const l=new ti(a);this.isTriggerKeyEvent(l)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(l)),l.preventDefault(),l.stopPropagation()):(l.equals(2)||l.equals(1026)||l.equals(16)||l.equals(18)||l.equals(15)||l.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(Fc(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(_s()===this.domNode||!Rn(_s(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(i=>i instanceof gc&&i.isEnabled());t instanceof gc&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof gc&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||e.equals(i)}),t}updateFocusedItem(){var e,t;for(let i=0;i<this.actionsList.children.length;i++){const s=this.actionsList.children[i];if(Rn(_s(),s)){this.focusedItem=i,(t=(e=this.viewItems[this.focusedItem])==null?void 0:e.showHover)==null||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])==null?void 0:t.action;if(Fn(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===e)return this.viewItems[i].action}}push(e,t={}){const i=Array.isArray(e)?e:[e];let s=jg(t.index)?t.index:null;i.forEach(o=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o,l)),a||(a=new wy(this.context,o,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,G(r,le.CONTEXT_MENU,c=>{gt.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof gc&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a)):(this.actionsList.insertBefore(r,this.actionsList.children[s]),this.viewItems.splice(s,0,a),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=Qt(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),os(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,i;if(e===void 0?t=!0:typeof e=="number"?i=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const i=this.focusedItem;let s;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=i,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,s=this.viewItems[this.focusedItem]}while(this.focusedItem!==i&&(this.options.focusOnlyEnabledItems&&!s.isEnabled()||s.action.id===Wn.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Wn.ID));return this.updateFocus(!0),!0}updateFocus(e,t,i=!1){var o,r;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((o=this.viewItems[this.previouslyFocusedItem])==null||o.blur());const s=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(s){let a=!0;Px(s.focus)||(a=!1),this.options.focusOnlyEnabledItems&&Px(s.isEnabled)&&!s.isEnabled()&&(a=!1),s.action.id===Wn.ID&&(a=!1),a?(i||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((r=s.showHover)==null||r.call(s))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof gc){const i=t._context===null||t._context===void 0?e:t._context;this.run(t._action,i)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=Qt(this.viewItems),this.getContainer().remove(),super.dispose()}}const VH=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,w4=/(&amp;)?(&amp;)([^\s&])/g;var FT;(function(n){n[n.Right=0]="Right",n[n.Left=1]="Left"})(FT||(FT={}));var zH;(function(n){n[n.Above=0]="Above",n[n.Below=1]="Below"})(zH||(zH={}));class oC extends ca{constructor(e,t,i,s){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const o=document.createElement("div");o.classList.add("monaco-menu"),o.setAttribute("role","presentation"),super(o,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,i,r),context:i.context,actionRunner:i.actionRunner,ariaLabel:i.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...ct||vo?[10]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=o,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,s),this._register(Is.addTarget(o)),this._register(G(o,le.KEY_DOWN,c=>{new ti(c).equals(2)&&c.preventDefault()})),i.enableMnemonics&&this._register(G(o,le.KEY_DOWN,c=>{const d=c.key.toLocaleLowerCase();if(this.mnemonics.has(d)){gt.stop(c,!0);const u=this.mnemonics.get(d);if(u.length===1&&(u[0]instanceof cJ&&u[0].container&&this.focusItemByElement(u[0].container),u[0].onClick(c)),u.length>1){const h=u.shift();h&&h.container&&(this.focusItemByElement(h.container),u.push(h)),this.mnemonics.set(d,u)}}})),vo&&this._register(G(o,le.KEY_DOWN,c=>{const d=new ti(c);d.equals(14)||d.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),gt.stop(c,!0)):(d.equals(13)||d.equals(12))&&(this.focusedItem=0,this.focusPrevious(),gt.stop(c,!0))})),this._register(G(this.domNode,le.MOUSE_OUT,c=>{const d=c.relatedTarget;Rn(d,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(G(this.actionsList,le.MOUSE_OVER,c=>{let d=c.target;if(!(!d||!Rn(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(d),u!==this.focusedItem&&this.updateFocus()}}})),this._register(Is.addTarget(this.actionsList)),this._register(G(this.actionsList,si.Tap,c=>{let d=c.initialTarget;if(!(!d||!Rn(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(d),u!==this.focusedItem&&this.updateFocus()}}}));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new WL(o,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,s),this._register(G(o,si.Change,c=>{gt.stop(c,!0);const d=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:d-c.translationY})})),this._register(G(a,le.MOUSE_UP,c=>{c.preventDefault()}));const l=Te(e);o.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,d)=>{var u;return(u=i.submenuIds)!=null&&u.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Wn&&(d===t.length-1||d===0||t[d-1]instanceof Wn))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof dJ)).forEach((c,d,u)=>{c.updatePositionInSet(d+1,u.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(iT(e)?this.styleSheet=ha(e):(oC.globalStyleSheet||(oC.globalStyleSheet=ha()),this.styleSheet=oC.globalStyleSheet)),this.styleSheet.textContent=gOe(t,iT(e))}styleScrollElement(e,t){const i=t.foregroundColor??"",s=t.backgroundColor??"",o=t.borderColor?`1px solid ${t.borderColor}`:"",r="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=o,e.style.borderRadius=r,e.style.color=i,e.style.backgroundColor=s,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const i=this.actionsList.children[t];if(e===i){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,i){if(e instanceof Wn)return new dJ(t.context,e,{icon:!0},this.menuStyles);if(e instanceof ry){const s=new cJ(e,e.actions,i,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const o=s.getMnemonic();if(o&&s.isEnabled()){let r=[];this.mnemonics.has(o)&&(r=this.mnemonics.get(o)),r.push(s),this.mnemonics.set(o,r)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(s.keybinding=a)}}const o=new $ue(t.context,e,s,this.menuStyles);if(t.enableMnemonics){const r=o.getMnemonic();if(r&&o.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(o),this.mnemonics.set(r,a)}}return o}}}class $ue extends gc{constructor(e,t,i,s){if(i.isMenu=!0,super(t,t,i),this.menuStyle=s,this.options=i,this.options.icon=i.icon!==void 0?i.icon:!1,this.options.label=i.label!==void 0?i.label:!0,this.cssClass="",this.options.label&&i.enableMnemonics){const o=this.action.label;if(o){const r=VH.exec(o);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new $t(()=>{this.element&&(this._register(G(this.element,le.MOUSE_UP,o=>{if(gt.stop(o,!0),$a){if(new Sl(Te(this.element),o).rightButton)return;this.onClick(o)}else setTimeout(()=>{this.onClick(o)},0)})),this._register(G(this.element,le.CONTEXT_MENU,o=>{gt.stop(o,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=ne(this.element,ce("a.action-menu-item")),this._action.id===Wn.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ne(this.item,ce("span.menu-item-check"+Re.asCSSSelector(ae.menuSelection))),this.check.setAttribute("role","none"),this.label=ne(this.item,ce("span.action-label")),this.options.label&&this.options.keybinding&&(ne(this.item,ce("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)==null||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){os(this.label);let t=oU(this.action.label);if(t){const i=fOe(t);this.options.enableMnemonics||(t=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));const s=VH.exec(t);if(s){t=nS(t),w4.lastIndex=0;let o=w4.exec(t);for(;o&&o[1];)o=w4.exec(t);const r=a=>a.replace(/&amp;&amp;/g,"&amp;");o?this.label.append(NL(r(t.substr(0,o.index))," "),ce("u",{"aria-hidden":"true"},o[3]),ace(r(t.substr(o.index+o[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)==null||e.setAttribute("aria-keyshortcuts",(s[1]?s[1]:s[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",o=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=i??"",this.item.style.outline=s,this.item.style.outlineOffset=o),this.check&&(this.check.style.color=t??"")}}class cJ extends $ue{constructor(e,t,i,s,o){super(e,e,s,o),this.submenuActions=t,this.parentData=i,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new Q),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:{horizontal:FT.Right,vertical:zH.Below},this.showScheduler=new $t(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new $t(()=>{this.element&&!Rn(_s(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ne(this.item,ce("span.submenu-indicator"+Re.asCSSSelector(ae.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(G(this.element,le.KEY_UP,t=>{const i=new ti(t);(i.equals(17)||i.equals(3))&&(gt.stop(t,!0),this.createSubmenu(!0))})),this._register(G(this.element,le.KEY_DOWN,t=>{const i=new ti(t);_s()===this.item&&(i.equals(17)||i.equals(3))&&gt.stop(t,!0)})),this._register(G(this.element,le.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(G(this.element,le.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(G(this.element,le.FOCUS_OUT,t=>{this.element&&!Rn(_s(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){gt.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,i,s){const o={top:0,left:0};return o.left=ow(e.width,t.width,{position:s.horizontal===FT.Right?0:1,offset:i.left,size:i.width}),o.left>=i.left&&o.left<i.left+i.width&&(i.left+10+t.width<=e.width&&(o.left=i.left+10),i.top+=10,i.height=0),o.top=ow(e.height,t.height,{position:0,offset:i.top,size:0}),o.top+t.height===i.top&&o.top+i.height+t.height<=e.height&&(o.top+=i.height),o}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ne(this.element,ce("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=Te(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),i=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new oC(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new xB],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),o={top:s.top-i,left:s.left,height:s.height+2*i,width:s.width},r=this.submenuContainer.getBoundingClientRect(),a=Te(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new jt(a.innerWidth,a.innerHeight),jt.lift(r),o,this.expandDirection);this.submenuContainer.style.left=`${c-r.left}px`,this.submenuContainer.style.top=`${l-r.top}px`,this.submenuDisposables.add(G(this.submenuContainer,le.KEY_UP,d=>{new ti(d).equals(15)&&(gt.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(G(this.submenuContainer,le.KEY_DOWN,d=>{new ti(d).equals(15)&&gt.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)==null||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class dJ extends wy{constructor(e,t,i,s){super(e,t,i),this.menuStyles=s}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function fOe(n){const e=VH,t=e.exec(n);if(!t)return n;const i=!t[1];return n.replace(e,i?"$2$3":"").trim()}function uJ(n){const e=tce()[n.id];return`.codicon-${n.id}:before { content: '\\${e.toString(16)}'; }`}function gOe(n,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${uJ(ae.menuSelection)}
${uJ(ae.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const i=n.scrollbarShadow;i&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${i} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${i} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${i} 6px 6px 6px -6px inset;
				}
			`);const s=n.scrollbarSliderBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${s};
				}
			`);const o=n.scrollbarSliderHoverBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${o};
				}
			`);const r=n.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}class mOe{constructor(e,t,i,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=i,this.keybindingService=s,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=_s();let i;const s=Fn(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{var d;this.lastContainer=o;const r=e.getMenuClassName?e.getMenuClassName():"";r&&(o.className+=" "+r),this.options.blockMouse&&(this.block=o.appendChild(ce(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(d=this.blockDisposable)==null||d.dispose(),this.blockDisposable=G(this.block,le.MOUSE_DOWN,u=>u.stopPropagation()));const a=new Q,l=e.actionRunner||new ub;l.onWillRun(u=>this.onActionRun(u,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),i=new oC(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:u=>this.keybindingService.lookupKeybinding(u.id)},uOe),i.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),i.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=Te(o);return a.add(G(c,le.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(G(c,le.MOUSE_DOWN,u=>{if(u.defaultPrevented)return;const h=new Sl(c,u);let f=h.target;if(!h.rightButton){for(;f;){if(f===o)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),El(a,i)},focus:()=>{i==null||i.focus(!!e.autoSelectFirstItem)},onHide:o=>{var r,a,l;(r=e.onHide)==null||r.call(e,!!o),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)==null||a.dispose(),this.blockDisposable=null,this.lastContainer&&(_s()===this.lastContainer||Rn(_s(),this.lastContainer))&&((l=this.focusToReturn)==null||l.focus()),this.lastContainer=null}},s,!!s)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!el(e.error)&&this.notificationService.error(e.error)}}var pOe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},mv=function(n,e){return function(t,i){e(t,i,n)}};let UH=class extends U{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new mOe(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,i,s,o,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=i,this.keybindingService=s,this.menuService=o,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new j),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new j)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=$H.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var i;(i=e.onHide)==null||i.call(e,t),this._onDidHideContextMenu.fire()}}),Ju.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};UH=pOe([mv(0,Ps),mv(1,rn),mv(2,zh),mv(3,Ft),mv(4,pa),mv(5,Ae)],UH);var $H;(function(n){function e(i){return i&&i.menuId instanceof we}function t(i,s,o){if(!e(i))return i;const{menuId:r,menuActionOptions:a,contextKeyService:l}=i;return{...i,getActions:()=>{const c=[];if(r){const d=s.getMenuActions(r,l??o,a);hOe(d,c)}return i.getActions?Wn.join(i.getActions(),c):c}}}n.transform=t})($H||($H={}));var WT;(function(n){n[n.API=0]="API",n[n.USER=1]="USER"})(WT||(WT={}));var pU=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},BT=function(n,e){return function(t,i){e(t,i,n)}};let qH=class{constructor(e){this._commandService=e}async open(e,t){if(!iA(e,je.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=Le.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let i=[];try{i=hH(decodeURIComponent(e.query))}catch{try{i=hH(e.query)}catch{}}return Array.isArray(i)||(i=[i]),await this._commandService.executeCommand(e.path,...i),!0}};qH=pU([BT(0,oi)],qH);let KH=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Le.parse(e));const{selection:i,uri:s}=zMe(e);return e=s,e.scheme===je.file&&(e=k2e(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:i,source:t!=null&&t.fromUserGesture?WT.USER:WT.API,...t==null?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0}};KH=pU([BT(0,kt)],KH);let GH=class{constructor(e,t){this._openers=new co,this._validators=new co,this._resolvers=new co,this._resolvedUriTargets=new Zn(i=>i.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new co,this._defaultExternalOpener={openExternal:async i=>(_B(i,je.http,je.https)?Bce(i):Gt.location.href=i,!0)},this._openers.push({open:async(i,s)=>s!=null&&s.openExternal||_B(i,je.mailto,je.http,je.https,je.vsls)?(await this._doOpenExternal(i,s),!0):!1}),this._openers.push(new qH(t)),this._openers.push(new KH(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const i=typeof e=="string"?Le.parse(e):e,s=this._resolvedUriTargets.get(i)??e;for(const o of this._validators)if(!await o.shouldOpen(s,t))return!1;for(const o of this._openers)if(await o.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const i of this._resolvers)try{const s=await i.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const i=typeof e=="string"?Le.parse(e):e;let s;try{s=(await this.resolveExternalUri(i,t)).resolved}catch{s=i}let o;if(typeof e=="string"&&i.toString()===s.toString()?o=e:o=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const r=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(o,{sourceUri:i,preferredOpenerId:r},Ye.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:i},Ye.None)}dispose(){this._validators.clear()}};GH=pU([BT(0,kt),BT(1,oi)],GH);const Jo=dt("editorWorkerService");var Vi;(function(n){n[n.Hint=1]="Hint",n[n.Info=2]="Info",n[n.Warning=4]="Warning",n[n.Error=8]="Error"})(Vi||(Vi={}));(function(n){function e(r,a){return a-r}n.compare=e;const t=Object.create(null);t[n.Error]=p("sev.error","Error"),t[n.Warning]=p("sev.warning","Warning"),t[n.Info]=p("sev.info","Info");function i(r){return t[r]||""}n.toString=i;function s(r){switch(r){case on.Error:return n.Error;case on.Warning:return n.Warning;case on.Info:return n.Info;case on.Ignore:return n.Hint}}n.fromSeverity=s;function o(r){switch(r){case n.Error:return on.Error;case n.Warning:return on.Warning;case n.Info:return on.Info;case n.Hint:return on.Ignore}}n.toSeverity=o})(Vi||(Vi={}));var HT;(function(n){const e="";function t(s){return i(s,!0)}n.makeKey=t;function i(s,o){const r=[e];return s.source?r.push(s.source.replace("","\\")):r.push(e),s.code?typeof s.code=="string"?r.push(s.code.replace("","\\")):r.push(s.code.value.replace("","\\")):r.push(e),s.severity!==void 0&&s.severity!==null?r.push(Vi.toString(s.severity)):r.push(e),s.message&&o?r.push(s.message.replace("","\\")):r.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?r.push(s.startLineNumber.toString()):r.push(e),s.startColumn!==void 0&&s.startColumn!==null?r.push(s.startColumn.toString()):r.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?r.push(s.endLineNumber.toString()):r.push(e),s.endColumn!==void 0&&s.endColumn!==null?r.push(s.endColumn.toString()):r.push(e),r.push(e),r.join("")}n.makeKeyOptionalMessage=i})(HT||(HT={}));const uu=dt("markerService"),que=T("editor.lineHighlightBackground",null,p("lineHighlight","Background color for the highlight of line at the cursor position.")),hJ=T("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:vt},p("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));T("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},p("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:vi,hcLight:vi},p("rangeHighlightBorder","Background color of the border around highlighted ranges."));T("editor.symbolHighlightBackground",{dark:th,light:th,hcDark:null,hcLight:null},p("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:vi,hcLight:vi},p("symbolHighlightBorder","Background color of the border around highlighted symbols."));const qA=T("editorCursor.foreground",{dark:"#AEAFAD",light:te.black,hcDark:te.white,hcLight:"#0F4A85"},p("caret","Color of the editor cursor.")),_U=T("editorCursor.background",null,p("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Kue=T("editorMultiCursor.primary.foreground",qA,p("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),_Oe=T("editorMultiCursor.primary.background",_U,p("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Gue=T("editorMultiCursor.secondary.foreground",qA,p("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),bOe=T("editorMultiCursor.secondary.background",_U,p("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),bU=T("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},p("editorWhitespaces","Color of whitespace characters in the editor.")),vOe=T("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:te.white,hcLight:"#292929"},p("editorLineNumbers","Color of editor line numbers.")),wOe=T("editorIndentGuide.background",bU,p("editorIndentGuides","Color of the editor indentation guides."),!1,p("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),COe=T("editorIndentGuide.activeBackground",bU,p("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,p("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),YL=T("editorIndentGuide.background1",wOe,p("editorIndentGuides1","Color of the editor indentation guides (1).")),yOe=T("editorIndentGuide.background2","#00000000",p("editorIndentGuides2","Color of the editor indentation guides (2).")),SOe=T("editorIndentGuide.background3","#00000000",p("editorIndentGuides3","Color of the editor indentation guides (3).")),xOe=T("editorIndentGuide.background4","#00000000",p("editorIndentGuides4","Color of the editor indentation guides (4).")),kOe=T("editorIndentGuide.background5","#00000000",p("editorIndentGuides5","Color of the editor indentation guides (5).")),LOe=T("editorIndentGuide.background6","#00000000",p("editorIndentGuides6","Color of the editor indentation guides (6).")),ZL=T("editorIndentGuide.activeBackground1",COe,p("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),DOe=T("editorIndentGuide.activeBackground2","#00000000",p("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),EOe=T("editorIndentGuide.activeBackground3","#00000000",p("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),NOe=T("editorIndentGuide.activeBackground4","#00000000",p("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),IOe=T("editorIndentGuide.activeBackground5","#00000000",p("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),TOe=T("editorIndentGuide.activeBackground6","#00000000",p("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),POe=T("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:vi,hcLight:vi},p("editorActiveLineNumber","Color of editor active line number"),!1,p("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));T("editorLineNumber.activeForeground",POe,p("editorActiveLineNumber","Color of editor active line number"));const MOe=T("editorLineNumber.dimmedForeground",null,p("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));T("editorRuler.foreground",{dark:"#5A5A5A",light:te.lightgrey,hcDark:te.white,hcLight:"#292929"},p("editorRuler","Color of the editor rulers."));T("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},p("editorCodeLensForeground","Foreground color of editor CodeLens"));T("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},p("editorBracketMatchBackground","Background color behind matching brackets"));T("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:vt,hcLight:vt},p("editorBracketMatchBorder","Color for matching brackets boxes"));const ROe=T("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},p("editorOverviewRulerBorder","Color of the overview ruler border.")),AOe=T("editorOverviewRuler.background",null,p("editorOverviewRulerBackground","Background color of the editor overview ruler."));T("editorGutter.background",Ol,p("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));T("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:te.fromHex("#fff").transparent(.8),hcLight:vt},p("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const OOe=T("editorUnnecessaryCode.opacity",{dark:te.fromHex("#000a"),light:te.fromHex("#0007"),hcDark:null,hcLight:null},p("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));T("editorGhostText.border",{dark:null,light:null,hcDark:te.fromHex("#fff").transparent(.8),hcLight:te.fromHex("#292929").transparent(.8)},p("editorGhostTextBorder","Border color of ghost text in the editor."));const FOe=T("editorGhostText.foreground",{dark:te.fromHex("#ffffff56"),light:te.fromHex("#0007"),hcDark:null,hcLight:null},p("editorGhostTextForeground","Foreground color of the ghost text in the editor."));T("editorGhostText.background",null,p("editorGhostTextBackground","Background color of the ghost text in the editor."));const WOe=new te(new Ct(0,122,204,.6)),Yue=T("editorOverviewRuler.rangeHighlightForeground",WOe,p("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),BOe=T("editorOverviewRuler.errorForeground",{dark:new te(new Ct(255,18,18,.7)),light:new te(new Ct(255,18,18,.7)),hcDark:new te(new Ct(255,50,50,1)),hcLight:"#B5200D"},p("overviewRuleError","Overview ruler marker color for errors.")),HOe=T("editorOverviewRuler.warningForeground",{dark:Ph,light:Ph,hcDark:Qx,hcLight:Qx},p("overviewRuleWarning","Overview ruler marker color for warnings.")),jOe=T("editorOverviewRuler.infoForeground",{dark:Qd,light:Qd,hcDark:Xx,hcLight:Xx},p("overviewRuleInfo","Overview ruler marker color for infos.")),Zue=T("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},p("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Que=T("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},p("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Xue=T("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},p("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Jue=T("editorBracketHighlight.foreground4","#00000000",p("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),ehe=T("editorBracketHighlight.foreground5","#00000000",p("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),the=T("editorBracketHighlight.foreground6","#00000000",p("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),VOe=T("editorBracketHighlight.unexpectedBracket.foreground",{dark:new te(new Ct(255,18,18,.8)),light:new te(new Ct(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},p("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),zOe=T("editorBracketPairGuide.background1","#00000000",p("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),UOe=T("editorBracketPairGuide.background2","#00000000",p("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),$Oe=T("editorBracketPairGuide.background3","#00000000",p("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),qOe=T("editorBracketPairGuide.background4","#00000000",p("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),KOe=T("editorBracketPairGuide.background5","#00000000",p("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),GOe=T("editorBracketPairGuide.background6","#00000000",p("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),YOe=T("editorBracketPairGuide.activeBackground1","#00000000",p("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),ZOe=T("editorBracketPairGuide.activeBackground2","#00000000",p("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),QOe=T("editorBracketPairGuide.activeBackground3","#00000000",p("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),XOe=T("editorBracketPairGuide.activeBackground4","#00000000",p("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),JOe=T("editorBracketPairGuide.activeBackground5","#00000000",p("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),eFe=T("editorBracketPairGuide.activeBackground6","#00000000",p("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));T("editorUnicodeHighlight.border",Ph,p("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));T("editorUnicodeHighlight.background",XTe,p("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));tl((n,e)=>{const t=n.getColor(Ol),i=n.getColor(que),s=i&&!i.isTransparent()?i:t;s&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)});function tFe(n,e){const t=[],i=[];for(const s of n)e.has(s)||t.push(s);for(const s of e)n.has(s)||i.push(s);return{removed:t,added:i}}function iFe(n,e){const t=new Set;for(const i of e)n.has(i)&&t.add(i);return t}var nFe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fJ=function(n,e){return function(t,i){e(t,i,n)}};let YH=class extends U{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new j),this._markerDecorations=new Zn,e.getModels().forEach(i=>this._onModelAdded(i)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const i=this._markerDecorations.get(e);return i&&i.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const i=this._markerDecorations.get(t);i&&this._updateDecorations(i)})}_onModelAdded(e){const t=new sFe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var i;const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===je.inMemory||e.uri.scheme===je.internal||e.uri.scheme===je.vscode)&&((i=this._markerService)==null||i.read({resource:e.uri}).map(s=>s.owner).forEach(s=>this._markerService.remove(s,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};YH=nFe([fJ(0,gi),fJ(1,uu)],YH);class sFe extends U{constructor(e){super(),this.model=e,this._map=new oIe,this._register(xe(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:i}=tFe(new Set(this._map.keys()),new Set(e));if(t.length===0&&i.length===0)return!1;const s=i.map(a=>this._map.get(a)),o=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),r=this.model.deltaDecorations(s,o);for(const a of i)this._map.delete(a);for(let a=0;a<r.length;a++)this._map.set(t[a],r[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let i=E.lift(t);if(t.severity===Vi.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=e.validateRange(i),i.isEmpty()){const s=e.getLineLastNonWhitespaceColumn(i.startLineNumber)||e.getLineMaxColumn(i.startLineNumber);if(s===1||i.endColumn>=s)return i;const o=e.getWordAtPosition(i.getStartPosition());o&&(i=new E(i.startLineNumber,o.startColumn,i.endLineNumber,o.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&i.startLineNumber===i.endLineNumber){const s=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);s<i.endColumn&&(i=new E(i.startLineNumber,s,i.endLineNumber,i.endColumn),t.startColumn=s)}return i}_createDecorationOption(e){let t,i,s,o,r;switch(e.severity){case Vi.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case Vi.Info:t="squiggly-info",i=ji(jOe),s=10,r={color:ji(wPe),position:1};break;case Vi.Warning:t="squiggly-warning",i=ji(HOe),s=20,r={color:ji(CPe),position:1};break;case Vi.Error:default:t="squiggly-error",i=ji(BOe),s=30,r={color:ji(yPe),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:i,position:aa.Right},minimap:r,zIndex:s,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const vU=dt("markerDecorationsService");class yn{static _nextVisibleColumn(e,t,i){return e===9?yn.nextRenderTabStop(t,i):qg(e)||fz(e)?t+2:t+1}static visibleColumnFromColumn(e,t,i){const s=Math.min(t-1,e.length),o=e.substring(0,s),r=new XI(o);let a=0;for(;!r.eol();){const l=QI(o,s,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,i)}return a}static columnFromVisibleColumn(e,t,i){if(t<=0)return 1;const s=e.length,o=new XI(e);let r=0,a=1;for(;!o.eol();){const l=QI(e,s,o.offset);o.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,i),d=o.offset+1;if(c>=t){const u=t-r;return c-t<u?d:a}r=c,a=d}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function oFe(n,e,t){let i=0;for(let o=0;o<n.length;o++)n.charAt(o)==="	"?i=yn.nextIndentTabStop(i,e):i++;let s="";if(!t){const o=Math.floor(i/e);i=i%e;for(let r=0;r<o;r++)s+="	"}for(let o=0;o<i;o++)s+=" ";return s}function wU(n,e,t){let i=Zs(n);return i===-1&&(i=n.length),oFe(n.substring(0,i),e,t)+n.substring(i)}class gJ{constructor(e,t,i,s){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=i,this.isInvalid=s}}class rFe{constructor(e,t,i,s,o,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=i,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=o,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class aFe extends rFe{constructor(e,t,i,s,o,r,a){super(e,t,i,s,o,r),this.minVisibleColumnIndentation=a}}function lFe(n,e,t,i){return n!==t?cn(t-n,i):cn(0,i-e)}const uo=0;function jT(n){return n===0}const na=2**26;function cn(n,e){return n*na+e}function Va(n){const e=n,t=Math.floor(e/na),i=e-t*na;return new Al(t,i)}function cFe(n){return Math.floor(n/na)}function zi(n,e){let t=n+e;return e>=na&&(t=t-n%na),t}function dFe(n,e){return n.reduce((t,i)=>zi(t,e(i)),uo)}function ihe(n,e){return n===e}function hk(n,e){const t=n,i=e;if(i-t<=0)return uo;const o=Math.floor(t/na),r=Math.floor(i/na),a=i-r*na;if(o===r){const l=t-o*na;return cn(0,a-l)}else return cn(r-o,a)}function rC(n,e){return n<e}function aC(n,e){return n<=e}function N0(n,e){return n>=e}function cw(n){return cn(n.lineNumber-1,n.column-1)}function $p(n,e){const t=n,i=Math.floor(t/na),s=t-i*na,o=e,r=Math.floor(o/na),a=o-r*na;return new E(i+1,s+1,r+1,a+1)}function uFe(n){const e=ru(n);return cn(e.length-1,e[e.length-1].length)}class ih{static fromModelContentChanges(e){return e.map(i=>{const s=E.lift(i.range);return new ih(cw(s.getStartPosition()),cw(s.getEndPosition()),uFe(i.text))}).reverse()}constructor(e,t,i){this.startOffset=e,this.endOffset=t,this.newLength=i}toString(){return`[${Va(this.startOffset)}...${Va(this.endOffset)}) -> ${Va(this.newLength)}`}}class hFe{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>CU.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],i=t?this.translateOldToCur(t.offsetObj):null;return i===null?null:hk(e,i)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?cn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):cn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Va(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?cn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):cn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],i=this.translateOldToCur(t.endOffsetAfterObj);if(aC(i,e)){this.nextEditIdx++;const s=Va(i),o=Va(this.translateOldToCur(t.endOffsetBeforeObj)),r=s.lineCount-o.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class CU{static from(e){return new CU(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,i){this.endOffsetBeforeObj=Va(t),this.endOffsetAfterObj=Va(zi(e,i)),this.offsetObj=Va(e)}}const dE=[],ka=class ka{static create(e,t){if(e<=128&&t.length===0){let i=ka.cache[e];return i||(i=new ka(e,t),ka.cache[e]=i),i}return new ka(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const i=t.getKey(e);let s=i>>5;if(s===0){const r=1<<i|this.items;return r===this.items?this:ka.create(r,this.additionalItems)}s--;const o=this.additionalItems.slice(0);for(;o.length<s;)o.push(0);return o[s]|=1<<(i&31),ka.create(this.items,o)}merge(e){const t=this.items|e.items;if(this.additionalItems===dE&&e.additionalItems===dE)return t===this.items?this:t===e.items?e:ka.create(t,dE);const i=[];for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const o=this.additionalItems[s]||0,r=e.additionalItems[s]||0;i.push(o|r)}return ka.create(t,i)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}};ka.cache=new Array(129),ka.empty=ka.create(0,dE);let fr=ka;const mJ={getKey(n){return n}};class nhe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class yU{get length(){return this._length}constructor(e){this._length=e}}class fk extends yU{static create(e,t,i){let s=e.length;return t&&(s=zi(s,t.length)),i&&(s=zi(s,i.length)),new fk(s,e,t,i,t?t.missingOpeningBracketIds:fr.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,i,s,o){super(e),this.openingBracket=t,this.child=i,this.closingBracket=s,this.missingOpeningBracketIds=o}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new fk(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(zi(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Jd extends yU{static create23(e,t,i,s=!1){let o=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=zi(o,t.length),r=r.merge(t.missingOpeningBracketIds),i){if(e.listHeight!==i.listHeight)throw new Error("Invalid list heights");o=zi(o,i.length),r=r.merge(i.missingOpeningBracketIds)}return s?new fFe(o,e.listHeight+1,e,t,i,r):new gk(o,e.listHeight+1,e,t,i,r)}static getEmpty(){return new gFe(uo,0,[],fr.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,i){super(e),this.listHeight=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(e-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),i=t.kind===4?t.toMutable():t;return t!==i&&this.setChild(0,i),i}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const i=t.childrenLength;if(i===0)throw new Dt;t=t.getChild(i-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const o=this.getChild(s);t=zi(t,o.length),i=i.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,s=e;for(let o=0;o<this.childrenLength;o++){const r=this.getChild(o);r&&(i=Math.min(i,r.computeMinIndentation(s,t)),s=zi(s,r.length))}return this.cachedMinIndentation=i,i}}class gk extends Jd{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,i,s,o,r){super(e,t,r),this._item1=i,this._item2=s,this._item3=o}deepClone(){return new gk(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class fFe extends gk{toMutable(){return new gk(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class VT extends Jd{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,i,s){super(e,t,s),this._children=i}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new VT(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class gFe extends VT{toMutable(){return new VT(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const mFe=[];class SU extends yU{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return mFe}deepClone(){return this}}class rp extends SU{get kind(){return 0}get missingOpeningBracketIds(){return fr.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const i=Va(e),s=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,o=cFe(zi(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=s;a<=o;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=yn.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,d)}return r}}class zT extends SU{static create(e,t,i){return new zT(e,t,i)}get kind(){return 1}get missingOpeningBracketIds(){return fr.getEmpty()}constructor(e,t,i){super(e),this.bracketInfo=t,this.bracketIds=i}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class pFe extends SU{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Df=class{constructor(e,t,i,s,o){this.length=e,this.kind=t,this.bracketId=i,this.bracketIds=s,this.astNode=o}};class she{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new _Fe(this.textModel,this.bracketTokens),this._offset=uo,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return cn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=zi(this._offset,e);const t=Va(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=zi(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class _Fe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const o=this.lineTokens,r=o.getCount();let a=null;if(this.lineTokenOffset<r){const l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Bo.getTokenType(l)===0,d=Bo.containsBalancedBrackets(l),u=o.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<u){const h=o.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,u),g=this.bracketTokens.getSingleLanguageBracketTokens(h),m=g.regExpGlobal;if(m){m.lastIndex=0;const _=m.exec(f);_&&(a=g.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(i+=u-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=u}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const s=lFe(e,t,this.lineIdx,this.lineCharOffset);return new Df(s,0,-1,fr.getEmpty(),new rp(s))}}class bFe{constructor(e,t){this.text=e,this._offset=uo,this.idx=0;const i=t.getRegExpStr(),s=i?new RegExp(i+`|
`,"gi"):null,o=[];let r,a=0,l=0,c=0,d=0;const u=[];for(let g=0;g<60;g++)u.push(new Df(cn(0,g),0,-1,fr.getEmpty(),new rp(cn(0,g))));const h=[];for(let g=0;g<60;g++)h.push(new Df(cn(1,g),0,-1,fr.getEmpty(),new rp(cn(1,g))));if(s)for(s.lastIndex=0;(r=s.exec(e))!==null;){const g=r.index,m=r[0];if(m===`
`)a++,l=g+1;else{if(c!==g){let _;if(d===a){const b=g-c;if(b<u.length)_=u[b];else{const v=cn(0,b);_=new Df(v,0,-1,fr.getEmpty(),new rp(v))}}else{const b=a-d,v=g-l;if(b===1&&v<h.length)_=h[v];else{const w=cn(b,v);_=new Df(w,0,-1,fr.getEmpty(),new rp(w))}}o.push(_)}o.push(t.getToken(m)),c=g+m.length,d=a}}const f=e.length;if(c!==f){const g=d===a?cn(0,f-c):cn(a-d,f-l);o.push(new Df(g,0,-1,fr.getEmpty(),new rp(g)))}this.length=cn(a,f-l),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Zke}}class xU{static createFromLanguage(e,t){function i(o){return t.getKey(`${o.languageId}:::${o.bracketText}`)}const s=new Map;for(const o of e.bracketsNew.openingBrackets){const r=cn(0,o.bracketText.length),a=i(o),l=fr.getEmpty().add(a,mJ);s.set(o.bracketText,new Df(r,1,a,l,zT.create(r,o,l)))}for(const o of e.bracketsNew.closingBrackets){const r=cn(0,o.bracketText.length);let a=fr.getEmpty();const l=o.getOpeningBrackets();for(const c of l)a=a.add(i(c),mJ);s.set(o.bracketText,new Df(r,2,i(l[0]),a,zT.create(r,o,a)))}return new xU(s)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>vFe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,i]of this.map)if(i.kind===2&&i.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function vFe(n){let e=ua(n);return/^[\w ]+/.test(n)&&(e=`\\b${e}`),/[\w ]+$/.test(n)&&(e=`${e}\\b`),e}class ohe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=xU.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function wFe(n){if(n.length===0)return null;if(n.length===1)return n[0];let e=0;function t(){if(e>=n.length)return null;const r=e,a=n[r].listHeight;for(e++;e<n.length&&n[e].listHeight===a;)e++;return e-r>=2?rhe(r===0&&e===n.length?n:n.slice(r,e),!1):n[r]}let i=t(),s=t();if(!s)return i;for(let r=t();r;r=t())pJ(i,s)<=pJ(s,r)?(i=C4(i,s),s=r):s=C4(s,r);return C4(i,s)}function rhe(n,e=!1){if(n.length===0)return null;if(n.length===1)return n[0];let t=n.length;for(;t>3;){const i=t>>1;for(let s=0;s<i;s++){const o=s<<1;n[s]=Jd.create23(n[o],n[o+1],o+3===t?n[o+2]:null,e)}t=i}return Jd.create23(n[0],n[1],t>=3?n[2]:null,e)}function pJ(n,e){return Math.abs(n.listHeight-e.listHeight)}function C4(n,e){return n.listHeight===e.listHeight?Jd.create23(n,e,null,!1):n.listHeight>e.listHeight?CFe(n,e):yFe(e,n)}function CFe(n,e){n=n.toMutable();let t=n;const i=[];let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeLastElementMutable()}for(let o=i.length-1;o>=0;o--){const r=i[o];s?r.childrenLength>=3?s=Jd.create23(r.unappendChild(),s,null,!1):(r.appendChildOfSameHeight(s),s=void 0):r.handleChildrenChanged()}return s?Jd.create23(n,s,null,!1):n}function yFe(n,e){n=n.toMutable();let t=n;const i=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");i.push(t),t=t.makeFirstElementMutable()}let s=e;for(let o=i.length-1;o>=0;o--){const r=i[o];s?r.childrenLength>=3?s=Jd.create23(s,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(s),s=void 0):r.handleChildrenChanged()}return s?Jd.create23(s,n,null,!1):n}class SFe{constructor(e){this.lastOffset=uo,this.nextNodes=[e],this.offsets=[uo],this.idxs=[]}readLongestNodeAt(e,t){if(rC(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const i=Q1(this.nextNodes);if(!i)return;const s=Q1(this.offsets);if(rC(e,s))return;if(rC(s,e))if(zi(s,i.length)<=e)this.nextNodeAfterCurrent();else{const o=y4(i);o!==-1?(this.nextNodes.push(i.getChild(o)),this.offsets.push(s),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(i))return this.nextNodeAfterCurrent(),i;{const o=y4(i);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(i.getChild(o)),this.offsets.push(s),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=Q1(this.offsets),t=Q1(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const i=Q1(this.nextNodes),s=y4(i,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(i.getChild(s)),this.offsets.push(zi(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function y4(n,e=-1){for(;;){if(e++,e>=n.childrenLength)return-1;if(n.getChild(e))return e}}function Q1(n){return n.length>0?n[n.length-1]:void 0}function ZH(n,e,t,i){return new xFe(n,e,t,i).parseDocument()}class xFe{constructor(e,t,i,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,i&&s)throw new Error("Not supported");this.oldNodeReader=i?new SFe(i):void 0,this.positionMapper=new hFe(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(fr.getEmpty(),0);return e||(e=Jd.getEmpty()),e}parseList(e,t){const i=[];for(;;){let o=this.tryReadChildFromCache(e);if(!o){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;o=this.parseChild(e,t+1)}o.kind===4&&o.childrenLength===0||i.push(o)}return this.oldNodeReader?wFe(i):rhe(i,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!jT(t)){const i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>t!==null&&!rC(s.length,t)?!1:s.canBeReused(e));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}}parseChild(e,t){this._itemsConstructed++;const i=this.tokenizer.read();switch(i.kind){case 2:return new pFe(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(t>300)return new rp(i.length);const s=e.merge(i.bracketIds),o=this.parseList(s,t+1),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===i.bracketId||r.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),fk.create(i.astNode,o,r.astNode)):fk.create(i.astNode,o,null)}default:throw new Error("unexpected")}}}function UT(n,e){if(n.length===0)return e;if(e.length===0)return n;const t=new Dh(_J(n)),i=_J(e);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=t.dequeue();function o(c){if(c===void 0){const u=t.takeWhile(h=>!0)||[];return s&&u.unshift(s),u}const d=[];for(;s&&!jT(c);){const[u,h]=s.splitAt(c);d.push(u),c=hk(u.lengthAfter,c),s=h??t.dequeue()}return jT(c)||d.push(new Zf(!1,c,c)),d}const r=[];function a(c,d,u){if(r.length>0&&ihe(r[r.length-1].endOffset,c)){const h=r[r.length-1];r[r.length-1]=new ih(h.startOffset,d,zi(h.newLength,u))}else r.push({startOffset:c,endOffset:d,newLength:u})}let l=uo;for(const c of i){const d=o(c.lengthBefore);if(c.modified){const u=dFe(d,f=>f.lengthBefore),h=zi(l,u);a(l,h,c.lengthAfter),l=h}else for(const u of d){const h=l;l=zi(l,u.lengthBefore),u.modified&&a(h,l,u.lengthAfter)}}return r}class Zf{constructor(e,t,i){this.modified=e,this.lengthBefore=t,this.lengthAfter=i}splitAt(e){const t=hk(e,this.lengthAfter);return ihe(t,uo)?[this,void 0]:this.modified?[new Zf(this.modified,this.lengthBefore,e),new Zf(this.modified,uo,t)]:[new Zf(this.modified,e,e),new Zf(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Va(this.lengthBefore)} -> ${Va(this.lengthAfter)}`}}function _J(n){const e=[];let t=uo;for(const i of n){const s=hk(t,i.startOffset);jT(s)||e.push(new Zf(!1,s,s));const o=hk(i.startOffset,i.endOffset);e.push(new Zf(!0,o,i.newLength)),t=i.endOffset}return e}class kFe extends U{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new j,this.denseKeyProvider=new nhe,this.brackets=new ohe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new bFe(this.textModel.getValue(),i);this.initialAstWithoutTokens=ZH(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(i=>new ih(cn(i.fromLineNumber-1,0),cn(i.toLineNumber,0),cn(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=ih.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const i=UT(this.queuedTextEdits,e);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=UT(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,i){const s=t,o=new she(this.textModel,this.brackets);return ZH(o,e,s,i)}getBracketsInRange(e,t){this.flushQueue();const i=cn(e.startLineNumber-1,e.startColumn-1),s=cn(e.endLineNumber-1,e.endColumn-1);return new Bp(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens;QH(r,uo,r.length,i,s,o,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const i=cw(e.getStartPosition()),s=cw(e.getEndPosition());return new Bp(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens,a=new LFe(o,t,this.textModel);XH(r,uo,r.length,i,s,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return lhe(t,uo,t.length,cw(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return ahe(t,uo,t.length,cw(e))}}function ahe(n,e,t,i){if(n.kind===4||n.kind===2){const s=[];for(const o of n.children)t=zi(e,o.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let o=s.length-1;o>=0;o--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=s[o];if(rC(r,i)){const l=ahe(n.children[o],r,a,i);if(l)return l}}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=$p(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function lhe(n,e,t,i){if(n.kind===4||n.kind===2){for(const s of n.children){if(t=zi(e,s.length),rC(i,t)){const o=lhe(s,e,t,i);if(o)return o}e=t}return null}else{if(n.kind===3)return null;if(n.kind===1){const s=$p(e,t);return{bracketInfo:n.bracketInfo,range:s}}}return null}function QH(n,e,t,i,s,o,r,a,l,c,d=!1){if(r>200)return!0;e:for(;;)switch(n.kind){case 4:{const u=n.childrenLength;for(let h=0;h<u;h++){const f=n.getChild(h);if(f){if(t=zi(e,f.length),aC(e,s)&&N0(t,i)){if(N0(t,s)){n=f;continue e}if(!QH(f,e,t,i,s,o,r,0,l,c))return!1}e=t}}return!0}case 2:{const u=!c||!n.closingBracket||n.closingBracket.bracketInfo.closesColorized(n.openingBracket.bracketInfo);let h=0;if(l){let g=l.get(n.openingBracket.text);g===void 0&&(g=0),h=g,u&&(g++,l.set(n.openingBracket.text,g))}const f=n.childrenLength;for(let g=0;g<f;g++){const m=n.getChild(g);if(m){if(t=zi(e,m.length),aC(e,s)&&N0(t,i)){if(N0(t,s)&&m.kind!==1){n=m,u?(r++,a=h+1):a=h;continue e}if((u||m.kind!==1||!n.closingBracket)&&!QH(m,e,t,i,s,o,u?r+1:r,u?h+1:h,l,c,!n.closingBracket))return!1}e=t}}return l==null||l.set(n.openingBracket.text,h),!0}case 3:{const u=$p(e,t);return o(new gJ(u,r-1,0,!0))}case 1:{const u=$p(e,t);return o(new gJ(u,r-1,a-1,d))}case 0:return!0}}class LFe{constructor(e,t,i){this.push=e,this.includeMinIndentation=t,this.textModel=i}}function XH(n,e,t,i,s,o,r,a){var c;if(r>200)return!0;let l=!0;if(n.kind===2){let d=0;if(a){let f=a.get(n.openingBracket.text);f===void 0&&(f=0),d=f,f++,a.set(n.openingBracket.text,f)}const u=zi(e,n.openingBracket.length);let h=-1;if(o.includeMinIndentation&&(h=n.computeMinIndentation(e,o.textModel)),l=o.push(new aFe($p(e,t),$p(e,u),n.closingBracket?$p(zi(u,((c=n.child)==null?void 0:c.length)||uo),t):void 0,r,d,n,h)),e=u,l&&n.child){const f=n.child;if(t=zi(e,f.length),aC(e,s)&&N0(t,i)&&(l=XH(f,e,t,i,s,o,r+1,a),!l))return!1}a==null||a.set(n.openingBracket.text,d)}else{let d=e;for(const u of n.children){const h=d;if(d=zi(d,u.length),aC(h,s)&&aC(i,d)&&(l=XH(u,h,d,i,s,o,r,a),!l))return!1}}return l}class DFe extends U{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new jn),this.onDidChangeEmitter=new j,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){var t;(!e.languageId||(t=this.bracketPairsTree.value)!=null&&t.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)==null||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new Q;this.bracketPairsTree.value=EFe(e.add(new kFe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!1))||Bp.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!0))||Bp.empty}getBracketsInRange(e,t=!1){var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)==null?void 0:i.object.getBracketsInRange(e,t))||Bp.empty}findMatchingBracketUp(e,t,i){const s=this.textModel.validatePosition(t),o=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=this.getBracketPairsInRange(E.fromPositions(t,t)).findLast(l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?uE(this._findMatchingBracketUp(l,s,S4(i))):null}}matchBracket(e,t){if(this.canBuildAST){const i=this.getBracketPairsInRange(E.fromPositions(e,e)).filter(s=>s.closingBracketRange!==void 0&&(s.openingBracketRange.containsPosition(e)||s.closingBracketRange.containsPosition(e))).findLastMaxBy(mo(s=>s.openingBracketRange.containsPosition(e)?s.openingBracketRange:s.closingBracketRange,E.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{const i=S4(t);return this._matchBracket(this.textModel.validatePosition(e),i)}}_establishBracketSearchOffsets(e,t,i,s){const o=t.getCount(),r=t.getLanguageId(s);let a=Math.max(0,e.column-1-i.maxBracketLength);for(let c=s-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(ad(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+i.maxBracketLength);for(let c=s+1;c<o;c++){const d=t.getStartOffset(c);if(d>=l)break;if(ad(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const i=e.lineNumber,s=this.textModel.tokenization.getLineTokens(i),o=this.textModel.getLineContent(i),r=s.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(r)).brackets;if(a&&!ad(s.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,s,a,r),d=null;for(;;){const u=ll.findNextBracketInRange(a.forwardRegex,i,o,l,c);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const h=o.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),f=this._matchFoundBracket(u,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(f){if(f instanceof ju)return null;d=f}}l=u.endColumn-1}if(d)return d}if(r>0&&s.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(l)).brackets;if(c&&!ad(s.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(e,s,c,l),h=ll.findPrevBracketInRange(c.reversedRegex,i,o,d,u);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const f=o.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),g=this._matchFoundBracket(h,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(g)return g instanceof ju?null:g}}}return null}_matchFoundBracket(e,t,i,s){if(!t)return null;const o=i?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return o?o instanceof ju?o:[e,o]:null}_findMatchingBracketUp(e,t,i){const s=e.languageId,o=e.reversedRegex;let r=-1,a=0;const l=(c,d,u,h)=>{for(;;){if(i&&++a%100===0&&!i())return ju.INSTANCE;const f=ll.findPrevBracketInRange(o,c,d,u,h);if(!f)break;const g=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?r++:e.isClose(g)&&r--,r===0)return f;h=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),u=d.getCount(),h=this.textModel.getLineContent(c);let f=u-1,g=h.length,m=h.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),g=t.column-1,m=t.column-1);let _=!0;for(;f>=0;f--){const b=d.getLanguageId(f)===s&&!ad(d.getStandardTokenType(f));if(b)_?g=d.getStartOffset(f):(g=d.getStartOffset(f),m=d.getEndOffset(f));else if(_&&g!==m){const v=l(c,h,g,m);if(v)return v}_=b}if(_&&g!==m){const b=l(c,h,g,m);if(b)return b}}return null}_findMatchingBracketDown(e,t,i){const s=e.languageId,o=e.forwardRegex;let r=1,a=0;const l=(d,u,h,f)=>{for(;;){if(i&&++a%100===0&&!i())return ju.INSTANCE;const g=ll.findNextBracketInRange(o,d,u,h,f);if(!g)break;const m=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(m)?r++:e.isClose(m)&&r--,r===0)return g;h=g.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const u=this.textModel.tokenization.getLineTokens(d),h=u.getCount(),f=this.textModel.getLineContent(d);let g=0,m=0,_=0;d===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),m=t.column-1,_=t.column-1);let b=!0;for(;g<h;g++){const v=u.getLanguageId(g)===s&&!ad(u.getStandardTokenType(g));if(v)b||(m=u.getStartOffset(g)),_=u.getEndOffset(g);else if(b&&m!==_){const w=l(d,f,m,_);if(w)return w}b=v}if(b&&m!==_){const v=l(d,f,m,_);if(v)return v}}return null}findPrevBracket(e){var r;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((r=this.bracketPairsTree.value)==null?void 0:r.object.getFirstBracketBefore(t))||null;let i=null,s=null,o=null;for(let a=t.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let u=c-1,h=d.length,f=d.length;if(a===t.lineNumber){u=l.findTokenIndexAtOffset(t.column-1),h=t.column-1,f=t.column-1;const m=l.getLanguageId(u);i!==m&&(i=m,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let g=!0;for(;u>=0;u--){const m=l.getLanguageId(u);if(i!==m){if(s&&o&&g&&h!==f){const b=ll.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(b)return this._toFoundBracket(o,b);g=!1}i=m,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const _=!!s&&!ad(l.getStandardTokenType(u));if(_)g?h=l.getStartOffset(u):(h=l.getStartOffset(u),f=l.getEndOffset(u));else if(o&&s&&g&&h!==f){const b=ll.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(b)return this._toFoundBracket(o,b)}g=_}if(o&&s&&g&&h!==f){const m=ll.findPrevBracketInRange(s.reversedRegex,a,d,h,f);if(m)return this._toFoundBracket(o,m)}}return null}findNextBracket(e){var a;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((a=this.bracketPairsTree.value)==null?void 0:a.object.getFirstBracketAfter(t))||null;const i=this.textModel.getLineCount();let s=null,o=null,r=null;for(let l=t.lineNumber;l<=i;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),u=this.textModel.getLineContent(l);let h=0,f=0,g=0;if(l===t.lineNumber){h=c.findTokenIndexAtOffset(t.column-1),f=t.column-1,g=t.column-1;const _=c.getLanguageId(h);s!==_&&(s=_,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let m=!0;for(;h<d;h++){const _=c.getLanguageId(h);if(s!==_){if(r&&o&&m&&f!==g){const v=ll.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(v)return this._toFoundBracket(r,v);m=!1}s=_,o=this.languageConfigurationService.getLanguageConfiguration(s).brackets,r=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const b=!!o&&!ad(c.getStandardTokenType(h));if(b)m||(f=c.getStartOffset(h)),g=c.getEndOffset(h);else if(r&&o&&m&&f!==g){const v=ll.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(v)return this._toFoundBracket(r,v)}m=b}if(r&&o&&m&&f!==g){const _=ll.findNextBracketInRange(o.forwardRegex,l,u,f,g);if(_)return this._toFoundBracket(r,_)}}return null}findEnclosingBrackets(e,t){const i=this.textModel.validatePosition(e);if(this.canBuildAST){const f=E.fromPositions(i),g=this.getBracketPairsInRange(E.fromPositions(i,i)).findLast(m=>m.closingBracketRange!==void 0&&m.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}const s=S4(t),o=this.textModel.getLineCount(),r=new Map;let a=[];const l=(f,g)=>{if(!r.has(f)){const m=[];for(let _=0,b=g?g.brackets.length:0;_<b;_++)m[_]=0;r.set(f,m)}a=r.get(f)};let c=0;const d=(f,g,m,_,b)=>{for(;;){if(s&&++c%100===0&&!s())return ju.INSTANCE;const v=ll.findNextBracketInRange(f.forwardRegex,g,m,_,b);if(!v)break;const w=m.substring(v.startColumn-1,v.endColumn-1).toLowerCase(),y=f.textIsBracket[w];if(y&&(y.isOpen(w)?a[y.index]++:y.isClose(w)&&a[y.index]--,a[y.index]===-1))return this._matchFoundBracket(v,y,!1,s);_=v.endColumn-1}return null};let u=null,h=null;for(let f=i.lineNumber;f<=o;f++){const g=this.textModel.tokenization.getLineTokens(f),m=g.getCount(),_=this.textModel.getLineContent(f);let b=0,v=0,w=0;if(f===i.lineNumber){b=g.findTokenIndexAtOffset(i.column-1),v=i.column-1,w=i.column-1;const S=g.getLanguageId(b);u!==S&&(u=S,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h))}let y=!0;for(;b<m;b++){const S=g.getLanguageId(b);if(u!==S){if(h&&y&&v!==w){const k=d(h,f,_,v,w);if(k)return uE(k);y=!1}u=S,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,h)}const x=!!h&&!ad(g.getStandardTokenType(b));if(x)y||(v=g.getStartOffset(b)),w=g.getEndOffset(b);else if(h&&y&&v!==w){const k=d(h,f,_,v,w);if(k)return uE(k)}y=x}if(h&&y&&v!==w){const S=d(h,f,_,v,w);if(S)return uE(S)}}return null}_toFoundBracket(e,t){if(!t)return null;let i=this.textModel.getValueInRange(t);i=i.toLowerCase();const s=e.getBracketInfo(i);return s?{range:t,bracketInfo:s}:null}}function EFe(n,e){return{object:n,dispose:()=>e==null?void 0:e.dispose()}}function S4(n){if(typeof n>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=n}}const i2=class i2{constructor(){this._searchCanceledBrand=void 0}};i2.INSTANCE=new i2;let ju=i2;function uE(n){return n instanceof ju?null:n}class NFe extends U{constructor(e){super(),this.textModel=e,this.colorProvider=new che,this.onDidChangeEmitter=new j,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,i,s){return s?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(r=>({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new E(1,1,this.textModel.getLineCount(),1),e,t):[]}}class che{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}tl((n,e)=>{const t=[Zue,Que,Xue,Jue,ehe,the],i=new che;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${n.getColor(VOe)}; }`);const s=t.map(o=>n.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const r=s[o%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(o)} { color: ${r}; }`)}});function hE(n){return n.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class fs{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,s){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${hE(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${hE(this.oldText)}")`:`(replace@${this.oldPosition} "${hE(this.oldText)}" with "${hE(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const s=t.length;oc(e,s,i),i+=4;for(let o=0;o<s;o++)pNe(e,t.charCodeAt(o),i),i+=2;return i}static _readString(e,t){const i=sc(e,t);return t+=4,bNe(e,t,i)}writeSize(){return 8+fs._writeStringSize(this.oldText)+fs._writeStringSize(this.newText)}write(e,t){return oc(e,this.oldPosition,t),t+=4,oc(e,this.newPosition,t),t+=4,t=fs._writeString(e,this.oldText,t),t=fs._writeString(e,this.newText,t),t}static read(e,t,i){const s=sc(e,t);t+=4;const o=sc(e,t);t+=4;const r=fs._readString(e,t);t+=fs._writeStringSize(r);const a=fs._readString(e,t);return t+=fs._writeStringSize(a),i.push(new fs(s,r,o,a)),t}}function IFe(n,e){return n===null||n.length===0?e:new ud(n,e).compress()}class ud{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,i=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(i===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldEnd<=i.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(i.newEnd<=s.oldPosition){this._acceptPrev(i),i=this._getPrev(++e);continue}if(s.oldPosition<i.newPosition){const[c,d]=ud._splitCurr(s,i.newPosition-s.oldPosition);this._acceptCurr(c),s=d;continue}if(i.newPosition<s.oldPosition){const[c,d]=ud._splitPrev(i,s.oldPosition-i.newPosition);this._acceptPrev(c),i=d;continue}let a,l;if(s.oldEnd===i.newEnd)a=i,l=s,i=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<i.newEnd){const[c,d]=ud._splitPrev(i,s.oldLength);a=c,l=s,i=d,s=this._getCurr(++t)}else{const[c,d]=ud._splitCurr(s,i.newLength);a=i,l=c,i=this._getPrev(++e),s=d}this._result[this._resultLen++]=new fs(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const o=ud._merge(this._result);return ud._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=ud._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=ud._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new fs(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new fs(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const i=e.newText.substr(0,t),s=e.newText.substr(t);return[new fs(e.oldPosition,e.oldText,e.newPosition,i),new fs(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const i=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new fs(e.oldPosition,i,e.newPosition,e.newText),new fs(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let i=0,s=e[0];for(let o=1;o<e.length;o++){const r=e[o];s.oldEnd===r.oldPosition?s=new fs(s.oldPosition,s.oldText+r.oldText,s.newPosition,s.newText+r.newText):(t[i++]=s,s=r)}return t[i++]=s,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let i=0;for(let s=0;s<e.length;s++){const o=e[s];o.oldText!==o.newText&&(t[i++]=o)}return t}}function pv(n){return n.toString()}class Un{static create(e,t){const i=e.getAlternativeVersionId(),s=JH(e);return new Un(i,i,s,s,t,t,[])}constructor(e,t,i,s,o,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=i,this.afterEOL=s,this.beforeCursorState=o,this.afterCursorState=r,this.changes=a}append(e,t,i,s,o){t.length>0&&(this.changes=IFe(this.changes,t)),this.afterEOL=i,this.afterVersionId=s,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,i){if(oc(e,t?t.length:0,i),i+=4,t)for(const s of t)oc(e,s.selectionStartLineNumber,i),i+=4,oc(e,s.selectionStartColumn,i),i+=4,oc(e,s.positionLineNumber,i),i+=4,oc(e,s.positionColumn,i),i+=4;return i}static _readSelections(e,t,i){const s=sc(e,t);t+=4;for(let o=0;o<s;o++){const r=sc(e,t);t+=4;const a=sc(e,t);t+=4;const l=sc(e,t);t+=4;const c=sc(e,t);t+=4,i.push(new Ce(r,a,l,c))}return t}serialize(){let e=10+Un._writeSelectionsSize(this.beforeCursorState)+Un._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let i=0;oc(t,this.beforeVersionId,i),i+=4,oc(t,this.afterVersionId,i),i+=4,wQ(t,this.beforeEOL,i),i+=1,wQ(t,this.afterEOL,i),i+=1,i=Un._writeSelections(t,this.beforeCursorState,i),i=Un._writeSelections(t,this.afterCursorState,i),oc(t,this.changes.length,i),i+=4;for(const s of this.changes)i=s.write(t,i);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let i=0;const s=sc(t,i);i+=4;const o=sc(t,i);i+=4;const r=vQ(t,i);i+=1;const a=vQ(t,i);i+=1;const l=[];i=Un._readSelections(t,i,l);const c=[];i=Un._readSelections(t,i,c);const d=sc(t,i);i+=4;const u=[];for(let h=0;h<d;h++)i=fs.read(t,i,u);return new Un(s,o,r,a,l,c,u)}}class dhe{get type(){return 0}get resource(){return Le.isUri(this.model)?this.model:this.model.uri}constructor(e,t,i,s){this.label=e,this.code=t,this.model=i,this._data=Un.create(i,s)}toString(){return(this._data instanceof Un?this._data:Un.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Le.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Un}append(e,t,i,s,o){this._data instanceof Un&&this._data.append(e,t,i,s,o)}close(){this._data instanceof Un&&(this._data=this._data.serialize())}open(){this._data instanceof Un||(this._data=Un.deserialize(this._data))}undo(){if(Le.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Un&&(this._data=this._data.serialize());const e=Un.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Le.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Un&&(this._data=this._data.serialize());const e=Un.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Un&&(this._data=this._data.serialize()),this._data.byteLength+168}}class TFe{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,i){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const o=pv(s.resource);this._editStackElementsMap.set(o,s)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=pv(e);return this._editStackElementsMap.has(t)}setModel(e){const t=pv(Le.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=pv(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,i,s,o){const r=pv(e.uri);this._editStackElementsMap.get(r).append(e,t,i,s,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=pv(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${Ya(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function JH(n){return n.getEOL()===`
`?0:1}function Vu(n){return n?n instanceof dhe||n instanceof TFe:!1}class kU{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Vu(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Vu(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const i=this._undoRedoService.getLastElement(this._model.uri);if(Vu(i)&&i.canAppend(this._model))return i;const s=new dhe(p("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],JH(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,i,s){const o=this._getOrCreateEditStackElement(e,s),r=this._model.applyEdits(t,!0),a=kU._computeCursorState(i,r),l=r.map((c,d)=>({index:d,textChange:c.textChange}));return l.sort((c,d)=>c.textChange.oldPosition===d.textChange.oldPosition?c.index-d.index:c.textChange.oldPosition-d.textChange.oldPosition),o.append(this._model,l.map(c=>c.textChange),JH(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(i){return He(i),null}}}class uhe extends U{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function KA(n,e){let t=0,i=0;const s=n.length;for(;i<s;){const o=n.charCodeAt(i);if(o===32)t++;else if(o===9)t=t-t%e+e;else break;i++}return i===s?-1:t}var qp;(function(n){n[n.Disabled=0]="Disabled",n[n.EnabledForActive=1]="EnabledForActive",n[n.Enabled=2]="Enabled"})(qp||(qp={}));class Lp{constructor(e,t,i,s,o,r){if(this.visibleColumn=e,this.column=t,this.className=i,this.horizontalLine=s,this.forWrappedLinesAfterColumn=o,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}}class hS{constructor(e,t){this.top=e,this.endColumn=t}}class PFe extends uhe{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return KA(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,i){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new Dt("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide);let a=-2,l=-1,c=-2,d=-1;const u=k=>{if(a!==-1&&(a===-2||a>k-1)){a=-1,l=-1;for(let D=k-2;D>=0;D--){const N=this._computeIndentLevel(D);if(N>=0){a=D,l=N;break}}}if(c===-2){c=-1,d=-1;for(let D=k;D<s;D++){const N=this._computeIndentLevel(D);if(N>=0){c=D,d=N;break}}}};let h=-2,f=-1,g=-2,m=-1;const _=k=>{if(h===-2){h=-1,f=-1;for(let D=k-2;D>=0;D--){const N=this._computeIndentLevel(D);if(N>=0){h=D,f=N;break}}}if(g!==-1&&(g===-2||g<k-1)){g=-1,m=-1;for(let D=k;D<s;D++){const N=this._computeIndentLevel(D);if(N>=0){g=D,m=N;break}}}};let b=0,v=!0,w=0,y=!0,S=0,x=0;for(let k=0;v||y;k++){const D=e-k,N=e+k;k>1&&(D<1||D<t)&&(v=!1),k>1&&(N>s||N>i)&&(y=!1),k>5e4&&(v=!1,y=!1);let R=-1;if(v&&D>=1){const B=this._computeIndentLevel(D-1);B>=0?(c=D-1,d=B,R=Math.ceil(B/this.textModel.getOptions().indentSize)):(u(D),R=this._getIndentLevelForWhitespaceLine(r,l,d))}let O=-1;if(y&&N<=s){const B=this._computeIndentLevel(N-1);B>=0?(h=N-1,f=B,O=Math.ceil(B/this.textModel.getOptions().indentSize)):(_(N),O=this._getIndentLevelForWhitespaceLine(r,f,m))}if(k===0){x=R;continue}if(k===1){if(N<=s&&O>=0&&x+1===O){v=!1,b=N,w=N,S=O;continue}if(D>=1&&R>=0&&R-1===x){y=!1,b=D,w=D,S=R;continue}if(b=e,w=e,S=x,S===0)return{startLineNumber:b,endLineNumber:w,indent:S}}v&&(R>=S?b=D:v=!1),y&&(O>=S?w=N:y=!1)}return{startLineNumber:b,endLineNumber:w,indent:S}}getLinesBracketGuides(e,t,i,s){var u;const o=[];for(let h=e;h<=t;h++)o.push([]);const r=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new E(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(i&&a.length>0){const h=(e<=i.lineNumber&&i.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(E.fromPositions(i)).toArray()).filter(f=>E.strictContainsPosition(f.range,i));l=(u=$x(h,f=>r))==null?void 0:u.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,d=new hhe;for(const h of a){if(!h.closingBracketRange)continue;const f=l&&h.range.equalsRange(l);if(!f&&!s.includeInactive)continue;const g=d.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,c)+(s.highlightActive&&f?" "+d.activeClassName:""),m=h.openingBracketRange.getStartPosition(),_=h.closingBracketRange.getStartPosition(),b=s.horizontalGuides===qp.Enabled||s.horizontalGuides===qp.EnabledForActive&&f;if(h.range.startLineNumber===h.range.endLineNumber){b&&o[h.range.startLineNumber-e].push(new Lp(-1,h.openingBracketRange.getEndPosition().column,g,new hS(!1,_.column),-1,-1));continue}const v=this.getVisibleColumnFromPosition(_),w=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),y=Math.min(w,v,h.minVisibleColumnIndentation+1);let S=!1;Zs(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(S=!0);const D=Math.max(m.lineNumber,e),N=Math.min(_.lineNumber,t),R=S?1:0;for(let O=D;O<N+R;O++)o[O-e].push(new Lp(y,-1,g,null,O===m.lineNumber?m.column:-1,O===_.lineNumber?_.column:-1));b&&(m.lineNumber>=e&&w>y&&o[m.lineNumber-e].push(new Lp(y,-1,g,new hS(!1,m.column),-1,-1)),_.lineNumber<=t&&v>y&&o[_.lineNumber-e].push(new Lp(y,-1,g,new hS(!S,_.column),-1,-1)))}for(const h of o)h.sort((f,g)=>f.visibleColumn-g.visibleColumn);return o}getVisibleColumnFromPosition(e){return yn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for startLineNumber");if(t<1||t>i)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,u=-1;for(let h=e;h<=t;h++){const f=h-e,g=this._computeIndentLevel(h-1);if(g>=0){l=h-1,c=g,a[f]=Math.ceil(g/s.indentSize);continue}if(l===-2){l=-1,c=-1;for(let m=h-2;m>=0;m--){const _=this._computeIndentLevel(m);if(_>=0){l=m,c=_;break}}}if(d!==-1&&(d===-2||d<h-1)){d=-1,u=-1;for(let m=h;m<i;m++){const _=this._computeIndentLevel(m);if(_>=0){d=m,u=_;break}}}a[f]=this._getIndentLevelForWhitespaceLine(r,c,u)}return a}_getIndentLevelForWhitespaceLine(e,t,i){const s=this.textModel.getOptions();return t===-1||i===-1?0:t<i?1+Math.floor(t/s.indentSize):t===i||e?Math.ceil(i/s.indentSize):1+Math.floor(i/s.indentSize)}}class hhe{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,i){return this.getInlineClassNameOfLevel(i?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class MFe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function RFe(n,e,t,i,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<i;o++){const h=n.charCodeAt(o),f=t.charCodeAt(o);if(h!==f)break}let r=0,a=0;for(let h=o;h<e;h++)n.charCodeAt(h)===32?r++:a++;let l=0,c=0;for(let h=o;h<i;h++)t.charCodeAt(h)===32?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),u=Math.abs(r-l);if(d===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<n.length&&l<t.length&&t.charCodeAt(l)!==32&&n.charCodeAt(l-1)===32&&n.charCodeAt(n.length-1)===44&&(s.looksLikeAlignment=!0);return}if(u%d===0){s.spacesDiff=u/d;return}}function bJ(n,e,t){const i=Math.min(n.getLineCount(),1e4);let s=0,o=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],u=new MFe;for(let g=1;g<=i;g++){const m=n.getLineLength(g),_=n.getLineContent(g),b=m<=65536;let v=!1,w=0,y=0,S=0;for(let k=0,D=m;k<D;k++){const N=b?_.charCodeAt(k):n.getLineCharCode(g,k);if(N===9)S++;else if(N===32)y++;else{v=!0,w=k;break}}if(!v||(S>0?s++:y>1&&o++,RFe(r,a,_,w,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const x=u.spacesDiff;x<=c&&d[x]++,r=_,a=w}let h=t;s!==o&&(h=s<o);let f=e;if(h){let g=h?0:.1*i;l.forEach(m=>{const _=d[m];_>g&&(g=_,f=m)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:h,tabSize:f}}function Po(n){return(n.metadata&1)>>>0}function pi(n,e){n.metadata=n.metadata&254|e<<0}function bs(n){return(n.metadata&2)>>>1===1}function hi(n,e){n.metadata=n.metadata&253|(e?1:0)<<1}function fhe(n){return(n.metadata&4)>>>2===1}function vJ(n,e){n.metadata=n.metadata&251|(e?1:0)<<2}function ghe(n){return(n.metadata&64)>>>6===1}function wJ(n,e){n.metadata=n.metadata&191|(e?1:0)<<6}function AFe(n){return(n.metadata&24)>>>3}function CJ(n,e){n.metadata=n.metadata&231|e<<3}function OFe(n){return(n.metadata&32)>>>5===1}function yJ(n,e){n.metadata=n.metadata&223|(e?1:0)<<5}class mhe{constructor(e,t,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,pi(this,1),this.start=t,this.end=i,this.delta=0,this.maxEnd=i,this.id=e,this.ownerId=0,this.options=null,vJ(this,!1),wJ(this,!1),CJ(this,1),yJ(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=null,hi(this,!1)}reset(e,t,i,s){this.start=t,this.end=i,this.maxEnd=i,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=i,this.range=s}setOptions(e){this.options=e;const t=this.options.className;vJ(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),wJ(this,this.options.glyphMarginClassName!==null),CJ(this,this.options.stickiness),yJ(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const lt=new mhe(null,0,0);lt.parent=lt;lt.left=lt;lt.right=lt;pi(lt,0);class x4{constructor(){this.root=lt,this.requestNormalizeDelta=!1}intervalSearch(e,t,i,s,o,r){return this.root===lt?[]:UFe(this,e,t,i,s,o,r)}search(e,t,i,s){return this.root===lt?[]:zFe(this,e,t,i,s)}collectNodesFromOwner(e){return jFe(this,e)}collectNodesPostOrder(){return VFe(this)}insert(e){SJ(this,e),this._normalizeDeltaIfNecessary()}delete(e){xJ(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const i=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const o=i.start+s,r=i.end+s;i.setCachedOffsets(o,r,t)}acceptReplace(e,t,i,s){const o=BFe(this,e,e+t);for(let r=0,a=o.length;r<a;r++){const l=o[r];xJ(this,l)}this._normalizeDeltaIfNecessary(),HFe(this,e,e+t,i),this._normalizeDeltaIfNecessary();for(let r=0,a=o.length;r<a;r++){const l=o[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,WFe(l,e,e+t,i,s),l.maxEnd=l.end,SJ(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,FFe(this))}}function FFe(n){let e=n.root,t=0;for(;e!==lt;){if(e.left!==lt&&!bs(e.left)){e=e.left;continue}if(e.right!==lt&&!bs(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Jg(e),hi(e,!0),hi(e.left,!1),hi(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}hi(n.root,!1)}function _v(n,e,t,i){return n<t?!0:n>t||i===1?!1:i===2?!0:e}function WFe(n,e,t,i,s){const o=AFe(n),r=o===0||o===2,a=o===1||o===2,l=t-e,c=i,d=Math.min(l,c),u=n.start;let h=!1;const f=n.end;let g=!1;e<=u&&f<=t&&OFe(n)&&(n.start=e,h=!0,n.end=e,g=!0);{const _=s?1:l>0?2:0;!h&&_v(u,r,e,_)&&(h=!0),!g&&_v(f,a,e,_)&&(g=!0)}if(d>0&&!s){const _=l>c?2:0;!h&&_v(u,r,e+d,_)&&(h=!0),!g&&_v(f,a,e+d,_)&&(g=!0)}{const _=s?1:0;!h&&_v(u,r,t,_)&&(n.start=e+c,h=!0),!g&&_v(f,a,t,_)&&(n.end=e+c,g=!0)}const m=c-l;h||(n.start=Math.max(0,u+m)),g||(n.end=Math.max(0,f+m)),n.start>n.end&&(n.end=n.start)}function BFe(n,e,t){let i=n.root,s=0,o=0,r=0,a=0;const l=[];let c=0;for(;i!==lt;){if(bs(i)){hi(i.left,!1),hi(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;continue}if(!bs(i.left)){if(o=s+i.maxEnd,o<e){hi(i,!0);continue}if(i.left!==lt){i=i.left;continue}}if(r=s+i.start,r>t){hi(i,!0);continue}if(a=s+i.end,a>=e&&(i.setCachedOffsets(r,a,0),l[c++]=i),hi(i,!0),i.right!==lt&&!bs(i.right)){s+=i.delta,i=i.right;continue}}return hi(n.root,!1),l}function HFe(n,e,t,i){let s=n.root,o=0,r=0,a=0;const l=i-(t-e);for(;s!==lt;){if(bs(s)){hi(s.left,!1),hi(s.right,!1),s===s.parent.right&&(o-=s.parent.delta),Jg(s),s=s.parent;continue}if(!bs(s.left)){if(r=o+s.maxEnd,r<e){hi(s,!0);continue}if(s.left!==lt){s=s.left;continue}}if(a=o+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(n.requestNormalizeDelta=!0),hi(s,!0);continue}if(hi(s,!0),s.right!==lt&&!bs(s.right)){o+=s.delta,s=s.right;continue}}hi(n.root,!1)}function jFe(n,e){let t=n.root;const i=[];let s=0;for(;t!==lt;){if(bs(t)){hi(t.left,!1),hi(t.right,!1),t=t.parent;continue}if(t.left!==lt&&!bs(t.left)){t=t.left;continue}if(t.ownerId===e&&(i[s++]=t),hi(t,!0),t.right!==lt&&!bs(t.right)){t=t.right;continue}}return hi(n.root,!1),i}function VFe(n){let e=n.root;const t=[];let i=0;for(;e!==lt;){if(bs(e)){hi(e.left,!1),hi(e.right,!1),e=e.parent;continue}if(e.left!==lt&&!bs(e.left)){e=e.left;continue}if(e.right!==lt&&!bs(e.right)){e=e.right;continue}t[i++]=e,hi(e,!0)}return hi(n.root,!1),t}function zFe(n,e,t,i,s){let o=n.root,r=0,a=0,l=0;const c=[];let d=0;for(;o!==lt;){if(bs(o)){hi(o.left,!1),hi(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),o=o.parent;continue}if(o.left!==lt&&!bs(o.left)){o=o.left;continue}a=r+o.start,l=r+o.end,o.setCachedOffsets(a,l,i);let u=!0;if(e&&o.ownerId&&o.ownerId!==e&&(u=!1),t&&fhe(o)&&(u=!1),s&&!ghe(o)&&(u=!1),u&&(c[d++]=o),hi(o,!0),o.right!==lt&&!bs(o.right)){r+=o.delta,o=o.right;continue}}return hi(n.root,!1),c}function UFe(n,e,t,i,s,o,r){let a=n.root,l=0,c=0,d=0,u=0;const h=[];let f=0;for(;a!==lt;){if(bs(a)){hi(a.left,!1),hi(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!bs(a.left)){if(c=l+a.maxEnd,c<e){hi(a,!0);continue}if(a.left!==lt){a=a.left;continue}}if(d=l+a.start,d>t){hi(a,!0);continue}if(u=l+a.end,u>=e){a.setCachedOffsets(d,u,o);let g=!0;i&&a.ownerId&&a.ownerId!==i&&(g=!1),s&&fhe(a)&&(g=!1),r&&!ghe(a)&&(g=!1),g&&(h[f++]=a)}if(hi(a,!0),a.right!==lt&&!bs(a.right)){l+=a.delta,a=a.right;continue}}return hi(n.root,!1),h}function SJ(n,e){if(n.root===lt)return e.parent=lt,e.left=lt,e.right=lt,pi(e,0),n.root=e,n.root;$Fe(n,e),uf(e.parent);let t=e;for(;t!==n.root&&Po(t.parent)===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;Po(i)===1?(pi(t.parent,0),pi(i,0),pi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,fS(n,t)),pi(t.parent,0),pi(t.parent.parent,1),gS(n,t.parent.parent))}else{const i=t.parent.parent.left;Po(i)===1?(pi(t.parent,0),pi(i,0),pi(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,gS(n,t)),pi(t.parent,0),pi(t.parent.parent,1),fS(n,t.parent.parent))}return pi(n.root,0),e}function $Fe(n,e){let t=0,i=n.root;const s=e.start,o=e.end;for(;;)if(KFe(s,o,i.start+t,i.end+t)<0)if(i.left===lt){e.start-=t,e.end-=t,e.maxEnd-=t,i.left=e;break}else i=i.left;else if(i.right===lt){e.start-=t+i.delta,e.end-=t+i.delta,e.maxEnd-=t+i.delta,i.right=e;break}else t+=i.delta,i=i.right;e.parent=i,e.left=lt,e.right=lt,pi(e,1)}function xJ(n,e){let t,i;if(e.left===lt?(t=e.right,i=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===lt?(t=e.left,i=e):(i=qFe(e.right),t=i.right,t.start+=i.delta,t.end+=i.delta,t.delta+=i.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),i.start+=e.delta,i.end+=e.delta,i.delta=e.delta,(i.delta<-1073741824||i.delta>1073741824)&&(n.requestNormalizeDelta=!0)),i===n.root){n.root=t,pi(t,0),e.detach(),k4(),Jg(t),n.root.parent=lt;return}const s=Po(i)===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?t.parent=i.parent:(i.parent===e?t.parent=i:t.parent=i.parent,i.left=e.left,i.right=e.right,i.parent=e.parent,pi(i,Po(e)),e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==lt&&(i.left.parent=i),i.right!==lt&&(i.right.parent=i)),e.detach(),s){uf(t.parent),i!==e&&(uf(i),uf(i.parent)),k4();return}uf(t),uf(t.parent),i!==e&&(uf(i),uf(i.parent));let o;for(;t!==n.root&&Po(t)===0;)t===t.parent.left?(o=t.parent.right,Po(o)===1&&(pi(o,0),pi(t.parent,1),fS(n,t.parent),o=t.parent.right),Po(o.left)===0&&Po(o.right)===0?(pi(o,1),t=t.parent):(Po(o.right)===0&&(pi(o.left,0),pi(o,1),gS(n,o),o=t.parent.right),pi(o,Po(t.parent)),pi(t.parent,0),pi(o.right,0),fS(n,t.parent),t=n.root)):(o=t.parent.left,Po(o)===1&&(pi(o,0),pi(t.parent,1),gS(n,t.parent),o=t.parent.left),Po(o.left)===0&&Po(o.right)===0?(pi(o,1),t=t.parent):(Po(o.left)===0&&(pi(o.right,0),pi(o,1),fS(n,o),o=t.parent.left),pi(o,Po(t.parent)),pi(t.parent,0),pi(o.left,0),gS(n,t.parent),t=n.root));pi(t,0),k4()}function qFe(n){for(;n.left!==lt;)n=n.left;return n}function k4(){lt.parent=lt,lt.delta=0,lt.start=0,lt.end=0}function fS(n,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(n.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==lt&&(t.left.parent=e),t.parent=e.parent,e.parent===lt?n.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Jg(e),Jg(t)}function gS(n,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(n.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==lt&&(t.right.parent=e),t.parent=e.parent,e.parent===lt?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Jg(e),Jg(t)}function phe(n){let e=n.end;if(n.left!==lt){const t=n.left.maxEnd;t>e&&(e=t)}if(n.right!==lt){const t=n.right.maxEnd+n.delta;t>e&&(e=t)}return e}function Jg(n){n.maxEnd=phe(n)}function uf(n){for(;n!==lt;){const e=phe(n);if(n.maxEnd===e)return;n.maxEnd=e,n=n.parent}}function KFe(n,e,t,i){return n===t?e-i:n-t}class ej{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==qe)return LU(this.right);let e=this;for(;e.parent!==qe&&e.parent.left!==e;)e=e.parent;return e.parent===qe?qe:e.parent}prev(){if(this.left!==qe)return _he(this.left);let e=this;for(;e.parent!==qe&&e.parent.right!==e;)e=e.parent;return e.parent===qe?qe:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const qe=new ej(null,0);qe.parent=qe;qe.left=qe;qe.right=qe;qe.color=0;function LU(n){for(;n.left!==qe;)n=n.left;return n}function _he(n){for(;n.right!==qe;)n=n.right;return n}function DU(n){return n===qe?0:n.size_left+n.piece.length+DU(n.right)}function EU(n){return n===qe?0:n.lf_left+n.piece.lineFeedCnt+EU(n.right)}function L4(){qe.parent=qe}function mS(n,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==qe&&(t.left.parent=e),t.parent=e.parent,e.parent===qe?n.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function pS(n,e){const t=e.left;e.left=t.right,t.right!==qe&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===qe?n.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function fE(n,e){let t,i;if(e.left===qe?(i=e,t=i.right):e.right===qe?(i=e,t=i.left):(i=LU(e.right),t=i.right),i===n.root){n.root=t,t.color=0,e.detach(),L4(),n.root.parent=qe;return}const s=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,I0(n,t)):(i.parent===e?t.parent=i:t.parent=i.parent,I0(n,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===n.root?n.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==qe&&(i.left.parent=i),i.right!==qe&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,I0(n,i)),e.detach(),t.parent.left===t){const r=DU(t),a=EU(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,Lu(n,t.parent,l,c)}}if(I0(n,t.parent),s){L4();return}let o;for(;t!==n.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,mS(n,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,pS(n,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,mS(n,t.parent),t=n.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,pS(n,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,mS(n,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,pS(n,t.parent),t=n.root));t.color=0,L4()}function kJ(n,e){for(I0(n,e);e!==n.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,mS(n,e)),e.parent.color=0,e.parent.parent.color=1,pS(n,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,pS(n,e)),e.parent.color=0,e.parent.parent.color=1,mS(n,e.parent.parent))}n.root.color=0}function Lu(n,e,t,i){for(;e!==n.root&&e!==qe;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function I0(n,e){let t=0,i=0;if(e!==n.root){for(;e!==n.root&&e===e.parent.right;)e=e.parent;if(e!==n.root)for(e=e.parent,t=DU(e.left)-e.size_left,i=EU(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==n.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const wu=65535;function bhe(n){let e;return n[n.length-1]<65536?e=new Uint16Array(n.length):e=new Uint32Array(n.length),e.set(n,0),e}class GFe{constructor(e,t,i,s,o){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=s,this.isBasicASCII=o}}function Eu(n,e=!0){const t=[0];let i=1;for(let s=0,o=n.length;s<o;s++){const r=n.charCodeAt(s);r===13?s+1<o&&n.charCodeAt(s+1)===10?(t[i++]=s+2,s++):t[i++]=s+1:r===10&&(t[i++]=s+1)}return e?bhe(t):t}function YFe(n,e){n.length=0,n[0]=0;let t=1,i=0,s=0,o=0,r=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(o++,n[t++]=l+2,l++):(i++,n[t++]=l+1):d===10?(s++,n[t++]=l+1):r&&d!==9&&(d<32||d>126)&&(r=!1)}const a=new GFe(bhe(n),i,s,o,r);return n.length=0,a}class tr{constructor(e,t,i,s,o){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=s,this.length=o}}class ap{constructor(e,t){this.buffer=e,this.lineStarts=t}}class ZFe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==qe&&e.iterate(e.root,i=>(i!==qe&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class QFe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let s=0;s<i.length;s++){const o=i[s];if(o.node.parent===null||o.nodeStartOffset>=e){i[s]=null,t=!0;continue}}if(t){const s=[];for(const o of i)o!==null&&s.push(o);this._cache=s}}}class XFe{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new ap("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=qe,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let s=null;for(let o=0,r=e.length;o<r;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=Eu(e[o].buffer));const a=new tr(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),s=this.rbInsertRight(s,a)}this._searchCache=new QFe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=wu,i=t-Math.floor(t/3),s=i*2;let o="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(r<=i||r+d<s)return o+=c,r+=d,!0;const u=o.replace(/\r\n|\r|\n/g,e);return a.push(new ap(u,Eu(u))),o=c,r=d,!0}),r>0){const l=o.replace(/\r\n|\r|\n/g,e);a.push(new ap(l,Eu(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new ZFe(this,e)}getOffsetAt(e,t){let i=0,s=this.root;for(;s!==qe;)if(s.left!==qe&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){i+=s.size_left;const o=this.getAccumulatedValue(s,e-s.lf_left-2);return i+=o+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,i+=s.size_left+s.piece.length,s=s.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const s=e;for(;t!==qe;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const o=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+o.index,o.index===0){const r=this.getOffsetAt(i+1,1),a=s-r;return new H(i+1,a+1)}return new H(i+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===qe){const o=this.getOffsetAt(i+1,1),r=s-e-o;return new H(i+1,r+1)}else t=t.right;return new H(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(i,s);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let i=e.node;const s=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let r=s.substring(o+e.remainder,o+i.piece.length);for(i=i.next();i!==qe;){const a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,i.piece.length);i=i.next()}return r}getLinesContent(){const e=[];let t=0,i="",s=!1;return this.iterate(this.root,o=>{if(o===qe)return!0;const r=o.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,d=r.start.line,u=r.end.line;let h=c[d]+r.start.column;if(s&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=i,i="",s=!1,a===0))return!0;if(d===u)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(s=!0,i+=l.substr(h,a-1)):i+=l.substr(h,a),!0;i+=this._EOLNormalized?l.substring(h,Math.max(h,c[d+1]-this._EOLLength)):l.substring(h,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=d+1;f<u;f++)i=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&l.charCodeAt(c[u]+r.end.column-1)===13?(s=!0,r.end.column===0?t--:i=l.substr(c[u],r.end.column-1)):i=l.substr(c[u],r.end.column),!0}),s&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(s)}else{const t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,i,s,o,r,a,l,c,d,u){const h=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,o),m=this.offsetInBuffer(e.piece.bufferIndex,r);let _;const b={line:0,column:0};let v,w;t._wordSeparators?(v=h.buffer.substring(g,m),w=y=>y+g,t.reset(0)):(v=h.buffer,w=y=>y,t.reset(g));do if(_=t.next(v),_){if(w(_.index)>=m)return d;this.positionInBuffer(e,w(_.index)-f,b);const y=this.getLineFeedCnt(e.piece.bufferIndex,o,b),S=b.line===o.line?b.column-o.column+s:b.column+1,x=S+_[0].length;if(u[d++]=tp(new E(i+y,S,i+y,x),_,l),w(_.index)+_[0].length>=m||d>=c)return d}while(_);return d}findMatchesLineByLine(e,t,i,s){const o=[];let r=0;const a=new nw(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,u,t,i,s,r,o),o;let h=e.startLineNumber,f=l.node;for(;f!==c.node;){const m=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(m>=1){const b=this._buffers[f.piece.bufferIndex].lineStarts,v=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),w=b[d.line+m],y=h===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(f,a,h,y,d,this.positionInBuffer(f,w-v),t,i,s,r,o),r>=s)return o;h+=m}const _=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const b=this.getLineContent(h).substring(_,e.endColumn-1);return r=this._findMatchesInLine(t,a,b,e.endLineNumber,_,r,o,i,s),o}if(r=this._findMatchesInLine(t,a,this.getLineContent(h).substr(_),h,_,r,o,i,s),r>=s)return o;h++,l=this.nodeAt2(h,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(h).substring(m,e.endColumn-1);return r=this._findMatchesInLine(t,a,_,e.endLineNumber,m,r,o,i,s),o}const g=h===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,h,g,d,u,t,i,s,r,o),o}_findMatchesInLine(e,t,i,s,o,r,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=i.length;let m=-f;for(;(m=i.indexOf(h,m+f))!==-1;)if((!d||Nz(d,i,g,m,f))&&(a[r++]=new Ux(new E(s,m+1+o,s,m+1+f+o),null),r>=c))return r;return r}let u;t.reset(0);do if(u=t.next(i),u&&(a[r++]=tp(new E(s,u.index+1+o,s,u.index+1+u[0].length+o),u,l),r>=c))return r;while(u);return r}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==qe){const{node:s,remainder:o,nodeStartOffset:r}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,o);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<wu){this.appendToNode(s,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(r+s.piece.length>e){const d=[];let u=new tr(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,o)===10){const m={line:u.start.line+1,column:0};u=new tr(u.bufferIndex,m,u.end,this.getLineFeedCnt(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,o-1)===13){const m=this.positionInBuffer(s,o-1);this.deleteNodeTail(s,m),t="\r"+t,s.piece.length===0&&d.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);const h=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let f=s;for(let g=0;g<h.length;g++)f=this.rbInsertRight(f,h[g]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,s)}else{const s=this.createNewPieces(t);let o=this.rbInsertLeft(null,s[0]);for(let r=1;r<s.length;r++)o=this.rbInsertRight(o,s[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===qe)return;const i=this.nodeAt(e),s=this.nodeAt(e+t),o=i.node,r=s.node;if(o===r){const h=this.positionInBuffer(o,i.remainder),f=this.positionInBuffer(o,s.remainder);if(i.nodeStartOffset===e){if(t===o.piece.length){const g=o.next();fE(this,o),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(o,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(i.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,h),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,h,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(o,i.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);const c=this.positionInBuffer(r,s.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const d=o.next();for(let h=d;h!==qe&&h!==r;h=h.next())a.push(h);const u=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new tr(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,Lu(this,t,-1,-1),t.piece.length===0&&i.push(t)}const s=this.createNewPieces(e);let o=this.rbInsertLeft(t,s[s.length-1]);for(let r=s.length-2;r>=0;r--)o=this.rbInsertLeft(o,s[r]);this.validateCRLFWithPrevNode(o),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),s=this.rbInsertRight(t,i[0]);let o=s;for(let r=1;r<i.length;r++)o=this.rbInsertRight(o,i[r]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,i){const s=e.piece,o=e.piece.bufferIndex,r=this._buffers[o].lineStarts,l=r[s.start.line]+s.start.column+t;let c=s.start.line,d=s.end.line,u=0,h=0,f=0;for(;c<=d&&(u=c+(d-c)/2|0,f=r[u],u!==d);)if(h=r[u+1],l<f)d=u-1;else if(l>=h)c=u+1;else break;return i?(i.line=u,i.column=l-f,null):{line:u,column:l-f}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const s=this._buffers[e].lineStarts;if(i.line===s.length-1)return i.line-t.line;const o=s[i.line+1],r=s[i.line]+i.column;if(o>r+1)return i.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)fE(this,e[t])}createNewPieces(e){if(e.length>wu){const d=[];for(;e.length>wu;){const h=e.charCodeAt(wu-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,wu-1),e=e.substring(wu-1)):(f=e.substring(0,wu),e=e.substring(wu));const g=Eu(f);d.push(new tr(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new ap(f,g))}const u=Eu(e);return d.push(new tr(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new ap(e,u)),d}let t=this._buffers[0].buffer.length;const i=Eu(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let d=0;d<i.length;d++)i[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<i.length;d++)i[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new tr(0,s,l,this.getLineFeedCnt(0,s,l),o-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let i=this.root,s="";const o=this._searchCache.get2(e);if(o){i=o.node;const r=this.getAccumulatedValue(i,e-o.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(o.nodeStartLineNumber+i.piece.lineFeedCnt===e)s=a.substring(l+r,l+i.piece.length);else{const c=this.getAccumulatedValue(i,e-o.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;i!==qe;)if(i.left!==qe&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this.getAccumulatedValue(i,e-i.lf_left-1),d=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-i.lf_left)}),d.substring(u+l,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(i,e-i.lf_left-2),c=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s=c.substring(d+l,d+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==qe;){const r=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),l=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return s+=r.substring(l,l+a-t),s}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);s+=r.substr(a,i.piece.length)}i=i.next()}return s}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==qe;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,s=this.positionInBuffer(e,t),o=s.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,i.start,s);if(r!==o)return{index:r,remainder:0}}return{index:o,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,s=this._buffers[i.bufferIndex].lineStarts,o=i.start.line+t+1;return o>i.end.line?s[i.end.line]+i.end.column-s[i.start.line]-i.start.column:s[o]-s[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,s=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.end),r=t,a=this.offsetInBuffer(i.bufferIndex,r),l=this.getLineFeedCnt(i.bufferIndex,i.start,r),c=l-s,d=a-o,u=i.length+d;e.piece=new tr(i.bufferIndex,i.start,r,l,u),Lu(this,e,d,c)}deleteNodeHead(e,t){const i=e.piece,s=i.lineFeedCnt,o=this.offsetInBuffer(i.bufferIndex,i.start),r=t,a=this.getLineFeedCnt(i.bufferIndex,r,i.end),l=this.offsetInBuffer(i.bufferIndex,r),c=a-s,d=o-l,u=i.length+d;e.piece=new tr(i.bufferIndex,r,i.end,a,u),Lu(this,e,d,c)}shrinkNode(e,t,i){const s=e.piece,o=s.start,r=s.end,a=s.length,l=s.lineFeedCnt,c=t,d=this.getLineFeedCnt(s.bufferIndex,s.start,c),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,o);e.piece=new tr(s.bufferIndex,s.start,c,d,u),Lu(this,e,u-a,d-l);const h=new tr(s.bufferIndex,i,r,this.getLineFeedCnt(s.bufferIndex,i,r),this.offsetInBuffer(s.bufferIndex,r)-this.offsetInBuffer(s.bufferIndex,i)),f=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=Eu(t,!1);for(let f=0;f<o.length;f++)o[f]+=s;if(i){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),h=u-d;e.piece=new tr(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,Lu(this,e,t.length,h)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let s=0;for(;t!==qe;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const o={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,s=0;for(;i!==qe;)if(i.left!==qe&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const o=this.getAccumulatedValue(i,e-i.lf_left-2),r=this.getAccumulatedValue(i,e-i.lf_left-1);return s+=i.size_left,{node:i,remainder:Math.min(o+t-1,r),nodeStartOffset:s}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const o=this.getAccumulatedValue(i,e-i.lf_left-2);if(o+t-1<=i.piece.length)return{node:i,remainder:o+t-1,nodeStartOffset:s};t-=i.piece.length-o;break}else e-=i.lf_left+i.piece.lineFeedCnt,s+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==qe;){if(i.piece.lineFeedCnt>0){const o=this.getAccumulatedValue(i,0),r=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,o),nodeStartOffset:r}}else if(i.piece.length>=t-1){const o=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:o}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===qe||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,o=i[s]+t.start.column;return s===i.length-1||i[s+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===qe||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],s=this._buffers[e.piece.bufferIndex].lineStarts;let o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new tr(e.piece.bufferIndex,e.piece.start,o,a,r),Lu(this,e,-1,-1),e.piece.length===0&&i.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new tr(t.piece.bufferIndex,l,t.piece.end,d,c),Lu(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let h=0;h<i.length;h++)fE(this,i[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)fE(this,i);else{const s=i.piece,o={line:s.start.line+1,column:0},r=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,o,s.end);i.piece=new tr(s.bufferIndex,o,s.end,a,r),Lu(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===qe)return t(qe);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===qe)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,s=this.offsetInBuffer(i.bufferIndex,i.start),o=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(s,o)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,s)}rbInsertRight(e,t){const i=new ej(t,1);if(i.left=qe,i.right=qe,i.parent=qe,i.size_left=0,i.lf_left=0,this.root===qe)this.root=i,i.color=0;else if(e.right===qe)e.right=i,i.parent=e;else{const o=LU(e.right);o.left=i,i.parent=o}return kJ(this,i),i}rbInsertLeft(e,t){const i=new ej(t,1);if(i.left=qe,i.right=qe,i.parent=qe,i.size_left=0,i.lf_left=0,this.root===qe)this.root=i,i.color=0;else if(e.left===qe)e.left=i,i.parent=e;else{const s=_he(e.left);s.right=i,i.parent=s}return kJ(this,i),i}}class lC extends U{constructor(e,t,i,s,o,r,a){super(),this._onDidChangeContent=this._register(new j),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=o,this._pieceTree=new XFe(e,i,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,s=this.getPositionAt(e),o=this.getPositionAt(i);return new E(s.lineNumber,s.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),s=this.getOffsetAt(e.endLineNumber,e.endColumn);let o=0;const r=this._getEndOfLine(t),a=this.getEOL();if(r.length!==a.length){const l=r.length-a.length,c=e.endLineNumber-e.startLineNumber;o=l*c}return s-i+o}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const s=e.startLineNumber,o=e.endLineNumber;for(let r=s;r<=o;r++){const a=this.getLineContent(r),l=r===s?e.startColumn-1:0,c=r===o?e.endColumn-1:a.length;for(let d=l;d<c;d++)Pn(a.charCodeAt(d))?(i=i+1,d=d+1):i=i+1}return i+=this._getEndOfLine(t).length*(o-s),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Zs(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Dc(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let s=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let m=0;m<e.length;m++){const _=e[m];a&&_._isTracked&&(a=!1);const b=_.range;if(_.text){let x=!0;r||(x=!TL(_.text),r=x),!s&&x&&(s=oy(_.text)),!o&&x&&(o=uce(_.text))}let v="",w=0,y=0,S=0;if(_.text){let x;[w,y,S,x]=Zg(_.text);const k=this.getEOL();x===0||x===(k===`\r
`?2:1)?v=_.text:v=_.text.replace(/\r\n|\r|\n/g,k)}l[m]={sortIndex:m,identifier:_.identifier||null,range:b,rangeOffset:this.getOffsetAt(b.startLineNumber,b.startColumn),rangeLength:this.getValueLengthInRange(b),text:v,eolCount:w,firstLineLength:y,lastLineLength:S,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(lC._sortOpsAscending);let c=!1;for(let m=0,_=l.length-1;m<_;m++){const b=l[m].range.getEndPosition(),v=l[m+1].range.getStartPosition();if(v.isBeforeOrEqual(b)){if(v.isBefore(b))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=i||t?lC._getInverseEditRanges(l):[],u=[];if(t)for(let m=0;m<l.length;m++){const _=l[m],b=d[m];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let v=b.startLineNumber;v<=b.endLineNumber;v++){let w="";v===b.startLineNumber&&(w=this.getLineContent(_.range.startLineNumber),Zs(w)!==-1)||u.push({lineNumber:v,oldContent:w})}}let h=null;if(i){let m=0;h=[];for(let _=0;_<l.length;_++){const b=l[_],v=d[_],w=this.getValueInRange(b.range),y=b.rangeOffset+m;m+=b.text.length-w.length,h[_]={sortIndex:b.sortIndex,identifier:b.identifier,range:v,text:w,textChange:new fs(b.rangeOffset,w,y,b.text)}}c||h.sort((_,b)=>_.sortIndex-b.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=r;const f=this._doApplyEdits(l);let g=null;if(t&&u.length>0){u.sort((m,_)=>_.lineNumber-m.lineNumber),g=[];for(let m=0,_=u.length;m<_;m++){const b=u[m].lineNumber;if(m>0&&u[m-1].lineNumber===b)continue;const v=u[m].oldContent,w=this.getLineContent(b);w.length===0||w===v||Zs(w)!==-1||g.push(b)}}return this._onDidChangeContent.fire(),new cIe(h,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,s=e[e.length-1].range,o=new E(i.startLineNumber,i.startColumn,s.endLineNumber,s.endColumn);let r=i.startLineNumber,a=i.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const m=e[f],_=m.range;t=t||m.forceMoveMarkers,l.push(this.getValueInRange(new E(r,a,_.startLineNumber,_.startColumn))),m.text.length>0&&l.push(m.text),r=_.endLineNumber,a=_.endColumn}const c=l.join(""),[d,u,h]=Zg(c);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:c,eolCount:d,firstLineLength:u,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(lC._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const s=e[i],o=s.range.startLineNumber,r=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(o===a&&r===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new E(o,r,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,s){return this._pieceTree.findMatchesLineByLine(e,t,i,s)}static _getInverseEditRanges(e){const t=[];let i=0,s=0,o=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,d;o?o.range.endLineNumber===l.range.startLineNumber?(c=i,d=s+(l.range.startColumn-o.range.endColumn)):(c=i+(l.range.startLineNumber-o.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let u;if(l.text.length>0){const h=l.eolCount+1;h===1?u=new E(c,d,c,d+l.firstLineLength):u=new E(c,d,c+h-1,l.lastLineLength+1)}else u=new E(c,d,c,d);i=u.endLineNumber,s=u.endColumn,t.push(u),o=l}return t}static _sortOpsAscending(e,t){const i=E.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=E.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class JFe{constructor(e,t,i,s,o,r,a,l,c){this._chunks=e,this._bom=t,this._cr=i,this._lf=s,this._crlf=o,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,r=i.length;o<r;o++){const a=i[o].buffer.replace(/\r\n|\r|\n/g,t),l=Eu(a);i[o]=new ap(a,l)}const s=new lC(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class vhe{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&gz(e)&&(this.BOM=QLe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=YFe(this._tmpLineStarts,e);this.chunks.push(new ap(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=oy(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=uce(e)))}finish(e=!0){return this._finish(),new JFe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Eu(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class e4e{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,i){if(e>=this._store.length)return;if(t===0){this.insert(e,i);return}else if(i===0){this.delete(e,t);return}const s=this._store.slice(0,e),o=this._store.slice(e+t),r=t4e(i,this._default);this._store=s.concat(r,o)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const i=[];for(let s=0;s<t;s++)i[s]=this._default;this._store=QR(this._store,e,i)}}function t4e(n,e){const t=[];for(let i=0;i<n;i++)t[i]=e;return t}class i4e{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class tj{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===e){i.appendLineTokens(t);return}}this._tokens.push(new i4e(e,[t]))}finalize(){return this._tokens}}class n4e{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new ij(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class s4e extends n4e{constructor(e,t,i,s){super(e,t),this._textModel=i,this._languageIdCodec=s}updateTokensUntilLine(e,t){const i=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>t)break;const o=this._textModel.getLineContent(s.lineNumber),r=X1(this._languageIdCodec,i,this.tokenizationSupport,o,!0,s.startState);e.add(s.lineNumber,r.tokens),this.store.setEndState(s.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const i=this.getStartState(e.lineNumber);if(!i)return 0;const s=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),r=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=X1(this._languageIdCodec,s,this.tokenizationSupport,r,!0,i),l=new Xn(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,i){const s=e.lineNumber,o=e.column,r=this.getStartState(s);if(!r)return null;const a=this._textModel.getLineContent(s),l=a.substring(0,o-1)+i+a.substring(o-1+t),c=this._textModel.getLanguageIdAtPosition(s,0),d=X1(this._languageIdCodec,c,this.tokenizationSupport,l,!0,r);return new Xn(d.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,i),{heuristicTokens:!1};let s=this.guessStartState(t);const o=this._textModel.getLanguageId();for(let r=t;r<=i;r++){const a=this._textModel.getLineContent(r),l=X1(this._languageIdCodec,o,this.tokenizationSupport,a,!0,s);e.add(r,l.tokens),s=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const i=[];let s=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(i.push(this._textModel.getLineContent(a)),t=l,s=this.getStartState(a),s))break}s||(s=this.tokenizationSupport.getInitialState()),i.reverse();const o=this._textModel.getLanguageId();let r=s;for(const a of i)r=X1(this._languageIdCodec,o,this.tokenizationSupport,a,!1,r).endState;return r}}class ij{constructor(e){this.lineCount=e,this._tokenizationStateStore=new o4e,this._invalidEndStatesLineNumbers=new r4e,this._invalidEndStatesLineNumbers.addRange(new st(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Dt("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const i=this._tokenizationStateStore.setEndState(e,t);return i&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new st(e+1,e+2)),i}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new st(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[i]=Zg(t.text);this.acceptChange(new $e(t.range.startLineNumber,t.range.endLineNumber+1),i+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new st(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const i=this.getStartState(t,e);if(!i)throw new Dt("Start state must be defined");return{lineNumber:t,startState:i}}}class o4e{constructor(){this._lineEndStates=new e4e(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const i=this._lineEndStates.get(e);return i&&i.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let i=e.length;t>0&&i>0&&(i--,t--),this._lineEndStates.replace(e.startLineNumber,i,t)}}class r4e{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(i=>i.contains(e));if(t!==-1){const i=this._ranges[t];i.start===e?i.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new st(e+1,i.endExclusive):i.endExclusive===e+1?this._ranges[t]=new st(i.start,e):this._ranges.splice(t,1,new st(i.start,e),new st(e+1,i.endExclusive))}}addRange(e){st.addRange(e,this._ranges)}addRangeAndResize(e,t){let i=0;for(;!(i>=this._ranges.length||e.start<=this._ranges[i].endExclusive);)i++;let s=i;for(;!(s>=this._ranges.length||e.endExclusive<this._ranges[s].start);)s++;const o=t-e.length;for(let r=s;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(o);if(i===s){const r=new st(e.start,e.start+t);r.isEmpty||this._ranges.splice(i,0,r)}else{const r=Math.min(e.start,this._ranges[i].start),a=Math.max(e.endExclusive,this._ranges[s-1].endExclusive),l=new st(r,a+o);l.isEmpty?this._ranges.splice(i,s-i):this._ranges.splice(i,s-i,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function X1(n,e,t,i,s,o){let r=null;if(t)try{r=t.tokenizeEncoded(i,s,o.clone())}catch(a){He(a)}return r||(r=WA(n.encodeLanguageId(e),o)),Xn.convertToEndOffset(r.tokens,i.length),r}class a4e{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,bce(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),i=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Fle(i):this._beginBackgroundTokenization())};i()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new tj,i=Qn.create(!1);do if(i.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var i;const t=(i=this._tokenizerWithStateStore)==null?void 0:i.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new $e(e,t))}}class l4e{constructor(){this._onDidChangeVisibleRanges=new j,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new c4e(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class c4e{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const i=e.map(s=>new $e(s.startLineNumber,s.endLineNumber+1));this.handleStateChange({visibleLineRanges:i,stabilized:t})}}class d4e extends U{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new $t(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){Li(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class whe extends U{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=i,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new j),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new j),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class LJ extends whe{constructor(e,t,i,s){super(t,i,s),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=_W.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const i=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(i)return new Xn(i,t,this._languageIdCodec)}return Xn.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,i){return 0}tokenizeLineWithEdit(e,t,i){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const Che=dt("treeSitterParserService"),Nu=new Uint32Array(0).buffer;class vd{static deleteBeginning(e,t){return e===null||e===Nu?e:vd.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Nu)return e;const i=qu(e),s=i[i.length-2];return vd.delete(e,t,s)}static delete(e,t,i){if(e===null||e===Nu||t===i)return e;const s=qu(e),o=s.length>>>1;if(t===0&&s[s.length-2]===i)return Nu;const r=Xn.findIndexInTokensArray(s,t),a=r>0?s[r-1<<1]:0,l=s[r<<1];if(i<l){const f=i-t;for(let g=r;g<o;g++)s[g<<1]-=f;return e}let c,d;a!==t?(s[r<<1]=t,c=r+1<<1,d=t):(c=r<<1,d=a);const u=i-t;for(let f=r+1;f<o;f++){const g=s[f<<1]-u;g>d&&(s[c++]=g,s[c++]=s[(f<<1)+1],d=g)}if(c===s.length)return e;const h=new Uint32Array(c);return h.set(s.subarray(0,c),0),h.buffer}static append(e,t){if(t===Nu)return e;if(e===Nu)return t;if(e===null)return e;if(t===null)return null;const i=qu(e),s=qu(t),o=s.length>>>1,r=new Uint32Array(i.length+s.length);r.set(i,0);let a=i.length;const l=i[i.length-2];for(let c=0;c<o;c++)r[a++]=s[c<<1]+l,r[a++]=s[(c<<1)+1];return r.buffer}static insert(e,t,i){if(e===null||e===Nu)return e;const s=qu(e),o=s.length>>>1;let r=Xn.findIndexInTokensArray(s,t);r>0&&s[r-1<<1]===t&&r--;for(let a=r;a<o;a++)s[a<<1]+=i;return e}}function qu(n){return n instanceof Uint32Array?n:new Uint32Array(n)}class mk{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,i){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==Nu)return new Xn(qu(s),i,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=i.length,o[1]=DJ(this._languageIdCodec.encodeLanguageId(e)),new Xn(o,i,this._languageIdCodec)}static _massageTokens(e,t,i){const s=i?qu(i):null;if(t===0){let o=!1;if(s&&s.length>1&&(o=Bo.getLanguageId(s[1])!==e),!o)return Nu}if(!s||s.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=DJ(e),o.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const i=[];for(let s=0;s<t;s++)i[s]=null;this._lineTokens=QR(this._lineTokens,e,i),this._len+=t}setTokens(e,t,i,s,o){const r=mk._massageTokens(this._languageIdCodec.encodeLanguageId(e),i,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,o?!mk._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const i=qu(e),s=qu(t);if(i.length!==s.length)return!1;for(let o=0,r=i.length;o<r;o++)if(i[o]!==s[o])return!1;return!0}acceptEdit(e,t,i){this._acceptDeleteRange(e),this._acceptInsertText(new H(e.startLineNumber,e.startColumn),t,i)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=vd.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=vd.deleteEnding(this._lineTokens[t],e.startColumn-1);const i=e.endLineNumber-1;let s=null;i<this._len&&(s=vd.deleteBeginning(this._lineTokens[i],e.endColumn-1)),this._lineTokens[t]=vd.append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,i){if(t===0&&i===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=vd.insert(this._lineTokens[s],e.column-1,i);return}this._lineTokens[s]=vd.deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=vd.insert(this._lineTokens[s],e.column-1,i),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const i=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];let a=0,l=0,c=!1;for(let d=r.startLineNumber;d<=r.endLineNumber;d++)c?(this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!1),l=d):this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&i.push({fromLineNumber:a,toLineNumber:l})}return{changes:i}}}function DJ(n){return(n<<0|0|0|32768|2<<24|1024)>>>0}class NU{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let i=e;if(t.length>0){const o=t[0].getRange(),r=t[t.length-1].getRange();if(!o||!r)return e;i=e.plusRange(o).plusRange(r)}let s=null;for(let o=0,r=this._pieces.length;o<r;o++){const a=this._pieces[o];if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:o};break}if(a.removeTokens(i),a.isEmpty()){this._pieces.splice(o,1),o--,r--;continue}if(a.endLineNumber<i.startLineNumber)continue;if(a.startLineNumber>i.endLineNumber){s=s||{index:o};continue}const[l,c]=a.split(i);if(l.isEmpty()){s=s||{index:o};continue}c.isEmpty()||(this._pieces.splice(o,1,l,c),o++,r++,s=s||{index:o})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=QR(this._pieces,s.index,t)),i}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const i=this._pieces;if(i.length===0)return t;const s=NU._findFirstPieceWithLine(i,e),o=i[s].getLineTokens(e);if(!o)return t;const r=t.getCount(),a=o.getCount();let l=0;const c=[];let d=0,u=0;const h=(f,g)=>{f!==u&&(u=f,c[d++]=f,c[d++]=g)};for(let f=0;f<a;f++){const g=o.getStartCharacter(f),m=o.getEndCharacter(f),_=o.getMetadata(f),b=((_&1?2048:0)|(_&2?4096:0)|(_&4?8192:0)|(_&8?16384:0)|(_&16?16744448:0)|(_&32?4278190080:0))>>>0,v=~b>>>0;for(;l<r&&t.getEndOffset(l)<=g;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<g&&h(g,t.getMetadata(l));l<r&&t.getEndOffset(l)<m;)h(t.getEndOffset(l),t.getMetadata(l)&v|_&b),l++;if(l<r)h(m,t.getMetadata(l)&v|_&b),t.getEndOffset(l)===m&&l++;else{const w=Math.min(Math.max(0,l-1),r-1);h(m,t.getMetadata(w)&v|_&b)}}for(;l<r;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new Xn(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let i=0,s=e.length-1;for(;i<s;){let o=i+Math.floor((s-i)/2);if(e[o].endLineNumber<t)i=o+1;else if(e[o].startLineNumber>t)s=o-1;else{for(;o>i&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return i}acceptEdit(e,t,i,s,o){for(const r of this._pieces)r.acceptEdit(e,t,i,s,o)}}var u4e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},D4=function(n,e){return function(t,i){e(t,i,n)}},AN;let nj=AN=class extends uhe{constructor(e,t,i,s,o,r,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=i,this._attachedViews=s,this._languageService=o,this._languageConfigurationService=r,this._treeSitterService=a,this._semanticTokens=new NU(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new j),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new j),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new j),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new Q),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(ue.filter(_W.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new EJ(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new LJ(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){var i;const t=this._tokens!==void 0;(i=this._tokens)==null||i.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(s=>{this._emitModelTokensChangedEvent(s)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(s=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){_W.get(this._languageId)?this._tokens instanceof LJ||this.createTokens(!0):this._tokens instanceof EJ||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[i,s,o]=Zg(t.text);this._semanticTokens.acceptEdit(t.range,i,s,o,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Dt("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,i){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,i)}tokenizeLineWithEdit(e,t,i){return this._tokens.tokenizeLineWithEdit(e,t,i)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const i=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),i=this._textModel.getLineContent(t.lineNumber),s=this.getLineTokens(t.lineNumber),o=s.findTokenIndexAtOffset(t.column-1),[r,a]=AN._findLanguageBoundaries(s,o),l=Mx(t.column,this.getLanguageConfiguration(s.getLanguageId(o)).getWordDefinition(),i.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(o>0&&r===t.column-1){const[c,d]=AN._findLanguageBoundaries(s,o-1),u=Mx(t.column,this.getLanguageConfiguration(s.getLanguageId(o-1)).getWordDefinition(),i.substring(c,d),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const i=e.getLanguageId(t);let s=0;for(let r=t;r>=0&&e.getLanguageId(r)===i;r--)s=e.getStartOffset(r);let o=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===i;r++)o=e.getEndOffset(r);return[s,o]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const i=this._textModel.validatePosition(new H(e,t)),s=this.getLineTokens(i.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(i.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const i={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};nj=AN=u4e([D4(4,Di),D4(5,Ri),D4(6,Che)],nj);class EJ extends whe{constructor(e,t,i,s){super(e,t,i),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new jn),this._tokens=new mk(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new jn),this._attachedViewStates=this._register(new nz),this._register(Hi.onDidChange(o=>{const r=this.getLanguageId();o.changedLanguages.indexOf(r)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(s.onDidChangeVisibleRanges(({view:o,state:r})=>{if(r){let a=this._attachedViewStates.get(o);a||(a=new d4e(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(o,a)),a.handleStateChange(r)}else this._attachedViewStates.deleteAndDispose(o)}))}resetTokenization(e=!0){var o;this._tokens.flush(),(o=this._debugBackgroundTokens)==null||o.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new ij(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=Hi.get(this.getLanguageId());if(!r)return[null,null];let a;try{a=r.getInitialState()}catch(l){return He(l),[null,null]}return[r,a]},[i,s]=t();if(i&&s?this._tokenizer=new s4e(this._textModel.getLineCount(),i,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var d;if(!this._tokenizer)return;const c=this._tokenizer.store.getFirstInvalidEndStateLineNumber();c!==null&&a>=c&&((d=this._tokenizer)==null||d.store.setEndState(a,l))}};i&&i.createBackgroundTokenizer&&!i.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new a4e(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),i!=null&&i.backgroundTokenizerShouldOnlyVerifyTokens&&i.createBackgroundTokenizer?(this._debugBackgroundTokens=new mk(this._languageIdCodec),this._debugBackgroundStates=new ij(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=i.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)==null||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)==null||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)==null||e.handleChanges()}handleDidChangeContent(e){var t,i,s;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const o of e.changes){const[r,a]=Zg(o.text);this._tokens.acceptEdit(o.range,r,a),(t=this._debugBackgroundTokens)==null||t.acceptEdit(o.range,r,a)}(i=this._debugBackgroundStates)==null||i.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(s=this._defaultBackgroundTokenizer)==null||s.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=$e.joinMany([...this._attachedViewStates].map(([t,i])=>i.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var r,a;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const i=new tj,{heuristicTokens:s}=this._tokenizer.tokenizeHeuristically(i,e,t),o=this.setTokens(i.finalize());if(s)for(const l of o.changes)(r=this._backgroundTokenizer.value)==null||r.requestTokens(l.fromLineNumber,l.toLineNumber+1);(a=this._defaultBackgroundTokenizer)==null||a.checkFinished()}forceTokenization(e){var i,s;const t=new tj;(i=this._tokenizer)==null||i.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),(s=this._defaultBackgroundTokenizer)==null||s.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){var s;const t=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const o=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!i.equals(o)&&((s=this._debugBackgroundTokenizer.value)!=null&&s.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,i){if(!this._tokenizer)return 0;const s=this._textModel.validatePosition(new H(e,t));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,i)}tokenizeLineWithEdit(e,t,i){if(!this._tokenizer)return null;const s=this._textModel.validatePosition(e);return this.forceTokenization(s.lineNumber),this._tokenizer.tokenizeLineWithEdit(s,t,i)}get hasTokens(){return this._tokens.hasTokens}}class h4e{constructor(){this.changeType=1}}class Wc{static applyInjectedText(e,t){if(!t||t.length===0)return e;let i="",s=0;for(const o of t)i+=e.substring(s,o.column-1),s=o.column-1,i+=o.options.content;return i+=e.substring(s),i}static fromDecorations(e){const t=[];for(const i of e)i.options.before&&i.options.before.content.length>0&&t.push(new Wc(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new Wc(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,s)=>i.lineNumber===s.lineNumber?i.column===s.column?i.order-s.order:i.column-s.column:i.lineNumber-s.lineNumber),t}constructor(e,t,i,s,o){this.ownerId=e,this.lineNumber=t,this.column=i,this.options=s,this.order=o}}class NJ{constructor(e,t,i){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=i}}class f4e{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class g4e{constructor(e,t,i,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=i}}class m4e{constructor(){this.changeType=5}}class cC{constructor(e,t,i,s){this.changes=e,this.versionId=t,this.isUndoing=i,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new cC(i,s,o,r)}}class yhe{constructor(e){this.changes=e}}class Kp{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=cC.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),i=Kp._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Kp(t,i)}static _mergeChangeEvents(e,t){const i=[].concat(e.changes).concat(t.changes),s=t.eol,o=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:i,eol:s,isEolChange:c,versionId:o,isUndoing:r,isRedoing:a,isFlush:l}}}var p4e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},gE=function(n,e){return function(t,i){e(t,i,n)}},qm;function _4e(n){const e=new vhe;return e.acceptChunk(n),e.finish()}function b4e(n){const e=new vhe;let t;for(;typeof(t=n.read())=="string";)e.acceptChunk(t);return e.finish()}function IJ(n,e){let t;return typeof n=="string"?t=_4e(n):aIe(n)?t=b4e(n):t=n,t.create(e)}let mE=0;const v4e=999,w4e=1e4;class C4e{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,i=0;do{const s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,i+=s.length),i>=64*1024)return e.join("")}while(!0)}}const J1=()=>{throw new Error("Invalid change accessor")};var mc;let Cc=(mc=class extends U{static resolveOptions(e,t){if(t.detectIndentation){const i=bJ(e,t.tabSize,t.insertSpaces);return new kN({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new kN(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return El(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,i,s=null,o,r,a,l){super(),this._undoRedoService=o,this._languageService=r,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new j),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new D4e(g=>this.handleBeforeFireDecorationsChangedEvent(g))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new j),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new j),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new j),this._eventEmitter=this._register(new E4e),this._languageSelectionListener=this._register(new jn),this._deltaDecorationCallCnt=0,this._attachedViews=new l4e,mE++,this.id="$model"+mE,this.isForSimpleWidget=i.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=Le.parse("inmemory://model/"+mE):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:c,disposable:d}=IJ(e,i.defaultEOL);this._buffer=c,this._bufferDisposable=d,this._options=qm.resolveOptions(this._buffer,i);const u=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new DFe(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new PFe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new NFe(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(nj,this,this._bracketPairs,u,this._attachedViews);const h=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new E(1,1,h,this._buffer.getLineLength(h)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=f>qm.LARGE_FILE_SIZE_THRESHOLD||h>qm.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=f>qm.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=f>qm._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=hce(mE),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new TJ,this._commandManager=new kU(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(u),this._register(this._languageConfigurationService.onDidChange(g=>{this._bracketPairs.handleLanguageConfigurationServiceChange(g),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(g)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new lC([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=U.None}_assertNotDisposed(){if(this._isDisposed)throw new Dt("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Kp(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw ja();const{textBuffer:t,disposable:i}=IJ(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,i)}_createContentChanged2(e,t,i,s,o,r,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:i,text:s}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:o,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new TJ,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new cC([new h4e],this._versionId,!1,!1),this._createContentChanged2(new E(1,1,o,r),0,s,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const i=this.getFullModelRange(),s=this.getValueLengthInRange(i),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new cC([new m4e],this._versionId,!1,!1),this._createContentChanged2(new E(1,1,o,r),0,s,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let i=0,s=t.length;i<s;i++){const o=t[i],r=o.range,a=o.cachedAbsoluteStart-o.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);o.cachedAbsoluteStart=l,o.cachedAbsoluteEnd=c,o.cachedVersionId=e,o.start=l-a,o.end=c-a,Jg(o)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const i=this._buffer.getLineCount();for(let s=1;s<=i;s++){const o=this._buffer.getLineLength(s);o>=w4e?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,i=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new kN({tabSize:t,indentSize:i,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const i=bJ(this._buffer,t,e);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),wU(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(dce.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Dt("Operation would exceed heap memory limits");const i=this.getFullModelRange(),s=this.getValueInRange(i,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new C4e(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const i=this.getFullModelRange(),s=this.getValueLengthInRange(i,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dt("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dt("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Dt("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dt("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dt("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dt("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),i=e.startLineNumber,s=e.startColumn;let o=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),r=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(o<1)o=1,r=1;else if(o>t)o=t,r=this.getLineMaxColumn(o);else if(r<=1)r=1;else{const u=this.getLineMaxColumn(o);r>=u&&(r=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const u=this.getLineMaxColumn(c);d>=u&&(d=u)}return i===o&&s===r&&a===c&&l===d&&e instanceof E&&!(e instanceof Ce)?e:new E(o,r,c,d)}_isValidPosition(e,t,i){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const o=this.getLineMaxColumn(e);if(t>o)return!1;if(i===1){const r=this._buffer.getLineCharCode(e,t-2);if(Pn(r))return!1}return!0}_validatePosition(e,t,i){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(s<1)return new H(1,1);if(s>r)return new H(r,this.getLineMaxColumn(r));if(o<=1)return new H(s,1);const a=this.getLineMaxColumn(s);if(o>=a)return new H(s,a);if(i===1){const l=this._buffer.getLineCharCode(s,o-2);if(Pn(l))return new H(s,o-1)}return new H(s,o)}validatePosition(e){return this._assertNotDisposed(),e instanceof H&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const i=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(i,s,0)||!this._isValidPosition(o,r,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(i,s-2):0,l=r>1&&r<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,r-2):0,c=Pn(a),d=Pn(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof E&&!(e instanceof Ce)&&this._isValidRange(e,1))return e;const i=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),o=i.lineNumber,r=i.column,a=s.lineNumber,l=s.column;{const c=r>1?this._buffer.getLineCharCode(o,r-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=Pn(c),h=Pn(d);return!u&&!h?new E(o,r,a,l):o===a&&r===l?new E(o,r-1,a,l-1):u&&h?new E(o,r-1,a,l+1):u?new E(o,r-1,a,l):new E(o,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const i=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new E(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,i,s){return this._buffer.findMatchesLineByLine(e,t,i,s)}findMatches(e,t,i,s,o,r,a=v4e){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>E.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,h)=>u.startLineNumber-h.startLineNumber||u.startColumn-h.startColumn);const c=[];c.push(l.reduce((u,h)=>E.areIntersecting(u,h)?u.plusRange(h):(c.push(u),h)));let d;if(!i&&e.indexOf(`
`)<0){const h=new $m(e,i,s,o).parseSearchRequest();if(!h)return[];d=f=>this.findMatchesLineByLine(f,h,r,a)}else d=u=>YD.findMatches(this,new $m(e,i,s,o),u,r,a);return c.map(d).reduce((u,h)=>u.concat(h),[])}findNextMatch(e,t,i,s,o,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!i&&e.indexOf(`
`)<0){const c=new $m(e,i,s,o).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let u=new E(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),h=this.findMatchesLineByLine(u,c,r,1);return YD.findNextMatch(this,new $m(e,i,s,o),a,r),h.length>0||(u=new E(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(u,c,r,1),h.length>0)?h[0]:null}return YD.findNextMatch(this,new $m(e,i,s,o),a,r)}findPreviousMatch(e,t,i,s,o,r){this._assertNotDisposed();const a=this.validatePosition(t);return YD.findPreviousMatch(this,new $m(e,i,s,o),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof e4?e:new e4(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this._validateEditOperation(e[i]);return t}pushEditOperations(e,t,i,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),i,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,i,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const o=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let r=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let d=!1;for(let u=0,h=o.length;u<h;u++){const f=o[u].range,g=f.startLineNumber>c.endLineNumber,m=c.startLineNumber>f.endLineNumber;if(!g&&!m){d=!0;break}}if(!d){r=!1;break}}if(r)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],d=this.getLineMaxColumn(c);let u=!0;for(let h=0,f=o.length;h<f;h++){const g=o[h].range,m=o[h].text;if(!(c<g.startLineNumber||c>g.endLineNumber)&&!(c===g.startLineNumber&&g.startColumn===d&&g.isEmpty()&&m&&m.length>0&&m.charAt(0)===`
`)&&!(c===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&m&&m.length>0&&m.charAt(m.length-1)===`
`)){u=!1;break}}if(u){const h=new E(c,1,c,d);t.push(new e4(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,i,s)}_applyUndo(e,t,i,s){const o=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new E(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,i,s)}_applyRedo(e,t,i,s){const o=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new E(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(o,t,!1,!0,i,s)}_applyUndoRedoEdits(e,t,i,s,o,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const i=this._validateEditOperations(e);return this._doApplyEdits(i,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const i=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),r=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,r.length!==0){for(let c=0,d=r.length;c<d;c++){const u=r[c];this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=i;for(let c=0,d=r.length;c<d;c++){const u=r[c],[h]=Zg(u.text);this._onDidChangeDecorations.fire();const f=u.range.startLineNumber,g=u.range.endLineNumber,m=g-f,_=h,b=Math.min(m,_),v=_-m,w=o-l-v+f,y=w,S=w+_,x=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new H(y,1)),this.getOffsetAt(new H(S,this.getLineMaxColumn(S))),0),k=Wc.fromDecorations(x),D=new Dh(k);for(let N=b;N>=0;N--){const R=f+N,O=w+N;D.takeFromEndWhile(z=>z.lineNumber>O);const B=D.takeFromEndWhile(z=>z.lineNumber===O);a.push(new NJ(R,this.getLineContent(O),B))}if(b<m){const N=f+b;a.push(new f4e(N+1,g))}if(b<_){const N=new Dh(k),R=f+b,O=_-b,B=o-l-O+R+1,z=[],F=[];for(let K=0;K<O;K++){const Z=B+K;F[K]=this.getLineContent(Z),N.takeWhile(re=>re.lineNumber<Z),z[K]=N.takeWhile(re=>re.lineNumber===Z)}a.push(new g4e(R+1,f+_,F,z))}l+=v}this._emitContentChangedEvent(new cC(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const i=Array.from(e).map(s=>new NJ(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeInjectedText.fire(new yhe(i))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const i={addDecoration:(o,r)=>this._deltaDecorationsImpl(e,[],[{range:o,options:r}])[0],changeDecoration:(o,r)=>{this._changeDecorationImpl(o,r)},changeDecorationOptions:(o,r)=>{this._changeDecorationOptionsImpl(o,MJ(r))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,r)=>o.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,o,r)};let s=null;try{s=t(i)}catch(o){He(o)}return i.addDecoration=J1,i.changeDecoration=J1,i.changeDecorationOptions=J1,i.removeDecoration=J1,i.deltaDecorations=J1,s}deltaDecorations(e,t,i=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),He(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,i){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:PJ[i]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const o=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),r,a,o),s.setOptions(PJ[i]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let i=0,s=t.length;i<s;i++){const o=t[i];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,i=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,i)}getLinesDecorations(e,t,i=0,s=!1,o=!1){const r=this.getLineCount(),a=Math.min(r,Math.max(1,e)),l=Math.min(r,Math.max(1,t)),c=this.getLineMaxColumn(l),d=new E(a,1,l,c),u=this._getDecorationsInRange(d,i,s,o);return iW(u,this._decorationProvider.getDecorationsInRange(d,i,s)),u}getDecorationsInRange(e,t=0,i=!1,s=!1,o=!1){const r=this.validateRange(e),a=this._getDecorationsInRange(r,t,i,o);return iW(a,this._decorationProvider.getDecorationsInRange(r,t,i,s)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),i=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,i,0);return Wc.fromDecorations(s).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let i=this._decorationsTree.getAll(this,e,t,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(e,t)),i}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,i,s){const o=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,o,r,t,i,s)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const i=this._decorations[e];if(!i)return;if(i.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(i.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),r=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,r,s),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const i=this._decorations[e];if(!i)return;const s=!!(i.options.overviewRuler&&i.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const r=s!==o,a=S4e(t)!==ON(i);r||a?(this._decorationsTree.delete(i),i.setOptions(t),this._decorationsTree.insert(i)):i.setOptions(t)}_deltaDecorationsImpl(e,t,i,s=!1){const o=this.getVersionId(),r=t.length;let a=0;const l=i.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const d=new Array(l);for(;a<r||c<l;){let u=null;if(a<r){do u=this._decorations[t[a++]];while(!u&&a<r);if(u){if(u.options.after){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(u.options.before){const h=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(u),s||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(c<l){if(!u){const b=++this._lastDecorationId,v=`${this._instanceId};${b}`;u=new mhe(v,0,0),this._decorations[v]=u}const h=i[c],f=this._validateRangeRelaxedNoAllocations(h.range),g=MJ(h.options),m=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),_=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);u.ownerId=e,u.reset(o,m,_,f),u.setOptions(g),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),s||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(u),d[c]=u.id,c++}else u&&delete this._decorations[u.id]}return d}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return y4e(this.getLineContent(e))+1}},qm=mc,mc._MODEL_SYNC_LIMIT=50*1024*1024,mc.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,mc.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,mc.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,mc.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ls.tabSize,indentSize:Ls.indentSize,insertSpaces:Ls.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ls.trimAutoWhitespace,largeFileOptimizations:Ls.largeFileOptimizations,bracketPairColorizationOptions:Ls.bracketPairColorizationOptions},mc);Cc=qm=p4e([gE(4,Oz),gE(5,Di),gE(6,Ri),gE(7,ke)],Cc);function y4e(n){let e=0;for(const t of n)if(t===" "||t==="	")e++;else break;return e}function E4(n){return!!(n.options.overviewRuler&&n.options.overviewRuler.color)}function S4e(n){return!!n.after||!!n.before}function ON(n){return!!n.options.after||!!n.options.before}class TJ{constructor(){this._decorationsTree0=new x4,this._decorationsTree1=new x4,this._injectedTextDecorationsTree=new x4}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const i of t)i.range===null&&(i.range=e.getRangeAt(i.cachedAbsoluteStart,i.cachedAbsoluteEnd));return t}getAllInInterval(e,t,i,s,o,r){const a=e.getVersionId(),l=this._intervalSearch(t,i,s,o,a,r);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,i,s,o,r){const a=this._decorationsTree0.intervalSearch(e,t,i,s,o,r),l=this._decorationsTree1.intervalSearch(e,t,i,s,o,r),c=this._injectedTextDecorationsTree.intervalSearch(e,t,i,s,o,r);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,i,s){const o=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,i,s,!1,o,!1);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const i=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,i,!1);return this._ensureNodesHaveRanges(e,s).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,i,s,o){const r=e.getVersionId(),a=this._search(t,i,s,r,o);return this._ensureNodesHaveRanges(e,a)}_search(e,t,i,s,o){if(i)return this._decorationsTree1.search(e,t,s,o);{const r=this._decorationsTree0.search(e,t,s,o),a=this._decorationsTree1.search(e,t,s,o),l=this._injectedTextDecorationsTree.search(e,t,s,o);return r.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),i=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(i).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(i)}insert(e){ON(e)?this._injectedTextDecorationsTree.insert(e):E4(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){ON(e)?this._injectedTextDecorationsTree.delete(e):E4(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const i=e.getVersionId();return t.cachedVersionId!==i&&this._resolveNode(t,i),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){ON(e)?this._injectedTextDecorationsTree.resolveNode(e,t):E4(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,i,s){this._decorationsTree0.acceptReplace(e,t,i,s),this._decorationsTree1.acceptReplace(e,t,i,s),this._injectedTextDecorationsTree.acceptReplace(e,t,i,s)}}function id(n){return n.replace(/[^a-z0-9\-_]/gi," ")}class She{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class x4e extends She{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:aa.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const i=e?t.getColor(e.id):null;return i?i.toString():""}}class k4e{constructor(e){this.position=(e==null?void 0:e.position)??Rl.Center,this.persistLane=e==null?void 0:e.persistLane}}class L4e extends She{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?te.fromHex(e):t.getColor(e.id)}}class em{static from(e){return e instanceof em?e:new em(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class ze{static register(e){return new ze(e)}static createDynamic(e){return new ze(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?id(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?id(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new x4e(e.overviewRuler):null,this.minimap=e.minimap?new L4e(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new k4e(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?id(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?id(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?id(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?jLe(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?id(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?id(e.marginClassName):null,this.inlineClassName=e.inlineClassName?id(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?id(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?id(e.afterContentClassName):null,this.after=e.after?em.from(e.after):null,this.before=e.before?em.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}ze.EMPTY=ze.register({description:"empty"});const PJ=[ze.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ze.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ze.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ze.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function MJ(n){return n instanceof ze?n:ze.createDynamic(n)}class D4e extends U{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new j),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)==null||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,i;this._affectsMinimap||(this._affectsMinimap=!!((t=e.minimap)!=null&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!((i=e.overviewRuler)!=null&&i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class E4e extends U{constructor(){super(),this._fastEmitter=this._register(new j),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new j),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var N4e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},pE=function(n,e){return function(t,i){e(t,i,n)}},Mv;function Pm(n){return n.toString()}let I4e=class{constructor(e,t,i){this.model=e,this._modelEventListeners=new Q,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>i(e,s)))}dispose(){this._modelEventListeners.dispose()}};const T4e=vo||ct?1:2;class P4e{constructor(e,t,i,s,o,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=i,this.sharesUndoRedoStack=s,this.heapSize=o,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}var t_;let sj=(t_=class extends U{constructor(e,t,i,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=i,this._instantiationService=s,this._onModelAdded=this._register(new j),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new j),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new j),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(o=>this._updateModelOptions(o))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var h;let i=Ls.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(i=f),i<1&&(i=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=Math.max(f,1))}let o=Ls.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let r=T4e;const a=e.eol;a===`\r
`?r=2:a===`
`&&(r=1);let l=Ls.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Ls.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let d=Ls.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(d=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let u=Ls.bracketPairColorizationOptions;return(h=e.editor)!=null&&h.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(u={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:s,insertSpaces:o,detectIndentation:c,defaultEOL:r,trimAutoWhitespace:l,largeFileOptimizations:d,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const i=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return i&&typeof i=="string"&&i!=="auto"?i:mr===3||mr===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,i){const s=typeof e=="string"?e:e.languageId;let o=this._modelCreationOptionsByLanguageAndResource[s+t];if(!o){const r=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:t}),a=this._getEOL(t,s);o=Mv._readModelOptions({editor:r,eol:a},i),this._modelCreationOptionsByLanguageAndResource[s+t]=o}return o}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const i=Object.keys(this._models);for(let s=0,o=i.length;s<o;s++){const r=i[s],a=this._models[r],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const d=t[l+c],u=this.getCreationOptions(l,c,a.model.isForSimpleWidget);Mv._setModelOptionsForModel(a.model,u,d)}}static _setModelOptionsForModel(e,t,i){i&&i.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(i&&i.detectIndentation===t.detectIndentation&&i.insertSpaces===t.insertSpaces&&i.tabSize===t.tabSize&&i.indentSize===t.indentSize&&i.trimAutoWhitespace===t.trimAutoWhitespace&&_r(i.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Pm(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Pm(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Pm(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(i=>{i.sharesUndoRedoStack||t.push(i)}),t.sort((i,s)=>i.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const i=t.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}}_createModelData(e,t,i,s){const o=this.getCreationOptions(t,i,s),r=this._instantiationService.createInstance(Cc,e,t,o,i);if(i&&this._disposedModels.has(Pm(i))){const c=this._removeDisposedModel(i),d=this._undoRedoService.getElements(i),u=this._getSHA1Computer(),h=u.canComputeSHA1(r)?u.computeSHA1(r)===c.sha1:!1;if(h||c.sharesUndoRedoStack){for(const f of d.past)Vu(f)&&f.matchesResource(i)&&f.setModel(r);for(const f of d.future)Vu(f)&&f.matchesResource(i)&&f.setModel(r);this._undoRedoService.setElementsValidFlag(i,!0,f=>Vu(f)&&f.matchesResource(i)),h&&(r._overwriteVersionId(c.versionId),r._overwriteAlternativeVersionId(c.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Pm(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new I4e(r,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,i,s=!1){let o;return t?o=this._createModelData(e,t,i,s):o=this._createModelData(e,_o,i,s),this._onModelAdded.fire(o.model),o.model}getModels(){const e=[],t=Object.keys(this._models);for(let i=0,s=t.length;i<s;i++){const o=t[i];e.push(this._models[o].model)}return e}getModel(e){const t=Pm(e),i=this._models[t];return i?i.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===je.file||e.scheme===je.vscodeRemote||e.scheme===je.vscodeUserData||e.scheme===je.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Pm(e.uri),i=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let o=!1,r=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const d of c.past)Vu(d)&&d.matchesResource(e.uri)&&(o=!0,r+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of c.future)Vu(d)&&d.matchesResource(e.uri)&&(o=!0,r+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=Mv.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(o)if(!s&&(r>a||!l.canComputeSHA1(e))){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>Vu(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new P4e(e.uri,i.model.getInitialUndoRedoSnapshot(),Date.now(),s,r,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const c=i.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],i.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const i=t.oldLanguage,s=e.getLanguageId(),o=this.getCreationOptions(i,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);Mv._setModelOptionsForModel(e,r,o),this._onModelModeChanged.fire({model:e,oldLanguageId:i})}_getSHA1Computer(){return new oj}},Mv=t_,t_.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,t_);sj=Mv=N4e([pE(0,nt),pE(1,vde),pE(2,Oz),pE(3,ke)],sj);const n2=class n2{canComputeSHA1(e){return e.getValueLength()<=n2.MAX_MODEL_SIZE}computeSHA1(e){const t=new wB,i=e.createSnapshot();let s;for(;s=i.read();)t.update(s);return t.digest()}};n2.MAX_MODEL_SIZE=10*1024*1024;let oj=n2;var rj;(function(n){n[n.PRESERVE=0]="PRESERVE",n[n.LAST=1]="LAST"})(rj||(rj={}));const $b={Quickaccess:"workbench.contributions.quickaccess"};class M4e{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,i)=>i.prefix.length-t.prefix.length),xe(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Tl([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(i=>e.startsWith(i.prefix))||void 0||this.defaultProvider}}Mi.add($b.Quickaccess,new M4e);const R4e={ctrlCmd:!1,alt:!1};var Cy;(function(n){n[n.Blur=1]="Blur",n[n.Gesture=2]="Gesture",n[n.Other=3]="Other"})(Cy||(Cy={}));var lc;(function(n){n[n.NONE=0]="NONE",n[n.FIRST=1]="FIRST",n[n.SECOND=2]="SECOND",n[n.LAST=3]="LAST"})(lc||(lc={}));var di;(function(n){n[n.First=1]="First",n[n.Second=2]="Second",n[n.Last=3]="Last",n[n.Next=4]="Next",n[n.Previous=5]="Previous",n[n.NextPage=6]="NextPage",n[n.PreviousPage=7]="PreviousPage",n[n.NextSeparator=8]="NextSeparator",n[n.PreviousSeparator=9]="PreviousSeparator"})(di||(di={}));var $T;(function(n){n[n.Title=1]="Title",n[n.Inline=2]="Inline"})($T||($T={}));const il=dt("quickInputService");var A4e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},RJ=function(n,e){return function(t,i){e(t,i,n)}};let aj=class extends U{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Mi.as($b.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,i){var g,m;const[s,o]=this.getOrInstantiateProvider(e,i==null?void 0:i.enabledProviderPrefixes),r=this.visibleQuickAccess,a=r==null?void 0:r.descriptor;if(r&&o&&a===o){e!==o.prefix&&!(i!=null&&i.preserveValue)&&(r.picker.value=e),this.adjustValueSelection(r.picker,o,i);return}if(o&&!(i!=null&&i.preserveValue)){let _;if(r&&a&&a!==o){const b=r.value.substr(a.prefix.length);b&&(_=`${o.prefix}${b}`)}if(!_){const b=s==null?void 0:s.defaultFilterValue;b===rj.LAST?_=this.lastAcceptedPickerValues.get(o):typeof b=="string"&&(_=`${o.prefix}${b}`)}typeof _=="string"&&(e=_)}const l=(g=r==null?void 0:r.picker)==null?void 0:g.valueSelection,c=(m=r==null?void 0:r.picker)==null?void 0:m.value,d=new Q,u=d.add(this.quickInputService.createQuickPick({useSeparators:!0}));u.value=e,this.adjustValueSelection(u,o,i),u.placeholder=(i==null?void 0:i.placeholder)??(o==null?void 0:o.placeholder),u.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,u.hideInput=!!u.quickNavigate&&!r,(typeof(i==null?void 0:i.itemActivation)=="number"||i!=null&&i.quickNavigateConfiguration)&&(u.itemActivation=(i==null?void 0:i.itemActivation)??lc.SECOND),u.contextKey=o==null?void 0:o.contextKey,u.filterValue=_=>_.substring(o?o.prefix.length:0);let h;t&&(h=new Jy,d.add(ue.once(u.onWillAccept)(_=>{_.veto(),u.hide()}))),d.add(this.registerPickerListeners(u,s,o,e,i));const f=d.add(new Pi);if(s&&d.add(s.provide(u,f.token,i==null?void 0:i.providerOptions)),ue.once(u.onDidHide)(()=>{u.selectedItems.length===0&&f.cancel(),d.dispose(),h==null||h.complete(u.selectedItems.slice(0))}),u.show(),l&&c===e&&(u.valueSelection=l),t)return h==null?void 0:h.p}adjustValueSelection(e,t,i){let s;i!=null&&i.preserveValue?s=[e.value.length,e.value.length]:s=[(t==null?void 0:t.prefix.length)??0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,i,s,o){const r=new Q,a=this.visibleQuickAccess={picker:e,descriptor:i,value:s};return r.add(xe(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,o==null?void 0:o.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:o==null?void 0:o.enabledProviderPrefixes,preserveValue:!0,providerOptions:o==null?void 0:o.providerOptions}):a.value=l})),i&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,e.value)})),r}getOrInstantiateProvider(e,t){const i=this.registry.getQuickAccessProvider(e);if(!i||t&&!(t!=null&&t.includes(i.prefix)))return[void 0,void 0];let s=this.mapProviderToDescriptor.get(i);return s||(s=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,s)),[s,i]}};aj=A4e([RJ(0,il),RJ(1,ke)],aj);class h1 extends ba{constructor(e){super(),this._onChange=this._register(new j),this.onChange=this._onChange.event,this._onKeyDown=this._register(new j),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Re.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register($c().setupManagedHover(e.hoverDelegate??ko("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,i=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),i.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,i=>{if(i.keyCode===10||i.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),i.preventDefault(),i.stopPropagation();return}this._onKeyDown.fire(i)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var O4e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};class xhe{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}O4e([an],xhe.prototype,"toString",null);const F4e=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function W4e(n){const e=[];let t=0,i;for(;i=F4e.exec(n);){i.index-t>0&&e.push(n.substring(t,i.index));const[,s,o,,r]=i;r?e.push({label:s,href:o,title:r}):e.push({label:s,href:o}),t=i.index+i[0].length}return t<n.length&&e.push(n.substring(t)),new xhe(e)}const N4={},B4e=new rU("quick-input-button-icon-");function H4e(n){if(!n)return;let e;const t=n.dark.toString();return N4[t]?e=N4[t]:(e=B4e.nextId(),nT(`.${e}, .hc-light .${e}`,`background-image: ${Th(n.light||n.dark)}`),nT(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Th(n.dark)}`),N4[t]=e),e}function _S(n,e,t){let i=n.iconClass||H4e(n.iconPath);return n.alwaysVisible&&(i=i?`${i} always-visible`:"always-visible"),{id:e,label:"",tooltip:n.tooltip||"",class:i,enabled:!0,run:t}}function j4e(n,e,t){rs(e);const i=W4e(n);let s=0;for(const o of i.nodes)if(typeof o=="string")e.append(...gg(o));else{let r=o.title;!r&&o.href.startsWith("command:")?r=p("executeCommand","Click to execute command '{0}'",o.href.substring(8)):r||(r=o.href);const a=ce("a",{href:o.href,title:r,tabIndex:s++},o.label);a.style.textDecoration="underline";const l=f=>{aEe(f)&&gt.stop(f,!0),t.callback(o.href)},c=t.disposables.add(new ft(a,le.CLICK)).event,d=t.disposables.add(new ft(a,le.KEY_DOWN)).event,u=ue.chain(d,f=>f.filter(g=>{const m=new ti(g);return m.equals(10)||m.equals(3)}));t.disposables.add(Is.addTarget(a));const h=t.disposables.add(new ft(a,si.Tap)).event;ue.any(c,h,u)(l,null,t.disposables),e.appendChild(a)}}var V4e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},AJ=function(n,e){return function(t,i){e(t,i,n)}};const khe="inQuickInput",z4e=new me(khe,!1,p("inQuickInput","Whether keyboard focus is inside the quick input control")),U4e=X.has(khe),Lhe="quickInputType",$4e=new me(Lhe,void 0,p("quickInputType","The type of the currently visible quick input")),Dhe="cursorAtEndOfQuickInputBox",q4e=new me(Dhe,!1,p("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),K4e=X.has(Dhe),lj={iconClass:Re.asClassName(ae.quickInputBack),tooltip:p("quickInput.back","Back"),handle:-1},s2=class s2 extends U{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=s2.noPromptMessage,this._severity=on.Ignore,this.onDidTriggerButtonEmitter=this._register(new j),this.onDidHideEmitter=this._register(new j),this.onWillHideEmitter=this._register(new j),this.onDisposeEmitter=this._register(new j),this.visibleDisposables=this._register(new Q),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Ac;this._ignoreFocusOut=e&&!Ac,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===lj),this._rightButtons=e.filter(t=>t!==lj&&t.location!==$T.Inline),this._inlineButtons=e.filter(t=>t.location===$T.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=Cy.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=Cy.Other){this.onWillHideEmitter.fire({reason:e})}update(){var s;if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?rs(this.ui.widget,this._widget):rs(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new Bl,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const o=this._leftButtons.map((l,c)=>_S(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(o,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this._rightButtons.map((l,c)=>_S(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(r,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const a=this._inlineButtons.map((l,c)=>_S(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.inlineActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const o=((s=this.toggles)==null?void 0:s.filter(r=>r instanceof h1))??[];this.ui.inputBox.toggles=o}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,rs(this.ui.message),j4e(i,this.ui.message,{callback:o=>{this.ui.linkOpenerDelegate(o)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?p("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==on.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};s2.noPromptMessage=p("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let qT=s2;const o2=class o2 extends qT{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new j),this.onWillAcceptEmitter=this._register(new j),this.onDidAcceptEmitter=this._register(new j),this.onDidCustomEmitter=this._register(new j),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=lc.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new j),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new j),this.onDidTriggerItemButtonEmitter=this._register(new j),this.onDidTriggerSeparatorButtonEmitter=this._register(new j),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new EL,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?R4e:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(di.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&Li(e,this._activeItems,(t,i)=>t===i)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&Li(e,this._selectedItems,(i,s)=>i===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(Cz(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&Li(e,this._selectedItems,(t,i)=>t===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return G(this.ui.container,le.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new ti(e),i=t.keyCode;this._quickNavigate.keybindings.some(r=>{const a=r.getChords();return a.length>1?!1:a[0].shiftKey&&i===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&i===6||a[0].ctrlKey&&i===5||a[0].metaKey&&i===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,i={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;!s&&i.inputBox&&(s=this.placeholder||o2.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case lc.NONE:this._itemActivation=lc.FIRST;break;case lc.SECOND:this.ui.list.focus(di.Second),this._itemActivation=lc.FIRST;break;case lc.LAST:this.ui.list.focus(di.Last),this._itemActivation=lc.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(di.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};o2.DEFAULT_ARIA_LABEL=p("quickInputBox.ariaLabel","Type to narrow down results.");let KT=o2,G4e=class extends qT{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new j),this.onDidAcceptEmitter=this._register(new j),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},cj=class extends hy{constructor(e,t){super("element",!1,i=>this.getOverrideOptions(i),e,t)}getOverrideOptions(e){const t=(Fn(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};cj=V4e([AJ(0,nt),AJ(1,du)],cj);te.white.toString(),te.white.toString();class GT extends U{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new j),this._onDidEscape=this._register(new j),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const i=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,s=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=i||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Is.addTarget(this._element)),[le.CLICK,si.Tap].forEach(o=>{this._register(G(this._element,o,r=>{if(!this.enabled){gt.stop(r);return}this._onDidClick.fire(r)}))}),this._register(G(this._element,le.KEY_DOWN,o=>{const r=new ti(o);let a=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(o),a=!0):r.equals(9)&&(this._onDidEscape.fire(o),this._element.blur(),a=!0),a&&gt.stop(r,!0)})),this._register(G(this._element,le.MOUSE_OVER,o=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(G(this._element,le.MOUSE_OUT,o=>{this.updateBackground(!1)})),this.focusTracker=this._register(Fc(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let i of gg(e))if(typeof i=="string"){if(i=i.trim(),i==="")continue;const s=document.createElement("span");s.textContent=i,t.push(s)}else t.push(i);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var s;if(this._label===e||Tc(this._label)&&Tc(e)&&D2e(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(Tc(e)){const o=FA(e,{inline:!0});o.dispose();const r=(s=o.element.querySelector("p"))==null?void 0:s.innerHTML;if(r){const a=kce(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=a}else rs(t)}else this.options.supportIcons?rs(t,...this.getContentElements(e)):t.textContent=e;let i="";typeof this.options.title=="string"?i=this.options.title:this.options.title&&(i=W2e(e)),this.setTitle(i),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",i),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...Re.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register($c().setupManagedHover(this.options.hoverDelegate??ko("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class dj{constructor(e,t,i){this.options=t,this.styles=i,this.count=0,this.element=ne(e,ce(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=ab(this.countFormat,this.count),this.element.title=ab(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const OJ="done",FJ="active",I4="infinite",T4="infinite-long-running",WJ="discrete",r2=class r2 extends U{constructor(e,t){super(),this.progressSignal=this._register(new jn),this.workedVal=0,this.showDelayedScheduler=this._register(new $t(()=>hr(this.element),0)),this.longRunningScheduler=this._register(new $t(()=>this.infiniteLongRunning(),r2.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(FJ,I4,T4,WJ),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(OJ),this.element.classList.contains(I4)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(WJ,OJ,T4),this.element.classList.add(FJ,I4),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(T4)}getContainer(){return this.element}};r2.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let uj=r2;const Y4e=p("caseDescription","Match Case"),Z4e=p("wordsDescription","Match Whole Word"),Q4e=p("regexDescription","Use Regular Expression");class Ehe extends h1{constructor(e){super({icon:ae.caseSensitive,title:Y4e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??ko("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Nhe extends h1{constructor(e){super({icon:ae.wholeWord,title:Z4e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??ko("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Ihe extends h1{constructor(e){super({icon:ae.regex,title:Q4e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??ko("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class X4e{constructor(e,t=0,i=e.length,s=t-1){this.items=e,this.start=t,this.end=i,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class J4e{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new X4e(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const e0=ce;class e5e extends ba{constructor(e,t,i){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new j),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new j),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=i,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ne(e,e0(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",o=ne(this.element,e0(".ibwrapper"));if(this.input=ne(o,e0(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ne(o,e0("div.mirror")),this.mirror.innerText="",this.scrollableElement=new iue(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ne(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const r=this._register(new ft(e.ownerDocument,"selectionchange")),a=ue.filter(r.event,()=>{const l=e.ownerDocument.getSelection();return(l==null?void 0:l.anchorNode)===o});this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new ca(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register($c().setupManagedHover(ko("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:Xu(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return lA(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:i})}showMessage(e,t){if(this.state==="open"&&_r(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const i=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${gh(i.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=lr(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{if(!this.message)return null;e=ne(s,e0(".monaco-inputbox-container")),t();const o={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?$Me(this.message.content,o):UMe(this.message.content,o);r.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return r.style.backgroundColor=a.background??"",r.style.color=a.foreground??"",r.style.border=a.border?`1px solid ${a.border}`:"",ne(e,r),null},onHide:()=>{this.state="closed"},layout:t});let i;this.message.type===3?i=p("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?i=p("alertWarningMessage","Warning: {0}",this.message.content):i=p("alertInfoMessage","Info: {0}",this.message.content),yo(i),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,i=e.charCodeAt(e.length-1)===10?" ":"";(e+i).replace(/\u000c/g,"")?this.mirror.textContent=e+i:this.mirror.innerText="",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",i=e.inputForeground??"",s=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=i,this.input.style.backgroundColor="inherit",this.input.style.color=i,this.element.style.border=`1px solid ${gh(s,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=Xu(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,i=t.selectionStart,s=t.selectionEnd,o=t.value;i!==null&&s!==null&&(this.value=o.substr(0,i)+e+o.substr(s),t.setSelectionRange(i+1,i+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)==null||e.dispose(),super.dispose()}}class The extends e5e{constructor(e,t,i){const s=p({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is  to represent the up and down arrow keys.']}," or {0} for history",""),o=p({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is  to represent the up and down arrow keys.']}," ({0} for history)","");super(e,t,i),this._onDidFocus=this._register(new j),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new j),this.onDidBlur=this._onDidBlur.event,this.history=new J4e(i.history,100);const r=()=>{if(i.showHistoryHint&&i.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?s:o,l=this.placeholder+a;i.showPlaceholderOnFocus&&!lA(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||r()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>r()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return i.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(o)||a(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",Xd(this.value?this.value:p("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Xd(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const t5e=p("defaultLabel","input");class Phe extends ba{constructor(e,t,i){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new jn),this.additionalToggles=[],this._onDidOptionChange=this._register(new j),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new j),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new j),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new j),this._onKeyUp=this._register(new j),this._onCaseSensitiveKeyDown=this._register(new j),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new j),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||t5e,this.showCommonFindToggles=!!i.showCommonFindToggles;const s=i.appendCaseSensitiveLabel||"",o=i.appendWholeWordsLabel||"",r=i.appendRegexLabel||"",a=i.history||[],l=!!i.flexibleHeight,c=!!i.flexibleWidth,d=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new The(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:i.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d,inputBoxStyles:i.inputBoxStyles}));const u=this._register(vy());if(this.showCommonFindToggles){this.regex=this._register(new Ihe({appendTitle:r,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.regex.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(f=>{this._onRegexKeyDown.fire(f)})),this.wholeWords=this._register(new Nhe({appendTitle:o,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.wholeWords.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Ehe({appendTitle:s,isChecked:!1,hoverDelegate:u,...i.toggleStyles})),this._register(this.caseSensitive.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(f=>{this._onCaseSensitiveKeyDown.fire(f)}));const h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(15)||f.equals(17)||f.equals(9)){const g=h.indexOf(this.domNode.ownerDocument.activeElement);if(g>=0){let m=-1;f.equals(17)?m=(g+1)%h.length:f.equals(15)&&(g===0?m=h.length-1:m=g-1),f.equals(9)?(h[g].blur(),this.inputBox.focus()):m>=0&&h[m].focus(),gt.stop(f,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(i==null?void 0:i.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(G(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(G(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)==null||e.enable(),(t=this.wholeWords)==null||t.enable(),(i=this.caseSensitive)==null||i.enable();for(const s of this.additionalToggles)s.enable()}disable(){var e,t,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)==null||e.disable(),(t=this.wholeWords)==null||t.disable(),(i=this.caseSensitive)==null||i.disable();for(const s of this.additionalToggles)s.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Q;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(i=>{this._onDidOptionChange.fire(i),!i&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,i,s;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(((t=this.caseSensitive)==null?void 0:t.width())??0)+(((i=this.wholeWords)==null?void 0:i.width())??0)+(((s=this.regex)==null?void 0:s.width())??0)+this.additionalToggles.reduce((o,r)=>o+r.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e;return((e=this.caseSensitive)==null?void 0:e.checked)??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e;return((e=this.wholeWords)==null?void 0:e.checked)??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e;return((e=this.regex)==null?void 0:e.checked)??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)==null||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const i5e=ce;class n5e extends U{constructor(e,t,i){super(),this.parent=e,this.onKeyDown=o=>Fi(this.findInput.inputBox.inputElement,le.KEY_DOWN,o),this.onDidChange=o=>this.findInput.onDidChange(o),this.container=ne(this.parent,i5e(".quick-input-box")),this.findInput=this._register(new Phe(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:i}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===on.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===on.Info?1:e===on.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===on.Info?1:e===on.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class s5e{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:U.None}}renderElement(e,t,i,s){var l;if((l=i.disposable)==null||l.dispose(),!i.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,i.data,s);const r=new Pi,a=o.resolve(e,r.token);i.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(e,i.data),a.then(c=>this.renderer.renderElement(c,e,i.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class o5e{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function r5e(n,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new o5e(n,e.accessibilityProvider)}}class a5e{constructor(e,t,i,s,o={}){const r=()=>this.model,a=s.map(l=>new s5e(l,r));this.list=new va(e,t,i,a,r5e(r,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return ue.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onPointer(){return ue.map(this.list.onPointer,({element:e,index:t,browserEvent:i})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:i}))}get onDidChangeSelection(){return ue.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:i})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Ro(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var f1=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};const l5e=!1;var YT;(function(n){n.North="north",n.South="south",n.East="east",n.West="west"})(YT||(YT={}));let c5e=4;const d5e=new j;let u5e=300;const h5e=new j;class IU{constructor(e){this.el=e,this.disposables=new Q}get onPointerMove(){return this.disposables.add(new ft(Te(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new ft(Te(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}f1([an],IU.prototype,"onPointerMove",null);f1([an],IU.prototype,"onPointerUp",null);class TU{get onPointerMove(){return this.disposables.add(new ft(this.el,si.Change)).event}get onPointerUp(){return this.disposables.add(new ft(this.el,si.End)).event}constructor(e){this.el=e,this.disposables=new Q}dispose(){this.disposables.dispose()}}f1([an],TU.prototype,"onPointerMove",null);f1([an],TU.prototype,"onPointerUp",null);class ZT{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}f1([an],ZT.prototype,"onPointerMove",null);f1([an],ZT.prototype,"onPointerUp",null);const BJ="pointer-events-disabled";class xs extends U{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=i=>{this.orthogonalStartDragHandleDisposables.clear(),i!==0&&(this._orthogonalStartDragHandle=ne(this.el,ce(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(xe(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new ft(this._orthogonalStartDragHandle,"mouseenter")).event(()=>xs.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new ft(this._orthogonalStartDragHandle,"mouseleave")).event(()=>xs.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=i=>{this.orthogonalEndDragHandleDisposables.clear(),i!==0&&(this._orthogonalEndDragHandle=ne(this.el,ce(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(xe(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new ft(this._orthogonalEndDragHandle,"mouseenter")).event(()=>xs.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new ft(this._orthogonalEndDragHandle,"mouseleave")).event(()=>xs.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,i){super(),this.hoverDelay=u5e,this.hoverDelayer=this._register(new qa(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new j),this._onDidStart=this._register(new j),this._onDidChange=this._register(new j),this._onDidReset=this._register(new j),this._onDidEnd=this._register(new j),this.orthogonalStartSashDisposables=this._register(new Q),this.orthogonalStartDragHandleDisposables=this._register(new Q),this.orthogonalEndSashDisposables=this._register(new Q),this.orthogonalEndDragHandleDisposables=this._register(new Q),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=ne(e,ce(".monaco-sash")),i.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${i.orthogonalEdge}`),ct&&this.el.classList.add("mac");const s=this._register(new ft(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new IU(e)),this));const o=this._register(new ft(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const r=this._register(new ft(this.el,"mouseenter")).event;this._register(r(()=>xs.onMouseEnter(this)));const a=this._register(new ft(this.el,"mouseleave")).event;this._register(a(()=>xs.onMouseLeave(this))),this._register(Is.addTarget(this.el));const l=this._register(new ft(this.el,si.Start)).event;this._register(l(u=>this.onPointerStart(u,new TU(this.el)),this));const c=this._register(new ft(this.el,si.Tap)).event;let d;this._register(c(u=>{if(d){clearTimeout(d),d=void 0,this.onPointerDoublePress(u);return}clearTimeout(d),d=setTimeout(()=>d=void 0,250)},this)),typeof i.size=="number"?(this.size=i.size,i.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=c5e,this._register(d5e.event(u=>{this.size=u,this.layout()}))),this._register(h5e.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=i.orthogonalStartSash,this.orthogonalEndSash=i.orthogonalEndSash,this.orientation=i.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",l5e),this.layout()}onPointerStart(e,t){gt.stop(e);let i=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(i=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new ZT(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new ZT(t))),!this.state)return;const s=this.el.ownerDocument.getElementsByTagName("iframe");for(const g of s)g.classList.add(BJ);const o=e.pageX,r=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=ha(this.el),d=()=>{let g="";i?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=ct?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=ct?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},u=new Q;d(),i||this.onDidEnablementChange.event(d,null,u);const h=g=>{gt.stop(g,!1);const m={startX:o,currentX:g.pageX,startY:r,currentY:g.pageY,altKey:a};this._onDidChange.fire(m)},f=g=>{gt.stop(g,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const m of s)m.classList.remove(BJ)};t.onPointerMove(h,null,u),t.onPointerUp(f,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&xs.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&xs.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){xs.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!Fn(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const f5e={separatorBorder:te.transparent};class Mhe{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var i,s;if(e!==this.visible){e?(this.size=so(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(s=(i=this.view).setVisible)==null||s.call(i,e)}catch(o){console.error("Splitview: Failed to set visible view"),console.error(o)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,i,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(i){console.error("Splitview: Failed to layout view"),console.error(i)}}dispose(){this.disposable.dispose()}}class g5e extends Mhe{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class m5e extends Mhe{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Iu;(function(n){n[n.Idle=0]="Idle",n[n.Busy=1]="Busy"})(Iu||(Iu={}));var QT;(function(n){n.Distribute={type:"distribute"};function e(s){return{type:"split",index:s}}n.Split=e;function t(s){return{type:"auto",index:s}}n.Auto=t;function i(s){return{type:"invisible",cachedVisibleSize:s}}n.Invisible=i})(QT||(QT={}));class Rhe extends U{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Iu.Idle,this._onDidSashChange=this._register(new j),this._onDidSashReset=this._register(new j),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=ne(this.el,ce(".sash-container")),this.viewContainer=ce(".split-view-container"),this.scrollable=this._register(new a1({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:s=>xr(Te(this.el),s)})),this.scrollableElement=this._register(new PA(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const i=this._register(new ft(this.viewContainer,"scroll")).event;this._register(i(s=>{const o=this.scrollableElement.getScrollPosition(),r=Math.abs(this.viewContainer.scrollLeft-o.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-o.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(r!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:r,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(s=>{s.scrollTopChanged&&(this.viewContainer.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this.viewContainer.scrollLeft=s.scrollLeft)})),ne(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||f5e),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((s,o)=>{const r=Ks(s.visible)||s.visible?s.size:{type:"invisible",cachedVisibleSize:s.size},a=s.view;this.doAddView(a,r,o,!0)}),this._contentSize=this.viewItems.reduce((s,o)=>s+o.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,i=this.viewItems.length,s){this.doAddView(e,t,i,s)}layout(e,t){const i=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let s=0;for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"?s+=a:e-=r.size}for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"&&s>0&&(r.size=so(Math.round(a*e/s),r.minimumSize,r.maximumSize))}}else{const s=Ro(this.viewItems.length),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-i,void 0,o,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:i}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),o=El(G(this.el.ownerDocument.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),G(this.el.ownerDocument.body,"keyup",()=>r(this.sashDragState.current,!1))),r=(a,l)=>{const c=this.viewItems.map(g=>g.size);let d=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const m=this.viewItems[s];d=(m.minimumSize-m.size)/2,u=(m.maximumSize-m.size)/2}else{const m=this.viewItems[s+1];d=(m.size-m.maximumSize)/2,u=(m.size-m.minimumSize)/2}let h,f;if(!l){const g=Ro(s,-1),m=Ro(s+1,this.viewItems.length),_=g.reduce((D,N)=>D+(this.viewItems[N].minimumSize-c[N]),0),b=g.reduce((D,N)=>D+(this.viewItems[N].viewMaximumSize-c[N]),0),v=m.length===0?Number.POSITIVE_INFINITY:m.reduce((D,N)=>D+(c[N]-this.viewItems[N].minimumSize),0),w=m.length===0?Number.NEGATIVE_INFINITY:m.reduce((D,N)=>D+(c[N]-this.viewItems[N].viewMaximumSize),0),y=Math.max(_,w),S=Math.min(v,b),x=this.findFirstSnapIndex(g),k=this.findFirstSnapIndex(m);if(typeof x=="number"){const D=this.viewItems[x],N=Math.floor(D.viewMinimumSize/2);h={index:x,limitDelta:D.visible?y-N:y+N,size:D.size}}if(typeof k=="number"){const D=this.viewItems[k],N=Math.floor(D.viewMinimumSize/2);f={index:k,limitDelta:D.visible?S+N:S-N,size:D.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:d,maxDelta:u,alt:l,snapBefore:h,snapAfter:f,disposable:o}};r(t,i)}onSashChange({current:e}){const{index:t,start:i,sizes:s,alt:o,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-i,u=this.resize(t,d,s,void 0,void 0,r,a,l,c);if(o){const h=t===this.sashItems.length-1,f=this.viewItems.map(w=>w.size),g=h?t:t+1,m=this.viewItems[g],_=m.size-m.maximumSize,b=m.size-m.minimumSize,v=h?t-1:t+1;this.resize(v,-u,f,void 0,void 0,_,b)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const i=this.viewItems.indexOf(e);i<0||i>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=so(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([i],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==Iu.Idle)throw new Error("Cant modify splitview");this.state=Iu.Busy;try{const i=Ro(this.viewItems.length).filter(a=>a!==e),s=[...i.filter(a=>this.viewItems[a].priority===1),e],o=i.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=so(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(s,o)}finally{this.state=Iu.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const i=Math.floor(t/e.length);for(const a of e)a.size=so(i,a.minimumSize,a.maximumSize);const s=Ro(this.viewItems.length),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);this.relayout(o,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,i=this.viewItems.length,s){if(this.state!==Iu.Idle)throw new Error("Cant modify splitview");this.state=Iu.Busy;try{const o=ce(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(i));const r=e.onDidChange(h=>this.onViewChange(d,h)),a=xe(()=>o.remove()),l=El(r,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const d=this.orientation===0?new g5e(o,e,c,l):new m5e(o,e,c,l);if(this.viewItems.splice(i,0,d),this.viewItems.length>1){const h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new xs(this.sashContainer,{getHorizontalSashTop:D=>this.getSashPosition(D),getHorizontalSashWidth:this.getSashOrthogonalSize},{...h,orientation:1}):new xs(this.sashContainer,{getVerticalSashLeft:D=>this.getSashPosition(D),getVerticalSashHeight:this.getSashOrthogonalSize},{...h,orientation:0}),g=this.orientation===0?D=>({sash:f,start:D.startY,current:D.currentY,alt:D.altKey}):D=>({sash:f,start:D.startX,current:D.currentX,alt:D.altKey}),_=ue.map(f.onDidStart,g)(this.onSashStart,this),v=ue.map(f.onDidChange,g)(this.onSashChange,this),y=ue.map(f.onDidEnd,()=>this.sashItems.findIndex(D=>D.sash===f))(this.onSashEnd,this),S=f.onDidReset(()=>{const D=this.sashItems.findIndex(z=>z.sash===f),N=Ro(D,-1),R=Ro(D+1,this.viewItems.length),O=this.findFirstSnapIndex(N),B=this.findFirstSnapIndex(R);typeof O=="number"&&!this.viewItems[O].visible||typeof B=="number"&&!this.viewItems[B].visible||this._onDidSashReset.fire(D)}),x=El(_,v,y,S,f),k={sash:f,disposable:x};this.sashItems.splice(i-1,0,k)}o.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([i],u),!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=Iu.Idle}}relayout(e,t){const i=this.viewItems.reduce((s,o)=>s+o.size,0);this.resize(this.viewItems.length-1,this.size-i,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,i=this.viewItems.map(d=>d.size),s,o,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=Ro(e,-1),u=Ro(e+1,this.viewItems.length);if(o)for(const k of o)DF(d,k),DF(u,k);if(s)for(const k of s)HD(d,k),HD(u,k);const h=d.map(k=>this.viewItems[k]),f=d.map(k=>i[k]),g=u.map(k=>this.viewItems[k]),m=u.map(k=>i[k]),_=d.reduce((k,D)=>k+(this.viewItems[D].minimumSize-i[D]),0),b=d.reduce((k,D)=>k+(this.viewItems[D].maximumSize-i[D]),0),v=u.length===0?Number.POSITIVE_INFINITY:u.reduce((k,D)=>k+(i[D]-this.viewItems[D].minimumSize),0),w=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((k,D)=>k+(i[D]-this.viewItems[D].maximumSize),0),y=Math.max(_,w,r),S=Math.min(v,b,a);let x=!1;if(l){const k=this.viewItems[l.index],D=t>=l.limitDelta;x=D!==k.visible,k.setVisible(D,l.size)}if(!x&&c){const k=this.viewItems[c.index],D=t<c.limitDelta;x=D!==k.visible,k.setVisible(D,c.size)}if(x)return this.resize(e,t,i,s,o,r,a);t=so(t,y,S);for(let k=0,D=t;k<h.length;k++){const N=h[k],R=so(f[k]+D,N.minimumSize,N.maximumSize),O=R-f[k];D-=O,N.size=R}for(let k=0,D=t;k<g.length;k++){const N=g[k],R=so(m[k]-D,N.minimumSize,N.maximumSize),O=R-m[k];D+=O,N.size=R}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let i=this.size-t;const s=Ro(this.viewItems.length-1,-1),o=s.filter(a=>this.viewItems[a].priority===1),r=s.filter(a=>this.viewItems[a].priority===2);for(const a of r)DF(s,a);for(const a of o)HD(s,a);typeof e=="number"&&HD(s,e);for(let a=0;i!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=so(l.size+i,l.minimumSize,l.maximumSize),d=c-l.size;i-=d,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,i)=>t+i.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const i=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const o=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const u=!(t[l]&&r[l+1]),h=!(i[l]&&o[l+1]);if(u&&h){const f=Ro(l,-1),g=Ro(l+1,this.viewItems.length),m=this.findFirstSnapIndex(f),_=this.findFirstSnapIndex(g),b=typeof m=="number"&&!this.viewItems[m].visible,v=typeof _=="number"&&!this.viewItems[_].visible;b&&o[l]&&(a>0||this.startSnappingEnabled)?c.state=1:v&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else u&&!h?c.state=1:!u&&h?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let i=0;i<this.sashItems.length;i++)if(t+=this.viewItems[i].size,this.sashItems[i].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const i=this.viewItems[t];if(i.visible&&i.snap)return t}for(const t of e){const i=this.viewItems[t];if(i.visible&&i.maximumSize-i.minimumSize>0)return;if(!i.visible&&i.snap)return t}}areViewsDistributed(){let e,t;for(const i of this.viewItems)if(e=e===void 0?i.size:Math.min(e,i.size),t=t===void 0?i.size:Math.max(t,i.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)==null||e.disposable.dispose(),Qt(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}const a2=class a2{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=a2.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const r=s.get(o.templateId);if(!r)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=ne(e,ce(".monaco-table-tr")),i=[],s=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=ne(t,ce(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,i.push(l),s.push(a.renderTemplate(l))}const o={container:e,cellContainers:i,cellTemplateData:s};return this.renderedTemplates.add(o),o}renderElement(e,t,i,s){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,i.cellTemplateData[o],s)}}disposeElement(e,t,i,s){for(let o=0;o<this.columns.length;o++){const r=this.renderers[o];if(r.disposeElement){const l=this.columns[o].project(e);r.disposeElement(l,t,i.cellTemplateData[o],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);os(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}};a2.TemplateId="row";let XT=a2;function p5e(n){return{getHeight(e){return n.getHeight(e)},getTemplateId(){return XT.TemplateId}}}class _5e extends U{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??ue.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new j,this.onDidLayout=this._onDidLayout.event,this.element=ce(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register($c().setupManagedHover(ko("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const l2=class l2{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,i,s,o,r){this.virtualDelegate=i,this.columns=s,this.domId=`table_id_${++l2.InstanceCount}`,this.disposables=new Q,this.cachedWidth=0,this.cachedHeight=0,this.domNode=ne(t,ce(`.monaco-table.${this.domId}`));const a=s.map((d,u)=>this.disposables.add(new _5e(d,u))),l={size:a.reduce((d,u)=>d+u.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new Rhe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const c=new XT(s,o,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new va(e,this.domNode,p5e(i),[c],r)),ue.any(...a.map(d=>d.onDidLayout))(([d,u])=>c.layoutColumn(d,u),null,this.disposables),this.splitview.onDidSashReset(d=>{const u=s.reduce((f,g)=>f+g.weight,0),h=s[d].weight/u*this.cachedWidth;this.splitview.resizeView(d,h)},null,this.disposables),this.styleElement=ha(this.domNode),this.style(VAe)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};l2.InstanceCount=0;let hj=l2;var zr;(function(n){n[n.Expanded=0]="Expanded",n[n.Collapsed=1]="Collapsed",n[n.PreserveOrExpanded=2]="PreserveOrExpanded",n[n.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(zr||(zr={}));var Dp;(function(n){n[n.Unknown=0]="Unknown",n[n.Twistie=1]="Twistie",n[n.Element=2]="Element",n[n.Filter=3]="Filter"})(Dp||(Dp={}));class Qr extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class PU{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function MU(n){return typeof n=="object"&&"visibility"in n&&"data"in n}function pk(n){switch(n){case!0:return 1;case!1:return 0;default:return n}}function P4(n){return typeof n.collapsible=="boolean"}class b5e{constructor(e,t,i,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new EL,this._onDidChangeCollapseState=new j,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new j,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new j,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new qa(pce),this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.allowNonCollapsibleParents=s.allowNonCollapsibleParents??!1,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=_t.empty(),s={}){if(e.length===0)throw new Qr(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,i,s):this.spliceSimple(e,t,i,s)}spliceSmart(e,t,i,s=_t.empty(),o,r=o.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,s,o);const l=[...s],c=t[t.length-1],d=new Pd({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+i)].map(m=>e.getId(m.element).toString())}).ComputeDiff(!1);if(d.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,l,o);const u=t.slice(0,-1),h=(m,_,b)=>{if(r>0)for(let v=0;v<b;v++)m--,_--,this.spliceSmart(e,[...u,m,0],Number.MAX_SAFE_INTEGER,l[_].children,o,r-1)};let f=Math.min(a.children.length,c+i),g=l.length;for(const m of d.changes.sort((_,b)=>b.originalStart-_.originalStart))h(f,g,f-(m.originalStart+m.originalLength)),f=m.originalStart,g=m.modifiedStart-c,this.spliceSimple([...u,f],m.originalLength,_t.slice(l,g,g+m.modifiedLength),o);h(f,g,f)}spliceSimple(e,t,i=_t.empty(),{onDidCreateNode:s,onDidDeleteNode:o,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),u=[],h=_t.map(i,S=>this.createTreeNode(S,a,a.visible?1:0,c,u,s)),f=e[e.length-1];let g=0;for(let S=f;S>=0&&S<a.children.length;S--){const x=a.children[S];if(x.visible){g=x.visibleChildIndex;break}}const m=[];let _=0,b=0;for(const S of h)m.push(S),b+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=g+_++);const v=OZ(a.children,f,t,m);r?a.lastDiffIds?OZ(a.lastDiffIds,f,t,m.map(S=>r.getId(S.element).toString())):a.lastDiffIds=a.children.map(S=>r.getId(S.element).toString()):a.lastDiffIds=void 0;let w=0;for(const S of v)S.visible&&w++;if(w!==0)for(let S=f+m.length;S<a.children.length;S++){const x=a.children[S];x.visible&&(x.visibleChildIndex-=w)}if(a.visibleChildrenCount+=_-w,c&&d){const S=v.reduce((x,k)=>x+(k.visible?k.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,b-S),this.list.splice(l,S,u)}if(v.length>0&&o){const S=x=>{o(x),x.children.forEach(S)};v.forEach(S)}this._onDidSplice.fire({insertedNodes:m,deletedNodes:v});let y=a;for(;y;){if(y.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}y=y.parent}}rerender(e){if(e.length===0)throw new Qr(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:s}=this.getTreeNodeWithListIndex(e);return i&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const o={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:i,listIndex:s,revealed:o}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(i,s,o,t);if(i!==this.root&&this.autoExpandSingleChildren&&r&&!P4(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let a=-1;for(let l=0;l<i.children.length;l++)if(i.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,i,s){const o=this._setNodeCollapseState(e,s,!1);if(!i||!e.visible||!o)return o;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),o}_setNodeCollapseState(e,t,i){let s;if(e===this.root?s=!1:(P4(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!P4(t)&&t.recursive)for(const o of e.children)s=this._setNodeCollapseState(o,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,s,o,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,i);a.visibility=l,s&&o.push(a);const c=e.children||_t.empty(),d=s&&l!==0&&!a.collapsed;let u=0,h=1;for(const f of c){const g=this.createTreeNode(f,a,l,d,o,r);a.children.push(g),h+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=u++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=u,a.visible=l===2?u>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,s&&o.pop()),r==null||r(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,s=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&i.push(e)}const r=i.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,o,i,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=i.length-r):(e.renderNodeCount=0,s&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return typeof i=="boolean"?(e.filterData=void 0,i?1:0):MU(i)?(e.filterData=i.data,pk(i.visibility)):(e.filterData=void 0,pk(i))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[i,...s]=e;return i<0||i>t.children.length?!1:this.hasTreeNode(s,t.children[i])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[i,...s]=e;if(i<0||i>t.children.length)throw new Qr(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[i])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:s,visible:o}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new Qr(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:i,revealed:s,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,s=!0,o=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new Qr(this.user,"Invalid tree location");for(let l=0;l<r;l++)i+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:i,revealed:s,visible:o}:this.getParentNodeWithListIndex(a,t.children[r],i+1,s,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:Ixe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class v5e extends KL{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function M4(n){return n instanceof KL?new v5e(n):n}class w5e{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=U.None,this.disposables=new Q}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)==null||s.call(i,M4(e),t)}onDragOver(e,t,i,s,o,r=!0){const a=this.dnd.onDragOver(M4(e),t&&t.element,i,s,o),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=Kg(()=>{const f=this.modelProvider(),g=f.getNodeLocation(t);f.isCollapsed(g)&&f.setCollapsed(g,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!r){const f=typeof a=="boolean"?a:a.accept,g=typeof a=="boolean"?void 0:a.effect;return{accept:f,effect:g,feedback:[i]}}return a}if(a.bubble===1){const f=this.modelProvider(),g=f.getNodeLocation(t),m=f.getParentNodeLocation(g),_=f.getNode(m),b=m&&f.getListIndex(m);return this.onDragOver(e,_,b,s,o,!1)}const c=this.modelProvider(),d=c.getNodeLocation(t),u=c.getListIndex(d),h=c.getListRenderCount(d);return{...a,feedback:Ro(u,u+h)}}drop(e,t,i,s,o){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(M4(e),t&&t.element,i,s,o)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function C5e(n,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new w5e(n,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const i=n(),s=i.getNodeLocation(t),o=i.getParentNodeLocation(s);return i.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class RU{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,s;(s=(i=this.delegate).setDynamicHeight)==null||s.call(i,e.element,t)}}var yy;(function(n){n.None="none",n.OnHover="onHover",n.Always="always"})(yy||(yy={}));class y5e{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new Q,this.onDidChange=ue.forEach(e,i=>this._elements=i,this.disposables)}dispose(){this.disposables.dispose()}}const YS=class YS{constructor(e,t,i,s,o,r={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedIndentGuides=o,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=YS.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=U.None,this.disposables=new Q,this.templateId=e.templateId,this.updateOptions(r),ue.map(i,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)==null||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=so(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[i,s]of this.renderedNodes)this.renderTreeElement(i,s)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==yy.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[i,s]of this.renderedNodes)this._renderIndentGuides(i,s);if(this.indentGuidesDisposable.dispose(),t){const i=new Q;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,i),this.indentGuidesDisposable=i,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=ne(e,ce(".monaco-tl-row")),i=ne(t,ce(".monaco-tl-indent")),s=ne(t,ce(".monaco-tl-twistie")),o=ne(t,ce(".monaco-tl-contents")),r=this.renderer.renderTemplate(o);return{container:e,indent:i,twistie:s,indentGuidesDisposable:U.None,templateData:r}}renderElement(e,t,i,s){this.renderedNodes.set(e,i),this.renderedElements.set(e.element,e),this.renderTreeElement(e,i),this.renderer.renderElement(e,t,i.templateData,s)}disposeElement(e,t,i,s){var o,r;i.indentGuidesDisposable.dispose(),(r=(o=this.renderer).disposeElement)==null||r.call(o,e,t,i.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const i=YS.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${i}px`,t.indent.style.width=`${i+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Re.asClassNameArray(ae.treeItemExpanded));let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(s||t.twistie.classList.add(...Re.asClassNameArray(ae.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(os(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new Q,s=this.modelProvider();for(;;){const o=s.getNodeLocation(e),r=s.getParentNodeLocation(o);if(!r)break;const a=s.getNode(r),l=ce(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),i.add(xe(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach(s=>{const o=i.getNodeLocation(s);try{const r=i.getParentNodeLocation(o);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):r&&t.add(i.getNode(r))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,o=>o.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Qt(this.disposables)}};YS.DefaultIndent=8;let fj=YS;class S5e{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Q,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let i=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?i=r?1:0:MU(r)?i=pk(r.visibility):i=r,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Ic.Default,visibility:i};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(s)?s:[s];for(const r of o){const a=r&&r.toString();if(typeof a>"u")return{data:Ic.Default,visibility:i};let l;if(this.tree.findMatchType===vb.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let d=this._lowercasePattern.length;d>0;d--)l.push(c+d-1)}}else l=mb(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,o.length===1?{data:l,visibility:i}:{data:{label:a,score:l},visibility:i}}return this.tree.findMode===nh.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:Ic.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Qt(this.disposables)}}var nh;(function(n){n[n.Highlight=0]="Highlight",n[n.Filter=1]="Filter"})(nh||(nh={}));var vb;(function(n){n[n.Fuzzy=0]="Fuzzy",n[n.Contiguous=1]="Contiguous"})(vb||(vb={}));let x5e=class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,i,s,o,r={}){this.tree=e,this.view=i,this.filter=s,this.contextViewProvider=o,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new j,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new j,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new j,this._onDidChangeOpenState=new j,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Q,this.disposables=new Q,this._mode=e.options.defaultFindMode??nh.Highlight,this._matchType=e.options.defaultFindMatchType??vb.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var t,i,s;const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(yo(p("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?(t=this.widget)==null||t.showMessage({type:2,content:p("not found","No elements found.")}):(i=this.widget)==null||i.showMessage({type:2})):((s=this.widget)==null||s.clearMessage(),this.pattern&&yo(p("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Ic.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)==null||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function k5e(n,e){return n.position===e.position&&Ahe(n,e)}function Ahe(n,e){return n.node.element===e.node.element&&n.startIndex===e.startIndex&&n.height===e.height&&n.endIndex===e.endIndex}class L5e{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return Li(this.stickyNodes,e.stickyNodes,k5e)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!Li(this.stickyNodes,e.stickyNodes,Ahe)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],i=e.stickyNodes[e.count-1];return t.position!==i.position}}class D5e{constrainStickyScrollNodes(e,t,i){for(let s=0;s<e.length;s++){const o=e[s];if(o.position+o.height>i||s>=t)return e.slice(0,s)}return e}}let HJ=class extends U{constructor(e,t,i,s,o,r={}){super(),this.tree=e,this.model=t,this.view=i,this.treeDelegate=o,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(r);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=r.stickyScrollDelegate??new D5e,this._widget=this._register(new E5e(i.getScrollableElement(),i,e,s,o,r.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let i=e,s=0,o=this.getNextStickyNode(i,void 0,s);for(;o&&(t.push(o),s+=o.height,!(t.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(o),!i)));)o=this.getNextStickyNode(i,o.node,s);const r=this.constrainStickyNodes(t);return r.length?new L5e(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,i){const s=this.getAncestorUnderPrevious(e,t);if(s&&!(s===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,i))))return this.createStickyScrollNode(s,i)}nodeTopAlignsWithStickyNodesBottom(e,t){const i=this.getNodeIndex(e),s=this.view.getElementTop(i),o=t;return this.view.scrollTop===s-o}createStickyScrollNode(e,t){const i=this.treeDelegate.getHeight(e),{startIndex:s,endIndex:o}=this.getNodeRange(e),r=this.calculateStickyNodePosition(o,t,i);return{node:e,position:r,height:i,startIndex:s,endIndex:o}}getAncestorUnderPrevious(e,t=void 0){let i=e,s=this.getParentNode(i);for(;s;){if(s===t)return i;i=s,s=this.getParentNode(i)}if(t===void 0)return i}calculateStickyNodePosition(e,t,i){let s=this.view.getRelativeTop(e);if(s===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),d=this.view.getRelativeTop(e+1);s=d?d-c/this.view.renderHeight:null}if(s===null)return t;const o=this.view.element(e),r=this.treeDelegate.getHeight(o),l=s*this.view.renderHeight+r;return t+i>l&&t<=l?l-i:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,i=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=t)return e;const s=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!s.length)return[];const o=s[s.length-1];if(s.length>this.stickyScrollMaxItemCount||o.position+o.height>t)throw new Error("stickyScrollDelegate violates constraints");return s}getParentNode(e){const t=this.model.getNodeLocation(e),i=this.model.getParentNodeLocation(t);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),i=this.model.getListIndex(t);if(i<0)throw new Error("Node not found in tree");const s=this.model.getListRenderCount(t),o=i+s-1;return{startIndex:i,endIndex:o}}nodePositionTopBelowWidget(e){const t=[];let i=this.getParentNode(e);for(;i;)t.push(i),i=this.getParentNode(i);let s=0;for(let o=0;o<t.length&&o<this.stickyScrollMaxItemCount;o++)s+=this.treeDelegate.getHeight(t[o]);return s}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}},E5e=class{constructor(e,t,i,s,o,r){this.view=t,this.tree=i,this.treeRenderers=s,this.treeDelegate=o,this.accessibilityProvider=r,this._previousElements=[],this._previousStateDisposables=new Q,this._rootDomNode=ce(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=ce(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new N5e(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,i=!!e&&e.count>0;if(!t&&!i||t&&i&&this._previousState.equal(e))return;if(t!==i&&this.setVisible(i),!i){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const s=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${s.position}px`;else{this._previousStateDisposables.clear();const o=Array(e.count);for(let r=e.count-1;r>=0;r--){const a=e.stickyNodes[r],{element:l,disposable:c}=this.createElement(a,r,e.count);o[r]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(o,e),this._previousElements=o}this._previousState=e,this._rootDomNode.style.height=`${s.position+s.height}px`}createElement(e,t,i){const s=e.startIndex,o=document.createElement("div");o.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(o.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(o.style.lineHeight=`${e.height}px`),o.classList.add("monaco-tree-sticky-row"),o.classList.add("monaco-list-row"),o.setAttribute("data-index",`${s}`),o.setAttribute("data-parity",s%2===0?"even":"odd"),o.setAttribute("id",this.view.getElementID(s));const r=this.setAccessibilityAttributes(o,e.node.element,t,i),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(h=>h.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const d=l.renderTemplate(o);l.renderElement(c,e.startIndex,d,e.height);const u=xe(()=>{r.dispose(),l.disposeElement(c,e.startIndex,d,e.height),l.disposeTemplate(d),o.remove()});return{element:o,disposable:u}}setAccessibilityAttributes(e,t,i,s){if(!this.accessibilityProvider)return U.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,i,s))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,i))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const o=this.accessibilityProvider.getAriaLabel(t),r=o&&typeof o!="string"?o:Wa(o),a=Be(c=>{const d=c.readObservable(r);d?e.setAttribute("aria-label",d):e.removeAttribute("aria-label")});typeof o=="string"||o&&e.setAttribute("aria-label",o.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}};class N5e extends U{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new j,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new j,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(G(this.container,"focus",()=>this.onFocus())),this._register(G(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}handleContextMenu(e){const t=e.browserEvent.target;if(!dk(t)&&!dS(t)){this.focusedLast()&&this.view.domFocus();return}if(!Hu(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const r=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)==null?void 0:l.element)});if(r===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(r);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const s=this.state.stickyNodes[this.focusedIndex].node.element,o=this.elements[this.focusedIndex];this._onContextMenu.fire({element:s,anchor:o,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!dk(t)&&!dS(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const i=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const s=so(i,0,t.count-1);this.setFocus(s)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const i=t.stickyNodes[e];this.scrollNodeUnderWidget(i.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const i=t.stickyNodes[t.count-1],s=t.count>1?t.stickyNodes[t.count-2]:void 0,o=this.view.getElementTop(e),r=s?s.position+s.height+i.height:i.height;this.view.scrollTop=o-r}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function _E(n){let e=Dp.Unknown;return jF(n.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Dp.Twistie:jF(n.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Dp.Element:jF(n.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Dp.Filter),{browserEvent:n.browserEvent,element:n.element?n.element.element:null,target:e}}function I5e(n){const e=dk(n.browserEvent.target);return{element:n.element?n.element.element:null,browserEvent:n.browserEvent,anchor:n.anchor,isStickyScroll:e}}function FN(n,e){e(n),n.children.forEach(t=>FN(t,e))}class R4{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new j,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&Li(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>FN(d,c)),this.set([...l.values()]);return}const i=new Set,s=l=>i.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>FN(l,s));const o=new Map,r=l=>o.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>FN(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!i.has(c))a.push(l);else{const u=o.get(c);u&&u.visible&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class T5e extends Bue{constructor(e,t,i){super(e),this.tree=t,this.stickyScrollProvider=i}onViewPointer(e){if(Aue(e.browserEvent.target)||pg(e.browserEvent.target)||E0(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,s=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,o=dS(e.browserEvent.target);let r=!1;if(o?r=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,o)this.handleStickyScrollMouseEvent(e,t);else{if(r&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!o||s)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),s){e.browserEvent.isHandledByList=!0;return}}o||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(OAe(e.browserEvent.target)||FAe(e.browserEvent.target))return;const i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");const s=this.list.indexOf(t),o=this.list.getElementTop(s),r=i.nodePositionTopBelowWidget(t);this.tree.scrollTop=o-r,this.list.domFocus(),this.list.setFocus([s]),this.list.setSelection([s])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!dk(t)&&!dS(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!dk(t)&&!dS(t)){super.onContextMenu(e);return}}}class P5e extends va{constructor(e,t,i,s,o,r,a,l){super(e,t,i,s,l),this.focusTrait=o,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new T5e(this,e.tree,e.stickyScrollProvider)}splice(e,t,i=[]){if(super.splice(e,t,i),i.length===0)return;const s=[],o=[];let r;i.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&o.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),s.length>0&&super.setFocus(Lh([...super.getFocus(),...s])),o.length>0&&super.setSelection(Lh([...super.getSelection(),...o])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class Ohe{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return ue.filter(ue.map(this.view.onMouseDblClick,_E),e=>e.target!==Dp.Filter)}get onMouseOver(){return ue.map(this.view.onMouseOver,_E)}get onMouseOut(){return ue.map(this.view.onMouseOut,_E)}get onContextMenu(){var e;return ue.any(ue.filter(ue.map(this.view.onContextMenu,I5e),t=>!t.isStickyScroll),((e=this.stickyScrollController)==null?void 0:e.onContextMenu)??ue.None)}get onPointer(){return ue.map(this.view.onPointer,_E)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return ue.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e;return((e=this.findController)==null?void 0:e.mode)??nh.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e;return((e=this.findController)==null?void 0:e.matchType)??vb.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,i,s,o={}){this._user=e,this._options=o,this.eventBufferer=new EL,this.onDidChangeFindOpenState=ue.None,this.onDidChangeStickyScrollFocused=ue.None,this.disposables=new Q,this._onWillRefilter=new j,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new j,this.treeDelegate=new RU(i);const r=new zZ,a=new zZ,l=this.disposables.add(new y5e(a.event)),c=new Ez;this.renderers=s.map(g=>new fj(g,()=>this.model,r.event,l,c,o));for(const g of this.renderers)this.disposables.add(g);let d;o.keyboardNavigationLabelProvider&&(d=new S5e(this,o.keyboardNavigationLabelProvider,o.filter),o={...o,filter:d},this.disposables.add(d)),this.focus=new R4(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new R4(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new R4(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new P5e(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...C5e(()=>this.model,o),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,o),r.input=this.model.onDidChangeCollapseState;const u=ue.forEach(this.model.onDidSplice,g=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(g),this.selection.onDidModelSplice(g)})},this.disposables);u(()=>null,null,this.disposables);const h=this.disposables.add(new j),f=this.disposables.add(new qa(0));if(this.disposables.add(ue.any(u,this.focus.onDidChange,this.selection.onDidChange)(()=>{f.trigger(()=>{const g=new Set;for(const m of this.focus.getNodes())g.add(m);for(const m of this.selection.getNodes())g.add(m);h.fire([...g.values()])})})),a.input=h.event,o.keyboardSupport!==!1){const g=ue.chain(this.view.onKeyDown,m=>m.filter(_=>!pg(_.target)).map(_=>new ti(_)));ue.chain(g,m=>m.filter(_=>_.keyCode===15))(this.onLeftArrow,this,this.disposables),ue.chain(g,m=>m.filter(_=>_.keyCode===17))(this.onRightArrow,this,this.disposables),ue.chain(g,m=>m.filter(_=>_.keyCode===10))(this.onSpace,this,this.disposables)}if((o.findWidgetEnabled??!0)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider){const g=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new x5e(this,this.model,this.view,d,o.contextViewProvider,g),this.focusNavigationFilter=m=>this.findController.shouldAllowFocus(m),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=ue.None,this.onDidChangeFindMatchType=ue.None;o.enableStickyScroll&&(this.stickyScrollController=new HJ(this,this.model,this.view,this.renderers,this.treeDelegate,o),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=ha(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===yy.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const i of this.renderers)i.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)==null||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===yy.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new HJ(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=ue.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)==null||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;(e=this.stickyScrollController)!=null&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),jg(t)&&((i=this.findController)==null||i.layout(t))}style(e){const t=`.${this.view.domId}`,i=[];e.treeIndentGuidesStroke&&(i.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),i.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const s=e.treeStickyScrollBackground??e.listBackground;s&&(i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${s}; }`),i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${s}; }`)),e.treeStickyScrollBorder&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&i.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const o=gh(e.listFocusAndSelectionOutline,gh(e.listSelectionOutline,e.listFocusOutline??""));o&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(i.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),i.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=i.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(o=>this.model.getNode(o));this.selection.set(i,t);const s=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(s,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const i=e.map(o=>this.model.getNode(o));this.focus.set(i,t);const s=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(s,t,!0)})}focusNext(e=1,t=!1,i,s=Hu(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,i,s)}focusPrevious(e=1,t=!1,i,s=Hu(i)&&i.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,i,s)}focusNextPage(e,t=Hu(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Hu(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var i;return((i=this.stickyScrollController)==null?void 0:i.height)??0})}focusLast(e,t=Hu(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=Hu(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);if(i!==-1)if(!this.stickyScrollController)this.view.reveal(i,t);else{const s=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(i,t,s)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!0)){const r=this.model.getParentNodeLocation(s);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!1)){if(!i.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const i=t[0],s=this.model.getNodeLocation(i),o=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,o)}dispose(){var e;Qt(this.disposables),(e=this.stickyScrollController)==null||e.dispose(),this.view.dispose()}}class AU{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new b5e(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(s,o){return i.sorter.compare(s.element,o.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=_t.empty(),i={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),i)}_setChildren(e,t=_t.empty(),i){const s=new Set,o=new Set,r=l=>{var d;if(l.element===null)return;const c=l;if(s.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();o.add(u),this.nodesByIdentity.set(u,c)}(d=i.onDidCreateNode)==null||d.call(i,c)},a=l=>{var d;if(l.element===null)return;const c=l;if(s.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const u=this.identityProvider.getId(c.element).toString();o.has(u)||this.nodesByIdentity.delete(u)}(d=i.onDidDeleteNode)==null||d.call(i,c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...i,onDidCreateNode:r,onDidDeleteNode:a})}preserveCollapseState(e=_t.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),_t.map(e,t=>{let i=this.nodes.get(t.element);if(!i&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();i=this.nodesByIdentity.get(r)}if(!i){let r;return typeof t.collapsed>"u"?r=void 0:t.collapsed===zr.Collapsed||t.collapsed===zr.PreserveOrCollapsed?r=!0:t.collapsed===zr.Expanded||t.collapsed===zr.PreserveOrExpanded?r=!1:r=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:r}}const s=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;let o;return typeof t.collapsed>"u"||t.collapsed===zr.PreserveOrCollapsed||t.collapsed===zr.PreserveOrExpanded?o=i.collapsed:t.collapsed===zr.Collapsed?o=!0:t.collapsed===zr.Expanded?o=!1:o=!!t.collapsed,{...t,collapsible:s,collapsed:o,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Qr(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Qr(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Qr(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(i);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Qr(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function WN(n){const e=[n.element],t=n.incompressible||!1;return{element:{elements:e,incompressible:t},children:_t.map(_t.from(n.children),WN),collapsible:n.collapsible,collapsed:n.collapsed}}function BN(n){const e=[n.element],t=n.incompressible||!1;let i,s;for(;[s,i]=_t.consume(_t.from(n.children),2),!(s.length!==1||s[0].incompressible);)n=s[0],e.push(n.element);return{element:{elements:e,incompressible:t},children:_t.map(_t.concat(s,i),BN),collapsible:n.collapsible,collapsed:n.collapsed}}function gj(n,e=0){let t;return e<n.element.elements.length-1?t=[gj(n,e+1)]:t=_t.map(_t.from(n.children),i=>gj(i,0)),e===0&&n.element.incompressible?{element:n.element.elements[e],children:t,incompressible:!0,collapsible:n.collapsible,collapsed:n.collapsed}:{element:n.element.elements[e],children:t,collapsible:n.collapsible,collapsed:n.collapsed}}function jJ(n){return gj(n,0)}function Fhe(n,e,t){return n.element===e?{...n,children:t}:{...n,children:_t.map(_t.from(n.children),i=>Fhe(i,e,t))}}const M5e=n=>({getId(e){return e.elements.map(t=>n.getId(t).toString()).join("\0")}});class R5e{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new AU(e,t,i),this.enabled=typeof i.compressionEnabled>"u"?!0:i.compressionEnabled,this.identityProvider=i.identityProvider}setChildren(e,t=_t.empty(),i){const s=i.diffIdentityProvider&&M5e(i.diffIdentityProvider);if(e===null){const g=_t.map(t,this.enabled?BN:WN);this._setChildren(null,g,{diffIdentityProvider:s,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new Qr(this.user,"Unknown compressed tree node");const r=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),c=jJ(r),d=Fhe(c,e,t),u=(this.enabled?BN:WN)(d),h=i.diffIdentityProvider?(g,m)=>i.diffIdentityProvider.getId(g)===i.diffIdentityProvider.getId(m):void 0;if(Li(u.element.elements,r.element.elements,h)){this._setChildren(o,u.children||_t.empty(),{diffIdentityProvider:s,diffDepth:1});return}const f=l.children.map(g=>g===r?u:g);this._setChildren(l.element,f,{diffIdentityProvider:s,diffDepth:r.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const i=this.model.getNode().children,s=_t.map(i,jJ),o=_t.map(s,e?BN:WN);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const s=new Set,o=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},r=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...i,onDidCreateNode:o,onDidDeleteNode:r})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return i===null?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Qr(this.user,`Tree element not found: ${e}`);return t}}const A5e=n=>n[n.length-1];class OU{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new OU(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function O5e(n,e){return{splice(t,i,s){e.splice(t,i,s.map(o=>n.map(o)))},updateElementHeight(t,i){e.updateElementHeight(t,i)}}}function F5e(n,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(n(t))}},sorter:e.sorter&&{compare(t,i){return e.sorter.compare(t.elements[0],i.elements[0])}},filter:e.filter&&{filter(t,i){return e.filter.filter(n(t),i)}}}}class W5e{get onDidSplice(){return ue.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(i=>this.nodeMapper.map(i)),deletedNodes:t.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return ue.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return ue.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||A5e;const s=o=>this.elementMapper(o.elements);this.nodeMapper=new PU(o=>new OU(s,o)),this.model=new R5e(e,O5e(this.nodeMapper,t),F5e(s,i))}setChildren(e,t=_t.empty(),i={}){this.model.setChildren(e,t,i)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var B5e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};class FU extends Ohe{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,i,s,o={}){super(e,t,i,s,o),this.user=e}setChildren(e,t=_t.empty(),i){this.model.setChildren(e,t,i)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new AU(e,t,i)}}class Whe{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,i){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){let o=this.stickyScrollDelegate.getCompressedNode(e);o||(o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),o.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,s)):(i.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,i.data,s))}disposeElement(e,t,i,s){var o,r,a,l;i.compressedTreeNode?(r=(o=this.renderer).disposeCompressedElements)==null||r.call(o,i.compressedTreeNode,t,i.data,s):(l=(a=this.renderer).disposeElement)==null||l.call(a,e,t,i.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}B5e([an],Whe.prototype,"compressedTreeNodeProvider",null);class H5e{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,i){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let s=0;s<e.length;s++){const o=e[s],r=o.position+o.height;if(s+1<e.length&&r+e[s+1].height>i||s>=t-1&&t<e.length){const l=e.slice(0,s),c=e.slice(s),d=this.compressStickyNodes(c);return[...l,d]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const i=[];for(let c=0;c<e.length;c++){const d=e[c],u=t.getCompressedTreeNode(d.node.element);if(u.element){if(c!==0&&u.element.incompressible)break;i.push(...u.element.elements)}}if(i.length<2)return e[0];const s=e[e.length-1],o={elements:i,incompressible:!1},r={...s.node,children:[],element:o},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:s.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,r),l}}function j5e(n,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let i;try{i=n().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return i.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class Bhe extends FU{constructor(e,t,i,s,o={}){const r=()=>this,a=new H5e(()=>this.model),l=s.map(c=>new Whe(r,a,c));super(e,t,i,l,{...j5e(r,o),stickyScrollDelegate:a})}setChildren(e,t=_t.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new W5e(e,t,i)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function A4(n){return{...n,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function mj(n,e){return e.parent?e.parent===n?!0:mj(n,e.parent):!1}function V5e(n,e){return n===e||mj(n,e)||mj(e,n)}class WU{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new WU(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class z5e{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Re.asClassNameArray(ae.treeItemLoading)),!0):(t.classList.remove(...Re.asClassNameArray(ae.treeItemLoading)),!1)}disposeElement(e,t,i,s){var o,r;(r=(o=this.renderer).disposeElement)==null||r.call(o,this.nodeMapper.map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function VJ(n){return{browserEvent:n.browserEvent,elements:n.elements.map(e=>e.element)}}function zJ(n){return{browserEvent:n.browserEvent,element:n.element&&n.element.element,target:n.target}}class U5e extends KL{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function O4(n){return n instanceof KL?new U5e(n):n}class $5e{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(i=>i.element),t)}onDragStart(e,t){var i,s;(s=(i=this.dnd).onDragStart)==null||s.call(i,O4(e),t)}onDragOver(e,t,i,s,o,r=!0){return this.dnd.onDragOver(O4(e),t&&t.element,i,s,o)}drop(e,t,i,s,o){this.dnd.drop(O4(e),t&&t.element,i,s,o)}onDragEnd(e){var t,i;(i=(t=this.dnd).onDragEnd)==null||i.call(t,e)}dispose(){this.dnd.dispose()}}function Hhe(n){return n&&{...n,collapseByDefault:!0,identityProvider:n.identityProvider&&{getId(e){return n.identityProvider.getId(e.element)}},dnd:n.dnd&&new $5e(n.dnd),multipleSelectionController:n.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return n.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return n.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:n.accessibilityProvider&&{...n.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:n.accessibilityProvider.getRole?e=>n.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:n.accessibilityProvider.isChecked?e=>{var t;return!!((t=n.accessibilityProvider)!=null&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return n.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return n.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:n.accessibilityProvider.getWidgetRole?()=>n.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:n.accessibilityProvider.getAriaLevel&&(e=>n.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:n.accessibilityProvider.getActiveDescendantId&&(e=>n.accessibilityProvider.getActiveDescendantId(e.element))},filter:n.filter&&{filter(e,t){return n.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&{...n.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof n.expandOnlyOnTwistieClick>"u"?void 0:typeof n.expandOnlyOnTwistieClick!="function"?n.expandOnlyOnTwistieClick:e=>n.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof n.defaultFindVisibility=="number"?n.defaultFindVisibility:typeof n.defaultFindVisibility>"u"?2:n.defaultFindVisibility(e.element)}}function pj(n,e){e(n),n.children.forEach(t=>pj(t,e))}class jhe{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return ue.map(this.tree.onDidChangeFocus,VJ)}get onDidChangeSelection(){return ue.map(this.tree.onDidChangeSelection,VJ)}get onMouseDblClick(){return ue.map(this.tree.onMouseDblClick,zJ)}get onPointer(){return ue.map(this.tree.onPointer,zJ)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,i,s,o,r={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new j,this._onDidChangeNodeSlowState=new j,this.nodeMapper=new PU(a=>new WU(a)),this.disposables=new Q,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.getDefaultCollapseState=a=>r.collapseByDefault?r.collapseByDefault(a)?zr.PreserveOrCollapsed:zr.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,i,s,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=A4({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,i,s,o){const r=new RU(i),a=s.map(c=>new z5e(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=Hhe(o)||{};return new FU(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,i=!1,s,o){if(typeof this.root.element>"u")throw new Qr(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await ue.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,s,o),i)try{this.tree.rerender(r)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Qr(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await ue.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i)||(i.refreshPromise&&(await this.root.refreshPromise,await ue.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i)))return!1;const s=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(await this.root.refreshPromise,await ue.toPromise(this._onDidRender.event)),s}setSelection(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const i=e.map(s=>this.getDataNode(s));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Qr(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,i,s){await this.refreshNode(e,t,i),!this.disposables.isDisposed&&this.render(e,i,s)}async refreshNode(e,t,i){let s;if(this.subTreeRefreshPromises.forEach((o,r)=>{!s&&V5e(r,e)&&(s=o.then(()=>this.refreshNode(e,t,i)))}),s)return s;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,i);return}return this.doRefreshSubTree(e,t,i)}async doRefreshSubTree(e,t,i){let s;e.refreshPromise=new Promise(o=>s=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=await this.doRefreshNode(e,t,i);e.stale=!1,await gB.settled(o.map(r=>this.doRefreshSubTree(r,t,i)))}finally{s()}}async doRefreshNode(e,t,i){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(_t.empty());else{const o=this.doGetChildren(e);if(FZ(o))s=Promise.resolve(o);else{const r=Ih(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),s=o.finally(()=>r.cancel())}}try{const o=await s;return this.setChildren(e,o,t,i)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),el(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return FZ(i)?this.processChildren(i):(t=On(async()=>this.processChildren(await i)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(He))}setChildren(e,t,i,s){const o=[...t];if(e.children.length===0&&o.length===0)return[];const r=new Map,a=new Map;for(const d of e.children)r.set(d.element,d),this.identityProvider&&a.set(d.id,{node:d,collapsed:this.tree.hasElement(d)&&this.tree.isCollapsed(d)});const l=[],c=o.map(d=>{const u=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const m=A4({element:d,parent:e,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(d)});return u&&m.defaultCollapseState===zr.PreserveOrExpanded&&l.push(m),m}const h=this.identityProvider.getId(d).toString(),f=a.get(h);if(f){const m=f.node;return r.delete(m.element),this.nodes.delete(m.element),this.nodes.set(d,m),m.element=d,m.hasChildren=u,i?f.collapsed?(m.children.forEach(_=>pj(_,b=>this.nodes.delete(b.element))),m.children.splice(0,m.children.length),m.stale=!0):l.push(m):u&&!f.collapsed&&l.push(m),m}const g=A4({element:d,parent:e,id:h,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(d)});return s&&s.viewState.focus&&s.viewState.focus.indexOf(h)>-1&&s.focus.push(g),s&&s.viewState.selection&&s.viewState.selection.indexOf(h)>-1&&s.selection.push(g),(s&&s.viewState.expanded&&s.viewState.expanded.indexOf(h)>-1||u&&g.defaultCollapseState===zr.PreserveOrExpanded)&&l.push(g),g});for(const d of r.values())pj(d,u=>this.nodes.delete(u.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,i){const s=e.children.map(r=>this.asTreeElement(r,t)),o=i&&{...i,diffIdentityProvider:i.diffIdentityProvider&&{getId(r){return i.diffIdentityProvider.getId(r.element)}}};this.tree.setChildren(e===this.root?null:e,s,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?i=!1:e.forceExpanded?(i=!1,e.forceExpanded=!1):i=e.defaultCollapseState,{element:e,children:e.hasChildren?_t.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class BU{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new BU(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class q5e{constructor(e,t,i,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderCompressedElements(e,t,i,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...Re.asClassNameArray(ae.treeItemLoading)),!0):(t.classList.remove(...Re.asClassNameArray(ae.treeItemLoading)),!1)}disposeElement(e,t,i,s){var o,r;(r=(o=this.renderer).disposeElement)==null||r.call(o,this.nodeMapper.map(e),t,i.templateData,s)}disposeCompressedElements(e,t,i,s){var o,r;(r=(o=this.renderer).disposeCompressedElements)==null||r.call(o,this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Qt(this.disposables)}}function K5e(n){const e=n&&Hhe(n);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return n.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(i=>i.element))}}}}class G5e extends jhe{constructor(e,t,i,s,o,r,a={}){super(e,t,i,o,r,a),this.compressionDelegate=s,this.compressibleNodeMapper=new PU(l=>new BU(l)),this.filter=a.filter}createTree(e,t,i,s,o){const r=new RU(i),a=s.map(c=>new q5e(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=K5e(o)||{};return new Bhe(e,t,r,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,i){if(!this.identityProvider)return super.render(e,t);const s=f=>this.identityProvider.getId(f).toString(),o=f=>{const g=new Set;for(const m of f){const _=this.tree.getCompressedTreeNode(m===this.root?null:m);if(_.element)for(const b of _.element.elements)g.add(s(b.element))}return g},r=o(this.tree.getSelection()),a=o(this.tree.getFocus());super.render(e,t,i);const l=this.getSelection();let c=!1;const d=this.getFocus();let u=!1;const h=f=>{const g=f.element;if(g)for(let m=0;m<g.elements.length;m++){const _=s(g.elements[m].element),b=g.elements[g.elements.length-1].element;r.has(_)&&l.indexOf(b)===-1&&(l.push(b),c=!0),a.has(_)&&d.indexOf(b)===-1&&(d.push(b),u=!0)}f.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),u&&this.setFocus(d)}processChildren(e){return this.filter&&(e=_t.filter(e,t=>{const i=this.filter.filter(t,1),s=Y5e(i);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function Y5e(n){return typeof n=="boolean"?n?1:0:MU(n)?pk(n.visibility):pk(n)}class Z5e extends Ohe{constructor(e,t,i,s,o,r={}){super(e,t,i,s,r),this.user=e,this.dataSource=o,this.identityProvider=r.identityProvider}createModel(e,t,i){return new AU(e,t,i)}}new me("isMac",ct,p("isMac","Whether the operating system is macOS"));new me("isLinux",vo,p("isLinux","Whether the operating system is Linux"));const GA=new me("isWindows",vs,p("isWindows","Whether the operating system is Windows")),Vhe=new me("isWeb",Wb,p("isWeb","Whether the platform is a web browser"));new me("isMacNative",ct&&!Wb,p("isMacNative","Whether the operating system is macOS on a non-browser platform"));new me("isIOS",Ac,p("isIOS","Whether the operating system is iOS"));new me("isMobile",Ole,p("isMobile","Whether the platform is a mobile web browser"));new me("isDevelopment",!1,!0);new me("productQualityType","",p("productQualityType","Quality type of VS Code"));const zhe="inputFocus",Uhe=new me(zhe,!1,p("inputFocus","Whether keyboard focus is inside an input box"));var $h=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fi=function(n,e){return function(t,i){e(t,i,n)}};const nl=dt("listService");class Q5e{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Q,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,i;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)==null||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(i=this._lastFocusedWidget)==null||i.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new Hue(ha(),"").style(zb)),this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const i={widget:e,extraContextKeys:t};return this.lists.push(i),lA(e.getHTMLElement())&&this.setLastFocusedList(e),El(e.onDidFocus(()=>this.setLastFocusedList(e)),xe(()=>this.lists.splice(this.lists.indexOf(i),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==i),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const _k=new me("listScrollAtBoundary","none");X.or(_k.isEqualTo("top"),_k.isEqualTo("both"));X.or(_k.isEqualTo("bottom"),_k.isEqualTo("both"));const $he=new me("listFocus",!0),qhe=new me("treestickyScrollFocused",!1),YA=new me("listSupportsMultiselect",!0),Khe=X.and($he,X.not(zhe),qhe.negate()),HU=new me("listHasSelectionOrFocus",!1),jU=new me("listDoubleSelection",!1),VU=new me("listMultiSelection",!1),ZA=new me("listSelectionNavigation",!1),X5e=new me("listSupportsFind",!0),zU=new me("treeElementCanCollapse",!1),J5e=new me("treeElementHasParent",!1),UU=new me("treeElementCanExpand",!1),e3e=new me("treeElementHasChild",!1),t3e=new me("treeFindOpen",!1),Ghe="listTypeNavigationMode",Yhe="listAutomaticKeyboardNavigation";function QA(n,e){const t=n.createScoped(e.getHTMLElement());return $he.bindTo(t),t}function XA(n,e){const t=_k.bindTo(n),i=()=>{const s=e.scrollTop===0,o=e.scrollHeight-e.renderHeight-e.scrollTop<1;s&&o?t.set("both"):s?t.set("top"):o?t.set("bottom"):t.set("none")};return i(),e.onDidScroll(i)}const qb="workbench.list.multiSelectModifier",HN="workbench.list.openMode",za="workbench.list.horizontalScrolling",$U="workbench.list.defaultFindMode",qU="workbench.list.typeNavigationMode",JT="workbench.list.keyboardNavigation",Bc="workbench.list.scrollByPage",KU="workbench.list.defaultFindMatchType",bk="workbench.tree.indent",eP="workbench.tree.renderIndentGuides",Hc="workbench.list.smoothScrolling",eu="workbench.list.mouseWheelScrollSensitivity",tu="workbench.list.fastScrollSensitivity",tP="workbench.tree.expandMode",iP="workbench.tree.enableStickyScroll",nP="workbench.tree.stickyScrollMaxItemCount";function iu(n){return n.getValue(qb)==="alt"}class i3e extends U{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=iu(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(qb)&&(this.useAltAsMultipleSelectionModifier=iu(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Fue(e)}isSelectionRangeChangeEvent(e){return Wue(e)}}function JA(n,e){const t=n.get(nt),i=n.get(Ft),s=new Q;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(r){return i.mightProducePrintableCharacter(r)}},smoothScrolling:!!t.getValue(Hc),mouseWheelScrollSensitivity:t.getValue(eu),fastScrollSensitivity:t.getValue(tu),multipleSelectionController:e.multipleSelectionController??s.add(new i3e(t)),keyboardNavigationEventFilter:o3e(i),scrollByPage:!!t.getValue(Bc)},s]}let UJ=class extends va{constructor(e,t,i,s,o,r,a,l,c){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(za),[u,h]=c.invokeFunction(JA,o);super(e,t,i,s,{keyboardSupport:!1,...u,horizontalScrolling:d}),this.disposables.add(h),this.contextKeyService=QA(r,this),this.disposables.add(XA(this.contextKeyService,this)),this.listSupportsMultiSelect=YA.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),ZA.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=HU.bindTo(this.contextKeyService),this.listDoubleSelection=jU.bindTo(this.contextKeyService),this.listMultiSelection=VU.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=iu(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const g=this.getSelection(),m=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||m.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const g=this.getSelection(),m=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||m.length>0)})),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(qb)&&(this._useAltAsMultipleSelectionModifier=iu(l));let m={};if(g.affectsConfiguration(za)&&this.horizontalScrolling===void 0){const _=!!l.getValue(za);m={...m,horizontalScrolling:_}}if(g.affectsConfiguration(Bc)){const _=!!l.getValue(Bc);m={...m,scrollByPage:_}}if(g.affectsConfiguration(Hc)){const _=!!l.getValue(Hc);m={...m,smoothScrolling:_}}if(g.affectsConfiguration(eu)){const _=l.getValue(eu);m={...m,mouseWheelScrollSensitivity:_}}if(g.affectsConfiguration(tu)){const _=l.getValue(tu);m={...m,fastScrollSensitivity:_}}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new Zhe(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Ub(e):zb)}};UJ=$h([fi(5,Ae),fi(6,nl),fi(7,nt),fi(8,ke)],UJ);let $J=class extends a5e{constructor(e,t,i,s,o,r,a,l,c){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(za),[u,h]=c.invokeFunction(JA,o);super(e,t,i,s,{keyboardSupport:!1,...u,horizontalScrolling:d}),this.disposables=new Q,this.disposables.add(h),this.contextKeyService=QA(r,this),this.disposables.add(XA(this.contextKeyService,this.widget)),this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=YA.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),ZA.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=iu(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(qb)&&(this._useAltAsMultipleSelectionModifier=iu(l));let m={};if(g.affectsConfiguration(za)&&this.horizontalScrolling===void 0){const _=!!l.getValue(za);m={...m,horizontalScrolling:_}}if(g.affectsConfiguration(Bc)){const _=!!l.getValue(Bc);m={...m,scrollByPage:_}}if(g.affectsConfiguration(Hc)){const _=!!l.getValue(Hc);m={...m,smoothScrolling:_}}if(g.affectsConfiguration(eu)){const _=l.getValue(eu);m={...m,mouseWheelScrollSensitivity:_}}if(g.affectsConfiguration(tu)){const _=l.getValue(tu);m={...m,fastScrollSensitivity:_}}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new Zhe(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Ub(e):zb)}dispose(){this.disposables.dispose(),super.dispose()}};$J=$h([fi(5,Ae),fi(6,nl),fi(7,nt),fi(8,ke)],$J);let qJ=class extends hj{constructor(e,t,i,s,o,r,a,l,c,d){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(za),[h,f]=d.invokeFunction(JA,r);super(e,t,i,s,o,{keyboardSupport:!1,...h,horizontalScrolling:u}),this.disposables.add(f),this.contextKeyService=QA(a,this),this.disposables.add(XA(this.contextKeyService,this)),this.listSupportsMultiSelect=YA.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),ZA.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=HU.bindTo(this.contextKeyService),this.listDoubleSelection=jU.bindTo(this.contextKeyService),this.listMultiSelection=VU.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=iu(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const m=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||_.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const m=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||_.length>0)})),this.disposables.add(c.onDidChangeConfiguration(m=>{m.affectsConfiguration(qb)&&(this._useAltAsMultipleSelectionModifier=iu(c));let _={};if(m.affectsConfiguration(za)&&this.horizontalScrolling===void 0){const b=!!c.getValue(za);_={..._,horizontalScrolling:b}}if(m.affectsConfiguration(Bc)){const b=!!c.getValue(Bc);_={..._,scrollByPage:b}}if(m.affectsConfiguration(Hc)){const b=!!c.getValue(Hc);_={..._,smoothScrolling:b}}if(m.affectsConfiguration(eu)){const b=c.getValue(eu);_={..._,mouseWheelScrollSensitivity:b}}if(m.affectsConfiguration(tu)){const b=c.getValue(tu);_={..._,fastScrollSensitivity:b}}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new n3e(this,{configurationService:c,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Ub(e):zb)}dispose(){this.disposables.dispose(),super.dispose()}};qJ=$h([fi(6,Ae),fi(7,nl),fi(8,nt),fi(9,ke)],qJ);class GU extends U{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new j),this.onDidOpen=this._onDidOpen.event,this._register(ue.filter(this.widget.onDidChangeSelection,i=>Hu(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(HN))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(HN)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(HN))!=="doubleClick")}))):this.openOnSingleClick=(t==null?void 0:t.openOnSingleClick)??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,i=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!i;this._open(this.getSelectedElement(),i,s,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,o=!0,r=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}onMouseDblClick(e,t){if(!t)return;const i=t.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}_open(e,t,i,s,o){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:i,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:o})}}class Zhe extends GU{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class n3e extends GU{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class s3e extends GU{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function o3e(n){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const i=n.softDispatch(t,t.target);return i.kind===1?(e=!0,!1):(e=!1,i.kind===0)}}let _j=class extends FU{constructor(e,t,i,s,o,r,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=r.invokeFunction(QL,o);super(e,t,i,s,d),this.disposables.add(h),this.internals=new wb(this,o,u,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};_j=$h([fi(5,ke),fi(6,Ae),fi(7,nl),fi(8,nt)],_j);let KJ=class extends Bhe{constructor(e,t,i,s,o,r,a,l,c){const{options:d,getTypeNavigationMode:u,disposable:h}=r.invokeFunction(QL,o);super(e,t,i,s,d),this.disposables.add(h),this.internals=new wb(this,o,u,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};KJ=$h([fi(5,ke),fi(6,Ae),fi(7,nl),fi(8,nt)],KJ);let GJ=class extends Z5e{constructor(e,t,i,s,o,r,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(QL,r);super(e,t,i,s,o,u),this.disposables.add(f),this.internals=new wb(this,r,h,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};GJ=$h([fi(6,ke),fi(7,Ae),fi(8,nl),fi(9,nt)],GJ);let bj=class extends jhe{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,i,s,o,r,a,l,c,d){const{options:u,getTypeNavigationMode:h,disposable:f}=a.invokeFunction(QL,r);super(e,t,i,s,o,u),this.disposables.add(f),this.internals=new wb(this,r,h,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};bj=$h([fi(6,ke),fi(7,Ae),fi(8,nl),fi(9,nt)],bj);let YJ=class extends G5e{constructor(e,t,i,s,o,r,a,l,c,d,u){const{options:h,getTypeNavigationMode:f,disposable:g}=l.invokeFunction(QL,a);super(e,t,i,s,o,r,h),this.disposables.add(g),this.internals=new wb(this,a,f,a.overrideStyles,c,d,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};YJ=$h([fi(7,ke),fi(8,Ae),fi(9,nl),fi(10,nt)],YJ);function Qhe(n){const e=n.getValue($U);if(e==="highlight")return nh.Highlight;if(e==="filter")return nh.Filter;const t=n.getValue(JT);if(t==="simple"||t==="highlight")return nh.Highlight;if(t==="filter")return nh.Filter}function Xhe(n){const e=n.getValue(KU);if(e==="fuzzy")return vb.Fuzzy;if(e==="contiguous")return vb.Contiguous}function QL(n,e){const t=n.get(nt),i=n.get(zh),s=n.get(Ae),o=n.get(ke),r=()=>{const h=s.getContextKeyValue(Ghe);if(h==="automatic")return Md.Automatic;if(h==="trigger"||s.getContextKeyValue(Yhe)===!1)return Md.Trigger;const g=t.getValue(qU);if(g==="automatic")return Md.Automatic;if(g==="trigger")return Md.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(za),[l,c]=o.invokeFunction(JA,e),d=e.paddingBottom,u=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(eP);return{getTypeNavigationMode:r,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(bk)=="number"?t.getValue(bk):void 0,renderIndentGuides:u,smoothScrolling:!!t.getValue(Hc),defaultFindMode:Qhe(t),defaultFindMatchType:Xhe(t),horizontalScrolling:a,scrollByPage:!!t.getValue(Bc),paddingBottom:d,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(tP)==="doubleClick",contextViewProvider:i,findWidgetStyles:cOe,enableStickyScroll:!!t.getValue(iP),stickyScrollMaxItemCount:Number(t.getValue(nP))}}}let wb=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,i,s,o,r,a){this.tree=e,this.disposables=[],this.contextKeyService=QA(o,e),this.disposables.push(XA(this.contextKeyService,e)),this.listSupportsMultiSelect=YA.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),ZA.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=X5e.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=HU.bindTo(this.contextKeyService),this.hasDoubleSelection=jU.bindTo(this.contextKeyService),this.hasMultiSelection=VU.bindTo(this.contextKeyService),this.treeElementCanCollapse=zU.bindTo(this.contextKeyService),this.treeElementHasParent=J5e.bindTo(this.contextKeyService),this.treeElementCanExpand=UU.bindTo(this.contextKeyService),this.treeElementHasChild=e3e.bindTo(this.contextKeyService),this.treeFindOpen=t3e.bindTo(this.contextKeyService),this.treeStickyScrollFocused=qhe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=iu(a),this.updateStyleOverrides(s);const c=()=>{const u=e.getFocus()[0];if(!u)return;const h=e.getNode(u);this.treeElementCanCollapse.set(h.collapsible&&!h.collapsed),this.treeElementHasParent.set(!!e.getParentElement(u)),this.treeElementCanExpand.set(h.collapsible&&h.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(u))},d=new Set;d.add(Ghe),d.add(Yhe),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const u=e.getSelection(),h=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(u.length>0||h.length>0),this.hasMultiSelection.set(u.length>1),this.hasDoubleSelection.set(u.length===2)})}),e.onDidChangeFocus(()=>{const u=e.getSelection(),h=e.getFocus();this.hasSelectionOrFocus.set(u.length>0||h.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(u=>this.treeFindOpen.set(u)),e.onDidChangeStickyScrollFocused(u=>this.treeStickyScrollFocused.set(u)),a.onDidChangeConfiguration(u=>{let h={};if(u.affectsConfiguration(qb)&&(this._useAltAsMultipleSelectionModifier=iu(a)),u.affectsConfiguration(bk)){const f=a.getValue(bk);h={...h,indent:f}}if(u.affectsConfiguration(eP)&&t.renderIndentGuides===void 0){const f=a.getValue(eP);h={...h,renderIndentGuides:f}}if(u.affectsConfiguration(Hc)){const f=!!a.getValue(Hc);h={...h,smoothScrolling:f}}if(u.affectsConfiguration($U)||u.affectsConfiguration(JT)){const f=Qhe(a);h={...h,defaultFindMode:f}}if(u.affectsConfiguration(qU)||u.affectsConfiguration(JT)){const f=i();h={...h,typeNavigationMode:f}}if(u.affectsConfiguration(KU)){const f=Xhe(a);h={...h,defaultFindMatchType:f}}if(u.affectsConfiguration(za)&&t.horizontalScrolling===void 0){const f=!!a.getValue(za);h={...h,horizontalScrolling:f}}if(u.affectsConfiguration(Bc)){const f=!!a.getValue(Bc);h={...h,scrollByPage:f}}if(u.affectsConfiguration(tP)&&t.expandOnlyOnTwistieClick===void 0&&(h={...h,expandOnlyOnTwistieClick:a.getValue(tP)==="doubleClick"}),u.affectsConfiguration(iP)){const f=a.getValue(iP);h={...h,enableStickyScroll:f}}if(u.affectsConfiguration(nP)){const f=Math.max(1,a.getValue(nP));h={...h,stickyScrollMaxItemCount:f}}if(u.affectsConfiguration(eu)){const f=a.getValue(eu);h={...h,mouseWheelScrollSensitivity:f}}if(u.affectsConfiguration(tu)){const f=a.getValue(tu);h={...h,fastScrollSensitivity:f}}Object.keys(h).length>0&&e.updateOptions(h)}),this.contextKeyService.onDidChangeContext(u=>{u.affectsSome(d)&&e.updateOptions({typeNavigationMode:i()})})),this.navigator=new s3e(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?Ub(e):zb)}dispose(){this.disposables=Qt(this.disposables)}};wb=$h([fi(4,Ae),fi(5,nl),fi(6,nt)],wb);const r3e=Mi.as(Hl.Configuration);r3e.registerConfiguration({id:"workbench",order:7,title:p("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[qb]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[p("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),p("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:p({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[HN]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[za]:{type:"boolean",default:!1,description:p("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Bc]:{type:"boolean",default:!1,description:p("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[bk]:{type:"number",default:8,minimum:4,maximum:40,description:p("tree indent setting","Controls tree indentation in pixels.")},[eP]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:p("render tree indent guides","Controls whether the tree should render indent guides.")},[Hc]:{type:"boolean",default:!1,description:p("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[eu]:{type:"number",default:1,markdownDescription:p("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[tu]:{type:"number",default:5,markdownDescription:p("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[$U]:{type:"string",enum:["highlight","filter"],enumDescriptions:[p("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),p("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:p("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[JT]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[p("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),p("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),p("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:p("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:p("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[KU]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[p("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),p("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:p("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[tP]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:p("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[iP]:{type:"boolean",default:!0,description:p("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[nP]:{type:"number",minimum:1,default:7,markdownDescription:p("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[qU]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:p("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class _g extends U{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(t==null?void 0:t.supportIcons)??!1,this.domNode=ne(e,ce("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],i="",s){e||(e=""),s&&(e=_g.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===i&&_r(this.highlights,t))&&(this.text=e,this.title=i,this.highlights=t,this.render())}render(){var i,s,o;const e=[];let t=0;for(const r of this.highlights){if(r.end===r.start)continue;if(t<r.start){const c=this.text.substring(t,r.start);this.supportIcons?e.push(...gg(c)):e.push(c),t=r.start}const a=this.text.substring(t,r.end),l=ce("span.highlight",void 0,...this.supportIcons?gg(a):[a]);r.extraClasses&&l.classList.add(...r.extraClasses),e.push(l),t=r.end}if(t<this.text.length){const r=this.text.substring(t);this.supportIcons?e.push(...gg(r)):e.push(r)}if(rs(this.domNode,...e),(s=(i=this.options)==null?void 0:i.hoverDelegate)!=null&&s.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const r=((o=this.options)==null?void 0:o.hoverDelegate)??ko("mouse");this.customHover=this._register($c().setupManagedHover(r,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let i=0,s=0;return e.replace(/\r\n|\r|\n/g,(o,r)=>{s=o===`\r
`?-1:0,r+=i;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=s),a.end>=r&&(a.end+=s));return i+=s,""})}}class t0{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||_r(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class sP extends U{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new t0(ne(e,ce(".monaco-icon-label")))),this.labelContainer=ne(this.domNode.element,ce(".monaco-icon-label-container")),this.nameContainer=ne(this.labelContainer,ce("span.monaco-icon-name-container")),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=this._register(new c3e(this.nameContainer,!!t.supportIcons)):this.nameNode=new a3e(this.nameContainer),this.hoverDelegate=(t==null?void 0:t.hoverDelegate)??ko("mouse")}get element(){return this.domNode.element}setLabel(e,t,i){const s=["monaco-icon-label"],o=["monaco-icon-label-container"];let r="";i&&(i.extraClasses&&s.push(...i.extraClasses),i.italic&&s.push("italic"),i.strikethrough&&s.push("strikethrough"),i.disabledCommand&&o.push("disabled"),i.title&&(typeof i.title=="string"?r+=i.title:r+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(i!=null&&i.iconPath){let l;!a||!Fn(a)?(l=ce(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=Th(i==null?void 0:i.iconPath)}else a&&a.remove();if(this.domNode.classNames=s,this.domNode.element.setAttribute("aria-label",r),this.labelContainer.classList.value="",this.labelContainer.classList.add(...o),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(e,i),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof _g?(l.set(t||"",i?i.descriptionMatches:void 0,void 0,i==null?void 0:i.labelEscapeNewLines),this.setupHover(l.element,i==null?void 0:i.descriptionTitle)):(l.textContent=t&&(i!=null&&i.labelEscapeNewLines)?_g.escapeNewLines(t,[]):t||"",this.setupHover(l.element,(i==null?void 0:i.descriptionTitle)||""),l.empty=!t)}if(i!=null&&i.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=(i==null?void 0:i.suffix)??""}}setupHover(e,t){const i=this.customHovers.get(e);if(i&&(i.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(o,r){Vo(r)?o.title=oU(r):r!=null&&r.markdownNotSupportedFallback?o.title=r.markdownNotSupportedFallback:o.removeAttribute("title")})(e,t);else{const s=$c().setupManagedHover(this.hoverDelegate,e,t);s&&this.customHovers.set(e,s)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new t0(dEe(this.nameContainer,ce("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new t0(ne(e.element,ce("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new t0(ne(this.labelContainer,ce("span.monaco-icon-description-container"))));(e=this.creationOptions)!=null&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new _g(ne(t.element,ce("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new t0(ne(t.element,ce("span.label-description"))))}return this.descriptionNode}}class a3e{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&_r(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ne(this.container,ce("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let i=0;i<e.length;i++){const s=e[i],o=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${i}`;ne(this.container,ce("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":i,role:"treeitem"},s)),i<e.length-1&&ne(this.container,ce("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function l3e(n,e,t){if(!t)return;let i=0;return n.map(s=>{const o={start:i,end:i+s.length},r=t.map(a=>Ss.intersect(o,a)).filter(a=>!Ss.isEmpty(a)).map(({start:a,end:l})=>({start:a-i,end:l-i}));return i=o.end+e.length,r})}class c3e extends U{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&_r(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new _g(ne(this.container,ce("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const i=(t==null?void 0:t.separator)||"/",s=l3e(e,i,t==null?void 0:t.matches);for(let o=0;o<e.length;o++){const r=e[o],a=s?s[o]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${o}`,c=ce("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});this._register(new _g(ne(this.container,c),{supportIcons:this.supportIcons})).set(r,a,void 0,t==null?void 0:t.labelEscapeNewLines),o<e.length-1&&ne(c,ce("span.label-separator",void 0,i))}}}}const bE=ce,Jhe={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class g1 extends U{constructor(e,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=ne(e,bE(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.hover=this._register($c().setupManagedHover(ko("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&g1.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let i=1;i<e.length;i++)ne(this.domNode,bE("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){os(this.domNode),this.keyElements.clear()}renderChord(e,t,i){const s=uU.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!(i!=null&&i.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!(i!=null&&i.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,!!(i!=null&&i.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!(i!=null&&i.metaKey),s.separator);const o=t.keyLabel;o&&this.renderKey(e,o,!!(i!=null&&i.keyCode),"")}renderKey(e,t,i,s){ne(e,this.createKeyElement(t,i?".highlight":"")),s&&ne(e,bE("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){ne(e,this.createKeyElement(p("unbound","Unbound")))}createKeyElement(e,t=""){const i=bE("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&_r(e.firstPart,t.firstPart)&&_r(e.chordPart,t.chordPart)}}const ZJ=new Oc(()=>{const n=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:n,collatorIsNumeric:n.resolvedOptions().numeric}});function d3e(n,e,t=!1){const i=n||"",s=e||"",o=ZJ.value.collator.compare(i,s);return ZJ.value.collatorIsNumeric&&o===0&&i!==s?i<s?-1:1:o}function u3e(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),o=h3e(n,e,t);if(o)return o;const r=i.endsWith(t),a=s.endsWith(t);if(r!==a)return r?-1:1;const l=d3e(i,s);return l!==0?l:i.localeCompare(s)}function h3e(n,e,t){const i=n.toLowerCase(),s=e.toLowerCase(),o=i.startsWith(t),r=s.startsWith(t);if(o!==r)return o?-1:1;if(o&&r){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}var eO=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},vj=function(n,e){return function(t,i){e(t,i,n)}},wj;const Yl=ce;class efe{constructor(e,t,i){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new Oc(()=>{const s=i.label??"",o=L0(s).text.trim(),r=i.ariaLabel||[s,this.saneDescription,this.saneDetail].map(a=>w2e(a)).filter(a=>!!a).join(", ");return{saneLabel:s,saneSortLabel:o,saneAriaLabel:r}}),this._saneDescription=i.description,this._saneTooltip=i.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class ds extends efe{constructor(e,t,i,s,o,r){var a,l,c;super(e,t,o),this.fireButtonTriggered=i,this._onChecked=s,this.item=o,this._separator=r,this._checked=!1,this.onChecked=t?ue.map(ue.filter(this._onChecked.event,d=>d.element===this),d=>d.checked):ue.None,this._saneDetail=o.detail,this._labelHighlights=(a=o.highlights)==null?void 0:a.label,this._descriptionHighlights=(l=o.highlights)==null?void 0:l.description,this._detailHighlights=(c=o.highlights)==null?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var wd;(function(n){n[n.NONE=0]="NONE",n[n.MOUSE_HOVER=1]="MOUSE_HOVER",n[n.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(wd||(wd={}));class Km extends efe{constructor(e,t,i){super(e,!1,i),this.fireSeparatorButtonTriggered=t,this.separator=i,this.children=new Array,this.focusInsideSeparator=wd.NONE}}class f3e{getHeight(e){return e instanceof Km?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof ds?oP.ID:rP.ID}}class g3e{getWidgetAriaLabel(){return p("quickInput","Quick Input")}getAriaLabel(e){var t;return(t=e.separator)!=null&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof ds)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class tfe{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new Q,t.toDisposeTemplate=new Q,t.entry=ne(e,Yl(".quick-input-list-entry"));const i=ne(t.entry,Yl("label.quick-input-list-label"));t.toDisposeTemplate.add(Fi(i,le.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=ne(i,Yl("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const s=ne(i,Yl(".quick-input-list-rows")),o=ne(s,Yl(".quick-input-list-row")),r=ne(s,Yl(".quick-input-list-row"));t.label=new sP(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=yz(t.label.element,Yl(".quick-input-list-icon"));const a=ne(o,Yl(".quick-input-list-entry-keybinding"));t.keybinding=new g1(a,mr),t.toDisposeTemplate.add(t.keybinding);const l=ne(r,Yl(".quick-input-list-label-meta"));return t.detail=new sP(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=ne(t.entry,Yl(".quick-input-list-separator")),t.actionBar=new ca(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,i){i.toDisposeElement.clear(),i.actionBar.clear()}}var i_;let oP=(i_=class extends tfe{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return wj.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(Fi(t.checkbox,le.CHANGE,i=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,i){var h;const s=e.element;i.element=s,s.element=i.entry??void 0;const o=s.item;i.checkbox.checked=s.checked,i.toDisposeElement.add(s.onChecked(f=>i.checkbox.checked=f)),i.checkbox.disabled=s.checkboxDisabled;const{labelHighlights:r,descriptionHighlights:a,detailHighlights:l}=s;if(o.iconPath){const f=cy(this.themeService.getColorTheme().type)?o.iconPath.dark:o.iconPath.light??o.iconPath.dark,g=Le.revive(f);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=Th(g)}else i.icon.style.backgroundImage="",i.icon.className=o.iconClass?`quick-input-list-icon ${o.iconClass}`:"";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const d={matches:r||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(d.extraClasses=o.iconClasses,d.italic=o.italic,d.strikethrough=o.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,d),i.keybinding.set(o.keybinding),s.saneDetail){let f;s.saneTooltip||(f={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:l,title:f,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";(h=s.separator)!=null&&h.label?(i.separator.textContent=s.separator.label,i.separator.style.display="",this.addItemWithSeparator(s)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!s.separator);const u=o.buttons;u&&u.length?(i.actionBar.push(u.map((f,g)=>_S(f,`id-${g}`,()=>s.fireButtonTriggered({button:f,item:s.item}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")}disposeElement(e,t,i){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,i)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},wj=i_,i_.ID="quickpickitem",i_);oP=wj=eO([vj(1,kn)],oP);const c2=class c2 extends tfe{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return c2.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,i){const s=e.element;i.element=s,s.element=i.entry??void 0,s.element.classList.toggle("focus-inside",!!s.focusInsideSeparator);const o=s.separator,{labelHighlights:r,descriptionHighlights:a,detailHighlights:l}=s;i.icon.style.backgroundImage="",i.icon.className="";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const d={matches:r||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,d),s.saneDetail){let h;s.saneTooltip||(h={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:l,title:h,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");const u=o.buttons;u&&u.length?(i.actionBar.push(u.map((h,f)=>_S(h,`id-${f}`,()=>s.fireSeparatorButtonTriggered({button:h,separator:s.separator}))),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(s)}disposeElement(e,t,i){var s;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(s=e.element.element)==null||s.classList.remove("focus-inside"),super.disposeElement(e,t,i)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};c2.ID="quickpickseparator";let rP=c2,vk=class extends U{constructor(e,t,i,s,o,r){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=i,this.accessibilityService=r,this._onKeyDown=new j,this._onLeave=new j,this.onLeave=this._onLeave.event,this._visibleCountObservable=it("VisibleCount",0),this.onChangedVisibleCount=ue.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=it("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=ue.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=it("CheckedCount",0),this.onChangedCheckedCount=ue.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=MH({equalsFn:Li},new Array),this.onChangedCheckedElements=ue.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new j,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new j,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new j,this._elementCheckedEventBufferer=new EL,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new Q),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=ne(this.parent,Yl(".quick-input-list")),this._separatorRenderer=new rP(t),this._itemRenderer=o.createInstance(oP,t),this._tree=this._register(o.createInstance(_j,"QuickInput",this._container,new f3e,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof Km?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return p3e(a,l,c)}},accessibilityProvider:new g3e,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:yy.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=s,this._registerListeners()}get onDidChangeFocus(){return ue.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof ds).map(t=>t.item),this._store)}get onDidChangeSelection(){return ue.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof ds).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new ti(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(G(this._container,le.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(G(this._container,le.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new _ce(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var i;if(aQ(t.browserEvent.target)){e.cancel();return}if(!(!aQ(t.browserEvent.relatedTarget)&&Rn(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)))try{await e.trigger(async()=>{t.element instanceof ds&&this.showHover(t.element)})}catch(s){if(!el(s))throw s}})),this._register(this._tree.onMouseOut(t=>{var i;Rn(t.browserEvent.relatedTarget,(i=t.element)==null?void 0:i.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const i of this._separatorRenderer.visibleSeparators){const s=i===t;!!(i.focusInsideSeparator&wd.ACTIVE_ITEM)!==s&&(s?i.focusInsideSeparator|=wd.ACTIVE_ITEM:i.focusInsideSeparator&=~wd.ACTIVE_ITEM,this._tree.rerender(i))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&wd.MOUSE_HOVER)||(i.focusInsideSeparator|=wd.MOUSE_HOVER,this._tree.rerender(i))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const i of this._separatorRenderer.visibleSeparators){if(i!==t)continue;!!(i.focusInsideSeparator&wd.MOUSE_HOVER)&&(i.focusInsideSeparator&=~wd.MOUSE_HOVER,this._tree.rerender(i))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(i=>i instanceof ds);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof Km&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((i,s,o)=>{let r;if(s.type==="separator"){if(!s.buttons)return i;t=new Km(o,a=>this._onSeparatorButtonTriggered.fire(a),s),r=t}else{const a=o>0?e[o-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new ds(o,this._hasCheckboxes,d=>this._onButtonTriggered.fire(d),this._elementChecked,s,l);if(this._itemElements.push(c),t)return t.children.push(c),i;r=c}return i.push(r),i},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const i=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),s=i==null?void 0:i.parentNode;if(i&&s){const o=i.nextSibling;i.remove(),s.insertBefore(i,o)}},0)}setFocusedElements(e){const t=e.map(i=>this._itemElements.find(s=>s.item===i)).filter(i=>!!i).filter(i=>!i.hidden);if(this._tree.setFocus(t),e.length>0){const i=this._tree.getFocus()[0];i&&this._tree.reveal(i)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(i=>this._itemElements.find(s=>s.item===i)).filter(i=>!!i);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const i of e)t.add(i);for(const i of this._itemElements)i.checked=t.has(i.item)})}focus(e){var t;if(this._itemElements.length)switch(e===di.Second&&this._itemElements.length<2&&(e=di.First),e){case di.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,i=>i.element instanceof ds);break;case di.Second:{this._tree.scrollTop=0;let i=!1;this._tree.focusFirst(void 0,s=>s.element instanceof ds?i?!0:(i=!i,!1):!1);break}case di.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,i=>i.element instanceof ds);break;case di.Next:{const i=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,o=>o.element instanceof ds?(this._tree.reveal(o.element),!0):!1);const s=this._tree.getFocus();i.length&&i[0]===s[0]&&i[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case di.Previous:{const i=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,o=>{if(!(o.element instanceof ds))return!1;const r=this._tree.getParentElement(o.element);return r===null||r.children[0]!==o.element?this._tree.reveal(o.element):this._tree.reveal(r),!0});const s=this._tree.getFocus();i.length&&i[0]===s[0]&&i[0]===this._itemElements[0]&&this._onLeave.fire();break}case di.NextPage:this._tree.focusNextPage(void 0,i=>i.element instanceof ds?(this._tree.reveal(i.element),!0):!1);break;case di.PreviousPage:this._tree.focusPreviousPage(void 0,i=>{if(!(i.element instanceof ds))return!1;const s=this._tree.getParentElement(i.element);return s===null||s.children[0]!==i.element?this._tree.reveal(i.element):this._tree.reveal(s),!0});break;case di.NextSeparator:{let i=!1;const s=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,r=>{if(i)return!0;if(r.element instanceof Km)i=!0,this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element.children[0]):this._tree.reveal(r.element,0);else if(r.element instanceof ds){if(r.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),!0;if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1});const o=this._tree.getFocus()[0];s===o&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,r=>r.element instanceof ds));break}case di.PreviousSeparator:{let i,s=!!((t=this._tree.getFocus()[0])!=null&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,o=>{if(o.element instanceof Km)s?i||(this._separatorRenderer.isSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),i=o.element.children[0]):s=!0;else if(o.element instanceof ds&&!i){if(o.element.separator)this._itemRenderer.isItemWithSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),i=o.element;else if(o.element===this._elementTree[0])return this._tree.reveal(o.element,0),!0}return!1}),i&&this._tree.setFocus([i]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(i=>{i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!1;const s=i.index&&this._inputElements[i.index-1];i.item&&(i.separator=s&&s.type==="separator"&&!s.buttons?s:void 0)});else{let i;this._itemElements.forEach(s=>{let o;this.matchOnLabelMode==="fuzzy"?o=this.matchOnLabel?g4(e,L0(s.saneLabel))??void 0:void 0:o=this.matchOnLabel?m3e(t,L0(s.saneLabel))??void 0:void 0;const r=this.matchOnDescription?g4(e,L0(s.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?g4(e,L0(s.saneDetail||""))??void 0:void 0;if(o||r||a?(s.labelHighlights=o,s.descriptionHighlights=r,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=s.item?!s.item.alwaysShow:!0),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const l=s.index&&this._inputElements[s.index-1]||void 0;(l==null?void 0:l.type)==="separator"&&!l.buttons&&(i=l),i&&!s.hidden&&(s.separator=i,i=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(i=>i instanceof ds),t=this._allVisibleChecked(e);for(const i of e)i.checkboxDisabled||(i.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e!=null&&e.saneTooltip)||!(e instanceof ds))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new Q;t.add(this._tree.onDidChangeFocus(i=>{i.elements[0]instanceof ds&&this.showHover(i.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const i of e)i instanceof Km?t.push({element:i,collapsible:!1,collapsed:!1,children:i.children.map(s=>({element:s,collapsible:!1,collapsed:!1}))}):t.push({element:i,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let i=0,s=e.length;i<s;i++){const o=e[i];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}_updateCheckedObservables(){Ti(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(i=>i.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){var t,i,s;this._lastHover&&!this._lastHover.isDisposed&&((i=(t=this.hoverDelegate).onDidHideHover)==null||i.call(t),(s=this._lastHover)==null||s.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:o=>{this.linkOpenerDelegate(o)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};eO([an],vk.prototype,"onDidChangeFocus",null);eO([an],vk.prototype,"onDidChangeSelection",null);vk=eO([vj(4,ke),vj(5,Nr)],vk);function m3e(n,e){const{text:t,iconOffsets:i}=e;if(!i||i.length===0)return QJ(n,t);const s=NL(t," "),o=t.length-s.length,r=QJ(n,s);if(r)for(const a of r){const l=i[a.start+o]+o;a.start+=l,a.end+=l}return r}function QJ(n,e){const t=e.toLowerCase().indexOf(n.toLowerCase());return t!==-1?[{start:t,end:t+n.length}]:null}function p3e(n,e,t){const i=n.labelHighlights||[],s=e.labelHighlights||[];return i.length&&!s.length?-1:!i.length&&s.length?1:i.length===0&&s.length===0?0:u3e(n.saneSortLabel,e.saneSortLabel,t)}const ife={weight:200,when:X.and(X.equals(Lhe,"quickPick"),U4e),metadata:{description:p("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function cr(n,e={}){Co.registerCommandAndKeybindingRule({...ife,...n,secondary:_3e(n.primary,n.secondary??[],e)})}const aP=ct?256:2048;function _3e(n,e,t={}){return t.withAltMod&&e.push(512+n),t.withCtrlMod&&(e.push(aP+n),t.withAltMod&&e.push(512+aP+n)),t.withCmdMod&&ct&&(e.push(2048+n),t.withCtrlMod&&e.push(2304+n),t.withAltMod&&(e.push(2560+n),t.withCtrlMod&&e.push(2816+n))),e}function Ur(n,e){return t=>{const i=t.get(il).currentQuickInput;if(i)return e&&i.quickNavigate?i.focus(e):i.focus(n)}}cr({id:"quickInput.pageNext",primary:12,handler:Ur(di.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});cr({id:"quickInput.pagePrevious",primary:11,handler:Ur(di.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});cr({id:"quickInput.first",primary:aP+14,handler:Ur(di.First)},{withAltMod:!0,withCmdMod:!0});cr({id:"quickInput.last",primary:aP+13,handler:Ur(di.Last)},{withAltMod:!0,withCmdMod:!0});cr({id:"quickInput.next",primary:18,handler:Ur(di.Next)},{withCtrlMod:!0});cr({id:"quickInput.previous",primary:16,handler:Ur(di.Previous)},{withCtrlMod:!0});const XJ=p("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),JJ=p("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");ct?(cr({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:Ur(di.NextSeparator,di.Next),metadata:{description:XJ}}),cr({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:Ur(di.NextSeparator)},{withCtrlMod:!0}),cr({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:Ur(di.PreviousSeparator,di.Previous),metadata:{description:JJ}}),cr({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:Ur(di.PreviousSeparator)},{withCtrlMod:!0})):(cr({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:Ur(di.NextSeparator,di.Next),metadata:{description:XJ}}),cr({id:"quickInput.nextSeparator",primary:2578,handler:Ur(di.NextSeparator)}),cr({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:Ur(di.PreviousSeparator,di.Previous),metadata:{description:JJ}}),cr({id:"quickInput.previousSeparator",primary:2576,handler:Ur(di.PreviousSeparator)}));cr({id:"quickInput.acceptInBackground",when:X.and(ife.when,X.or(Uhe.negate(),K4e)),primary:17,weight:250,handler:n=>{const e=n.get(il).currentQuickInput;e==null||e.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var b3e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},F4=function(n,e){return function(t,i){e(t,i,n)}},Cj;const ir=ce;var n_;let yj=(n_=class extends U{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,i,s){super(),this.options=e,this.layoutService=t,this.instantiationService=i,this.contextKeyService=s,this.enabled=!0,this.onDidAcceptEmitter=this._register(new j),this.onDidCustomEmitter=this._register(new j),this.onDidTriggerButtonEmitter=this._register(new j),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new j),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new j),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=z4e.bindTo(this.contextKeyService),this.quickInputTypeContext=$4e.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=q4e.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(ue.runAndSubscribe(rA,({window:o,disposables:r})=>this.registerKeyModsListeners(o,r),{window:Gt,disposables:this._store})),this._register(KDe(o=>{this.ui&&Te(this.ui.container)===o&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const i=s=>{this.keyMods.ctrlCmd=s.ctrlKey||s.metaKey,this.keyMods.alt=s.altKey};for(const s of[le.KEY_DOWN,le.KEY_UP,le.MOUSE_DOWN])t.add(G(e,s,i,!0))}getUI(e){if(this.ui)return e&&Te(this._container)!==Te(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=ne(this._container,ir(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const i=ha(t),s=ne(t,ir(".quick-input-titlebar")),o=this._register(new ca(s,{hoverDelegate:this.options.hoverDelegate}));o.domNode.classList.add("quick-input-left-action-bar");const r=ne(s,ir(".quick-input-title")),a=this._register(new ca(s,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=ne(t,ir(".quick-input-header")),c=ne(l,ir("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",p("quickInput.checkAll","Toggle all checkboxes")),this._register(Fi(c,le.CHANGE,F=>{const K=c.checked;B.setAllVisibleChecked(K)})),this._register(G(c,le.CLICK,F=>{(F.x||F.y)&&f.setFocus()}));const d=ne(l,ir(".quick-input-description")),u=ne(l,ir(".quick-input-and-message")),h=ne(u,ir(".quick-input-filter")),f=this._register(new n5e(h,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=ne(h,ir(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const m=new dj(g,{countFormat:p({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),_=ne(h,ir(".quick-input-count"));_.setAttribute("aria-live","polite");const b=new dj(_,{countFormat:p({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),v=this._register(new ca(l,{hoverDelegate:this.options.hoverDelegate}));v.domNode.classList.add("quick-input-inline-action-bar");const w=ne(l,ir(".quick-input-action")),y=this._register(new GT(w,this.styles.button));y.label=p("ok","OK"),this._register(y.onDidClick(F=>{this.onDidAcceptEmitter.fire()}));const S=ne(l,ir(".quick-input-action")),x=this._register(new GT(S,{...this.styles.button,supportIcons:!0}));x.label=p("custom","Custom"),this._register(x.onDidClick(F=>{this.onDidCustomEmitter.fire()}));const k=ne(u,ir(`#${this.idPrefix}message.quick-input-message`)),D=this._register(new uj(t,this.styles.progressBar));D.getContainer().classList.add("quick-input-progress");const N=ne(t,ir(".quick-input-html-widget"));N.tabIndex=-1;const R=ne(t,ir(".quick-input-description")),O=this.idPrefix+"list",B=this._register(this.instantiationService.createInstance(vk,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,O));f.setAttribute("aria-controls",O),this._register(B.onDidChangeFocus(()=>{f.setAttribute("aria-activedescendant",B.getActiveDescendant()??"")})),this._register(B.onChangedAllVisibleChecked(F=>{c.checked=F})),this._register(B.onChangedVisibleCount(F=>{m.setCount(F)})),this._register(B.onChangedCheckedCount(F=>{b.setCount(F)})),this._register(B.onLeave(()=>{setTimeout(()=>{this.controller&&(f.setFocus(),this.controller instanceof KT&&this.controller.canSelectMany&&B.clearFocus())},0)}));const z=Fc(t);return this._register(z),this._register(G(t,le.FOCUS,F=>{const K=this.getUI();if(Rn(F.relatedTarget,K.inputContainer)){const Z=K.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==Z&&this.endOfQuickInputBoxContext.set(Z)}Rn(F.relatedTarget,K.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Fn(F.relatedTarget)?F.relatedTarget:void 0)},!0)),this._register(z.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(Cy.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(f.onKeyDown(F=>{const K=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==K&&this.endOfQuickInputBoxContext.set(K)})),this._register(G(t,le.FOCUS,F=>{f.setFocus()})),this._register(Fi(t,le.KEY_DOWN,F=>{if(!Rn(F.target,N))switch(F.keyCode){case 3:gt.stop(F,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:gt.stop(F,!0),this.hide(Cy.Gesture);break;case 2:if(!F.altKey&&!F.ctrlKey&&!F.metaKey){const K=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?K.push("input"):K.push("input[type=text]"),this.getUI().list.displayed&&K.push(".monaco-list"),this.getUI().message&&K.push(".quick-input-message a"),this.getUI().widget){if(Rn(F.target,this.getUI().widget))break;K.push(".quick-input-html-widget")}const Z=t.querySelectorAll(K.join(", "));F.shiftKey&&F.target===Z[0]?(gt.stop(F,!0),B.clearFocus()):!F.shiftKey&&Rn(F.target,Z[Z.length-1])&&(gt.stop(F,!0),Z[0].focus())}break;case 10:F.ctrlKey&&(gt.stop(F,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:i,leftActionBar:o,titleBar:s,title:r,description1:R,description2:d,widget:N,rightActionBar:a,inlineActionBar:v,checkAll:c,inputContainer:u,filterContainer:h,inputBox:f,visibleCountContainer:g,visibleCount:m,countContainer:_,count:b,okContainer:w,ok:y,message:k,customButtonContainer:S,customButton:x,list:B,progressBar:D,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:F=>this.show(F),hide:()=>this.hide(),setVisibilities:F=>this.setVisibilities(F),setEnabled:F=>this.setEnabled(F),setContextKey:F=>this.options.setContextKey(F),linkOpenerDelegate:F=>this.options.linkOpenerDelegate(F)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,ne(this._container,this.ui.container))}pick(e,t={},i=Ye.None){return new Promise((s,o)=>{let r=d=>{var u;r=s,(u=t.onKeyMods)==null||u.call(t,a.keyMods),s(d)};if(i.isCancellationRequested){r(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(r(d),a.hide())}}),a.onDidChangeActive(d=>{const u=d[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const u=d[0];u&&(r(u),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...d,removeItem:()=>{const u=a.items.indexOf(d.item);if(u!==-1){const h=a.items.slice(),f=h.splice(u,1),g=a.activeItems.filter(_=>_!==f[0]),m=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=h,g&&(a.activeItems=g),a.keepScrollPosition=m}}})),a.onDidTriggerSeparatorButton(d=>{var u;return(u=t.onDidTriggerSeparatorButton)==null?void 0:u.call(t,d)}),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),i.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{Qt(c),r(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,u])=>{l=u,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(h=>h.type!=="separator"&&h.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{o(d),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new KT(t)}createInputBox(){const e=this.getUI(!0);return new G4e(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const i=this.controller;this.controller=e,i==null||i.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",rs(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(on.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),rs(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();lj.tooltip=s?p("quickInput.backWithKeybinding","Back ({0})",s):p("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var o;const t=this.controller;if(!t)return;t.willHide(e);const i=(o=this.ui)==null?void 0:o.container,s=i&&!Rce(i);if(this.controller=null,this.onHideEmitter.fire(),i&&(i.style.display="none"),!s){let r=this.previousFocusElement;for(;r&&!r.offsetParent;)r=r.parentElement??void 0;r!=null&&r.offsetParent?(r.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,Cj.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:i,widgetBorder:s,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=i??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},Cj=n_,n_.MAX_WIDTH=600,n_);yj=Cj=b3e([F4(1,gm),F4(2,ke),F4(3,Ae)],yj);var v3e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},i0=function(n,e){return function(t,i){e(t,i,n)}};let Sj=class extends dTe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(aj))),this._quickAccess}constructor(e,t,i,s,o){super(i),this.instantiationService=e,this.contextKeyService=t,this.layoutService=s,this.configurationService=o,this._onShow=this._register(new j),this._onHide=this._register(new j),this.contexts=new Map}createController(e=this.layoutService,t){const i={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:o=>this.setContextKey(o),linkOpenerDelegate:o=>{this.instantiationService.invokeFunction(r=>{r.get(Xo).open(o,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(cj))},s=this._register(this.instantiationService.createInstance(yj,{...i,...t}));return s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(o=>{Te(e.activeContainer)===Te(s.container)&&s.layout(o,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{s.isVisible()||s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(s.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(s.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new me(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,i=Ye.None){return this.controller.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:pe(LX),quickInputForeground:pe(LMe),quickInputTitleBackground:pe(DMe),widgetBorder:pe(Ude),widgetShadow:pe(o1)},inputBox:OT,toggle:AT,countBadge:Vue,button:aOe,progressBar:lOe,keybindingLabel:rOe,list:Ub({listBackground:LX,listFocusBackground:tk,listFocusForeground:ek,listInactiveFocusForeground:ek,listInactiveSelectionIconForeground:Yz,listInactiveFocusBackground:tk,listFocusOutline:vi,listInactiveFocusOutline:vi}),pickerGroup:{pickerGroupBorder:pe(EMe),pickerGroupForeground:pe(eue)}}}};Sj=v3e([i0(0,ke),i0(1,Ae),i0(2,kn),i0(3,gm),i0(4,nt)],Sj);var nfe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},lp=function(n,e){return function(t,i){e(t,i,n)}};let xj=class extends Sj{constructor(e,t,i,s,o,r){super(t,i,s,new UB(e.getContainerDomNode(),o),r),this.host=void 0;const a=wk.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return ue.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return ue.None},get onDidAddContainer(){return ue.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};xj=nfe([lp(1,ke),lp(2,Ae),lp(3,kn),lp(4,kt),lp(5,nt)],xj);let kj=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const i=t=this.instantiationService.createInstance(xj,e);this.mapEditorToService.set(e,t),zg(e.onDidDispose)(()=>{i.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,i=Ye.None){return this.activeService.pick(e,t,i)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};kj=nfe([lp(0,ke),lp(1,kt)],kj);const d2=class d2{static get(e){return e.getContribution(d2.ID)}constructor(e){this.editor=e,this.widget=new Lj(this.editor)}dispose(){this.widget.dispose()}};d2.ID="editor.controller.quickInput";let wk=d2;const u2=class u2{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return u2.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};u2.ID="editor.contrib.quickInputWidget";let Lj=u2;wt(wk.ID,wk,4);class w3e{constructor(e,t,i,s,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=i,this.foreground=s,this.background=o}}function C3e(n){if(!n||!Array.isArray(n))return[];const e=[];let t=0;for(let i=0,s=n.length;i<s;i++){const o=n[i];let r=-1;if(typeof o.fontStyle=="string"){r=0;const c=o.fontStyle.split(" ");for(let d=0,u=c.length;d<u;d++)switch(c[d]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let l=null;typeof o.background=="string"&&(l=o.background),e[t++]=new w3e(o.token||"",i,r,a,l)}return e}function y3e(n,e){n.sort((d,u)=>{const h=D3e(d.token,u.token);return h!==0?h:d.index-u.index});let t=0,i="000000",s="ffffff";for(;n.length>=1&&n[0].token==="";){const d=n.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(i=d.foreground),d.background!==null&&(s=d.background)}const o=new x3e;for(const d of e)o.getId(d);const r=o.getId(i),a=o.getId(s),l=new YU(t,r,a),c=new ZU(l);for(let d=0,u=n.length;d<u;d++){const h=n[d];c.insert(h.token,h.fontStyle,o.getId(h.foreground),o.getId(h.background))}return new sfe(o,c)}const S3e=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class x3e{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(S3e);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let i=this._color2id.get(e);return i||(i=++this._lastColorId,this._color2id.set(e,i),this._id2color[i]=te.fromHex("#"+e),i)}getColorMap(){return this._id2color.slice(0)}}class sfe{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(C3e(e),t)}static createFromParsedTokenTheme(e,t){return y3e(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let i=this._cache.get(t);if(typeof i>"u"){const s=this._match(t),o=L3e(t);i=(s.metadata|o<<8)>>>0,this._cache.set(t,i)}return(i|e<<0)>>>0}}const k3e=/\b(comment|string|regex|regexp)\b/;function L3e(n){const e=n.match(k3e);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function D3e(n,e){return n<e?-1:n>e?1:0}class YU{constructor(e,t,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new YU(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,i){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class ZU{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let i,s;t===-1?(i=e,s=""):(i=e.substring(0,t),s=e.substring(t+1));const o=this._children.get(i);return typeof o<"u"?o.match(s):this._mainRule}insert(e,t,i,s){if(e===""){this._mainRule.acceptOverwrite(t,i,s);return}const o=e.indexOf(".");let r,a;o===-1?(r=e,a=""):(r=e.substring(0,o),a=e.substring(o+1));let l=this._children.get(r);typeof l>"u"&&(l=new ZU(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,i,s)}}function E3e(n){const e=[];for(let t=1,i=n.length;t<i;t++){const s=n[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const N3e={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Ol]:"#FFFFFE",[cu]:"#000000",[Vde]:"#E5EBF1",[YL]:"#D3D3D3",[ZL]:"#939393",[zz]:"#ADD6FF4D"}},I3e={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Ol]:"#1E1E1E",[cu]:"#D4D4D4",[Vde]:"#3A3D41",[YL]:"#404040",[ZL]:"#707070",[zz]:"#ADD6FF26"}},T3e={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Ol]:"#000000",[cu]:"#FFFFFF",[YL]:"#FFFFFF",[ZL]:"#FFFFFF"}},P3e={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Ol]:"#FFFFFF",[cu]:"#292929",[YL]:"#292929",[ZL]:"#292929"}},M3e={IconContribution:"base.contributions.icons"};var eee;(function(n){function e(t,i){let s=t.defaults;for(;Re.isThemeIcon(s);){const o=Kb.getIcon(s.id);if(!o)return;s=o.defaults}return s}n.getDefinition=e})(eee||(eee={}));var tee;(function(n){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(s=>({format:s.format,location:s.location.toString()}))}}n.toJSONObject=e;function t(i){const s=o=>Vo(o)?o:void 0;if(i&&Array.isArray(i.src)&&i.src.every(o=>Vo(o.format)&&Vo(o.location)))return{weight:s(i.weight),style:s(i.style),src:i.src.map(o=>({format:o.format,location:Le.parse(o.location)}))}}n.fromJSONObject=t})(tee||(tee={}));class R3e{constructor(){this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:p("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:p("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${Re.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,s){const o=this.iconsById[e];if(o){if(i&&!o.description){o.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=i),this._onDidChange.fire()}return o}const r={id:e,description:i,defaults:t,deprecationMessage:s};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(o,r)=>o.id.localeCompare(r.id),t=o=>{for(;Re.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of s.filter(r=>!!r.description).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|${Re.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const o of s.filter(r=>!Re.isThemeIcon(r.defaults)).sort(e))i.push(`|<i class="${t(o)}"></i>|${o.id}|`);return i.join(`
`)}}const Kb=new R3e;Mi.add(M3e.IconContribution,Kb);function mi(n,e,t,i){return Kb.registerIcon(n,e,t,i)}function ofe(){return Kb}function A3e(){const n=tce();for(const e in n){const t="\\"+n[e].toString(16);Kb.registerIcon(e,{fontCharacter:t})}}A3e();const rfe="vscode://schemas/icons",afe=Mi.as(CA.JSONContribution);afe.registerSchema(rfe,Kb.getIconSchema());const iee=new $t(()=>afe.notifySchemaChanged(rfe),200);Kb.onDidChange(()=>{iee.isScheduled()||iee.schedule()});const lfe=mi("widget-close",ae.close,p("widgetClose","Icon for the close action in widgets."));mi("goto-previous-location",ae.arrowUp,p("previousChangeIcon","Icon for goto previous editor location."));mi("goto-next-location",ae.arrowDown,p("nextChangeIcon","Icon for goto next editor location."));Re.modify(ae.sync,"spin");Re.modify(ae.loading,"spin");function O3e(n){const e=new Q,t=e.add(new j),i=ofe();return e.add(i.onDidChange(()=>t.fire())),n&&e.add(n.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const s=n?n.getProductIconTheme():new cfe,o={},r=[],a=[];for(const l of i.getIcons()){const c=s.getIcon(l);if(!c)continue;const d=c.font,u=`--vscode-icon-${l.id}-font-family`,h=`--vscode-icon-${l.id}-content`;d?(o[d.id]=d.definition,a.push(`${u}: ${zF(d.id)};`,`${h}: '${c.fontCharacter}';`),r.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${zF(d.id)}; }`)):(a.push(`${h}: '${c.fontCharacter}'; ${u}: 'codicon';`),r.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in o){const c=o[l],d=c.weight?`font-weight: ${c.weight};`:"",u=c.style?`font-style: ${c.style};`:"",h=c.src.map(f=>`${Th(f.location)} format('${f.format}')`).join(", ");r.push(`@font-face { src: ${h}; font-family: ${zF(l)};${d}${u} font-display: block; }`)}return r.push(`:root { ${a.join(" ")} }`),r.join(`
`)}}}class cfe{getIcon(e){const t=ofe();let i=e.defaults;for(;Re.isThemeIcon(i);){const s=t.getIcon(i.id);if(!s)return;i=s.defaults}return i}}const Ku="vs",dC="vs-dark",Gp="hc-black",Yp="hc-light",dfe=Mi.as(Ode.ColorContribution),F3e=Mi.as(wde.ThemingContribution);class ufe{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const i=t.base;e.length>0?(jN(e)?this.id=e:this.id=i+" "+e,this.themeName=e):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,te.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=Dj(this.themeData.base);for(const i in t.colors)e.has(i)||e.set(i,te.fromHex(t.colors[i]))}this.colors=e}return this.colors}getColor(e,t){const i=this.getColors().get(e);if(i)return i;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=dfe.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Ku:return Fa.LIGHT;case Gp:return Fa.HIGH_CONTRAST_DARK;case Yp:return Fa.HIGH_CONTRAST_LIGHT;default:return Fa.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const o=Dj(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}const i=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(i||s){const o={token:""};i&&(o.foreground=i),s&&(o.background=s),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=sfe.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,i){const o=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=Bo.getForeground(o),a=Bo.getFontStyle(o);return{foreground:r,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function jN(n){return n===Ku||n===dC||n===Gp||n===Yp}function Dj(n){switch(n){case Ku:return N3e;case dC:return I3e;case Gp:return T3e;case Yp:return P3e}}function vE(n){const e=Dj(n);return new ufe(n,e)}class W3e extends U{constructor(){super(),this._onColorThemeChange=this._register(new j),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new j),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new cfe,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Ku,vE(Ku)),this._knownThemes.set(dC,vE(dC)),this._knownThemes.set(Gp,vE(Gp)),this._knownThemes.set(Yp,vE(Yp));const e=this._register(O3e(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Ku),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),gce(Gt,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return iT(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=ha(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),U.None}_registerShadowDomContainer(e){const t=ha(e,i=>{i.className="monaco-colors",i.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let i=0;i<this._styleElements.length;i++)if(this._styleElements[i]===t){this._styleElements.splice(i,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!jN(t.base)&&!jN(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new ufe(e,t)),jN(e)&&this._knownThemes.forEach(i=>{i.base===e&&i.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Ku),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Gt.matchMedia("(forced-colors: active)").matches;if(e!==Ec(this._theme.type)){let t;cy(this._theme.type)?t=e?Gp:dC:t=e?Yp:Ku,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},i={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};F3e.getThemingParticipants().forEach(r=>r(this._theme,i,this._environment));const s=[];for(const r of dfe.getColors()){const a=this._theme.getColor(r.id,!0);a&&s.push(`${Hz(r.id)}: ${a.toString()};`)}i.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${s.join(`
`)} }`);const o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();i.addRule(E3e(o)),this._themeCSS=e.join(`
`),this._updateCSS(),Hi.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const wa=dt("themeService");var B3e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},W4=function(n,e){return function(t,i){e(t,i,n)}};let Ej=class extends U{constructor(e,t,i){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new j,this._onDidChangeReducedMotion=new j,this._onDidChangeLinkUnderline=new j,this._accessibilityModeEnabledContext=HL.bindTo(this._contextKeyService);const s=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(s(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),s(),this._register(this.onDidChangeScreenReaderOptimized(()=>s()));const o=Gt.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=o.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(o),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(G(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const i=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=i,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};Ej=B3e([W4(0,Ae),W4(1,gm),W4(2,nt)],Ej);var tO=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qd=function(n,e){return function(t,i){e(t,i,n)}},Rv,T0;let Nj=class{constructor(e,t,i){this._commandService=e,this._keybindingService=t,this._hiddenStates=new Ij(i)}createMenu(e,t,i){return new lP(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t)}getMenuActions(e,t,i){const s=new lP(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...i},this._commandService,this._keybindingService,t),o=s.getActions(i);return s.dispose(),o}resetHiddenStates(e){this._hiddenStates.reset(e)}};Nj=tO([qd(0,oi),qd(1,Ft),qd(2,jl)],Nj);var s_;let Ij=(s_=class{constructor(e){this._storageService=e,this._disposables=new Q,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(Rv._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,Rv._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(Rv._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,i){this._hiddenByDefaultCache.set(`${e.id}/${t}`,i)}isHidden(e,t){var o;const i=this._isHiddenByDefault(e,t),s=((o=this._data[e.id])==null?void 0:o.includes(t))??!1;return i?!s:s}updateHidden(e,t,i){this._isHiddenByDefault(e,t)&&(i=!i);const o=this._data[e.id];if(i)o?o.indexOf(t)<0&&o.push(t):this._data[e.id]=[t];else if(o){const r=o.indexOf(t);r>=0&&Txe(o,r),o.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(Rv._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},Rv=s_,s_._key="menu.hiddenCommands",s_);Ij=Rv=tO([qd(0,jl)],Ij);class bS{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(Yn.getMenuItems(this._id));let t;for(const i of e){const s=i.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(i),this._collectContextKeysAndSubmenuIds(i)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(bS._fillInKbExprKeys(e.when,this._structureContextKeys),Xw(e)){if(e.command.precondition&&bS._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;bS._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(Yn.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const i of e.keys())t.add(i)}}let Tj=T0=class extends bS{constructor(e,t,i,s,o,r){super(e,i),this._hiddenStates=t,this._commandService=s,this._keybindingService=o,this._contextKeyService=r,this.refresh()}createActionGroups(e){const t=[];for(const i of this._menuGroups){const[s,o]=i;let r;for(const a of o)if(this._contextKeyService.contextMatchesRules(a.when)){const l=Xw(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=H3e(this._id,l?a.command:a,this._hiddenStates);if(l){const d=hfe(this._commandService,this._keybindingService,a.command.id,a.when);(r??(r=[])).push(new vr(a.command,a.alt,e,c,d,this._contextKeyService,this._commandService))}else{const d=new T0(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),u=Wn.join(...d.map(h=>h[1]));u.length>0&&(r??(r=[])).push(new Jw(a,c,u))}}r&&r.length>0&&t.push([s,r])}return t}_sort(e){return e.sort(T0._compareMenuItems)}static _compareMenuItems(e,t){const i=e.group,s=t.group;if(i!==s){if(i){if(!s)return-1}else return 1;if(i==="navigation")return-1;if(s==="navigation")return 1;const a=i.localeCompare(s);if(a!==0)return a}const o=e.order||0,r=t.order||0;return o<r?-1:o>r?1:T0._compareTitles(Xw(e)?e.command.title:e.title,Xw(t)?t.command.title:t.title)}static _compareTitles(e,t){const i=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return i.localeCompare(s)}};Tj=T0=tO([qd(3,oi),qd(4,Ft),qd(5,Ae)],Tj);let lP=class{constructor(e,t,i,s,o,r){this._disposables=new Q,this._menuInfo=new Tj(e,t,i.emitEventsForSubmenuChanges,s,o,r);const a=new $t(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},i.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Yn.onDidChangeMenu(u=>{for(const h of this._menuInfo.allMenuIds)if(u.has(h)){a.schedule();break}}));const l=this._disposables.add(new Q),c=u=>{let h=!1,f=!1,g=!1;for(const m of u)if(h=h||m.isStructuralChange,f=f||m.isEnablementChange,g=g||m.isToggleChange,h&&f&&g)break;return{menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:g}},d=()=>{l.add(r.onDidChangeContext(u=>{const h=u.affectsSome(this._menuInfo.structureContextKeys),f=u.affectsSome(this._menuInfo.preconditionContextKeys),g=u.affectsSome(this._menuInfo.toggledContextKeys);(h||f||g)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:f,isToggleChange:g})})),l.add(t.onDidChange(u=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new $le({onWillAddFirstListener:d,onDidRemoveLastListener:l.clear.bind(l),delay:i.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};lP=tO([qd(3,oi),qd(4,Ft),qd(5,Ae)],lP);function H3e(n,e,t){const i=UEe(e)?e.submenu.id:e.id,s=typeof e.title=="string"?e.title:e.title.value,o=zp({id:`hide/${n.id}/${i}`,label:p("hide.label","Hide '{0}'",s),run(){t.updateHidden(n,i,!0)}}),r=zp({id:`toggle/${n.id}/${i}`,label:s,get checked(){return!t.isHidden(n,i)},run(){t.updateHidden(n,i,!!this.checked)}});return{hide:o,toggle:r,get isHidden(){return!r.checked}}}function hfe(n,e,t,i=void 0,s=!0){return zp({id:`configureKeybinding/${t}`,label:p("configure keybinding","Configure Keybinding"),enabled:s,run(){const r=!!!e.lookupKeybinding(t)&&i?i.serialize():void 0;n.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(r?` +when:${r}`:""))}})}var j3e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nee=function(n,e){return function(t,i){e(t,i,n)}},Pj;const see="application/vnd.code.resources";var o_;let Mj=(o_=class extends U{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Eh||mce)&&this.installWebKitWriteTextWorkaround(),this._register(ue.runAndSubscribe(rA,({window:i,disposables:s})=>{s.add(G(i.document,"copy",()=>this.clearResourcesState()))},{window:Gt,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new Jy;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,y0().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async i=>{(!(i instanceof Error)||i.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(i)})};this._register(ue.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:i})=>{i.add(G(t,"click",e)),i.add(G(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await y0().navigator.clipboard.writeText(e)}catch(i){console.error(i)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=e1(),i=t.activeElement,s=t.body.appendChild(ce("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),t.execCommand("copy"),Fn(i)&&i.focus(),s.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await y0().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await y0().navigator.clipboard.read();for(const i of t)if(i.types.includes(`web ${see}`)){const s=await i.getType(`web ${see}`);return JSON.parse(await s.text()).map(r=>Le.from(r))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return sA(e.substring(0,Pj.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},Pj=o_,o_.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,o_);Mj=Pj=j3e([nee(0,gm),nee(1,ws)],Mj);const qh=dt("clipboardService");var V3e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},z3e=function(n,e){return function(t,i){e(t,i,n)}};const vS="data-keybinding-context";let QU=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};const h2=class h2 extends QU{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};h2.INSTANCE=new h2;let Sy=h2;const ZS=class ZS extends QU{constructor(e,t,i){super(e,null),this._configurationService=t,this._values=nC.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===7){const o=Array.from(this._values,([r])=>r);this._values.clear(),i.fire(new ree(o))}else{const o=[];for(const r of s.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(o.push(..._t.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}i.fire(new ree(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(ZS._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(ZS._keyPrefix.length),i=this._configurationService.getValue(t);let s;switch(typeof i){case"number":case"boolean":case"string":s=i;break;default:Array.isArray(i)?s=JSON.stringify(i):s=i}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};ZS._keyPrefix="config.";let Rj=ZS;class U3e{constructor(e,t,i){this._service=e,this._key=t,this._defaultValue=i,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class oee{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class ree{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class $3e{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function q3e(n,e){return n.allKeysContainedIn(new Set(Object.keys(e)))}class ffe extends U{constructor(e){super(),this._onDidChangeContext=this._register(new rb({merge:t=>new $3e(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new U3e(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new K3e(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(e,t)&&this._onDidChangeContext.fire(new oee(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new oee(e))}getContext(e){return this._isDisposed?Sy.INSTANCE:this.getContextValuesContainer(G3e(e))}dispose(){super.dispose(),this._isDisposed=!0}}let Aj=class extends ffe{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new Rj(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?Sy.INSTANCE:this._contexts.get(e)||Sy.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new QU(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};Aj=V3e([z3e(0,nt)],Aj);class K3e extends ffe{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new jn),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(vS)){let i="";this._domNode.classList&&(i=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${i?": "+i:""}`)}this._domNode.setAttribute(vS,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const i=this._parent.getContextValuesContainer(this._myContextId).value;q3e(e,i)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(vS),super.dispose())}getContextValuesContainer(e){return this._isDisposed?Sy.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function G3e(n){for(;n;){if(n.hasAttribute(vS)){const e=n.getAttribute(vS);return e?parseInt(e,10):NaN}n=n.parentElement}return 0}function Y3e(n,e,t){n.get(Ae).createKey(String(e),Z3e(t))}function Z3e(n){return Tle(n,e=>{if(typeof e=="object"&&e.$mid===1)return Le.revive(e).toString();if(e instanceof Le)return e.toString()})}bt.registerCommand("_setContext",Y3e);bt.registerCommand({id:"getContextKeyInfo",handler(){return[...me.all()].sort((n,e)=>n.key.localeCompare(e.key))},metadata:{description:p("getContextKeyInfo","A command that returns information about context keys"),args:[]}});bt.registerCommand("_generateContextKeyInfo",function(){const n=[],e=new Set;for(const t of me.all())e.has(t.key)||(e.add(t.key),n.push(t));n.sort((t,i)=>t.key.localeCompare(i.key)),console.log(JSON.stringify(n,void 0,2))});let Q3e=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class aee{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);i.outgoing.set(s.key,s),s.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new Q3e(t,e),this._nodes.set(t,i)),i}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),s=this._findCycle(t,i);if(s)return s}}_findCycle(e,t){for(const[i,s]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const o=this._findCycle(s,t);if(o)return o;t.delete(i)}}}class m1{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}get(e){return this._entries.get(e)}}const X3e=!1;class lee extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class cP{constructor(e=new m1,t=!1,i,s=X3e){this._services=e,this._strict=t,this._parent=i,this._enableTracing=s,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(ke,this),this._globalGraph=s?(i==null?void 0:i._globalGraph)??new aee(o=>o):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,Qt(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)eA(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const i=this,s=new class extends cP{dispose(){i._children.delete(s),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(s),t==null||t.add(s),s}invokeFunction(e,...t){this._throwIfDisposed();const i=wS.traceInvocation(this._enableTracing,e);let s=!1;try{return e({get:r=>{if(s)throw iz("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,i);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{s=!0,i.stop()}}createInstance(e,...t){this._throwIfDisposed();let i,s;return e instanceof Ld?(i=wS.traceCreation(this._enableTracing,e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=wS.traceCreation(this._enableTracing,e),s=this._createInstance(e,t,i)),i.stop(),s}_createInstance(e,t=[],i){const s=vc.getServiceDependencies(e).sort((a,l)=>a.index-l.index),o=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,i);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(l)}const r=s.length>0?s[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return Reflect.construct(e,t.concat(o))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof Ld)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof Ld?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var l;const s=new aee(c=>c.id.toString());let o=0;const r=[{id:e,desc:t,_trace:i}],a=new Set;for(;r.length;){const c=r.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),o++>1e3)throw new lee(s);for(const d of vc.getServiceDependencies(c.desc.ctor)){const u=this._getServiceInstanceOrDescriptor(d.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${d.id} which is NOT registered.`,!0),(l=this._globalGraph)==null||l.insertEdge(String(c.id),String(d.id)),u instanceof Ld){const h={id:d.id,desc:u,_trace:c._trace.branch(d.id,!0)};s.insertEdge(c,h),r.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new lee(s);break}for(const{data:d}of c){if(this._getServiceInstanceOrDescriptor(d.id)instanceof Ld){const h=this._createServiceInstanceWithOwner(d.id,d.desc.ctor,d.desc.staticArguments,d.desc.supportsDelayedInstantiation,d._trace);this._setCreatedServiceInstance(d.id,h)}s.removeNode(d)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],s,o){if(this._services.get(e)instanceof Ld)return this._createServiceInstance(e,t,i,s,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,s,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],s,o,r){if(s){const a=new cP(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new _De(()=>{const d=a._createInstance(t,i,o);for(const[u,h]of l){const f=d[u];if(typeof f=="function")for(const g of h)g.disposable=f.apply(d,g.listener)}return l.clear(),r.add(d),d});return new Proxy(Object.create(null),{get(d,u){if(!c.isInitialized&&typeof u=="string"&&(u.startsWith("onDid")||u.startsWith("onWill"))){let g=l.get(u);return g||(g=new co,l.set(u,g)),(_,b,v)=>{if(c.isInitialized)return c.value[u](_,b,v);{const w={listener:[_,b,v],disposable:void 0},y=g.push(w);return xe(()=>{var x;y(),(x=w.disposable)==null||x.dispose()})}}}if(u in d)return d[u];const h=c.value;let f=h[u];return typeof f!="function"||(f=f.bind(h),d[u]=f),f},set(d,u,h){return c.value[u]=h,!0},getPrototypeOf(d){return t.prototype}})}else{const a=this._createInstance(t,i,o);return r.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const Br=class Br{static traceInvocation(e,t){return e?new Br(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Br._None}static traceCreation(e,t){return e?new Br(1,t.name):Br._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new Br(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;Br._totals+=e;let t=!1;function i(o,r){const a=[],l=new Array(o+1).join("	");for(const[c,d,u]of r._dep)if(d&&u){t=!0,a.push(`${l}CREATES -> ${c}`);const h=i(o+1,u);h&&a.push(h)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Br._totals.toFixed(2)}ms)`];(e>2||t)&&Br.all.add(s.join(`
`))}};Br.all=new Set,Br._None=new class extends Br{constructor(){super(0,null)}stop(){}branch(){return this}},Br._totals=0;let wS=Br;const J3e=new Set([je.inMemory,je.vscodeSourceControl,je.walkThrough,je.walkThroughSnippet,je.vscodeChatCodeBlock]);class eWe{constructor(){this._byResource=new Zn,this._byOwner=new Map}set(e,t,i){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,i);let o=this._byOwner.get(t);o||(o=new Zn,this._byOwner.set(t,o)),o.set(e,i)}get(e,t){const i=this._byResource.get(e);return i==null?void 0:i.get(t)}delete(e,t){let i=!1,s=!1;const o=this._byResource.get(e);o&&(i=o.delete(t));const r=this._byOwner.get(t);if(r&&(s=r.delete(e)),i!==s)throw new Error("illegal state");return i&&s}values(e){var t,i;return typeof e=="string"?((t=this._byOwner.get(e))==null?void 0:t.values())??_t.empty():Le.isUri(e)?((i=this._byResource.get(e))==null?void 0:i.values())??_t.empty():_t.map(_t.concat(...this._byOwner.values()),s=>s[1])}}class tWe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Zn,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const i=this._data.get(t);i&&this._substract(i);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(J3e.has(e.scheme))return t;for(const{severity:i}of this._service.read({resource:e}))i===Vi.Error?t.errors+=1:i===Vi.Warning?t.warnings+=1:i===Vi.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class pf{constructor(){this._onMarkerChanged=new $le({delay:0,merge:pf._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new eWe,this._stats=new tWe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const i of t||[])this.changeOne(e,i,[])}changeOne(e,t,i){if(Lle(i))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const o of i){const r=pf._toMarker(e,t,o);r&&s.push(r)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,i){let{code:s,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}=i;if(r)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,u=u>0?u:c,{resource:t,owner:e,code:s,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:u,relatedInformation:h,tags:f}}changeAll(e,t){const i=[],s=this._data.values(e);if(s)for(const o of s){const r=_t.first(o);r&&(i.push(r.resource),this._data.delete(r.resource,e))}if(Ys(t)){const o=new Zn;for(const{resource:r,marker:a}of t){const l=pf._toMarker(e,r,a);if(!l)continue;const c=o.get(r);c?c.push(l):(o.set(r,[l]),i.push(r))}for(const[r,a]of o)this._data.set(r,e,a)}i.length>0&&this._onMarkerChanged.fire(i)}read(e=Object.create(null)){let{owner:t,resource:i,severities:s,take:o}=e;if((!o||o<0)&&(o=-1),t&&i){const r=this._data.get(i,t);if(r){const a=[];for(const l of r)if(pf._accept(l,s)){const c=a.push(l);if(o>0&&c===o)break}return a}else return[]}else if(!t&&!i){const r=[];for(const a of this._data.values())for(const l of a)if(pf._accept(l,s)){const c=r.push(l);if(o>0&&c===o)return r}return r}else{const r=this._data.values(i??t),a=[];for(const l of r)for(const c of l)if(pf._accept(c,s)){const d=a.push(c);if(o>0&&d===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new Zn;for(const i of e)for(const s of i)t.set(s,!0);return Array.from(t.keys())}}class iWe extends U{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=ss.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=ss.createEmptyModel(this.logService);const e=Mi.as(Hl.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const i=this.getConfigurationDefaultOverrides();for(const s of e){const o=i[s],r=t[s];o!==void 0?this._configurationModel.setValue(s,o):r?this._configurationModel.setValue(s,r.default):this._configurationModel.removeValue(s)}}}const vm=dt("accessibilitySignalService"),Lt=class Lt{static register(e){return new Lt(e.fileName)}constructor(e){this.fileName=e}};Lt.error=Lt.register({fileName:"error.mp3"}),Lt.warning=Lt.register({fileName:"warning.mp3"}),Lt.success=Lt.register({fileName:"success.mp3"}),Lt.foldedArea=Lt.register({fileName:"foldedAreas.mp3"}),Lt.break=Lt.register({fileName:"break.mp3"}),Lt.quickFixes=Lt.register({fileName:"quickFixes.mp3"}),Lt.taskCompleted=Lt.register({fileName:"taskCompleted.mp3"}),Lt.taskFailed=Lt.register({fileName:"taskFailed.mp3"}),Lt.terminalBell=Lt.register({fileName:"terminalBell.mp3"}),Lt.diffLineInserted=Lt.register({fileName:"diffLineInserted.mp3"}),Lt.diffLineDeleted=Lt.register({fileName:"diffLineDeleted.mp3"}),Lt.diffLineModified=Lt.register({fileName:"diffLineModified.mp3"}),Lt.chatRequestSent=Lt.register({fileName:"chatRequestSent.mp3"}),Lt.chatResponseReceived1=Lt.register({fileName:"chatResponseReceived1.mp3"}),Lt.chatResponseReceived2=Lt.register({fileName:"chatResponseReceived2.mp3"}),Lt.chatResponseReceived3=Lt.register({fileName:"chatResponseReceived3.mp3"}),Lt.chatResponseReceived4=Lt.register({fileName:"chatResponseReceived4.mp3"}),Lt.clear=Lt.register({fileName:"clear.mp3"}),Lt.save=Lt.register({fileName:"save.mp3"}),Lt.format=Lt.register({fileName:"format.mp3"}),Lt.voiceRecordingStarted=Lt.register({fileName:"voiceRecordingStarted.mp3"}),Lt.voiceRecordingStopped=Lt.register({fileName:"voiceRecordingStopped.mp3"}),Lt.progress=Lt.register({fileName:"progress.mp3"});let Si=Lt;class nWe{constructor(e){this.randomOneOf=e}}const tt=class tt{constructor(e,t,i,s,o,r){this.sound=e,this.name=t,this.legacySoundSettingsKey=i,this.settingsKey=s,this.legacyAnnouncementSettingsKey=o,this.announcementMessage=r}static register(e){const t=new nWe("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),i=new tt(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return tt._signals.add(i),i}};tt._signals=new Set,tt.errorAtPosition=tt.register({name:p("accessibilitySignals.positionHasError.name","Error at Position"),sound:Si.error,announcementMessage:p("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),tt.warningAtPosition=tt.register({name:p("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:Si.warning,announcementMessage:p("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),tt.errorOnLine=tt.register({name:p("accessibilitySignals.lineHasError.name","Error on Line"),sound:Si.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:p("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),tt.warningOnLine=tt.register({name:p("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:Si.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:p("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),tt.foldedArea=tt.register({name:p("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:Si.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:p("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),tt.break=tt.register({name:p("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:Si.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:p("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),tt.inlineSuggestion=tt.register({name:p("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:Si.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),tt.terminalQuickFix=tt.register({name:p("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:Si.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:p("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),tt.onDebugBreak=tt.register({name:p("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:Si.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:p("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),tt.noInlayHints=tt.register({name:p("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:Si.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:p("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),tt.taskCompleted=tt.register({name:p("accessibilitySignals.taskCompleted","Task Completed"),sound:Si.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:p("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),tt.taskFailed=tt.register({name:p("accessibilitySignals.taskFailed","Task Failed"),sound:Si.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:p("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),tt.terminalCommandFailed=tt.register({name:p("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:Si.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:p("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),tt.terminalCommandSucceeded=tt.register({name:p("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:Si.success,announcementMessage:p("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),tt.terminalBell=tt.register({name:p("accessibilitySignals.terminalBell","Terminal Bell"),sound:Si.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:p("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),tt.notebookCellCompleted=tt.register({name:p("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:Si.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:p("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),tt.notebookCellFailed=tt.register({name:p("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:Si.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:p("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),tt.diffLineInserted=tt.register({name:p("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:Si.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),tt.diffLineDeleted=tt.register({name:p("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:Si.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),tt.diffLineModified=tt.register({name:p("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:Si.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),tt.chatRequestSent=tt.register({name:p("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:Si.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:p("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),tt.chatResponseReceived=tt.register({name:p("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[Si.chatResponseReceived1,Si.chatResponseReceived2,Si.chatResponseReceived3,Si.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),tt.progress=tt.register({name:p("accessibilitySignals.progress","Progress"),sound:Si.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:p("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),tt.clear=tt.register({name:p("accessibilitySignals.clear","Clear"),sound:Si.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:p("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),tt.save=tt.register({name:p("accessibilitySignals.save","Save"),sound:Si.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:p("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),tt.format=tt.register({name:p("accessibilitySignals.format","Format"),sound:Si.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:p("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),tt.voiceRecordingStarted=tt.register({name:p("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:Si.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),tt.voiceRecordingStopped=tt.register({name:p("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:Si.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let Kr=tt;class sWe extends U{constructor(e,t=[]){super(),this.logger=new qEe([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const gfe=[];function p1(n){gfe.push(n)}function oWe(){return gfe.slice(0)}class rWe{getParseResult(e){}}var hu=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},un=function(n,e){return function(t,i){e(t,i,n)}};class aWe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new j}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let Oj=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new Xke(new aWe(t))):Promise.reject(new Error("Model not found"))}};Oj=hu([un(0,gi)],Oj);const f2=class f2{show(){return f2.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};f2.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let Fj=f2;class lWe{withProgress(e,t,i){return t({report:()=>{}})}}class cWe{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class dWe{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let i=e;return t&&(i=i+`

`+t),Gt.confirm(i)}async prompt(e){var s;let t;if(this.doConfirm(e.message,e.detail)){const o=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&o.push(e.cancelButton),t=await((s=o[0])==null?void 0:s.run({checkboxChecked:!1}))}return{result:t}}async error(e,t){await this.prompt({type:on.Error,message:e,detail:t})}}const QS=class QS{info(e){return this.notify({severity:on.Info,message:e})}warn(e){return this.notify({severity:on.Warning,message:e})}error(e){return this.notify({severity:on.Error,message:e})}notify(e){switch(e.severity){case on.Error:console.error(e.message);break;case on.Warning:console.warn(e.message);break;default:console.log(e.message);break}return QS.NO_OP}prompt(e,t,i,s){return QS.NO_OP}status(e,t){return U.None}};QS.NO_OP=new gTe;let Wj=QS,Bj=class{constructor(e){this._onWillExecuteCommand=new j,this._onDidExecuteCommand=new j,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const i=bt.getCommand(e);if(!i)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[i.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};Bj=hu([un(0,ke)],Bj);let xy=class extends TRe{constructor(e,t,i,s,o,r){super(e,t,i,s,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const g=new Q;g.add(G(f,le.KEY_DOWN,m=>{const _=new ti(m);this._dispatch(_,_.target)&&(_.preventDefault(),_.stopPropagation())})),g.add(G(f,le.KEY_UP,m=>{const _=new ti(m);this._singleModifierDispatch(_,_.target)&&_.preventDefault()})),this._domNodeListeners.push(new uWe(f,g))},l=f=>{for(let g=0;g<this._domNodeListeners.length;g++){const m=this._domNodeListeners[g];m.domNode===f&&(this._domNodeListeners.splice(g,1),m.dispose())}},c=f=>{f.getOption(61)||a(f.getContainerDomNode())},d=f=>{f.getOption(61)||l(f.getContainerDomNode())};this._register(r.onCodeEditorAdd(c)),this._register(r.onCodeEditorRemove(d)),r.listCodeEditors().forEach(c);const u=f=>{a(f.getContainerDomNode())},h=f=>{l(f.getContainerDomNode())};this._register(r.onDiffEditorAdd(u)),this._register(r.onDiffEditorRemove(h)),r.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,i,s){return El(bt.registerCommand(e,i),this.addDynamicKeybindings([{keybinding:t,command:e,when:s}]))}addDynamicKeybindings(e){const t=e.map(i=>({keybinding:hB(i.keybinding,mr),command:i.command??null,commandArgs:i.commandArgs,when:i.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),xe(()=>{for(let i=0;i<this._dynamicKeybindings.length;i++)if(this._dynamicKeybindings[i]===t[0]){this._dynamicKeybindings.splice(i,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Co.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new cS(e,t,i=>this._log(i))}return this._cachedResolver}_documentHasFocus(){return Gt.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const i=[];let s=0;for(const o of e){const r=o.when||void 0,a=o.keybinding;if(!a)i[s++]=new ZX(void 0,o.command,o.commandArgs,r,t,null,!1);else{const l=rk.resolveKeybinding(a,mr);for(const c of l)i[s++]=new ZX(c,o.command,o.commandArgs,r,t,null,!1)}}return i}resolveKeyboardEvent(e){const t=new Nh(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new rk([t],mr)}};xy=hu([un(0,Ae),un(1,oi),un(2,Ps),un(3,rn),un(4,ws),un(5,kt)],xy);class uWe extends U{constructor(e,t){super(),this.domNode=e,this._register(t)}}function cee(n){return n&&typeof n=="object"&&(!n.overrideIdentifier||typeof n.overrideIdentifier=="string")&&(!n.resource||n.resource instanceof Le)}let dP=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new j,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new iWe(e);this._configuration=new BA(t.reload(),ss.createEmptyModel(e),ss.createEmptyModel(e),ss.createEmptyModel(e),ss.createEmptyModel(e),ss.createEmptyModel(e),new Zn,ss.createEmptyModel(e),new Zn,e),t.dispose()}getValue(e,t){const i=typeof e=="string"?e:void 0,s=cee(e)?e:cee(t)?t:{};return this._configuration.getValue(i,s,void 0)}updateValues(e){const t={data:this._configuration.toData()},i=[];for(const s of e){const[o,r]=s;this.getValue(o)!==r&&(this._configuration.updateValue(o,r),i.push(o))}if(i.length>0){const s=new LRe({keys:i,overrides:[]},t,this._configuration,void 0,this.logService);s.source=8,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}updateValue(e,t,i,s){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};dP=hu([un(0,ws)],dP);let Hj=class{constructor(e,t,i){this.configurationService=e,this.modelService=t,this.languageService=i,this._onDidChangeConfiguration=new j,this.configurationService.onDidChangeConfiguration(s=>{this._onDidChangeConfiguration.fire({affectedKeys:s.affectedKeys,affectsConfiguration:(o,r)=>s.affectsConfiguration(r)})})}getValue(e,t,i){const s=H.isIPosition(t)?t:null,o=s?typeof i=="string"?i:void 0:typeof t=="string"?t:void 0,r=e?this.getLanguage(e,s):void 0;return typeof o>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(o,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const i=this.modelService.getModel(e);return i?t?i.getLanguageIdAtPosition(t.lineNumber,t.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};Hj=hu([un(0,nt),un(1,gi),un(2,Di)],Hj);let jj=class{constructor(e){this.configurationService=e}getEOL(e,t){const i=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return i&&typeof i=="string"&&i!=="auto"?i:vo||ct?`
`:`\r
`}};jj=hu([un(0,nt)],jj);class hWe{publicLog2(){}}const XS=class XS{constructor(){const e=Le.from({scheme:XS.SCHEME,authority:"model",path:"/"});this.workspace={id:Sue,folders:[new $Re({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===XS.SCHEME?this.workspace.folders[0]:null}};XS.SCHEME="inmemory";let Vj=XS;function uP(n,e,t){if(!e||!(n instanceof dP))return;const i=[];Object.keys(e).forEach(s=>{CRe(s)&&i.push([`editor.${s}`,e[s]]),t&&yRe(s)&&i.push([`diffEditor.${s}`,e[s]])}),i.length>0&&n.updateValues(i)}let zj=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const i=Array.isArray(e)?e:dU.convert(e),s=new Map;for(const a of i){if(!(a instanceof mg))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=s.get(l);c||(c=[],s.set(l,c)),c.push(Ii.replaceMove(E.lift(a.textEdit.range),a.textEdit.text))}let o=0,r=0;for(const[a,l]of s)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),r+=1,o+=l.length;return{ariaSummary:ab(EH.bulkEditServiceSummary,o,r),isApplied:o>0}}};zj=hu([un(0,gi)],zj);class fWe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return Ya(e)}}let Uj=class extends pRe{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,i){if(!t){const s=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();s&&(t=s.getContainerDomNode())}return super.showContextView(e,t,i)}};Uj=hu([un(0,gm),un(1,kt)],Uj);class gWe{constructor(){this._neverEmitter=new j,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class mWe extends RH{constructor(){super()}}class pWe extends sWe{constructor(){super(new $Ee)}}let $j=class extends UH{constructor(e,t,i,s,o,r){super(e,t,i,s,o,r),this.configure({blockMouse:!1})}};$j=hu([un(0,Ps),un(1,rn),un(2,zh),un(3,Ft),un(4,pa),un(5,Ae)],$j);const qj={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let Kj=class extends HB{constructor(e,t,i,s,o){super(qj,e,t,i,s,o)}};Kj=hu([un(0,gi),un(1,yA),un(2,ws),un(3,Ri),un(4,ve)],Kj);class _We{async playSignal(e,t){}}mt(ws,pWe,0);mt(nt,dP,0);mt(yA,Hj,0);mt(vde,jj,0);mt(pb,Vj,0);mt(_y,fWe,0);mt(Ps,hWe,0);mt(OL,dWe,0);mt(Fz,cWe,0);mt(rn,Wj,0);mt(uu,pf,0);mt(Di,mWe,0);mt(wa,W3e,0);mt(gi,sj,0);mt(vU,YH,0);mt(Ae,Aj,0);mt(yue,lWe,0);mt(pm,Fj,0);mt(jl,sOe,0);mt(Jo,Kj,0);mt(jL,zj,0);mt(xue,gWe,0);mt(Zo,Oj,0);mt(Nr,Ej,0);mt(nl,Q5e,0);mt(oi,Bj,0);mt(Ft,xy,0);mt(il,kj,0);mt(zh,Uj,0);mt(Xo,GH,0);mt(qh,Mj,0);mt(Er,$j,0);mt(pa,Nj,0);mt(vm,_We,0);mt(Che,rWe,0);var We;(function(n){const e=new m1;for(const[l,c]of yQ())e.set(l,c);const t=new cP(e,!0);e.set(ke,t);function i(l){s||r({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof Ld?t.invokeFunction(d=>d.get(l)):c}n.get=i;let s=!1;const o=new j;function r(l){if(s)return t;s=!0;for(const[d,u]of yQ())e.get(d)||e.set(d,u);for(const d in l)if(l.hasOwnProperty(d)){const u=dt(d);e.get(u)instanceof Ld&&e.set(u,l[d])}const c=oWe();for(const d of c)try{t.createInstance(d)}catch(u){He(u)}return o.fire(),t}n.initialize=r;function a(l){if(s)return l();const c=new Q,d=c.add(o.event(()=>{d.dispose(),c.add(l())}));return c}n.withServices=a})(We||(We={}));function bWe(n,e){return new vWe(n,e)}class vWe extends gT{constructor(e,t){const i={amdModuleId:qj.amdModuleId,esmModuleLocation:qj.esmModuleLocation,label:t.label};super(i,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(i){return Promise.reject(i)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?sW(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(i=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.$fmr(a,l),o=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},r={};for(const a of i)r[a]=o(a,s);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const XL={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class ho{constructor(e,t,i,s){this.startColumn=e,this.endColumn=t,this.className=i,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const i=e.length,s=t.length;if(i!==s)return!1;for(let o=0;o<i;o++)if(!ho._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,i){if(e.length===0)return e;const s=t+1,o=i+1,r=i-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=o||(a[l++]=new ho(Math.max(1,c.startColumn-s+1),Math.min(r+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,i,s){if(e.length===0)return[];const o=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const u=d.startLineNumber===t?d.startColumn:i,h=d.endLineNumber===t?d.endColumn:s;o[r++]=new ho(u,h,c.inlineClassName,c.type)}return o}static _typeCompare(e,t){const i=[2,0,1,3];return i[e]-i[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const i=ho._typeCompare(e.type,t.type);return i!==0?i:e.className!==t.className?e.className<t.className?-1:1:0}}class dee{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.className=i,this.metadata=s}}class hP{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let i=0,s=e.length;i<s;i++)t|=e[i];return t}consumeLowerThan(e,t,i){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;i.push(new dee(t,this.stopOffsets[s],this.classNames.join(" "),hP._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(i.push(new dee(t,e-1,this.classNames.join(" "),hP._metadata(this.metadata))),t=e),t}insert(e,t,i){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(i);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,i);break}this.count++}}class wWe{static normalize(e,t){if(t.length===0)return[];const i=[],s=new hP;let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,d=l.endColumn;const u=l.className,h=l.type===1?2:l.type===2?4:0;if(c>1){const m=e.charCodeAt(c-2);Pn(m)&&c--}if(d>1){const m=e.charCodeAt(d-2);Pn(m)&&d--}const f=c-1,g=d-2;o=s.consumeLowerThan(f,o,i),s.count===0&&(o=f),s.insert(g,u,h)}return s.consumeLowerThan(1073741824,o,i),i}}class Kn{constructor(e,t,i,s){this.endIndex=e,this.type=t,this.metadata=i,this.containsRTL=s,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class mfe{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class wm{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f,g,m,_,b,v,w){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.continuesWithWrappedLine=s,this.isBasicASCII=o,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(ho.compare),this.tabSize=d,this.startVisibleColumn=u,this.spaceWidth=h,this.stopRenderingLineAfter=m,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=b,this.fontLigatures=v,this.selectionsOnLine=w&&w.sort((x,k)=>x.startOffset<k.startOffset?-1:1);const y=Math.abs(g-h),S=Math.abs(f-h);y<S?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&ho.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class pfe{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Dd{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,i,s){const o=(t<<16|i<<0)>>>0;this._data[e-1]=o,this._horizontalOffset[e-1]=s}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),i=Dd.getPartIndex(t),s=Dd.getCharIndex(t);return new pfe(i,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,i){if(this.length===0)return 0;const s=(e<<16|i<<0)>>>0;let o=0,r=this.length-1;for(;o+1<r;){const m=o+r>>>1,_=this._data[m];if(_===s)return m;_>s?r=m:o=m}if(o===r)return o;const a=this._data[o],l=this._data[r];if(a===s)return o;if(l===s)return r;const c=Dd.getPartIndex(a),d=Dd.getCharIndex(a),u=Dd.getPartIndex(l);let h;c!==u?h=t:h=Dd.getCharIndex(l);const f=i-d,g=h-i;return f<=g?o:r}}class Gj{constructor(e,t,i){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=i}}function JL(n,e){if(n.lineContent.length===0){if(n.lineDecorations.length>0){e.appendString("<span>");let t=0,i=0,s=0;for(const r of n.lineDecorations)(r.type===1||r.type===2)&&(e.appendString('<span class="'),e.appendString(r.className),e.appendString('"></span>'),r.type===1&&(s|=1,t++),r.type===2&&(s|=2,i++));e.appendString("</span>");const o=new Dd(1,t+i);return o.setColumnInfo(1,t,0,0),new Gj(o,!1,s)}return e.appendString("<span><span></span></span>"),new Gj(new Dd(0,0),!1,0)}return NWe(SWe(n),e)}class CWe{constructor(e,t,i,s){this.characterMapping=e,this.html=t,this.containsRTL=i,this.containsForeignElements=s}}function iO(n){const e=new n1(1e4),t=JL(n,e);return new CWe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class yWe{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f,g,m,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=i,this.len=s,this.isOverflowing=o,this.overflowingCharCount=r,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=u,this.containsRTL=h,this.spaceWidth=f,this.renderSpaceCharCode=g,this.renderWhitespace=m,this.renderControlCharacters=_}}function SWe(n){const e=n.lineContent;let t,i,s;n.stopRenderingLineAfter!==-1&&n.stopRenderingLineAfter<e.length?(t=!0,i=e.length-n.stopRenderingLineAfter,s=n.stopRenderingLineAfter):(t=!1,i=0,s=e.length);let o=xWe(e,n.containsRTL,n.lineTokens,n.fauxIndentLength,s);n.renderControlCharacters&&!n.isBasicASCII&&(o=LWe(e,o)),(n.renderWhitespace===4||n.renderWhitespace===1||n.renderWhitespace===2&&n.selectionsOnLine||n.renderWhitespace===3&&!n.continuesWithWrappedLine)&&(o=DWe(n,e,s,o));let r=0;if(n.lineDecorations.length>0){for(let a=0,l=n.lineDecorations.length;a<l;a++){const c=n.lineDecorations[a];c.type===3||c.type===1?r|=1:c.type===2&&(r|=2)}o=EWe(e,s,o,n.lineDecorations)}return n.containsRTL||(o=kWe(e,o,!n.isBasicASCII||n.fontLigatures)),new yWe(n.useMonospaceOptimizations,n.canUseHalfwidthRightwardsArrow,e,s,t,i,o,r,n.fauxIndentLength,n.tabSize,n.startVisibleColumn,n.containsRTL,n.spaceWidth,n.renderSpaceCharCode,n.renderWhitespace,n.renderControlCharacters)}function xWe(n,e,t,i,s){const o=[];let r=0;i>0&&(o[r++]=new Kn(i,"",0,!1));let a=i;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=i)continue;const u=t.getClassName(l);if(d>=s){const f=e?oy(n.substring(a,s)):!1;o[r++]=new Kn(s,u,0,f);break}const h=e?oy(n.substring(a,d)):!1;o[r++]=new Kn(d,u,0,h),a=d}return o}function kWe(n,e,t){let i=0;const s=[];let o=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(i+50<c){const d=l.type,u=l.metadata,h=l.containsRTL;let f=-1,g=i;for(let m=i;m<c;m++)n.charCodeAt(m)===32&&(f=m),f!==-1&&m-g>=50&&(s[o++]=new Kn(f+1,d,u,h),g=f+1,f=-1);g!==c&&(s[o++]=new Kn(c,d,u,h))}else s[o++]=l;i=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,d=c-i;if(d>50){const u=l.type,h=l.metadata,f=l.containsRTL,g=Math.ceil(d/50);for(let m=1;m<g;m++){const _=i+m*50;s[o++]=new Kn(_,u,h,f)}s[o++]=new Kn(c,u,h,f)}else s[o++]=l;i=c}return s}function _fe(n){return n<32?n!==9:n===127||n>=8234&&n<=8238||n>=8294&&n<=8297||n>=8206&&n<=8207||n===1564}function LWe(n,e){const t=[];let i=new Kn(0,"",0,!1),s=0;for(const o of e){const r=o.endIndex;for(;s<r;s++){const a=n.charCodeAt(s);_fe(a)&&(s>i.endIndex&&(i=new Kn(s,o.type,o.metadata,o.containsRTL),t.push(i)),i=new Kn(s+1,"mtkcontrol",o.metadata,!1),t.push(i))}s>i.endIndex&&(i=new Kn(r,o.type,o.metadata,o.containsRTL),t.push(i))}return t}function DWe(n,e,t,i){const s=n.continuesWithWrappedLine,o=n.fauxIndentLength,r=n.tabSize,a=n.startVisibleColumn,l=n.useMonospaceOptimizations,c=n.selectionsOnLine,d=n.renderWhitespace===1,u=n.renderWhitespace===3,h=n.renderSpaceWidth!==n.spaceWidth,f=[];let g=0,m=0,_=i[m].type,b=i[m].containsRTL,v=i[m].endIndex;const w=i.length;let y=!1,S=Zs(e),x;S===-1?(y=!0,S=t,x=t):x=Dc(e);let k=!1,D=0,N=c&&c[D],R=a%r;for(let B=o;B<t;B++){const z=e.charCodeAt(B);N&&B>=N.endOffset&&(D++,N=c&&c[D]);let F;if(B<S||B>x)F=!0;else if(z===9)F=!0;else if(z===32)if(d)if(k)F=!0;else{const K=B+1<t?e.charCodeAt(B+1):0;F=K===32||K===9}else F=!0;else F=!1;if(F&&c&&(F=!!N&&N.startOffset<=B&&N.endOffset>B),F&&u&&(F=y||B>x),F&&b&&B>=S&&B<=x&&(F=!1),k){if(!F||!l&&R>=r){if(h){const K=g>0?f[g-1].endIndex:o;for(let Z=K+1;Z<=B;Z++)f[g++]=new Kn(Z,"mtkw",1,!1)}else f[g++]=new Kn(B,"mtkw",1,!1);R=R%r}}else(B===v||F&&B>o)&&(f[g++]=new Kn(B,_,0,b),R=R%r);for(z===9?R=r:qg(z)?R+=2:R++,k=F;B===v&&(m++,m<w);)_=i[m].type,b=i[m].containsRTL,v=i[m].endIndex}let O=!1;if(k)if(s&&d){const B=t>0?e.charCodeAt(t-1):0,z=t>1?e.charCodeAt(t-2):0;B===32&&z!==32&&z!==9||(O=!0)}else O=!0;if(O)if(h){const B=g>0?f[g-1].endIndex:o;for(let z=B+1;z<=t;z++)f[g++]=new Kn(z,"mtkw",1,!1)}else f[g++]=new Kn(t,"mtkw",1,!1);else f[g++]=new Kn(t,_,0,b);return f}function EWe(n,e,t,i){i.sort(ho.compare);const s=wWe.normalize(n,i),o=s.length;let r=0;const a=[];let l=0,c=0;for(let u=0,h=t.length;u<h;u++){const f=t[u],g=f.endIndex,m=f.type,_=f.metadata,b=f.containsRTL;for(;r<o&&s[r].startOffset<g;){const v=s[r];if(v.startOffset>c&&(c=v.startOffset,a[l++]=new Kn(c,m,_,b)),v.endOffset+1<=g)c=v.endOffset+1,a[l++]=new Kn(c,m+" "+v.className,_|v.metadata,b),r++;else{c=g,a[l++]=new Kn(c,m+" "+v.className,_|v.metadata,b);break}}g>c&&(c=g,a[l++]=new Kn(c,m,_,b))}const d=t[t.length-1].endIndex;if(r<o&&s[r].startOffset===d)for(;r<o&&s[r].startOffset===d;){const u=s[r];a[l++]=new Kn(c,u.className,u.metadata,!1),r++}return a}function NWe(n,e){const t=n.fontIsMonospace,i=n.canUseHalfwidthRightwardsArrow,s=n.containsForeignElements,o=n.lineContent,r=n.len,a=n.isOverflowing,l=n.overflowingCharCount,c=n.parts,d=n.fauxIndentLength,u=n.tabSize,h=n.startVisibleColumn,f=n.containsRTL,g=n.spaceWidth,m=n.renderSpaceCharCode,_=n.renderWhitespace,b=n.renderControlCharacters,v=new Dd(r+1,c.length);let w=!1,y=0,S=h,x=0,k=0,D=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let N=0,R=c.length;N<R;N++){const O=c[N],B=O.endIndex,z=O.type,F=O.containsRTL,K=_!==0&&O.isWhitespace(),Z=K&&!t&&(z==="mtkw"||!s),re=y===B&&O.isPseudoAfter();if(x=0,e.appendString("<span "),F&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(Z?"mtkz":z),e.appendASCIICharCode(34),K){let q=0;{let J=y,ge=S;for(;J<B;J++){const Qe=(o.charCodeAt(J)===9?u-ge%u:1)|0;q+=Qe,J>=d&&(ge+=Qe)}}for(Z&&(e.appendString(' style="width:'),e.appendString(String(g*q)),e.appendString('px"')),e.appendASCIICharCode(62);y<B;y++){v.setColumnInfo(y+1,N-D,x,k),D=0;const J=o.charCodeAt(y);let ge,be;if(J===9){ge=u-S%u|0,be=ge,!i||be>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let Qe=2;Qe<=be;Qe++)e.appendCharCode(160)}else ge=2,be=1,e.appendCharCode(m),e.appendCharCode(8204);x+=ge,k+=be,y>=d&&(S+=be)}}else for(e.appendASCIICharCode(62);y<B;y++){v.setColumnInfo(y+1,N-D,x,k),D=0;const q=o.charCodeAt(y);let J=1,ge=1;switch(q){case 9:J=u-S%u,ge=J;for(let be=1;be<=J;be++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:b?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:qg(q)&&ge++,b&&q<32?e.appendCharCode(9216+q):b&&q===127?e.appendCharCode(9249):b&&_fe(q)?(e.appendString("[U+"),e.appendString(IWe(q)),e.appendString("]"),J=8,ge=J):e.appendCharCode(q)}x+=J,k+=ge,y>=d&&(S+=ge)}re?D++:D=0,y>=r&&!w&&O.isPseudoAfter()&&(w=!0,v.setColumnInfo(y+1,N,x,k)),e.appendString("</span>")}return w||v.setColumnInfo(r+1,c.length-1,x,k),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(p("showMore","Show more ({0})",TWe(l))),e.appendString("</span>")),e.appendString("</span>"),new Gj(v,f,s)}function IWe(n){return n.toString(16).toUpperCase().padStart(4,"0")}function TWe(n){return n<1024?p("overflow.chars","{0} chars",n):n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/1024/1024).toFixed(1)} MB`}class uee{constructor(e,t,i,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=i|0,this.height=s|0}}class PWe{constructor(e,t){this.tabSize=e,this.data=t}}class XU{constructor(e,t,i,s,o,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=i,this.maxColumn=s,this.startVisibleColumn=o,this.tokens=r,this.inlineDecorations=a}}class ga{constructor(e,t,i,s,o,r,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=i,this.continuesWithWrappedLine=s,this.isBasicASCII=ga.isBasicASCII(i,r),this.containsRTL=ga.containsRTL(i,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?TL(e):!0}static containsRTL(e,t,i){return!t&&i?oy(e):!1}}class CS{constructor(e,t,i){this.range=e,this.inlineClassName=t,this.type=i}}class MWe{constructor(e,t,i,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new CS(new E(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class bfe{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class Ck{constructor(e,t,i){this.color=e,this.zIndex=t,this.data=i}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&Li(e.data,t.data)}static equalsArr(e,t){return Li(e,t,Ck.equals)}}function RWe(n){return Array.isArray(n)}function AWe(n){return!RWe(n)}function vfe(n){return typeof n=="string"}function hee(n){return!vfe(n)}function cp(n){return!n}function ph(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function fee(n){return n.replace(/[&<>'"_]/g,"-")}function OWe(n,e){console.log(`${n.languageId}: ${e}`)}function _i(n,e){return new Error(`${n.languageId}: ${e}`)}function Ef(n,e,t,i,s){const o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(o,function(a,l,c,d,u,h,f,g,m){return cp(c)?cp(d)?!cp(u)&&u<i.length?ph(n,i[u]):!cp(f)&&n&&typeof n[f]=="string"?n[f]:(r===null&&(r=s.split("."),r.unshift(s)),!cp(h)&&h<r.length?ph(n,r[h]):""):ph(n,t):"$"})}function FWe(n,e,t){const i=/\$[sS](\d\d?)/g;let s=null;return e.replace(i,function(o,r){return s===null&&(s=t.split("."),s.unshift(t)),!cp(r)&&r<s.length?ph(n,s[r]):""})}function wE(n,e){let t=e;for(;t&&t.length>0;){const i=n.tokenizer[t];if(i)return i;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function WWe(n,e){let t=e;for(;t&&t.length>0;){if(n.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}var BWe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},HWe=function(n,e){return function(t,i){e(t,i,n)}},Yj;const wfe=5,g2=class g2{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new uC(e,t);let i=uC.getStackElementId(e);i.length>0&&(i+="|"),i+=t;let s=this._entries[i];return s||(s=new uC(e,t),this._entries[i]=s,s)}};g2._INSTANCE=new g2(wfe);let yk=g2;class uC{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return uC._equals(this,e)}push(e){return yk.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return yk.create(this.parent,e)}}class dw{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new dw(this.languageId,this.state)}}const m2=class m2{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new yS(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new yS(e,t);const i=uC.getStackElementId(e);let s=this._entries[i];return s||(s=new yS(e,null),this._entries[i]=s,s)}};m2._INSTANCE=new m2(wfe);let Nf=m2;class yS{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Nf.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof yS)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class jWe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new Ax(e,t,this._languageId)))}nestedLanguageTokenize(e,t,i,s){const o=i.languageId,r=i.state,a=Hi.get(o);if(!a)return this.enterLanguage(o),this.emit(s,""),r;const l=a.tokenize(e,t,r);if(s!==0)for(const c of l.tokens)this._tokens.push(new Ax(c.offset+s,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new az(this._tokens,e)}}class fP{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const i=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(e),this._tokens.push(i))}static _merge(e,t,i){const s=e!==null?e.length:0,o=t.length,r=i!==null?i.length:0;if(s===0&&o===0&&r===0)return new Uint32Array(0);if(s===0&&o===0)return i;if(o===0&&r===0)return e;const a=new Uint32Array(s+o+r);e!==null&&a.set(e);for(let l=0;l<o;l++)a[s+l]=t[l];return i!==null&&a.set(i,s+o),a}nestedLanguageTokenize(e,t,i,s){const o=i.languageId,r=i.state,a=Hi.get(o);if(!a)return this.enterLanguage(o),this.emit(s,""),r;const l=a.tokenizeEncoded(e,t,r);if(s!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=s;return this._prependTokens=fP._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new tA(fP._merge(this._prependTokens,this._tokens,null),e)}}let Sk=Yj=class extends U{constructor(e,t,i,s,o){super(),this._configurationService=o,this._languageService=e,this._standaloneThemeService=t,this._languageId=i,this._lexer=s,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._register(Hi.onDidChange(a=>{if(r)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const u=a.changedLanguages[c];if(this._embeddedLanguages[u]){l=!0;break}}l&&(r=!0,Hi.handleChange([this._languageId]),r=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const i=Hi.get(t);if(i){if(i instanceof Yj){const s=i.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}Hi.isResolved(t)||e.push(Hi.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=yk.create(null,this._lexer.start);return Nf.create(e,null)}tokenize(e,t,i){if(e.length>=this._maxTokenizationLineLength)return lU(this._languageId,i);const s=new jWe,o=this._tokenize(e,t,i,s);return s.finalize(o)}tokenizeEncoded(e,t,i){if(e.length>=this._maxTokenizationLineLength)return WA(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);const s=new fP(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,i,s);return s.finalize(o)}_tokenize(e,t,i,s){return i.embeddedLanguageData?this._nestedTokenize(e,t,i,0,s):this._myTokenize(e,t,i,0,s)}_findLeavingNestedLanguageOffset(e,t){let i=this._lexer.tokenizer[t.stack.state];if(!i&&(i=wE(this._lexer,t.stack.state),!i))throw _i(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,o=!1;for(const r of i){if(!hee(r.action)||r.action.nextEmbedded!=="@pop")continue;o=!0;let a=r.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&r.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!o)throw _i(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,i,s,o){const r=this._findLeavingNestedLanguageOffset(e,i);if(r===-1){const c=o.nestedLanguageTokenize(e,t,i.embeddedLanguageData,s);return Nf.create(i.stack,new dw(i.embeddedLanguageData.languageId,c))}const a=e.substring(0,r);a.length>0&&o.nestedLanguageTokenize(a,!1,i.embeddedLanguageData,s);const l=e.substring(r);return this._myTokenize(l,t,i,s+r,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,i,s,o){o.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=i.embeddedLanguageData,d=i.stack,u=0,h=null,f=!0;for(;f||u<l;){const g=u,m=d.depth,_=h?h.groups.length:0,b=d.state;let v=null,w=null,y=null,S=null,x=null;if(h){v=h.matches;const N=h.groups.shift();w=N.matched,y=N.action,S=h.rule,h.groups.length===0&&(h=null)}else{if(!f&&u>=l)break;f=!1;let N=this._lexer.tokenizer[b];if(!N&&(N=wE(this._lexer,b),!N))throw _i(this._lexer,"tokenizer state is not defined: "+b);const R=a.substr(u);for(const O of N)if((u===0||!O.matchOnlyAtLineStart)&&(v=R.match(O.resolveRegex(b)),v)){w=v[0],y=O.action;break}}if(v||(v=[""],w=""),y||(u<l&&(v=[a.charAt(u)],w=v[0]),y=this._lexer.defaultToken),w===null)break;for(u+=w.length;AWe(y)&&hee(y)&&y.test;)y=y.test(w,v,b,u===l);let k=null;if(typeof y=="string"||Array.isArray(y))k=y;else if(y.group)k=y.group;else if(y.token!==null&&y.token!==void 0){if(y.tokenSubst?k=Ef(this._lexer,y.token,w,v,b):k=y.token,y.nextEmbedded)if(y.nextEmbedded==="@pop"){if(!c)throw _i(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw _i(this._lexer,"cannot enter embedded language from within an embedded language");x=Ef(this._lexer,y.nextEmbedded,w,v,b)}if(y.goBack&&(u=Math.max(0,u-y.goBack)),y.switchTo&&typeof y.switchTo=="string"){let N=Ef(this._lexer,y.switchTo,w,v,b);if(N[0]==="@"&&(N=N.substr(1)),wE(this._lexer,N))d=d.switchTo(N);else throw _i(this._lexer,"trying to switch to a state '"+N+"' that is undefined in rule: "+this._safeRuleName(S))}else{if(y.transform&&typeof y.transform=="function")throw _i(this._lexer,"action.transform not supported");if(y.next)if(y.next==="@push"){if(d.depth>=this._lexer.maxStack)throw _i(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(b)}else if(y.next==="@pop"){if(d.depth<=1)throw _i(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(S));d=d.pop()}else if(y.next==="@popall")d=d.popall();else{let N=Ef(this._lexer,y.next,w,v,b);if(N[0]==="@"&&(N=N.substr(1)),wE(this._lexer,N))d=d.push(N);else throw _i(this._lexer,"trying to set a next state '"+N+"' that is undefined in rule: "+this._safeRuleName(S))}}y.log&&typeof y.log=="string"&&OWe(this._lexer,this._lexer.languageId+": "+Ef(this._lexer,y.log,w,v,b))}if(k===null)throw _i(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(S));const D=N=>{const R=this._languageService.getLanguageIdByLanguageName(N)||this._languageService.getLanguageIdByMimeType(N)||N,O=this._getNestedEmbeddedLanguageData(R);if(u<l){const B=e.substr(u);return this._nestedTokenize(B,t,Nf.create(d,O),s+u,o)}else return Nf.create(d,O)};if(Array.isArray(k)){if(h&&h.groups.length>0)throw _i(this._lexer,"groups cannot be nested: "+this._safeRuleName(S));if(v.length!==k.length+1)throw _i(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(S));let N=0;for(let R=1;R<v.length;R++)N+=v[R].length;if(N!==w.length)throw _i(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(S));h={rule:S,matches:v,groups:[]};for(let R=0;R<k.length;R++)h.groups[R]={action:k[R],matched:v[R+1]};u-=w.length;continue}else{if(k==="@rematch"&&(u-=w.length,w="",v=null,k="",x!==null))return D(x);if(w.length===0){if(l===0||m!==d.depth||b!==d.state||(h?h.groups.length:0)!==_)continue;throw _i(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(S))}let N=null;if(vfe(k)&&k.indexOf("@brackets")===0){const R=k.substr(9),O=VWe(this._lexer,w);if(!O)throw _i(this._lexer,"@brackets token returned but no bracket defined as: "+w);N=fee(O.token+R)}else{const R=k===""?"":k+this._lexer.tokenPostfix;N=fee(R)}g<r&&o.emit(g+s,N)}if(x!==null)return D(x)}return Nf.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new dw(e,py);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Hi.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Hi.get(e);return t?new dw(e,t.getInitialState()):new dw(e,py)}};Sk=Yj=BWe([HWe(4,nt)],Sk);function VWe(n,e){if(!e)return null;e=ph(n,e);const t=n.brackets;for(const i of t){if(i.open===e)return{token:i.token,bracketType:1};if(i.close===e)return{token:i.token,bracketType:-1}}return null}const B4=Vh("standaloneColorizer",{createHTML:n=>n});class JU{static colorizeElement(e,t,i,s){s=s||{};const o=s.theme||"vs",r=s.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(o);const l=i.firstChild?i.firstChild.nodeValue:"";i.className+=" "+o;const c=d=>{const u=(B4==null?void 0:B4.createHTML(d))??d;i.innerHTML=u};return this.colorize(t,l||"",a,s).then(c,d=>console.error(d))}static async colorize(e,t,i,s){const o=e.languageIdCodec;let r=4;s&&typeof s.tabSize=="number"&&(r=s.tabSize),gz(t)&&(t=t.substr(1));const a=ru(t);if(!e.isRegisteredLanguageId(i))return gee(a,r,o);const l=await Hi.getOrCreate(i);return l?zWe(a,r,l,o):gee(a,r,o)}static colorizeLine(e,t,i,s,o=4){const r=ga.isBasicASCII(e,t),a=ga.containsRTL(e,r,i);return iO(new wm(!1,!0,e,!1,r,a,0,s,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,i=4){const s=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,i)}}function zWe(n,e,t,i){return new Promise((s,o)=>{const r=()=>{const a=UWe(n,e,t,i);if(t instanceof Sk){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,o);return}}s(a)};r()})}function gee(n,e,t){let i=[];const o=new Uint32Array(2);o[0]=0,o[1]=33587200;for(let r=0,a=n.length;r<a;r++){const l=n[r];o[0]=l.length;const c=new Xn(o,l,t),d=ga.isBasicASCII(l,!0),u=ga.containsRTL(l,d,!0),h=iO(new wm(!1,!0,l,!1,d,u,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(h.html),i.push("<br/>")}return i.join("")}function UWe(n,e,t,i){let s=[],o=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r],c=t.tokenizeEncoded(l,!0,o);Xn.convertToEndOffset(c.tokens,l.length);const d=new Xn(c.tokens,l,i),u=ga.isBasicASCII(l,!0),h=ga.containsRTL(l,u,!0),f=iO(new wm(!1,!0,l,!1,u,h,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(f.html),s.push("<br/>"),o=c.endState}return s.join("")}var $We=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qWe=function(n,e){return function(t,i){e(t,i,n)}},RC;let gP=(RC=class{constructor(e,t){}dispose(){}},RC.ID="editor.contrib.markerDecorations",RC);gP=$We([qWe(1,vU)],gP);wt(gP.ID,gP,0);class Cfe extends U{constructor(e,t){super(),this._onDidChange=this._register(new j),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,s=!1;const o=()=>{if(i&&!s)try{i=!1,s=!0,t()}finally{xr(Te(this._referenceDomElement),()=>{s=!1,o()})}};this._resizeObserver=new ResizeObserver(r=>{r&&r[0]&&r[0].contentRect?e={width:r[0].contentRect.width,height:r[0].contentRect.height}:e=null,i=!0,o()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,s=0;t?(i=t.width,s=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,s=this._referenceDomElement.clientHeight),i=Math.max(5,i),s=Math.max(5,s),(this._width!==i||this._height!==s)&&(this._width=i,this._height=s,e&&this._onDidChange.fire())}}const Tw=class Tw{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Tw._read(e,this.key),i=o=>Tw._read(e,o),s=(o,r)=>Tw._write(e,o,r);this.migrate(t,i,s)}static _read(e,t){if(typeof e>"u")return;const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);return this._read(e[s],t.substring(i+1))}return e[t]}static _write(e,t,i){const s=t.indexOf(".");if(s>=0){const o=t.substring(0,s);e[o]=e[o]||{},this._write(e[o],t.substring(s+1),i);return}e[t]=i}};Tw.items=[];let xk=Tw;function qc(n,e){xk.items.push(new xk(n,e))}function Ir(n,e){qc(n,(t,i,s)=>{if(typeof t<"u"){for(const[o,r]of e)if(t===o){s(n,r);return}}})}function KWe(n){xk.items.forEach(e=>e.apply(n))}Ir("wordWrap",[[!0,"on"],[!1,"off"]]);Ir("lineNumbers",[[!0,"on"],[!1,"off"]]);Ir("cursorBlinking",[["visible","solid"]]);Ir("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Ir("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Ir("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Ir("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Ir("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Ir("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Ir("autoIndent",[[!1,"advanced"],[!0,"full"]]);Ir("matchBrackets",[[!0,"always"],[!1,"never"]]);Ir("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Ir("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Ir("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);Ir("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);qc("autoClosingBrackets",(n,e,t)=>{n===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});qc("renderIndentGuides",(n,e,t)=>{typeof n<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!n))});qc("highlightActiveIndentGuide",(n,e,t)=>{typeof n<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!n))});const GWe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};qc("suggest.filteredTypes",(n,e,t)=>{if(n&&typeof n=="object"){for(const i of Object.entries(GWe))n[i[0]]===!1&&typeof e(`suggest.${i[1]}`)>"u"&&t(`suggest.${i[1]}`,!1);t("suggest.filteredTypes",void 0)}});qc("quickSuggestions",(n,e,t)=>{if(typeof n=="boolean"){const i=n?"on":"off";t("quickSuggestions",{comments:i,strings:i,other:i})}});qc("experimental.stickyScroll.enabled",(n,e,t)=>{typeof n=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",n))});qc("experimental.stickyScroll.maxLineCount",(n,e,t)=>{typeof n=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",n))});qc("codeActionsOnSave",(n,e,t)=>{if(n&&typeof n=="object"){let i=!1;const s={};for(const o of Object.entries(n))typeof o[1]=="boolean"?(i=!0,s[o[0]]=o[1]?"explicit":"never"):s[o[0]]=o[1];i&&t("codeActionsOnSave",s)}});qc("codeActionWidget.includeNearbyQuickfixes",(n,e,t)=>{typeof n=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",n))});qc("lightbulb.enabled",(n,e,t)=>{typeof n=="boolean"&&t("lightbulb.enabled",n?void 0:"off")});class YWe{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new j,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const ky=new YWe;var ZWe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},QWe=function(n,e){return function(t,i){e(t,i,n)}};let Zj=class extends U{constructor(e,t,i,s,o){super(),this._accessibilityService=o,this._onDidChange=this._register(new j),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new j),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Vle,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new Cfe(s,i.dimension)),this._targetWindowId=Te(s).vscodeWindowId,this._rawOptions=mee(i),this._validatedOptions=If.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Ma.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(ky.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(SB.onDidChange(()=>this._recomputeOptions())),this._register(Vx.getInstance(Te(s)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=If.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=Vp.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),s={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:ky.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return If.computeOptions(this._validatedOptions,s)}_readEnvConfiguration(){return{extraEditorClassName:JWe(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:jp||$a,pixelRatio:Vx.getInstance(rQ(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return SB.readFontInfo(rQ(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=mee(e);If.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=If.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=XWe(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};Zj=ZWe([QWe(4,Nr)],Zj);function XWe(n){let e=0;for(;n;)n=Math.floor(n/10),e++;return e||1}function JWe(){let n="";return!Eh&&!mce&&(n+="no-user-select "),Eh&&(n+="no-minimap-shadow ",n+="enable-user-select "),ct&&(n+="mac "),n}class eBe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class tBe{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class If{static validateOptions(e){const t=new eBe;for(const i of Jv){const s=i.name==="_never_"?void 0:e[i.name];t._write(i.id,i.validate(s))}return t}static computeOptions(e,t){const i=new tBe;for(const s of Jv)i._write(s.id,s.compute(t,i,e._read(s.id)));return i}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Li(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!If._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let s=!1;for(const o of Jv){const r=!If._deepEquals(e._read(o.id),t._read(o.id));i[o.id]=r,r&&(s=!0)}return s?new jle(i):null}static applyUpdate(e,t){let i=!1;for(const s of Jv)if(t.hasOwnProperty(s.name)){const o=s.applyUpdate(e[s.name],t[s.name]);e[s.name]=o.newValue,i=i||o.didChange}return i}}function mee(n){const e=Bu(n);return KWe(e),e}var Qf;(function(n){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},i={...e},s={...e};let o=0;const r={keydown:0,input:0,render:0};function a(){b(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),r.keydown=1,queueMicrotask(l)}n.onKeyDown=a;function l(){r.keydown===1&&(performance.mark("keydown/end"),r.keydown=2)}function c(){performance.mark("input/start"),r.input=1,_()}n.onBeforeInput=c;function d(){r.input===0&&c(),queueMicrotask(u)}n.onInput=d;function u(){r.input===1&&(performance.mark("input/end"),r.input=2)}function h(){b()}n.onKeyUp=h;function f(){b()}n.onSelectionChange=f;function g(){r.keydown===2&&r.input===2&&r.render===0&&(performance.mark("render/start"),r.render=1,queueMicrotask(m),_())}n.onRenderStart=g;function m(){r.render===1&&(performance.mark("render/end"),r.render=2)}function _(){setTimeout(b)}function b(){r.keydown===2&&r.input===2&&r.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),v("keydown",e),v("input",t),v("render",i),v("inputlatency",s),o++,w())}function v(k,D){const N=performance.getEntriesByName(k)[0].duration;D.total+=N,D.min=Math.min(D.min,N),D.max=Math.max(D.max,N)}function w(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),r.keydown=0,r.input=0,r.render=0}function y(){if(o===0)return;const k={keydown:S(e),input:S(t),render:S(i),total:S(s),sampleCount:o};return x(e),x(t),x(i),x(s),o=0,k}n.getAndClearMeasurements=y;function S(k){return{average:k.total/o,max:k.max,min:k.min}}function x(k){k.total=0,k.min=Number.MAX_VALUE,k.max=0}})(Qf||(Qf={}));class nO{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new yfe(this.x-e.scrollX,this.y-e.scrollY)}}class yfe{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new nO(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class iBe{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s,this._editorPagePositionBrand=void 0}}class nBe{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function e$(n){const e=Qi(n);return new iBe(e.left,e.top,e.width,e.height)}function t$(n,e,t){const i=e.width/n.offsetWidth,s=e.height/n.offsetHeight,o=(t.x-e.x)/i,r=(t.y-e.y)/s;return new nBe(o,r)}class tm extends Sl{constructor(e,t,i){super(Te(i),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new nO(this.posx,this.posy),this.editorPos=e$(i),this.relativePos=t$(i,this.editorPos,this.pos)}}class sBe{constructor(e){this._editorViewDomNode=e}_create(e){return new tm(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return G(e,"contextmenu",i=>{t(this._create(i))})}onMouseUp(e,t){return G(e,"mouseup",i=>{t(this._create(i))})}onMouseDown(e,t){return G(e,le.MOUSE_DOWN,i=>{t(this._create(i))})}onPointerDown(e,t){return G(e,le.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onMouseLeave(e,t){return G(e,le.MOUSE_LEAVE,i=>{t(this._create(i))})}onMouseMove(e,t){return G(e,"mousemove",i=>t(this._create(i)))}}class oBe{constructor(e){this._editorViewDomNode=e}_create(e){return new tm(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return G(e,"pointerup",i=>{t(this._create(i))})}onPointerDown(e,t){return G(e,le.POINTER_DOWN,i=>{t(this._create(i),i.pointerId)})}onPointerLeave(e,t){return G(e,le.POINTER_LEAVE,i=>{t(this._create(i))})}onPointerMove(e,t){return G(e,"pointermove",i=>t(this._create(i)))}}class rBe extends U{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new r1),this._keydownListener=null}startMonitoring(e,t,i,s,o){this._keydownListener=Fi(e.ownerDocument,"keydown",r=>{r.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,i,r=>{s(new tm(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),o(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}const p2=class p2{constructor(e){this._editor=e,this._instanceId=++p2._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new $t(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let i=this._rules.get(t);if(!i){const s=this._counter++;i=new aBe(t,`dyn-rule-${this._instanceId}-${s}`,iT(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,i)}return i}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};p2._idPool=0;let mP=p2;class aBe{constructor(e,t,i,s){this.key=e,this.className=t,this.properties=s,this._referenceCount=0,this._styleElementDisposables=new Q,this._styleElement=ha(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let i=`.${e} {`;for(const s in t){const o=t[s];let r;typeof o=="object"?r=pe(o.id):r=o;const a=lBe(s);i+=`
	${a}: ${r};`}return i+=`
}`,i}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function lBe(n){return n.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class eD extends U{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let i=0,s=e.length;i<s;i++){const o=e[i];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}class Tr extends eD{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class jc{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const i=[];let s=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[s++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(s);for(let r=0;r<s;r++)o[r]=i[s-r-1];return o}}class cBe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class dBe extends cBe{constructor(e,t,i){super(e,t),this._renderingContextBrand=void 0,this._viewLines=i}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class uBe{constructor(e,t,i,s){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=i,this.continuesOnNextLine=s}}class sO{static from(e){const t=new Array(e.length);for(let i=0,s=e.length;i<s;i++){const o=e[i];t[i]=new sO(o.left,o.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class Zp{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class hBe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class pee{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class VN{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,i,s,o){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(i,s),r.getClientRects()}catch{return null}finally{this._detachRange(r,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Zp.compare);const t=[];let i=0,s=e[0];for(let o=1,r=e.length;o<r;o++){const a=e[o];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[i++]=s,s=a)}return t[i++]=s,t}static _createHorizontalRangesFromClientRects(e,t,i){if(!e||e.length===0)return null;const s=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];s[o]=new Zp(Math.max(0,(a.left-t)/i),a.width/i)}return this._mergeAdjacentRanges(s)}static readHorizontalRanges(e,t,i,s,o,r){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),s=Math.min(l,Math.max(0,s)),t===s&&i===o&&i===0&&!e.children[t].firstChild){const h=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,r.clientRectDeltaLeft,r.clientRectScale)}t!==s&&s>0&&o===0&&(s--,o=1073741824);let c=e.children[t].firstChild,d=e.children[s].firstChild;if((!c||!d)&&(!c&&i===0&&t>0&&(c=e.children[t-1].firstChild,i=1073741824),!d&&o===0&&s>0&&(d=e.children[s-1].firstChild,o=1073741824)),!c||!d)return null;i=Math.min(c.textContent.length,Math.max(0,i)),o=Math.min(d.textContent.length,Math.max(0,o));const u=this._readClientRects(c,i,d,o,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,r.clientRectDeltaLeft,r.clientRectScale)}}const fBe=function(){return xc?!0:!(vo||$a||Eh)}();let hC=!0;class _ee{constructor(e,t){this.themeType=t;const i=e.options,s=i.get(50);i.get(38)==="off"?this.renderWhitespace=i.get(100):this.renderWhitespace="none",this.renderControlCharacters=i.get(95),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(118),this.fontLigatures=i.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const _2=class _2{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Ot(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Ec(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,i,s,o){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=s.getViewLineRenderingData(e),a=this._options,l=ho.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let c=null;if(Ec(a.themeType)||this._options.renderWhitespace==="selection"){const f=s.selections;for(const g of f){if(g.endLineNumber<e||g.startLineNumber>e)continue;const m=g.startLineNumber===e?g.startColumn:r.minColumn,_=g.endLineNumber===e?g.endColumn:r.maxColumn;m<_&&(Ec(a.themeType)&&l.push(new ho(m,_,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new mfe(m-1,_-1))))}}const d=new wm(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,l,r.tabSize,r.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==Vg.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(i)),o.appendString('px;" class="'),o.appendString(_2.CLASS_NAME),o.appendString('">');const u=JL(d,o);o.appendString("</div>");let h=null;return hC&&fBe&&r.isBasicASCII&&a.useMonospaceOptimizations&&u.containsForeignElements===0&&(h=new CE(this._renderedViewLine?this._renderedViewLine.domNode:null,d,u.characterMapping)),h||(h=xfe(this._renderedViewLine?this._renderedViewLine.domNode:null,d,u.characterMapping,u.containsRTL,u.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(i))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof CE:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof CE?this._renderedViewLine.monospaceAssumptionsAreValid():hC}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof CE&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,i,s){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));const o=this._renderedViewLine.input.stopRenderingLineAfter;if(o!==-1&&t>o+1&&i>o+1)return new pee(!0,[new Zp(this.getWidth(s),0)]);o!==-1&&t>o+1&&(t=o+1),o!==-1&&i>o+1&&(i=o+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,i,s);return r&&r.length>0?new pee(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};_2.CLASS_NAME="view-line";let Gu=_2;class CE{constructor(e,t,i){this._cachedWidth=-1,this.domNode=e,this.input=t;const s=Math.floor(t.lineContent.length/300);if(s>0){this._keyColumnPixelOffsetCache=new Float32Array(s);for(let o=0;o<s;o++)this._keyColumnPixelOffsetCache[o]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return hC;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),hC=!1)}return hC}toSlowRenderedLine(){return xfe(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,i,s){const o=this._getColumnPixelOffset(e,t,s),r=this._getColumnPixelOffset(e,i,s);return[new Zp(o,r-o)]}_getColumnPixelOffset(e,t,i){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const s=Math.floor((t-1)/300)-1,o=(s+1)*300+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[s],r===-1&&(r=this._actualReadPixelOffset(e,o,i),this._keyColumnPixelOffsetCache[s]=r)),r===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(o),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,i){if(!this.domNode)return-1;const s=this._characterMapping.getDomPosition(t),o=VN.readHorizontalRanges(this._getReadingTarget(this.domNode),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i);return!o||o.length===0?-1:o[0].left}getColumnOfNodeOffset(e,t){return i$(this._characterMapping,e,t)}}class Sfe{constructor(e,t,i,s,o){if(this.domNode=e,this.input=t,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,i,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,s);if(o===-1)return null;const r=this._readPixelOffset(this.domNode,e,i,s);return r===-1?null:[new Zp(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,i,s)}_readVisibleRangesForRange(e,t,i,s,o){if(i===s){const r=this._readPixelOffset(e,t,i,o);return r===-1?null:[new Zp(r,0)]}else return this._readRawVisibleRangesForRange(e,i,s,o)}_readPixelOffset(e,t,i,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(s);const o=this._getReadingTarget(e);return o.firstChild?(s.markDidDomLayout(),o.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[i];if(o!==-1)return o;const r=this._actualReadPixelOffset(e,t,i,s);return this._pixelOffsetCache[i]=r,r}return this._actualReadPixelOffset(e,t,i,s)}_actualReadPixelOffset(e,t,i,s){if(this._characterMapping.length===0){const l=VN.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s);return!l||l.length===0?-1:l[0].left}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(s);const o=this._characterMapping.getDomPosition(i),r=VN.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,s);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(i),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,i,s){if(t===1&&i===this._characterMapping.length)return[new Zp(0,this.getWidth(s))];const o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(i);return VN.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,s)}getColumnOfNodeOffset(e,t){return i$(this._characterMapping,e,t)}}class gBe extends Sfe{_readVisibleRangesForRange(e,t,i,s,o){const r=super._readVisibleRangesForRange(e,t,i,s,o);if(!r||r.length===0||i===s||i===1&&s===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,o);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}const xfe=function(){return jp?mBe:pBe}();function mBe(n,e,t,i,s){return new gBe(n,e,t,i,s)}function pBe(n,e,t,i,s){return new Sfe(n,e,t,i,s)}function i$(n,e,t){const i=e.textContent.length;let s=-1;for(;e;)e=e.previousSibling,s++;return n.getColumn(new pfe(s,t),i)}class kk{static whitespaceVisibleColumn(e,t,i){const s=e.length;let o=0,r=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[r,a,o];switch(o%i===0&&(r=l,a=o),e.charCodeAt(l)){case 32:o+=1;break;case 9:o=yn.nextRenderTabStop(o,i);break;default:return[-1,-1,-1]}}return t===s?[r,a,o]:[-1,-1,-1]}static atomicPosition(e,t,i,s){const o=e.length,[r,a,l]=kk.whitespaceVisibleColumn(e,t,i);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%i===0)return t;c=l%i<=i/2;break}if(c){if(r===-1)return-1;let h=a;for(let f=r;f<o;++f){if(h===a+i)return r;switch(e.charCodeAt(f)){case 32:h+=1;break;case 9:h=yn.nextRenderTabStop(h,i);break;default:return-1}}return h===a+i?r:-1}const d=yn.nextRenderTabStop(l,i);let u=l;for(let h=t;h<o;h++){if(u===d)return h;switch(e.charCodeAt(h)){case 32:u+=1;break;case 9:u=yn.nextRenderTabStop(u,i);break;default:return-1}}return u===d?o:-1}}class hf{constructor(e=null){this.hitTarget=e,this.type=0}}class kfe{get hitTarget(){return this.spanNode}constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}var dp;(function(n){function e(t,i,s){const o=t.getPositionFromDOMInfo(i,s);return o?new kfe(o,i,null):new hf(i)}n.createFromDOMInfo=e})(dp||(dp={}));class _Be{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class js{static _deduceRage(e,t=null){return!t&&e?new E(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,s,o,r){return{type:e,element:t,mouseColumn:i,position:s,range:o,detail:r}}static createViewZone(e,t,i,s,o){return{type:e,element:t,mouseColumn:i,position:s,range:this._deduceRage(s),detail:o}}static createContentText(e,t,i,s,o){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,s),detail:o}}static createContentEmpty(e,t,i,s){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:s}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,s){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:s}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class to{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class Ly{constructor(e,t,i){this.viewModel=e.viewModel;const s=e.configuration.options;this.layoutInfo=s.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(67),this.stickyTabStops=s.get(117),this.typicalHalfwidthCharacterWidth=s.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Ly.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const s=i.verticalOffset+i.height/2,o=e.viewModel.getLineCount();let r=null,a,l=null;return i.afterLineNumber!==o&&(l=new H(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(r=new H(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),l===null?a=r:r===null?a=l:t<s?a=r:a=l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.viewModel.getLineCount(),o=this._context.viewModel.getLineMaxColumn(s);return{range:new E(s,o,s,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new E(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Ly._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class bBe{constructor(e,t,i,s){this.editorPos=t,this.pos=i,this.relativePos=s,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Hs._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class vBe extends bBe{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=jc.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,i,s,o){super(e,t,i,s),this.hitTestResult=new Oc(()=>Hs.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=o;const r=!!this._eventTarget;this._useHitTestTarget=!r}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?yn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return js.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return js.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,s){return js.createMargin(e,this.target,this._getMouseColumn(t),t,i,s)}fulfillViewZone(e,t,i){return js.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return js.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return js.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return js.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return js.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return js.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const bee={isAfterLines:!0};function H4(n){return{isAfterLines:!1,horizontalDistanceToText:n}}class Hs{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=jc.collect(t,this._viewHelper.viewDomNode);return!!(to.isChildOfContentWidgets(i)||to.isChildOfOverflowingContentWidgets(i)||to.isChildOfOverlayWidgets(i)||to.isChildOfOverflowingOverlayWidgets(i))}createMouseTarget(e,t,i,s,o){const r=new Ly(this._context,this._viewHelper,e),a=new vBe(r,t,i,s,o);try{const l=Hs._createMouseTarget(r,a);if(l.type===6&&r.stickyTabStops&&l.position!==null){const c=Hs._snapToSoftTabBoundary(l.position,r.viewModel),d=E.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,d,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const i=t;let s=null;return!to.isChildOfOverflowGuard(t.targetPath)&&!to.isChildOfOverflowingContentWidgets(t.targetPath)&&!to.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(s=s||t.fulfillUnknown()),s=s||Hs._hitTestContentWidget(e,i),s=s||Hs._hitTestOverlayWidget(e,i),s=s||Hs._hitTestMinimap(e,i),s=s||Hs._hitTestScrollbarSlider(e,i),s=s||Hs._hitTestViewZone(e,i),s=s||Hs._hitTestMargin(e,i),s=s||Hs._hitTestViewCursor(e,i),s=s||Hs._hitTestTextArea(e,i),s=s||Hs._hitTestViewLines(e,i),s=s||Hs._hitTestScrollbar(e,i),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(to.isChildOfContentWidgets(t.targetPath)||to.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(to.isChildOfOverlayWidgets(t.targetPath)||to.isChildOfOverflowingOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const s of i)if(t.target===s.domNode)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const r of i){if(s<r.contentLeft||s>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=o&&o<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const s=t.isInContentArea?8:5;return t.fulfillViewZone(s,i.position,i)}return null}static _hitTestTextArea(e,t){return to.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=i.range.getStartPosition();let o=Math.abs(t.relativePos.x);const r={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};if(o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return r.glyphMarginLane=l[Math.floor(o/e.lineHeight)],t.fulfillMargin(2,s,i.range,r)}return o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,s,i.range,r):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,s,i.range,r))}return null}static _hitTestViewLines(e,t){if(!to.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new H(1,1),bee);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),o=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new H(s,o),bee)}if(to.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const r=e.getLineWidth(s),a=H4(t.mouseContentHorizontalOffset-r);return t.fulfillContentEmpty(new H(s,1),a)}const o=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=o){const r=H4(t.mouseContentHorizontalOffset-o),a=new H(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(a,r)}}const i=t.hitTestResult.value;return i.type===1?Hs.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(to.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new H(i,s))}return null}static _hitTestScrollbarSlider(e,t){if(to.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(s);return t.fulfillScrollbar(new H(s,o))}}return null}static _hitTestScrollbar(e,t){if(to.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new H(i,s))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(146),s=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return Hs._getMouseColumn(s,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,s,o){const r=s.lineNumber,a=s.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const b=H4(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(s,b)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(s);const d=c.left;if(Math.abs(t.mouseContentHorizontalOffset-d)<1)return t.fulfillContentText(s,null,{mightBeForeignElement:!!o,injectedText:o});const u=[];if(u.push({offset:c.left,column:a}),a>1){const b=e.visibleRangeForPosition(r,a-1);b&&u.push({offset:b.left,column:a-1})}const h=e.viewModel.getLineMaxColumn(r);if(a<h){const b=e.visibleRangeForPosition(r,a+1);b&&u.push({offset:b.left,column:a+1})}u.sort((b,v)=>b.offset-v.offset);const f=t.pos.toClientCoordinates(Te(e.viewDomNode)),g=i.getBoundingClientRect(),m=g.left<=f.clientX&&f.clientX<=g.right;let _=null;for(let b=1;b<u.length;b++){const v=u[b-1],w=u[b];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=w.offset){_=new E(r,v.column,r,w.column);const y=Math.abs(v.offset-t.mouseContentHorizontalOffset),S=Math.abs(w.offset-t.mouseContentHorizontalOffset);s=y<S?new H(r,v.column):new H(r,w.column);break}}return t.fulfillContentText(s,_,{mightBeForeignElement:!m||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(i),o=s+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>o)){const a=Math.floor((s+o)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new nO(t.pos.x,l),d=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(Te(e.viewDomNode)));if(d.type===1)return d}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(Te(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=db(e.viewDomNode);let s;if(i?typeof i.caretRangeFromPoint>"u"?s=wBe(i,t.clientX,t.clientY):s=i.caretRangeFromPoint(t.clientX,t.clientY):s=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new hf;const o=s.startContainer;if(o.nodeType===o.TEXT_NODE){const r=o.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Gu.CLASS_NAME?dp.createFromDOMInfo(e,r,s.startOffset):new hf(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const r=o.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Gu.CLASS_NAME?dp.createFromDOMInfo(e,o,o.textContent.length):new hf(o)}return new hf}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const s=i.offsetNode.parentNode,o=s?s.parentNode:null,r=o?o.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Gu.CLASS_NAME?dp.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new hf(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const s=i.offsetNode.parentNode,o=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,r=s?s.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(o===Gu.CLASS_NAME){const l=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(l)return dp.createFromDOMInfo(e,l,0)}else if(a===Gu.CLASS_NAME)return dp.createFromDOMInfo(e,i.offsetNode,0)}return new hf(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:s}=t.model.getOptions(),o=kk.atomicPosition(i,e.column-1,s,2);return o!==-1?new H(e.lineNumber,o+1):e}static doHitTest(e,t){let i=new hf;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(Te(e.viewDomNode)))),i.type===1){const s=e.viewModel.getInjectedTextAt(i.position),o=e.viewModel.normalizePosition(i.position,2);(s||!o.equals(i.position))&&(i=new kfe(o,i.spanNode,s))}return i}}function wBe(n,e,t){const i=document.createRange();let s=n.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const o=s.getBoundingClientRect(),r=Te(s),a=r.getComputedStyle(s,null).getPropertyValue("font-style"),l=r.getComputedStyle(s,null).getPropertyValue("font-variant"),c=r.getComputedStyle(s,null).getPropertyValue("font-weight"),d=r.getComputedStyle(s,null).getPropertyValue("font-size"),u=r.getComputedStyle(s,null).getPropertyValue("line-height"),h=r.getComputedStyle(s,null).getPropertyValue("font-family"),f=`${a} ${l} ${c} ${d}/${u} ${h}`,g=s.innerText;let m=o.left,_=0,b;if(e>o.left+o.width)_=g.length;else{const v=Qj.getInstance();for(let w=0;w<g.length+1;w++){if(b=v.getCharWidth(g.charAt(w),f)/2,m+=b,e<m){_=w;break}m+=b}}i.setStart(s.firstChild,_),i.setEnd(s.firstChild,_)}return i}const _p=class _p{static getInstance(){return _p._INSTANCE||(_p._INSTANCE=new _p),_p._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const s=this._canvas.getContext("2d");s.font=t;const r=s.measureText(e).width;return this._cache[i]=r,r}};_p._INSTANCE=null;let Qj=_p;class n$ extends eD{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new Hs(this._context,i),this._mouseDownOperation=this._register(new CBe(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const s=new sBe(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(s.onMouseMove(this.viewHelper.viewDomNode,r=>{this._onMouseMove(r),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=G(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new tm(a,!1,this.viewHelper.viewDomNode))}))})),this._register(s.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r)));let o=0;this._register(s.onPointerDown(this.viewHelper.viewDomNode,(r,a)=>{o=a})),this._register(G(this.viewHelper.viewDomNode,le.POINTER_UP,r=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r,o))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=yT.INSTANCE;let t=0,i=Ma.getZoomLevel(),s=!1,o=0;const r=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new cb(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const d=Ma.getZoomLevel(),u=c.deltaY>0?1:-1;Ma.setZoomLevel(d+u),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(i=Ma.getZoomLevel(),s=a(l),o=0),t=Date.now(),o+=c.deltaY,s&&(Ma.setZoomLevel(i+o/5),c.preventDefault(),c.stopPropagation())};this._register(G(this.viewHelper.viewDomNode,le.MOUSE_WHEEL,r,{capture:!0,passive:!1}));function a(l){return ct?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const s=new yfe(e,t).toPageCoordinates(Te(this.viewHelper.viewDomNode)),o=e$(this.viewHelper.viewDomNode);if(s.y<o.y||s.y>o.y+o.height||s.x<o.x||s.x>o.x+o.width)return null;const r=t$(this.viewHelper.viewDomNode,o,s);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,s,r,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const s=db(this.viewHelper.viewDomNode);s&&(i=s.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),s=i.type===6||i.type===7,o=i.type===2||i.type===3||i.type===4,r=i.type===3,a=this._context.configuration.options.get(110),l=i.type===8||i.type===5,c=i.type===9;let d=e.leftButton||e.middleButton;ct&&e.leftButton&&e.ctrlKey&&(d=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(s||r&&a))u(),this._mouseDownOperation.start(i.type,e,t);else if(o)e.preventDefault();else if(l){const h=i.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(u(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class CBe extends U{constructor(e,t,i,s,o,r){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=s,this._createMouseTarget=o,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new rBe(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new yBe(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new Xj,this._currentSelection=new Ce(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const s=this._findMousePosition(t,!0);if(!s||!s.position)return;this._mouseState.trySetCount(t.detail,s.position),t.detail=this._mouseState.count;const o=this._context.configuration.options;if(!o.get(92)&&o.get(35)&&!o.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&s.type===6&&s.position&&this._currentSelection.containsPosition(s.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);Hu(r)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,s=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(s.getCurrentScrollTop()-a,0),c=Ly.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return js.createOutsideEditor(o,u,"above",a)}const d=s.getLineNumberAtVerticalOffset(l);return js.createOutsideEditor(o,new H(d,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=s.getCurrentScrollTop()+e.relativePos.y,c=Ly.getZoneAtCoord(this._context,l);if(c){const u=this._helpPositionJumpOverViewZone(c);if(u)return js.createOutsideEditor(o,u,"below",a)}const d=s.getLineNumberAtVerticalOffset(l);return js.createOutsideEditor(o,new H(d,i.getLineMaxColumn(d)),"below",a)}const r=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return js.createOutsideEditor(o,new H(r,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return js.createOutsideEditor(o,new H(r,i.getLineMaxColumn(r)),"right",a)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const r=this._helpPositionJumpOverViewZone(s.detail);if(r)return js.createViewZone(s.type,s.element,s.mouseColumn,r,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new H(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,s=e.positionAfter;return i&&s?i.isBefore(t)?i:s:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class yBe extends U{constructor(e,t,i,s){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new SBe(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class SBe extends U{constructor(e,t,i,s,o,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=s,this._position=o,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=xr(Te(r.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),i=this._tick(),s=t*(i/1e3)*e,o=this._position.outsidePosition==="above"?-s:s;this._context.viewModel.viewLayout.deltaScrollNow(0,o),this._viewHelper.renderNow();const r=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?r.startLineNumber:r.endLineNumber;let l;{const c=e$(this._viewHelper.viewDomNode),d=this._context.configuration.options.get(146).horizontalScrollbarHeight,u=new nO(this._mouseEvent.pos.x,c.y+c.height-d-.1),h=t$(this._viewHelper.viewDomNode,c,u);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,u,h,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=js.createOutsideEditor(this._position.mouseColumn,new H(a,1),"above",this._position.outsideDistance):l=js.createOutsideEditor(this._position.mouseColumn,new H(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=xr(Te(l.element),()=>this._execute())}}const b2=class b2{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=new Date().getTime();i-this._lastSetMouseDownCountTime>b2.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};b2.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let Xj=b2;const Pw=class Pw{constructor(e,t,i,s,o){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=s,this.newlineCountBeforeSelection=o}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const i=e.getValue(),s=e.getSelectionStart(),o=e.getSelectionEnd();let r;if(t){const a=i.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(r=t.newlineCountBeforeSelection)}return new Pw(i,s,o,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new Pw(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var s,o,r,a;if(e<=this.selectionStart){const l=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(((s=this.selection)==null?void 0:s.getStartPosition())??null,l,-1)}if(e>=this.selectionEnd){const l=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(((o=this.selection)==null?void 0:o.getEndPosition())??null,l,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("")===-1)return this._finishDeduceEditorPosition(((r=this.selection)==null?void 0:r.getStartPosition())??null,t,1);const i=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(((a=this.selection)==null?void 0:a.getEndPosition())??null,i,-1)}_finishDeduceEditorPosition(e,t,i){let s=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)s++;return[e,i*t.length,s]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min($g(e.value,t.value),e.selectionStart,t.selectionStart),o=Math.min(ZI(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-o);const r=t.value.substring(s,t.value.length-o),a=e.selectionStart-s,l=e.selectionEnd-s,c=t.selectionStart-s,d=t.selectionEnd-s;if(c===d){const h=e.selectionStart-s;return{text:r,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}const u=l-a;return{text:r,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min($g(e.value,t.value),e.selectionEnd),s=Math.min(ZI(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(i,e.value.length-s),r=t.value.substring(i,t.value.length-s);e.selectionStart-i;const a=e.selectionEnd-i;t.selectionStart-i;const l=t.selectionEnd-i;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:l-r.length}}};Pw.EMPTY=new Pw("",0,0,null,void 0);let Vs=Pw;class uw{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,s=i+1,o=i+t;return new E(s,1,o+1,1)}static fromEditorSelection(e,t,i,s){const r=uw._getPageOfLine(t.startLineNumber,i),a=uw._getRangeForPage(r,i),l=uw._getPageOfLine(t.endLineNumber,i),c=uw._getRangeForPage(l,i);let d=a.intersectRanges(new E(1,1,t.startLineNumber,t.startColumn));if(s&&e.getValueLengthInRange(d,1)>500){const b=e.modifyPosition(d.getEndPosition(),-500);d=E.fromPositions(b,d.getEndPosition())}const u=e.getValueInRange(d,1),h=e.getLineCount(),f=e.getLineMaxColumn(h);let g=c.intersectRanges(new E(t.endLineNumber,t.endColumn,h,f));if(s&&e.getValueLengthInRange(g,1)>500){const b=e.modifyPosition(g.getStartPosition(),500);g=E.fromPositions(g.getStartPosition(),b)}const m=e.getValueInRange(g,1);let _;if(r===l||r+1===l)_=e.getValueInRange(t,1);else{const b=a.intersectRanges(t),v=c.intersectRanges(t);_=e.getValueInRange(b,1)+""+e.getValueInRange(v,1)}return s&&_.length>2*500&&(_=_.substring(0,500)+""+_.substring(_.length-500,_.length)),new Vs(u+_+m,u.length,u.length+_.length,t,d.endLineNumber-d.startLineNumber)}}var xBe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},vee=function(n,e){return function(t,i){e(t,i,n)}},pP;(function(n){n.Tap="-monaco-textarea-synthetic-tap"})(pP||(pP={}));const Jj={forceCopyWithSyntaxHighlighting:!1},v2=class v2{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};v2.INSTANCE=new v2;let Lk=v2;class kBe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let e8=class extends U{get textAreaState(){return this._textAreaState}constructor(e,t,i,s,o,r){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=s,this._accessibilityService=o,this._logService=r,this._onFocus=this._register(new j),this.onFocus=this._onFocus.event,this._onBlur=this._register(new j),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new j),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new j),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new j),this.onCut=this._onCut.event,this._onPaste=this._register(new j),this.onPaste=this._onPaste.event,this._onType=this._register(new j),this.onType=this._onType.event,this._onCompositionStart=this._register(new j),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new j),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new j),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new j),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new jn),this._asyncTriggerCut=this._register(new $t(()=>this._onCut.fire(),0)),this._textAreaState=Vs.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(ue.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new $t(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new ti(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new ti(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new kBe;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const u=Vs.readFromTextArea(this._textArea,this._textAreaState),h=Vs.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(h),this._onCompositionUpdate.fire(l);return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=Vs.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const u=Vs.readFromTextArea(this._textArea,this._textAreaState),h=Vs.deduceAndroidCompositionInput(this._textAreaState,u);this._textAreaState=u,this._onType.fire(h),this._onCompositionEnd.fire();return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=Vs.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=Vs.readFromTextArea(this._textArea,this._textAreaState),d=Vs.deduceInput(this._textAreaState,c,this._OS===2);d.replacePrevCharCnt===0&&d.text.length===1&&(Pn(d.text.charCodeAt(0))||d.text.charCodeAt(0)===127)||(this._textAreaState=c,(d.text!==""||d.replacePrevCharCnt!==0||d.replaceNextCharCnt!==0||d.positionDelta!==0)&&this._onType.fire(d))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,d]=t8.getTextData(l.clipboardData);c&&(d=d||Lk.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:d}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new $t(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return G(this._textArea.ownerDocument,"selectionchange",t=>{if(Qf.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const i=Date.now(),s=i-e;if(e=i,s<5)return;const o=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),u=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(u[0],u[1],u[2]),f=new Ce(d.lineNumber,d.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};Lk.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,i),e.preventDefault(),e.clipboardData&&t8.setTextData(e.clipboardData,t.text,t.html,i)}};e8=xBe([vee(4,Nr),vee(5,ws)],e8);const t8={getTextData(n){const e=n.getData(Zi.text);let t=null;const i=n.getData("vscode-editor-data");if(typeof i=="string")try{t=JSON.parse(i),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&n.files.length>0?[Array.prototype.slice.call(n.files,0).map(o=>o.name).join(`
`),null]:[e,t]},setTextData(n,e,t,i){n.setData(Zi.text,e),typeof t=="string"&&n.setData("text/html",t),n.setData("vscode-editor-data",JSON.stringify(i))}};class LBe extends U{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new ft(this._actual,"keydown")).event,this.onKeyUp=this._register(new ft(this._actual,"keyup")).event,this.onCompositionStart=this._register(new ft(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new ft(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new ft(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new ft(this._actual,"beforeinput")).event,this.onInput=this._register(new ft(this._actual,"input")).event,this.onCut=this._register(new ft(this._actual,"cut")).event,this.onCopy=this._register(new ft(this._actual,"copy")).event,this.onPaste=this._register(new ft(this._actual,"paste")).event,this.onFocus=this._register(new ft(this._actual,"focus")).event,this.onBlur=this._register(new ft(this._actual,"blur")).event,this._onSyntheticTap=this._register(new j),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Qf.onKeyDown())),this._register(this.onBeforeInput(()=>Qf.onBeforeInput())),this._register(this.onInput(()=>Qf.onInput())),this._register(this.onKeyUp(()=>Qf.onKeyUp())),this._register(G(this._actual,pP.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=db(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?_s()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const s=this._actual;let o=null;const r=db(s);r?o=r.activeElement:o=_s();const a=Te(o),l=o===s,c=s.selectionStart,d=s.selectionEnd;if(l&&c===t&&d===i){$a&&a.parent!==a&&s.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,i),$a&&a.parent!==a&&s.focus();return}try{const u=lEe(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,i),cEe(s,u)}catch{}}}class DBe extends n${constructor(e,t,i){super(e,t,i),this._register(Is.addTarget(this.viewHelper.linesContentDomNode)),this._register(G(this.viewHelper.linesContentDomNode,si.Tap,o=>this.onTap(o))),this._register(G(this.viewHelper.linesContentDomNode,si.Change,o=>this.onChange(o))),this._register(G(this.viewHelper.linesContentDomNode,si.Contextmenu,o=>this._onContextMenu(new tm(o,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(G(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const r=o.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new oBe(this.viewHelper.viewDomNode);this._register(s.onPointerMove(this.viewHelper.viewDomNode,o=>this._onMouseMove(o))),this._register(s.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,(o,r)=>this._onMouseDown(o,r)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const i=this._createMouseTarget(new tm(e,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class EBe extends n${constructor(e,t,i){super(e,t,i),this._register(Is.addTarget(this.viewHelper.linesContentDomNode)),this._register(G(this.viewHelper.linesContentDomNode,si.Tap,s=>this.onTap(s))),this._register(G(this.viewHelper.linesContentDomNode,si.Change,s=>this.onChange(s))),this._register(G(this.viewHelper.linesContentDomNode,si.Contextmenu,s=>this._onContextMenu(new tm(s,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new tm(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const i=document.createEvent("CustomEvent");i.initEvent(pP.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class NBe extends U{constructor(e,t,i){super(),(Ac||eke&&Ole)&&mz.pointerEvents?this.handler=this._register(new DBe(e,t,i)):Gt.TouchEvent?this.handler=this._register(new EBe(e,t,i)):this.handler=this._register(new n$(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class Gb extends eD{}const w2=class w2 extends Gb{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new H(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const i=e.get(146);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let i=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,i=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(i=!0),i}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(e,1));if(t.column!==1)return"";const i=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-i);return s===0?'<span class="relative-current-line-number">'+i+"</span>":String(s)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===i||i%10===0)return String(i);const s=this._context.viewModel.getLineCount();return i===s?String(i):""}return String(i)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=vo?this._lineHeight%2===0?" lh-even":" lh-odd":"",i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,o=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);o.sort((c,d)=>E.compareRangesUsingEnds(c.range,d.range));let r=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=i;c<=s;c++){const d=c-i;let u=this._getLineRenderLineNumber(c),h="";for(;r<o.length&&o[r].range.endLineNumber<c;)r++;for(let f=r;f<o.length;f++){const{range:g,options:m}=o[f];g.startLineNumber<=c&&(h+=" "+m.lineNumberClassName)}if(!u&&!h){l[d]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(u=""),this._renderFinalNewline==="dimmed"&&(h+=" dimmed-line-number")),c===this._activeLineNumber&&(h+=" active-line-number"),l[d]=`<div class="${w2.CLASS_NAME}${t}${h}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${u}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};w2.CLASS_NAME="line-numbers";let _P=w2;tl((n,e)=>{const t=n.getColor(vOe),i=n.getColor(MOe);i?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${i}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const Mw=class Mw extends Tr{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=Ot(document.createElement("div")),this._domNode.setClassName(Mw.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Ot(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Mw.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}};Mw.CLASS_NAME="glyph-margin",Mw.OUTER_CLASS_NAME="margin";let bP=Mw;const fC="monaco-mouse-cursor-text";var IBe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},wee=function(n,e){return function(t,i){e(t,i,n)}};class TBe{constructor(e,t,i,s,o){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=s,this.distanceToModelLineEnd=o,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new H(this.modelLineNumber,this.distanceToModelLineStart+1),i=new H(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const j4=$a;let i8=class extends Tr{constructor(e,t,i,s,o){super(e),this._keybindingService=s,this._instantiationService=o,this._primaryCursorPosition=new H(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,a=r.get(146);this._setAccessibilityOptions(r),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=r.get(50),this._lineHeight=r.get(67),this._emptySelectionClipboard=r.get(37),this._copyWithSyntaxHighlighting=r.get(25),this._visibleTextArea=null,this._selections=[new Ce(1,1,1,1)],this._modelSelections=[new Ce(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Ot(document.createElement("textarea")),jc.write(this.textArea,7),this.textArea.setClassName(`inputarea ${fC}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("aria-required",r.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(r.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",p("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",r.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Ot(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:h=>this._context.viewModel.getLineMaxColumn(h),getValueInRange:(h,f)=>this._context.viewModel.getValueInRange(h,f),getValueLengthInRange:(h,f)=>this._context.viewModel.getValueLengthInRange(h,f),modifyPosition:(h,f)=>this._context.viewModel.modifyPosition(h,f)},d={getDataToCopy:()=>{const h=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,vs),f=this._context.viewModel.model.getEOL(),g=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),m=Array.isArray(h)?h:null,_=Array.isArray(h)?h.join(f):h;let b,v=null;if(Jj.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&_.length<65536){const w=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);w&&(b=w.html,v=w.mode)}return{isFromEmptySelection:g,multicursorText:m,text:_,html:b,mode:v}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const h=this._selections[0];if(ct&&h.isEmpty()){const g=h.getStartPosition();let m=this._getWordBeforePosition(g);if(m.length===0&&(m=this._getCharacterBeforePosition(g)),m.length>0)return new Vs(m,m.length,m.length,E.fromPositions(g),0)}if(ct&&!h.isEmpty()&&c.getValueLengthInRange(h,0)<500){const g=c.getValueInRange(h,0);return new Vs(g,0,g.length,h,0)}if(Eh&&!h.isEmpty()){const g="vscode-placeholder";return new Vs(g,0,g.length,null,void 0)}return Vs.EMPTY}if(YZ){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition(),[g,m]=this._getAndroidWordAtPosition(f);if(g.length>0)return new Vs(g,m,m,E.fromPositions(f),0)}return Vs.EMPTY}return uw.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(h,f,g)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(h,f,g)},u=this._register(new LBe(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(e8,d,u,mr,{isAndroid:YZ,isChrome:PL,isFirefox:$a,isSafari:Eh})),this._register(this._textAreaInput.onKeyDown(h=>{this._viewController.emitKeyDown(h)})),this._register(this._textAreaInput.onKeyUp(h=>{this._viewController.emitKeyUp(h)})),this._register(this._textAreaInput.onPaste(h=>{let f=!1,g=null,m=null;h.metadata&&(f=this._emptySelectionClipboard&&!!h.metadata.isFromEmptySelection,g=typeof h.metadata.multicursorText<"u"?h.metadata.multicursorText:null,m=h.metadata.mode),this._viewController.paste(h.text,f,g,m)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(h=>{h.replacePrevCharCnt||h.replaceNextCharCnt||h.positionDelta?this._viewController.compositionType(h.text,h.replacePrevCharCnt,h.replaceNextCharCnt,h.positionDelta):this._viewController.type(h.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(h=>{this._viewController.setSelection(h)})),this._register(this._textAreaInput.onCompositionStart(h=>{const f=this.textArea.domNode,g=this._modelSelections[0],{distanceToModelLineStart:m,widthOfHiddenTextBefore:_}=(()=>{const v=f.value.substring(0,Math.min(f.selectionStart,f.selectionEnd)),w=v.lastIndexOf(`
`),y=v.substring(w+1),S=y.lastIndexOf("	"),x=y.length-S-1,k=g.getStartPosition(),D=Math.min(k.column-1,x),N=k.column-1-D,R=y.substring(0,y.length-D),{tabSize:O}=this._context.viewModel.model.getOptions(),B=PBe(this.textArea.domNode.ownerDocument,R,this._fontInfo,O);return{distanceToModelLineStart:N,widthOfHiddenTextBefore:B}})(),{distanceToModelLineEnd:b}=(()=>{const v=f.value.substring(Math.max(f.selectionStart,f.selectionEnd)),w=v.indexOf(`
`),y=w===-1?v:v.substring(0,w),S=y.indexOf("	"),x=S===-1?y.length:y.length-S-1,k=g.getEndPosition(),D=Math.min(this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column,x);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(k.lineNumber)-k.column-D}})();this._context.viewModel.revealRange("keyboard",!0,E.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new TBe(this._context,g.startLineNumber,m,_,b),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${fC} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(h=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${fC}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(lS.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(e.lineNumber),s=Ga(t,[]);let o=!0,r=e.column,a=!0,l=e.column,c=0;for(;c<50&&(o||a);){if(o&&r<=1&&(o=!1),o){const d=i.charCodeAt(r-2);s.get(d)!==0?o=!1:r--}if(a&&l>i.length&&(a=!1),a){const d=i.charCodeAt(l-1);s.get(d)!==0?a=!1:l++}c++}return[i.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=Ga(this._context.configuration.options.get(132),[]);let s=e.column,o=0;for(;s>1;){const r=t.charCodeAt(s-2);if(i.get(r)!==0||o>50)return t.substring(s-1,e.column-1);o++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const i=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!Pn(i.charCodeAt(0)))return i}return""}_getAriaLabel(e){var i,s,o;if(e.get(2)===1){const r=(i=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))==null?void 0:i.getAriaLabel(),a=(s=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))==null?void 0:s.getAriaLabel(),l=(o=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))==null?void 0:o.getAriaLabel(),c=p("accessibilityModeOff","The editor is not accessible at this time.");return r?p("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,r):a?p("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?p("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===zc.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const s=e.get(146).wrappingColumn;if(s!==-1&&this._accessibilitySupport!==1){const o=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(s*o.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=j4?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:s}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${s*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!lS.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new H(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)==null||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const i=this._visibleTextArea.visibleTextareaStart,s=this._visibleTextArea.visibleTextareaEnd,o=this._visibleTextArea.startPosition,r=this._visibleTextArea.endPosition;if(o&&r&&i&&s&&s.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,d=this._contentLeft+i.left-this._scrollLeft,u=s.left-i.left+1;if(d<this._contentLeft){const b=this._contentLeft-d;d+=b,c+=b,u-=b}u>this._contentWidth&&(u=this._contentWidth);const h=this._context.viewModel.getViewLineData(o.lineNumber),f=h.tokens.findTokenIndexAtOffset(o.column-1),g=h.tokens.findTokenIndexAtOffset(r.column-1),m=f===g,_=this._visibleTextArea.definePresentation(m?h.tokens.getPresentation(f):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:d,width:u,height:this._lineHeight,useCover:!1,color:(Hi.getColorMap()||[])[_.foreground],italic:_.italic,bold:_.bold,underline:_.underline,strikethrough:_.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(ct||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:j4?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;do{if(i=e.indexOf(`
`,i+1),i===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:j4?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;as(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?te.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const s=this._context.configuration.options;s.get(57)?i.setClassName("monaco-editor-background textAreaCover "+bP.OUTER_CLASS_NAME):s.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+_P.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};i8=IBe([wee(3,Ft),wee(4,ke)],i8);function PBe(n,e,t,i){if(e.length===0)return 0;const s=n.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const o=n.createElement("span");as(o,t),o.style.whiteSpace="pre",o.style.tabSize=`${i*t.spaceWidth}px`,o.append(e),s.appendChild(o),n.body.appendChild(s);const r=o.offsetWidth;return s.remove(),r}const MBe=()=>!0,RBe=()=>!1,ABe=n=>n===" "||n==="	";class bv{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,i,s){this.languageConfigurationService=s,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=i.options,r=o.get(146),a=o.get(50);this.readOnly=o.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(129),this.wordSeparators=o.get(132),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(77),this.multiCursorPaste=o.get(79),this.multiCursorLimit=o.get(80),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const d of l)this.surroundingPairs[d.open]=d.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(c==null?void 0:c.blockCommentStartToken)??null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)==null?void 0:e.getElectricCharacters();if(t)for(const i of t)this._electricChars[i]=!0}return this._electricChars}onElectricCharacter(e,t,i){const s=xp(t,i-1),o=this.languageConfigurationService.getLanguageConfiguration(s.languageId).electricCharacter;return o?o.onElectricCharacter(e,s,i-s.firstCharOffset):null}normalizeIndentation(e){return wU(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,i){switch(t){case"beforeWhitespace":return ABe;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,i);case"always":return MBe;case"never":return RBe}}_getLanguageDefinedShouldAutoClose(e,t){const i=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return s=>i.indexOf(s)!==-1}visibleColumnFromColumn(e,t){return yn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,i){const s=yn.columnFromVisibleColumn(e.getLineContent(t),i,this.tabSize),o=e.getLineMinColumn(t);if(s<o)return o;const r=e.getLineMaxColumn(t);return s>r?r:s}}let St=class Lfe{static fromModelState(e){return new OBe(e)}static fromViewState(e){return new FBe(e)}static fromModelSelection(e){const t=Ce.liftSelection(e),i=new ts(E.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return Lfe.fromModelState(i)}static fromModelSelections(e){const t=[];for(let i=0,s=e.length;i<s;i++)t[i]=this.fromModelSelection(e[i]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class OBe{constructor(e){this.modelState=e,this.viewState=null}}class FBe{constructor(e){this.modelState=null,this.viewState=e}}class ts{constructor(e,t,i,s,o){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=i,this.position=s,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=ts._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,i,s){return e?new ts(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new H(t,i),s):new ts(new E(t,i,t,i),0,s,new H(t,i),s)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Ce.fromPositions(e.getStartPosition(),t):Ce.fromPositions(e.getEndPosition(),t)}}class Ko{constructor(e,t,i){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}}function im(n){return n==="'"||n==='"'||n==="`"}class up{static columnSelect(e,t,i,s,o,r){const a=Math.abs(o-i)+1,l=i>o,c=s>r,d=s<r,u=[];for(let h=0;h<a;h++){const f=i+(l?-h:h),g=e.columnFromVisibleColumn(t,f,s),m=e.columnFromVisibleColumn(t,f,r),_=e.visibleColumnFromColumn(t,new H(f,g)),b=e.visibleColumnFromColumn(t,new H(f,m));d&&(_>r||b<s)||c&&(b>s||_<r)||u.push(new ts(new E(f,g,f,g),0,0,new H(f,m),0))}if(u.length===0)for(let h=0;h<a;h++){const f=i+(l?-h:h),g=t.getLineMaxColumn(f);u.push(new ts(new E(f,g,f,g),0,0,new H(f,g),0))}return{viewStates:u,reversed:l,fromLineNumber:i,fromVisualColumn:s,toLineNumber:o,toVisualColumn:r}}static columnSelectLeft(e,t,i){let s=i.toViewVisualColumn;return s>0&&s--,up.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,s)}static columnSelectRight(e,t,i){let s=0;const o=Math.min(i.fromViewLineNumber,i.toViewLineNumber),r=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(let l=o;l<=r;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new H(l,c));s=Math.max(s,d)}let a=i.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,a)}static columnSelectUp(e,t,i,s){const o=s?e.pageSize:1,r=Math.max(1,i.toViewLineNumber-o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}static columnSelectDown(e,t,i,s){const o=s?e.pageSize:1,r=Math.min(t.getLineCount(),i.toViewLineNumber+o);return this.columnSelect(e,t,i.fromViewLineNumber,i.fromViewVisualColumn,r,i.toViewVisualColumn)}}class ps{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ce.fromPositions(s.getEndPosition())}}class WBe{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ce.fromRange(s,0)}}class zN{constructor(e,t,i=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=i}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ce.fromPositions(s.getStartPosition())}}class vP{constructor(e,t,i,s,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Ce.fromPositions(s.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class s${constructor(e,t,i,s=!1){this._range=e,this._text=t,this._initialSelection=i,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class V4{constructor(e,t,i){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=i}}class Bt{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-cce(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const i=t.lineNumber-1;return new H(i,e.getLineMaxColumn(i))}else return t}static leftPositionAtomicSoftTabs(e,t,i){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),r=kk.atomicPosition(o,t.column-1,i,0);if(r!==-1&&r+1>=s)return new H(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,i){const s=e.stickyTabStops?Bt.leftPositionAtomicSoftTabs(t,i,e.tabSize):Bt.leftPosition(t,i);return new V4(s.lineNumber,s.column,0)}static moveLeft(e,t,i,s,o){let r,a;if(i.hasSelection()&&!s)r=i.selection.startLineNumber,a=i.selection.startColumn;else{const l=i.position.delta(void 0,-(o-1)),c=t.normalizePosition(Bt.clipPositionColumn(l,t),0),d=Bt.left(e,t,c);r=d.lineNumber,a=d.column}return i.move(s,r,a,0)}static clipPositionColumn(e,t){return new H(e.lineNumber,Bt.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,i){return e<t?t:e>i?i:e}static rightPosition(e,t,i){return i<e.getLineMaxColumn(t)?i=i+hz(e.getLineContent(t),i-1):t<e.getLineCount()&&(t=t+1,i=e.getLineMinColumn(t)),new H(t,i)}static rightPositionAtomicSoftTabs(e,t,i,s,o){if(i<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=kk.atomicPosition(r,i-1,s,1);if(a!==-1)return new H(t,a+1)}return this.rightPosition(e,t,i)}static right(e,t,i){const s=e.stickyTabStops?Bt.rightPositionAtomicSoftTabs(t,i.lineNumber,i.column,e.tabSize,e.indentSize):Bt.rightPosition(t,i.lineNumber,i.column);return new V4(s.lineNumber,s.column,0)}static moveRight(e,t,i,s,o){let r,a;if(i.hasSelection()&&!s)r=i.selection.endLineNumber,a=i.selection.endColumn;else{const l=i.position.delta(void 0,o-1),c=t.normalizePosition(Bt.clipPositionColumn(l,t),1),d=Bt.right(e,t,c);r=d.lineNumber,a=d.column}return i.move(s,r,a,0)}static vertical(e,t,i,s,o,r,a,l){const c=yn.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize)+o,d=t.getLineCount(),u=i===1&&s===1,h=i===d&&s===t.getLineMaxColumn(i),f=r<i?u:h;if(i=r,i<1?(i=1,a?s=t.getLineMinColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):i>d?(i=d,a?s=t.getLineMaxColumn(i):s=Math.min(t.getLineMaxColumn(i),s)):s=e.columnFromVisibleColumn(t,i,c),f?o=0:o=c-yn.visibleColumnFromColumn(t.getLineContent(i),s,e.tabSize),l!==void 0){const g=new H(i,s),m=t.normalizePosition(g,l);o=o+(s-m.column),i=m.lineNumber,s=m.column}return new V4(i,s,o)}static down(e,t,i,s,o,r,a){return this.vertical(e,t,i,s,o,i+r,a,4)}static moveDown(e,t,i,s,o){let r,a;i.hasSelection()&&!s?(r=i.selection.endLineNumber,a=i.selection.endColumn):(r=i.position.lineNumber,a=i.position.column);let l=0,c;do if(c=Bt.down(e,t,r+l,a,i.leftoverVisibleColumns,o,!0),t.normalizePosition(new H(c.lineNumber,c.column),2).lineNumber>r)break;while(l++<10&&r+l<t.getLineCount());return i.move(s,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,i){const s=i.selection,o=Bt.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=Bt.down(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new ts(new E(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new H(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,i,s,o,r,a){return this.vertical(e,t,i,s,o,i-r,a,3)}static moveUp(e,t,i,s,o){let r,a;i.hasSelection()&&!s?(r=i.selection.startLineNumber,a=i.selection.startColumn):(r=i.position.lineNumber,a=i.position.column);const l=Bt.up(e,t,r,a,i.leftoverVisibleColumns,o,!0);return i.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,i){const s=i.selection,o=Bt.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,i.selectionStartLeftoverVisibleColumns,1,!1),r=Bt.up(e,t,s.positionLineNumber,s.positionColumn,i.leftoverVisibleColumns,1,!1);return new ts(new E(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new H(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,i,s){let o=i.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return i.move(s,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,i,s){const o=t.getLineCount();let r=i.position.lineNumber;for(;r<o&&this._isBlankLine(t,r);)r++;for(;r<o&&!this._isBlankLine(t,r);)r++;return i.move(s,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,i,s){const o=i.position.lineNumber,r=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||r;let l;return i.position.column===a?l=r:l=a,i.move(s,o,l,0)}static moveToEndOfLine(e,t,i,s,o){const r=i.position.lineNumber,a=t.getLineMaxColumn(r);return i.move(s,r,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,i,s){return i.move(s,1,1,0)}static moveToEndOfBuffer(e,t,i,s){const o=t.getLineCount(),r=t.getLineMaxColumn(o);return i.move(s,o,r,0)}}class Cb{static deleteRight(e,t,i,s){const o=[];let r=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let d=c;if(d.isEmpty()){const u=c.getPosition(),h=Bt.right(t,i,u);d=new E(h.lineNumber,h.column,u.lineNumber,u.column)}if(d.isEmpty()){o[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(r=!0),o[a]=new ps(d,"")}return[r,o]}static isAutoClosingPairDelete(e,t,i,s,o,r,a){if(t==="never"&&i==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const d=r[l],u=d.getPosition();if(!d.isEmpty())return!1;const h=o.getLineContent(u.lineNumber);if(u.column<2||u.column>=h.length+1)return!1;const f=h.charAt(u.column-2),g=s.get(f);if(!g)return!1;if(im(f)){if(i==="never")return!1}else if(t==="never")return!1;const m=h.charAt(u.column-1);let _=!1;for(const b of g)b.open===f&&b.close===m&&(_=!0);if(!_)return!1;if(e==="auto"){let b=!1;for(let v=0,w=a.length;v<w;v++){const y=a[v];if(u.lineNumber===y.startLineNumber&&u.column===y.startColumn){b=!0;break}}if(!b)return!1}}return!0}static _runAutoClosingPairDelete(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++){const a=i[o].getPosition(),l=new E(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[o]=new ps(l,"")}return[!0,s]}static deleteLeft(e,t,i,s,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,i,s,o))return this._runAutoClosingPairDelete(t,i,s);const r=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){const d=Cb.getDeleteRange(s[l],i,t);if(d.isEmpty()){r[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),r[l]=new ps(d,"")}return[a,r]}static getDeleteRange(e,t,i){if(!e.isEmpty())return e;const s=e.getPosition();if(i.useTabStops&&s.column>1){const o=t.getLineContent(s.lineNumber),r=Zs(o),a=r===-1?o.length+1:r+1;if(s.column<=a){const l=i.visibleColumnFromColumn(t,s),c=yn.prevIndentTabStop(l,i.indentSize),d=i.columnFromVisibleColumn(t,s.lineNumber,c);return new E(s.lineNumber,d,s.lineNumber,s.column)}}return E.fromPositions(Cb.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const i=eDe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,i+1)}else if(e.lineNumber>1){const i=e.lineNumber-1;return new H(i,t.getLineMaxColumn(i))}else return e}static cut(e,t,i){const s=[];let o=null;i.sort((r,a)=>H.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=i.length;r<a;r++){const l=i[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,u,h,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,u=1,h=c.lineNumber+1,f=1):c.lineNumber>1&&(o==null?void 0:o.endLineNumber)!==c.lineNumber?(d=c.lineNumber-1,u=t.getLineMaxColumn(c.lineNumber-1),h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,u=1,h=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const g=new E(d,u,h,f);o=g,g.isEmpty()?s[r]=null:s[r]=new ps(g,"")}else s[r]=null;else s[r]=new ps(l,"")}return new Ko(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Rt{static _createWord(e,t,i,s,o){return{start:s,end:o,wordType:t,nextCharClass:i}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(s,e,i)}static _doFindPreviousWordOnLine(e,t,i){let s=0;const o=t.findPrevIntlWordBeforeOrAtOffset(e,i.column-2);for(let r=i.column-2;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(o&&r===o.index)return this._createIntlWord(o,l);if(l===0){if(s===2)return this._createWord(e,s,l,r+1,this._findEndOfWord(e,t,s,r+1));s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,r+1,this._findEndOfWord(e,t,s,r+1));s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,r+1,this._findEndOfWord(e,t,s,r+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,i,s){const o=t.findNextIntlWordAtOrAfterOffset(e,s),r=e.length;for(let a=s;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index+o.segment.length||c===1||i===1&&c===2||i===2&&c===0)return a}return r}static _findNextWordOnLine(e,t,i){const s=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(s,e,i)}static _doFindNextWordOnLine(e,t,i){let s=0;const o=e.length,r=t.findNextIntlWordAtOrAfterOffset(e,i.column-1);for(let a=i.column-1;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index)return this._createIntlWord(r,c);if(c===0){if(s===2)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=1}else if(c===2){if(s===1)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=2}else if(c===1&&s!==0)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,o-1),o):null}static _findStartOfWord(e,t,i,s){const o=t.findPrevIntlWordBeforeOrAtOffset(e,s);for(let r=s;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(o&&r===o.index)return r;if(l===1||i===1&&l===2||i===2&&l===0)return r+1}return 0}static moveWordLeft(e,t,i,s,o){let r=i.lineNumber,a=i.column;a===1&&r>1&&(r=r-1,a=t.getLineMaxColumn(r));let l=Rt._findPreviousWordOnLine(e,t,new H(r,a));if(s===0)return new H(r,l?l.start+1:1);if(s===1)return!o&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Rt._findPreviousWordOnLine(e,t,new H(r,l.start+1))),new H(r,l?l.start+1:1);if(s===3){for(;l&&l.wordType===2;)l=Rt._findPreviousWordOnLine(e,t,new H(r,l.start+1));return new H(r,l?l.start+1:1)}return l&&a<=l.end+1&&(l=Rt._findPreviousWordOnLine(e,t,new H(r,l.start+1))),new H(r,l?l.end+1:1)}static _moveWordPartLeft(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===1)return i>1?new H(i-1,e.getLineMaxColumn(i-1)):t;const o=e.getLineContent(i);for(let r=t.column-1;r>1;r--){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a===95&&l!==95)return new H(i,r);if(a===45&&l!==45)return new H(i,r);if((Uf(a)||UD(a))&&kd(l))return new H(i,r);if(kd(a)&&kd(l)&&r+1<s){const c=o.charCodeAt(r);if(Uf(c)||UD(c))return new H(i,r)}}return new H(i,1)}static moveWordRight(e,t,i,s){let o=i.lineNumber,r=i.column,a=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,r=1);let l=Rt._findNextWordOnLine(e,t,new H(o,r));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Rt._findNextWordOnLine(e,t,new H(o,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(o);else if(s===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=Rt._findNextWordOnLine(e,t,new H(o,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(o)}else l&&!a&&r>=l.start+1&&(l=Rt._findNextWordOnLine(e,t,new H(o,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(o);return new H(o,r)}static _moveWordPartRight(e,t){const i=t.lineNumber,s=e.getLineMaxColumn(i);if(t.column===s)return i<e.getLineCount()?new H(i+1,1):t;const o=e.getLineContent(i);for(let r=t.column+1;r<s;r++){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a!==95&&l===95)return new H(i,r);if(a!==45&&l===45)return new H(i,r);if((Uf(a)||UD(a))&&kd(l))return new H(i,r);if(kd(a)&&kd(l)&&r+1<s){const c=o.charCodeAt(r);if(Uf(c)||UD(c))return new H(i,r)}}return new H(i,s)}static _deleteWordLeftWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-2,o=Dc(i,s);return o+1<s?new E(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const i=e.wordSeparators,s=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(Cb.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const u=e.selection.getPosition();return new E(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}const a=new H(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const u=this._deleteWordLeftWhitespace(s,a);if(u)return u}let d=Rt._findPreviousWordOnLine(i,s,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=Rt._findPreviousWordOnLine(i,s,new H(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new E(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,i){if(!i.isEmpty())return i;const s=new H(i.positionLineNumber,i.positionColumn),o=this._deleteInsideWordWhitespace(t,s);return o||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const i=e.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=i.length;if(s===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,o))return null;let r=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(i,r))return null;for(;o>0&&this._charAtIsWhitespace(i,o-1);)o--;for(;r+1<s&&this._charAtIsWhitespace(i,r+1);)r++;return new E(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,i){const s=t.getLineContent(i.lineNumber),o=s.length;if(o===0)return i.lineNumber>1?new E(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new E(i.lineNumber,1,i.lineNumber+1,1):new E(i.lineNumber,1,i.lineNumber,1);const r=u=>u.start+1<=i.column&&i.column<=u.end+1,a=(u,h)=>(u=Math.min(u,i.column),h=Math.max(h,i.column),new E(i.lineNumber,u,i.lineNumber,h)),l=u=>{let h=u.start+1,f=u.end+1,g=!1;for(;f-1<o&&this._charAtIsWhitespace(s,f-1);)g=!0,f++;if(!g)for(;h>1&&this._charAtIsWhitespace(s,h-2);)h--;return a(h,f)},c=Rt._findPreviousWordOnLine(e,t,i);if(c&&r(c))return l(c);const d=Rt._findNextWordOnLine(e,t,i);return d&&r(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=Rt._moveWordPartLeft(e,i);return new E(i.lineNumber,i.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){const i=e.length;for(let s=t;s<i;s++){const o=e.charAt(s);if(o!==" "&&o!=="	")return s}return i}static _deleteWordRightWhitespace(e,t){const i=e.getLineContent(t.lineNumber),s=t.column-1,o=this._findFirstNonWhitespaceChar(i,s);return s+1<o?new E(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const i=e.wordSeparators,s=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new H(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;const d=s.getLineCount(),u=s.getLineMaxColumn(l);if(l===d&&c===u)return null;if(r){const f=this._deleteWordRightWhitespace(s,a);if(f)return f}let h=Rt._findNextWordOnLine(i,s,a);return t===2?h?c=h.end+1:c<u||l===d?c=u:(l++,h=Rt._findNextWordOnLine(i,s,new H(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l)):(h&&c>=h.start+1&&(h=Rt._findNextWordOnLine(i,s,new H(l,h.end+1))),h?c=h.start+1:c<u||l===d?c=u:(l++,h=Rt._findNextWordOnLine(i,s,new H(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l))),new E(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const i=t.getPosition(),s=Rt._moveWordPartRight(e,i);return new E(i.lineNumber,i.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,i){const s=new E(t,i.start+1,t,i.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,i,s){const o=Ga(t,i),r=Rt._findPreviousWordOnLine(o,e,s);if(r&&r.wordType===1&&r.start<=s.column-1&&s.column-1<=r.end)return Rt._createWordAtPosition(e,s.lineNumber,r);const a=Rt._findNextWordOnLine(o,e,s);return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?Rt._createWordAtPosition(e,s.lineNumber,a):null}static word(e,t,i,s,o){const r=Ga(e.wordSeparators,e.wordSegmenterLocales),a=Rt._findPreviousWordOnLine(r,t,o),l=Rt._findNextWordOnLine(r,t,o);if(!s){let f,g;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(o.lineNumber)),new ts(new E(o.lineNumber,f,o.lineNumber,g),1,0,new H(o.lineNumber,g),0)}let c,d;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(c=l.start+1,d=l.end+1):(c=o.column,d=o.column);const u=o.lineNumber;let h;if(i.selectionStart.containsPosition(o))h=i.selectionStart.endColumn;else if(o.isBeforeOrEqual(i.selectionStart.getStartPosition())){h=c;const f=new H(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.endColumn)}else{h=d;const f=new H(u,h);i.selectionStart.containsPosition(f)&&(h=i.selectionStart.startColumn)}return i.move(!0,u,h,0)}}class oO extends Rt{static deleteWordPartLeft(e){const t=yE([Rt.deleteWordLeft(e,0),Rt.deleteWordLeft(e,2),Rt._deleteWordPartLeft(e.model,e.selection)]);return t.sort(E.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=yE([Rt.deleteWordRight(e,0),Rt.deleteWordRight(e,2),Rt._deleteWordPartRight(e.model,e.selection)]);return t.sort(E.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,i,s){const o=yE([Rt.moveWordLeft(e,t,i,0,s),Rt.moveWordLeft(e,t,i,2,s),Rt._moveWordPartLeft(t,i)]);return o.sort(H.compare),o[2]}static moveWordPartRight(e,t,i){const s=yE([Rt.moveWordRight(e,t,i,0),Rt.moveWordRight(e,t,i,2),Rt._moveWordPartRight(t,i)]);return s.sort(H.compare),s[0]}}function yE(n){return n.filter(e=>!!e)}class es{static addCursorDown(e,t,i){const s=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];s[o++]=new St(l.modelState,l.viewState),i?s[o++]=St.fromModelState(Bt.translateDown(e.cursorConfig,e.model,l.modelState)):s[o++]=St.fromViewState(Bt.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,i){const s=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];s[o++]=new St(l.modelState,l.viewState),i?s[o++]=St.fromModelState(Bt.translateUp(e.cursorConfig,e.model,l.modelState)):s[o++]=St.fromViewState(Bt.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=this._moveToLineStart(e,a,i)}return s}static _moveToLineStart(e,t,i){const s=t.viewState.position.column,o=t.modelState.position.column,r=s===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(s===l)?this._moveToLineStartByView(e,t,i):this._moveToLineStartByModel(e,t,i)}static _moveToLineStartByView(e,t,i){return St.fromViewState(Bt.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,i))}static _moveToLineStartByModel(e,t,i){return St.fromModelState(Bt.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,i))}static moveToEndOfLine(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=this._moveToLineEnd(e,l,i,s)}return o}static _moveToLineEnd(e,t,i,s){const o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),a=o.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=r-o.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,i,s):this._moveToLineEndByView(e,t,i,s)}static _moveToLineEndByView(e,t,i,s){return St.fromViewState(Bt.moveToEndOfLine(e.cursorConfig,e,t.viewState,i,s))}static _moveToLineEndByModel(e,t,i,s){return St.fromModelState(Bt.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,i,s))}static expandLineSelection(e,t){const i=[];for(let s=0,o=t.length;s<o;s++){const r=t[s],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),i[s]=St.fromModelState(new ts(new E(a,1,a,1),0,0,new H(c,d),0))}return i}static moveToBeginningOfBuffer(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=St.fromModelState(Bt.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static moveToEndOfBuffer(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];s[o]=St.fromModelState(Bt.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,i))}return s}static selectAll(e,t){const i=e.model.getLineCount(),s=e.model.getLineMaxColumn(i);return St.fromModelState(new ts(new E(1,1,1,1),0,0,new H(i,s),0))}static line(e,t,i,s,o){const r=e.model.validatePosition(s),a=o?e.coordinatesConverter.validateViewPosition(new H(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!i){const c=e.model.getLineCount();let d=r.lineNumber+1,u=1;return d>c&&(d=c,u=e.model.getLineMaxColumn(d)),St.fromModelState(new ts(new E(r.lineNumber,1,d,u),2,0,new H(d,u),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return St.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,u=1;return d>c&&(d=c,u=e.getLineMaxColumn(d)),St.fromViewState(t.viewState.move(!0,d,u,0))}else{const c=t.modelState.selectionStart.getEndPosition();return St.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,i,s){const o=e.model.validatePosition(s);return St.fromModelState(Rt.word(e.cursorConfig,e.model,t.modelState,i,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new St(t.modelState,t.viewState);const i=t.viewState.position.lineNumber,s=t.viewState.position.column;return St.fromViewState(new ts(new E(i,s,i,s),0,0,new H(i,s),0))}static moveTo(e,t,i,s,o){if(i){if(t.modelState.selectionStartKind===1)return this.word(e,t,i,s);if(t.modelState.selectionStartKind===2)return this.line(e,t,i,s,o)}const r=e.model.validatePosition(s),a=o?e.coordinatesConverter.validateViewPosition(new H(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return St.fromViewState(t.viewState.move(i,a.lineNumber,a.column,0))}static simpleMove(e,t,i,s,o,r){switch(i){case 0:return r===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,o);case 1:return r===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,o);case 2:return r===2?this._moveUpByViewLines(e,t,s,o):this._moveUpByModelLines(e,t,s,o);case 3:return r===2?this._moveDownByViewLines(e,t,s,o):this._moveDownByModelLines(e,t,s,o);case 4:return r===2?t.map(a=>St.fromViewState(Bt.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>St.fromModelState(Bt.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return r===2?t.map(a=>St.fromViewState(Bt.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>St.fromModelState(Bt.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,i,s,o){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(i){case 11:{const l=this._firstLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];l[c]=this.findPositionInViewportIfOutside(e,u,r,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,i,s){const o=t.viewState.position.lineNumber;if(i.startLineNumber<=o&&o<=i.endLineNumber-1)return new St(t.modelState,t.viewState);{let r;o>i.endLineNumber-1?r=i.endLineNumber-1:o<i.startLineNumber?r=i.startLineNumber:r=o;const a=Bt.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return St.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+i-1)}static _lastLineNumberInRange(e,t,i){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-i+1)}static _moveLeft(e,t,i,s){return t.map(o=>St.fromViewState(Bt.moveLeft(e.cursorConfig,e,o.viewState,i,s)))}static _moveHalfLineLeft(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[o]=St.fromViewState(Bt.moveLeft(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveRight(e,t,i,s){return t.map(o=>St.fromViewState(Bt.moveRight(e.cursorConfig,e,o.viewState,i,s)))}static _moveHalfLineRight(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[o]=St.fromViewState(Bt.moveRight(e.cursorConfig,e,a.viewState,i,c))}return s}static _moveDownByViewLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=St.fromViewState(Bt.moveDown(e.cursorConfig,e,l.viewState,i,s))}return o}static _moveDownByModelLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=St.fromModelState(Bt.moveDown(e.cursorConfig,e.model,l.modelState,i,s))}return o}static _moveUpByViewLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=St.fromViewState(Bt.moveUp(e.cursorConfig,e,l.viewState,i,s))}return o}static _moveUpByModelLines(e,t,i,s){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=St.fromModelState(Bt.moveUp(e.cursorConfig,e.model,l.modelState,i,s))}return o}static _moveToViewPosition(e,t,i,s,o){return St.fromViewState(t.viewState.move(i,s,o,0))}static _moveToModelPosition(e,t,i,s,o){return St.fromModelState(t.modelState.move(i,s,o,0))}static _moveToViewMinColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewCenterColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewMaxColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[o]=this._moveToViewPosition(e,a,i,l,c)}return s}}var wP;(function(n){const e=function(i){if(!Gn(i))return!1;const s=i;return!(!Vo(s.to)||!Ks(s.select)&&!Nle(s.select)||!Ks(s.by)&&!Vo(s.by)||!Ks(s.value)&&!jg(s.value))};n.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},n.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(i){if(!i.to)return null;let s;switch(i.to){case n.RawDirection.Left:s=0;break;case n.RawDirection.Right:s=1;break;case n.RawDirection.Up:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.PrevBlankLine:s=4;break;case n.RawDirection.NextBlankLine:s=5;break;case n.RawDirection.WrappedLineStart:s=6;break;case n.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case n.RawDirection.WrappedLineColumnCenter:s=8;break;case n.RawDirection.WrappedLineEnd:s=9;break;case n.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case n.RawDirection.ViewPortTop:s=11;break;case n.RawDirection.ViewPortBottom:s=13;break;case n.RawDirection.ViewPortCenter:s=12;break;case n.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let o=0;switch(i.by){case n.RawUnit.Line:o=1;break;case n.RawUnit.WrappedLine:o=2;break;case n.RawUnit.Character:o=3;break;case n.RawUnit.HalfLine:o=4;break}return{direction:s,unit:o,select:!!i.select,value:i.value||1}}n.parse=t})(wP||(wP={}));class o${constructor(e,t,i){this._indentRulesSupport=t,this._indentationLineProcessor=new Dfe(e,i)}shouldIncrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(i)}shouldDecrease(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(i)}shouldIgnore(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(i)}shouldIndentNextLine(e,t){const i=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(i)}}class r${constructor(e,t){this.model=e,this.indentationLineProcessor=new Dfe(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),i=this._getProcessedTokensAfterRange(e),s=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:i,previousLineProcessedTokens:s}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),i=xp(t,e.startColumn-1);let s;if(a$(this.model,e.getStartPosition())){const r=e.startColumn-1-i.firstCharOffset,a=i.firstCharOffset,l=a+r;s=t.sliceAndInflate(a,l,0)}else{const r=e.startColumn-1;s=t.sliceAndInflate(0,r,0)}return this.indentationLineProcessor.getProcessedTokens(s)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const i=this.model.tokenization.getLineTokens(t.lineNumber),s=xp(i,t.column-1),o=t.column-1-s.firstCharOffset,r=s.firstCharOffset+o,a=s.firstCharOffset+s.getLineLength(),l=i.sliceAndInflate(r,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=f=>{this.model.tokenization.forceTokenization(f);const g=this.model.tokenization.getLineTokens(f),m=this.model.getLineMaxColumn(f)-1;return xp(g,m)};this.model.tokenization.forceTokenization(e.startLineNumber);const i=this.model.tokenization.getLineTokens(e.startLineNumber),s=xp(i,e.startColumn-1),o=Xn.createEmpty("",s.languageIdCodec),r=e.startLineNumber-1;if(r===0||!(s.firstCharOffset===0))return o;const c=t(r);if(!(s.languageId===c.languageId))return o;const u=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(u)}}class Dfe{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){var r,a;const i=(l,c)=>{const d=Zt(l);return c+l.substring(d.length)};(a=(r=this.model.tokenization).forceTokenization)==null||a.call(r,e);const s=this.model.tokenization.getLineTokens(e);let o=this.getProcessedTokens(s).getLineContent();return t!==void 0&&(o=i(o,t)),o}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,i=e.getLanguageId(0),o=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew.getBracketRegExp({global:!0}),r=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let d=e.getTokenText(l);t(c)&&(d=d.replace(o,""));const u=e.getMetadata(l);r.push({text:d,metadata:u})}),Xn.createFromTextAndMetadata(r,e.languageIdCodec)}}function a$(n,e){n.tokenization.forceTokenization(e.lineNumber);const t=n.tokenization.getLineTokens(e.lineNumber),i=xp(t,e.column-1),s=i.firstCharOffset===0,o=t.getLanguageId(0)===i.languageId;return!s&&!o}function gC(n,e,t,i){e.tokenization.forceTokenization(t.startLineNumber);const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=i.getLanguageConfiguration(s);if(!o)return null;const a=new r$(e,i).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),d=a.afterRangeProcessedTokens.getLineContent(),u=o.onEnter(n,l,c,d);if(!u)return null;const h=u.indentAction;let f=u.appendText;const g=u.removeText||0;f?h===mn.Indent&&(f="	"+f):h===mn.Indent||h===mn.IndentOutdent?f="	":f="";let m=lde(e,t.startLineNumber,t.startColumn);return g&&(m=m.substring(0,m.length-g)),{indentAction:h,appendText:f,removeText:g,indentation:m}}var BBe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},HBe=function(n,e){return function(t,i){e(t,i,n)}},UN;const z4=Object.create(null);function Mm(n,e){if(e<=0)return"";z4[n]||(z4[n]=["",n]);const t=z4[n];for(let i=t.length;i<=e;i++)t[i]=t[i-1]+n;return t[e]}let Za=UN=class{static unshiftIndent(e,t,i,s,o){const r=yn.visibleColumnFromColumn(e,t,i);if(o){const a=Mm(" ",s),c=yn.prevIndentTabStop(r,s)/s;return Mm(a,c)}else{const a="	",c=yn.prevRenderTabStop(r,i)/i;return Mm(a,c)}}static shiftIndent(e,t,i,s,o){const r=yn.visibleColumnFromColumn(e,t,i);if(o){const a=Mm(" ",s),c=yn.nextIndentTabStop(r,s)/s;return Mm(a,c)}else{const a="	",c=yn.nextRenderTabStop(r,i)/i;return Mm(a,c)}}constructor(e,t,i){this._languageConfigurationService=i,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,i){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,i):e.addEditOperation(t,i)}getEditOperations(e,t){const i=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&i!==s&&(s=s-1);const{tabSize:o,indentSize:r,insertSpaces:a}=this._opts,l=i===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(i))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let u=i;u<=s;u++,c=d){d=0;const h=e.getLineContent(u);let f=Zs(h);if(this._opts.isUnshift&&(h.length===0||f===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(f===-1&&(f=h.length),u>1&&yn.visibleColumnFromColumn(h,f+1,o)%r!==0&&e.tokenization.isCheapToTokenize(u-1)){const _=gC(this._opts.autoIndent,e,new E(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)),this._languageConfigurationService);if(_){if(d=c,_.appendText)for(let b=0,v=_.appendText.length;b<v&&d<r&&_.appendText.charCodeAt(b)===32;b++)d++;_.removeText&&(d=Math.max(0,d-_.removeText));for(let b=0;b<d&&!(f===0||h.charCodeAt(f-1)!==32);b++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=UN.unshiftIndent(h,f+1,o,r,a):g=UN.shiftIndent(h,f+1,o,r,a),this._addEditOperation(t,new E(u,1,u,f+1),g),u===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(i)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?Mm(" ",r):"	";for(let d=i;d<=s;d++){const u=e.getLineContent(d);let h=Zs(u);if(!(this._opts.isUnshift&&(u.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&u.length===0)&&(h===-1&&(h=u.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,r);for(let f=0;f<h;f++)if(u.charCodeAt(f)===9){h=f+1;break}this._addEditOperation(t,new E(d,1,d,h+1),"")}else this._addEditOperation(t,new E(d,1,d,1),c),d===i&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const s=t.getInverseEditOperations()[0];return new Ce(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const i=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const s=this._selection.startColumn;return i.startColumn<=s?i:i.getDirection()===0?new Ce(i.startLineNumber,s,i.endLineNumber,i.endColumn):new Ce(i.endLineNumber,i.endColumn,i.startLineNumber,s)}return i}};Za=UN=BBe([HBe(2,Ri)],Za);class jBe{constructor(e,t,i){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=i}getEditOperations(e,t){t.addTrackedEditOperation(new E(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new E(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const i=t.getInverseEditOperations(),s=i[0].range,o=i[1].range;return new Ce(s.endLineNumber,s.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}class VBe{constructor(e,t,i){this._position=e,this._text=t,this._charAfter=i}getEditOperations(e,t){t.addTrackedEditOperation(new E(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return new Ce(s.endLineNumber,s.startColumn,s.endLineNumber,s.endColumn-this._charAfter.length)}}function zBe(n,e,t){const i=n.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let s,o=-1;for(s=e-1;s>=1;s--){if(n.tokenization.getLanguageIdAtPosition(s,0)!==i)return o;const r=n.getLineContent(s);if(t.shouldIgnore(s)||/^\s+$/.test(r)||r===""){o=s;continue}return s}}return-1}function Dk(n,e,t,i=!0,s){if(n<4)return null;const o=s.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;const r=new o$(e,o,s);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=zBe(e,t,r);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(r.shouldIncrease(a)||r.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:Zt(l),action:mn.Indent,line:a}}else if(r.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:Zt(l),action:null,line:a}}else{if(a===1)return{indentation:Zt(e.getLineContent(a)),action:null,line:a};const l=a-1,c=o.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let u=l-1;u>0;u--)if(!r.shouldIndentNextLine(u)){d=u;break}return{indentation:Zt(e.getLineContent(d+1)),action:null,line:d+1}}if(i)return{indentation:Zt(e.getLineContent(a)),action:null,line:a};for(let d=a;d>0;d--){if(r.shouldIncrease(d))return{indentation:Zt(e.getLineContent(d)),action:mn.Indent,line:d};if(r.shouldIndentNextLine(d)){let u=0;for(let h=d-1;h>0;h--)if(!r.shouldIndentNextLine(d)){u=h;break}return{indentation:Zt(e.getLineContent(u+1)),action:null,line:u+1}}else if(r.shouldDecrease(d))return{indentation:Zt(e.getLineContent(d)),action:null,line:d}}return{indentation:Zt(e.getLineContent(1)),action:null,line:1}}}function SS(n,e,t,i,s,o){if(n<4)return null;const r=o.getLanguageConfiguration(t);if(!r)return null;const a=o.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=new o$(e,a,o),c=Dk(n,e,i,void 0,o);if(c){const d=c.line;if(d!==void 0){let u=!0;for(let h=d;h<i-1;h++)if(!/^\s*$/.test(e.getLineContent(h))){u=!1;break}if(u){const h=r.onEnter(n,"",e.getLineContent(d),"");if(h){let f=Zt(e.getLineContent(d));return h.removeText&&(f=f.substring(0,f.length-h.removeText)),h.indentAction===mn.Indent||h.indentAction===mn.IndentOutdent?f=s.shiftIndent(f):h.indentAction===mn.Outdent&&(f=s.unshiftIndent(f)),l.shouldDecrease(i)&&(f=s.unshiftIndent(f)),h.appendText&&(f+=h.appendText),Zt(f)}}}return l.shouldDecrease(i)?c.action===mn.Indent?c.indentation:s.unshiftIndent(c.indentation):c.action===mn.Indent?s.shiftIndent(c.indentation):c.indentation}return null}function UBe(n,e,t,i,s){if(n<4)return null;const o=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=s.getLanguageConfiguration(o).indentRulesSupport;if(!r)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new r$(e,s).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,d=l.beforeRangeProcessedTokens,u=Zt(d.getLineContent()),h=qBe(e,t.startLineNumber,d),f=a$(e,t.getStartPosition()),g=e.getLineContent(t.startLineNumber),m=Zt(g),_=Dk(n,h,t.startLineNumber+1,void 0,s);if(!_){const v=f?m:u;return{beforeEnter:v,afterEnter:v}}let b=f?m:_.indentation;return _.action===mn.Indent&&(b=i.shiftIndent(b)),r.shouldDecrease(c.getLineContent())&&(b=i.unshiftIndent(b)),{beforeEnter:f?m:u,afterEnter:b}}function $Be(n,e,t,i,s,o){const r=n.autoIndent;if(r<4||a$(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=o.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const u=new r$(e,o).getProcessedTokenContextAroundRange(t),h=u.beforeRangeProcessedTokens.getLineContent(),f=u.afterRangeProcessedTokens.getLineContent(),g=h+f,m=h+i+f;if(!c.shouldDecrease(g)&&c.shouldDecrease(m)){const b=Dk(r,e,t.startLineNumber,!1,o);if(!b)return null;let v=b.indentation;return b.action!==mn.Indent&&(v=s.unshiftIndent(v)),v}const _=t.startLineNumber-1;if(_>0){const b=e.getLineContent(_);if(c.shouldIndentNextLine(b)&&c.shouldIncrease(m)){const v=Dk(r,e,t.startLineNumber,!1,o),w=v==null?void 0:v.indentation;if(w!==void 0){const y=e.getLineContent(t.startLineNumber),S=Zt(y),k=s.shiftIndent(w)===S,D=/^\s*$/.test(g),N=n.autoClosingPairs.autoClosingPairsOpenByEnd.get(i),O=N&&N.length>0&&D;if(k&&O)return w}}}return null}function Efe(n,e,t){const i=t.getLanguageConfiguration(n.getLanguageId()).indentRulesSupport;return!i||e<1||e>n.getLineCount()?null:i.getIndentMetadata(n.getLineContent(e))}function qBe(n,e,t){return{tokenization:{getLineTokens:s=>s===e?t:n.tokenization.getLineTokens(s),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(s,o)=>n.getLanguageIdAtPosition(s,o)},getLineContent:s=>s===e?t.getLineContent():n.getLineContent(s)}}class KBe{static getEdits(e,t,i,s,o){if(!o&&this._isAutoIndentType(e,t,i)){const r=[];for(const l of i){const c=this._findActualIndentationForSelection(e,t,l,s);if(c===null)return;r.push({selection:l,indentation:c})}const a=n8.getAutoClosingPairClose(e,t,i,s,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,r,s,a)}}static _isAutoIndentType(e,t,i){if(e.autoIndent<4)return!1;for(let s=0,o=i.length;s<o;s++)if(!t.tokenization.isCheapToTokenize(i[s].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,i,s){const o=$Be(e,t,i,s,{shiftIndent:a=>d$(e,a),unshiftIndent:a=>CP(e,a)},e.languageConfigurationService);if(o===null)return null;const r=lde(t,i.startLineNumber,i.startColumn);return o===e.normalizeIndentation(r)?null:o}static _getIndentationAndAutoClosingPairEdits(e,t,i,s,o){const r=i.map(({selection:l,indentation:c})=>{if(o!==null){const d=this._getEditFromIndentationAndSelection(e,t,c,l,s,!1);return new sHe(d,l,s,o)}else{const d=this._getEditFromIndentationAndSelection(e,t,c,l,s,!0);return Gm(d.range,d.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new Ko(4,r,a)}static _getEditFromIndentationAndSelection(e,t,i,s,o,r=!0){const a=s.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(i);if(l!==0){const u=t.getLineContent(a);c+=u.substring(l-1,s.startColumn-1)}return c+=r?o:"",{range:new E(a,1,s.endLineNumber,s.endColumn),text:c}}}class GBe{static getEdits(e,t,i,s,o,r){if(Nfe(t,i,s,o,r))return this._runAutoClosingOvertype(e,s,r)}static _runAutoClosingOvertype(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const l=t[o].getPosition(),c=new E(l.lineNumber,l.column,l.lineNumber,l.column+1);s[o]=new ps(c,i)}return new Ko(4,s,{shouldPushStackElementBefore:aO(e,4),shouldPushStackElementAfter:!1})}}class YBe{static getEdits(e,t,i,s,o){if(Nfe(e,t,i,s,o)){const r=i.map(a=>new ps(new E(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new Ko(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class n8{static getEdits(e,t,i,s,o,r){if(!r){const a=this.getAutoClosingPairClose(e,t,i,s,o);if(a!==null)return this._runAutoClosingOpenCharType(i,s,o,a)}}static _runAutoClosingOpenCharType(e,t,i,s){const o=[];for(let r=0,a=e.length;r<a;r++){const l=e[r];o[r]=new nHe(l,t,!i,s)}return new Ko(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,i,s,o){for(const g of i)if(!g.isEmpty())return null;const r=i.map(g=>{const m=g.getPosition();return o?{lineNumber:m.lineNumber,beforeColumn:m.column-s.length,afterColumn:m.column}:{lineNumber:m.lineNumber,beforeColumn:m.column,afterColumn:m.column}}),a=this._findAutoClosingPairOpen(e,t,r.map(g=>new H(g.lineNumber,g.beforeColumn)),s);if(!a)return null;let l,c;if(im(s)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const u=this._findContainedAutoClosingPair(e,a),h=u?u.close:"";let f=!0;for(const g of r){const{lineNumber:m,beforeColumn:_,afterColumn:b}=g,v=t.getLineContent(m),w=v.substring(0,_-1),y=v.substring(b-1);if(y.startsWith(h)||(f=!1),y.length>0){const D=y.charAt(0);if(!this._isBeforeClosingBrace(e,y)&&!c(D))return null}if(a.open.length===1&&(s==="'"||s==='"')&&l!=="always"){const D=Ga(e.wordSeparators,[]);if(w.length>0){const N=w.charCodeAt(w.length-1);if(D.get(N)===0)return null}}if(!t.tokenization.isCheapToTokenize(m))return null;t.tokenization.forceTokenization(m);const S=t.tokenization.getLineTokens(m),x=xp(S,_-1);if(!a.shouldAutoClose(x,_-x.firstCharOffset))return null;const k=a.findNeutralCharacter();if(k){const D=t.tokenization.getTokenTypeIfInsertingCharacter(m,_,k);if(!a.isOK(D))return null}}return f?a.close.substring(0,a.close.length-h.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const i=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];let o=null;for(const r of s)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!o||r.open.length>o.open.length)&&(o=r);return o}static _findAutoClosingPairOpen(e,t,i,s){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!o)return null;let r=null;for(const a of o)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of i)if(t.getValueInRange(new E(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(r=a)}return r}static _isBeforeClosingBrace(e,t){const i=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],r=s.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!r&&a}}class ZBe{static getEdits(e,t,i,s,o){if(!o&&this._isSurroundSelectionType(e,t,i,s))return this._runSurroundSelectionType(e,i,s)}static _runSurroundSelectionType(e,t,i){const s=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=e.surroundingPairs[i];s[o]=new jBe(a,i,l)}return new Ko(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,i,s){if(!Ife(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const o=im(s);for(const r of i){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),d=l===r.startLineNumber?r.startColumn-1:0,u=l===r.endLineNumber?r.endColumn-1:c.length,h=c.substring(d,u);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(o&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(im(l))return!1}}return!0}}class QBe{static getEdits(e,t,i,s,o,r){if(!r&&this._isTypeInterceptorElectricChar(t,i,s)){const a=this._typeInterceptorElectricChar(e,t,i,s[0],o);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,i){return!!(i.length===1&&t.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,i,s,o){if(!t.electricChars.hasOwnProperty(o)||!s.isEmpty())return null;const r=s.getPosition();i.tokenization.forceTokenization(r.lineNumber);const a=i.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(o,a,r.column)}catch(c){return He(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,d=i.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(d){if(d.startLineNumber===r.lineNumber)return null;const u=i.getLineContent(d.startLineNumber),h=Zt(u),f=t.normalizeIndentation(h),g=i.getLineContent(r.lineNumber),m=i.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,_=g.substring(m-1,r.column-1),b=f+_+o,v=new E(r.lineNumber,1,r.lineNumber,r.column),w=new ps(v,b);return new Ko(c$(b,e),[w],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class XBe{static getEdits(e,t,i){const s=[];for(let r=0,a=t.length;r<a;r++)s[r]=new ps(t[r],i);const o=c$(i,e);return new Ko(o,s,{shouldPushStackElementBefore:aO(e,o),shouldPushStackElementAfter:!1})}}class rO{static getEdits(e,t,i,s,o){if(!o&&s===`
`){const r=[];for(let a=0,l=i.length;a<l;a++)r[a]=this._enter(e,t,!1,i[a]);return new Ko(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,i,s){if(e.autoIndent===0)return Gm(s,`
`,i);if(!t.tokenization.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(s.startLineNumber),c=Zt(l).substring(0,s.startColumn-1);return Gm(s,`
`+e.normalizeIndentation(c),i)}const o=gC(e.autoIndent,t,s,e.languageConfigurationService);if(o){if(o.indentAction===mn.None)return Gm(s,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===mn.Indent)return Gm(s,`
`+e.normalizeIndentation(o.indentation+o.appendText),i);if(o.indentAction===mn.IndentOutdent){const l=e.normalizeIndentation(o.indentation),c=e.normalizeIndentation(o.indentation+o.appendText),d=`
`+c+`
`+l;return i?new zN(s,d,!0):new vP(s,d,-1,c.length-l.length,!0)}else if(o.indentAction===mn.Outdent){const l=CP(e,o.indentation);return Gm(s,`
`+e.normalizeIndentation(l+o.appendText),i)}}const r=t.getLineContent(s.startLineNumber),a=Zt(r).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=UBe(e.autoIndent,t,s,{unshiftIndent:c=>CP(e,c),shiftIndent:c=>d$(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,s.getEndPosition());const d=s.endColumn,u=t.getLineContent(s.endLineNumber),h=Zs(u);if(h>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,h+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),i)return new zN(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=h+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new vP(s,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return Gm(s,`
`+e.normalizeIndentation(a),i)}static lineInsertBefore(e,t,i){if(t===null||i===null)return[];const s=[];for(let o=0,r=i.length;o<r;o++){let a=i[o].positionLineNumber;if(a===1)s[o]=new zN(new E(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);s[o]=this._enter(e,t,!1,new E(a,l,a,l))}}return s}static lineInsertAfter(e,t,i){if(t===null||i===null)return[];const s=[];for(let o=0,r=i.length;o<r;o++){const a=i[o].positionLineNumber,l=t.getLineMaxColumn(a);s[o]=this._enter(e,t,!1,new E(a,l,a,l))}return s}static lineBreakInsert(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++)s[o]=this._enter(e,t,!0,i[o]);return s}}class JBe{static getEdits(e,t,i,s,o,r){const a=this._distributePasteToCursors(e,i,s,o,r);return a?(i=i.sort(E.compareRangesUsingStarts),this._distributedPaste(e,t,i,a)):this._simplePaste(e,t,i,s,o)}static _distributePasteToCursors(e,t,i,s,o){if(s||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substring(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substring(0,i.length-1));const r=ru(i);if(r.length===t.length)return r}return null}static _distributedPaste(e,t,i,s){const o=[];for(let r=0,a=i.length;r<a;r++)o[r]=new ps(i[r],s[r]);return new Ko(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,i,s,o){const r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.getPosition();if(o&&!c.isEmpty()&&(o=!1),o&&s.indexOf(`
`)!==s.length-1&&(o=!1),o){const u=new E(d.lineNumber,1,d.lineNumber,1);r[a]=new s$(u,s,c,!0)}else r[a]=new ps(c,s)}return new Ko(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class eHe{static getEdits(e,t,i,s,o,r,a,l){const c=s.map(d=>this._compositionType(i,d,o,r,a,l));return new Ko(4,c,{shouldPushStackElementBefore:aO(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,i,s,o,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),d=new E(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===i&&r===0?null:new vP(d,i,0,r)}}class tHe{static getEdits(e,t,i){const s=[];for(let r=0,a=t.length;r<a;r++)s[r]=new ps(t[r],i);const o=c$(i,e);return new Ko(o,s,{shouldPushStackElementBefore:aO(e,o),shouldPushStackElementAfter:!1})}}class iHe{static getCommands(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++){const a=i[o];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){s[o]=new ps(new E(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}s[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[o]=new Za(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return s}static _goodIndentForLine(e,t,i){let s=null,o="";const r=Dk(e.autoIndent,t,i,!1,e.languageConfigurationService);if(r)s=r.action,o=r.indentation;else if(i>1){let a;for(a=i-1;a>=1;a--){const d=t.getLineContent(a);if(Dc(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=gC(e.autoIndent,t,new E(a,l,a,l),e.languageConfigurationService);c&&(o=c.indentation+c.appendText)}return s&&(s===mn.Indent&&(o=d$(e,o)),s===mn.Outdent&&(o=CP(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,i,s){let o="";const r=i.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)o+=" "}else o="	";return new ps(i,o,s)}}class l$ extends vP{constructor(e,t,i,s,o,r){super(e,t,i,s),this._openCharacter=o,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,i){return this.closeCharacterRange=new E(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new E(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,i)}}class nHe extends l${constructor(e,t,i,s){const o=(i?t:"")+s,r=0,a=-s.length;super(e,o,r,a,t,s)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,s,t)}}class sHe extends l${constructor(e,t,i,s){const o=i+s,r=0,a=i.length;super(t,o,r,a,i,s),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:o}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length!==2)throw new Error("There should be two inverse edit operations!");const s=i[0].range,o=i[1].range,r=s.plusRange(o);return this._computeCursorStateWithRange(e,r,t)}}function c$(n,e){return n===" "?e===5||e===6?6:5:4}function aO(n,e){return yee(n)&&!yee(e)?!0:n===5?!1:Cee(n)!==Cee(e)}function Cee(n){return n===6||n===5?"space":n}function yee(n){return n===4||n===5||n===6}function Nfe(n,e,t,i,s){if(n.autoClosingOvertype==="never"||!n.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==s)return!1;const u=im(s);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&u)return!1;if(n.autoClosingOvertype==="auto"){let f=!1;for(let g=0,m=i.length;g<m;g++){const _=i[g];if(l.lineNumber===_.startLineNumber&&l.column===_.startColumn){f=!0;break}}if(!f)return!1}}return!0}function Gm(n,e,t){return t?new zN(n,e,!0):new ps(n,e,!0)}function d$(n,e,t){return t=t||1,Za.shiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function CP(n,e,t){return t=t||1,Za.unshiftIndent(e,e.length+t,n.tabSize,n.indentSize,n.insertSpaces)}function Ife(n,e){return im(e)?n.autoSurround==="quotes"||n.autoSurround==="languageDefined":n.autoSurround==="brackets"||n.autoSurround==="languageDefined"}class Tf{static indent(e,t,i){if(t===null||i===null)return[];const s=[];for(let o=0,r=i.length;o<r;o++)s[o]=new Za(i[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static outdent(e,t,i){const s=[];for(let o=0,r=i.length;o<r;o++)s[o]=new Za(i[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static paste(e,t,i,s,o,r){return JBe.getEdits(e,t,i,s,o,r)}static tab(e,t,i){return iHe.getCommands(e,t,i)}static compositionType(e,t,i,s,o,r,a,l){return eHe.getEdits(e,t,i,s,o,r,a,l)}static compositionEndWithInterceptors(e,t,i,s,o,r){if(!s)return null;let a=null;for(const h of s)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const h of s)if(h.deletedText.length!==0){c=!0;break}if(c){if(!Ife(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const h=im(l);for(const m of s)if(m.deletedSelectionStart!==0||m.deletedSelectionEnd!==m.deletedText.length||/^[ \t]+$/.test(m.deletedText)||h&&im(m.deletedText))return null;const f=[];for(const m of o){if(!m.isEmpty())return null;f.push(m.getPosition())}if(f.length!==s.length)return null;const g=[];for(let m=0,_=f.length;m<_;m++)g.push(new VBe(f[m],s[m].deletedText,t.surroundingPairs[l]));return new Ko(4,g,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=YBe.getEdits(t,i,o,r,l);if(d!==void 0)return d;const u=n8.getEdits(t,i,o,l,!0,!1);return u!==void 0?u:null}static typeWithInterceptors(e,t,i,s,o,r,a){const l=rO.getEdits(i,s,o,a,e);if(l!==void 0)return l;const c=KBe.getEdits(i,s,o,a,e);if(c!==void 0)return c;const d=GBe.getEdits(t,i,s,o,r,a);if(d!==void 0)return d;const u=n8.getEdits(i,s,o,a,!1,e);if(u!==void 0)return u;const h=ZBe.getEdits(i,s,o,a,e);if(h!==void 0)return h;const f=QBe.getEdits(t,i,s,o,a,e);return f!==void 0?f:XBe.getEdits(t,o,a)}static typeWithoutInterceptors(e,t,i,s,o){return tHe.getEdits(e,s,o)}}class oHe{constructor(e,t,i,s,o,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=i,this.insertedText=s,this.insertedSelectionStart=o,this.insertedSelectionEnd=r}}var I;(function(n){n.editorSimpleInput=new me("editorSimpleInput",!1,!0),n.editorTextFocus=new me("editorTextFocus",!1,p("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),n.focus=new me("editorFocus",!1,p("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),n.textInputFocus=new me("textInputFocus",!1,p("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),n.readOnly=new me("editorReadonly",!1,p("editorReadonly","Whether the editor is read-only")),n.inDiffEditor=new me("inDiffEditor",!1,p("inDiffEditor","Whether the context is a diff editor")),n.isEmbeddedDiffEditor=new me("isEmbeddedDiffEditor",!1,p("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),n.inMultiDiffEditor=new me("inMultiDiffEditor",!1,p("inMultiDiffEditor","Whether the context is a multi diff editor")),n.multiDiffEditorAllCollapsed=new me("multiDiffEditorAllCollapsed",void 0,p("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),n.hasChanges=new me("diffEditorHasChanges",!1,p("diffEditorHasChanges","Whether the diff editor has changes")),n.comparingMovedCode=new me("comparingMovedCode",!1,p("comparingMovedCode","Whether a moved code block is selected for comparison")),n.accessibleDiffViewerVisible=new me("accessibleDiffViewerVisible",!1,p("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),n.diffEditorRenderSideBySideInlineBreakpointReached=new me("diffEditorRenderSideBySideInlineBreakpointReached",!1,p("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),n.diffEditorInlineMode=new me("diffEditorInlineMode",!1,p("diffEditorInlineMode","Whether inline mode is active")),n.diffEditorOriginalWritable=new me("diffEditorOriginalWritable",!1,p("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),n.diffEditorModifiedWritable=new me("diffEditorModifiedWritable",!1,p("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),n.diffEditorOriginalUri=new me("diffEditorOriginalUri","",p("diffEditorOriginalUri","The uri of the original document")),n.diffEditorModifiedUri=new me("diffEditorModifiedUri","",p("diffEditorModifiedUri","The uri of the modified document")),n.columnSelection=new me("editorColumnSelection",!1,p("editorColumnSelection","Whether `editor.columnSelection` is enabled")),n.writable=n.readOnly.toNegated(),n.hasNonEmptySelection=new me("editorHasSelection",!1,p("editorHasSelection","Whether the editor has text selected")),n.hasOnlyEmptySelection=n.hasNonEmptySelection.toNegated(),n.hasMultipleSelections=new me("editorHasMultipleSelections",!1,p("editorHasMultipleSelections","Whether the editor has multiple selections")),n.hasSingleSelection=n.hasMultipleSelections.toNegated(),n.tabMovesFocus=new me("editorTabMovesFocus",!1,p("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),n.tabDoesNotMoveFocus=n.tabMovesFocus.toNegated(),n.isInEmbeddedEditor=new me("isInEmbeddedEditor",!1,!0),n.canUndo=new me("canUndo",!1,!0),n.canRedo=new me("canRedo",!1,!0),n.hoverVisible=new me("editorHoverVisible",!1,p("editorHoverVisible","Whether the editor hover is visible")),n.hoverFocused=new me("editorHoverFocused",!1,p("editorHoverFocused","Whether the editor hover is focused")),n.stickyScrollFocused=new me("stickyScrollFocused",!1,p("stickyScrollFocused","Whether the sticky scroll is focused")),n.stickyScrollVisible=new me("stickyScrollVisible",!1,p("stickyScrollVisible","Whether the sticky scroll is visible")),n.standaloneColorPickerVisible=new me("standaloneColorPickerVisible",!1,p("standaloneColorPickerVisible","Whether the standalone color picker is visible")),n.standaloneColorPickerFocused=new me("standaloneColorPickerFocused",!1,p("standaloneColorPickerFocused","Whether the standalone color picker is focused")),n.inCompositeEditor=new me("inCompositeEditor",void 0,p("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),n.notInCompositeEditor=n.inCompositeEditor.toNegated(),n.languageId=new me("editorLangId","",p("editorLangId","The language identifier of the editor")),n.hasCompletionItemProvider=new me("editorHasCompletionItemProvider",!1,p("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),n.hasCodeActionsProvider=new me("editorHasCodeActionsProvider",!1,p("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),n.hasCodeLensProvider=new me("editorHasCodeLensProvider",!1,p("editorHasCodeLensProvider","Whether the editor has a code lens provider")),n.hasDefinitionProvider=new me("editorHasDefinitionProvider",!1,p("editorHasDefinitionProvider","Whether the editor has a definition provider")),n.hasDeclarationProvider=new me("editorHasDeclarationProvider",!1,p("editorHasDeclarationProvider","Whether the editor has a declaration provider")),n.hasImplementationProvider=new me("editorHasImplementationProvider",!1,p("editorHasImplementationProvider","Whether the editor has an implementation provider")),n.hasTypeDefinitionProvider=new me("editorHasTypeDefinitionProvider",!1,p("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),n.hasHoverProvider=new me("editorHasHoverProvider",!1,p("editorHasHoverProvider","Whether the editor has a hover provider")),n.hasDocumentHighlightProvider=new me("editorHasDocumentHighlightProvider",!1,p("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),n.hasDocumentSymbolProvider=new me("editorHasDocumentSymbolProvider",!1,p("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),n.hasReferenceProvider=new me("editorHasReferenceProvider",!1,p("editorHasReferenceProvider","Whether the editor has a reference provider")),n.hasRenameProvider=new me("editorHasRenameProvider",!1,p("editorHasRenameProvider","Whether the editor has a rename provider")),n.hasSignatureHelpProvider=new me("editorHasSignatureHelpProvider",!1,p("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),n.hasInlayHintsProvider=new me("editorHasInlayHintsProvider",!1,p("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),n.hasDocumentFormattingProvider=new me("editorHasDocumentFormattingProvider",!1,p("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),n.hasDocumentSelectionFormattingProvider=new me("editorHasDocumentSelectionFormattingProvider",!1,p("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),n.hasMultipleDocumentFormattingProvider=new me("editorHasMultipleDocumentFormattingProvider",!1,p("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),n.hasMultipleDocumentSelectionFormattingProvider=new me("editorHasMultipleDocumentSelectionFormattingProvider",!1,p("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(I||(I={}));const It=0;class Gi extends xn{runEditorCommand(e,t,i){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,i||{})}}var us;(function(n){const e=function(i){if(!Gn(i))return!1;const s=i;return!(!Vo(s.to)||!Ks(s.by)&&!Vo(s.by)||!Ks(s.value)&&!jg(s.value)||!Ks(s.revealCursor)&&!Nle(s.revealCursor))};n.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},n.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},n.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(i){let s;switch(i.to){case n.RawDirection.Up:s=1;break;case n.RawDirection.Right:s=2;break;case n.RawDirection.Down:s=3;break;case n.RawDirection.Left:s=4;break;default:return null}let o;switch(i.by){case n.RawUnit.Line:o=1;break;case n.RawUnit.WrappedLine:o=2;break;case n.RawUnit.Page:o=3;break;case n.RawUnit.HalfPage:o=4;break;case n.RawUnit.Editor:o=5;break;case n.RawUnit.Column:o=6;break;default:o=2}const r=Math.floor(i.value||1),a=!!i.revealCursor;return{direction:s,unit:o,value:r,revealCursor:a,select:!!i.select}}n.parse=t})(us||(us={}));var hw;(function(n){const e=function(t){if(!Gn(t))return!1;const i=t;return!(!jg(i.lineNumber)&&!Vo(i.lineNumber)||!Ks(i.at)&&!Vo(i.at))};n.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(hw||(hw={}));class s8{constructor(e){e.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(kt).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,i):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,i)=>{const s=_s();return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(s),!0):!1}),e.addImplementation(0,"generic-dom",(t,i)=>{const s=t.get(kt).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,i)):!1})}_runEditorCommand(e,t,i){const s=this.runEditorCommand(e,t,i);return s||!0}}var zn;(function(n){class e extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){if(!w.position)return;v.model.pushStackElement(),v.setCursorStates(w.source,3,[es.moveTo(v,v.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)])&&w.revealType!==2&&v.revealAllCursors(w.source,!0,!0)}}n.MoveTo=fe(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),n.MoveToSelect=fe(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Gi{runCoreEditorCommand(v,w){v.model.pushStackElement();const y=this._getColumnSelectResult(v,v.getPrimaryCursorState(),v.getCursorColumnSelectData(),w);y!==null&&(v.setCursorStates(w.source,3,y.viewStates.map(S=>St.fromViewState(S))),v.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:y.fromLineNumber,fromViewVisualColumn:y.fromVisualColumn,toViewLineNumber:y.toLineNumber,toViewVisualColumn:y.toVisualColumn}),y.reversed?v.revealTopMostCursor(w.source):v.revealBottomMostCursor(w.source))}}n.ColumnSelect=fe(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(b,v,w,y){if(typeof y.position>"u"||typeof y.viewPosition>"u"||typeof y.mouseColumn>"u")return null;const S=b.model.validatePosition(y.position),x=b.coordinatesConverter.validateViewPosition(new H(y.viewPosition.lineNumber,y.viewPosition.column),S),k=y.doColumnSelect?w.fromViewLineNumber:x.lineNumber,D=y.doColumnSelect?w.fromViewVisualColumn:y.mouseColumn-1;return up.columnSelect(b.cursorConfig,b,k,D,x.lineNumber,y.mouseColumn-1)}}),n.CursorColumnSelectLeft=fe(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(b,v,w,y){return up.columnSelectLeft(b.cursorConfig,b,w)}}),n.CursorColumnSelectRight=fe(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(b,v,w,y){return up.columnSelectRight(b.cursorConfig,b,w)}});class i extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,w,y,S){return up.columnSelectUp(v.cursorConfig,v,y,this._isPaged)}}n.CursorColumnSelectUp=fe(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:3600,linux:{primary:0}}})),n.CursorColumnSelectPageUp=fe(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,w,y,S){return up.columnSelectDown(v.cursorConfig,v,y,this._isPaged)}}n.CursorColumnSelectDown=fe(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:3602,linux:{primary:0}}})),n.CursorColumnSelectPageDown=fe(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends Gi{constructor(){super({id:"cursorMove",precondition:void 0,metadata:wP.metadata})}runCoreEditorCommand(v,w){const y=wP.parse(w);y&&this._runCursorMove(v,w.source,y)}_runCursorMove(v,w,y){v.model.pushStackElement(),v.setCursorStates(w,3,o._move(v,v.getCursorStates(),y)),v.revealAllCursors(w,!0)}static _move(v,w,y){const S=y.select,x=y.value;switch(y.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return es.simpleMove(v,w,y.direction,S,x,y.unit);case 11:case 13:case 12:case 14:return es.viewportMove(v,w,y.direction,S,x);default:return null}}}n.CursorMoveImpl=o,n.CursorMove=fe(new o);class r extends Gi{constructor(v){super(v),this._staticArgs=v.args}runCoreEditorCommand(v,w){let y=this._staticArgs;this._staticArgs.value===-1&&(y={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:w.pageSize||v.cursorConfig.pageSize}),v.model.pushStackElement(),v.setCursorStates(w.source,3,es.simpleMove(v,v.getCursorStates(),y.direction,y.select,y.value,y.unit)),v.revealAllCursors(w.source,!0)}}n.CursorLeft=fe(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),n.CursorLeftSelect=fe(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:1039}})),n.CursorRight=fe(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),n.CursorRightSelect=fe(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:1041}})),n.CursorUp=fe(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),n.CursorUpSelect=fe(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),n.CursorPageUp=fe(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:11}})),n.CursorPageUpSelect=fe(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:1035}})),n.CursorDown=fe(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),n.CursorDownSelect=fe(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),n.CursorPageDown=fe(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:12}})),n.CursorPageDownSelect=fe(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:1036}})),n.CreateCursor=fe(new class extends Gi{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(b,v){if(!v.position)return;let w;v.wholeLine?w=es.line(b,b.getPrimaryCursorState(),!1,v.position,v.viewPosition):w=es.moveTo(b,b.getPrimaryCursorState(),!1,v.position,v.viewPosition);const y=b.getCursorStates();if(y.length>1){const S=w.modelState?w.modelState.position:null,x=w.viewState?w.viewState.position:null;for(let k=0,D=y.length;k<D;k++){const N=y[k];if(!(S&&!N.modelState.selection.containsPosition(S))&&!(x&&!N.viewState.selection.containsPosition(x))){y.splice(k,1),b.model.pushStackElement(),b.setCursorStates(v.source,3,y);return}}}y.push(w),b.model.pushStackElement(),b.setCursorStates(v.source,3,y)}}),n.LastCursorMoveToSelect=fe(new class extends Gi{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(b,v){if(!v.position)return;const w=b.getLastAddedCursorIndex(),y=b.getCursorStates(),S=y.slice(0);S[w]=es.moveTo(b,y[w],!0,v.position,v.viewPosition),b.model.pushStackElement(),b.setCursorStates(v.source,3,S)}});class a extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){v.model.pushStackElement(),v.setCursorStates(w.source,3,es.moveToBeginningOfLine(v,v.getCursorStates(),this._inSelectionMode)),v.revealAllCursors(w.source,!0)}}n.CursorHome=fe(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),n.CursorHomeSelect=fe(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){v.model.pushStackElement(),v.setCursorStates(w.source,3,this._exec(v.getCursorStates())),v.revealAllCursors(w.source,!0)}_exec(v){const w=[];for(let y=0,S=v.length;y<S;y++){const x=v[y],k=x.modelState.position.lineNumber;w[y]=St.fromModelState(x.modelState.move(this._inSelectionMode,k,1,0))}return w}}n.CursorLineStart=fe(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:0,mac:{primary:287}}})),n.CursorLineStartSelect=fe(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){v.model.pushStackElement(),v.setCursorStates(w.source,3,es.moveToEndOfLine(v,v.getCursorStates(),this._inSelectionMode,w.sticky||!1)),v.revealAllCursors(w.source,!0)}}n.CursorEnd=fe(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:It,kbExpr:I.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),n.CursorEndSelect=fe(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:It,kbExpr:I.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:p("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){v.model.pushStackElement(),v.setCursorStates(w.source,3,this._exec(v,v.getCursorStates())),v.revealAllCursors(w.source,!0)}_exec(v,w){const y=[];for(let S=0,x=w.length;S<x;S++){const k=w[S],D=k.modelState.position.lineNumber,N=v.model.getLineMaxColumn(D);y[S]=St.fromModelState(k.modelState.move(this._inSelectionMode,D,N,0))}return y}}n.CursorLineEnd=fe(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:0,mac:{primary:291}}})),n.CursorLineEndSelect=fe(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:0,mac:{primary:1315}}}));class u extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){v.model.pushStackElement(),v.setCursorStates(w.source,3,es.moveToBeginningOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealAllCursors(w.source,!0)}}n.CursorTop=fe(new u({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:2062,mac:{primary:2064}}})),n.CursorTopSelect=fe(new u({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:3086,mac:{primary:3088}}}));class h extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){v.model.pushStackElement(),v.setCursorStates(w.source,3,es.moveToEndOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealAllCursors(w.source,!0)}}n.CursorBottom=fe(new h({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:2061,mac:{primary:2066}}})),n.CursorBottomSelect=fe(new h({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Gi{constructor(){super({id:"editorScroll",precondition:void 0,metadata:us.metadata})}determineScrollMethod(v){const w=[6],y=[1,2,3,4,5,6],S=[4,2],x=[1,3];return w.includes(v.unit)&&S.includes(v.direction)?this._runHorizontalEditorScroll.bind(this):y.includes(v.unit)&&x.includes(v.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(v,w){const y=us.parse(w);if(!y)return;const S=this.determineScrollMethod(y);S&&S(v,w.source,y)}_runVerticalEditorScroll(v,w,y){const S=this._computeDesiredScrollTop(v,y);if(y.revealCursor){const x=v.getCompletelyVisibleViewRangeAtScrollTop(S);v.setCursorStates(w,3,[es.findPositionInViewportIfOutside(v,v.getPrimaryCursorState(),x,y.select)])}v.viewLayout.setScrollPosition({scrollTop:S},0)}_computeDesiredScrollTop(v,w){if(w.unit===1){const x=v.viewLayout.getFutureViewport(),k=v.getCompletelyVisibleViewRangeAtScrollTop(x.top),D=v.coordinatesConverter.convertViewRangeToModelRange(k);let N;w.direction===1?N=Math.max(1,D.startLineNumber-w.value):N=Math.min(v.model.getLineCount(),D.startLineNumber+w.value);const R=v.coordinatesConverter.convertModelPositionToViewPosition(new H(N,1));return v.viewLayout.getVerticalOffsetForLineNumber(R.lineNumber)}if(w.unit===5){let x=0;return w.direction===3&&(x=v.model.getLineCount()-v.cursorConfig.pageSize),v.viewLayout.getVerticalOffsetForLineNumber(x)}let y;w.unit===3?y=v.cursorConfig.pageSize*w.value:w.unit===4?y=Math.round(v.cursorConfig.pageSize/2)*w.value:y=w.value;const S=(w.direction===1?-1:1)*y;return v.viewLayout.getCurrentScrollTop()+S*v.cursorConfig.lineHeight}_runHorizontalEditorScroll(v,w,y){const S=this._computeDesiredScrollLeft(v,y);v.viewLayout.setScrollPosition({scrollLeft:S},0)}_computeDesiredScrollLeft(v,w){const y=(w.direction===4?-1:1)*w.value;return v.viewLayout.getCurrentScrollLeft()+y*v.cursorConfig.typicalHalfwidthCharacterWidth}}n.EditorScrollImpl=f,n.EditorScroll=fe(new f),n.ScrollLineUp=fe(new class extends Gi{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(b,v){n.EditorScroll.runCoreEditorCommand(b,{to:us.RawDirection.Up,by:us.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),n.ScrollPageUp=fe(new class extends Gi{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(b,v){n.EditorScroll.runCoreEditorCommand(b,{to:us.RawDirection.Up,by:us.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),n.ScrollEditorTop=fe(new class extends Gi{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus}})}runCoreEditorCommand(b,v){n.EditorScroll.runCoreEditorCommand(b,{to:us.RawDirection.Up,by:us.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),n.ScrollLineDown=fe(new class extends Gi{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(b,v){n.EditorScroll.runCoreEditorCommand(b,{to:us.RawDirection.Down,by:us.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),n.ScrollPageDown=fe(new class extends Gi{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(b,v){n.EditorScroll.runCoreEditorCommand(b,{to:us.RawDirection.Down,by:us.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),n.ScrollEditorBottom=fe(new class extends Gi{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus}})}runCoreEditorCommand(b,v){n.EditorScroll.runCoreEditorCommand(b,{to:us.RawDirection.Down,by:us.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),n.ScrollLeft=fe(new class extends Gi{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus}})}runCoreEditorCommand(b,v){n.EditorScroll.runCoreEditorCommand(b,{to:us.RawDirection.Left,by:us.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}}),n.ScrollRight=fe(new class extends Gi{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus}})}runCoreEditorCommand(b,v){n.EditorScroll.runCoreEditorCommand(b,{to:us.RawDirection.Right,by:us.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}});class g extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){w.position&&(v.model.pushStackElement(),v.setCursorStates(w.source,3,[es.word(v,v.getPrimaryCursorState(),this._inSelectionMode,w.position)]),w.revealType!==2&&v.revealAllCursors(w.source,!0,!0))}}n.WordSelect=fe(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),n.WordSelectDrag=fe(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),n.LastCursorWordSelect=fe(new class extends Gi{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(b,v){if(!v.position)return;const w=b.getLastAddedCursorIndex(),y=b.getCursorStates(),S=y.slice(0),x=y[w];S[w]=es.word(b,x,x.modelState.hasSelection(),v.position),b.model.pushStackElement(),b.setCursorStates(v.source,3,S)}});class m extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){w.position&&(v.model.pushStackElement(),v.setCursorStates(w.source,3,[es.line(v,v.getPrimaryCursorState(),this._inSelectionMode,w.position,w.viewPosition)]),w.revealType!==2&&v.revealAllCursors(w.source,!1,!0))}}n.LineSelect=fe(new m({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),n.LineSelectDrag=fe(new m({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class _ extends Gi{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,w){if(!w.position)return;const y=v.getLastAddedCursorIndex(),S=v.getCursorStates(),x=S.slice(0);x[y]=es.line(v,S[y],this._inSelectionMode,w.position,w.viewPosition),v.model.pushStackElement(),v.setCursorStates(w.source,3,x)}}n.LastCursorLineSelect=fe(new _({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),n.LastCursorLineSelectDrag=fe(new _({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),n.CancelSelection=fe(new class extends Gi{constructor(){super({id:"cancelSelection",precondition:I.hasNonEmptySelection,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,v){b.model.pushStackElement(),b.setCursorStates(v.source,3,[es.cancelSelection(b,b.getPrimaryCursorState())]),b.revealAllCursors(v.source,!0)}}),n.RemoveSecondaryCursors=fe(new class extends Gi{constructor(){super({id:"removeSecondaryCursors",precondition:I.hasMultipleSelections,kbOpts:{weight:It+1,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,v){b.model.pushStackElement(),b.setCursorStates(v.source,3,[b.getPrimaryCursorState()]),b.revealAllCursors(v.source,!0),Xd(p("removedCursor","Removed secondary cursors"))}}),n.RevealLine=fe(new class extends Gi{constructor(){super({id:"revealLine",precondition:void 0,metadata:hw.metadata})}runCoreEditorCommand(b,v){const w=v,y=w.lineNumber||0;let S=typeof y=="number"?y+1:parseInt(y)+1;S<1&&(S=1);const x=b.model.getLineCount();S>x&&(S=x);const k=new E(S,1,S,b.model.getLineMaxColumn(S));let D=0;if(w.at)switch(w.at){case hw.RawAtArgument.Top:D=3;break;case hw.RawAtArgument.Center:D=1;break;case hw.RawAtArgument.Bottom:D=4;break}const N=b.coordinatesConverter.convertModelRangeToViewRange(k);b.revealRange(v.source,!1,N,D,0)}}),n.SelectAll=new class extends s8{constructor(){super(ZEe)}runDOMCommand(b){$a&&(b.focus(),b.select()),b.ownerDocument.execCommand("selectAll")}runEditorCommand(b,v,w){const y=v._getViewModel();y&&this.runCoreEditorCommand(y,w)}runCoreEditorCommand(b,v){b.model.pushStackElement(),b.setCursorStates("keyboard",3,[es.selectAll(b,b.getPrimaryCursorState())])}},n.SetSelection=fe(new class extends Gi{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(b,v){v.selection&&(b.model.pushStackElement(),b.setCursorStates(v.source,3,[St.fromModelSelection(v.selection)]))}})})(zn||(zn={}));const rHe=X.and(I.textInputFocus,I.columnSelection);function _1(n,e){Co.registerKeybindingRule({id:n,primary:e,when:rHe,weight:It+1})}_1(zn.CursorColumnSelectLeft.id,1039);_1(zn.CursorColumnSelectRight.id,1041);_1(zn.CursorColumnSelectUp.id,1040);_1(zn.CursorColumnSelectPageUp.id,1035);_1(zn.CursorColumnSelectDown.id,1042);_1(zn.CursorColumnSelectPageDown.id,1036);function See(n){return n.register(),n}var mC;(function(n){class e extends xn{runEditorCommand(i,s,o){const r=s._getViewModel();r&&this.runCoreEditingCommand(s,r,o||{})}}n.CoreEditingCommand=e,n.LineBreakInsert=fe(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:I.writable,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,rO.lineBreakInsert(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection)))}}),n.Outdent=fe(new class extends e{constructor(){super({id:"outdent",precondition:I.writable,kbOpts:{weight:It,kbExpr:X.and(I.editorTextFocus,I.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,Tf.outdent(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),n.Tab=fe(new class extends e{constructor(){super({id:"tab",precondition:I.writable,kbOpts:{weight:It,kbExpr:X.and(I.editorTextFocus,I.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,i,s){t.pushUndoStop(),t.executeCommands(this.id,Tf.tab(i.cursorConfig,i.model,i.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),n.DeleteLeft=fe(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,i,s){const[o,r]=Cb.deleteLeft(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection),i.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(2)}}),n.DeleteRight=fe(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:It,kbExpr:I.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,i,s){const[o,r]=Cb.deleteRight(i.getPrevEditOperationType(),i.cursorConfig,i.model,i.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,r),i.setPrevEditOperationType(3)}}),n.Undo=new class extends s8{constructor(){super(Yce)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().undo()}},n.Redo=new class extends s8{constructor(){super(Zce)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,i,s){if(!(!i.hasModel()||i.getOption(92)===!0))return i.getModel().redo()}}})(mC||(mC={}));class xee extends bA{constructor(e,t,i){super({id:e,precondition:void 0,metadata:i}),this._handlerId=t}runCommand(e,t){const i=e.get(kt).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function Yb(n,e){See(new xee("default:"+n,n)),See(new xee(n,n,e))}Yb("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Yb("replacePreviousChar");Yb("compositionType");Yb("compositionStart");Yb("compositionEnd");Yb("paste");Yb("cut");class aHe{constructor(e,t,i,s){this.configuration=e,this.viewModel=t,this.userInputEvents=i,this.commandDelegate=s}paste(e,t,i,s){this.commandDelegate.paste(e,t,i,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,i,s){this.commandDelegate.compositionType(e,t,i,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){zn.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new H(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,i=vo&&t.get(108),s=t.get(22);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){zn.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){zn.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,i){e=this._validateViewColumn(e),zn.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}_createCursor(e,t){e=this._validateViewColumn(e),zn.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){zn.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){zn.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){zn.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){zn.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){zn.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){zn.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){zn.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){zn.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){zn.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class Tfe{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Dt("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const i=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<i){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let o=0,r=0;for(let l=i;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(o=c,r=1):r++)}if(e<i){let l=0;t<i?l=t-e+1:l=i-e,this._rendLineNumberStart-=l}return this._lines.splice(o,r)}onLinesChanged(e,t){const i=e+t-1;if(this.getCount()===0)return!1;const s=this.getStartLineNumber(),o=this.getEndLineNumber();let r=!1;for(let a=e;a<=i;a++)a>=s&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const i=t-e+1,s=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=i,null;if(e>o)return null;if(i+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const r=[];for(let u=0;u<i;u++)r[u]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-i),d=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=l.concat(r).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let s=!1;for(let o=0,r=e.length;o<r;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>i)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(i,a.toLineNumber);for(let d=l;d<=c;d++){const u=d-this._rendLineNumberStart;this._lines[u].onTokensChanged(),s=!0}}return s}}class Pfe{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new Tfe(this._lineFactory)}_createDomNode(){const e=Ot(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const o=t[i].getDomNode();o==null||o.remove()}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let i=0,s=t.length;i<s;i++){const o=t[i].getDomNode();o==null||o.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),i=new o8(this.domNode.domNode,this._lineFactory,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=i.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}const Fu=class Fu{constructor(e,t,i){this._domNode=e,this._lineFactory=t,this._viewportData=i}render(e,t,i,s){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||i<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=i-t+1,o.lines=[];for(let r=t;r<=i;r++)o.lines[r-t]=this._lineFactory.createLine();return this._finishRendering(o,!0,s),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(i-o.rendLineNumberStart,o.linesLength-1),s,t),o.rendLineNumberStart>t){const r=t,a=Math.min(i,o.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(o,r,a,s,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart<t){const r=Math.min(o.linesLength,t-o.rendLineNumberStart);r>0&&(this._removeLinesBefore(o,r),o.linesLength-=r)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<i){const r=o.rendLineNumberStart+o.linesLength,a=i;r<=a&&(this._insertLinesAfter(o,r,a,s,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart+o.linesLength-1>i){const r=Math.max(0,i-o.rendLineNumberStart+1),l=o.linesLength-1-r+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,s),o}_renderUntouchedLines(e,t,i,s,o){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=i;l++){const c=r+l;a[l].layoutLine(c,s[c-o],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,i,s,o){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this._lineFactory.createLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let i=0;i<t;i++){const s=e.lines[i].getDomNode();s==null||s.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,i,s,o){const r=[];let a=0;for(let l=t;l<=i;l++)r[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const i=e.linesLength-t;for(let s=0;s<t;s++){const o=e.lines[i+s].getDomNode();o==null||o.remove()}e.lines.splice(i,t)}_finishRenderingNewLines(e,t,i,s){Fu._ttPolicy&&(i=Fu._ttPolicy.createHTML(i));const o=this._domNode.lastChild;t||!o?this._domNode.innerHTML=i:o.insertAdjacentHTML("afterend",i);let r=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,i){const s=document.createElement("div");Fu._ttPolicy&&(t=Fu._ttPolicy.createHTML(t)),s.innerHTML=t;for(let o=0;o<e.linesLength;o++){const r=e.lines[o];if(i[o]){const a=s.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,i){const s=Fu._sb,o=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let d=0;d<o;d++){const u=r[d];l[d]=!1,!(u.getDomNode()||!u.renderLine(d+a,i[d],this._viewportData.lineHeight,this._viewportData,s))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const d=[];for(let u=0;u<o;u++){const h=r[u];d[u]=!1,!(l[u]||!h.renderLine(u+a,i[u],this._viewportData.lineHeight,this._viewportData,s))&&(d[u]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),d)}}};Fu._ttPolicy=Vh("editorViewLayer",{createHTML:e=>e}),Fu._sb=new n1(1e5);let o8=Fu;class Mfe extends Tr{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new Pfe({createLine:()=>new lHe(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);as(this.domNode,i),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return as(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(i=>i.shouldRender());for(let i=0,s=t.length;i<s;i++){const o=t[i];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class lHe{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Ot(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,i,s,o){let r="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];r+=c.render(s.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(i)),o.appendString('px;">'),o.appendString(r),o.appendString("</div>"),!0)}layoutLine(e,t,i){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(i))}}class cHe extends Mfe{constructor(e){super(e);const i=this._context.configuration.options.get(146);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class dHe extends Mfe{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._contentLeft=i.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),as(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;as(this.domNode,t.get(50));const i=t.get(146);return this._contentLeft=i.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class lO{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)==null||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)==null||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)==null||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)==null||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return lO.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const i={...e};return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),(i.type===5||i.type===8)&&(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new H(e.afterLineNumber,1)).lineNumber}}}class uHe extends Tr{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=Ot(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const i=this._context.configuration.options.get(146),s=i.contentWidth-i.verticalScrollbarWidth;this.contentWidth!==s&&(this.contentWidth=s,e=!0);const o=i.contentLeft;return this.contentLeft!==o&&(this.contentLeft=o,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const i=e.getDecorationsInViewport();for(const s of i){if(!s.options.blockClassName)continue;let o=this.blocks[t];o||(o=this.blocks[t]=Ot(document.createElement("div")),this.domNode.appendChild(o));let r,a;s.options.blockIsAfterEnd?(r=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(r=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),a=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[l,c,d,u]=s.options.blockPadding??[0,0,0,0];o.setClassName("blockDecorations-block "+s.options.blockClassName),o.setLeft(this.contentLeft-u),o.setWidth(this.contentWidth+u+c),o.setTop(r-e.scrollTop-l),o.setHeight(a-r+l+d),t++}for(let s=t;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=t}}class hHe extends Tr{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Ot(document.createElement("div")),jc.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Ot(document.createElement("div")),jc.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new fHe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,i,s,o){this._widgets[e.getId()].setPosition(t,i,s,o),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const s=i.domNode.domNode;s.remove(),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(e)}}class fHe{constructor(e,t,i){this._primaryAnchor=new n0(null,null),this._secondaryAnchor=new n0(null,null),this._context=e,this._viewDomNode=t,this._actual=i,this.domNode=Ot(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,o=s.get(146);this._fixedOverflowWidgets=s.get(42),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=s.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const i=t.get(146);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,i){this._affinity=e,this._primaryAnchor=s(t,this._context.viewModel,this._affinity),this._secondaryAnchor=s(i,this._context.viewModel,this._affinity);function s(o,r,a){if(!o)return new n0(null,null);const l=r.model.validatePosition(o);if(r.coordinatesConverter.modelPositionIsVisible(l)){const c=r.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new n0(o,c)}return new n0(o,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,i,s){this._setPosition(s,e,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,i,s){const o=e.top,r=o,a=e.top+e.height,l=s.viewportHeight-a,c=o-i,d=r>=i,u=a,h=l>=i;let f=e.left;return f+t>s.scrollLeft+s.viewportWidth&&(f=s.scrollLeft+s.viewportWidth-t),f<s.scrollLeft&&(f=s.scrollLeft),{fitsAbove:d,aboveTop:c,fitsBelow:h,belowTop:u,left:f}}_layoutHorizontalSegmentInPage(e,t,i,s){const a=Math.max(15,t.left-s),l=Math.min(t.left+t.width+s,e.width-15),d=this._viewDomNode.domNode.ownerDocument.defaultView;let u=t.left+i-((d==null?void 0:d.scrollX)??0);if(u+s>l){const h=u-(l-s);u-=h,i-=h}if(u<a){const h=u-a;u-=h,i-=h}return[i,u]}_layoutBoxInPage(e,t,i,s){const o=e.top-i,r=e.top+e.height,a=Qi(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,d=a.top+o-((c==null?void 0:c.scrollY)??0),u=a.top+r-((c==null?void 0:c.scrollY)??0),h=Gg(l.body),[f,g]=this._layoutHorizontalSegmentInPage(h,a,e.left-s.scrollLeft+this._contentLeft,t),m=22,_=22,b=d>=m,v=u+i<=h.height-_;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(d,m),fitsBelow:v,belowTop:u,left:g}:{fitsAbove:b,aboveTop:o,fitsBelow:v,belowTop:r,left:f}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new s0(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var r,a;const t=o(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),i=((r=this._secondaryAnchor.viewPosition)==null?void 0:r.lineNumber)===((a=this._primaryAnchor.viewPosition)==null?void 0:a.lineNumber)?this._secondaryAnchor.viewPosition:null,s=o(i,this._affinity,this._lineHeight);return{primary:t,secondary:s};function o(l,c,d){if(!l)return null;const u=e.visibleRangeForPosition(l);if(!u)return null;const h=l.column===1&&c===3?0:u.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new kee(f,h,d)}}_reduceAnchorCoordinates(e,t,i){if(!t)return e;const s=this._context.configuration.options.get(50);let o=t.left;return o<e.left?o=Math.max(o,e.left-i+s.typicalFullwidthCharacterWidth):o=Math.min(o,e.left+i-s.typicalFullwidthCharacterWidth),new kee(e.top,o,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=U4(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const s=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let o;this.allowEditorOverflow?o=this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):o=this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const a of this._preference)if(a===1){if(!o)return null;if(r===2||o.fitsAbove)return{kind:"inViewport",coordinate:new s0(o.aboveTop,o.left),position:1}}else if(a===2){if(!o)return null;if(r===2||o.fitsBelow)return{kind:"inViewport",coordinate:new s0(o.belowTop,o.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new s0(s.top,s.left)),position:0}:{kind:"inViewport",coordinate:new s0(s.top,s.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){var t;if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,((t=this._renderData)==null?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&U4(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&U4(this._actual.afterRender,this._actual,this._renderData.position)}}class n0{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class s0{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class kee{constructor(e,t,i){this.top=e,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function U4(n,e,...t){try{return n.call(e,...t)}catch{return null}}class Rfe extends Gb{constructor(e){super(),this._context=e;const t=this._context.configuration.options,i=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Ce(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const o of this._selections)t.add(o.positionLineNumber);const i=Array.from(t);i.sort((o,r)=>o-r),Li(this._cursorLineNumbers,i)||(this._cursorLineNumbers=i,e=!0);const s=this._selections.every(o=>o.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=[];for(let r=t;r<=i;r++){const a=r-t;s[a]=""}if(this._wordWrap){const r=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new H(a,1)).lineNumber,d=l.convertModelPositionToViewPosition(new H(c,1)).lineNumber,u=l.convertModelPositionToViewPosition(new H(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,h=Math.max(d,t),f=Math.min(u,i);for(let g=h;g<=f;g++){const m=g-t;s[m]=r}}}const o=this._renderOne(e,!0);for(const r of this._cursorLineNumbers){if(r<t||r>i)continue;const a=r-t;s[a]=o}this._renderData=s}render(e,t){if(!this._renderData)return"";const i=t-e;return i>=this._renderData.length?"":this._renderData[i]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class gHe extends Rfe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class mHe extends Rfe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}tl((n,e)=>{const t=n.getColor(que);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||n.defines(hJ)){const i=n.getColor(hJ);i&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${i}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${i}; }`),Ec(n.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class pHe extends Gb{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(i[s++]=d)}i=i.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,u=c.options.className;return d<u?-1:d>u?1:E.compareRangesUsingStarts(l.range,c.range)});const o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=r;l++){const c=l-o;a[c]=""}this._renderWholeLineDecorations(e,i,a),this._renderNormalDecorations(e,i,a),this._renderResult=a}_renderWholeLineDecorations(e,t,i){const s=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let r=0,a=t.length;r<a;r++){const l=t[r];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',d=Math.max(l.range.startLineNumber,s),u=Math.min(l.range.endLineNumber,o);for(let h=d;h<=u;h++){const f=h-s;i[f]+=c}}}_renderNormalDecorations(e,t,i){const s=e.visibleRange.startLineNumber;let o=null,r=!1,a=null,l=!1;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(u.options.isWholeLine)continue;const h=u.options.className,f=!!u.options.showIfCollapsed;let g=u.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new E(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),o===h&&r===f&&E.areIntersectingOrTouching(a,g)){a=E.plusRange(a,g);continue}o!==null&&this._renderNormalDecoration(e,a,o,l,r,s,i),o=h,r=f,a=g,l=u.options.shouldFillLineOnLineBreak??!1}o!==null&&this._renderNormalDecoration(e,a,o,l,r,s,i)}_renderNormalDecoration(e,t,i,s,o,r,a){const l=e.linesVisibleRangesForRange(t,i==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){const u=l[c];if(u.outsideRenderedLine)continue;const h=u.lineNumber-r;if(o&&u.ranges.length===1){const f=u.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const g=Math.round(f.left+f.width/2),m=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));u.ranges[0]=new sO(m,this._typicalHalfwidthCharacterWidth)}}for(let f=0,g=u.ranges.length;f<g;f++){const m=s&&u.continuesOnNextLine&&g===1,_=u.ranges[f],b='<div class="cdr '+i+'" style="left:'+String(_.left)+"px;width:"+(m?"100%;":String(_.width)+"px;")+'"></div>';a[h]+=b}}}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class _He extends Tr{constructor(e,t,i,s){super(e);const o=this._context.configuration.options,r=o.get(104),a=o.get(75),l=o.get(40),c=o.get(107),d={listenOnDomNode:i.domNode,className:"editor-scrollable "+VB(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new PA(t.domNode,d,this._context.viewLayout.getScrollable())),jc.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Ot(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(h,f,g)=>{const m={};{const _=h.scrollTop;_&&(m.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,h.scrollTop=0)}if(g){const _=h.scrollLeft;_&&(m.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(m,1)};this._register(G(i.domNode,"scroll",h=>u(i.domNode,!0,!0))),this._register(G(t.domNode,"scroll",h=>u(t.domNode,!0,!1))),this._register(G(s.domNode,"scroll",h=>u(s.domNode,!0,!1))),this._register(G(this.scrollbarDomNode.domNode,"scroll",h=>u(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,i=t.get(104),s=t.get(75),o=t.get(40),r=t.get(107),a={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+VB(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class r8{constructor(e,t,i,s,o){this.startLineNumber=e,this.endLineNumber=t,this.className=i,this.tooltip=s,this._decorationToRenderBrand=void 0,this.zIndex=o??0}}class bHe{constructor(e,t,i){this.className=e,this.zIndex=t,this.tooltip=i}}class vHe{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class Afe extends Gb{_render(e,t,i){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=new vHe}if(i.length===0)return s;i.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,r=0;for(let a=0,l=i.length;a<l;a++){const c=i[a],d=c.className,u=c.zIndex;let h=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;o===d?(h=Math.max(r+1,h),r=Math.max(r,f)):(o=d,r=f);for(let g=h;g<=r;g++)s[g].add(new bHe(d,u,c.tooltip))}return s}}class wHe extends Tr{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,i=t.get(146);this.domNode=Ot(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=Ot(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference.lane===t.lane&&i.preference.zIndex===t.zIndex&&E.equalsRange(i.preference.range,t.range)?!1:(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var r;const i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,o=e.getDecorationsInViewport();for(const a of o){const l=a.options.glyphMarginClassName;if(!l)continue;const c=Math.max(a.range.startLineNumber,i),d=Math.min(a.range.endLineNumber,s),u=((r=a.options.glyphMargin)==null?void 0:r.position)??Rl.Center,h=a.options.zIndex??0;for(let f=c;f<=d;f++){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(f,0)),m=this._context.viewModel.glyphLanes.getLanesAtLine(g.lineNumber).indexOf(u);t.push(new CHe(f,m,h,l))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(const o of Object.values(this._widgets)){const r=o.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(E.lift(r));if(!a||!l||l<i||a>s)continue;const c=Math.max(a,i),d=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(c,0)),u=this._context.viewModel.glyphLanes.getLanesAtLine(d.lineNumber).indexOf(o.preference.lane);t.push(new yHe(c,u,o.preference.zIndex,o))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((i,s)=>i.lineNumber===s.lineNumber?i.laneIndex===s.laneIndex?i.zIndex===s.zIndex?s.type===i.type?i.type===0&&s.type===0?i.className<s.className?-1:1:0:s.type-i.type:s.zIndex-i.zIndex:i.laneIndex-s.laneIndex:i.lineNumber-s.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const s of Object.values(this._widgets))s.renderInfo=null;const t=new Dh(this._collectSortedGlyphRenderRequests(e)),i=[];for(;t.length>0;){const s=t.peek();if(!s)break;const o=t.takeWhile(a=>a.lineNumber===s.lineNumber&&a.laneIndex===s.laneIndex);if(!o||o.length===0)break;const r=o[0];if(r.type===0){const a=[];for(const l of o){if(l.zIndex!==r.zIndex||l.type!==r.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}i.push(r.accept(a.join(" ")))}else r.widget.renderInfo={lineNumber:r.lineNumber,laneIndex:r.laneIndex}}this._decorationGlyphsToRender=i}render(e){if(!this._glyphMargin){for(const i of Object.values(this._widgets))i.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const i of Object.values(this._widgets))if(!i.renderInfo)i.domNode.setDisplay("none");else{const s=e.viewportData.relativeVerticalOffset[i.renderInfo.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+i.renderInfo.laneIndex*this._lineHeight;i.domNode.setDisplay("block"),i.domNode.setTop(s),i.domNode.setLeft(o),i.domNode.setWidth(t),i.domNode.setHeight(this._lineHeight)}for(let i=0;i<this._decorationGlyphsToRender.length;i++){const s=this._decorationGlyphsToRender[i],o=e.viewportData.relativeVerticalOffset[s.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+s.laneIndex*this._lineHeight;let a;i<this._managedDomNodes.length?a=this._managedDomNodes[i]:(a=Ot(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+s.combinedClassName),a.setPosition("absolute"),a.setTop(o),a.setLeft(r),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const i=this._managedDomNodes.pop();i==null||i.domNode.remove()}}}class CHe{constructor(e,t,i,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.className=s,this.type=0}accept(e){return new SHe(this.lineNumber,this.laneIndex,e)}}class yHe{constructor(e,t,i,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=i,this.widget=s,this.type=1}}class SHe{constructor(e,t,i){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=i}}class xHe extends Gb{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,i=t.get(147),s=t.get(50);this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(147),s=t.get(50);return this._spaceWidth=s.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var s;const i=e.selections[0].getPosition();return(s=this._primaryPosition)!=null&&s.equals(i)?!1:(this._primaryPosition=i,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var l,c;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=e.scrollWidth,o=this._primaryPosition,r=this.getGuidesByLine(t,Math.min(i+1,this._context.viewModel.getLineCount()),o),a=[];for(let d=t;d<=i;d++){const u=d-t,h=r[u];let f="";const g=((l=e.visibleRangeForPosition(new H(d,1)))==null?void 0:l.left)??0;for(const m of h){const _=m.column===-1?g+(m.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new H(d,m.column)).left;if(_>s||this._maxIndentLeft>0&&_>this._maxIndentLeft)break;const b=m.horizontalLine?m.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",v=m.horizontalLine?(((c=e.visibleRangeForPosition(new H(d,m.horizontalLine.endColumn)))==null?void 0:c.left)??_+this._spaceWidth)-_:this._spaceWidth;f+=`<div class="core-guide ${m.className} ${b}" style="left:${_}px;width:${v}px"></div>`}a[u]=f}this._renderResult=a}getGuidesByLine(e,t,i){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?qp.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?qp.EnabledForActive:qp.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){const u=this._context.viewModel.getActiveIndentGuide(i.lineNumber,e,t);r=u.startLineNumber,a=u.endLineNumber,l=u.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let u=e;u<=t;u++){const h=new Array;d.push(h);const f=s?s[u-e]:[],g=new Dh(f),m=o?o[u-e]:0;for(let _=1;_<=m;_++){const b=(_-1)*c+1,v=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&r<=u&&u<=a&&_===l;h.push(...g.takeWhile(y=>y.visibleColumn<b)||[]);const w=g.peek();(!w||w.visibleColumn!==b||w.horizontalLine)&&h.push(new Lp(b,-1,`core-guide-indent lvl-${(_-1)%30}`+(v?" indent-active":""),null,-1,-1))}h.push(...g.takeWhile(_=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function vv(n){if(!(n&&n.isTransparent()))return n}tl((n,e)=>{const t=[{bracketColor:Zue,guideColor:zOe,guideColorActive:YOe},{bracketColor:Que,guideColor:UOe,guideColorActive:ZOe},{bracketColor:Xue,guideColor:$Oe,guideColorActive:QOe},{bracketColor:Jue,guideColor:qOe,guideColorActive:XOe},{bracketColor:ehe,guideColor:KOe,guideColorActive:JOe},{bracketColor:the,guideColor:GOe,guideColorActive:eFe}],i=new hhe,s=[{indentColor:YL,indentColorActive:ZL},{indentColor:yOe,indentColorActive:DOe},{indentColor:SOe,indentColorActive:EOe},{indentColor:xOe,indentColorActive:NOe},{indentColor:kOe,indentColorActive:IOe},{indentColor:LOe,indentColorActive:TOe}],o=t.map(a=>{const l=n.getColor(a.bracketColor),c=n.getColor(a.guideColor),d=n.getColor(a.guideColorActive),u=vv(vv(c)??(l==null?void 0:l.transparent(.3))),h=vv(vv(d)??l);if(!(!u||!h))return{guideColor:u,guideColorActive:h}}).filter(zd),r=s.map(a=>{const l=n.getColor(a.indentColor),c=n.getColor(a.indentColorActive),d=vv(l),u=vv(c);if(!(!d||!u))return{indentColor:d,indentColorActive:u}}).filter(zd);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${i.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${i.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${i.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class $4{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class kHe{constructor(){this._currentVisibleRange=new E(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class LHe{constructor(e,t,i,s,o,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=i,this.endColumn=s,this.startScrollTop=o,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class DHe{constructor(e,t,i,s,o){this.minimalReveal=e,this.selections=t,this.startScrollTop=i,this.stopScrollTop=s,this.scrollType=o,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];r=Math.min(r,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}const C2=class C2 extends Tr{constructor(e,t){super(e);const i=this._context.configuration,s=this._context.configuration.options,o=s.get(50),r=s.get(147);this._lineHeight=s.get(67),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=s.get(101),this._cursorSurroundingLines=s.get(29),this._cursorSurroundingLinesStyle=s.get(30),this._canUseLayerHinting=!s.get(32),this._viewLineOptions=new _ee(i,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Pfe({createLine:()=>new Gu(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,jc.write(this.domNode,8),this.domNode.setClassName(`view-lines ${fC}`),as(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new $t(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new $t(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new kHe,this._horizontalRevealRequest=null,this._stickyScrollEnabled=s.get(116).enabled,this._maxNumberStickyLines=s.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,i=t.get(50),s=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,as(this.domNode,i),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new _ee(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=i;o<=s;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=!1;for(let o=t;o<=i;o++)s=this._visibleLines.getVisibleLine(o).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new LHe(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new DHe(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const i=this._getViewLineDomNode(e);if(i===null)return null;const s=this._getLineNumberFor(i);if(s===-1||s<1||s>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(s)===1)return new H(s,1);const o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(s<o||s>r)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(s);return a<l&&(a=l),new H(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Gu.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=t;s<=i;s++){const o=this._visibleLines.getVisibleLine(s);if(e===o.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(e<t||e>i)return-1;const s=new $4(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getWidth(s);return this._updateLineWidthsSlowIfDomDidLayout(s),o}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const i=e.endLineNumber,s=E.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;const o=[];let r=0;const a=new $4(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let u=s.startLineNumber;u<=s.endLineNumber;u++){if(u<c||u>d)continue;const h=u===s.startLineNumber?s.startColumn:1,f=u!==s.endLineNumber,g=f?this._context.viewModel.getLineMaxColumn(u):s.endColumn,m=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,h,g,a);if(m){if(t&&u<i){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new H(u+1,1)).lineNumber,_!==l&&(m.ranges[m.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[r++]=new uBe(m.outsideRenderedLine,u,sO.from(m.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),r===0?null:o}_visibleRangesForLineRange(e,t,i){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const s=new $4(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,i,s);return this._updateLineWidthsSlowIfDomDidLayout(s),o}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new hBe(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();let s=1,o=!0;for(let r=t;r<=i;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){o=!1;continue}s=Math.max(s,a.getWidth(null))}return o&&t===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=i;o<=s;o++){const r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){const a=r.getWidth(null);a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=i;o<=s;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const i=this._horizontalRevealRequest;if(e.startLineNumber<=i.minLineNumber&&i.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(i);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:s.scrollLeft},i.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),vo&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const i=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let o=i;o<=s;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,i,s,o,r){const a=e.top,l=e.height,c=a+l;let d,u,h;if(o&&o.length>0){let b=o[0].startLineNumber,v=o[0].endLineNumber;for(let w=1,y=o.length;w<y;w++){const S=o[w];b=Math.min(b,S.startLineNumber),v=Math.max(v,S.endLineNumber)}d=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(b),h=this._context.viewLayout.getVerticalOffsetForLineNumber(v)+this._lineHeight}else if(s)d=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(s.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default";let g=0,m=0;if(f)i||(g=this._lineHeight);else{const b=l/this._lineHeight,v=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),w=Math.min(b/2,v);g=w*this._lineHeight,m=Math.max(0,w-1)*this._lineHeight}i||(r===0||r===4)&&(m+=this._lineHeight),u-=g,h+=m;let _;if(h-u>l){if(!d)return-1;_=u}else if(r===5||r===6)if(r===6&&a<=u&&h<=c)_=a;else{const b=Math.max(5*this._lineHeight,l*.2),v=u-b,w=h-l;_=Math.max(w,v)}else if(r===1||r===2)if(r===2&&a<=u&&h<=c)_=a;else{const b=(u+h)/2;_=Math.max(0,b-l/2)}else _=this._computeMinimumScrolling(a,c,u,h,r===3,r===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),i=this._context.configuration.options.get(146),s=t.left,o=s+t.width-i.verticalScrollbarWidth;let r=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const d of c.ranges)r=Math.min(r,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const d=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!d)return null;for(const u of d.ranges)r=Math.min(r,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}return e.minimalReveal||(r=Math.max(0,r-C2.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(s,o,r,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,i,s,o,r){e=e|0,t=t|0,i=i|0,s=s|0,o=!!o,r=!!r;const a=t-e;if(s-i<a){if(o)return i;if(r)return Math.max(0,s-a);if(i<e)return i;if(s>t)return Math.max(0,s-a)}else return i;return e}};C2.HORIZONTAL_EXTRA_PX=30;let a8=C2;class EHe extends Afe{constructor(e){super(),this._context=e;const i=this._context.configuration.options.get(146);this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._decorationsLeft=i.decorationsLeft,this._decorationsWidth=i.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let s=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(i[s++]=new r8(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const d=a.options.firstLineDecorationClassName;d&&(i[s++]=new r8(a.range.startLineNumber,a.range.startLineNumber,d,a.options.linesDecorationsTooltip??null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),o=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=i;c++){const d=c-t,u=s[d].getDecorations();let h="";for(const f of u){let g='<div class="cldr '+f.className;f.tooltip!==null&&(g+='" title="'+f.tooltip),g+=a,h+=g}l[d]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class NHe extends Afe{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),i=[];let s=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.marginClassName,c=a.options.zIndex;l&&(i[s++]=new r8(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._render(t,i,this._getDecorations(e)),o=[];for(let r=t;r<=i;r++){const a=r-t,l=s[a].getDecorations();let c="";for(const d of l)c+='<div class="cmdr '+d.className+'" style=""></div>';o[a]=c}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const vf=class vf{constructor(e,t,i,s){this._rgba8Brand=void 0,this.r=vf._clamp(e),this.g=vf._clamp(t),this.b=vf._clamp(i),this.a=vf._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};vf.Empty=new vf(0,0,0,0);let _h=vf;const y2=class y2 extends U{static getInstance(){return this._INSTANCE||(this._INSTANCE=new y2),this._INSTANCE}constructor(){super(),this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Hi.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=Hi.getColorMap();if(!e){this._colors=[_h.Empty],this._backgroundIsLight=!0;return}this._colors=[_h.Empty];for(let i=1;i<e.length;i++){const s=e[i].rgba;this._colors[i]=new _h(s.r,s.g,s.b,Math.round(s.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};y2._INSTANCE=null;let yP=y2;const IHe=(()=>{const n=[];for(let e=32;e<=126;e++)n.push(e);return n.push(65533),n})(),THe=(n,e)=>(n-=32,n<0||n>96?e<=2?(n+96)%96:95:n);class Ek{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Ek.soften(e,12/15),this.charDataLight=Ek.soften(e,50/60)}static soften(e,t){const i=new Uint8ClampedArray(e.length);for(let s=0,o=e.length;s<o;s++)i[s]=lT(e[s]*t);return i}renderChar(e,t,i,s,o,r,a,l,c,d,u){const h=1*this.scale,f=2*this.scale,g=u?1:f;if(t+h>e.width||i+g>e.height){console.warn("bad render request outside image data");return}const m=d?this.charDataLight:this.charDataNormal,_=THe(s,c),b=e.width*4,v=a.r,w=a.g,y=a.b,S=o.r-v,x=o.g-w,k=o.b-y,D=Math.max(r,l),N=e.data;let R=_*h*f,O=i*b+t*4;for(let B=0;B<g;B++){let z=O;for(let F=0;F<h;F++){const K=m[R++]/255*(r/255);N[z++]=v+S*K,N[z++]=w+x*K,N[z++]=y+k*K,N[z++]=D}O+=b}}blockRenderChar(e,t,i,s,o,r,a,l){const c=1*this.scale,d=2*this.scale,u=l?1:d;if(t+c>e.width||i+u>e.height){console.warn("bad render request outside image data");return}const h=e.width*4,f=.5*(o/255),g=r.r,m=r.g,_=r.b,b=s.r-g,v=s.g-m,w=s.b-_,y=g+b*f,S=m+v*f,x=_+w*f,k=Math.max(o,a),D=e.data;let N=i*h+t*4;for(let R=0;R<u;R++){let O=N;for(let B=0;B<c;B++)D[O++]=y,D[O++]=S,D[O++]=x,D[O++]=k;N+=h}}}const Lee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},Dee=n=>{const e=new Uint8ClampedArray(n.length/2);for(let t=0;t<n.length;t+=2)e[t>>1]=Lee[n[t]]<<4|Lee[n[t+1]]&15;return e},Eee={1:zg(()=>Dee("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:zg(()=>Dee("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class xS{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return Eee[e]?i=new Ek(Eee[e](),e):i=xS.createFromSampleData(xS.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",i.fillStyle="#ffffff",i.font=`bold 16px ${e}`,i.textBaseline="middle";let s=0;for(const o of IHe)i.fillText(String.fromCharCode(o),s,16/2),s+=10;return i.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const s=xS._downsample(e,t);return new Ek(s,t)}static _downsampleChar(e,t,i,s,o){const r=1*o,a=2*o;let l=s,c=0;for(let d=0;d<a;d++){const u=d/a*16,h=(d+1)/a*16;for(let f=0;f<r;f++){const g=f/r*10,m=(f+1)/r*10;let _=0,b=0;for(let w=u;w<h;w++){const y=t+Math.floor(w)*3840,S=1-(w-Math.floor(w));for(let x=g;x<m;x++){const k=1-(x-Math.floor(x)),D=y+Math.floor(x)*4,N=k*S;b+=N,_+=e[D]*e[D+3]/255*N}}const v=_/b;c=Math.max(c,v),i[l++]=lT(v)}}return c}static _downsample(e,t){const i=2*t*1*t,s=i*96,o=new Uint8ClampedArray(s);let r=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,o,r,t)),r+=i,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<s;d++)o[d]*=c}return o}}const Ofe=vs?'"Segoe WPC", "Segoe UI", sans-serif':ct?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',PHe=140,MHe=2;class pC{constructor(e,t,i){const s=e.options,o=s.get(144),r=s.get(146),a=r.minimap,l=s.get(50),c=s.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(106),this.paddingTop=s.get(84).top,this.paddingBottom=s.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=Ofe,this.sectionHeaderFontSize=c.sectionHeaderFontSize*o,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=pC._getSectionHeaderColor(t,i.getColor(1)),this.charRenderer=zg(()=>xS.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=i.getColor(2),this.backgroundColor=pC._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=pC._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const i=e.getColor(SPe);return i?new _h(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(xPe);return t?_h._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const i=e.getColor(cu);return i?new _h(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class kS{constructor(e,t,i,s,o,r,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=s,this.sliderTop=o,this.sliderHeight=r,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),i=Math.min(this.endLineNumber,e.endLineNumber);return t>i?null:[t,i]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,i,s,o,r,a,l,c,d,u){const h=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),m=e.lineHeight;if(e.minimapHeightIsEditorHeight){let x=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(x+=Math.max(0,o-e.lineHeight-e.paddingBottom));const k=Math.max(1,Math.floor(o*o/x)),D=Math.max(0,e.minimapHeight-k),N=D/(d-o),R=c*N,O=D>0,B=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),z=Math.floor(e.paddingTop/e.lineHeight);return new kS(c,d,O,N,R,k,z,1,Math.min(a,B))}let _;if(r&&i!==a){const x=i-t+1;_=Math.floor(x*f/h)}else{const x=o/m;_=Math.floor(x*f/h)}const b=Math.floor(e.paddingTop/m);let v=Math.floor(e.paddingBottom/m);if(e.scrollBeyondLastLine){const x=o/m;v=Math.max(v,x-1)}let w;if(v>0){const x=o/m;w=(b+a+v-x-1)*f/h}else w=Math.max(0,(b+a)*f/h-_);w=Math.min(e.minimapHeight-_,w);const y=w/(d-o),S=c*y;if(g>=b+a+v){const x=w>0;return new kS(c,d,x,y,S,_,b,1,a)}else{let x;t>1?x=t+b:x=Math.max(1,c/m);let k,D=Math.max(1,Math.floor(x-S*h/f));D<b?(k=b-D+1,D=1):(k=0,D=Math.max(1,D-b)),u&&u.scrollHeight===d&&(u.scrollTop>c&&(D=Math.min(D,u.startLineNumber),k=Math.max(k,u.topPaddingLineCount)),u.scrollTop<c&&(D=Math.max(D,u.startLineNumber),k=Math.min(k,u.topPaddingLineCount)));const N=Math.min(a,D-k+g-1),R=(c-s)/m;let O;return c>=e.paddingTop?O=(t-D+k+R)*f/h:O=c/e.paddingTop*(k+R)*f/h,new kS(c,d,!0,y,O,_,k,D,N)}}}const S2=class S2{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};S2.INVALID=new S2(-1);let SP=S2;class Nee{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new Tfe({createLine:()=>SP.INVALID}),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const i=this._renderedLines._get().lines;for(let s=0,o=i.length;s<o;s++)if(i[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class u${constructor(e,t,i,s){this._backgroundFillData=u$._createBackgroundFillData(t,i,s),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const s=i.r,o=i.g,r=i.b,a=i.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let u=0;u<e;u++)l[c]=s,l[c+1]=o,l[c+2]=r,l[c+3]=a,c+=4;return l}}class Nk{static compute(e,t,i){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:s}=Yw.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),o=t/s,r=o/2;if(!i||i.minimapLines.length===0){const _=[];if(_[0]=1,s>1){for(let b=0,v=s-1;b<v;b++)_[b]=Math.round(b*o+r);_[s-1]=t}return[new Nk(o,_),[]]}const a=i.minimapLines,l=a.length,c=[];let d=0,u=0,h=1;const f=10;let g=[],m=null;for(let _=0;_<s;_++){const b=Math.max(h,Math.round(_*o)),v=Math.max(b,Math.round((_+1)*o));for(;d<l&&a[d]<b;){if(g.length<f){const y=d+1+u;m&&m.type==="deleted"&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:y,deleteToLineNumber:y},g.push(m)),u--}d++}let w;if(d<l&&a[d]<=v)w=a[d],d++;else if(_===0?w=1:_+1===s?w=t:w=Math.round(_*o+r),g.length<f){const y=d+1+u;m&&m.type==="inserted"&&m._i===_-1?m.insertToLineNumber++:(m={type:"inserted",_i:_,insertFromLineNumber:y,insertToLineNumber:y},g.push(m)),u++}c[_]=w,h=w}if(g.length<f)for(;d<l;){const _=d+1+u;m&&m.type==="deleted"&&m._oldIndex===d-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:d,deleteFromLineNumber:_,deleteToLineNumber:_},g.push(m)),u--,d++}else g=[{type:"flush"}];return[new Nk(o,c),g]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(i===s){const o=this.minimapLines[i];if(o<e||o>t)return null}return[i+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===i&&(s===this.minimapLines.length?i>1&&i--:s++),[i,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,s=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,o),s=Math.max(s,o)):this.minimapLines[o]-=t;return[i,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class RHe extends Tr{constructor(e){super(e),this._sectionHeaderCache=new lu(10,1.5),this.tokensColorTracker=yP.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new pC(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Nk.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new fw(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new pC(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const i of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,i]=Nk.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of i)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){const s=[];for(let o=0,r=t-e+1;o<r;o++)i[o]?s[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):s[o]=null;return s}return this._context.viewModel.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Ce(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const i=this._getMinimapDecorationsInViewport(e,t).filter(s=>{var o;return!((o=s.options.minimap)!=null&&o.sectionHeaderStyle)});if(this._samplingState){const s=[];for(const o of i){if(!o.options.minimap)continue;const r=o.range,a=this._samplingState.modelLineToMinimapLine(r.startLineNumber),l=this._samplingState.modelLineToMinimapLine(r.endLineNumber);s.push(new bfe(new E(a,r.startColumn,l,r.endColumn),o.options))}return s}return i}getSectionHeaderDecorationsInViewport(e,t){const i=this.options.minimapLineHeight,o=this.options.sectionHeaderFontSize/i;return e=Math.floor(Math.max(1,e-o)),this._getMinimapDecorationsInViewport(e,t).filter(r=>{var a;return!!((a=r.options.minimap)!=null&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];i=new E(s,1,o,this._context.viewModel.getLineMaxColumn(o))}else i=new E(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(i)}getSectionHeaderText(e,t){var r;const i=(r=e.options.minimap)==null?void 0:r.sectionHeaderText;if(!i)return null;const s=this._sectionHeaderCache.get(i);if(s)return s;const o=t(i);return this._sectionHeaderCache.set(i,o),o}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new E(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class fw extends U{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(kX),this._domNode=Ot(document.createElement("div")),jc.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Ot(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Ot(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Ot(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Ot(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Ot(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Fi(this._domNode.domNode,le.POINTER_DOWN,i=>{if(i.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(i.button===0&&this._lastRenderData){const c=Qi(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(i,d,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*i.offsetY;let l=Math.floor(r/o)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new r1,this._sliderPointerDownListener=Fi(this._slider.domNode,le.POINTER_DOWN,i=>{i.preventDefault(),i.stopPropagation(),i.button===0&&this._lastRenderData&&this._startSliderDragging(i,i.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Is.addTarget(this._domNode.domNode),this._sliderTouchStartListener=G(this._domNode.domNode,si.Start,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(i))},{passive:!1}),this._sliderTouchMoveListener=G(this._domNode.domNode,si.Change,i=>{i.preventDefault(),i.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(i)},{passive:!1}),this._sliderTouchEndListener=Fi(this._domNode.domNode,si.End,i=>{i.preventDefault(),i.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i){if(!e.target||!(e.target instanceof Element))return;const s=e.pageX;this._slider.toggleClassName("active",!0);const o=(r,a)=>{const l=Qi(this._domNode.domNode),c=Math.min(Math.abs(a-s),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(vs&&c>PHe){this._model.setScrollTop(i.scrollTop);return}const d=r-t;this._model.setScrollTop(i.getDesiredScrollTopFromDelta(d))};e.pageY!==t&&o(e.pageY,s),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>o(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new u$(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var i;return(i=this._lastRenderData)==null||i.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(kX),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const i=kS.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(i.sliderNeeded?"block":"none"),this._slider.setTop(i.sliderTop),this._slider.setHeight(i.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(i.sliderHeight),this.renderDecorations(i),this._lastRenderData=this.renderLines(i)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(E.compareRangesUsingStarts);const i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);i.sort((h,f)=>(h.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:o}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,o);const d=new Iee(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,r),this._renderDecorationsLineHighlights(c,i,d,e,r);const u=new Iee(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,u,e,r,l,a,s),this._renderDecorationsHighlights(c,i,u,e,r,l,a,s),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,i,s,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=s.intersectWithViewport(l);if(!c)continue;const[d,u]=c;for(let g=d;g<=u;g++)i.set(g,!0);const h=s.getYForLineNumber(d,o),f=s.getYForLineNumber(u,o);a>=h||(a>r&&e.fillRect(rd,r,e.canvas.width,a-r),r=h),a=f}a>r&&e.fillRect(rd,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,i,s,o){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const d=s.intersectWithViewport(l.range);if(!d)continue;const[u,h]=d,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let g=r.get(f.toString());g||(g=f.transparent(.5).toString(),r.set(f.toString(),g)),e.fillStyle=g;for(let m=u;m<=h;m++){if(i.has(m))continue;i.set(m,!0);const _=s.getYForLineNumber(u,o);e.fillRect(rd,_,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,i,s,o,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=s.intersectWithViewport(c);if(!d)continue;const[u,h]=d;for(let f=u;f<=h;f++)this.renderDecorationOnLine(e,i,c,this._selectionColor,s,f,o,o,r,a,l)}}_renderDecorationsHighlights(e,t,i,s,o,r,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const u=s.intersectWithViewport(c.range);if(!u)continue;const[h,f]=u,g=d.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let m=h;m<=f;m++)switch(d.position){case 1:this.renderDecorationOnLine(e,i,c.range,g,s,m,o,o,r,a,l);continue;case 2:{const _=s.getYForLineNumber(m,o);this.renderDecoration(e,g,2,_,MHe,o);continue}}}}renderDecorationOnLine(e,t,i,s,o,r,a,l,c,d,u){const h=o.getYForLineNumber(r,l);if(h+a<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=i,m=f===r?i.startColumn:1,_=g===r?i.endColumn:this._model.getLineMaxColumn(r),b=this.getXOffsetForPosition(t,r,m,c,d,u),v=this.getXOffsetForPosition(t,r,_,c,d,u);this.renderDecoration(e,s,b,h,v-b,a)}getXOffsetForPosition(e,t,i,s,o,r){if(i===1)return rd;if((i-1)*o>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[rd];let d=rd;for(let u=1;u<c.length+1;u++){const h=c.charCodeAt(u-1),f=h===9?s*o:qg(h)?2*o:o,g=d+f;if(g>=r){l[u]=r;break}l[u]=g,d=g}e.set(t,l)}return i-1<l.length?l[i-1]:r}renderDecoration(e,t,i,s,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(i,s,o,r)}_renderSectionHeaders(e){var m;const t=this._model.options.minimapLineHeight,i=this._model.options.sectionHeaderFontSize,s=this._model.options.sectionHeaderLetterSpacing,o=i*1.5,{canvasInnerWidth:r}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,d=`rgb(${c.r} ${c.g} ${c.b})`,u=d,h=this._decorationsCanvas.domNode.getContext("2d");h.letterSpacing=s+"px",h.font="500 "+i+"px "+this._model.options.sectionHeaderFontFamily,h.strokeStyle=u,h.lineWidth=.2;const f=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);f.sort((_,b)=>_.range.startLineNumber-b.range.startLineNumber);const g=fw._fitSectionHeader.bind(null,h,r-rd);for(const _ of f){const b=e.getYForLineNumber(_.range.startLineNumber,t)+i,v=b-i,w=v+2,y=this._model.getSectionHeaderText(_,g);fw._renderSectionLabel(h,y,((m=_.options.minimap)==null?void 0:m.sectionHeaderStyle)===2,l,d,r,v,o,b,w)}}static _fitSectionHeader(e,t,i){if(!i)return i;const s="",o=e.measureText(i).width,r=e.measureText(s).width;if(o<=t||o<=r)return i;const a=i.length,l=o/i.length,c=Math.floor((t-r)/l)-1;let d=Math.ceil(c/2);for(;d>0&&/\s/.test(i[d-1]);)--d;return i.substring(0,d)+s+i.substring(a-(c-d))}static _renderSectionLabel(e,t,i,s,o,r,a,l,c,d){t&&(e.fillStyle=s,e.fillRect(0,a,r,l),e.fillStyle=o,e.fillText(t,rd,c)),i&&(e.beginPath(),e.moveTo(0,d),e.lineTo(r,d),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const K=this._lastRenderData._get();return new Nee(e,K.imageData,K.lines)}const o=this._getBuffer();if(!o)return null;const[r,a,l]=fw._renderUntouchedLines(o,e.topPaddingLineCount,t,i,s,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,i,l),d=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,m=g.backgroundIsLight(),_=this._model.options.renderMinimap,b=this._model.options.charRenderer(),v=this._model.options.fontScale,w=this._model.options.minimapCharWidth,S=(_===1?2:3)*v,x=s>S?Math.floor((s-S)/2):0,k=h.a/255,D=new _h(Math.round((h.r-u.r)*k+u.r),Math.round((h.g-u.g)*k+u.g),Math.round((h.b-u.b)*k+u.b),255);let N=e.topPaddingLineCount*s;const R=[];for(let K=0,Z=i-t+1;K<Z;K++)l[K]&&fw._renderLine(o,D,h.a,m,_,w,g,f,b,N,x,d,c[K],v,s),R[K]=new SP(N),N+=s;const O=r===-1?0:r,z=(a===-1?o.height:a)-O;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,O,o.width,z),new Nee(e,o,R)}static _renderUntouchedLines(e,t,i,s,o,r){const a=[];if(!r){for(let N=0,R=s-i+1;N<R;N++)a[N]=!0;return[-1,-1,a]}const l=r._get(),c=l.imageData.data,d=l.rendLineNumberStart,u=l.lines,h=u.length,f=e.width,g=e.data,m=(s-i+1)*o*f*4;let _=-1,b=-1,v=-1,w=-1,y=-1,S=-1,x=t*o;for(let N=i;N<=s;N++){const R=N-i,O=N-d,B=O>=0&&O<h?u[O].dy:-1;if(B===-1){a[R]=!0,x+=o;continue}const z=B*f*4,F=(B+o)*f*4,K=x*f*4,Z=(x+o)*f*4;w===z&&S===K?(w=F,S=Z):(v!==-1&&(g.set(c.subarray(v,w),y),_===-1&&v===0&&v===y&&(_=w),b===-1&&w===m&&v===y&&(b=v)),v=z,w=F,y=K,S=Z),a[R]=!1,x+=o}v!==-1&&(g.set(c.subarray(v,w),y),_===-1&&v===0&&v===y&&(_=w),b===-1&&w===m&&v===y&&(b=v));const k=_===-1?-1:_/(f*4),D=b===-1?-1:b/(f*4);return[k,D,a]}static _renderLine(e,t,i,s,o,r,a,l,c,d,u,h,f,g,m){const _=f.content,b=f.tokens,v=e.width-r,w=m===1;let y=rd,S=0,x=0;for(let k=0,D=b.getCount();k<D;k++){const N=b.getEndOffset(k),R=b.getForeground(k),O=a.getColor(R);for(;S<N;S++){if(y>v)return;const B=_.charCodeAt(S);if(B===9){const z=h-(S+x)%h;x+=z-1,y+=z*r}else if(B===32)y+=r;else{const z=qg(B)?2:1;for(let F=0;F<z;F++)if(o===2?c.blockRenderChar(e,y,d+u,O,l,t,i,w):c.renderChar(e,y,d+u,B,O,l,t,i,g,s,w),y+=r,y>v)return}}}}}class Iee{constructor(e,t,i){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=i,this._values=[];for(let s=0,o=this._endLineNumber-this._startLineNumber+1;s<o;s++)this._values[s]=i}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class AHe extends Tr{constructor(e,t){super(e),this._viewDomNode=t;const s=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Ot(document.createElement("div")),jc.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Ot(document.createElement("div")),jc.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const i=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,!0}addWidget(e){const t=Ot(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],s=t?t.preference:null,o=t==null?void 0:t.stackOridinal;return i.preference===s&&i.stack===o?(this._updateMaxMinWidth(),!1):(i.preference=s,i.stack=o,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var i,s;let e=0;const t=Object.keys(this._widgets);for(let o=0,r=t.length;o<r;o++){const a=t[o],c=(s=(i=this._widgets[a].widget).getMinContentWidthInPx)==null?void 0:s.call(i);typeof c<"u"&&(e=Math.max(e,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const i=e.domNode;if(e.preference===null){i.setTop("");return}const s=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const o=i.domNode.clientHeight;i.setTop(this._editorHeight-o-2*this._horizontalScrollbarHeight)}else i.setTop(0);e.stack!==void 0?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(s)}else if(e.preference===2)i.domNode.style.right="50%",e.stack!==void 0?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:o,left:r}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;i.setTop(o+l.top),i.setLeft(r+l.left),i.setPosition("fixed")}else i.setTop(o),i.setLeft(r),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=Qi(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},()=>0);t.sort((s,o)=>(this._widgets[s].stack||0)-(this._widgets[o].stack||0));for(let s=0,o=t.length;s<o;s++){const r=t[s];this._renderWidget(this._widgets[r],i)}}}class OHe{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(144),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const s=t.getColor(ROe);this.borderColor=s?s.toString():null,this.hideCursor=i.get(59);const o=t.getColor(qA);this.cursorColorSingle=o?o.transparent(.7).toString():null;const r=t.getColor(Kue);this.cursorColorPrimary=r?r.transparent(.7).toString():null;const a=t.getColor(Gue);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=i.get(73),c=l.enabled,d=l.side,u=t.getColor(AOe),h=Hi.getDefaultBackground();u?this.backgroundColor=u:c&&d==="right"?this.backgroundColor=h:this.backgroundColor=null;const g=i.get(146).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[m,_]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=m,this.w=_}_initLanes(e,t,i){const s=t-e;if(i>=3){const o=Math.floor(s/3),r=Math.floor(s/3),a=s-o-r,l=e,c=l+o,d=l+o+a;return[[0,l,c,l,d,l,c,l],[0,o,a,o+a,r,o+a+r,a+r,o+a+r]]}else if(i===2){const o=Math.floor(s/2),r=s-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,r,o+r,o+r,o+r]]}else{const o=e,r=s;return[[0,o,o,o,o,o,o,o],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&te.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class FHe extends Tr{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=Ot(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Hi.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new H(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new OHe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let s=this._settings.cursorColorSingle;i>1&&(s=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:s})}return this._cursorPositions.sort((t,i)=>H.compare(t.position,i.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?te.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(Ck.compareByRenderingProps),this._actualShouldRender===1&&!Ck.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!Li(this._renderedCursorPositions,this._cursorPositions,(g,m)=>g.position.lineNumber===m.position.lineNumber&&g.color===m.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,s=this._settings.canvasHeight,o=this._settings.lineHeight,r=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=s/a,c=6*this._settings.pixelRatio|0,d=c/2|0,u=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(u.fillStyle=te.Format.CSS.formatHexA(e),u.fillRect(0,0,i,s)):(u.clearRect(0,0,i,s),u.fillStyle=te.Format.CSS.formatHexA(e),u.fillRect(0,0,i,s)):u.clearRect(0,0,i,s);const h=this._settings.x,f=this._settings.w;for(const g of t){const m=g.color,_=g.data;u.fillStyle=m;let b=0,v=0,w=0;for(let y=0,S=_.length/3;y<S;y++){const x=_[3*y],k=_[3*y+1],D=_[3*y+2];let N=r.getVerticalOffsetForLineNumber(k)*l|0,R=(r.getVerticalOffsetForLineNumber(D)+o)*l|0;if(R-N<c){let B=(N+R)/2|0;B<d?B=d:B+d>s&&(B=s-d),N=B-d,R=B+d}N>w+1||x!==b?(y!==0&&u.fillRect(h[b],v,f[b],w-v),b=x,v=N,w=R):R>w&&(w=R)}u.fillRect(h[b],v,f[b],w-v)}if(!this._settings.hideCursor){const g=2*this._settings.pixelRatio|0,m=g/2|0,_=this._settings.x[7],b=this._settings.w[7];let v=-100,w=-100,y=null;for(let S=0,x=this._cursorPositions.length;S<x;S++){const k=this._cursorPositions[S].color;if(!k)continue;const D=this._cursorPositions[S].position;let N=r.getVerticalOffsetForLineNumber(D.lineNumber)*l|0;N<m?N=m:N+m>s&&(N=s-m);const R=N-m,O=R+g;R>w+1||k!==y?(S!==0&&y&&u.fillRect(_,v,b,w-v),v=R,w=O):O>w&&(w=O),y=k,u.fillStyle=k}y&&u.fillRect(_,v,b,w-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,s),u.moveTo(1,0),u.lineTo(i,0),u.stroke())}}class Tee{constructor(e,t,i){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=i|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class Ffe{constructor(e,t,i,s){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=i,this.color=s,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class WHe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(Ffe.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),o=i/s,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const y=d.getColorZones();if(y){a.push(y);continue}}const u=this._getVerticalOffsetForLine(d.startLineNumber),h=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:u+d.heightInLines*t,f=Math.floor(o*u),g=Math.floor(o*h);let m=Math.floor((f+g)/2),_=g-m;_<r&&(_=r),m-_<0&&(m=_),m+_>i&&(m=i-_);const b=d.color;let v=this._color2Id[b];v||(v=++this._lastAssignedId,this._color2Id[b]=v,this._id2Color[v]=b);const w=new Tee(m-_,m+_,v);d.setColorZone(w),a.push(w)}return this._colorZonesInvalid=!1,a.sort(Tee.compare),a}}class BHe extends eD{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=Ot(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new WHe(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,s,e),!0}_renderOneLane(e,t,i,s){let o=0,r=0,a=0;for(const l of t){const c=l.colorId,d=l.from,u=l.to;c!==o?(e.fillRect(0,r,s,a-r),o=c,e.fillStyle=i[o],r=d,a=u):a>=d?a=Math.max(a,u):(e.fillRect(0,r,s,a-r),r=d,a=u)}e.fillRect(0,r,s,a-r)}}class HHe extends Tr{constructor(e){super(e),this.domNode=Ot(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.viewModel.model.getOptions(),o=s;let r=t-e;for(;r>0;){const a=Ot(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let i=e-t;for(;i>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const s=this._renderedRulers[t],o=this._rulers[t];s.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}class jHe extends Tr{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const i=this._context.configuration.options.get(104);this._useShadows=i.useShadows,this._domNode=Ot(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const i=this._context.configuration.options.get(104);return this._useShadows=i.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class VHe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class zHe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function UHe(n){return new VHe(n)}function $He(n){return new zHe(n.lineNumber,n.ranges.map(UHe))}const nn=class nn extends Gb{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,i){const s=this._typicalHalfwidthCharacterWidth/4;let o=null,r=null;if(i&&i.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!o&&c<i.length;c++)i[c].lineNumber===a&&(o=i[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=i.length-1;!r&&c>=0;c--)i[c].lineNumber===l&&(r=i[c].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,u=c.left+c.width,h={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,m=t[a-1].ranges[0].left+t[a-1].ranges[0].width;SE(d-g)<s?h.top=2:d>g&&(h.top=1),SE(u-m)<s?f.top=2:g<u&&u<m&&(f.top=1)}else o&&(h.top=o.startStyle.top,f.top=o.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,m=t[a+1].ranges[0].left+t[a+1].ranges[0].width;SE(d-g)<s?h.bottom=2:g<d&&d<m&&(h.bottom=1),SE(u-m)<s?f.bottom=2:u<m&&(f.bottom=1)}else r&&(h.bottom=r.startStyle.bottom,f.bottom=r.endStyle.bottom);c.startStyle=h,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,i){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map($He);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,i),o}_createSelectionPiece(e,t,i,s,o){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+s.toString()+"px;width:"+o.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,i,s){if(s.length===0)return;const o=!!s[0].ranges[0].startStyle,r=s[0].lineNumber,a=s[s.length-1].lineNumber;for(let l=0,c=s.length;l<c;l++){const d=s[l],u=d.lineNumber,h=u-t,f=i&&u===r?1:0,g=i&&u!==r&&u===a?1:0;let m="",_="";for(let b=0,v=d.ranges.length;b<v;b++){const w=d.ranges[b];if(o){const S=w.startStyle,x=w.endStyle;if(S.top===1||S.bottom===1){m+=this._createSelectionPiece(f,g,nn.SELECTION_CLASS_NAME,w.left-nn.ROUNDED_PIECE_WIDTH,nn.ROUNDED_PIECE_WIDTH);let k=nn.EDITOR_BACKGROUND_CLASS_NAME;S.top===1&&(k+=" "+nn.SELECTION_TOP_RIGHT),S.bottom===1&&(k+=" "+nn.SELECTION_BOTTOM_RIGHT),m+=this._createSelectionPiece(f,g,k,w.left-nn.ROUNDED_PIECE_WIDTH,nn.ROUNDED_PIECE_WIDTH)}if(x.top===1||x.bottom===1){m+=this._createSelectionPiece(f,g,nn.SELECTION_CLASS_NAME,w.left+w.width,nn.ROUNDED_PIECE_WIDTH);let k=nn.EDITOR_BACKGROUND_CLASS_NAME;x.top===1&&(k+=" "+nn.SELECTION_TOP_LEFT),x.bottom===1&&(k+=" "+nn.SELECTION_BOTTOM_LEFT),m+=this._createSelectionPiece(f,g,k,w.left+w.width,nn.ROUNDED_PIECE_WIDTH)}}let y=nn.SELECTION_CLASS_NAME;if(o){const S=w.startStyle,x=w.endStyle;S.top===0&&(y+=" "+nn.SELECTION_TOP_LEFT),S.bottom===0&&(y+=" "+nn.SELECTION_BOTTOM_LEFT),x.top===0&&(y+=" "+nn.SELECTION_TOP_RIGHT),x.bottom===0&&(y+=" "+nn.SELECTION_BOTTOM_RIGHT)}_+=this._createSelectionPiece(f,g,y,w.left,w.width)}e[h][0]+=m,e[h][1]+=_}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let r=i;r<=s;r++){const a=r-i;t[a]=["",""]}const o=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){o[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);o[r]=c,this._actualRenderOneSelection(t,i,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}};nn.SELECTION_CLASS_NAME="selected-text",nn.SELECTION_TOP_LEFT="top-left-radius",nn.SELECTION_BOTTOM_LEFT="bottom-left-radius",nn.SELECTION_TOP_RIGHT="top-right-radius",nn.SELECTION_BOTTOM_RIGHT="bottom-right-radius",nn.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",nn.ROUNDED_PIECE_WIDTH=10;let l8=nn;tl((n,e)=>{const t=n.getColor(tPe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function SE(n){return n<0?-n:n}class Pee{constructor(e,t,i,s,o,r,a){this.top=e,this.left=t,this.paddingLeft=i,this.width=s,this.height=o,this.textContent=r,this.textContentClassName=a}}var sh;(function(n){n[n.Single=0]="Single",n[n.MultiPrimary=1]="MultiPrimary",n[n.MultiSecondary=2]="MultiSecondary"})(sh||(sh={}));class Mee{constructor(e,t){this._context=e;const i=this._context.configuration.options,s=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Ot(document.createElement("div")),this._domNode.setClassName(`cursor ${fC}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),as(this._domNode,s),this._domNode.setDisplay("none"),this._position=new H(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case sh.Single:this._pluralityClass="";break;case sh.MultiPrimary:this._pluralityClass="cursor-primary";break;case sh.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),as(this._domNode,i),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,i=this._context.viewModel.getLineContent(e),[s,o]=GLe(i,t-1);return[new H(e,s+1),i.substring(s,o)]}_prepareRender(e){let t="",i="";const[s,o]=this._getGraphemeAwarePosition();if(this._cursorStyle===ns.Line||this._cursorStyle===ns.LineThin){const h=e.visibleRangeForPosition(s);if(!h||h.outsideRenderedLine)return null;const f=Te(this._domNode.domNode);let g;this._cursorStyle===ns.Line?(g=lQ(f,this._lineCursorWidth>0?this._lineCursorWidth:2),g>2&&(t=o,i=this._getTokenClassName(s))):g=lQ(f,1);let m=h.left,_=0;g>=2&&m>=1&&(_=1,m-=_);const b=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta;return new Pee(b,m,_,g,this._lineHeight,t,i)}const r=e.linesVisibleRangesForRange(new E(s.lineNumber,s.column,s.lineNumber,s.column+o.length),!1);if(!r||r.length===0)return null;const a=r[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=o==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===ns.Block&&(t=o,i=this._getTokenClassName(s));let d=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return(this._cursorStyle===ns.Underline||this._cursorStyle===ns.UnderlineThin)&&(d+=this._lineHeight-2,u=2),new Pee(d,l.left,0,c,u,t,i)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),i=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(i)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${fC} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const JS=class JS extends Tr{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Mee(this._context,sh.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=Ot(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Bl,this._cursorFlatBlinkInterval=new vz,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,s=this._secondaryCursors.length;i<s;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,i){const s=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(t.length?sh.MultiPrimary:sh.Single),this._primaryCursor.onCursorPositionChanged(e,s),this._updateBlinking(),this._secondaryCursors.length<t.length){const o=t.length-this._secondaryCursors.length;for(let r=0;r<o;r++){const a=new Mee(this._context,sh.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const o=this._secondaryCursors.length-t.length;for(let r=0;r<o;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let o=0;o<t.length;o++)this._secondaryCursors[o].onCursorPositionChanged(t[o],s)}onCursorStateChanged(e){const t=[];for(let s=0,o=e.selections.length;s<o;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=i=>{for(let s=0,o=e.ranges.length;s<o;s++)if(e.ranges[s].fromLineNumber<=i.lineNumber&&i.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,i=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!i&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},JS.BLINK_INTERVAL,Te(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},JS.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ns.Line:e+=" cursor-line-style";break;case ns.Block:e+=" cursor-block-style";break;case ns.Underline:e+=" cursor-underline-style";break;case ns.LineThin:e+=" cursor-line-thin-style";break;case ns.BlockOutline:e+=" cursor-block-outline-style";break;case ns.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let i=0;const s=this._primaryCursor.render(e);s&&(t[i++]=s);for(let o=0,r=this._secondaryCursors.length;o<r;o++){const a=this._secondaryCursors[o].render(e);a&&(t[i++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};JS.BLINK_INTERVAL=500;let c8=JS;tl((n,e)=>{const t=[{class:".cursor",foreground:qA,background:_U},{class:".cursor-primary",foreground:Kue,background:_Oe},{class:".cursor-secondary",foreground:Gue,background:bOe}];for(const i of t){const s=n.getColor(i.foreground);if(s){let o=n.getColor(i.background);o||(o=s.opposite()),e.addRule(`.monaco-editor .cursors-layer ${i.class} { background-color: ${s}; border-color: ${s}; color: ${o}; }`),Ec(n.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${i.class} { border-left: 1px solid ${o}; border-right: 1px solid ${o}; }`)}}});const q4=()=>{throw new Error("Invalid change accessor")};class qHe extends Tr{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(146);this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=Ot(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Ot(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let i=!1;return this._context.viewModel.changeWhitespace(s=>{const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const u=t.get(l);u&&(u.afterLineNumber!==d.afterViewLineNumber||u.height!==d.heightInPx)&&(s.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new H(r,this._context.viewModel.model.getLineMaxColumn(r))}let i;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):i=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),o=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!o,afterViewLineNumber:s.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(i=>{const s={addZone:o=>(t=!0,this._addZone(i,o)),removeZone:o=>{o&&(t=this._removeZone(i,o)||t)},layoutZone:o=>{o&&(t=this._layoutZone(i,o)||t)}};KHe(e,s),s.addZone=q4,s.removeZone=q4,s.layoutZone=q4}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:Ot(t.domNode),marginDomNode:t.marginDomNode?Ot(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,i.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.remove(),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],s=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(i.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(i.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(i){He(i)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(i){He(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let s=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(i[r.id]=r,s=!0);const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l];let d=0,u=0,h="none";i.hasOwnProperty(l)?(d=i[l].verticalOffset-e.bigNumbersDelta,u=i[l].height,h="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(i[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(u),c.domNode.setDisplay(h),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(u),c.marginDomNode.setDisplay(h))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function KHe(n,e){try{return n(e)}catch(t){He(t)}}class GHe extends Gb{constructor(e){super(),this._context=e,this._options=new Ree(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new Ree(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber-t+1,o=new Array(s);for(let a=0;a<s;a++)o[a]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,o);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=r.data[l];let d=null;if(this._options.renderWhitespace==="selection"){const u=this._selection;for(const h of u){if(h.endLineNumber<a||h.startLineNumber>a)continue;const f=h.startLineNumber===a?h.startColumn:c.minColumn,g=h.endLineNumber===a?h.endColumn:c.maxColumn;f<g&&(d||(d=[]),d.push(new mfe(f-1,g-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,c)}}_applyRenderWhitespace(e,t,i,s){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&s.continuesWithWrappedLine)return"";const o=this._context.theme.getColor(bU),r=this._options.renderWithSVG,a=s.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=s.continuesWithWrappedLine,d=s.minColumn-1,u=this._options.renderWhitespace==="boundary",h=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,g=this._options.middotWidth,m=this._options.wsmiddotWidth,_=this._options.spaceWidth,b=Math.abs(m-_),v=Math.abs(g-_),w=b<v?11825:183,y=this._options.canUseHalfwidthRightwardsArrow;let S="",x=!1,k=Zs(a),D;k===-1?(x=!0,k=l,D=l):D=Dc(a);let N=0,R=i&&i[N],O=0;for(let B=d;B<l;B++){const z=a.charCodeAt(B);if(R&&B>=R.endOffset&&(N++,R=i&&i[N]),z!==9&&z!==32||h&&!x&&B<=D)continue;if(u&&B>=k&&B<=D&&z===32){const K=B-1>=0?a.charCodeAt(B-1):0,Z=B+1<l?a.charCodeAt(B+1):0;if(K!==32&&Z!==32)continue}if(u&&c&&B===l-1){const K=B-1>=0?a.charCodeAt(B-1):0;if(z===32&&K!==32&&K!==9)continue}if(i&&(!R||R.startOffset>B||R.endOffset<=B))continue;const F=e.visibleRangeForPosition(new H(t,B+1));F&&(r?(O=Math.max(O,F.left),z===9?S+=this._renderArrow(f,_,F.left):S+=`<circle cx="${(F.left+_/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(_/7).toFixed(2)}" />`):z===9?S+=`<div class="mwh" style="left:${F.left}px;height:${f}px;">${y?"":""}</div>`:S+=`<div class="mwh" style="left:${F.left}px;height:${f}px;">${String.fromCharCode(w)}</div>`)}return r?(O=Math.round(O+_),`<svg style="bottom:0;position:absolute;width:${O}px;height:${f}px" viewBox="0 0 ${O} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${o}">`+S+"</svg>"):S}_renderArrow(e,t,i){const s=t/7,o=t,r=e/2,a=i,l={x:0,y:s/2},c={x:100/125*o,y:l.y},d={x:c.x-.2*c.x,y:c.y+.2*c.x},u={x:d.x+.1*c.x,y:d.y+.1*c.x},h={x:u.x+.35*c.x,y:u.y-.35*c.x},f={x:h.x,y:-h.y},g={x:u.x,y:-u.y},m={x:d.x,y:-d.y},_={x:c.x,y:-c.y},b={x:l.x,y:-l.y};return`<path d="M ${[l,c,d,u,h,f,g,m,_,b].map(y=>`${(a+y.x).toFixed(2)} ${(r+y.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}class Ree{constructor(e){const t=e.options,i=t.get(50),s=t.get(38);s==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):s==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class YHe{constructor(e,t,i,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=i,this._model=s,this.visibleRange=new E(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class ZHe{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class QHe{constructor(e,t,i){this.configuration=e,this.theme=new ZHe(t),this.viewModel=i,this.viewLayout=i.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var XHe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},JHe=function(n,e){return function(t,i){e(t,i,n)}};let d8=class extends eD{constructor(e,t,i,s,o,r,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Ce(1,1,1,1)],this._renderAnimationFrame=null;const l=new aHe(t,s,o,e);this._context=new QHe(t,i,s),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(i8,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Ot(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Ot(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Ot(document.createElement("div")),jc.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new _He(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new a8(this._context,this._linesContent),this._viewZones=new qHe(this._context),this._viewParts.push(this._viewZones);const c=new FHe(this._context);this._viewParts.push(c);const d=new jHe(this._context);this._viewParts.push(d);const u=new cHe(this._context);this._viewParts.push(u),u.addDynamicOverlay(new gHe(this._context)),u.addDynamicOverlay(new l8(this._context)),u.addDynamicOverlay(new xHe(this._context)),u.addDynamicOverlay(new pHe(this._context)),u.addDynamicOverlay(new GHe(this._context));const h=new dHe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new mHe(this._context)),h.addDynamicOverlay(new NHe(this._context)),h.addDynamicOverlay(new EHe(this._context)),h.addDynamicOverlay(new _P(this._context)),this._glyphMarginWidgets=new wHe(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new bP(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(h.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new hHe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new c8(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new AHe(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const g=new HHe(this._context);this._viewParts.push(g);const m=new uHe(this._context);this._viewParts.push(m);const _=new RHe(this._context);if(this._viewParts.push(_),c){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(c.getDomNode(),b.insertBefore)}this._linesContent.appendChild(u.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_.getDomNode()),this._overflowGuardContainer.appendChild(m.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?(r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),r.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new NBe(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let i=[],s=0;i=i.concat(e.getAllMarginDecorations().map(o=>{var a,l;const r=((a=o.options.glyphMargin)==null?void 0:a.position)??Rl.Center;return s=Math.max(s,o.range.endLineNumber),{range:o.range,lane:r,persist:(l=o.options.glyphMargin)==null?void 0:l.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(o=>{const r=e.validateRange(o.preference.range);return s=Math.max(s,r.endLineNumber),{range:r,lane:o.preference.lane}})),i.sort((o,r)=>E.compareRangesUsingStarts(o.range,r.range)),t.reset(s);for(const o of i)t.push(o.lane,o.range,o.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new _Be(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new H(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+VB(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){var e;if(this._store.isDisposed)throw new Dt;if(this._renderAnimationFrame===null){const t=this._createCoordinatedRendering();this._renderAnimationFrame=u8.INSTANCE.scheduleCoordinatedRendering({window:Te((e=this.domNode)==null?void 0:e.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Dt;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Dt;return t.renderText()},prepareRender:(i,s)=>{if(this._store.isDisposed)throw new Dt;return t.prepareRender(i,s)},render:(i,s)=>{if(this._store.isDisposed)throw new Dt;return t.render(i,s)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();Xf(()=>e.prepareRenderText());const t=Xf(()=>e.renderText());if(t){const[i,s]=t;Xf(()=>e.prepareRender(i,s)),Xf(()=>e.render(i,s))}}_getViewPartsToRender(){const e=[];let t=0;for(const i of this._viewParts)i.shouldRender()&&(e[t++]=i);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}Qf.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const i=new YHe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new dBe(this._context.viewLayout,i,this._viewLines)]},prepareRender:(e,t)=>{for(const i of e)i.prepareRender(t)},render:(e,t)=>{for(const i of e)i.render(t),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const i=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new H(s.lineNumber,s.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const i=this._pointerHandler.getTargetAtClientPoint(e,t);return i?lO.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new BHe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const i of this._viewParts)i.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,i,s,o;this._contentWidgets.setWidgetPosition(e.widget,((t=e.position)==null?void 0:t.position)??null,((i=e.position)==null?void 0:i.secondaryPosition)??null,((s=e.position)==null?void 0:s.preference)??null,((o=e.position)==null?void 0:o.positionAffinity)??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};d8=XHe([JHe(6,ke)],d8);function Xf(n){try{return n()}catch(e){return He(e),null}}const x2=class x2{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[i,s]of this._animationFrameRunners)s.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,tT(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const i of e)Xf(()=>i.prepareRenderText());const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t[i]=Xf(()=>o.renderText())}for(let i=0,s=e.length;i<s;i++){const o=e[i],r=t[i];if(!r)continue;const[a,l]=r;Xf(()=>o.prepareRender(a,l))}for(let i=0,s=e.length;i<s;i++){const o=e[i],r=t[i];if(!r)continue;const[a,l]=r;Xf(()=>o.render(a,l))}}};x2.INSTANCE=new x2;let u8=x2;class LS{constructor(e,t,i,s,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=i,this.breakOffsetsVisibleColumn=s,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let s=this.breakOffsets[e]-t;return e>0&&(s+=this.wrappedTextIndentLength),s}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let s=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&s>this.injectionOffsets[o];o++)s<this.injectionOffsets[o]+this.injectionOptions[o].content.length?s=this.injectionOffsets[o]:s-=this.injectionOptions[o].content.length;return s}translateToOutputPosition(e,t=2){let i=e;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)i+=this.injectionOptions[s].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let i=0,s=this.breakOffsets.length-1,o=0,r=0;for(;i<=s;){o=i+(s-i)/2|0;const l=this.breakOffsets[o];if(r=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=r)s=o-1;else if(e>l)i=o+1;else break;else if(e<r)s=o-1;else if(e>=l)i=o+1;else break}let a=e-r;return o>0&&(a+=this.wrappedTextIndentLength),new xE(o,a)}normalizeOutputPosition(e,t,i){if(this.injectionOffsets!==null){const s=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(s,i);if(o!==s)return this.offsetInInputWithInjectionsToOutputPosition(o,i)}if(i===0){if(e>0&&t===this.getMinOutputOffset(e))return new xE(e-1,this.getMaxOutputOffset(e-1))}else if(i===1){const s=this.getOutputLineCount()-1;if(e<s&&t===this.getMaxOutputOffset(e))return new xE(e+1,this.getMinOutputOffset(e+1))}return new xE(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const i=this.getInjectedTextAtOffset(e);if(!i)return e;if(t===2){if(e===i.offsetInInputWithInjections+i.length&&Aee(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{let s=i.offsetInInputWithInjections;if(Oee(this.injectionOptions[i.injectedTextIndex].cursorStops))return s;let o=i.injectedTextIndex-1;for(;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[i.injectedTextIndex]&&!(Aee(this.injectionOptions[o].cursorStops)||(s-=this.injectionOptions[o].content.length,Oee(this.injectionOptions[o].cursorStops)));)o--;return s}}else if(t===1||t===4){let s=i.offsetInInputWithInjections+i.length,o=i.injectedTextIndex;for(;o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o];)s+=this.injectionOptions[o+1].content.length,o++;return s}else if(t===0||t===3){let s=i.offsetInInputWithInjections,o=i.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)s-=this.injectionOptions[o-1].content.length,o--;return s}_A()}getInjectedText(e,t){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.getInjectedTextAtOffset(i);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,i=this.injectionOptions;if(t!==null){let s=0;for(let o=0;o<t.length;o++){const r=i[o].content.length,a=t[o]+s,l=t[o]+s+r;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:r};s+=r}}}}function Aee(n){return n==null?!0:n===xl.Right||n===xl.Both}function Oee(n){return n==null?!0:n===xl.Left||n===xl.Both}class xE{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new H(e+this.outputLineIndex,this.outputOffset+1)}}const K4=Vh("domLineBreaksComputer",{createHTML:n=>n});class h${static create(e){return new h$(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,i,s,o){const r=[],a=[];return{addRequest:(l,c,d)=>{r.push(l),a.push(c)},finalize:()=>eje(zf(this.targetWindow.deref()),r,e,t,i,s,o,a)}}}function eje(n,e,t,i,s,o,r,a){function l(N){const R=a[N];if(R){const O=Wc.applyInjectedText(e[N],R),B=R.map(F=>F.options),z=R.map(F=>F.column-1);return new LS(z,B,[O.length],[],0)}else return null}if(s===-1){const N=[];for(let R=0,O=e.length;R<O;R++)N[R]=l(R);return N}const c=Math.round(s*t.typicalHalfwidthCharacterWidth),u=Math.round(i*(o===3?2:o===2?1:0)),h=Math.ceil(t.spaceWidth*u),f=document.createElement("div");as(f,t);const g=new n1(1e4),m=[],_=[],b=[],v=[],w=[];for(let N=0;N<e.length;N++){const R=Wc.applyInjectedText(e[N],a[N]);let O=0,B=0,z=c;if(o!==0)if(O=Zs(R),O===-1)O=0;else{for(let re=0;re<O;re++){const q=R.charCodeAt(re)===9?i-B%i:1;B+=q}const Z=Math.ceil(t.spaceWidth*B);Z+t.typicalFullwidthCharacterWidth>c?(O=0,B=0):z=c-Z}const F=R.substr(O),K=tje(F,B,i,z,g,h);m[N]=O,_[N]=B,b[N]=F,v[N]=K[0],w[N]=K[1]}const y=g.build(),S=(K4==null?void 0:K4.createHTML(y))??y;f.innerHTML=S,f.style.position="absolute",f.style.top="10000",r==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),n.document.body.appendChild(f);const x=document.createRange(),k=Array.prototype.slice.call(f.children,0),D=[];for(let N=0;N<e.length;N++){const R=k[N],O=ije(x,R,b[N],v[N]);if(O===null){D[N]=l(N);continue}const B=m[N],z=_[N]+u,F=w[N],K=[];for(let J=0,ge=O.length;J<ge;J++)K[J]=F[O[J]];if(B!==0)for(let J=0,ge=O.length;J<ge;J++)O[J]+=B;let Z,re;const q=a[N];q?(Z=q.map(J=>J.options),re=q.map(J=>J.column-1)):(Z=null,re=null),D[N]=new LS(re,Z,O,K,z)}return f.remove(),D}function tje(n,e,t,i,s,o){if(o!==0){const h=String(o);s.appendString('<div style="text-indent: -'),s.appendString(h),s.appendString("px; padding-left: "),s.appendString(h),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(i)),s.appendString('px;">');const r=n.length;let a=e,l=0;const c=[],d=[];let u=0<r?n.charCodeAt(0):0;s.appendString("<span>");for(let h=0;h<r;h++){h!==0&&h%16384===0&&s.appendString("</span><span>"),c[h]=l,d[h]=a;const f=u;u=h+1<r?n.charCodeAt(h+1):0;let g=1,m=1;switch(f){case 9:g=t-a%t,m=g;for(let _=1;_<=g;_++)_<g?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:u===32?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:qg(f)&&m++,f<32?s.appendCharCode(9216+f):s.appendCharCode(f)}l+=g,a+=m}return s.appendString("</span>"),c[n.length]=l,d[n.length]=a,s.appendString("</div>"),[c,d]}function ije(n,e,t,i){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),o=[];try{h8(n,s,i,0,null,t.length-1,null,o)}catch(r){return console.log(r),null}return o.length===0?null:(o.push(t.length),o)}function h8(n,e,t,i,s,o,r,a){if(i===o||(s=s||G4(n,e,t[i],t[i+1]),r=r||G4(n,e,t[o],t[o+1]),Math.abs(s[0].top-r[0].top)<=.1))return;if(i+1===o){a.push(o);return}const l=i+(o-i)/2|0,c=G4(n,e,t[l],t[l+1]);h8(n,e,t,i,s,l,c,a),h8(n,e,t,l,c,o,r,a)}function G4(n,e,t,i){return n.setStart(e[t/16384|0].firstChild,t%16384),n.setEnd(e[i/16384|0].firstChild,i%16384),n.getClientRects()}class nje extends U{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new nz),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,i){this._editor=e,this._instantiationService=i;for(const s of t){if(this._pending.has(s.id)){He(new Error(`Cannot have two contributions with the same id ${s.id}`));continue}this._pending.set(s.id,s)}this._instantiateSome(0),this._register(C0(Te(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(C0(Te(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(C0(Te(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,i]of this._instances)typeof i.saveViewState=="function"&&(e[t]=i.saveViewState());return e}restoreViewState(e){for(const[t,i]of this._instances)typeof i.restoreViewState=="function"&&i.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return C0(Te((e=this._editor)==null?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const i of t)this._instantiateById(i.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,i]of this._pending)i.instantiation===e&&t.push(i);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),typeof i.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(i){He(i)}}}}class Wfe{constructor(e,t,i,s,o,r,a){this.id=e,this.label=t,this.alias=i,this.metadata=s,this._precondition=o,this._run=r,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class f${static create(e){return new f$(e.get(135),e.get(134))}constructor(e,t){this.classifier=new sje(e,t)}createLineBreaksComputer(e,t,i,s,o){const r=[],a=[],l=[];return{addRequest:(c,d,u)=>{r.push(c),a.push(d),l.push(u)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let u=0,h=r.length;u<h;u++){const f=a[u],g=l[u];g&&!g.injectionOptions&&!f?d[u]=oje(this.classifier,g,r[u],t,i,c,s,o):d[u]=rje(this.classifier,r[u],f,t,i,c,s,o)}return f8.length=0,g8.length=0,d}}}}class sje extends s1{constructor(e,t){super(0);for(let i=0;i<e.length;i++)this.set(e.charCodeAt(i),1);for(let i=0;i<t.length;i++)this.set(t.charCodeAt(i),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let f8=[],g8=[];function oje(n,e,t,i,s,o,r,a){if(s===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",d=e.breakOffsets,u=e.breakOffsetsVisibleColumn,h=Bfe(t,i,s,o,r),f=s-h,g=f8,m=g8;let _=0,b=0,v=0,w=s;const y=d.length;let S=0;if(S>=0){let x=Math.abs(u[S]-w);for(;S+1<y;){const k=Math.abs(u[S+1]-w);if(k>=x)break;x=k,S++}}for(;S<y;){let x=S<0?0:d[S],k=S<0?0:u[S];b>x&&(x=b,k=v);let D=0,N=0,R=0,O=0;if(k<=w){let z=k,F=x===0?0:t.charCodeAt(x-1),K=x===0?0:n.get(F),Z=!0;for(let re=x;re<l;re++){const q=re,J=t.charCodeAt(re);let ge,be;if(Pn(J)?(re++,ge=0,be=2):(ge=n.get(J),be=DS(J,z,i,o)),q>b&&m8(F,K,J,ge,c)&&(D=q,N=z),z+=be,z>w){q>b?(R=q,O=z-be):(R=re+1,O=z),z-N>f&&(D=0),Z=!1;break}F=J,K=ge}if(Z){_>0&&(g[_]=d[d.length-1],m[_]=u[d.length-1],_++);break}}if(D===0){let z=k,F=t.charCodeAt(x),K=n.get(F),Z=!1;for(let re=x-1;re>=b;re--){const q=re+1,J=t.charCodeAt(re);if(J===9){Z=!0;break}let ge,be;if(lb(J)?(re--,ge=0,be=2):(ge=n.get(J),be=qg(J)?o:1),z<=w){if(R===0&&(R=q,O=z),z<=w-f)break;if(m8(J,ge,F,K,c)){D=q,N=z;break}}z-=be,F=J,K=ge}if(D!==0){const re=f-(O-N);if(re<=i){const q=t.charCodeAt(R);let J;Pn(q)?J=2:J=DS(q,O,i,o),re-J<0&&(D=0)}}if(Z){S--;continue}}if(D===0&&(D=R,N=O),D<=b){const z=t.charCodeAt(b);Pn(z)?(D=b+2,N=v+2):(D=b+1,N=v+DS(z,v,i,o))}for(b=D,g[_]=D,v=N,m[_]=N,_++,w=N+f;S<0||S<y&&u[S]<N;)S++;let B=Math.abs(u[S]-w);for(;S+1<y;){const z=Math.abs(u[S+1]-w);if(z>=B)break;B=z,S++}}return _===0?null:(g.length=_,m.length=_,f8=e.breakOffsets,g8=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=h,e)}function rje(n,e,t,i,s,o,r,a){const l=Wc.applyInjectedText(e,t);let c,d;if(t&&t.length>0?(c=t.map(N=>N.options),d=t.map(N=>N.column-1)):(c=null,d=null),s===-1)return c?new LS(d,c,[l.length],[],0):null;const u=l.length;if(u<=1)return c?new LS(d,c,[l.length],[],0):null;const h=a==="keepAll",f=Bfe(l,i,s,o,r),g=s-f,m=[],_=[];let b=0,v=0,w=0,y=s,S=l.charCodeAt(0),x=n.get(S),k=DS(S,0,i,o),D=1;Pn(S)&&(k+=1,S=l.charCodeAt(1),x=n.get(S),D++);for(let N=D;N<u;N++){const R=N,O=l.charCodeAt(N);let B,z;Pn(O)?(N++,B=0,z=2):(B=n.get(O),z=DS(O,k,i,o)),m8(S,x,O,B,h)&&(v=R,w=k),k+=z,k>y&&((v===0||k-w>g)&&(v=R,w=k-z),m[b]=v,_[b]=w,b++,y=w+g,v=0),S=O,x=B}return b===0&&(!t||t.length===0)?null:(m[b]=u,_[b]=k,new LS(d,c,m,_,f))}function DS(n,e,t,i){return n===9?t-e%t:qg(n)||n<32?i:1}function Fee(n,e){return e-n%e}function m8(n,e,t,i,s){return t!==32&&(e===2&&i!==2||e!==1&&i===1||!s&&e===3&&i!==2||!s&&i===3&&e!==1)}function Bfe(n,e,t,i,s){let o=0;if(s!==0){const r=Zs(n);if(r!==-1){for(let l=0;l<r;l++){const c=n.charCodeAt(l)===9?Fee(o,e):1;o+=c}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const c=Fee(o,e);o+=c}o+i>t&&(o=0)}}return o}class xP{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new ts(new E(1,1,1,1),0,0,new H(1,1),0),new ts(new E(1,1,1,1),0,0,new H(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new St(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Ce.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Ce.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,i){this._setState(e,t,i)}static _validatePositionWithCache(e,t,i,s){return t.equals(i)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const i=t.position,s=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(i,2),a=this._validatePositionWithCache(e,s,i,r),l=this._validatePositionWithCache(e,o,s,a);return i.equals(r)&&s.equals(a)&&o.equals(l)?t:new ts(E.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+s.column-a.column,r,t.leftoverVisibleColumns+i.column-r.column)}_setState(e,t,i){if(i&&(i=xP._validateViewState(e.viewModel,i)),t){const s=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new ts(s,t.selectionStartKind,o,r,a)}else{if(!i)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(i.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(i.position));t=new ts(s,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,o,i.leftoverVisibleColumns)}if(i){const s=e.coordinatesConverter.validateViewRange(i.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(i.position,t.position);i=new ts(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new H(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new H(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new E(s.lineNumber,s.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);i=new ts(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=i,this._updateTrackedRange(e)}}class Wee{constructor(e){this.context=e,this.cursors=[new xP(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return bIe(this.cursors,mo(e=>e.viewState.position,H.compare)).viewState.position}getBottomMostViewPosition(){return _Ie(this.cursors,mo(e=>e.viewState.position,H.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(St.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,i=e.length;if(t<i){const s=i-t;for(let o=0;o<s;o++)this._addSecondaryCursor()}else if(t>i){const s=t-i;for(let o=0;o<s;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let s=0;s<i;s++)this.cursors[s+1].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new xP(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let i=0,s=e.length;i<s;i++)t.push({index:i,selection:e[i].modelState.selection});t.sort(mo(i=>i.selection,E.compareRangesUsingStarts));for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1],r=s.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=s.index<o.index?i:i+1,d=s.index<o.index?i+1:i,u=t[d].index,h=t[c].index,f=t[d].selection,g=t[c].selection;if(!f.equalsSelection(g)){const m=f.plusRange(g),_=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,b=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let v;u===this.lastAddedCursorIndex?(v=_,this.lastAddedCursorIndex=h):v=b;let w;v?w=new Ce(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn):w=new Ce(m.endLineNumber,m.endColumn,m.startLineNumber,m.startColumn),t[c].selection=w;const y=St.fromModelSelection(w);e[h].setState(this.context,y.modelState,y.viewState)}for(const m of t)m.index>u&&m.index--;e.splice(u,1),t.splice(d,1),this._removeSecondaryCursor(u-1),i--}}}}class Bee{constructor(e,t,i,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=i,this.cursorConfig=s}}class aje{constructor(){this.type=0}}class lje{constructor(){this.type=1}}class cje{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class dje{constructor(e,t,i){this.selections=e,this.modelSelections=t,this.reason=i,this.type=3}}class Rm{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class kE{constructor(){this.type=5}}class uje{constructor(e){this.type=6,this.isFocused=e}}class hje{constructor(){this.type=7}}class LE{constructor(){this.type=8}}class Hfe{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class p8{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class _8{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class ES{constructor(e,t,i,s,o,r,a){this.source=e,this.minimalReveal=t,this.range=i,this.selections=s,this.verticalType=o,this.revealHorizontal=r,this.scrollType=a,this.type=12}}class fje{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class gje{constructor(e){this.theme=e,this.type=14}}class mje{constructor(e){this.type=15,this.ranges=e}}class pje{constructor(){this.type=16}}let _je=class{constructor(){this.type=17}};class bje extends U{constructor(){super(),this._onEvent=this._register(new j),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,i=this._outgoingEvents.length;t<i;t++){const s=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(s){this._outgoingEvents[t]=s;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,i=this._eventHandlers.length;t<i;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new vje),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const i of e)this._addOutgoingEvent(i);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const i of t)i.handleEvents(e)}}}class vje{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class g${constructor(e,t,i,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=i,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new g$(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class m${constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new m$(this.oldHasFocus,e.hasFocus)}}class p${constructor(e,t,i,s,o,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=i,this._oldScrollTop=s,this.scrollWidth=o,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new p$(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class wje{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Cje{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class kP{constructor(e,t,i,s,o,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=i,this.modelVersionId=s,this.source=o,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const i=e.length,s=t.length;if(i!==s)return!1;for(let o=0;o<i;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return kP._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new kP(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class yje{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Sje{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class xje{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class kje{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class Lje{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class Dje{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class Eje{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class Nje extends U{constructor(e,t,i,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=i,this.context=new Bee(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new Wee(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Qt(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new Bee(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const i=this._autoClosedActions[t];i.isValid(e)||(i.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,i,s){let o=!1;const r=this.context.cursorConfig.multiCursorLimit;s!==null&&s.length>r&&(s=s.slice(0,r),o=!0);const a=NS.from(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,i,a,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,i,s,o,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=E.fromPositions(a[0],a[0]),e.emitViewEvent(new ES(t,i,l,c,s,o,r))}revealPrimary(e,t,i,s,o,r){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new ES(t,i,null,l,s,o,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let i=0,s=t.length;i<s;i++){const o=t[i];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){const i=[];for(let s=0,o=t.length;s<o;s++){const r=t[s];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,d=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(d=r.selectionStart.column),i.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,St.fromModelSelections(i)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof yhe){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const i=t.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;const s=i.containsEvent(1);if(this._prevEditOperationType=0,s)this._cursors.dispose(),this._cursors=new Wee(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){const o=St.fromModelSelections(i.resultingSelection);this.setStates(e,"modelChange",i.isUndoing?5:i.isRedoing?6:2,o)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const o=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,St.fromModelSelections(o))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),i=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,i,s){this.setStates(e,t,s,St.fromModelSelections(i))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const i=[],s=[];for(let a=0,l=e.length;a<l;a++)i.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],i),r=this._model.deltaDecorations([],s);this._autoClosedActions.push(new Hee(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=Ije.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const i=[],s=[];for(let o=0;o<e.commands.length;o++){const r=e.commands[o];r instanceof l$&&r.enclosingRange&&r.closeCharacterRange&&(i.push(r.closeCharacterRange),s.push(r.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,i,s,o){const r=NS.from(this._model,this);if(r.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new dje(l,a,i)),!s||s.cursorState.length!==r.cursorState.length||r.cursorState.some((c,d)=>!c.modelState.equals(s.cursorState[d].modelState))){const c=s?s.cursorState.map(u=>u.modelState.selection):null,d=s?s.modelVersionId:0;e.emitOutgoingEvent(new kP(c,a,d,r.modelVersionId,t||"keyboard",i,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];if(!o.text||o.text.indexOf(`
`)>=0)return null;const r=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=o.text.length-r[2].length-1,u=o.text.lastIndexOf(c,d-1);if(u===-1)return null;t.push([u,d])}return t}executeEdits(e,t,i,s){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(i)),o&&(i[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),i,c=>{if(o)for(let u=0,h=o.length;u<h;u++){const[f,g]=o[u],m=c[u],_=m.range.startLineNumber,b=m.range.startColumn-1+f,v=m.range.startColumn-1+g;r.push(new E(_,v+1,_,v+2)),a.push(new E(_,b+1,_,v+2))}const d=s(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,i,s=0){if(this.context.cursorConfig.readOnly)return;const o=NS.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){He(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,i,s,o,!1)&&this.revealAll(t,i,!1,0,!0,0)}getAutoClosedCharacters(){return Hee.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new IS(this._model,this.getSelections())}endComposition(e,t){const i=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(Tf.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,i,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,i){this._executeEdit(()=>{if(i==="keyboard"){const s=t.length;let o=0;for(;o<s;){const r=hz(t,o),a=t.substr(o,r);this._executeEditOperation(Tf.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=r}}else this._executeEditOperation(Tf.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,i)}compositionType(e,t,i,s,o,r){if(t.length===0&&i===0&&s===0){if(o!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Ce(c.lineNumber,c.column+o,c.lineNumber,c.column+o)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(Tf.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,i,s,o))},e,r)}paste(e,t,i,s,o){this._executeEdit(()=>{this._executeEditOperation(Tf.paste(this.context.cursorConfig,this._model,this.getSelections(),t,i,s||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Cb.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,i){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Ko(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}executeCommands(e,t,i){this._executeEdit(()=>{this._executeEditOperation(new Ko(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,i)}}class NS{static from(e,t){return new NS(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,i=this.cursorState.length;t<i;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class Hee{static getAllAutoClosedCharacters(e){let t=[];for(const i of e)t=t.concat(i.getAutoClosedCharactersRanges());return t}constructor(e,t,i){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=i}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);i&&e.push(i)}return e}isValid(e){const t=[];for(let i=0;i<this._autoClosedEnclosingDecorations.length;i++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(E.compareRangesUsingStarts),e.sort(E.compareRangesUsingStarts);for(let i=0;i<e.length;i++)if(i>=t.length||!t[i].strictContainsRange(e[i]))return!1;return!0}}class Ije{static executeCommands(e,t,i){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(s,i);for(let r=0,a=s.trackedRanges.length;r<a;r++)s.model._setTrackedRange(s.trackedRanges[r],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const i=this._getEditOperations(e,t);if(i.operations.length===0)return null;const s=i.operations,o=this._getLoserCursorMap(s);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,d=s.length;c<d;c++)o.hasOwnProperty(s[c].identifier.major.toString())||r.push(s[c]);i.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const u=(f,g)=>f.identifier.minor-g.identifier.minor,h=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(u),h[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:g=>{const m=parseInt(g,10),_=e.model._getTrackedRange(e.trackedRanges[m]);return e.trackedRangesDirection[m]===0?new Ce(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new Ce(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}})):h[f]=e.selectionsBefore[f];return h});a||(a=e.selectionsBefore);const l=[];for(const c in o)o.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,i=e.length;t<i;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let i=[],s=!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a){const l=this._getEditOperationsFromCommand(e,o,a);i=i.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,i){const s=[];let o=0;const r=(u,h,f=!1)=>{E.isEmpty(u)&&h===""||s.push({identifier:{major:t,minor:o++},range:u,text:h,forceMoveMarkers:f,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:r,addTrackedEditOperation:(u,h,f)=>{a=!0,r(u,h,f)},trackSelection:(u,h)=>{const f=Ce.liftSelection(u);let g;if(f.isEmpty())if(typeof h=="boolean")h?g=2:g=3;else{const b=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===b?g=2:g=3}else g=1;const m=e.trackedRanges.length,_=e.model._setTrackedRange(null,f,g);return e.trackedRanges[m]=_,e.trackedRangesDirection[m]=f.getDirection(),m.toString()}};try{i.getEditOperations(e.model,d)}catch(u){return He(u),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((i,s)=>-E.compareRangesUsingEnds(i.range,s.range));const t={};for(let i=1;i<e.length;i++){const s=e[i-1],o=e[i];if(E.getStartPosition(s.range).isBefore(E.getEndPosition(o.range))){let r;s.identifier.major>o.identifier.major?r=s.identifier.major:r=o.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<i&&i--,a--);i>0&&i--}}return t}}class Tje{constructor(e,t,i){this.text=e,this.startSelection=t,this.endSelection=i}}class IS{static _capture(e,t){const i=[];for(const s of t){if(s.startLineNumber!==s.endLineNumber)return null;i.push(new Tje(e.getLineContent(s.startLineNumber),s.startColumn-1,s.endColumn-1))}return i}constructor(e,t){this._original=IS._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const i=IS._capture(e,t);if(!i||this._original.length!==i.length)return null;const s=[];for(let o=0,r=this._original.length;o<r;o++)s.push(IS._deduceOutcome(this._original[o],i[o]));return s}static _deduceOutcome(e,t){const i=Math.min(e.startSelection,t.startSelection,$g(e.text,t.text)),s=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,ZI(e.text,t.text)),o=e.text.substring(i,e.text.length-s),r=t.text.substring(i,t.text.length-s);return new oHe(o,e.startSelection-i,e.endSelection-i,r,t.startSelection-i,t.endSelection-i)}}class Pje{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,i=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,i,s)}}class Mje{constructor(e,t,i,s,o){this.id=e,this.afterLineNumber=t,this.ordinal=i,this.height=s,this.minWidth=o,this.prefixSum=0}}var vg;let Rje=(vg=class{constructor(e,t,i,s){this._instanceId=hce(++vg.INSTANCE_COUNT),this._pendingChanges=new Pje,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=i,this._paddingBottom=s}static findInsertionIndex(e,t,i){let s=0,o=e.length;for(;s<o;){const r=s+o>>>1;t===e[r].afterLineNumber?i<e[r].ordinal?o=r:s=r+1:t<e[r].afterLineNumber?o=r:s=r+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,o,r,a)=>{t=!0,s=s|0,o=o|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new Mje(l,s,o,r,a)),l},changeOneWhitespace:(s,o,r)=>{t=!0,o=o|0,r=r|0,this._pendingChanges.change({id:s,newAfterLineNumber:o,newHeight:r})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,i){if((e.length>0||i.length>0)&&(this._minWidth=-1),e.length+t.length+i.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of i){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of i)s.add(l.id);const o=new Map;for(const l of t)o.set(l.id,l);const r=l=>{const c=[];for(const d of l)if(!s.has(d.id)){if(o.has(d.id)){const u=o.get(d.id);d.afterLineNumber=u.newAfterLineNumber,d.height=u.newHeight}c.push(d)}return c},a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=vg.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let i=0,s=t.length;i<s;i++)if(t[i].id===e)return i;return-1}_changeOneWhitespace(e,t,i){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==i&&(this._arr[s].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const o=this._arr[s];this._removeWhitespace(s),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const o=this._arr[i].afterLineNumber;e<=o&&o<=t?this._arr[i].afterLineNumber=e-1:o>t&&(this._arr[i].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let i=0,s=this._arr.length;i<s;i++){const o=this._arr[i].afterLineNumber;e<=o&&(this._arr[i].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let i=t;i<=e;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let i=0,s=t.length-1;for(;i<=s;){const r=(s-i|0)/2|0,a=i+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;i=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const i=this._findLastWhitespaceBeforeLineNumber(e)+1;return i<this._arr.length?i:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let i;e>1?i=this._lineHeight*(e-1):i=0;const s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return i+s+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const i=this._lineHeight*e,s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return i+s+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,i=this._arr.length;t<i;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,i=this._lineHeight;let s=1,o=t;for(;s<o;){const r=(s+o)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+i)s=r+1;else{if(e>=a)return r;o=r}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(s)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=r+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let u=o,h=u;const f=5e5;let g=0;o>=f&&(g=Math.floor(o/f)*f,g=Math.floor(g/i)*i,h-=g);const m=[],_=e+(t-e)/2;let b=-1;for(let S=s;S<=r;S++){if(b===-1){const x=u,k=u+i;(x<=_&&_<k||x>_)&&(b=S)}for(u+=i,m[S-s]=h,h+=i;d===S;)h+=c,u+=c,a++,a>=l?d=r+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(u>=t){r=S;break}}b===-1&&(b=r);const v=this.getVerticalOffsetForLineNumber(r)|0;let w=s,y=r;return w<y&&o<e&&w++,w<y&&v+i>t&&y--,{bigNumbersDelta:g,startLineNumber:s,endLineNumber:r,relativeVerticalOffset:m,centeredLineNumber:b,completelyVisibleStartLineNumber:w,completelyVisibleEndLineNumber:y,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let i;t>=1?i=this._lineHeight*t:i=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,i+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,i=this.getWhitespacesCount()-1;if(i<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(i),o=this.getHeightForWhitespaceIndex(i);if(e>=s+o)return-1;for(;t<i;){const r=Math.floor((t+i)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;i=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const i=this.getVerticalOffsetForWhitespaceIndex(t);if(i>e)return null;const s=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:r,verticalOffset:i,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const i=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(i<0)return[];const o=[];for(let r=i;r<=s;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},vg.INSTANCE_COUNT=0,vg);const Aje=125;class P0{constructor(e,t,i,s){e=e|0,t=t|0,i=i|0,s=s|0,e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=i,this.contentHeight=s,this.scrollHeight=Math.max(i,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class Oje extends U{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new j),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new P0(0,0,0,0),this._scrollable=this._register(new a1({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const i=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(i||s)&&this._onDidContentSizeChange.fire(new g$(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class Fje extends U{constructor(e,t,i){super(),this._configuration=e;const s=this._configuration.options,o=s.get(146),r=s.get(84);this._linesLayout=new Rje(t,s.get(67),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new Oje(0,i)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new P0(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?Aje:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const i=t.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(e.hasChanged(146)){const i=t.get(146),s=i.contentWidth,o=i.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new P0(s,r.contentWidth,o,this._getContentHeight(s,o,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(104);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,i){const s=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return s.get(106)?o+=Math.max(0,t-s.get(67)-s.get(84).bottom):s.get(104).ignoreHorizontalScrollbarInContentHeight||(o+=this._getHorizontalScrollbarHeight(e,i)),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,i=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new P0(t,e.contentWidth,i,this._getContentHeight(t,i,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new uee(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new uee(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,i=e.get(147),s=e.get(50),o=e.get(146);if(i.isViewportWrapping){const r=e.get(73);return t>o.contentWidth+s.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?t+o.verticalScrollbarWidth:t}else{const r=e.get(105)*s.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+r+o.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new P0(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+e,scrollTop:i.scrollTop+t})}}class Wje{constructor(e,t,i,s,o){this.editorId=e,this.model=t,this.configuration=i,this._linesCollection=s,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let i=this._decorationsCache[t];if(!i){const s=e.range,o=e.options;let r;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new H(s.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new H(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);r=new E(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(s,1);i=new bfe(r,o),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,i=!1){const s=new E(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(s,t,i).inlineDecorations[0]}_getDecorationsInRange(e,t,i){const s=this._linesCollection.getDecorationsInRange(e,this.editorId,VI(this.configuration.options),t,i),o=e.startLineNumber,r=e.endLineNumber,a=[];let l=0;const c=[];for(let d=o;d<=r;d++)c[d-o]=[];for(let d=0,u=s.length;d<u;d++){const h=s[d],f=h.options;if(!_$(this.model,h))continue;const g=this._getOrCreateViewModelDecoration(h),m=g.range;if(a[l++]=g,f.inlineClassName){const _=new CS(m,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),b=Math.max(o,m.startLineNumber),v=Math.min(r,m.endLineNumber);for(let w=b;w<=v;w++)c[w-o].push(_)}if(f.beforeContentClassName&&o<=m.startLineNumber&&m.startLineNumber<=r){const _=new CS(new E(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),f.beforeContentClassName,1);c[m.startLineNumber-o].push(_)}if(f.afterContentClassName&&o<=m.endLineNumber&&m.endLineNumber<=r){const _=new CS(new E(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),f.afterContentClassName,2);c[m.endLineNumber-o].push(_)}}return{decorations:a,inlineDecorations:c}}}function _$(n,e){return!(e.options.hideInCommentTokens&&b$(n,e)||e.options.hideInStringTokens&&v$(n,e))}function b$(n,e){return jfe(n,e.range,t=>t===1)}function v$(n,e){return jfe(n,e.range,t=>t===2)}function jfe(n,e,t){for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const s=n.tokenization.getLineTokens(i),o=i===e.startLineNumber,r=i===e.endLineNumber;let a=o?s.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<s.getCount()&&!(r&&s.getStartOffset(a)>e.endColumn-1);){if(!t(s.getStandardTokenType(a)))return!1;a++}}return!0}function Y4(n,e){return n===null?e?LP.INSTANCE:DP.INSTANCE:new Bje(n,e)}class Bje{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,i){this._assertVisible();const s=i>0?this._projectionData.breakOffsets[i-1]:0,o=this._projectionData.breakOffsets[i];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new Wc(0,0,c+1,this._projectionData.injectionOptions[d],0));r=Wc.applyInjectedText(e.getLineContent(t),a).substring(s,o)}else r=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:o+1});return i>0&&(r=jee(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,i){return this._assertVisible(),this._projectionData.getLineLength(i)}getViewLineMinColumn(e,t,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1}getViewLineMaxColumn(e,t,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1}getViewLineData(e,t,i){const s=new Array;return this.getViewLinesData(e,t,i,1,0,[!0],s),s[0]}getViewLinesData(e,t,i,s,o,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let u=null;if(c){u=[];let f=0,g=0;for(let m=0;m<l.getOutputLineCount();m++){const _=new Array;u[m]=_;const b=m>0?l.breakOffsets[m-1]:0,v=l.breakOffsets[m];for(;g<c.length;){const w=d[g].content.length,y=c[g]+f,S=y+w;if(y>v)break;if(b<S){const x=d[g];if(x.inlineClassName){const k=m>0?l.wrappedTextIndentLength:0,D=k+Math.max(y-b,0),N=k+Math.min(S-b,v-b);D!==N&&_.push(new MWe(D,N,x.inlineClassName,x.inlineClassNameAffectsLetterSpacing))}}if(S<=v)f+=w,g++;else break}}}let h;c?h=e.tokenization.getLineTokens(t).withInserted(c.map((f,g)=>({offset:f,text:d[g].content,tokenMetadata:Xn.defaultTokenMetadata}))):h=e.tokenization.getLineTokens(t);for(let f=i;f<i+s;f++){const g=o+f-i;if(!r[g]){a[g]=null;continue}a[g]=this._getViewLineData(h,u?u[f]:null,f)}}_getViewLineData(e,t,i){this._assertVisible();const s=this._projectionData,o=i>0?s.wrappedTextIndentLength:0,r=i>0?s.breakOffsets[i-1]:0,a=s.breakOffsets[i],l=e.sliceAndInflate(r,a,o);let c=l.getLineContent();i>0&&(c=jee(s.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(i)+1,u=c.length+1,h=i+1<this.getViewLineCount(),f=i===0?0:s.breakOffsetsVisibleColumn[i-1];return new XU(c,h,d,u,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,i=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,i).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const i=this._projectionData.translateToOutputPosition(t-1);return e+i.outputLineIndex}normalizePosition(e,t,i){const s=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,i).toPosition(s)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const k2=class k2{constructor(){}isVisible(){return!0}setVisible(e){return e?this:DP.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,i){return e.getLineContent(t)}getViewLineLength(e,t,i){return e.getLineLength(t)}getViewLineMinColumn(e,t,i){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,i){return e.getLineMaxColumn(t)}getViewLineData(e,t,i){const s=e.tokenization.getLineTokens(t),o=s.getLineContent();return new XU(o,!1,1,o.length+1,0,s.inflate(),null)}getViewLinesData(e,t,i,s,o,r,a){if(!r[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new H(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,i){return t}getInjectedTextAt(e,t){return null}};k2.INSTANCE=new k2;let LP=k2;const L2=class L2{constructor(){}isVisible(){return!1}setVisible(e){return e?LP.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,i){throw new Error("Not supported")}getViewLineLength(e,t,i){throw new Error("Not supported")}getViewLineMinColumn(e,t,i){throw new Error("Not supported")}getViewLineMaxColumn(e,t,i){throw new Error("Not supported")}getViewLineData(e,t,i){throw new Error("Not supported")}getViewLinesData(e,t,i,s,o,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,i){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};L2.INSTANCE=new L2;let DP=L2;const Z4=[""];function jee(n){if(n>=Z4.length)for(let e=1;e<=n;e++)Z4[e]=Hje(e);return Z4[n]}function Hje(n){return new Array(n+1).join(" ")}class jje{constructor(e,t,i,s,o,r,a,l,c,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=o,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new zje(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const i=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),o=i.length,r=this.createLineBreaksComputer(),a=new Dh(Wc.fromDecorations(s));for(let m=0;m<o;m++){const _=a.takeWhile(b=>b.lineNumber===m+1);r.addRequest(i[m],_,t?t[m]:null)}const l=r.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(m=>this.model.getDecorationRange(m)).sort(E.compareRangesUsingStarts);let u=1,h=0,f=-1,g=f+1<d.length?h+1:o+2;for(let m=0;m<o;m++){const _=m+1;_===g&&(f++,u=d[f].startLineNumber,h=d[f].endLineNumber,g=f+1<d.length?h+1:o+2);const b=_>=u&&_<=h,v=Y4(l[m],!b);c[m]=v.getViewLineCount(),this.modelLineProjections[m]=v}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new iTe(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(h=>this.model.validateRange(h)),i=Vje(t),s=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort(E.compareRangesUsingStarts);if(i.length===s.length){let h=!1;for(let f=0;f<i.length;f++)if(!i[f].equalsRange(s[f])){h=!0;break}if(!h)return!1}const o=i.map(h=>({range:h,options:ze.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);const r=i;let a=1,l=0,c=-1,d=c+1<r.length?l+1:this.modelLineProjections.length+2,u=!1;for(let h=0;h<this.modelLineProjections.length;h++){const f=h+1;f===d&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,d=c+1<r.length?l+1:this.modelLineProjections.length+2);let g=!1;if(f>=a&&f<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),g=!0):(u=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),g=!0)),g){const m=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,m)}}return u||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,i,s,o){const r=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===i,c=this.wrappingIndent===s,d=this.wordBreak===o;if(r&&a&&l&&c&&d)return!1;const u=r&&a&&!l&&c&&d;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=i,this.wrappingIndent=s,this.wordBreak=o;let h=null;if(u){h=[];for(let f=0,g=this.modelLineProjections.length;f<g;f++)h[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,i){if(!e||e<=this._validModelVersionId)return null;const s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(t-1,i-t+1),this.projectedModelLineLineCounts.removeValues(t-1,i-t+1),new p8(s,o)}onModelLinesInserted(e,t,i,s){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,u=s.length;d<u;d++){const h=Y4(s[d],!o);l.push(h);const f=h.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new _8(r,r+a-1)}onModelLineChanged(e,t,i){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const s=t-1,o=this.modelLineProjections[s].getViewLineCount(),r=this.modelLineProjections[s].isVisible(),a=Y4(i,r);this.modelLineProjections[s]=a;const l=this.modelLineProjections[s].getViewLineCount();let c=!1,d=0,u=-1,h=0,f=-1,g=0,m=-1;o>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1,g=u+1,m=g+(o-l)-1,c=!0):o<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+o-1,h=u+1,f=h+(l-o)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,u=d+l-1),this.projectedModelLineLineCounts.setValue(s,l);const _=d<=u?new Hfe(d,u-d+1):null,b=h<=f?new _8(h,f):null,v=g<=m?new p8(g,m):null;return[c,_,b,v]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),i=this._toValidViewLineNumber(i);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),a=this.model.guides.getActiveIndentGuide(s.lineNumber,o.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),i=t.index,s=t.remainder;return new Vee(i+1,s)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new H(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],i=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,i);return new H(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const i=this.getViewLineInfo(e),s=this.getViewLineInfo(t),o=new Array;let r=this.getModelStartPositionOfViewLine(i),a=new Array;for(let l=i.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===i.modelLineNumber?i.modelLineWrappedLineIdx:0,u=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let h=d;h<u;h++)a.push(new Vee(l,h))}if(!c.isVisible()&&r){const d=new H(l-1,this.model.getLineMaxColumn(l-1)+1),u=E.fromPositions(r,d);o.push(new zee(u,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new H(l,1))}if(r){const l=E.fromPositions(r,this.getModelEndPositionOfViewLine(s));o.push(new zee(l,a))}return o}getViewLinesBracketGuides(e,t,i,s){const o=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,s);for(const d of a.viewLines){const h=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let g=-1;if(f.column!==-1){const b=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(b.lineNumber===d.modelLineWrappedLineIdx)g=b.column;else if(b.lineNumber<d.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(d);else if(b.lineNumber>d.modelLineWrappedLineIdx)return}const m=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),_=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return _.lineNumber===d.modelLineWrappedLineIdx?new Lp(f.visibleColumn,g,f.className,new hS(f.horizontalLine.top,m.column),-1,-1):_.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new Lp(f.visibleColumn,g,f.className,new hS(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});r.push(h.filter(f=>!!f))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[];const r=[],a=[],l=i.lineNumber-1,c=s.lineNumber-1;let d=null;for(let g=l;g<=c;g++){const m=this.modelLineProjections[g];if(m.isVisible()){const _=m.getViewLineNumberOfModelPosition(0,g===l?i.column:1),b=m.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),v=b-_+1;let w=0;v>1&&m.getViewLineMinColumn(this.model,g+1,b)===1&&(w=_===0?1:2),r.push(v),a.push(w),d===null&&(d=new H(g+1,0))}else d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,g)),d=null)}d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,s.lineNumber)),d=null);const u=t-e+1,h=new Array(u);let f=0;for(let g=0,m=o.length;g<m;g++){let _=o[g];const b=Math.min(u-f,r[g]),v=a[g];let w;v===2?w=0:v===1?w=1:w=b;for(let y=0;y<b;y++)y===w&&(_=0),h[f++]=_}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,i){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const s=this.projectedModelLineLineCounts.getIndexOf(e-1);let o=e;const r=s.index,a=s.remainder,l=[];for(let c=r,d=this.model.getLineCount();c<d;c++){const u=this.modelLineProjections[c];if(!u.isVisible())continue;const h=c===r?a:0;let f=u.getViewLineCount()-h,g=!1;if(o+f>t&&(g=!0,f=t-o+1),u.getViewLinesData(this.model,c+1,h,f,o-e,i,l),o+=f,g)break}return l}validateViewPosition(e,t,i){e=this._toValidViewLineNumber(e);const s=this.projectedModelLineLineCounts.getIndexOf(e-1),o=s.index,r=s.remainder,a=this.modelLineProjections[o],l=a.getViewLineMinColumn(this.model,o+1,r),c=a.getViewLineMaxColumn(this.model,o+1,r);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new H(o+1,d)).equals(i)?new H(e,t):this.convertModelPositionToViewPosition(i.lineNumber,i.column)}validateViewRange(e,t){const i=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new E(i.lineNumber,i.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){const i=this.getViewLineInfo(e),s=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,t);return this.model.validatePosition(new H(i.modelLineNumber,s))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),i=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new E(t.lineNumber,t.column,i.lineNumber,i.column)}convertModelPositionToViewPosition(e,t,i=2,s=!1,o=!1){const r=this.model.validatePosition(new H(e,t)),a=r.lineNumber,l=r.column;let c=a-1,d=!1;if(o)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,d=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,d=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new H(s?0:1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(c);let h;return d?o?h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,1,i):h=this.modelLineProjections[c].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(c+1),i):h=this.modelLineProjections[a-1].getViewPositionOfModelPosition(u,l,i),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return E.fromPositions(i)}else{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new E(i.lineNumber,i.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let i=e-1;if(this.modelLineProjections[i].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(o,t)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;const s=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(i+1))}getDecorationsInRange(e,t,i,s,o){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new E(r.lineNumber,1,a.lineNumber,a.column),t,i,s,o);let l=[];const c=r.lineNumber-1,d=a.lineNumber-1;let u=null;for(let m=c;m<=d;m++)if(this.modelLineProjections[m].isVisible())u===null&&(u=new H(m+1,m===c?r.column:1));else if(u!==null){const b=this.model.getLineMaxColumn(m);l=l.concat(this.model.getDecorationsInRange(new E(u.lineNumber,u.column,m,b),t,i,s)),u=null}u!==null&&(l=l.concat(this.model.getDecorationsInRange(new E(u.lineNumber,u.column,a.lineNumber,a.column),t,i,s)),u=null),l.sort((m,_)=>{const b=E.compareRangesUsingStarts(m.range,_.range);return b===0?m.id<_.id?-1:m.id>_.id?1:0:b});const h=[];let f=0,g=null;for(const m of l){const _=m.id;g!==_&&(g=_,h[f++]=m)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function Vje(n){if(n.length===0)return[];const e=n.slice();e.sort(E.compareRangesUsingStarts);const t=[];let i=e[0].startLineNumber,s=e[0].endLineNumber;for(let o=1,r=e.length;o<r;o++){const a=e[o];a.startLineNumber>s+1?(t.push(new E(i,1,s,1)),i=a.startLineNumber,s=a.endLineNumber):a.endLineNumber>s&&(s=a.endLineNumber)}return t.push(new E(i,1,s,1)),t}class Vee{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class zee{constructor(e,t){this.modelRange=e,this.viewLines=t}}class zje{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,i,s){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,i,s)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class Uje{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new $je(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,i,s){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,i,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,i){return new p8(t,i)}onModelLinesInserted(e,t,i,s){return new _8(t,i)}onModelLineChanged(e,t,i){return[!1,new Hfe(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,i){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,i){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const i=t-e+1,s=new Array(i);for(let o=0;o<i;o++)s[o]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),i=t.getLineContent();return new XU(i,!1,1,i.length+1,0,t.inflate(),null)}getViewLinesData(e,t,i){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);const o=[];for(let r=e;r<=t;r++){const a=r-e;o[a]=i[a]?this.getViewLineData(r):null}return o}getDecorationsInRange(e,t,i,s,o){return this.model.getDecorationsInRange(e,t,i,s,o)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class $je{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const Am=Rl.Right;class qje{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*Am/8))}reset(e){const t=Math.ceil((e+1)*Am/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,i){i&&(this.persist|=1<<e-1);for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const o=Am*s+(e-1);this.lanes[o>>>3]|=1<<o%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(s))}}getLanesAtLine(e){const t=[];let i=Am*e;for(let s=0;s<Am;s++)(this.persist&1<<s||this.lanes[i>>>3]&1<<i%8)&&t.push(s+1),i++;return t.length?t:[Rl.Center]}countAtLine(e){let t=Am*e,i=0;for(let s=0;s<Am;s++)(this.persist&1<<s||this.lanes[t>>>3]&1<<t%8)&&i++,t++;return i}}let Kje=class extends U{constructor(e,t,i,s,o,r,a,l,c,d){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=d,this.hiddenAreasModel=new Yje,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=i,this._eventDispatcher=new bje,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new bv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new $t(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=w$.create(this.model),this.glyphLanes=new qje(0),this.model.isTooLargeForTokenization())this._lines=new Uje(this.model);else{const u=this._configuration.options,h=u.get(50),f=u.get(140),g=u.get(147),m=u.get(139),_=u.get(130);this._lines=new jje(this._editorId,this.model,s,o,h,this.model.getOptions().tabSize,f,g.wrappingColumn,m,_)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Nje(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new Fje(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(u=>{u.scrollTopChanged&&this._handleVisibleLinesChanged(),u.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new fje(u)),this._eventDispatcher.emitOutgoingEvent(new p$(u.oldScrollWidth,u.oldScrollLeft,u.oldScrollHeight,u.oldScrollTop,u.scrollWidth,u.scrollLeft,u.scrollHeight,u.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(u=>{this._eventDispatcher.emitOutgoingEvent(u)})),this._decorations=new Wje(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(u=>{try{const h=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(h,u)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(yP.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new pje)})),this._register(this._themeService.onDidColorThemeChange(u=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new gje(u))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new E(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new uje(e)),this._eventDispatcher.emitOutgoingEvent(new m$(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new aje)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new lje)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new H(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new $ee(t,this._viewportStart.startLineDelta)}return new $ee(null,0)}_onConfigurationChanged(e,t){const i=this._captureStableViewport(),s=this._configuration.options,o=s.get(50),r=s.get(140),a=s.get(147),l=s.get(139),c=s.get(130);this._lines.setWrappingSettings(o,r,a.wrappingColumn,l,c)&&(e.emitViewEvent(new kE),e.emitViewEvent(new LE),e.emitViewEvent(new Rm(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new Rm(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new Rm(null))),e.emitViewEvent(new cje(t)),this.viewLayout.onConfigurationChanged(t),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),bv.shouldRecreate(t)&&(this.cursorConfig=new bv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const i=this._eventDispatcher.beginEmitViewEvents();let s=!1,o=!1;const r=e instanceof Kp?e.rawContentChangedEvent.changes:e.changes,a=e instanceof Kp?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const u of r)switch(u.changeType){case 4:{for(let h=0;h<u.detail.length;h++){const f=u.detail[h];let g=u.injectedTexts[h];g&&(g=g.filter(m=>!m.ownerId||m.ownerId===this._editorId)),l.addRequest(f,g,null)}break}case 2:{let h=null;u.injectedText&&(h=u.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(u.detail,h,null);break}}const c=l.finalize(),d=new Dh(c);for(const u of r)switch(u.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new kE),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),s=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(a,u.fromLineNumber,u.toLineNumber);h!==null&&(i.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),s=!0;break}case 4:{const h=d.takeCount(u.detail.length),f=this._lines.onModelLinesInserted(a,u.fromLineNumber,u.toLineNumber,h);f!==null&&(i.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),s=!0;break}case 2:{const h=d.dequeue(),[f,g,m,_]=this._lines.onModelLineChanged(a,u.lineNumber,h);o=f,g&&i.emitViewEvent(g),m&&(i.emitViewEvent(m),this.viewLayout.onLinesInserted(m.fromLineNumber,m.toLineNumber)),_&&(i.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!s&&o&&(i.emitViewEvent(new LE),i.emitViewEvent(new Rm(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){const s=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),o=this.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber);this.viewLayout.setScrollPosition({scrollTop:o+this._viewportStart.startLineDelta},1)}}try{const i=this._eventDispatcher.beginEmitViewEvents();e instanceof Kp&&i.emitOutgoingEvent(new Lje(e.contentChangedEvent)),this._cursor.onModelContentChanged(i,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let i=0,s=e.ranges.length;i<s;i++){const o=e.ranges[i],r=this.coordinatesConverter.convertModelPositionToViewPosition(new H(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new H(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[i]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new mje(t)),this._eventDispatcher.emitOutgoingEvent(new Eje(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new hje),this.cursorConfig=new bv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new kje(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new bv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new xje(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new kE),t.emitViewEvent(new LE),t.emitViewEvent(new Rm(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new bv(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Dje(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new Rm(e)),this._eventDispatcher.emitOutgoingEvent(new Sje(e))}))}setHiddenAreas(e,t){var r;this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const s=this._captureStableViewport();let o=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(i),o&&(a.emitViewEvent(new kE),a.emitViewEvent(new LE),a.emitViewEvent(new Rm(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(r=s.viewportStartModelPosition)==null?void 0:r.lineNumber;l&&i.some(d=>d.startLineNumber<=l&&l<=d.endLineNumber)||s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new Cje)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),i=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),o=Math.max(1,s.completelyVisibleStartLineNumber-i),r=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new E(o,this.getLineMinColumn(o),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),i=this._lines.getHiddenAreas();if(i.length===0)return[t];const s=[];let o=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,u=i.length;d<u;d++){const h=i[d].startLineNumber,f=i[d].endLineNumber;f<r||h>l||(r<h&&(s[o++]=new E(r,a,h-1,this.model.getLineMaxColumn(h-1))),r=f+1,a=1)}return(r<l||r===l&&a<c)&&(s[o++]=new E(r,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,i=e.completelyVisibleEndLineNumber;return new E(t,this.getLineMinColumn(t),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),i=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new E(i,this.getLineMinColumn(i),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new H(i,this.getLineMinColumn(i))),o=this.viewLayout.getVerticalOffsetForLineNumber(i)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,i){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,i){return this._lines.getActiveIndentGuide(e,t,i)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,i,s){return this._lines.getViewLinesBracketGuides(e,t,i,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Zs(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Dc(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const s=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,s)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const i=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new ga(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,i,s,r.tokens,t,o,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,i){const s=this._lines.getViewLinesData(e,t,i);return new PWe(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,VI(this._configuration.options)),i=new Gje;for(const s of t){const o=s.options,r=o.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);i.accept(l,o.zIndex,c,d,a)}return i.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const i=t.options.overviewRuler;i==null||i.invalidateCachedColor();const s=t.options.minimap;s==null||s.invalidateCachedColor()}}getValueInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(i,t)}getValueLengthInRange(e,t){const i=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(i,t)}modifyPosition(e,t){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e),s=this.model.modifyPosition(i,t);return this.coordinatesConverter.convertModelPositionToViewPosition(s)}deduceModelPositionRelativeToViewPosition(e,t,i){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=i:t+=i);const r=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,i){const s=i?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(E.compareRangesUsingStarts);let o=!1,r=!1;for(const l of e)l.isEmpty()?o=!0:r=!0;if(!r){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+s);return c}if(o&&t){const l=[];let c=0;for(const d of e){const u=d.startLineNumber;d.isEmpty()?u!==c&&l.push(this.model.getLineContent(u)):l.push(this.model.getValueInRange(d,i?2:0)),c=u}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,i?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const i=this.model.getLanguageId();if(i===_o||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const d=s.startLineNumber;s=new E(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const o=this._configuration.options.get(50),r=this._getColorMap(),l=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===po.fontFamily;let c;return l?c=po.fontFamily:(c=o.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${po.fontFamily}`),{mode:i,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${c};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,r)+"</div>"}}_getHTMLToCopy(e,t){const i=e.startLineNumber,s=e.startColumn,o=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=i;c<=o;c++){const d=this.model.tokenization.getLineTokens(c),u=d.getLineContent(),h=c===i?s-1:0,f=c===o?r-1:u.length;u===""?l+="<br>":l+=rRe(u,d.inflate(),t,h,f,a,vs)}return l}_getColorMap(){const e=Hi.getColorMap(),t=["#000000"];if(e)for(let i=1,s=e.length;i<s;i++)t[i]=te.Format.CSS.formatHex(e[i]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,i){return this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,i=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new yje);return}this._withViewEventsCollector(e)}executeEdits(e,t,i){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,i))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(i=>this._cursor.type(i,e,t))}compositionType(e,t,i,s,o){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,i,s,o))}paste(e,t,i,s){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,i,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(i=>this._cursor.executeCommand(i,e,t))}executeCommands(e,t){this._executeCursorEdit(i=>this._cursor.executeCommands(i,e,t))}revealAllCursors(e,t,i=!1){this._withViewEventsCollector(s=>this._cursor.revealAll(s,e,i,0,t,0))}revealPrimaryCursor(e,t,i=!1){this._withViewEventsCollector(s=>this._cursor.revealPrimary(s,e,i,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),i=new E(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new ES(e,!1,i,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),i=new E(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new ES(e,!1,i,null,0,!0,0)))}revealRange(e,t,i,s,o){this._withViewEventsCollector(r=>r.emitViewEvent(new ES(e,!1,i,null,s,t,o)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new _je),this._eventDispatcher.emitOutgoingEvent(new wje))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class w${static create(e){const t=e._setTrackedRange(null,new E(1,1,1,1),1);return new w$(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,i,s,o){this._model=e,this._viewLineNumber=t,this._isValid=i,this._modelTrackedRange=s,this._startLineDelta=o}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const i=e.coordinatesConverter.convertViewPositionToModelPosition(new H(t,e.getLineMinColumn(t))),s=e.model._setTrackedRange(this._modelTrackedRange,new E(i.lineNumber,i.column,i.lineNumber,i.column),1),o=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=s,this._startLineDelta=r-o}invalidate(){this._isValid=!1}}class Gje{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,i,s,o){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===o&&c+1>=i){s>c&&(a[a.length-1]=s);return}a.push(o,i,s)}else{const a=new Ck(e,t,[o,i,s]);this._asMap[e]=a,this.asArray.push(a)}}}class Yje{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const i=this.hiddenAreas.get(e);i&&Uee(i,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,i)=>Zje(t,i),[]);return Uee(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function Zje(n,e){const t=[];let i=0,s=0;for(;i<n.length&&s<e.length;){const o=n[i],r=e[s];if(o.endLineNumber<r.startLineNumber-1)t.push(n[i++]);else if(r.endLineNumber<o.startLineNumber-1)t.push(e[s++]);else{const a=Math.min(o.startLineNumber,r.startLineNumber),l=Math.max(o.endLineNumber,r.endLineNumber);t.push(new E(a,1,l,1)),i++,s++}}for(;i<n.length;)t.push(n[i++]);for(;s<e.length;)t.push(e[s++]);return t}function Uee(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].equalsRange(e[t]))return!1;return!0}class $ee{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const i=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),s=t.getVerticalOffsetForLineNumber(i.lineNumber);t.setScrollPosition({scrollTop:s+this.startLineDelta},1)}}var Qje=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Cu=function(n,e){return function(t,i){e(t,i,n)}},Ym,r_;let Ik=(r_=class extends U{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,i,s,o,r,a,l,c,d,u,h){super(),this.languageConfigurationService=u,this._deliveryQueue=sLe(),this._contributions=this._register(new nje),this._onDidDispose=this._register(new j),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new qee({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new qee({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Fs(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new j),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new j),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),o.willCreateCodeEditor();const f={...t};this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++Xje,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?we.SimpleEditorContext:we.EditorContext),f,d)),this._register(this._configuration.onDidChange(_=>{this._onDidChangeConfiguration.fire(_);const b=this._configuration.options;if(_.hasChanged(146)){const v=b.get(146);this._onDidLayoutChange.fire(v)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=o,this._commandService=r,this._themeService=l,this._register(new e8e(this,this._contextKeyService)),this._register(new t8e(this,this._contextKeyService,h)),this._instantiationService=this._register(s.createChild(new m1([Ae,this._contextKeyService]))),this._modelData=null,this._focusTracker=new i8e(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let g;Array.isArray(i.contributions)?g=i.contributions:g=Up.getEditorContributions(),this._contributions.initialize(this,g,this._instantiationService);for(const _ of Up.getEditorActions()){if(this._actions.has(_.id)){He(new Error(`Cannot have two actions with the same id ${_.id}`));continue}const b=new Wfe(_.id,_.label,_.alias,_.metadata,_.precondition??void 0,v=>this._instantiationService.invokeFunction(w=>Promise.resolve(_.runEditorCommand(w,this,v))),this._contextKeyService);this._actions.set(b.id,b)}const m=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new pEe(this._domElement,{onDragOver:_=>{if(!m())return;const b=this.getTargetAtClientPoint(_.clientX,_.clientY);b!=null&&b.position&&this.showDropIndicatorAt(b.position)},onDrop:async _=>{if(!m()||(this.removeDropIndicator(),!_.dataTransfer))return;const b=this.getTargetAtClientPoint(_.clientX,_.clientY);b!=null&&b.position&&this._onDropIntoEditor.fire({position:b.position,event:_})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)==null||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,i,s){return new Zj(e,t,i,this._domElement,s)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return XL.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Rt.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let i=0;return e&&e.lineEnding&&e.lineEnding===`
`?i=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;try{this._beginUpdate();const i=e;if(this._modelData===null&&i===null||this._modelData&&this._modelData.model===i)return;const s={oldModelUrl:((t=this._modelData)==null?void 0:t.model.uri)||null,newModelUrl:(i==null?void 0:i.uri)||null};this._onWillChangeModel.fire(s);const o=this.hasTextFocus(),r=this._detachModel();this._attachModel(i),o&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(r),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,i,s){const o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,s)}getTopForLineNumber(e,t=!1){return this._modelData?Ym._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Ym._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,i,s=!1){const o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,s)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const i=this._modelData.model.getLineMaxColumn(e);return Ym._getVerticalOffsetAfterPosition(this._modelData,e,i,t)}setHiddenAreas(e,t){var i;(i=this._modelData)==null||i.viewModel.setHiddenAreas(e.map(s=>E.lift(s)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return yn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!H.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,i,s){if(!this._modelData)return;if(!E.isIRange(e))throw new Error("Invalid arguments");const o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",i,r,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,i){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new E(e,1,e,1),t,!1,i)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,i,s){if(!H.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new E(e.lineNumber,e.column,e.lineNumber,e.column),t,i,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const i=Ce.isISelection(e),s=E.isIRange(e);if(!i&&!s)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(s){const o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const i=new Ce(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}revealLines(e,t,i=0){this._revealLines(e,t,0,i)}revealLinesInCenter(e,t,i=0){this._revealLines(e,t,1,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._revealLines(e,t,2,i)}revealLinesNearTop(e,t,i=0){this._revealLines(e,t,5,i)}_revealLines(e,t,i,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new E(e,1,t,1),i,!1,s)}revealRange(e,t=0,i=!1,s=!0){this._revealRange(e,i?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,i,s){if(!E.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(E.lift(e),t,i,s)}setSelections(e,t="api",i=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,o=e.length;s<o;s++)if(!Ce.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:t,viewState:i,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}handleInitialized(){var e;(e=this._getViewModel())==null||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,i){i=i||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const o=i;this._type(e,o.text||"");return}case"replacePreviousChar":{const o=i;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{const o=i;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{const o=i;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null,o.clipboardEvent);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run(i)).then(void 0,He);return}if(!this._modelData||this._triggerEditorCommand(e,t,i))return;this._triggerCommand(t,i)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,i,s,o){this._modelData&&this._modelData.viewModel.compositionType(t,i,s,o,e)}_paste(e,t,i,s,o,r){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,i,s,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:r,range:new E(l.lineNumber,l.column,c.lineNumber,c.column),languageId:o})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,i){const s=Up.getEditorCommand(t);return s?(i=i||{},i.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(s.runEditorCommand(o,this,i)).then(void 0,He)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,i){if(!this._modelData||this._configuration.options.get(92))return!1;let s;return i?Array.isArray(i)?s=()=>i:s=i:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new n8e(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,VI(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,VI(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(i=>i.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),i=this._configuration.options,s=i.get(146),o=Ym._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:o,left:r,height:i.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){as(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const i=e.onBeforeAttached(),s=new Kje(this._id,this._configuration,e,h$.create(Te(this._domElement)),f$.create(this._configuration.options),a=>xr(Te(this._domElement),a),this.languageConfigurationService,this._themeService,i,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(s.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const u=this.getOption(80),h=p("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",u);this._notificationService.prompt(SA.Warning,h,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:p("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let u=0,h=a.selections.length;u<h;u++)l[u]=a.selections[u].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const d={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(d);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[o,r]=this._createView(s);if(r){this._domElement.appendChild(o.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addContentWidget(this._contentWidgets[d])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addOverlayWidget(this._overlayWidgets[d])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addGlyphMarginWidget(this._glyphMarginWidgets[d])}o.render(!1,!0),o.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new Jje(e,s,o,r,t,i)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,r,a,l)=>{this._paste("keyboard",o,r,a,l)},type:o=>{this._type("keyboard",o)},compositionType:(o,r,a,l)=>{this._compositionType("keyboard",o,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,r,a,l)=>{const c={text:o,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:o=>{const r={text:o};this._commandService.executeCommand("type",r)},compositionType:(o,r,a,l)=>{if(a||l){const c={text:o,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:o,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const i=new lO(e.coordinatesConverter);return i.onKeyDown=o=>this._onKeyDown.fire(o),i.onKeyUp=o=>this._onKeyUp.fire(o),i.onContextMenu=o=>this._onContextMenu.fire(o),i.onMouseMove=o=>this._onMouseMove.fire(o),i.onMouseLeave=o=>this._onMouseLeave.fire(o),i.onMouseDown=o=>this._onMouseDown.fire(o),i.onMouseUp=o=>this._onMouseUp.fire(o),i.onMouseDrag=o=>this._onMouseDrag.fire(o),i.onMouseDrop=o=>this._onMouseDrop.fire(o),i.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),i.onMouseWheel=o=>this._onMouseWheel.fire(o),[new d8(t,this._configuration,this._themeService.getColorTheme(),e,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var i;if((i=this._contributionsDisposable)==null||i.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new E(e.lineNumber,e.column,e.lineNumber,e.column),options:Ym.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},Ym=r_,r_.dropIntoEditorDecorationOptions=ze.register({description:"workbench-dnd-target",className:"dnd-target"}),r_);Ik=Ym=Qje([Cu(3,ke),Cu(4,kt),Cu(5,oi),Cu(6,Ae),Cu(7,kn),Cu(8,rn),Cu(9,Nr),Cu(10,Ri),Cu(11,ve)],Ik);let Xje=0;class Jje{constructor(e,t,i,s,o,r){this.model=e,this.viewModel=t,this.view=i,this.hasRealView=s,this.listenersToRemove=o,this.attachedView=r}dispose(){Qt(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class qee extends U{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new j(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new j(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Fs extends j{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class e8e extends U{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=I.editorSimpleInput.bindTo(t),this._editorFocus=I.focus.bindTo(t),this._textInputFocus=I.textInputFocus.bindTo(t),this._editorTextFocus=I.editorTextFocus.bindTo(t),this._tabMovesFocus=I.tabMovesFocus.bindTo(t),this._editorReadonly=I.readOnly.bindTo(t),this._inDiffEditor=I.inDiffEditor.bindTo(t),this._editorColumnSelection=I.columnSelection.bindTo(t),this._hasMultipleSelections=I.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=I.hasNonEmptySelection.bindTo(t),this._canUndo=I.canUndo.bindTo(t),this._canRedo=I.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(ky.onDidChangeTabFocus(i=>this._tabMovesFocus.set(i))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(ky.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class t8e extends U{constructor(e,t,i){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=i,this._langId=I.languageId.bindTo(t),this._hasCompletionItemProvider=I.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=I.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=I.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=I.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=I.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=I.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=I.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=I.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=I.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=I.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=I.hasReferenceProvider.bindTo(t),this._hasRenameProvider=I.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=I.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=I.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=I.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=I.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=I.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=I.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=I.isInEmbeddedEditor.bindTo(t);const s=()=>this._update();this._register(e.onDidChangeModel(s)),this._register(e.onDidChangeModelLanguage(s)),this._register(i.completionProvider.onDidChange(s)),this._register(i.codeActionProvider.onDidChange(s)),this._register(i.codeLensProvider.onDidChange(s)),this._register(i.definitionProvider.onDidChange(s)),this._register(i.declarationProvider.onDidChange(s)),this._register(i.implementationProvider.onDidChange(s)),this._register(i.typeDefinitionProvider.onDidChange(s)),this._register(i.hoverProvider.onDidChange(s)),this._register(i.documentHighlightProvider.onDidChange(s)),this._register(i.documentSymbolProvider.onDidChange(s)),this._register(i.referenceProvider.onDidChange(s)),this._register(i.renameProvider.onDidChange(s)),this._register(i.documentFormattingEditProvider.onDidChange(s)),this._register(i.documentRangeFormattingEditProvider.onDidChange(s)),this._register(i.signatureHelpProvider.onDidChange(s)),this._register(i.inlayHintsProvider.onDidChange(s)),s()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===je.walkThroughSnippet||e.uri.scheme===je.vscodeChatCodeBlock)})}}class i8e extends U{constructor(e,t){super(),this._onChange=this._register(new j),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(Fc(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(Fc(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class n8e{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,i){return this._editor.onDidChangeModelDecorations(s=>{this._isChangingDecorations||e.call(t,s)},i)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const i of this._decorationIds){const s=e.getDecorationRange(i);s&&t.push(s)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(i=>{t=i.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const s8e=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),o8e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function Q4(n){return s8e+encodeURIComponent(n.toString())+o8e}const r8e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),a8e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function l8e(n){return r8e+encodeURIComponent(n.toString())+a8e}tl((n,e)=>{const t=n.getColor(DA);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${Q4(t)}") repeat-x bottom left; }`);const i=n.getColor(Ph);i&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${Q4(i)}") repeat-x bottom left; }`);const s=n.getColor(Qd);s&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${Q4(s)}") repeat-x bottom left; }`);const o=n.getColor(JTe);o&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${l8e(o)}") no-repeat bottom left; }`);const r=n.getColor(OOe);r&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${r.rgba.a}; }`)});class Vc{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new Vc(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,i=0;const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);i=e.getScrollTop()-o}return new Vc(e.getScrollTop(),e.getContentHeight(),t,i,e.getPosition())}constructor(e,t,i,s,o){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=i,this._visiblePositionScrollDelta=s,this._cursorPosition=o}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const i=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+i,1)}}function c8e(n,e,t,i){if(n.length===0)return e;if(e.length===0)return n;const s=[];let o=0,r=0;for(;o<n.length&&r<e.length;){const a=n[o],l=e[r],c=t(a),d=t(l);c<d?(s.push(a),o++):c>d?(s.push(l),r++):(s.push(i(a,l)),o++,r++)}for(;o<n.length;)s.push(n[o]),o++;for(;r<e.length;)s.push(e[r]),r++;return s}function EP(n,e){const t=new Q,i=n.createDecorationsCollection();return t.add(UL({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const o=e.read(s);i.set(o)})),t.add({dispose:()=>{i.clear()}}),t}function gw(n,e){return n.appendChild(e),xe(()=>{e.remove()})}function d8e(n,e){return n.prepend(e),xe(()=>{e.remove()})}class Vfe extends U{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new Cfe(e,t)),this._width=it(this,this.elementSizeObserver.getWidth()),this._height=it(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(i=>Ti(s=>{this._width.set(this.elementSizeObserver.getWidth(),s),this._height.set(this.elementSizeObserver.getHeight(),s)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function Kee(n,e,t){let i=e.get(),s=i,o=i;const r=it("animatedValue",i);let a=-1;const l=300;let c;t.add($L({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(u,h)=>(u.didChange(e)&&(h.animate=h.animate||u.change),!0)},(u,h)=>{c!==void 0&&(n.cancelAnimationFrame(c),c=void 0),s=o,i=e.read(u),a=Date.now()-(h.animate?0:l),d()}));function d(){const u=Date.now()-a;o=Math.floor(u8e(u,s,i-s,l)),u<l?c=n.requestAnimationFrame(d):o=i,r.set(o,void 0)}return r}function u8e(n,e,t,i){return n===i?e+t:t*(-Math.pow(2,-10*n/i)+1)+e}class C$ extends U{constructor(e,t,i){super(),this._register(new b8(e,i)),this._register(Rh(i,{height:t.actualHeight,top:t.actualTop}))}}class mw{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=it(this,void 0),this._actualHeight=it(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=i=>{this._actualTop.set(i,void 0)},this.onComputedHeight=i=>{this._actualHeight.set(i,void 0)}}}const D2=class D2{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${D2._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};D2._counter=0;let b8=D2;function Rh(n,e){return Be(t=>{for(let[i,s]of Object.entries(e))s&&typeof s=="object"&&"read"in s&&(s=s.read(t)),typeof s=="number"&&(s=`${s}px`),i=i.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),n.style[i]=s})}function NP(n,e,t,i){const s=new Q,o=[];return s.add(zo((r,a)=>{const l=e.read(r),c=new Map,d=new Map;t&&t(!0),n.changeViewZones(u=>{for(const h of o)u.removeZone(h),i==null||i.delete(h);o.length=0;for(const h of l){const f=u.addZone(h);h.setZoneId&&h.setZoneId(f),o.push(f),i==null||i.add(f),c.set(h,f)}}),t&&t(!1),a.add($L({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(u,h){const f=d.get(u.changedObservable);return f!==void 0&&h.zoneIds.push(f),!0}},(u,h)=>{for(const f of l)f.onChange&&(d.set(f.onChange,c.get(f)),f.onChange.read(u));t&&t(!0),n.changeViewZones(f=>{for(const g of h.zoneIds)f.layoutZone(g)}),t&&t(!1)}))})),s.add({dispose(){t&&t(!0),n.changeViewZones(r=>{for(const a of o)r.removeZone(a)}),i==null||i.clear(),t&&t(!1)}}),s}class h8e extends Pi{dispose(){super.dispose(!0)}}function Gee(n,e){const t=$x(e,s=>s.original.startLineNumber<=n.lineNumber);if(!t)return E.fromPositions(n);if(t.original.endLineNumberExclusive<=n.lineNumber){const s=n.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return E.fromPositions(new H(s,n.column))}if(!t.innerChanges)return E.fromPositions(new H(t.modified.startLineNumber,1));const i=$x(t.innerChanges,s=>s.originalRange.getStartPosition().isBeforeOrEqual(n));if(!i){const s=n.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return E.fromPositions(new H(s,n.column))}if(i.originalRange.containsPosition(n))return i.modifiedRange;{const s=f8e(i.originalRange.getEndPosition(),n);return E.fromPositions(s.addToPosition(i.modifiedRange.getEndPosition()))}}function f8e(n,e){return n.lineNumber===e.lineNumber?new Al(0,e.column-n.column):new Al(e.lineNumber-n.lineNumber,e.column-1)}function g8e(n,e){let t;return n.filter(i=>{const s=e(i,t);return t=i,s})}class IP{static create(e,t=void 0){return new Yee(e,e,t)}static createWithDisposable(e,t,i=void 0){const s=new Q;return s.add(t),s.add(e),new Yee(e,s,i)}}class Yee extends IP{constructor(e,t,i){super(),this.object=e,this._disposable=t,this._debugOwner=i,this._refCount=1,this._isDisposed=!1,this._owners=[],i&&this._addOwner(i)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new m8e(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class m8e extends IP{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var y$=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},S$=function(n,e){return function(t,i){e(t,i,n)}};const p8e=mi("diff-review-insert",ae.add,p("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),_8e=mi("diff-review-remove",ae.remove,p("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),b8e=mi("diff-review-close",ae.close,p("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var AC;let Ep=(AC=class extends U{constructor(e,t,i,s,o,r,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=i,this._canClose=s,this._width=o,this._height=r,this._diffs=a,this._models=l,this._instantiationService=c,this._state=_m(this,(d,u)=>{const h=this._visible.read(d);if(this._parentNode.style.visibility=h?"visible":"hidden",!h)return null;const f=u.add(this._instantiationService.createInstance(v8,this._diffs,this._models,this._setVisible,this._canClose)),g=u.add(this._instantiationService.createInstance(w8,this._parentNode,f,this._width,this._height,this._models));return{model:f,view:g}}).recomputeInitiallyAndOnChange(this._store)}next(){Ti(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){Ti(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){Ti(e=>{this._setVisible(!1,e)})}},AC._ttPolicy=Vh("diffReview",{createHTML:e=>e}),AC);Ep=y$([S$(8,ke)],Ep);let v8=class extends U{constructor(e,t,i,s,o){super(),this._diffs=e,this._models=t,this._setVisible=i,this.canClose=s,this._accessibilitySignalService=o,this._groups=it(this,[]),this._currentGroupIdx=it(this,0),this._currentElementIdx=it(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((r,a)=>this._groups.read(a)[r]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((r,a)=>{var l;return(l=this.currentGroup.read(a))==null?void 0:l.lines[r]}),this._register(Be(r=>{const a=this._diffs.read(r);if(!a){this._groups.set([],void 0);return}const l=v8e(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());Ti(c=>{const d=this._models.getModifiedPosition();if(d){const u=l.findIndex(h=>(d==null?void 0:d.lineNumber)<h.range.modified.endLineNumberExclusive);u!==-1&&this._currentGroupIdx.set(u,c)}this._groups.set(l,c)})})),this._register(Be(r=>{const a=this.currentElement.read(r);(a==null?void 0:a.type)===ao.Deleted?this._accessibilitySignalService.playSignal(Kr.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===ao.Added&&this._accessibilitySignalService.playSignal(Kr.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(Be(r=>{const a=this.currentElement.read(r);if(a&&a.type!==ao.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(E.fromPositions(new H(l,1)))}}))}_goToGroupDelta(e,t){const i=this.groups.get();!i||i.length<=1||_b(t,s=>{this._currentGroupIdx.set(st.ofLength(i.length).clipCyclic(this._currentGroupIdx.get()+e),s),this._currentElementIdx.set(0,s)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||Ti(i=>{this._currentElementIdx.set(st.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),i)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const i=t.lines.indexOf(e);i!==-1&&Ti(s=>{this._currentElementIdx.set(i,s)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===ao.Deleted?this._models.originalReveal(E.fromPositions(new H(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==ao.Header?E.fromPositions(new H(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};v8=y$([S$(4,vm)],v8);const o0=3;function v8e(n,e,t){const i=[];for(const s of GV(n,(o,r)=>r.modified.startLineNumber-o.modified.endLineNumberExclusive<2*o0)){const o=[];o.push(new C8e);const r=new $e(Math.max(1,s[0].original.startLineNumber-o0),Math.min(s[s.length-1].original.endLineNumberExclusive+o0,e+1)),a=new $e(Math.max(1,s[0].modified.startLineNumber-o0),Math.min(s[s.length-1].modified.endLineNumberExclusive+o0,t+1));kle(s,(d,u)=>{const h=new $e(d?d.original.endLineNumberExclusive:r.startLineNumber,u?u.original.startLineNumber:r.endLineNumberExclusive),f=new $e(d?d.modified.endLineNumberExclusive:a.startLineNumber,u?u.modified.startLineNumber:a.endLineNumberExclusive);h.forEach(g=>{o.push(new x8e(g,f.startLineNumber+(g-h.startLineNumber)))}),u&&(u.original.forEach(g=>{o.push(new y8e(u,g))}),u.modified.forEach(g=>{o.push(new S8e(u,g))}))});const l=s[0].modified.join(s[s.length-1].modified),c=s[0].original.join(s[s.length-1].original);i.push(new w8e(new qs(l,c),o))}return i}var ao;(function(n){n[n.Header=0]="Header",n[n.Unchanged=1]="Unchanged",n[n.Deleted=2]="Deleted",n[n.Added=3]="Added"})(ao||(ao={}));class w8e{constructor(e,t){this.range=e,this.lines=t}}class C8e{constructor(){this.type=ao.Header}}class y8e{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=ao.Deleted,this.modifiedLineNumber=void 0}}class S8e{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=ao.Added,this.originalLineNumber=void 0}}class x8e{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=ao.Unchanged}}let w8=class extends U{constructor(e,t,i,s,o,r){super(),this._element=e,this._model=t,this._width=i,this._height=s,this._models=o,this._languageService=r,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new ca(a)),this._register(Be(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new br("diffreview.close",p("label.close","Close"),"close-diff-review "+Re.asClassName(b8e),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new WL(this._content,{})),rs(this.domNode,this._scrollbar.getDomNode(),a),this._register(Be(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(xe(()=>{rs(this.domNode)})),this._register(Rh(this.domNode,{width:this._width,height:this._height})),this._register(Rh(this._content,{width:this._width,height:this._height})),this._register(zo((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(Fi(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),i=this._models.getModifiedOptions(),s=document.createElement("div");s.className="diff-review-table",s.setAttribute("role","list"),s.setAttribute("aria-label",p("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),as(s,i.get(50)),rs(this._content,s);const o=this._models.getOriginalModel(),r=this._models.getModifiedModel();if(!o||!r)return;const a=o.getOptions(),l=r.getOptions(),c=i.get(67),d=this._model.currentGroup.get();for(const u of(d==null?void 0:d.lines)||[]){if(!d)break;let h;if(u.type===ao.Header){const g=document.createElement("div");g.className="diff-review-row",g.setAttribute("role","listitem");const m=d.range,_=this._model.currentGroupIndex.get(),b=this._model.groups.get().length,v=x=>x===0?p("no_lines_changed","no lines changed"):x===1?p("one_line_changed","1 line changed"):p("more_lines_changed","{0} lines changed",x),w=v(m.original.length),y=v(m.modified.length);g.setAttribute("aria-label",p({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",_+1,b,m.original.startLineNumber,w,m.modified.startLineNumber,y));const S=document.createElement("div");S.className="diff-review-cell diff-review-summary",S.appendChild(document.createTextNode(`${_+1}/${b}: @@ -${m.original.startLineNumber},${m.original.length} +${m.modified.startLineNumber},${m.modified.length} @@`)),g.appendChild(S),h=g}else h=this._createRow(u,c,this._width.get(),t,o,a,i,r,l);s.appendChild(h);const f=ye(g=>this._model.currentElement.read(g)===u);e.add(Be(g=>{const m=f.read(g);h.tabIndex=m?0:-1,m&&h.focus()})),e.add(G(h,"focus",()=>{this._model.goToLine(u)}))}this._scrollbar.scanDomNode()}_createRow(e,t,i,s,o,r,a,l,c){const d=s.get(146),u=d.glyphMarginWidth+d.lineNumbersWidth,h=a.get(146),f=10+h.glyphMarginWidth+h.lineNumbersWidth;let g="diff-review-row",m="";const _="diff-review-spacer";let b=null;switch(e.type){case ao.Added:g="diff-review-row line-insert",m=" char-insert",b=p8e;break;case ao.Deleted:g="diff-review-row line-delete",m=" char-delete",b=_8e;break}const v=document.createElement("div");v.style.minWidth=i+"px",v.className=g,v.setAttribute("role","listitem"),v.ariaLevel="";const w=document.createElement("div");w.className="diff-review-cell",w.style.height=`${t}px`,v.appendChild(w);const y=document.createElement("span");y.style.width=u+"px",y.style.minWidth=u+"px",y.className="diff-review-line-number"+m,e.originalLineNumber!==void 0?y.appendChild(document.createTextNode(String(e.originalLineNumber))):y.innerText="",w.appendChild(y);const S=document.createElement("span");S.style.width=f+"px",S.style.minWidth=f+"px",S.style.paddingRight="10px",S.className="diff-review-line-number"+m,e.modifiedLineNumber!==void 0?S.appendChild(document.createTextNode(String(e.modifiedLineNumber))):S.innerText="",w.appendChild(S);const x=document.createElement("span");if(x.className=_,b){const N=document.createElement("span");N.className=Re.asClassName(b),N.innerText="",x.appendChild(N)}else x.innerText="";w.appendChild(x);let k;if(e.modifiedLineNumber!==void 0){let N=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Ep._ttPolicy&&(N=Ep._ttPolicy.createHTML(N)),w.insertAdjacentHTML("beforeend",N),k=l.getLineContent(e.modifiedLineNumber)}else{let N=this._getLineHtml(o,s,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Ep._ttPolicy&&(N=Ep._ttPolicy.createHTML(N)),w.insertAdjacentHTML("beforeend",N),k=o.getLineContent(e.originalLineNumber)}k.length===0&&(k=p("blankLine","blank"));let D="";switch(e.type){case ao.Unchanged:e.originalLineNumber===e.modifiedLineNumber?D=p({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",k,e.originalLineNumber):D=p("equalLine","{0} original line {1} modified line {2}",k,e.originalLineNumber,e.modifiedLineNumber);break;case ao.Added:D=p("insertLine","+ {0} modified line {1}",k,e.modifiedLineNumber);break;case ao.Deleted:D=p("deleteLine","- {0} original line {1}",k,e.originalLineNumber);break}return v.setAttribute("aria-label",D),v}_getLineHtml(e,t,i,s,o){const r=e.getLineContent(s),a=t.get(50),l=Xn.createEmpty(r,o),c=ga.isBasicASCII(r,e.mightContainNonBasicASCII()),d=ga.containsRTL(r,c,e.mightContainRTL());return iO(new wm(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,r,!1,c,d,0,l,[],i,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==Vg.OFF,null)).html}};w8=y$([S$(5,Di)],w8);class k8e{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}T("diffEditor.move.border","#8b8b8b9c",p("diffEditor.move.border","The border color for text that got moved in the diff editor."));T("diffEditor.moveActive.border","#FFA500",p("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));T("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},p("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const L8e=mi("diff-insert",ae.add,p("diffInsertIcon","Line decoration for inserts in the diff editor.")),zfe=mi("diff-remove",ae.remove,p("diffRemoveIcon","Line decoration for removals in the diff editor.")),TP=ze.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+Re.asClassName(L8e),marginClassName:"gutter-insert"}),Tk=ze.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+Re.asClassName(zfe),marginClassName:"gutter-delete"}),Zee=ze.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),Qee=ze.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),PP=ze.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),x$=ze.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),k$=ze.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),Dy=ze.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),L$=ze.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),D$=ze.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var Ufe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},C8=function(n,e){return function(t,i){e(t,i,n)}},Zm;const tD=dt("diffProviderFactoryService");let y8=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(S8,e)}};y8=Ufe([C8(0,ke)],y8);mt(tD,y8,1);var a_;let S8=(a_=class{constructor(e,t,i){this.editorWorkerService=t,this.telemetryService=i,this.onDidChangeEventEmitter=new j,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)==null||e.dispose()}async computeDiff(e,t,i,s){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,i,s);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new la(new $e(1,2),new $e(1,t.getLineCount()+1),[new qr(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const o=JSON.stringify([e.uri.toString(),t.uri.toString()]),r=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(i)]),a=Zm.diffCache.get(o);if(a&&a.context===r)return a.result;const l=Qn.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,i,this.diffAlgorithm),d=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:d,timedOut:(c==null?void 0:c.quitEarly)??!0,detectedMoves:i.computeMoves?(c==null?void 0:c.moves.length)??0:-1}),s.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return Zm.diffCache.size>10&&Zm.diffCache.delete(Zm.diffCache.keys().next().value),Zm.diffCache.set(o,{result:c,context:r}),c}setOptions(e){var i;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((i=this.diffAlgorithmOnDidChangeSubscription)==null||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},Zm=a_,a_.diffCache=new Map,a_);S8=Zm=Ufe([C8(1,Jo),C8(2,Ps)],S8);function cO(){return uW&&!!uW.VSCODE_DEV}function $fe(n){if(cO()){const e=D8e();return e.add(n),{dispose(){e.delete(n)}}}else return{dispose(){}}}function D8e(){DE||(DE=new Set);const n=globalThis;return n.$hotReload_applyNewExports||(n.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},i=[];for(const s of DE){const o=s(t);o&&i.push(o)}if(i.length>0)return s=>{let o=!1;for(const r of i)r(s)&&(o=!0);return o}}),DE}let DE;cO()&&$fe(({oldExports:n,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return i=>{var s,o;for(const r in i){const a=i[r];if(console.log(`[hot-reload] Patching prototype methods of '${r}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=n[r];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const d=Object.getOwnPropertyDescriptor(a.prototype,c),u=Object.getOwnPropertyDescriptor(l.prototype,c);((s=d==null?void 0:d.value)==null?void 0:s.toString())!==((o=u==null?void 0:u.value)==null?void 0:o.toString())&&console.log(`[hot-reload] Patching prototype method '${r}.${c}'`),Object.defineProperty(l.prototype,c,d)}i[r]=l}}}return!0}});function dr(n,e){return E8e([n],e),n}function E8e(n,e){cO()&&ms("reload",i=>$fe(({oldExports:s})=>{if([...Object.values(s)].some(o=>n.includes(o)))return o=>(i(void 0),!0)})).read(e)}var N8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},I8e=function(n,e){return function(t,i){e(t,i,n)}};let x8=class extends U{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,i){super(),this.model=e,this._options=t,this._diffProviderFactoryService=i,this._isDiffUpToDate=it(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=it(this,void 0),this.diff=this._diff,this._unchangedRegions=it(this,void 0),this.unchangedRegions=ye(this,a=>{var l;return this._options.hideUnchangedRegions.read(a)?((l=this._unchangedRegions.read(a))==null?void 0:l.regions)??[]:(Ti(c=>{var d;for(const u of((d=this._unchangedRegions.get())==null?void 0:d.regions)||[])u.collapseAll(c)}),[])}),this.movedTextToCompare=it(this,void 0),this._activeMovedText=it(this,void 0),this._hoveredMovedText=it(this,void 0),this.activeMovedText=ye(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new Pi,this._diffProvider=ye(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=ms("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(xe(()=>this._cancellationTokenSource.cancel()));const s=d1("contentChangedSignal"),o=this._register(new $t(()=>s.trigger(void 0),200));this._register(Be(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(g=>g.isDragged.read(a)))return;const c=l.originalDecorationIds.map(g=>e.original.getDecorationRange(g)).map(g=>g?$e.fromRangeInclusive(g):void 0),d=l.modifiedDecorationIds.map(g=>e.modified.getDecorationRange(g)).map(g=>g?$e.fromRangeInclusive(g):void 0),u=l.regions.map((g,m)=>!c[m]||!d[m]?void 0:new Jf(c[m].startLineNumber,d[m].startLineNumber,c[m].length,g.visibleLineCountTop.read(a),g.visibleLineCountBottom.read(a))).filter(zd),h=[];let f=!1;for(const g of GV(u,(m,_)=>m.getHiddenModifiedRange(a).endLineNumberExclusive===_.getHiddenModifiedRange(a).startLineNumber))if(g.length>1){f=!0;const m=g.reduce((b,v)=>b+v.lineCount,0),_=new Jf(g[0].originalLineNumber,g[0].modifiedLineNumber,m,g[0].visibleLineCountTop.get(),g[g.length-1].visibleLineCountBottom.get());h.push(_)}else h.push(g[0]);if(f){const g=e.original.deltaDecorations(l.originalDecorationIds,h.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),m=e.modified.deltaDecorations(l.modifiedDecorationIds,h.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));Ti(_=>{this._unchangedRegions.set({regions:h,originalDecorationIds:g,modifiedDecorationIds:m},_)})}}));const r=(a,l,c)=>{const d=Jf.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let u;const h=this._unchangedRegions.get();if(h){const _=h.originalDecorationIds.map(y=>e.original.getDecorationRange(y)).map(y=>y?$e.fromRangeInclusive(y):void 0),b=h.modifiedDecorationIds.map(y=>e.modified.getDecorationRange(y)).map(y=>y?$e.fromRangeInclusive(y):void 0);let w=g8e(h.regions.map((y,S)=>{if(!_[S]||!b[S])return;const x=_[S].length;return new Jf(_[S].startLineNumber,b[S].startLineNumber,x,Math.min(y.visibleLineCountTop.get(),x),Math.min(y.visibleLineCountBottom.get(),x-y.visibleLineCountTop.get()))}).filter(zd),(y,S)=>!S||y.modifiedLineNumber>=S.modifiedLineNumber+S.lineCount&&y.originalLineNumber>=S.originalLineNumber+S.lineCount).map(y=>new qs(y.getHiddenOriginalRange(c),y.getHiddenModifiedRange(c)));w=qs.clip(w,$e.ofLength(1,e.original.getLineCount()),$e.ofLength(1,e.modified.getLineCount())),u=qs.inverse(w,e.original.getLineCount(),e.modified.getLineCount())}const f=[];if(u)for(const _ of d){const b=u.filter(v=>v.original.intersectsStrict(_.originalUnchangedRange)&&v.modified.intersectsStrict(_.modifiedUnchangedRange));f.push(..._.setVisibleRanges(b,l))}else f.push(...d);const g=e.original.deltaDecorations((h==null?void 0:h.originalDecorationIds)||[],f.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),m=e.modified.deltaDecorations((h==null?void 0:h.modifiedDecorationIds)||[],f.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:f,originalDecorationIds:g,modifiedDecorationIds:m},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=ih.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=ih.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register(zo(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),o.cancel(),s.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),dr(mde,a),dr(WB,a),this._isDiffUpToDate.set(!1,void 0);let d=[];l.add(e.original.onDidChangeContent(f=>{const g=ih.fromModelContentChanges(f.changes);d=UT(d,g)}));let u=[];l.add(e.modified.onDidChangeContent(f=>{const g=ih.fromModelContentChanges(f.changes);u=UT(u,g)}));let h=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(h=T8e(h,e.original,e.modified),h=(e.original,e.modified,void 0)??h,h=(e.original,e.modified,void 0)??h,Ti(f=>{r(h,f),this._lastDiff=h;const g=E$.fromDiffResult(h);this._diff.set(g,f),this._isDiffUpToDate.set(!0,f);const m=this.movedTextToCompare.get();this.movedTextToCompare.set(m?this._lastDiff.moves.find(_=>_.lineRangeMapping.modified.intersect(m.lineRangeMapping.modified)):void 0,f)}))}))}ensureModifiedLineIsVisible(e,t,i){var o,r;if(((o=this.diff.get())==null?void 0:o.mappings.length)===0)return;const s=((r=this._unchangedRegions.get())==null?void 0:r.regions)||[];for(const a of s)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,i);return}}ensureOriginalLineIsVisible(e,t,i){var o,r;if(((o=this.diff.get())==null?void 0:o.mappings.length)===0)return;const s=((r=this._unchangedRegions.get())==null?void 0:r.regions)||[];for(const a of s)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,i);return}}async waitForDiff(){await Mue(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e==null?void 0:e.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var s;const t=(s=e.collapsedRegions)==null?void 0:s.map(o=>$e.deserialize(o.range)),i=this._unchangedRegions.get();!i||!t||Ti(o=>{for(const r of i.regions)for(const a of t)if(r.modifiedUnchangedRange.intersect(a)){r.setHiddenModifiedRange(a,o);break}})}};x8=N8e([I8e(2,tD)],x8);function T8e(n,e,t){return{changes:n.changes.map(i=>new la(i.original,i.modified,i.innerChanges?i.innerChanges.map(s=>P8e(s,e,t)):void 0)),moves:n.moves,identical:n.identical,quitEarly:n.quitEarly}}function P8e(n,e,t){let i=n.originalRange,s=n.modifiedRange;return i.startColumn===1&&s.startColumn===1&&(i.endColumn!==1||s.endColumn!==1)&&i.endColumn===e.getLineMaxColumn(i.endLineNumber)&&s.endColumn===t.getLineMaxColumn(s.endLineNumber)&&i.endLineNumber<e.getLineCount()&&s.endLineNumber<t.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),s=s.setEndPosition(s.endLineNumber+1,1)),new qr(i,s)}class E${static fromDiffResult(e){return new E$(e.changes.map(t=>new qfe(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,i,s){this.mappings=e,this.movedTexts=t,this.identical=i,this.quitEarly=s}}class qfe{constructor(e){this.lineRangeMapping=e}}class Jf{static fromDiffs(e,t,i,s,o){const r=la.inverse(e,t,i),a=[];for(const l of r){let c=l.original.startLineNumber,d=l.modified.startLineNumber,u=l.original.length;const h=c===1&&d===1,f=c+u===t+1&&d+u===i+1;(h||f)&&u>=o+s?(h&&!f&&(u-=o),f&&!h&&(c+=o,d+=o,u-=o),a.push(new Jf(c,d,u,0,0))):u>=o*2+s&&(c+=o,d+=o,u-=o*2,a.push(new Jf(c,d,u,0,0)))}return a}get originalUnchangedRange(){return $e.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return $e.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,i,s,o){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=i,this._visibleLineCountTop=it(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=it(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=ye(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=it(this,void 0);const r=Math.max(Math.min(s,this.lineCount),0),a=Math.max(Math.min(o,this.lineCount-s),0);hQ(s===r),hQ(o===a),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const i=[],s=new Aa(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let o=this.originalLineNumber,r=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(s.ranges.length===0)this.showAll(t),i.push(this);else{let l=0;for(const c of s.ranges){const d=l===s.ranges.length-1;l++;const u=(d?a:c.endLineNumberExclusive)-r,h=new Jf(o,r,u,0,0);h.setHiddenModifiedRange(c,t),i.push(h),o=h.originalUnchangedRange.endLineNumberExclusive,r=h.modifiedUnchangedRange.endLineNumberExclusive}}return i}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return $e.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return $e.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const i=e.startLineNumber-this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(i,s,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,i),t)}showMoreBelow(e=10,t){const i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,i),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,i){const s=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),o=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&s<o||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+s,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+o,i)}showOriginalLine(e,t,i){const s=e-this.originalLineNumber,o=this.originalLineNumber+this.lineCount-e;t===0&&s<o||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+o-s,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+s-o,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,i){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,i),this._visibleLineCountBottom.set(t,i)}}class M8e extends U{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,i,s,o,r,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=i,this._diff=s,this._editor=o,this._viewLineCounts=r,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=Re.asClassName(ae.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const d=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${d}px`,this._diffActions.style.lineHeight=`${d}px`,this._marginDomNode.appendChild(this._diffActions);let u=0;const h=i.getOption(128)&&!Ac,f=(g,m)=>{this._contextMenuService.showContextMenu({domForShadowRoot:h?i.getDomNode()??void 0:void 0,getAnchor:()=>({x:g,y:m}),getActions:()=>{const _=[],b=s.modified.isEmpty;return _.push(new br("diff.clipboard.copyDeletedContent",b?s.original.length>1?p("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):p("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.original.length>1?p("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):p("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const w=this._originalTextModel.getValueInRange(s.original.toExclusiveRange());await this._clipboardService.writeText(w)})),s.original.length>1&&_.push(new br("diff.clipboard.copyDeletedLineContent",b?p("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.original.startLineNumber+u):p("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.original.startLineNumber+u),void 0,!0,async()=>{let w=this._originalTextModel.getLineContent(s.original.startLineNumber+u);w===""&&(w=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(w)})),i.getOption(92)||_.push(new br("diff.inline.revertChange",p("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),_},autoSelectFirstItem:!0})};this._register(Fi(this._diffActions,"mousedown",g=>{if(!g.leftButton)return;const{top:m,height:_}=Qi(this._diffActions),b=Math.floor(d/3);g.preventDefault(),f(g.posx,m+_+b)})),this._register(i.onMouseMove(g=>{(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()?(u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),this.visibility=!0):this.visibility=!1})),this._register(i.onMouseDown(g=>{g.event.leftButton&&(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()&&(g.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),f(g.event.posx,g.event.posy+d))}))}_updateLightBulbPosition(e,t,i){const{top:s}=Qi(e),o=t-s,r=Math.floor(o/i),a=r*i;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],r<l)return c}return r}}const Xee=Vh("diffEditorWidget",{createHTML:n=>n});function R8e(n,e,t,i){as(i,e.fontInfo);const s=t.length>0,o=new n1(1e4);let r=0,a=0;const l=[];for(let h=0;h<n.lineTokens.length;h++){const f=h+1,g=n.lineTokens[h],m=n.lineBreakData[h],_=ho.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(m){let b=0;for(const v of m.breakOffsets){const w=g.sliceAndInflate(b,v,0);r=Math.max(r,Jee(a,w,ho.extractWrapped(_,b,v),s,n.mightContainNonBasicASCII,n.mightContainRTL,e,o)),a++,b=v}l.push(m.breakOffsets.length)}else l.push(1),r=Math.max(r,Jee(a,g,_,s,n.mightContainNonBasicASCII,n.mightContainRTL,e,o)),a++}r+=e.scrollBeyondLastColumn;const c=o.build(),d=Xee?Xee.createHTML(c):c;i.innerHTML=d;const u=r*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:u,viewLineCounts:l}}class A8e{constructor(e,t,i,s){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=i,this.mightContainRTL=s}}class N${static fromEditor(e){var o;const t=e.getOptions(),i=t.get(50),s=t.get(146);return new N$(((o=e.getModel())==null?void 0:o.getOptions().tabSize)||0,i,t.get(33),i.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),s.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,i,s,o,r,a,l,c,d,u){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=s,this.scrollBeyondLastColumn=o,this.lineHeight=r,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=d,this.fontLigatures=u}}function Jee(n,e,t,i,s,o,r,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(n*r.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=ga.isBasicASCII(l,s),d=ga.containsRTL(l,c,o),u=JL(new wm(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,d,0,e,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==Vg.OFF,null),a);return a.appendString("</div>"),u.characterMapping.getHorizontalOffset(u.characterMapping.length)}var O8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ete=function(n,e){return function(t,i){e(t,i,n)}};let k8=class extends U{constructor(e,t,i,s,o,r,a,l,c,d){super(),this._targetWindow=e,this._editors=t,this._diffModel=i,this._options=s,this._diffEditorWidget=o,this._canIgnoreViewZoneUpdateEvent=r,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=d,this._originalTopPadding=it(this,0),this._originalScrollOffset=it(this,0),this._originalScrollOffsetAnimated=Kee(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=it(this,0),this._modifiedScrollOffset=it(this,0),this._modifiedScrollOffsetAnimated=Kee(this._targetWindow,this._modifiedScrollOffset,this._store);const u=it("invalidateAlignmentsState",0),h=this._register(new $t(()=>{u.set(u.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(w=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(w=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(w=>{(w.hasChanged(147)||w.hasChanged(67))&&h.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(w=>{(w.hasChanged(147)||w.hasChanged(67))&&h.schedule()}));const f=this._diffModel.map(w=>w?Ht(this,w.model.original.onDidChangeTokens,()=>w.model.original.tokenization.backgroundTokenizationState===2):void 0).map((w,y)=>w==null?void 0:w.read(y)),g=ye(w=>{const y=this._diffModel.read(w),S=y==null?void 0:y.diff.read(w);if(!y||!S)return null;u.read(w);const k=this._options.renderSideBySide.read(w);return tte(this._editors.original,this._editors.modified,S.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,k)}),m=ye(w=>{var x;const y=(x=this._diffModel.read(w))==null?void 0:x.movedTextToCompare.read(w);if(!y)return null;u.read(w);const S=y.changes.map(k=>new qfe(k));return tte(this._editors.original,this._editors.modified,S,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function _(){const w=document.createElement("div");return w.className="diagonal-fill",w}const b=this._register(new Q);this.viewZones=_m(this,(w,y)=>{var J,ge,be,Qe;b.clear();const S=g.read(w)||[],x=[],k=[],D=this._modifiedTopPadding.read(w);D>0&&k.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:D,showInHiddenAreas:!0,suppressMouseDown:!0});const N=this._originalTopPadding.read(w);N>0&&x.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:N,showInHiddenAreas:!0,suppressMouseDown:!0});const R=this._options.renderSideBySide.read(w),O=R||(J=this._editors.modified._getViewModel())==null?void 0:J.createLineBreaksComputer();if(O){const Me=this._editors.original.getModel();for(const Ze of S)if(Ze.diff)for(let at=Ze.originalRange.startLineNumber;at<Ze.originalRange.endLineNumberExclusive;at++){if(at>Me.getLineCount())return{orig:x,mod:k};O==null||O.addRequest(Me.getLineContent(at),null,null)}}const B=(O==null?void 0:O.finalize())??[];let z=0;const F=this._editors.modified.getOption(67),K=(ge=this._diffModel.read(w))==null?void 0:ge.movedTextToCompare.read(w),Z=((be=this._editors.original.getModel())==null?void 0:be.mightContainNonBasicASCII())??!1,re=((Qe=this._editors.original.getModel())==null?void 0:Qe.mightContainRTL())??!1,q=N$.fromEditor(this._editors.modified);for(const Me of S)if(Me.diff&&!R&&(!this._options.useTrueInlineDiffRendering.read(w)||!I$(Me.diff))){if(!Me.originalRange.isEmpty){f.read(w);const at=document.createElement("div");at.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const Et=this._editors.original.getModel();if(Me.originalRange.endLineNumberExclusive-1>Et.getLineCount())return{orig:x,mod:k};const Ve=new A8e(Me.originalRange.mapToLineArray(ut=>Et.tokenization.getLineTokens(ut)),Me.originalRange.mapToLineArray(ut=>B[z++]),Z,re),Tt=[];for(const ut of Me.diff.innerChanges||[])Tt.push(new CS(ut.originalRange.delta(-(Me.diff.original.startLineNumber-1)),Dy.className,0));const Ei=R8e(Ve,q,Tt,at),Wt=document.createElement("div");if(Wt.className="inline-deleted-margin-view-zone",as(Wt,q.fontInfo),this._options.renderIndicators.read(w))for(let ut=0;ut<Ei.heightInLines;ut++){const qi=document.createElement("div");qi.className=`delete-sign ${Re.asClassName(zfe)}`,qi.setAttribute("style",`position:absolute;top:${ut*F}px;width:${q.lineDecorationsWidth}px;height:${F}px;right:0;`),Wt.appendChild(qi)}let qt;b.add(new M8e(()=>zf(qt),Wt,this._editors.modified,Me.diff,this._diffEditorWidget,Ei.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let ut=0;ut<Ei.viewLineCounts.length;ut++){const qi=Ei.viewLineCounts[ut];qi>1&&x.push({afterLineNumber:Me.originalRange.startLineNumber+ut,domNode:_(),heightInPx:(qi-1)*F,showInHiddenAreas:!0,suppressMouseDown:!0})}k.push({afterLineNumber:Me.modifiedRange.startLineNumber-1,domNode:at,heightInPx:Ei.heightInLines*F,minWidthInPx:Ei.minWidthInPx,marginDomNode:Wt,setZoneId(ut){qt=ut},showInHiddenAreas:!0,suppressMouseDown:!0})}const Ze=document.createElement("div");Ze.className="gutter-delete",x.push({afterLineNumber:Me.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:Me.modifiedHeightInPx,marginDomNode:Ze,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const Ze=Me.modifiedHeightInPx-Me.originalHeightInPx;if(Ze>0){if(K!=null&&K.lineRangeMapping.original.delta(-1).deltaLength(2).contains(Me.originalRange.endLineNumberExclusive-1))continue;x.push({afterLineNumber:Me.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:Ze,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let at=function(){const Ve=document.createElement("div");return Ve.className="arrow-revert-change "+Re.asClassName(ae.arrowRight),y.add(G(Ve,"mousedown",Tt=>Tt.stopPropagation())),y.add(G(Ve,"click",Tt=>{Tt.stopPropagation(),o.revert(Me.diff)})),ce("div",{},Ve)};if(K!=null&&K.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(Me.modifiedRange.endLineNumberExclusive-1))continue;let Et;Me.diff&&Me.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(w)&&(Et=at()),k.push({afterLineNumber:Me.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-Ze,marginDomNode:Et,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const Me of m.read(w)??[]){if(!(K!=null&&K.lineRangeMapping.original.intersect(Me.originalRange))||!(K!=null&&K.lineRangeMapping.modified.intersect(Me.modifiedRange)))continue;const Ze=Me.modifiedHeightInPx-Me.originalHeightInPx;Ze>0?x.push({afterLineNumber:Me.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:Ze,showInHiddenAreas:!0,suppressMouseDown:!0}):k.push({afterLineNumber:Me.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-Ze,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:x,mod:k}});let v=!1;this._register(this._editors.original.onDidScrollChange(w=>{w.scrollLeftChanged&&!v&&(v=!0,this._editors.modified.setScrollLeft(w.scrollLeft),v=!1)})),this._register(this._editors.modified.onDidScrollChange(w=>{w.scrollLeftChanged&&!v&&(v=!0,this._editors.original.setScrollLeft(w.scrollLeft),v=!1)})),this._originalScrollTop=Ht(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Ht(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(Be(w=>{const y=this._originalScrollTop.read(w)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(w))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(w));y!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(y,1)})),this._register(Be(w=>{const y=this._modifiedScrollTop.read(w)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(w))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(w));y!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(y,1)})),this._register(Be(w=>{var x;const y=(x=this._diffModel.read(w))==null?void 0:x.movedTextToCompare.read(w);let S=0;if(y){const k=this._editors.original.getTopForLineNumber(y.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();S=this._editors.modified.getTopForLineNumber(y.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-k}S>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(S,void 0)):S<0?(this._modifiedTopPadding.set(-S,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-S,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+S,void 0,!0)}))}};k8=O8e([ete(8,qh),ete(9,Er)],k8);function tte(n,e,t,i,s,o){const r=new Dh(ite(n,i)),a=new Dh(ite(e,s)),l=n.getOption(67),c=e.getOption(67),d=[];let u=0,h=0;function f(g,m){for(;;){let _=r.peek(),b=a.peek();if(_&&_.lineNumber>=g&&(_=void 0),b&&b.lineNumber>=m&&(b=void 0),!_&&!b)break;const v=_?_.lineNumber-u:Number.MAX_VALUE,w=b?b.lineNumber-h:Number.MAX_VALUE;v<w?(r.dequeue(),b={lineNumber:_.lineNumber-u+h,heightInPx:0}):v>w?(a.dequeue(),_={lineNumber:b.lineNumber-h+u,heightInPx:0}):(r.dequeue(),a.dequeue()),d.push({originalRange:$e.ofLength(_.lineNumber,1),modifiedRange:$e.ofLength(b.lineNumber,1),originalHeightInPx:l+_.heightInPx,modifiedHeightInPx:c+b.heightInPx,diff:void 0})}}for(const g of t){let w=function(y,S,x=!1){var O,B;if(y<v||S<b)return;if(_)_=!1;else if(!x&&(y===v||S===b))return;const k=new $e(v,y),D=new $e(b,S);if(k.isEmpty&&D.isEmpty)return;const N=((O=r.takeWhile(z=>z.lineNumber<y))==null?void 0:O.reduce((z,F)=>z+F.heightInPx,0))??0,R=((B=a.takeWhile(z=>z.lineNumber<S))==null?void 0:B.reduce((z,F)=>z+F.heightInPx,0))??0;d.push({originalRange:k,modifiedRange:D,originalHeightInPx:k.length*l+N,modifiedHeightInPx:D.length*c+R,diff:g.lineRangeMapping}),v=y,b=S};const m=g.lineRangeMapping;f(m.original.startLineNumber,m.modified.startLineNumber);let _=!0,b=m.modified.startLineNumber,v=m.original.startLineNumber;if(o)for(const y of m.innerChanges||[]){y.originalRange.startColumn>1&&y.modifiedRange.startColumn>1&&w(y.originalRange.startLineNumber,y.modifiedRange.startLineNumber);const S=n.getModel(),x=y.originalRange.endLineNumber<=S.getLineCount()?S.getLineMaxColumn(y.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;y.originalRange.endColumn<x&&w(y.originalRange.endLineNumber,y.modifiedRange.endLineNumber)}w(m.original.endLineNumberExclusive,m.modified.endLineNumberExclusive,!0),u=m.original.endLineNumberExclusive,h=m.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),d}function ite(n,e){const t=[],i=[],s=n.getOption(147).wrappingColumn!==-1,o=n._getViewModel().coordinatesConverter,r=n.getOption(67);if(s)for(let l=1;l<=n.getModel().getLineCount();l++){const c=o.getModelLineViewLineCount(l);c>1&&i.push({lineNumber:l,heightInPx:r*(c-1)})}for(const l of n.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:o.convertViewPositionToModelPosition(new H(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return c8e(t,i,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function I$(n){return n.innerChanges?n.innerChanges.every(e=>nte(e.modifiedRange)&&nte(e.originalRange)||e.originalRange.equalsRange(new E(1,1,1,1))):!1}function nte(n){return n.startLineNumber===n.endLineNumber}const ex=class ex extends U{constructor(e,t,i,s,o){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=i,this._modifiedEditorLayoutInfo=s,this._editors=o,this._originalScrollTop=Ht(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Ht(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=ms("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=it(this,0),this._modifiedViewZonesChangedSignal=ms("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=ms("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=_m(this,(d,u)=>{var k;this._element.replaceChildren();const h=this._diffModel.read(d),f=(k=h==null?void 0:h.diff.read(d))==null?void 0:k.movedTexts;if(!f||f.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(d);const g=this._originalEditorLayoutInfo.read(d),m=this._modifiedEditorLayoutInfo.read(d);if(!g||!m){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(d),this._originalViewZonesChangedSignal.read(d);const _=f.map(D=>{function N(q,J){const ge=J.getTopForLineNumber(q.startLineNumber,!0),be=J.getTopForLineNumber(q.endLineNumberExclusive,!0);return(ge+be)/2}const R=N(D.lineRangeMapping.original,this._editors.original),O=this._originalScrollTop.read(d),B=N(D.lineRangeMapping.modified,this._editors.modified),z=this._modifiedScrollTop.read(d),F=R-O,K=B-z,Z=Math.min(R,B),re=Math.max(R,B);return{range:new st(Z,re),from:F,to:K,fromWithoutScroll:R,toWithoutScroll:B,move:D}});_.sort(Axe(mo(D=>D.fromWithoutScroll>D.toWithoutScroll,Oxe),mo(D=>D.fromWithoutScroll>D.toWithoutScroll?D.fromWithoutScroll:-D.toWithoutScroll,Dl)));const b=T$.compute(_.map(D=>D.range)),v=10,w=g.verticalScrollbarWidth,y=(b.getTrackCount()-1)*10+v*2,S=w+y+(m.contentLeft-ex.movedCodeBlockPadding);let x=0;for(const D of _){const N=b.getTrack(x),R=w+v+N*10,O=15,B=15,z=S,F=m.glyphMarginWidth+m.lineNumbersWidth,K=18,Z=document.createElementNS("http://www.w3.org/2000/svg","rect");Z.classList.add("arrow-rectangle"),Z.setAttribute("x",`${z-F}`),Z.setAttribute("y",`${D.to-K/2}`),Z.setAttribute("width",`${F}`),Z.setAttribute("height",`${K}`),this._element.appendChild(Z);const re=document.createElementNS("http://www.w3.org/2000/svg","g"),q=document.createElementNS("http://www.w3.org/2000/svg","path");q.setAttribute("d",`M 0 ${D.from} L ${R} ${D.from} L ${R} ${D.to} L ${z-B} ${D.to}`),q.setAttribute("fill","none"),re.appendChild(q);const J=document.createElementNS("http://www.w3.org/2000/svg","polygon");J.classList.add("arrow"),u.add(Be(ge=>{q.classList.toggle("currentMove",D.move===h.activeMovedText.read(ge)),J.classList.toggle("currentMove",D.move===h.activeMovedText.read(ge))})),J.setAttribute("points",`${z-B},${D.to-O/2} ${z},${D.to} ${z-B},${D.to+O/2}`),re.appendChild(J),this._element.appendChild(re),x++}this.width.set(y,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(xe(()=>this._element.remove())),this._register(Be(d=>{const u=this._originalEditorLayoutInfo.read(d),h=this._modifiedEditorLayoutInfo.read(d);!u||!h||(this._element.style.left=`${u.width-u.verticalScrollbarWidth}px`,this._element.style.height=`${u.height}px`,this._element.style.width=`${u.verticalScrollbarWidth+u.contentLeft-ex.movedCodeBlockPadding+this.width.read(d)}px`)})),this._register(u1(this._state));const r=ye(d=>{const u=this._diffModel.read(d),h=u==null?void 0:u.diff.read(d);return h?h.movedTexts.map(f=>({move:f,original:new mw(Wa(f.lineRangeMapping.original.startLineNumber-1),18),modified:new mw(Wa(f.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(NP(this._editors.original,r.map(d=>d.map(u=>u.original)))),this._register(NP(this._editors.modified,r.map(d=>d.map(u=>u.modified)))),this._register(zo((d,u)=>{const h=r.read(d);for(const f of h)u.add(new ste(this._editors.original,f.original,f.move,"original",this._diffModel.get())),u.add(new ste(this._editors.modified,f.modified,f.move,"modified",this._diffModel.get()))}));const a=ms("original.onDidFocusEditorWidget",d=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0))),l=ms("modified.onDidFocusEditorWidget",d=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0)));let c="modified";this._register($L({createEmptyChangeSummary:()=>{},handleChange:(d,u)=>(d.didChange(a)&&(c="original"),d.didChange(l)&&(c="modified"),!0)},d=>{a.read(d),l.read(d);const u=this._diffModel.read(d);if(!u)return;const h=u.diff.read(d);let f;if(h&&c==="original"){const g=this._editors.originalCursor.read(d);g&&(f=h.movedTexts.find(m=>m.lineRangeMapping.original.contains(g.lineNumber)))}if(h&&c==="modified"){const g=this._editors.modifiedCursor.read(d);g&&(f=h.movedTexts.find(m=>m.lineRangeMapping.modified.contains(g.lineNumber)))}f!==u.movedTextToCompare.get()&&u.movedTextToCompare.set(void 0,void 0),u.setActiveMovedText(f)}))}};ex.movedCodeBlockPadding=4;let _C=ex;class T${static compute(e){const t=[],i=[];for(const s of e){let o=t.findIndex(r=>!r.intersectsStrict(s));o===-1&&(t.length>=6?o=vIe(t,mo(a=>a.intersectWithRangeLength(s),Dl)):(o=t.length,t.push(new Tz))),t[o].addRange(s),i.push(o)}return new T$(t.length,i)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class ste extends C${constructor(e,t,i,s,o){const r=rt("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=i,this._kind=s,this._diffModel=o,this._nodes=rt("div.diff-moved-code-block",{style:{marginRight:"4px"}},[rt("div.text-content@textContent"),rt("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const a=Ht(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(Rh(this._nodes.root,{paddingRight:a.map(h=>h.verticalScrollbarWidth)}));let l;i.changes.length>0?l=this._kind==="original"?p("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):p("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?p("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):p("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new ca(this._nodes.actionBar,{highlightToggledItems:!0})),d=new br("",l,"",!1);c.push(d,{icon:!1,label:!0});const u=new br("","Compare",Re.asClassName(ae.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===i?void 0:this._move,void 0)});this._register(Be(h=>{const f=this._diffModel.movedTextToCompare.read(h)===i;u.checked=f})),c.push(u,{icon:!1,label:!0})}}class F8e extends U{constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._decorations=ye(this,o=>{const r=this._diffModel.read(o),a=r==null?void 0:r.diff.read(o);if(!a)return null;const l=this._diffModel.read(o).movedTextToCompare.read(o),c=this._options.renderIndicators.read(o),d=this._options.showEmptyDecorations.read(o),u=[],h=[];if(!l)for(const g of a.mappings)if(g.lineRangeMapping.original.isEmpty||u.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:c?Tk:Qee}),g.lineRangeMapping.modified.isEmpty||h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:c?TP:Zee}),g.lineRangeMapping.modified.isEmpty||g.lineRangeMapping.original.isEmpty)g.lineRangeMapping.original.isEmpty||u.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:L$}),g.lineRangeMapping.modified.isEmpty||h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:x$});else{const m=this._options.useTrueInlineDiffRendering.read(o)&&I$(g.lineRangeMapping);for(const _ of g.lineRangeMapping.innerChanges||[])if(g.lineRangeMapping.original.contains(_.originalRange.startLineNumber)&&u.push({range:_.originalRange,options:_.originalRange.isEmpty()&&d?D$:Dy}),g.lineRangeMapping.modified.contains(_.modifiedRange.startLineNumber)&&h.push({range:_.modifiedRange,options:_.modifiedRange.isEmpty()&&d&&!m?k$:PP}),m){const b=r.model.original.getValueInRange(_.originalRange);h.push({range:_.modifiedRange,options:{description:"deleted-text",before:{content:b,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const g of l.changes){const m=g.original.toInclusiveRange();m&&u.push({range:m,options:c?Tk:Qee});const _=g.modified.toInclusiveRange();_&&h.push({range:_,options:c?TP:Zee});for(const b of g.innerChanges||[])u.push({range:b.originalRange,options:Dy}),h.push({range:b.modifiedRange,options:PP})}const f=this._diffModel.read(o).activeMovedText.read(o);for(const g of a.movedTexts)u.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(g===f?" currentMove":""),blockPadding:[_C.movedCodeBlockPadding,0,_C.movedCodeBlockPadding,_C.movedCodeBlockPadding]}}),h.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(g===f?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:u,modifiedDecorations:h}}),this._register(EP(this._editors.original,this._decorations.map(o=>(o==null?void 0:o.originalDecorations)||[]))),this._register(EP(this._editors.modified,this._decorations.map(o=>(o==null?void 0:o.modifiedDecorations)||[])))}}class W8e{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=zL(this,i=>{const s=this._sashRatio.read(i)??this._options.splitViewDefaultRatio.read(i);return this._computeSashLeft(s,i)},(i,s)=>{const o=this.dimensions.width.get();this._sashRatio.set(i/o,s)}),this._sashRatio=it(this,void 0)}_computeSashLeft(e,t){const i=this.dimensions.width.read(t),s=Math.floor(this._options.splitViewDefaultRatio.read(t)*i),o=this._options.enableSplitViewResizing.read(t)?Math.floor(e*i):s,r=100;return i<=r*2?s:o<r?r:o>i-r?i-r:o}}class Kfe extends U{constructor(e,t,i,s,o,r){super(),this._domNode=e,this._dimensions=t,this._enabled=i,this._boundarySashes=s,this.sashLeft=o,this._resetSash=r,this._sash=this._register(new xs(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(Be(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(Be(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class B8e extends U{constructor(e,t,i){super(),this._editor=e,this._domNode=t,this.itemProvider=i,this.scrollTop=Ht(this,this._editor.onDidScrollChange,r=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(r=>r===0),this.modelAttached=Ht(this,this._editor.onDidChangeModel,r=>this._editor.hasModel()),this.editorOnDidChangeViewZones=ms("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=ms("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=d1("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const s=this._domNode.appendChild(rt("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),o=new ResizeObserver(()=>{Ti(r=>{this.domNodeSizeChanged.trigger(r)})});o.observe(this._domNode),this._register(xe(()=>o.disconnect())),this._register(Be(r=>{s.className=this.isScrollTopZero.read(r)?"":"scroll-decoration"})),this._register(Be(r=>this.render(r)))}dispose(){super.dispose(),rs(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),i=this._editor.getVisibleRanges(),s=new Set(this.views.keys()),o=st.ofStartAndLength(0,this._domNode.clientHeight);if(!o.isEmpty)for(const r of i){const a=new $e(r.startLineNumber,r.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);Ti(c=>{for(const d of l){if(!d.range.intersect(a))continue;s.delete(d.id);let u=this.views.get(d.id);if(u)u.item.set(d,c);else{const m=document.createElement("div");this._domNode.appendChild(m);const _=it("item",d),b=this.itemProvider.createView(_,m);u=new H8e(_,b,m),this.views.set(d.id,u)}const h=d.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(d.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(d.range.startLineNumber-1,!1)-t,g=(d.range.endLineNumberExclusive===1?Math.max(h,this._editor.getTopForLineNumber(d.range.startLineNumber,!1)-t):Math.max(h,this._editor.getBottomForLineNumber(d.range.endLineNumberExclusive-1,!0)-t))-h;u.domNode.style.top=`${h}px`,u.domNode.style.height=`${g}px`,u.gutterItemView.layout(st.ofStartAndLength(h,g),o)}})}for(const r of s){const a=this.views.get(r);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(r)}}}class H8e{constructor(e,t,i){this.item=e,this.gutterItemView=t,this.domNode=i}}class Gfe extends ub{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}class ote extends hde{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new Al(e-1,t)}}class j8e extends U{constructor(e,t,i={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new rLe),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new Q),i.hoverDelegate=i.hoverDelegate??this._register(vy()),this.options=i,this.toggleMenuAction=this._register(new Pk(()=>{var s;return(s=this.toggleMenuActionViewItem)==null?void 0:s.show()},i.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new ca(this.element,{orientation:i.orientation,ariaLabel:i.ariaLabel,actionRunner:i.actionRunner,allowContextMenu:i.allowContextMenu,highlightToggledItems:i.highlightToggledItems,hoverDelegate:i.hoverDelegate,actionViewItemProvider:(s,o)=>{if(s.id===Pk.ID)return this.toggleMenuActionViewItem=new RT(s,s.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Re.asClassNameArray(i.moreIcon??ae.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(i.actionViewItemProvider){const r=i.actionViewItemProvider(s,o);if(r)return r}if(s instanceof ry){const r=new RT(s,s.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:s.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return r.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(r),this.disposables.add(this._onDidChangeDropdownVisibility.add(r.onDidChangeVisibility)),r}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const i=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),i.push(this.toggleMenuAction)),i.forEach(s=>{this.actionBar.push(s,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(s)})})}getKeybindingLabel(e){var i,s;const t=(s=(i=this.options).getKeyBinding)==null?void 0:s.call(i,e);return(t==null?void 0:t.getLabel())??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const E2=class E2 extends br{constructor(e,t){t=t||p("moreActions","More Actions..."),super(E2.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};E2.ID="toolbar.toggle.more";let Pk=E2;var Yfe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},vl=function(n,e){return function(t,i){e(t,i,n)}};let Mk=class extends j8e{constructor(e,t,i,s,o,r,a,l){super(e,o,{getKeyBinding:d=>r.lookupKeybinding(d.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"}),this._options=t,this._menuService=i,this._contextKeyService=s,this._contextMenuService=o,this._keybindingService=r,this._commandService=a,this._sessionDisposables=this._store.add(new Q);const c=t==null?void 0:t.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(d=>l.publicLog2("workbenchActionExecuted",{id:d.action.id,from:c})))}setActions(e,t=[],i){var d,u,h;this._sessionDisposables.clear();const s=e.slice(),o=t.slice(),r=[];let a=0;const l=[];let c=!1;if(((d=this._options)==null?void 0:d.hiddenItemStrategy)!==-1)for(let f=0;f<s.length;f++){const g=s[f];!(g instanceof vr)&&!(g instanceof Jw)||g.hideActions&&(r.push(g.hideActions.toggle),g.hideActions.toggle.checked&&a++,g.hideActions.isHidden&&(c=!0,s[f]=void 0,((u=this._options)==null?void 0:u.hiddenItemStrategy)!==0&&(l[f]=g)))}if(((h=this._options)==null?void 0:h.overflowBehavior)!==void 0){const f=iFe(new Set(this._options.overflowBehavior.exempted),_t.map(s,_=>_==null?void 0:_.id)),g=this._options.overflowBehavior.maxItems-f.size;let m=0;for(let _=0;_<s.length;_++){const b=s[_];b&&(m++,!f.has(b.id)&&m>=g&&(s[_]=void 0,l[_]=b))}}AZ(s),AZ(l),super.setActions(s,Wn.join(l,o)),(r.length>0||s.length>0)&&this._sessionDisposables.add(G(this.getElement(),"contextmenu",f=>{var v,w,y,S,x;const g=new Sl(Te(this.getElement()),f),m=this.getItemAction(g.target);if(!m)return;g.preventDefault(),g.stopPropagation();const _=[];if(m instanceof vr&&m.menuKeybinding)_.push(m.menuKeybinding);else if(!(m instanceof Jw||m instanceof Pk)){const k=!!this._keybindingService.lookupKeybinding(m.id);_.push(hfe(this._commandService,this._keybindingService,m.id,void 0,k))}if(r.length>0){let k=!1;if(a===1&&((v=this._options)==null?void 0:v.hiddenItemStrategy)===0){k=!0;for(let D=0;D<r.length;D++)if(r[D].checked){r[D]=zp({id:m.id,label:m.label,checked:!0,enabled:!1,run(){}});break}}if(!k&&(m instanceof vr||m instanceof Jw)){if(!m.hideActions)return;_.push(m.hideActions.hide)}else _.push(zp({id:"label",label:p("hide","Hide"),enabled:!1,run(){}}))}const b=Wn.join(_,r);(w=this._options)!=null&&w.resetMenu&&!i&&(i=[this._options.resetMenu]),c&&i&&(b.push(new Wn),b.push(zp({id:"resetThisMenu",label:p("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),b.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>g,getActions:()=>b,menuId:(y=this._options)==null?void 0:y.contextMenu,menuActionOptions:{renderShortTitle:!0,...(S=this._options)==null?void 0:S.menuOptions},skipTelemetry:typeof((x=this._options)==null?void 0:x.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};Mk=Yfe([vl(2,pa),vl(3,Ae),vl(4,Er),vl(5,Ft),vl(6,oi),vl(7,Ps)],Mk);let MP=class extends Mk{constructor(e,t,i,s,o,r,a,l,c){super(e,{resetMenu:t,...i},s,o,r,a,l,c),this._onDidChangeMenuItems=this._store.add(new j),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const d=this._store.add(s.createMenu(t,o,{emitEventsForSubmenuChanges:!0})),u=()=>{var g,m,_;const h=[],f=[];$A(d,i==null?void 0:i.menuOptions,{primary:h,secondary:f},(g=i==null?void 0:i.toolbarOptions)==null?void 0:g.primaryGroup,(m=i==null?void 0:i.toolbarOptions)==null?void 0:m.shouldInlineSubmenu,(_=i==null?void 0:i.toolbarOptions)==null?void 0:_.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",h.length===0&&f.length===0),super.setActions(h,f)};this._store.add(d.onDidChange(()=>{u(),this._onDidChangeMenuItems.fire(this)})),u()}setActions(){throw new Dt("This toolbar is populated from a menu.")}};MP=Yfe([vl(3,pa),vl(4,Ae),vl(5,Er),vl(6,Ft),vl(7,oi),vl(8,Ps)],MP);var Zfe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$N=function(n,e){return function(t,i){e(t,i,n)}};const X4=[],EE=35;let L8=class extends U{constructor(e,t,i,s,o,r,a,l,c){super(),this._diffModel=t,this._editors=i,this._options=s,this._sashLayout=o,this._boundarySashes=r,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(we.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=Ht(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(d=>d.length>0),this._showSash=ye(this,d=>this._options.renderSideBySide.read(d)&&this._hasActions.read(d)),this.width=ye(this,d=>this._hasActions.read(d)?EE:0),this.elements=rt("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:EE+"px"}},[]),this._currentDiff=ye(this,d=>{var g;const u=this._diffModel.read(d);if(!u)return;const h=(g=u.diff.read(d))==null?void 0:g.mappings,f=this._editors.modifiedCursor.read(d);if(f)return h==null?void 0:h.find(m=>m.lineRangeMapping.modified.contains(f.lineNumber))}),this._selectedDiffs=ye(this,d=>{const u=this._diffModel.read(d),h=u==null?void 0:u.diff.read(d);if(!h)return X4;const f=this._editors.modifiedSelections.read(d);if(f.every(b=>b.isEmpty()))return X4;const g=new Aa(f.map(b=>$e.fromRangeInclusive(b))),_=h.mappings.filter(b=>b.lineRangeMapping.innerChanges&&g.intersects(b.lineRangeMapping.modified)).map(b=>({mapping:b,rangeMappings:b.lineRangeMapping.innerChanges.filter(v=>f.some(w=>E.areIntersecting(v.modifiedRange,w)))}));return _.length===0||_.every(b=>b.rangeMappings.length===0)?X4:_}),this._register(d8e(e,this.elements.root)),this._register(G(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(Rh(this.elements.root,{display:this._hasActions.map(d=>d?"block":"none")})),Us(this,d=>this._showSash.read(d)?new Kfe(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,zL(this,h=>this._sashLayout.sashLeft.read(h)-EE,(h,f)=>this._sashLayout.sashLeft.set(h+EE,f)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new B8e(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(d,u)=>{const h=this._diffModel.read(u);if(!h)return[];const f=h.diff.read(u);if(!f)return[];const g=this._selectedDiffs.read(u);if(g.length>0){const _=la.fromRangeMappings(g.flatMap(b=>b.rangeMappings));return[new rte(_,!0,we.DiffEditorSelectionToolbar,void 0,h.model.original.uri,h.model.modified.uri)]}const m=this._currentDiff.read(u);return f.mappings.map(_=>new rte(_.lineRangeMapping.withInnerChangesFromLineRanges(),_.lineRangeMapping===(m==null?void 0:m.lineRangeMapping),we.DiffEditorHunkToolbar,void 0,h.model.original.uri,h.model.modified.uri))},createView:(d,u)=>this._instantiationService.createInstance(D8,d,u,this)})),this._register(G(this.elements.gutter,le.MOUSE_WHEEL,d=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(d)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],i=new ote(this._editors.modifiedModel.get()),s=new ote(this._editors.original.getModel());return new Mz(t.map(a=>a.toTextEdit(i))).apply(s)}layout(e){this.elements.gutter.style.left=e+"px"}};L8=Zfe([$N(6,ke),$N(7,Ae),$N(8,pa)],L8);class rte{constructor(e,t,i,s,o,r){this.mapping=e,this.showAlways=t,this.menuId=i,this.rangeOverride=s,this.originalUri=o,this.modifiedUri=r}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let D8=class extends U{constructor(e,t,i,s){super(),this._item=e,this._elements=rt("div.gutterItem",{style:{height:"20px",width:"34px"}},[rt("div.background@background",{},[]),rt("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,r=>r.showAlways),this._menuId=this._item.map(this,r=>r.menuId),this._isSmall=it(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const o=this._register(s.createInstance(hy,"element",!0,{position:{hoverPosition:1}}));this._register(gw(t,this._elements.root)),this._register(Be(r=>{const a=this._showAlways.read(r);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(zo((r,a)=>{this._elements.buttons.replaceChildren();const l=a.add(s.createInstance(MP,this._elements.buttons,this._menuId.read(r),{orientation:1,hoverDelegate:o,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(r)?1:3},hiddenItemStrategy:0,actionRunner:new Gfe(()=>{const c=this._item.get(),d=c.mapping;return{mapping:d,originalWithModifiedChanges:i.computeStagedValue(d),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),i=this._elements.buttons.clientHeight;const s=e.length/2-i/2,o=i;let r=e.start+s;const a=st.tryCreate(o,t.endExclusive-o-i),l=st.tryCreate(e.start+o,e.endExclusive-i-o);l&&a&&l.start<l.endExclusive&&(r=a.clip(r),r=l.clip(r)),this._elements.buttons.style.top=`${r-e.start}px`}};D8=Zfe([$N(3,ke)],D8);function gr(n){return E8.get(n)}const wf=class wf extends U{static get(e){let t=wf._map.get(e);if(!t){t=new wf(e),wf._map.set(e,t);const i=e.onDidDispose(()=>{const s=wf._map.get(e);s&&(wf._map.delete(e),s.dispose(),i.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new c1(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){var t;super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=it(this,this.editor.getModel()),this.model=this._model,this.isReadonly=Ht(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=MH({owner:this,lazy:!0},((t=this.editor.getModel())==null?void 0:t.getVersionId())??null),this.versionId=this._versionId,this._selections=MH({owner:this,equalsFn:IH(TT(Ce.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=Ht(this,i=>{const s=this.editor.onDidFocusEditorWidget(i),o=this.editor.onDidBlurEditorWidget(i);return{dispose(){s.dispose(),o.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=zL(this,i=>{var s;return this.versionId.read(i),((s=this.model.read(i))==null?void 0:s.getValue())??""},(i,s)=>{const o=this.model.get();o!==null&&i!==o.getValue()&&o.setValue(i)}),this.valueIsEmpty=ye(this,i=>{var s;return this.versionId.read(i),((s=this.editor.getModel())==null?void 0:s.getValueLength())===0}),this.cursorSelection=Zr({owner:this,equalsFn:IH(Ce.selectionsEqual)},i=>{var s;return((s=this.selections.read(i))==null?void 0:s[0])??null}),this.onDidType=d1(this),this.scrollTop=Ht(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=Ht(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=Ht(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(i=>i.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(i=>i.decorationsLeft),this.contentWidth=Ht(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(i=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,i)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(i=>{var s;this._beginUpdate();try{this._versionId.set(((s=this.editor.getModel())==null?void 0:s.getVersionId())??null,this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(i=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){var e;this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(((e=this.editor.getModel())==null?void 0:e.getVersionId())??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return Ht(this,t=>this.editor.onDidChangeConfiguration(i=>{i.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new Q,i=this.editor.createDecorationsCollection();return t.add(UL({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const o=e.read(s);i.set(o)})),t.add({dispose:()=>{i.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,i={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(i);const s=Be(o=>{e.position.read(o),e.minContentWidthInPx.read(o),this.editor.layoutOverlayWidget(i)});return xe(()=>{s.dispose(),this.editor.removeOverlayWidget(i)})}};wf._map=new Map;let E8=wf;function N8(n,e){return hAe({createEmptyChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(t,i)=>{if(t.didChange(n)){const s=t.change;s!==void 0&&i.deltas.push(s),i.didChange=!0}return!0}},(t,i)=>{const s=n.read(t);i.didChange&&e(s,i.deltas)})}function V8e(n,e){const t=new Q,i=N8(n,(s,o)=>{t.clear(),e(s,o,t)});return{dispose(){i.dispose(),t.dispose()}}}var z8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},U8e=function(n,e){return function(t,i){e(t,i,n)}},qN,l_;let RP=(l_=class extends U{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._instantiationService=s,this._modifiedOutlineSource=Us(this,l=>{const c=this._editors.modifiedModel.read(l),d=qN._breadcrumbsSourceFactory.read(l);return!c||!d?void 0:d(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Ti(d=>{for(const u of this._editors.original.getSelections()||[])c==null||c.ensureOriginalLineIsVisible(u.getStartPosition().lineNumber,0,d),c==null||c.ensureOriginalLineIsVisible(u.getEndPosition().lineNumber,0,d)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Ti(d=>{for(const u of this._editors.modified.getSelections()||[])c==null||c.ensureModifiedLineIsVisible(u.getStartPosition().lineNumber,0,d),c==null||c.ensureModifiedLineIsVisible(u.getEndPosition().lineNumber,0,d)})}));const o=this._diffModel.map((l,c)=>{var u;const d=(l==null?void 0:l.unchangedRegions.read(c))??[];return d.length===1&&d[0].modifiedLineNumber===1&&d[0].lineCount===((u=this._editors.modifiedModel.read(c))==null?void 0:u.getLineCount())?[]:d});this.viewZones=_m(this,(l,c)=>{const d=this._modifiedOutlineSource.read(l);if(!d)return{origViewZones:[],modViewZones:[]};const u=[],h=[],f=this._options.renderSideBySide.read(l),g=this._options.compactMode.read(l),m=o.read(l);for(let _=0;_<m.length;_++){const b=m[_];if(!b.shouldHideControls(l)&&!(g&&(_===0||_===m.length-1)))if(g){{const v=ye(this,y=>b.getHiddenOriginalRange(y).startLineNumber-1),w=new mw(v,12);u.push(w),c.add(new ate(this._editors.original,w,b,!f))}{const v=ye(this,y=>b.getHiddenModifiedRange(y).startLineNumber-1),w=new mw(v,12);h.push(w),c.add(new ate(this._editors.modified,w,b))}}else{{const v=ye(this,y=>b.getHiddenOriginalRange(y).startLineNumber-1),w=new mw(v,24);u.push(w),c.add(new lte(this._editors.original,w,b,b.originalUnchangedRange,!f,d,y=>this._diffModel.get().ensureModifiedLineIsVisible(y,2,void 0),this._options))}{const v=ye(this,y=>b.getHiddenModifiedRange(y).startLineNumber-1),w=new mw(v,24);h.push(w),c.add(new lte(this._editors.modified,w,b,b.modifiedUnchangedRange,!1,d,y=>this._diffModel.get().ensureModifiedLineIsVisible(y,2,void 0),this._options))}}}return{origViewZones:u,modViewZones:h}});const r={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new Ds(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(p("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+Re.asClassName(ae.fold),zIndex:10001};this._register(EP(this._editors.original,ye(this,l=>{const c=o.read(l),d=c.map(u=>({range:u.originalUnchangedRange.toInclusiveRange(),options:r}));for(const u of c)u.shouldHideControls(l)&&d.push({range:E.fromPositions(new H(u.originalLineNumber,1)),options:a});return d}))),this._register(EP(this._editors.modified,ye(this,l=>{const c=o.read(l),d=c.map(u=>({range:u.modifiedUnchangedRange.toInclusiveRange(),options:r}));for(const u of c)u.shouldHideControls(l)&&d.push({range:$e.ofLength(u.modifiedLineNumber,1).toInclusiveRange(),options:a});return d}))),this._register(Be(l=>{const c=o.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(d=>d.getHiddenOriginalRange(l).toInclusiveRange()).filter(zd)),this._editors.modified.setHiddenAreas(c.map(d=>d.getHiddenModifiedRange(l).toInclusiveRange()).filter(zd))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const h=u.unchangedRegions.get().find(f=>f.modifiedUnchangedRange.includes(d));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,u=this._diffModel.get();if(!u)return;const h=u.unchangedRegions.get().find(f=>f.originalUnchangedRange.includes(d));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},qN=l_,l_._breadcrumbsSourceFactory=it(qN,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),l_);RP=qN=z8e([U8e(3,ke)],RP);class ate extends C${constructor(e,t,i,s=!1){const o=rt("div.diff-hidden-lines-widget");super(e,t,o.root),this._unchangedRegion=i,this._hide=s,this._nodes=rt("div.diff-hidden-lines-compact",[rt("div.line-left",[]),rt("div.text@text",[]),rt("div.line-right",[])]),o.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(Be(r=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(r).length,l=p("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class lte extends C${constructor(e,t,i,s,o,r,a,l){const c=rt("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=i,this._unchangedRegionRange=s,this._hide=o,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=rt("div.diff-hidden-lines",[rt("div.top@top",{title:p("diff.hiddenLines.top","Click or drag to show more above")}),rt("div.center@content",{style:{display:"flex"}},[rt("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[ce("a",{title:p("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...gg("$(unfold)"))]),rt("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),rt("div.bottom@bottom",{title:p("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?rs(this._nodes.first):this._register(Rh(this._nodes.first,{width:gr(this._editor).layoutInfoContentLeft})),this._register(Be(u=>{const h=this._unchangedRegion.visibleLineCountTop.read(u)+this._unchangedRegion.visibleLineCountBottom.read(u)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!h),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(u)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(u)>0),this._nodes.top.classList.toggle("canMoveBottom",!h);const f=this._unchangedRegion.isDragged.read(u),g=this._editor.getDomNode();g&&(g.classList.toggle("draggingUnchangedRegion",!!f),f==="top"?(g.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(u)>0),g.classList.toggle("canMoveBottom",!h)):f==="bottom"?(g.classList.toggle("canMoveTop",!h),g.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(u)>0)):(g.classList.toggle("canMoveTop",!1),g.classList.toggle("canMoveBottom",!1)))}));const d=this._editor;this._register(G(this._nodes.top,"mousedown",u=>{if(u.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),u.preventDefault();const h=u.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const m=Te(this._nodes.top),_=G(m,"mousemove",v=>{const y=v.clientY-h;f=f||Math.abs(y)>2;const S=Math.round(y/d.getOption(67)),x=Math.max(0,Math.min(g+S,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(x,void 0)}),b=G(m,"mouseup",v=>{f||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),_.dispose(),b.dispose()})})),this._register(G(this._nodes.bottom,"mousedown",u=>{if(u.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),u.preventDefault();const h=u.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const m=Te(this._nodes.bottom),_=G(m,"mousemove",v=>{const y=v.clientY-h;f=f||Math.abs(y)>2;const S=Math.round(y/d.getOption(67)),x=Math.max(0,Math.min(g-S,this._unchangedRegion.getMaxVisibleLineCountBottom())),k=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(x,void 0);const D=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(D-k))}),b=G(m,"mouseup",v=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!f){const w=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const y=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(y-w))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),_.dispose(),b.dispose()})})),this._register(Be(u=>{const h=[];if(!this._hide){const f=i.getHiddenModifiedRange(u).length,g=p("hiddenLines","{0} hidden lines",f),m=ce("span",{title:p("diff.hiddenLines.expandAll","Double click to unfold")},g);m.addEventListener("dblclick",v=>{v.button===0&&(v.preventDefault(),this._unchangedRegion.showAll(void 0))}),h.push(m);const _=this._unchangedRegion.getHiddenModifiedRange(u),b=this._modifiedOutlineSource.getBreadcrumbItems(_,u);if(b.length>0){h.push(ce("span",void 0,"|"));for(let v=0;v<b.length;v++){const w=b[v],y=KI.toIcon(w.kind),S=rt("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[gb(y),"",w.name,...v===b.length-1?[]:[gb(ae.chevronRight)]]).root;h.push(S),S.onclick=()=>{this._revealModifiedHiddenLine(w.startLineNumber)}}}}rs(this._nodes.others,...h)}))}}var $8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},q8e=function(n,e){return function(t,i){e(t,i,n)}},Zl,lh;let Rk=(lh=class extends U{constructor(e,t,i,s,o,r,a){super(),this._editors=e,this._rootElement=t,this._diffModel=i,this._rootWidth=s,this._rootHeight=o,this._modifiedEditorLayoutInfo=r,this._themeService=a,this.width=Zl.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=Ht(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=ye(h=>{const f=l.read(h),g=f.getColor(hPe)||(f.getColor(dPe)||XB).transparent(2),m=f.getColor(fPe)||(f.getColor(uPe)||JB).transparent(2);return{insertColor:g,removeColor:m}}),d=Ot(document.createElement("div"));d.setClassName("diffViewport"),d.setPosition("absolute");const u=rt("div.diffOverview",{style:{position:"absolute",top:"0px",width:Zl.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(gw(u,d.domNode)),this._register(Fi(u,le.POINTER_DOWN,h=>{this._editors.modified.delegateVerticalScrollbarPointerDown(h)})),this._register(G(u,le.MOUSE_WHEEL,h=>{this._editors.modified.delegateScrollFromMouseWheelEvent(h)},{passive:!1})),this._register(gw(this._rootElement,u)),this._register(zo((h,f)=>{const g=this._diffModel.read(h),m=this._editors.original.createOverviewRuler("original diffOverviewRuler");m&&(f.add(m),f.add(gw(u,m.getDomNode())));const _=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(_&&(f.add(_),f.add(gw(u,_.getDomNode()))),!m||!_)return;const b=ms("viewZoneChanged",this._editors.original.onDidChangeViewZones),v=ms("viewZoneChanged",this._editors.modified.onDidChangeViewZones),w=ms("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),y=ms("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);f.add(Be(S=>{var O;b.read(S),v.read(S),w.read(S),y.read(S);const x=c.read(S),k=(O=g==null?void 0:g.diff.read(S))==null?void 0:O.mappings;function D(B,z,F){const K=F._getViewModel();return K?B.filter(Z=>Z.length>0).map(Z=>{const re=K.coordinatesConverter.convertModelPositionToViewPosition(new H(Z.startLineNumber,1)),q=K.coordinatesConverter.convertModelPositionToViewPosition(new H(Z.endLineNumberExclusive,1)),J=q.lineNumber-re.lineNumber;return new Ffe(re.lineNumber,q.lineNumber,J,z.toString())}):[]}const N=D((k||[]).map(B=>B.lineRangeMapping.original),x.removeColor,this._editors.original),R=D((k||[]).map(B=>B.lineRangeMapping.modified),x.insertColor,this._editors.modified);m==null||m.setZones(N),_==null||_.setZones(R)})),f.add(Be(S=>{const x=this._rootHeight.read(S),k=this._rootWidth.read(S),D=this._modifiedEditorLayoutInfo.read(S);if(D){const N=Zl.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Zl.ONE_OVERVIEW_WIDTH;m.setLayout({top:0,height:x,right:N+Zl.ONE_OVERVIEW_WIDTH,width:Zl.ONE_OVERVIEW_WIDTH}),_.setLayout({top:0,height:x,right:0,width:Zl.ONE_OVERVIEW_WIDTH});const R=this._editors.modifiedScrollTop.read(S),O=this._editors.modifiedScrollHeight.read(S),B=this._editors.modified.getOption(104),z=new gy(B.verticalHasArrows?B.arrowSize:0,B.verticalScrollbarSize,0,D.height,O,R);d.setTop(z.getSliderPosition()),d.setHeight(z.getSliderSize())}else d.setTop(0),d.setHeight(0);u.style.height=x+"px",u.style.left=k-Zl.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",d.setWidth(Zl.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},Zl=lh,lh.ONE_OVERVIEW_WIDTH=15,lh.ENTIRE_DIFF_OVERVIEW_WIDTH=lh.ONE_OVERVIEW_WIDTH*2,lh);Rk=Zl=$8e([q8e(6,kn)],Rk);const J4=[];class K8e extends U{constructor(e,t,i,s){super(),this._editors=e,this._diffModel=t,this._options=i,this._widget=s,this._selectedDiffs=ye(this,o=>{const r=this._diffModel.read(o),a=r==null?void 0:r.diff.read(o);if(!a)return J4;const l=this._editors.modifiedSelections.read(o);if(l.every(h=>h.isEmpty()))return J4;const c=new Aa(l.map(h=>$e.fromRangeInclusive(h))),u=a.mappings.filter(h=>h.lineRangeMapping.innerChanges&&c.intersects(h.lineRangeMapping.modified)).map(h=>({mapping:h,rangeMappings:h.lineRangeMapping.innerChanges.filter(f=>l.some(g=>E.areIntersecting(f.modifiedRange,g)))}));return u.length===0||u.every(h=>h.rangeMappings.length===0)?J4:u}),this._register(zo((o,r)=>{if(!this._options.shouldRenderOldRevertArrows.read(o))return;const a=this._diffModel.read(o),l=a==null?void 0:a.diff.read(o);if(!a||!l||a.movedTextToCompare.read(o))return;const c=[],d=this._selectedDiffs.read(o),u=new Set(d.map(h=>h.mapping));if(d.length>0){const h=this._editors.modifiedSelections.read(o),f=r.add(new AP(h[h.length-1].positionLineNumber,this._widget,d.flatMap(g=>g.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}for(const h of l.mappings)if(!u.has(h)&&!h.lineRangeMapping.modified.isEmpty&&h.lineRangeMapping.innerChanges){const f=r.add(new AP(h.lineRangeMapping.modified.startLineNumber,this._widget,h.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}r.add(xe(()=>{for(const h of c)this._editors.modified.removeGlyphMarginWidget(h)}))}))}}const N2=class N2 extends U{getId(){return this._id}constructor(e,t,i,s){super(),this._lineNumber=e,this._widget=t,this._diffs=i,this._revertSelection=s,this._id=`revertButton${N2.counter++}`,this._domNode=rt("div.revertButton",{title:this._revertSelection?p("revertSelectedChanges","Revert Selected Changes"):p("revertChange","Revert Change")},[gb(ae.arrowRight)]).root,this._register(G(this._domNode,le.MOUSE_DOWN,o=>{o.button!==2&&(o.stopPropagation(),o.preventDefault())})),this._register(G(this._domNode,le.MOUSE_UP,o=>{o.stopPropagation(),o.preventDefault()})),this._register(G(this._domNode,le.CLICK,o=>{this._diffs instanceof qs?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),o.stopPropagation(),o.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:Rl.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};N2.counter=0;let AP=N2;function G8e(n,e,t){return gAe({debugName:()=>`Configuration Key "${n}"`},i=>t.onDidChangeConfiguration(s=>{s.affectsConfiguration(n)&&i(s)}),()=>t.getValue(n)??e)}function ec(n,e,t){const i=n.bindTo(e);return UL({debugName:()=>`Set Context Key "${n.key}"`},s=>{i.set(t(s))})}var Y8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},cte=function(n,e){return function(t,i){e(t,i,n)}};let I8=class extends U{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,i,s,o,r,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=i,this._argCodeEditorWidgetOptions=s,this._createInnerEditor=o,this._instantiationService=r,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new j),this.modifiedScrollTop=Ht(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=Ht(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=gr(this.modified),this.originalObs=gr(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=Ht(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=Zr({owner:this,equalsFn:H.equals},l=>{var c;return((c=this.modifiedSelections.read(l)[0])==null?void 0:c.getPosition())??new H(1,1)}),this.originalCursor=Ht(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new H(1,1)),this._argCodeEditorWidgetOptions=null,this._register($L({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(i.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{i.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const i=this._adjustOptionsForLeftHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,t);return s.setContextValue("isInDiffLeftEditor",!0),s}_createRightHandSideEditor(e,t){const i=this._adjustOptionsForRightHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,t);return s.setContextValue("isInDiffRightEditor",!0),s}_constructInnerEditor(e,t,i,s){const o=this._createInnerEditor(e,t,i,s);return this._register(o.onDidContentSizeChange(r=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+Rk.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),o}_adjustOptionsForLeftHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(i.ariaLabel=t.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i}_adjustOptionsForRightHandSide(e,t){const i=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(i.ariaLabel=t.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=zc.revealHorizontalRightPadding.defaultValue+Rk.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var i;e||(e="");const t=p("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))==null?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};I8=Y8e([cte(5,ke),cte(6,Ft)],I8);const I2=class I2 extends U{constructor(){super(...arguments),this._id=++I2.idCounter,this._onDidDispose=this._register(new j),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,i=0){this._targetEditor.revealLines(e,t,i)}revealLinesInCenter(e,t,i=0){this._targetEditor.revealLinesInCenter(e,t,i)}revealLinesInCenterIfOutsideViewport(e,t,i=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,i)}revealLinesNearTop(e,t,i=0){this._targetEditor.revealLinesNearTop(e,t,i)}revealRange(e,t=0,i=!1,s=!0){this._targetEditor.revealRange(e,t,i,s)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,i){this._targetEditor.trigger(e,t,i)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};I2.idCounter=0;let T8=I2;var Z8e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Q8e=function(n,e){return function(t,i){e(t,i,n)}};let P8=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=it(this,0),this._screenReaderMode=Ht(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=ye(this,s=>this._options.read(s).renderSideBySide&&this._diffEditorWidth.read(s)<=this._options.read(s).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=ye(this,s=>this._options.read(s).renderOverviewRuler),this.renderSideBySide=ye(this,s=>this.compactMode.read(s)&&this.shouldRenderInlineViewInSmartMode.read(s)?!1:this._options.read(s).renderSideBySide&&!(this._options.read(s).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(s)&&!this._screenReaderMode.read(s))),this.readOnly=ye(this,s=>this._options.read(s).readOnly),this.shouldRenderOldRevertArrows=ye(this,s=>!(!this._options.read(s).renderMarginRevertIcon||!this.renderSideBySide.read(s)||this.readOnly.read(s)||this.shouldRenderGutterMenu.read(s))),this.shouldRenderGutterMenu=ye(this,s=>this._options.read(s).renderGutterMenu),this.renderIndicators=ye(this,s=>this._options.read(s).renderIndicators),this.enableSplitViewResizing=ye(this,s=>this._options.read(s).enableSplitViewResizing),this.splitViewDefaultRatio=ye(this,s=>this._options.read(s).splitViewDefaultRatio),this.ignoreTrimWhitespace=ye(this,s=>this._options.read(s).ignoreTrimWhitespace),this.maxComputationTimeMs=ye(this,s=>this._options.read(s).maxComputationTime),this.showMoves=ye(this,s=>this._options.read(s).experimental.showMoves&&this.renderSideBySide.read(s)),this.isInEmbeddedEditor=ye(this,s=>this._options.read(s).isInEmbeddedEditor),this.diffWordWrap=ye(this,s=>this._options.read(s).diffWordWrap),this.originalEditable=ye(this,s=>this._options.read(s).originalEditable),this.diffCodeLens=ye(this,s=>this._options.read(s).diffCodeLens),this.accessibilityVerbose=ye(this,s=>this._options.read(s).accessibilityVerbose),this.diffAlgorithm=ye(this,s=>this._options.read(s).diffAlgorithm),this.showEmptyDecorations=ye(this,s=>this._options.read(s).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=ye(this,s=>this._options.read(s).onlyShowAccessibleDiffViewer),this.compactMode=ye(this,s=>this._options.read(s).compactMode),this.trueInlineDiffRenderingEnabled=ye(this,s=>this._options.read(s).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=ye(this,s=>!this.renderSideBySide.read(s)&&this.trueInlineDiffRenderingEnabled.read(s)),this.hideUnchangedRegions=ye(this,s=>this._options.read(s).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=ye(this,s=>this._options.read(s).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=ye(this,s=>this._options.read(s).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=ye(this,s=>this._options.read(s).hideUnchangedRegions.minimumLineCount),this._model=it(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,s=>bAe(this,o=>{const r=s==null?void 0:s.diff.read(o);return r?X8e(r,this.trueInlineDiffRenderingEnabled.read(o)):void 0})).flatten().map(this,s=>!!s),this.inlineViewHideOriginalLineNumbers=this.compactMode;const i={...e,...dte(e,cs)};this._options=it(this,i)}updateOptions(e){const t=dte(e,this._options.get()),i={...this._options.get(),...e,...t};this._options.set(i,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};P8=Z8e([Q8e(1,Nr)],P8);function X8e(n,e){return n.mappings.every(t=>J8e(t.lineRangeMapping)||e9e(t.lineRangeMapping)||e&&I$(t.lineRangeMapping))}function J8e(n){return n.original.length===0}function e9e(n){return n.modified.length===0}function dte(n,e){var t,i,s,o,r,a,l,c;return{enableSplitViewResizing:Se(n.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:nke(n.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:Se(n.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:Se(n.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:Vm(n.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:Vm(n.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Se(n.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Se(n.renderIndicators,e.renderIndicators),originalEditable:Se(n.originalEditable,e.originalEditable),diffCodeLens:Se(n.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Se(n.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:Bi(n.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:Bi(n.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:Se(n.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:Se((t=n.experimental)==null?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:Se((i=n.experimental)==null?void 0:i.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:Se((s=n.experimental)==null?void 0:s.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:Se(((o=n.hideUnchangedRegions)==null?void 0:o.enabled)??((r=n.experimental)==null?void 0:r.collapseUnchangedRegions),e.hideUnchangedRegions.enabled),contextLineCount:Vm((a=n.hideUnchangedRegions)==null?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:Vm((l=n.hideUnchangedRegions)==null?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:Vm((c=n.hideUnchangedRegions)==null?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:Se(n.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:Se(n.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:Vm(n.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:Se(n.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:Se(n.renderGutterMenu,e.renderGutterMenu),compactMode:Se(n.compactMode,e.compactMode)}}var t9e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},r0=function(n,e){return function(t,i){e(t,i,n)}};let Ah=class extends T8{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,i,s,o,r,a,l){super(),this._domElement=e,this._parentContextKeyService=s,this._parentInstantiationService=o,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=rt("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[rt("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),rt("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),rt("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(lk(this,void 0)),this._diffModel=ye(this,y=>{var S;return(S=this._diffModelSrc.read(y))==null?void 0:S.object}),this.onDidChangeModel=ue.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new m1([Ae,this._contextKeyService]))),this._boundarySashes=it(this,void 0),this._accessibleDiffViewerShouldBeVisible=it(this,!1),this._accessibleDiffViewerVisible=ye(this,y=>this._options.onlyShowAccessibleDiffViewer.read(y)?!0:this._accessibleDiffViewerShouldBeVisible.read(y)),this._movedBlocksLinesPart=it(this,void 0),this._layoutInfo=ye(this,y=>{var re,q;const S=this._rootSizeObserver.width.read(y),x=this._rootSizeObserver.height.read(y);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=x+"px";const k=this._sash.read(y),D=this._gutter.read(y),N=(D==null?void 0:D.width.read(y))??0,R=((re=this._overviewRulerPart.read(y))==null?void 0:re.width)??0;let O,B,z,F,K;if(!!k){const J=k.sashLeft.read(y),ge=((q=this._movedBlocksLinesPart.read(y))==null?void 0:q.width.read(y))??0;O=0,B=J-N-ge,K=J-N,z=J,F=S-z-R}else{K=0;const J=this._options.inlineViewHideOriginalLineNumbers.read(y);O=N,J?B=0:B=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(y)),z=N+B,F=S-z-R}return this.elements.original.style.left=O+"px",this.elements.original.style.width=B+"px",this._editors.original.layout({width:B,height:x},!0),D==null||D.layout(K),this.elements.modified.style.left=z+"px",this.elements.modified.style.width=F+"px",this._editors.modified.layout({width:F,height:x},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((y,S)=>y==null?void 0:y.diff.read(S)),this.onDidUpdateDiff=ue.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(xe(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new Vfe(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(P8,t),this._register(Be(y=>{this._options.setWidth(this._rootSizeObserver.width.read(y))})),this._contextKeyService.createKey(I.isEmbeddedDiffEditor.key,!1),this._register(ec(I.isEmbeddedDiffEditor,this._contextKeyService,y=>this._options.isInEmbeddedEditor.read(y))),this._register(ec(I.comparingMovedCode,this._contextKeyService,y=>{var S;return!!((S=this._diffModel.read(y))!=null&&S.movedTextToCompare.read(y))})),this._register(ec(I.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,y=>this._options.couldShowInlineViewBecauseOfSize.read(y))),this._register(ec(I.diffEditorInlineMode,this._contextKeyService,y=>!this._options.renderSideBySide.read(y))),this._register(ec(I.hasChanges,this._contextKeyService,y=>{var S,x;return(((x=(S=this._diffModel.read(y))==null?void 0:S.diff.read(y))==null?void 0:x.mappings.length)??0)>0})),this._editors=this._register(this._instantiationService.createInstance(I8,this.elements.original,this.elements.modified,this._options,i,(y,S,x,k)=>this._createInnerEditor(y,S,x,k))),this._register(ec(I.diffEditorOriginalWritable,this._contextKeyService,y=>this._options.originalEditable.read(y))),this._register(ec(I.diffEditorModifiedWritable,this._contextKeyService,y=>!this._options.readOnly.read(y))),this._register(ec(I.diffEditorOriginalUri,this._contextKeyService,y=>{var S;return((S=this._diffModel.read(y))==null?void 0:S.model.original.uri.toString())??""})),this._register(ec(I.diffEditorModifiedUri,this._contextKeyService,y=>{var S;return((S=this._diffModel.read(y))==null?void 0:S.model.modified.uri.toString())??""})),this._overviewRulerPart=Us(this,y=>this._options.renderOverviewRuler.read(y)?this._instantiationService.createInstance(dr(Rk,y),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(S=>S.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((y,S)=>{var x;return y-(((x=this._overviewRulerPart.read(S))==null?void 0:x.width)??0)})};this._sashLayout=new W8e(this._options,c),this._sash=Us(this,y=>{const S=this._options.renderSideBySide.read(y);return this.elements.root.classList.toggle("side-by-side",S),S?new Kfe(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const d=Us(this,y=>this._instantiationService.createInstance(dr(RP,y),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);Us(this,y=>this._instantiationService.createInstance(dr(F8e,y),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const u=new Set,h=new Set;let f=!1;const g=Us(this,y=>this._instantiationService.createInstance(dr(k8,y),Te(this._domElement),this._editors,this._diffModel,this._options,this,()=>f||d.get().isUpdatingHiddenAreas,u,h)).recomputeInitiallyAndOnChange(this._store),m=ye(this,y=>{const S=g.read(y).viewZones.read(y).orig,x=d.read(y).viewZones.read(y).origViewZones;return S.concat(x)}),_=ye(this,y=>{const S=g.read(y).viewZones.read(y).mod,x=d.read(y).viewZones.read(y).modViewZones;return S.concat(x)});this._register(NP(this._editors.original,m,y=>{f=y},u));let b;this._register(NP(this._editors.modified,_,y=>{f=y,f?b=Vc.capture(this._editors.modified):(b==null||b.restore(this._editors.modified),b=void 0)},h)),this._accessibleDiffViewer=Us(this,y=>this._instantiationService.createInstance(dr(Ep,y),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(S,x)=>this._accessibleDiffViewerShouldBeVisible.set(S,x),this._options.onlyShowAccessibleDiffViewer.map(S=>!S),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((S,x)=>{var k;return(k=S==null?void 0:S.diff.read(x))==null?void 0:k.mappings.map(D=>D.lineRangeMapping)}),new k8e(this._editors))).recomputeInitiallyAndOnChange(this._store);const v=this._accessibleDiffViewerVisible.map(y=>y?"hidden":"visible");this._register(Rh(this.elements.modified,{visibility:v})),this._register(Rh(this.elements.original,{visibility:v})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._gutter=Us(this,y=>this._options.shouldRenderGutterMenu.read(y)?this._instantiationService.createInstance(dr(L8,y),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(u1(this._layoutInfo)),Us(this,y=>new(dr(_C,y))(this.elements.root,this._diffModel,this._layoutInfo.map(S=>S.originalEditor),this._layoutInfo.map(S=>S.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,y=>{this._movedBlocksLinesPart.set(y,void 0)}),this._register(ue.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,y=>this._handleCursorPositionChange(y,!0))),this._register(ue.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,y=>this._handleCursorPositionChange(y,!1)));const w=this._diffModel.map(this,(y,S)=>{if(y)return y.diff.read(S)===void 0&&!y.isDiffUpToDate.read(S)});this._register(zo((y,S)=>{if(w.read(y)===!0){const x=this._editorProgressService.show(!0,1e3);S.add(xe(()=>x.done()))}})),this._register(zo((y,S)=>{S.add(new(dr(K8e,y))(this._editors,this._diffModel,this._options,this))})),this._register(zo((y,S)=>{const x=this._diffModel.read(y);if(x)for(const k of[x.model.original,x.model.modified])S.add(k.onWillDispose(D=>{He(new Dt("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(Be(y=>{this._options.setModel(this._diffModel.read(y))}))}_createInnerEditor(e,t,i,s){return e.createInstance(Ik,t,i,s)}_createDiffEditorContributions(){const e=Up.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){He(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return XL.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var i;const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:(i=this._diffModel.get())==null?void 0:i.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const i=e;this._editors.original.restoreViewState(i.original),this._editors.modified.restoreViewState(i.modified),i.modelState&&((t=this._diffModel.get())==null||t.restoreSerializedState(i.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(x8,e,this._options)}getModel(){var e;return((e=this._diffModel.get())==null?void 0:e.model)??null}setModel(e){const t=e?"model"in e?IP.create(e).createNewRef(this):IP.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const i=this._diffModel.get();!e&&i&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(e==null?void 0:e.object)&&_b(t,s=>{var a;const o=e==null?void 0:e.object;Ht.batchEventsGlobally(s,()=>{this._editors.original.setModel(o?o.model.original:null),this._editors.modified.setModel(o?o.model.modified:null)});const r=(a=this._diffModelSrc.get())==null?void 0:a.createNewRef(this);this._diffModelSrc.set(e==null?void 0:e.createNewRef(this),s),setTimeout(()=>{r==null||r.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var t;const e=(t=this._diffModel.get())==null?void 0:t.diff.get();return e?i9e(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const i=e.map(s=>({range:s.modifiedRange,text:t.model.original.getValueInRange(s.originalRange)}));this._editors.modified.executeEdits("diffEditor",i)}_goTo(e){this._editors.modified.setPosition(new H(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var o,r;const t=(r=(o=this._diffModel.get())==null?void 0:o.diff.get())==null?void 0:r.mappings;if(!t||t.length===0)return;const i=this._editors.modified.getPosition().lineNumber;let s;e==="next"?s=t.find(a=>a.lineRangeMapping.modified.startLineNumber>i)??t[0]:s=$x(t,a=>a.lineRangeMapping.modified.startLineNumber<i)??t[t.length-1],this._goTo(s),s.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Kr.diffLineDeleted,{source:"diffEditor.goToDiff"}):s.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Kr.diffLineInserted,{source:"diffEditor.goToDiff"}):s&&this._accessibilitySignalService.playSignal(Kr.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var i;const t=(i=e.diff.get())==null?void 0:i.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var r,a;const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,i=e?this._editors.original:this._editors.modified;let s;const o=t.getSelection();if(o){const l=(a=(r=this._diffModel.get())==null?void 0:r.diff.get())==null?void 0:a.mappings.map(c=>e?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=Gee(o.getStartPosition(),l),d=Gee(o.getEndPosition(),l);s=E.plusRange(c,d)}}return{destination:i,destinationSelection:s}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&Ti(i=>{for(const s of e)s.collapseAll(i)})}showAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&Ti(i=>{for(const s of e)s.showAll(i)})}_handleCursorPositionChange(e,t){var i,s;if((e==null?void 0:e.reason)===3){const o=(s=(i=this._diffModel.get())==null?void 0:i.diff.get())==null?void 0:s.mappings.find(r=>t?r.lineRangeMapping.modified.contains(e.position.lineNumber):r.lineRangeMapping.original.contains(e.position.lineNumber));o!=null&&o.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Kr.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):o!=null&&o.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Kr.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):o&&this._accessibilitySignalService.playSignal(Kr.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};Ah=t9e([r0(3,Ae),r0(4,ke),r0(5,kt),r0(6,vm),r0(7,pm)],Ah);function i9e(n){return n.mappings.map(e=>{const t=e.lineRangeMapping;let i,s,o,r,a=t.innerChanges;return t.original.isEmpty?(i=t.original.startLineNumber-1,s=0,a=void 0):(i=t.original.startLineNumber,s=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(o=t.modified.startLineNumber-1,r=0,a=void 0):(o=t.modified.startLineNumber,r=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:s,modifiedStartLineNumber:o,modifiedEndLineNumber:r,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var P$=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ci=function(n,e){return function(t,i){e(t,i,n)}};let n9e=0,ute=!1;function s9e(n){if(!n){if(ute)return;ute=!0}cRe(n||Gt.document.body)}let OP=class extends Ik{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f){const g={...t};g.ariaLabel=g.ariaLabel||LH.editorViewAccessibleLabel,super(e,g,{},i,s,o,r,c,d,u,h,f),l instanceof xy?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,s9e(g.ariaContainerElement),SAe((m,_)=>i.createInstance(hy,m,_,{})),xAe(a)}addCommand(e,t,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const s="DYNAMIC_"+ ++n9e,o=X.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,o),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),U.None;const t=e.id,i=e.label,s=X.and(X.equals("editorId",this.getId()),X.deserialize(e.precondition)),o=e.keybindings,r=X.and(s,X.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),d=new Q,u=this.getId()+":"+t;if(d.add(bt.registerCommand(u,c)),a){const f={command:{id:u,title:i},when:s,group:a,order:l};d.add(Yn.appendMenuItem(we.EditorContext,f))}if(Array.isArray(o))for(const f of o)d.add(this._standaloneKeybindingService.addDynamicKeybinding(u,f,c,r));const h=new Wfe(u,i,i,void 0,s,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,h),d.add(xe(()=>{this._actions.delete(t)})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof mT)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};OP=P$([ci(2,ke),ci(3,kt),ci(4,oi),ci(5,Ae),ci(6,du),ci(7,Ft),ci(8,kn),ci(9,rn),ci(10,Nr),ci(11,Ri),ci(12,ve)],OP);let M8=class extends OP{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f,g,m,_){const b={...t};uP(u,b,!1);const v=c.registerEditorContainer(e);typeof b.theme=="string"&&c.setTheme(b.theme),typeof b.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!b.autoDetectHighContrast);const w=b.model;delete b.model,super(e,b,i,s,o,r,a,l,c,d,h,m,_),this._configurationService=u,this._standaloneThemeService=c,this._register(v);let y;if(typeof w>"u"){const S=g.getLanguageIdByMimeType(b.language)||b.language||_o;y=Qfe(f,g,b.value||"",S,void 0),this._ownsModel=!0}else y=w,this._ownsModel=!1;if(this._attachModel(y),y){const S={oldModelUrl:null,newModelUrl:y.uri};this._onDidChangeModel.fire(S)}}dispose(){super.dispose()}updateOptions(e){uP(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};M8=P$([ci(2,ke),ci(3,kt),ci(4,oi),ci(5,Ae),ci(6,du),ci(7,Ft),ci(8,wa),ci(9,rn),ci(10,nt),ci(11,Nr),ci(12,gi),ci(13,Di),ci(14,Ri),ci(15,ve)],M8);let R8=class extends Ah{constructor(e,t,i,s,o,r,a,l,c,d,u,h){const f={...t};uP(l,f,!0);const g=r.registerEditorContainer(e);typeof f.theme=="string"&&r.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},s,i,o,h,d),this._configurationService=l,this._standaloneThemeService=r,this._register(g)}dispose(){super.dispose()}updateOptions(e){uP(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,i){return e.createInstance(OP,t,i)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,i){return this.getModifiedEditor().addCommand(e,t,i)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};R8=P$([ci(2,ke),ci(3,Ae),ci(4,kt),ci(5,wa),ci(6,rn),ci(7,nt),ci(8,Er),ci(9,pm),ci(10,qh),ci(11,vm)],R8);function Qfe(n,e,t,i,s){if(t=t||"",!i){const o=t.indexOf(`
`);let r=t;return o!==-1&&(r=t.substring(0,o)),hte(n,t,e.createByFilepathOrFirstLine(s||null,r),s)}return hte(n,t,e.createById(i),s)}function hte(n,e,t,i){return n.createModel(e,t,i)}var o9e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},fte=function(n,e){return function(t,i){e(t,i,n)}};class r9e{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let FP=class extends U{constructor(e,t,i,s,o){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=s,this._viewModel=it(this,void 0),this._collapsed=ye(this,l=>{var c;return(c=this._viewModel.read(l))==null?void 0:c.collapsed.read(l)}),this._editorContentHeight=it(this,500),this.contentHeight=ye(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=it(this,0),this._modifiedWidth=it(this,0),this._originalContentWidth=it(this,0),this._originalWidth=it(this,0),this.maxScroll=ye(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),d=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>d?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:d,width:this._originalWidth.read(l)}}),this._elements=rt("div.multiDiffEntry",[rt("div.header@header",[rt("div.header-content",[rt("div.collapse-button@collapseButton"),rt("div.file-path",[rt("div.title.modified.show-file-icons@primaryPath",[]),rt("div.status.deleted@status",["R"]),rt("div.title.original.show-file-icons@secondaryPath",[])]),rt("div.actions@actions")])]),rt("div.editorParent",[rt("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(Ah,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=gr(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=gr(this.editor.getOriginalEditor()).isFocused,this.isFocused=ye(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new Q),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const r=new GT(this._elements.collapseButton,{});this._register(Be(l=>{r.element.className="",r.icon=this._collapsed.read(l)?ae.chevronRight:ae.chevronDown})),this._register(r.onDidClick(()=>{var l;(l=this._viewModel.get())==null||l.collapsed.set(!this._collapsed.get(),void 0)})),this._register(Be(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{D0(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(Be(l=>{var d;const c=(d=this._viewModel.read(l))==null?void 0:d.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(o.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new m1([Ae,this._contextKeyService])));this._register(a.createInstance(MP,this._elements.actions,we.MultiDiffEditorFileToolbar,{actionRunner:this._register(new Gfe(()=>{var l;return(l=this._viewModel.get())==null?void 0:l.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>Uue(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(s){return{...s,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){D0(s=>{this._viewModel.set(void 0,s),this.editor.setDiffModel(null,s),this._dataStore.clear()});return}const i=e.viewModel.documentDiffItem;if(D0(s=>{var c,d;(c=this._resourceLabel)==null||c.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let o=!1,r=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",o=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",r=!0),this._elements.status.classList.toggle("renamed",o),this._elements.status.classList.toggle("deleted",r),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,(d=this._resourceLabel2)==null||d.setUri(o?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,s),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,s),this.editor.updateOptions(t(i.options??{}))}),i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange(()=>{this.editor.updateOptions(t(i.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,s=>{s||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[s,o]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(s,o)}render(e,t,i,s){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const o=e.length-this._headerHeight,r=Math.max(0,Math.min(s.start-e.start,o));this._elements.header.style.transform=`translateY(${r}px)`,D0(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",r>0||i>0),this._elements.header.classList.toggle("collapsed",r===o)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};FP=o9e([fte(3,ke),fte(4,Ae)],FP);class a9e{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const i=[...this._unused.values()];t=i.find(s=>this._itemData.get(s).getId()===e.getId())??i[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var l9e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},gte=function(n,e){return function(t,i){e(t,i,n)}};let A8=class extends U{constructor(e,t,i,s,o,r){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=s,this._parentContextKeyService=o,this._parentInstantiationService=r,this._scrollableElements=rt("div.scrollContent",[rt("div@content",{style:{overflow:"hidden"}}),rt("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new a1({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>xr(Te(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new PA(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=rt("div.monaco-component.multiDiffEditor",{},[rt("div",{},[this._scrollableElement.getDomNode()]),rt("div.placeholder@placeholder",{},[rt("div",[p("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new Vfe(this._element,void 0)),this._objectPool=this._register(new a9e(l=>{const c=this._instantiationService.createInstance(FP,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=Ht(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=Ht(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=_m(this,(l,c)=>{const d=this._viewModel.read(l);if(!d)return{items:[],getItem:g=>{throw new Dt}};const u=d.items.read(l),h=new Map;return{items:u.map(g=>{var b;const m=c.add(new c9e(g,this._objectPool,this.scrollLeft,v=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+v})})),_=(b=this._lastDocStates)==null?void 0:b[m.getKey()];return _&&Ti(v=>{m.setViewState(_,v)}),h.set(g,m),m}),getItem:g=>h.get(g)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((d,u)=>d+u.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new m1([Ae,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(I.inMultiDiffEditor.key,!0),this._register(zo((l,c)=>{const d=this._viewModel.read(l);if(d&&d.contextKeys)for(const[u,h]of Object.entries(d.contextKeys)){const f=this._contextKeyService.createKey(u,void 0);f.set(h),c.add(xe(()=>f.reset()))}}));const a=this._parentContextKeyService.createKey(I.multiDiffEditorAllCollapsed.key,!1);this._register(Be(l=>{const c=this._viewModel.read(l);if(c){const d=c.items.read(l).every(u=>u.collapsed.read(l));a.set(d)}})),this._register(Be(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(Be(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(Be(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const d=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${d}px`;const u=this._sizeObserver.width.read(l);let h=u;const f=this._viewItems.read(l),g=Pz(f,mo(m=>m.maxScroll.read(l).maxScroll,Dl));if(g){const m=g.maxScroll.read(l);h=u+m.maxScroll}this._scrollableElement.setScrollDimensions({width:u,height:c,scrollHeight:d,scrollWidth:h})})),e.replaceChildren(this._elements.root),this._register(xe(()=>{e.replaceChildren()})),this._register(this._register(Be(l=>{D0(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let i=0,s=0,o=0;const r=this._sizeObserver.height.read(e),a=st.ofStartAndLength(t,r),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const d=c.contentHeight.read(e),u=Math.min(d,r),h=st.ofStartAndLength(s,u),f=st.ofStartAndLength(o,d);if(f.isBefore(a))i-=d-u,c.hide();else if(f.isAfter(a))c.hide();else{const g=Math.max(0,Math.min(a.start-f.start,d-u));i-=g;const m=st.ofStartAndLength(t+i,r);c.render(h,g,l,m)}s+=u+this._spaceBetweenPx,o+=d+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};A8=l9e([gte(4,Ae),gte(5,ke)],A8);class c9e extends U{constructor(e,t,i,s){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=s,this._templateRef=this._register(lk(this,void 0)),this.contentHeight=ye(this,o=>{var r,a;return((a=(r=this._templateRef.read(o))==null?void 0:r.object.contentHeight)==null?void 0:a.read(o))??this.viewModel.lastTemplateData.read(o).contentHeight}),this.maxScroll=ye(this,o=>{var r;return((r=this._templateRef.read(o))==null?void 0:r.object.maxScroll.read(o))??{maxScroll:0,scrollWidth:0}}),this.template=ye(this,o=>{var r;return(r=this._templateRef.read(o))==null?void 0:r.object}),this._isHidden=it(this,!1),this._isFocused=ye(this,o=>{var r;return((r=this.template.read(o))==null?void 0:r.isFocused.read(o))??!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(Be(o=>{var a;const r=this._scrollLeft.read(o);(a=this._templateRef.read(o))==null||a.object.setScrollLeft(r)})),this._register(Be(o=>{const r=this._templateRef.read(o);!r||!this._isHidden.read(o)||r.object.isFocused.read(o)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.documentDiffItem.modified)==null?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var r;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),s=(r=e.selections)==null?void 0:r.map(Ce.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:s},t);const o=this._templateRef.get();o&&s&&o.object.editor.setSelections(s)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&Ti(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,s){this._isHidden.set(!1,void 0);let o=this._templateRef.get();if(!o){o=this._objectPool.getUnusedObj(new r9e(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(o,void 0);const r=this.viewModel.lastTemplateData.get().selections;r&&o.object.editor.setSelections(r)}o.object.render(e,i,t,s)}}T("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},p("multiDiffEditor.headerBackground","The background color of the diff editor's header"));T("multiDiffEditor.background",Ol,p("multiDiffEditor.background","The background color of the multi file diff editor"));T("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},p("multiDiffEditor.border","The border color of the multi file diff editor"));var d9e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},u9e=function(n,e){return function(t,i){e(t,i,n)}};let O8=class extends U{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=it(this,void 0),this._viewModel=it(this,void 0),this._widgetImpl=_m(this,(s,o)=>(dr(FP,s),o.add(this._instantiationService.createInstance(dr(A8,s),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(u1(this._widgetImpl))}};O8=d9e([u9e(2,ke)],O8);function h9e(n,e,t){return We.initialize(t||{}).createInstance(M8,n,e)}function f9e(n){return We.get(kt).onCodeEditorAdd(t=>{n(t)})}function g9e(n){return We.get(kt).onDiffEditorAdd(t=>{n(t)})}function m9e(){return We.get(kt).listCodeEditors()}function p9e(){return We.get(kt).listDiffEditors()}function _9e(n,e,t){return We.initialize(t||{}).createInstance(R8,n,e)}function b9e(n,e){const t=We.initialize(e||{});return new O8(n,{},t)}function v9e(n){if(typeof n.id!="string"||typeof n.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return bt.registerCommand(n.id,n.run)}function w9e(n){if(typeof n.id!="string"||typeof n.label!="string"||typeof n.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=X.deserialize(n.precondition),t=(s,...o)=>xn.runEditorCommand(s,o,e,(r,a,l)=>Promise.resolve(n.run(a,...l))),i=new Q;if(i.add(bt.registerCommand(n.id,t)),n.contextMenuGroupId){const s={command:{id:n.id,title:n.label},when:e,group:n.contextMenuGroupId,order:n.contextMenuOrder||0};i.add(Yn.appendMenuItem(we.EditorContext,s))}if(Array.isArray(n.keybindings)){const s=We.get(Ft);if(!(s instanceof xy))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const o=X.and(e,X.deserialize(n.keybindingContext));i.add(s.addDynamicKeybindings(n.keybindings.map(r=>({keybinding:r,command:n.id,when:o}))))}}return i}function C9e(n){return Xfe([n])}function Xfe(n){const e=We.get(Ft);return e instanceof xy?e.addDynamicKeybindings(n.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:X.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),U.None)}function y9e(n,e,t){const i=We.get(Di),s=i.getLanguageIdByMimeType(e)||e;return Qfe(We.get(gi),i,n,s,t)}function S9e(n,e){const t=We.get(Di),i=t.getLanguageIdByMimeType(e)||e||_o;n.setLanguage(t.createById(i))}function x9e(n,e,t){n&&We.get(uu).changeOne(e,n.uri,t)}function k9e(n){We.get(uu).changeAll(n,[])}function L9e(n){return We.get(uu).read(n)}function D9e(n){return We.get(uu).onMarkerChanged(n)}function E9e(n){return We.get(gi).getModel(n)}function N9e(){return We.get(gi).getModels()}function I9e(n){return We.get(gi).onModelAdded(n)}function T9e(n){return We.get(gi).onModelRemoved(n)}function P9e(n){return We.get(gi).onModelLanguageChanged(t=>{n({model:t.model,oldLanguage:t.oldLanguageId})})}function M9e(n){return bWe(We.get(gi),n)}function R9e(n,e){const t=We.get(Di),i=We.get(wa);return JU.colorizeElement(i,t,n,e).then(()=>{i.registerEditorContainer(n)})}function A9e(n,e,t){const i=We.get(Di);return We.get(wa).registerEditorContainer(Gt.document.body),JU.colorize(i,n,e,t)}function O9e(n,e,t=4){return We.get(wa).registerEditorContainer(Gt.document.body),JU.colorizeModelLine(n,e,t)}function F9e(n){const e=Hi.get(n);return e||{getInitialState:()=>py,tokenize:(t,i,s)=>lU(n,s)}}function W9e(n,e){Hi.getOrCreate(e);const t=F9e(e),i=ru(n),s=[];let o=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r],c=t.tokenize(l,!0,o);s[r]=c.tokens,o=c.endState}return s}function B9e(n,e){We.get(wa).defineTheme(n,e)}function H9e(n){We.get(wa).setTheme(n)}function j9e(){SB.clearAllFontInfos()}function V9e(n,e){return bt.registerCommand({id:n,handler:e})}function z9e(n){return We.get(Xo).registerOpener({async open(t){return typeof t=="string"&&(t=Le.parse(t)),n.open(t)}})}function U9e(n){return We.get(kt).registerCodeEditorOpenHandler(async(t,i,s)=>{var a;if(!i)return null;const o=(a=t.options)==null?void 0:a.selection;let r;return o&&typeof o.endLineNumber=="number"&&typeof o.endColumn=="number"?r=o:o&&(r={lineNumber:o.startLineNumber,column:o.startColumn}),await n.openCodeEditor(i,t.resource,r)?i:null})}function $9e(){return{create:h9e,getEditors:m9e,getDiffEditors:p9e,onDidCreateEditor:f9e,onDidCreateDiffEditor:g9e,createDiffEditor:_9e,addCommand:v9e,addEditorAction:w9e,addKeybindingRule:C9e,addKeybindingRules:Xfe,createModel:y9e,setModelLanguage:S9e,setModelMarkers:x9e,getModelMarkers:L9e,removeAllMarkers:k9e,onDidChangeMarkers:D9e,getModels:N9e,getModel:E9e,onDidCreateModel:I9e,onWillDisposeModel:T9e,onDidChangeModelLanguage:P9e,createWebWorker:M9e,colorizeElement:R9e,colorize:A9e,colorizeModelLine:O9e,tokenize:W9e,defineTheme:B9e,setTheme:H9e,remeasureFonts:j9e,registerCommand:V9e,registerLinkOpener:z9e,registerEditorOpener:U9e,AccessibilitySupport:bW,ContentWidgetPositionPreference:xW,CursorChangeReason:kW,DefaultEndOfLine:LW,EditorAutoIndentStrategy:EW,EditorOption:NW,EndOfLinePreference:IW,EndOfLineSequence:TW,MinimapPosition:VW,MinimapSectionHeaderStyle:zW,MouseTargetType:UW,OverlayWidgetPositionPreference:KW,OverviewRulerLane:GW,GlyphMarginLane:PW,RenderLineNumbersType:QW,RenderMinimap:XW,ScrollbarVisibility:eB,ScrollType:JW,TextEditorCursorBlinkingStyle:rB,TextEditorCursorStyle:aB,TrackedRangeStickiness:lB,WrappingIndent:cB,InjectedTextCursorStops:AW,PositionAffinity:ZW,ShowLightbulbIconMode:iB,ConfigurationChangedEvent:jle,BareFontInfo:Vp,FontInfo:yB,TextModelResolvedOptions:kN,FindMatch:Ux,ApplyUpdateResult:iS,EditorZoom:Ma,createMultiFileDiffEditor:b9e,EditorType:XL,EditorOptions:zc}}function q9e(n,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!n(t))return!1;return!0}function NE(n,e){return typeof n=="boolean"?n:e}function mte(n,e){return typeof n=="string"?n:e}function K9e(n){const e={};for(const t of n)e[t]=!0;return e}function pte(n,e=!1){e&&(n=n.map(function(i){return i.toLowerCase()}));const t=K9e(n);return e?function(i){return t[i.toLowerCase()]!==void 0&&t.hasOwnProperty(i.toLowerCase())}:function(i){return t[i]!==void 0&&t.hasOwnProperty(i)}}function F8(n,e,t){e=e.replace(/@@/g,"");let i=0,s;do s=!1,e=e.replace(/@(\w+)/g,function(r,a){s=!0;let l="";if(typeof n[a]=="string")l=n[a];else if(n[a]&&n[a]instanceof RegExp)l=n[a].source;else throw n[a]===void 0?_i(n,"language definition does not contain attribute '"+a+"', used at: "+e):_i(n,"attribute reference '"+a+"' must be a string, used at: "+e);return cp(l)?"":"(?:"+l+")"}),i++;while(s&&i<5);e=e.replace(/\x01/g,"@");const o=(n.ignoreCase?"i":"")+(n.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(FWe(n,e,c),o)),l)}return new RegExp(e,o)}function G9e(n,e,t,i){if(i<0)return n;if(i<e.length)return e[i];if(i>=100){i=i-100;const s=t.split(".");if(s.unshift(t),i<s.length)return s[i]}return null}function Y9e(n,e,t,i){let s=-1,o=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(s=parseInt(r[3]),r[2]&&(s=s+100)),o=r[4]);let a="~",l=o;!o||o.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=pte(l.split("|"),n.ignoreCase);c=function(u){return a==="~"?d(u):!d(u)}}else if(a==="@"||a==="!@"){const d=n[l];if(!d)throw _i(n,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!q9e(function(h){return typeof h=="string"},d))throw _i(n,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const u=pte(d,n.ignoreCase);c=function(h){return a==="@"?u(h):!u(h)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=F8(n,"^"+l+"$",!1);c=function(u){return a==="~"?d.test(u):!d.test(u)}}else c=function(d,u,h,f){return F8(n,"^"+Ef(n,l,u,h,f)+"$",!1).test(d)};else if(l.indexOf("$")<0){const d=ph(n,l);c=function(u){return a==="=="?u===d:u!==d}}else{const d=ph(n,l);c=function(u,h,f,g,m){const _=Ef(n,d,h,f,g);return a==="=="?u===_:u!==_}}return s===-1?{name:t,value:i,test:function(d,u,h,f){return c(d,d,u,h,f)}}:{name:t,value:i,test:function(d,u,h,f){const g=G9e(d,u,h,s);return c(g||"",d,u,h,f)}}}function W8(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw _i(n,"a 'token' attribute must be of type string, in rule: "+e);{const i={token:t.token};if(t.token.indexOf("$")>=0&&(i.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")i.bracket=1;else if(t.bracket==="@close")i.bracket=-1;else throw _i(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw _i(n,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!WWe(n,Ef(n,s,"",[],""))))throw _i(n,"the next state '"+t.next+"' is not defined in rule: "+e);i.next=s}}return typeof t.goBack=="number"&&(i.goBack=t.goBack),typeof t.switchTo=="string"&&(i.switchTo=t.switchTo),typeof t.log=="string"&&(i.log=t.log),typeof t.nextEmbedded=="string"&&(i.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),i}}else if(Array.isArray(t)){const i=[];for(let s=0,o=t.length;s<o;s++)i[s]=W8(n,e,t[s]);return{group:i}}else if(t.cases){const i=[];for(const o in t.cases)if(t.cases.hasOwnProperty(o)){const r=W8(n,e,t.cases[o]);o==="@default"||o==="@"||o===""?i.push({test:void 0,value:r,name:o}):o==="@eos"?i.push({test:function(a,l,c,d){return d},value:r,name:o}):i.push(Y9e(n,e,o,r))}const s=n.defaultToken;return{test:function(o,r,a,l){for(const c of i)if(!c.test||c.test(o,r,a,l))return c.value;return s}}}else throw _i(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class Z9e{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let i;if(typeof t=="string")i=t;else if(t instanceof RegExp)i=t.source;else throw _i(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=F8(e,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)}setAction(e,t){this.action=W8(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function Jfe(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:n,includeLF:NE(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:NE(e.ignoreCase,!1),unicode:NE(e.unicode,!1),tokenPostfix:mte(e.tokenPostfix,"."+n),defaultToken:mte(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},i=e;i.languageId=n,i.includeLF=t.includeLF,i.ignoreCase=t.ignoreCase,i.unicode=t.unicode,i.noThrow=t.noThrow,i.usesEmbedded=t.usesEmbedded,i.stateNames=e.tokenizer,i.defaultToken=t.defaultToken;function s(r,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw _i(t,"an 'include' attribute must be a string at: "+r);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw _i(t,"include target '"+d+"' is not defined at: "+r);s(r+"."+d,a,e.tokenizer[d])}else{const u=new Z9e(r);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(u.setRegex(i,c[0]),c.length>=3)if(typeof c[1]=="string")u.setAction(i,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const h=c[1];h.next=c[2],u.setAction(i,h)}else throw _i(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else u.setAction(i,c[1]);else{if(!c.regex)throw _i(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);c.name&&typeof c.name=="string"&&(u.name=c.name),c.matchOnlyAtStart&&(u.matchOnlyAtLineStart=NE(c.matchOnlyAtLineStart,!1)),u.setRegex(i,c.regex),u.setAction(i,c.action)}a.push(u)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw _i(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,s("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=i.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw _i(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const o=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw _i(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:ph(t,a.open),close:ph(t,a.close)});else throw _i(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}function Q9e(n){ay.registerLanguage(n)}function X9e(){let n=[];return n=n.concat(ay.getLanguages()),n}function J9e(n){return We.get(Di).languageIdCodec.encodeLanguageId(n)}function e7e(n,e){return We.withServices(()=>{const i=We.get(Di).onDidRequestRichLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function t7e(n,e){return We.withServices(()=>{const i=We.get(Di).onDidRequestBasicLanguageFeatures(s=>{s===n&&(i.dispose(),e())});return i})}function i7e(n,e){if(!We.get(Di).isRegisteredLanguageId(n))throw new Error(`Cannot set configuration for unknown language ${n}`);return We.get(Ri).register(n,e,100)}class n7e{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,i){if(typeof this._actual.tokenize=="function")return Ak.adaptTokenize(this._languageId,this._actual,e,i);throw new Error("Not supported!")}tokenizeEncoded(e,t,i){const s=this._actual.tokenizeEncoded(e,i);return new tA(s.tokens,s.endState)}}class Ak{constructor(e,t,i,s){this._languageId=e,this._actual=t,this._languageService=i,this._standaloneThemeService=s}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const i=[];let s=0;for(let o=0,r=e.length;o<r;o++){const a=e[o];let l=a.startIndex;o===0?l=0:l<s&&(l=s),i[o]=new Ax(l,a.scopes,t),s=l}return i}static adaptTokenize(e,t,i,s){const o=t.tokenize(i,s),r=Ak._toClassicTokens(o.tokens,e);let a;return o.endState.equals(s)?a=s:a=o.endState,new az(r,a)}tokenize(e,t,i){return Ak.adaptTokenize(this._languageId,this._actual,e,i)}_toBinaryTokens(e,t){const i=e.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme,o=[];let r=0,a=0;for(let c=0,d=t.length;c<d;c++){const u=t[c],h=s.match(i,u.scopes)|1024;if(r>0&&o[r-1]===h)continue;let f=u.startIndex;c===0?f=0:f<a&&(f=a),o[r++]=f,o[r++]=h,a=f}const l=new Uint32Array(r);for(let c=0;c<r;c++)l[c]=o[c];return l}tokenizeEncoded(e,t,i){const s=this._actual.tokenize(e,i),o=this._toBinaryTokens(this._languageService.languageIdCodec,s.tokens);let r;return s.endState.equals(i)?r=i:r=s.endState,new tA(o,r)}}function s7e(n){return typeof n.getInitialState=="function"}function o7e(n){return"tokenizeEncoded"in n}function ege(n){return n&&typeof n.then=="function"}function r7e(n){const e=We.get(wa);if(n){const t=[null];for(let i=1,s=n.length;i<s;i++)t[i]=te.fromHex(n[i]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function tge(n,e){return o7e(e)?new n7e(n,e):new Ak(n,e,We.get(Di),We.get(wa))}function M$(n,e){const t=new OLe(async()=>{const i=await Promise.resolve(e.create());return i?s7e(i)?tge(n,i):new Sk(We.get(Di),We.get(wa),n,Jfe(n,i),We.get(nt)):null});return Hi.registerFactory(n,t)}function a7e(n,e){if(!We.get(Di).isRegisteredLanguageId(n))throw new Error(`Cannot set tokens provider for unknown language ${n}`);return ege(e)?M$(n,{create:()=>e}):Hi.register(n,tge(n,e))}function l7e(n,e){const t=i=>new Sk(We.get(Di),We.get(wa),n,Jfe(n,i),We.get(nt));return ege(e)?M$(n,{create:()=>e}):Hi.register(n,t(e))}function c7e(n,e){return We.get(ve).referenceProvider.register(n,e)}function d7e(n,e){return We.get(ve).renameProvider.register(n,e)}function u7e(n,e){return We.get(ve).newSymbolNamesProvider.register(n,e)}function h7e(n,e){return We.get(ve).signatureHelpProvider.register(n,e)}function f7e(n,e){return We.get(ve).hoverProvider.register(n,{provideHover:async(i,s,o,r)=>{const a=i.getWordAtPosition(s);return Promise.resolve(e.provideHover(i,s,o,r)).then(l=>{if(l)return!l.range&&a&&(l.range=new E(s.lineNumber,a.startColumn,s.lineNumber,a.endColumn)),l.range||(l.range=new E(s.lineNumber,s.column,s.lineNumber,s.column)),l})}})}function g7e(n,e){return We.get(ve).documentSymbolProvider.register(n,e)}function m7e(n,e){return We.get(ve).documentHighlightProvider.register(n,e)}function p7e(n,e){return We.get(ve).linkedEditingRangeProvider.register(n,e)}function _7e(n,e){return We.get(ve).definitionProvider.register(n,e)}function b7e(n,e){return We.get(ve).implementationProvider.register(n,e)}function v7e(n,e){return We.get(ve).typeDefinitionProvider.register(n,e)}function w7e(n,e){return We.get(ve).codeLensProvider.register(n,e)}function C7e(n,e,t){return We.get(ve).codeActionProvider.register(n,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(s,o,r,a)=>{const c=We.get(uu).read({resource:s.uri}).filter(d=>E.areIntersectingOrTouching(d,o));return e.provideCodeActions(s,o,{markers:c,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function y7e(n,e){return We.get(ve).documentFormattingEditProvider.register(n,e)}function S7e(n,e){return We.get(ve).documentRangeFormattingEditProvider.register(n,e)}function x7e(n,e){return We.get(ve).onTypeFormattingEditProvider.register(n,e)}function k7e(n,e){return We.get(ve).linkProvider.register(n,e)}function L7e(n,e){return We.get(ve).completionProvider.register(n,e)}function D7e(n,e){return We.get(ve).colorProvider.register(n,e)}function E7e(n,e){return We.get(ve).foldingRangeProvider.register(n,e)}function N7e(n,e){return We.get(ve).declarationProvider.register(n,e)}function I7e(n,e){return We.get(ve).selectionRangeProvider.register(n,e)}function T7e(n,e){return We.get(ve).documentSemanticTokensProvider.register(n,e)}function P7e(n,e){return We.get(ve).documentRangeSemanticTokensProvider.register(n,e)}function M7e(n,e){return We.get(ve).inlineCompletionsProvider.register(n,e)}function R7e(n,e){return We.get(ve).inlineEditProvider.register(n,e)}function A7e(n,e){return We.get(ve).inlayHintsProvider.register(n,e)}function O7e(){return{register:Q9e,getLanguages:X9e,onLanguage:e7e,onLanguageEncountered:t7e,getEncodedLanguageId:J9e,setLanguageConfiguration:i7e,setColorMap:r7e,registerTokensProviderFactory:M$,setTokensProvider:a7e,setMonarchTokensProvider:l7e,registerReferenceProvider:c7e,registerRenameProvider:d7e,registerNewSymbolNameProvider:u7e,registerCompletionItemProvider:L7e,registerSignatureHelpProvider:h7e,registerHoverProvider:f7e,registerDocumentSymbolProvider:g7e,registerDocumentHighlightProvider:m7e,registerLinkedEditingRangeProvider:p7e,registerDefinitionProvider:_7e,registerImplementationProvider:b7e,registerTypeDefinitionProvider:v7e,registerCodeLensProvider:w7e,registerCodeActionProvider:C7e,registerDocumentFormattingEditProvider:y7e,registerDocumentRangeFormattingEditProvider:S7e,registerOnTypeFormattingEditProvider:x7e,registerLinkProvider:k7e,registerColorProvider:D7e,registerFoldingRangeProvider:E7e,registerDeclarationProvider:N7e,registerSelectionRangeProvider:I7e,registerDocumentSemanticTokensProvider:T7e,registerDocumentRangeSemanticTokensProvider:P7e,registerInlineCompletionsProvider:M7e,registerInlineEditProvider:R7e,registerInlayHintsProvider:A7e,DocumentHighlightKind:DW,CompletionItemKind:CW,CompletionItemTag:yW,CompletionItemInsertTextRule:wW,SymbolKind:sB,SymbolTag:oB,IndentAction:RW,CompletionTriggerKind:SW,SignatureHelpTriggerKind:nB,InlayHintKind:OW,InlineCompletionTriggerKind:FW,InlineEditTriggerKind:WW,CodeActionTriggerType:vW,NewSymbolNameTag:$W,NewSymbolNameTriggerKind:qW,PartialAcceptTriggerKind:YW,HoverVerbosityAction:MW,FoldingRangeKind:Ug,SelectedSuggestionInfo:nce}}const R$=dt("IEditorCancelService"),ige=new me("cancellableOperation",!1,p("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));mt(R$,class{constructor(){this._tokens=new WeakMap}add(n,e){let t=this._tokens.get(n);t||(t=n.invokeWithinContext(s=>{const o=ige.bindTo(s.get(Ae)),r=new co;return{key:o,tokens:r}}),this._tokens.set(n,t));let i;return t.key.set(!0),i=t.tokens.push(e),()=>{i&&(i(),t.key.set(!t.tokens.isEmpty()),i=void 0)}}cancel(n){const e=this._tokens.get(n);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);class F7e extends Pi{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(i=>i.get(R$).add(e,this))}dispose(){this._unregister(),super.dispose()}}fe(new class extends xn{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:ige})}runEditorCommand(n,e){n.get(R$).cancel(e)}});let nge=class B8{constructor(e,t){if(this.flags=t,this.flags&1){const i=e.getModel();this.modelVersionId=i?ab("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof B8))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new B8(e,this.flags))}};class nm extends F7e{constructor(e,t,i,s){super(e,s),this._listener=new Q,t&4&&this._listener.add(e.onDidChangeCursorPosition(o=>{(!i||!E.containsPosition(i,o.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(o=>{(!i||!E.containsRange(i,o.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(o=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(o=>this.cancel())),this._listener.add(e.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class A$ extends Pi{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}function nu(n){return n&&typeof n.getEditorType=="function"?n.getEditorType()===XL.ICodeEditor:!1}function O$(n){return n&&typeof n.getEditorType=="function"?n.getEditorType()===XL.IDiffEditor:!1}function W7e(n){return!!n&&typeof n=="object"&&typeof n.onDidChangeActiveEditor=="function"}function sge(n){return nu(n)?n:O$(n)?n.getModifiedEditor():W7e(n)&&nu(n.activeCodeEditor)?n.activeCodeEditor:null}class Ey{static _handleEolEdits(e,t){let i;const s=[];for(const o of t)typeof o.eol=="number"&&(i=o.eol),o.range&&typeof o.text=="string"&&s.push(o);return typeof i=="number"&&e.hasModel()&&e.getModel().pushEOL(i),s}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),s=i.validateRange(t.range);return i.getFullModelRange().equalsRange(s)}static execute(e,t,i){i&&e.pushUndoStop();const s=Vc.capture(e),o=Ey._handleEolEdits(e,t);o.length===1&&Ey._isFullModelReplaceEdit(e,o[0])?e.executeEdits("formatEditsCommand",o.map(r=>Ii.replace(E.lift(r.range),r.text))):e.executeEdits("formatEditsCommand",o.map(r=>Ii.replaceMove(E.lift(r.range),r.text))),i&&e.pushUndoStop(),s.restoreRelativeVerticalPositionOfCursor(e)}}class _te{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class B7e{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(_te.toKey(e))}has(e){return this._set.has(_te.toKey(e))}}function oge(n,e,t){const i=[],s=new B7e,o=n.ordered(t);for(const a of o)i.push(a),a.extensionId&&s.add(a.extensionId);const r=e.ordered(t);for(const a of r){if(a.extensionId){if(s.has(a.extensionId))continue;s.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return i}const tx=class tx{static setFormatterSelector(e){return{dispose:tx._selectors.unshift(e)}}static async select(e,t,i,s){if(e.length===0)return;const o=_t.first(tx._selectors);if(o)return await o(e,t,i,s)}};tx._selectors=new co;let Ok=tx;async function rge(n,e,t,i,s,o,r){const a=n.get(ke),{documentRangeFormattingEditProvider:l}=n.get(ve),c=nu(e)?e.getModel():e,d=l.ordered(c),u=await Ok.select(d,c,i,2);u&&(s.report(u),await a.invokeFunction(H7e,u,e,t,o,r))}async function H7e(n,e,t,i,s,o){var b,v;const r=n.get(Jo),a=n.get(ws),l=n.get(vm);let c,d;nu(t)?(c=t.getModel(),d=new nm(t,5,void 0,s)):(c=t,d=new A$(t,s));const u=[];let h=0;for(const w of ZV(i).sort(E.compareRangesUsingStarts))h>0&&E.areIntersectingOrTouching(u[h-1],w)?u[h-1]=E.fromPositions(u[h-1].getStartPosition(),w.getEndPosition()):h=u.push(w);const f=async w=>{var S,x;a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(S=e.extensionId)==null?void 0:S.value,w);const y=await e.provideDocumentRangeFormattingEdits(c,w,c.getFormattingOptions(),d.token)||[];return a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(x=e.extensionId)==null?void 0:x.value,y),y},g=(w,y)=>{if(!w.length||!y.length)return!1;const S=w.reduce((x,k)=>E.plusRange(x,k.range),w[0].range);if(!y.some(x=>E.intersectRanges(S,x.range)))return!1;for(const x of w)for(const k of y)if(E.intersectRanges(x.range,k.range))return!0;return!1},m=[],_=[];try{if(typeof e.provideDocumentRangesFormattingEdits=="function"){a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(b=e.extensionId)==null?void 0:b.value,u);const w=await e.provideDocumentRangesFormattingEdits(c,u,c.getFormattingOptions(),d.token)||[];a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(v=e.extensionId)==null?void 0:v.value,w),_.push(w)}else{for(const w of u){if(d.token.isCancellationRequested)return!0;_.push(await f(w))}for(let w=0;w<u.length;++w)for(let y=w+1;y<u.length;++y){if(d.token.isCancellationRequested)return!0;if(g(_[w],_[y])){const S=E.plusRange(u[w],u[y]),x=await f(S);u.splice(y,1),u.splice(w,1),u.push(S),_.splice(y,1),_.splice(w,1),_.push(x),w=0,y=0}}}for(const w of _){if(d.token.isCancellationRequested)return!0;const y=await r.computeMoreMinimalEdits(c.uri,w);y&&m.push(...y)}}finally{d.dispose()}if(m.length===0)return!1;if(nu(t))Ey.execute(t,m,!0),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:w}]=m,y=new Ce(w.startLineNumber,w.startColumn,w.endLineNumber,w.endColumn);c.pushEditOperations([y],m.map(S=>({text:S.text,range:E.lift(S.range),forceMoveMarkers:!0})),S=>{for(const{range:x}of S)if(E.areIntersectingOrTouching(x,y))return[new Ce(x.startLineNumber,x.startColumn,x.endLineNumber,x.endColumn)];return null})}return l.playSignal(Kr.format,{userGesture:o}),!0}async function j7e(n,e,t,i,s,o){const r=n.get(ke),a=n.get(ve),l=nu(e)?e.getModel():e,c=oge(a.documentFormattingEditProvider,a.documentRangeFormattingEditProvider,l),d=await Ok.select(c,l,t,1);d&&(i.report(d),await r.invokeFunction(V7e,d,e,t,s,o))}async function V7e(n,e,t,i,s,o){const r=n.get(Jo),a=n.get(vm);let l,c;nu(t)?(l=t.getModel(),c=new nm(t,5,void 0,s)):(l=t,c=new A$(t,s));let d;try{const u=await e.provideDocumentFormattingEdits(l,l.getFormattingOptions(),c.token);if(d=await r.computeMoreMinimalEdits(l.uri,u),c.token.isCancellationRequested)return!0}finally{c.dispose()}if(!d||d.length===0)return!1;if(nu(t))Ey.execute(t,d,i!==2),i!==2&&t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:u}]=d,h=new Ce(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn);l.pushEditOperations([h],d.map(f=>({text:f.text,range:E.lift(f.range),forceMoveMarkers:!0})),f=>{for(const{range:g}of f)if(E.areIntersectingOrTouching(g,h))return[new Ce(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn)];return null})}return a.playSignal(Kr.format,{userGesture:o}),!0}async function z7e(n,e,t,i,s,o){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,i,s,o)).catch(en);if(Ys(l))return await n.computeMoreMinimalEdits(t.uri,l)}}async function U7e(n,e,t,i,s){const o=oge(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of o){const a=await Promise.resolve(r.provideDocumentFormattingEdits(t,i,s)).catch(en);if(Ys(a))return await n.computeMoreMinimalEdits(t.uri,a)}}function age(n,e,t,i,s,o,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(s)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,i,s,o,r)).catch(en).then(l=>n.computeMoreMinimalEdits(t.uri,l))}bt.registerCommand("_executeFormatRangeProvider",async function(n,...e){const[t,i,s]=e;xt(Le.isUri(t)),xt(E.isIRange(i));const o=n.get(Zo),r=n.get(Jo),a=n.get(ve),l=await o.createModelReference(t);try{return z7e(r,a,l.object.textEditorModel,E.lift(i),s,Ye.None)}finally{l.dispose()}});bt.registerCommand("_executeFormatDocumentProvider",async function(n,...e){const[t,i]=e;xt(Le.isUri(t));const s=n.get(Zo),o=n.get(Jo),r=n.get(ve),a=await s.createModelReference(t);try{return U7e(o,r,a.object.textEditorModel,i,Ye.None)}finally{a.dispose()}});bt.registerCommand("_executeFormatOnTypeProvider",async function(n,...e){const[t,i,s,o]=e;xt(Le.isUri(t)),xt(H.isIPosition(i)),xt(typeof s=="string");const r=n.get(Zo),a=n.get(Jo),l=n.get(ve),c=await r.createModelReference(t);try{return age(a,l,c.object.textEditorModel,H.lift(i),s,o,Ye.None)}finally{c.dispose()}});zc.wrappingIndent.defaultValue=0;zc.glyphMargin.defaultValue=!1;zc.autoIndent.defaultValue=3;zc.overviewRulerLanes.defaultValue=2;Ok.setFormatterSelector((n,e,t)=>Promise.resolve(n[0]));const Lo=sce();Lo.editor=$9e();Lo.languages=O7e();const $7e=Lo.CancellationTokenSource,q7e=Lo.Emitter,K7e=Lo.KeyCode,G7e=Lo.KeyMod,Y7e=Lo.Position,Z7e=Lo.Range,Q7e=Lo.Selection,X7e=Lo.SelectionDirection,J7e=Lo.MarkerSeverity,e6e=Lo.MarkerTag,t6e=Lo.Uri,i6e=Lo.Token,KN=Lo.editor,n6e=Lo.languages,e5=globalThis.MonacoEnvironment;(e5!=null&&e5.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=Lo);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const iD=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:$7e,Emitter:q7e,KeyCode:K7e,KeyMod:G7e,MarkerSeverity:J7e,MarkerTag:e6e,Position:Y7e,Range:Z7e,Selection:Q7e,SelectionDirection:X7e,Token:i6e,Uri:t6e,editor:KN,languages:n6e},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var s6e=Object.defineProperty,o6e=Object.getOwnPropertyDescriptor,r6e=Object.getOwnPropertyNames,a6e=Object.prototype.hasOwnProperty,l6e=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of r6e(e))!a6e.call(n,s)&&s!==t&&s6e(n,s,{get:()=>e[s],enumerable:!(i=o6e(e,s))||i.enumerable});return n},c6e=(n,e,t)=>(l6e(n,e,"default"),t),M0={};c6e(M0,iD);var lge={},t5={},d6e=class cge{static getOrCreate(e){return t5[e]||(t5[e]=new cge(e)),t5[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,i)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=i})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,lge[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function Pe(n){const e=n.id;lge[e]=n,M0.languages.register(n);const t=d6e.getOrCreate(e);M0.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),M0.languages.onLanguageEncountered(e,async()=>{const i=await t.load();M0.languages.setLanguageConfiguration(e,i.conf)})}Pe({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>De(()=>import("./abap-BrgZPUOV.js"),[])});Pe({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>De(()=>import("./apex-DyP6w7ZV.js"),[])});Pe({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>De(()=>import("./azcli-BaLxmfj-.js"),[])});Pe({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>De(()=>import("./bat-CFOPXBzS.js"),[])});Pe({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>De(()=>import("./bicep-BfEKNvv3.js"),[])});Pe({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>De(()=>import("./cameligo-BFG1Mk7z.js"),[])});Pe({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>De(()=>import("./clojure-DTECt2xU.js"),[])});Pe({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>De(()=>import("./coffee-CDGzqUPQ.js"),[])});Pe({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>De(()=>import("./cpp-CLLBncYj.js"),[])});Pe({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>De(()=>import("./cpp-CLLBncYj.js"),[])});Pe({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>De(()=>import("./csharp-dUCx_-0o.js"),[])});Pe({id:"csp",extensions:[".csp"],aliases:["CSP","csp"],loader:()=>De(()=>import("./csp-5Rap-vPy.js"),[])});Pe({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>De(()=>import("./css-D3h14YRZ.js"),[])});Pe({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>De(()=>import("./cypher-DrQuvNYM.js"),[])});Pe({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>De(()=>import("./dart-CFKIUWau.js"),[])});Pe({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>De(()=>import("./dockerfile-Zznr-cwX.js"),[])});Pe({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>De(()=>import("./ecl-Ce3n6wWz.js"),[])});Pe({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>De(()=>import("./elixir-deUWdS0T.js"),[])});Pe({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>De(()=>import("./flow9-i9-g7ZhI.js"),[])});Pe({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>De(()=>import("./fsharp-CzKuDChf.js"),[])});Pe({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>De(()=>import("./freemarker2-Cm2S-HNW.js"),[]).then(n=>n.TagAutoInterpolationDollar)});Pe({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>De(()=>import("./freemarker2-Cm2S-HNW.js"),[]).then(n=>n.TagAngleInterpolationDollar)});Pe({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>De(()=>import("./freemarker2-Cm2S-HNW.js"),[]).then(n=>n.TagBracketInterpolationDollar)});Pe({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>De(()=>import("./freemarker2-Cm2S-HNW.js"),[]).then(n=>n.TagAngleInterpolationBracket)});Pe({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>De(()=>import("./freemarker2-Cm2S-HNW.js"),[]).then(n=>n.TagBracketInterpolationBracket)});Pe({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>De(()=>import("./freemarker2-Cm2S-HNW.js"),[]).then(n=>n.TagAutoInterpolationDollar)});Pe({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>De(()=>import("./freemarker2-Cm2S-HNW.js"),[]).then(n=>n.TagAutoInterpolationBracket)});Pe({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>De(()=>import("./go-Cphgjts3.js"),[])});Pe({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>De(()=>import("./graphql-Cg7bfA9N.js"),[])});Pe({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>De(()=>import("./handlebars-CRmqWCxO.js"),[])});Pe({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>De(()=>import("./hcl-0cvrggvQ.js"),[])});Pe({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>De(()=>import("./html-D9hom7mx.js"),[])});Pe({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>De(()=>import("./ini-Drc7WvVn.js"),[])});Pe({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>De(()=>import("./java-B_fMsGYe.js"),[])});Pe({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>De(()=>import("./javascript-DoynfNsg.js"),__vite__mapDeps([0,1]))});Pe({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>De(()=>import("./julia-Bqgm2twL.js"),[])});Pe({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>De(()=>import("./kotlin-BSkB5QuD.js"),[])});Pe({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>De(()=>import("./less-BsTHnhdd.js"),[])});Pe({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>De(()=>import("./lexon-YWi4-JPR.js"),[])});Pe({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>De(()=>import("./lua-nf6ki56Z.js"),[])});Pe({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>De(()=>import("./liquid-AgV5DRB8.js"),[])});Pe({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>De(()=>import("./m3-Cpb6xl2v.js"),[])});Pe({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>De(()=>import("./markdown-DSZPf7rp.js"),[])});Pe({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>De(()=>import("./mdx-CGd4OFt1.js"),[])});Pe({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>De(()=>import("./mips-B_c3zf-v.js"),[])});Pe({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>De(()=>import("./msdax-rUNN04Wq.js"),[])});Pe({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>De(()=>import("./mysql-DDwshQtU.js"),[])});Pe({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>De(()=>import("./objective-c-B5zXfXm9.js"),[])});Pe({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>De(()=>import("./pascal-CXOwvkN_.js"),[])});Pe({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>De(()=>import("./pascaligo-Bc-ZgV77.js"),[])});Pe({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>De(()=>import("./perl-CwNk8-XU.js"),[])});Pe({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>De(()=>import("./pgsql-tGk8EFnU.js"),[])});Pe({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>De(()=>import("./php-CpIb_Oan.js"),[])});Pe({id:"pla",extensions:[".pla"],loader:()=>De(()=>import("./pla-B03wrqEc.js"),[])});Pe({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>De(()=>import("./postiats-BKlk5iyT.js"),[])});Pe({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>De(()=>import("./powerquery-Bhzvs7bI.js"),[])});Pe({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>De(()=>import("./powershell-Dd3NCNK9.js"),[])});Pe({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>De(()=>import("./protobuf-COyEY5Pt.js"),[])});Pe({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>De(()=>import("./pug-BaJupSGV.js"),[])});Pe({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>De(()=>import("./python-bypC9rDF.js"),[])});Pe({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>De(()=>import("./qsharp-DXyYeYxl.js"),[])});Pe({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>De(()=>import("./r-CdQndTaG.js"),[])});Pe({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>De(()=>import("./razor-CxlG1g_J.js"),[])});Pe({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>De(()=>import("./redis-CVwtpugi.js"),[])});Pe({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>De(()=>import("./redshift-25W9uPmb.js"),[])});Pe({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>De(()=>import("./restructuredtext-DfzH4Xui.js"),[])});Pe({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>De(()=>import("./ruby-Cp1zYvxS.js"),[])});Pe({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>De(()=>import("./rust-D5C2fndG.js"),[])});Pe({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>De(()=>import("./sb-CDntyWJ8.js"),[])});Pe({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>De(()=>import("./scala-BoFRg7Ot.js"),[])});Pe({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>De(()=>import("./scheme-Bio4gycK.js"),[])});Pe({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>De(()=>import("./scss-4Ik7cdeQ.js"),[])});Pe({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>De(()=>import("./shell-CX-rkNHf.js"),[])});Pe({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>De(()=>import("./solidity-Tw7wswEv.js"),[])});Pe({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>De(()=>import("./sophia-C5WLch3f.js"),[])});Pe({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>De(()=>import("./sparql-DHaeiCBh.js"),[])});Pe({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>De(()=>import("./sql-CCSDG5nI.js"),[])});Pe({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>De(()=>import("./st-pnP8ivHi.js"),[])});Pe({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>De(()=>import("./swift-DwJ7jVG9.js"),[])});Pe({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>De(()=>import("./systemverilog-B9Xyijhd.js"),[])});Pe({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>De(()=>import("./systemverilog-B9Xyijhd.js"),[])});Pe({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>De(()=>import("./tcl-DnHyzjbg.js"),[])});Pe({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>De(()=>import("./twig-CPajHgWi.js"),[])});Pe({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>De(()=>import("./typescript-BDiYt-WD.js"),[])});Pe({id:"typespec",extensions:[".tsp"],aliases:["TypeSpec"],loader:()=>De(()=>import("./typespec-D-MeaMDU.js"),[])});Pe({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>De(()=>import("./vb-DgyLZaXg.js"),[])});Pe({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>De(()=>import("./wgsl-BIv9DU6q.js"),[])});Pe({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>De(()=>import("./xml-TD11LEey.js"),[])});Pe({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>De(()=>import("./yaml-DxYu-v44.js"),[])});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var u6e=Object.defineProperty,h6e=Object.getOwnPropertyDescriptor,f6e=Object.getOwnPropertyNames,g6e=Object.prototype.hasOwnProperty,m6e=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of f6e(e))!g6e.call(n,s)&&s!==t&&u6e(n,s,{get:()=>e[s],enumerable:!(i=h6e(e,s))||i.enumerable});return n},p6e=(n,e,t)=>(m6e(n,e,"default"),t),b1={};p6e(b1,iD);var F$=class{constructor(e,t,i){this._onDidChange=new b1.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},W$={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},B$={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},dge=new F$("css",W$,B$),uge=new F$("scss",W$,B$),hge=new F$("less",W$,B$);b1.languages.css={cssDefaults:dge,lessDefaults:hge,scssDefaults:uge};function H$(){return De(()=>import("./cssMode-ABllW_3p.js"),[])}b1.languages.onLanguage("less",()=>{H$().then(n=>n.setupMode(hge))});b1.languages.onLanguage("scss",()=>{H$().then(n=>n.setupMode(uge))});b1.languages.onLanguage("css",()=>{H$().then(n=>n.setupMode(dge))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var _6e=Object.defineProperty,b6e=Object.getOwnPropertyDescriptor,v6e=Object.getOwnPropertyNames,w6e=Object.prototype.hasOwnProperty,C6e=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of v6e(e))!w6e.call(n,s)&&s!==t&&_6e(n,s,{get:()=>e[s],enumerable:!(i=b6e(e,s))||i.enumerable});return n},y6e=(n,e,t)=>(C6e(n,e,"default"),t),dO={};y6e(dO,iD);var S6e=class{constructor(e,t,i){this._onDidChange=new dO.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},x6e={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},uO={format:x6e,suggest:{},data:{useDefaultDataProvider:!0}};function hO(n){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:n===TS,documentFormattingEdits:n===TS,documentRangeFormattingEdits:n===TS}}var TS="html",bte="handlebars",vte="razor",fge=fO(TS,uO,hO(TS)),k6e=fge.defaults,gge=fO(bte,uO,hO(bte)),L6e=gge.defaults,mge=fO(vte,uO,hO(vte)),D6e=mge.defaults;dO.languages.html={htmlDefaults:k6e,razorDefaults:D6e,handlebarDefaults:L6e,htmlLanguageService:fge,handlebarLanguageService:gge,razorLanguageService:mge,registerHTMLLanguageService:fO};function E6e(){return De(()=>import("./htmlMode-CmHcjIcC.js"),[])}function fO(n,e=uO,t=hO(n)){const i=new S6e(n,e,t);let s;const o=dO.languages.onLanguage(n,async()=>{s=(await E6e()).setupMode(i)});return{defaults:i,dispose(){o.dispose(),s==null||s.dispose(),s=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var N6e=Object.defineProperty,I6e=Object.getOwnPropertyDescriptor,T6e=Object.getOwnPropertyNames,P6e=Object.prototype.hasOwnProperty,M6e=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of T6e(e))!P6e.call(n,s)&&s!==t&&N6e(n,s,{get:()=>e[s],enumerable:!(i=I6e(e,s))||i.enumerable});return n},R6e=(n,e,t)=>(M6e(n,e,"default"),t),nD={};R6e(nD,iD);var A6e=class{constructor(e,t,i){this._onDidChange=new nD.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(i)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},O6e={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},F6e={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},pge=new A6e("json",O6e,F6e),W6e=()=>_ge().then(n=>n.getWorker());nD.languages.json={jsonDefaults:pge,getWorker:W6e};function _ge(){return De(()=>import("./jsonMode-C0v_PS_Z.js"),[])}nD.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});nD.languages.onLanguage("json",()=>{_ge().then(n=>n.setupMode(pge))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.2(404545bded1df6ffa41ea0af4e8ddb219018c6c1)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var B6e=Object.defineProperty,H6e=Object.getOwnPropertyDescriptor,j6e=Object.getOwnPropertyNames,V6e=Object.prototype.hasOwnProperty,z6e=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of j6e(e))!V6e.call(n,s)&&s!==t&&B6e(n,s,{get:()=>e[s],enumerable:!(i=H6e(e,s))||i.enumerable});return n},U6e=(n,e,t)=>(z6e(n,e,"default"),t),$6e="5.4.5",Ny={};U6e(Ny,iD);var bge=(n=>(n[n.None=0]="None",n[n.CommonJS=1]="CommonJS",n[n.AMD=2]="AMD",n[n.UMD=3]="UMD",n[n.System=4]="System",n[n.ES2015=5]="ES2015",n[n.ESNext=99]="ESNext",n))(bge||{}),vge=(n=>(n[n.None=0]="None",n[n.Preserve=1]="Preserve",n[n.React=2]="React",n[n.ReactNative=3]="ReactNative",n[n.ReactJSX=4]="ReactJSX",n[n.ReactJSXDev=5]="ReactJSXDev",n))(vge||{}),wge=(n=>(n[n.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",n[n.LineFeed=1]="LineFeed",n))(wge||{}),Cge=(n=>(n[n.ES3=0]="ES3",n[n.ES5=1]="ES5",n[n.ES2015=2]="ES2015",n[n.ES2016=3]="ES2016",n[n.ES2017=4]="ES2017",n[n.ES2018=5]="ES2018",n[n.ES2019=6]="ES2019",n[n.ES2020=7]="ES2020",n[n.ESNext=99]="ESNext",n[n.JSON=100]="JSON",n[n.Latest=99]="Latest",n))(Cge||{}),yge=(n=>(n[n.Classic=1]="Classic",n[n.NodeJs=2]="NodeJs",n))(yge||{}),Sge=class{constructor(n,e,t,i,s){this._onDidChange=new Ny.Emitter,this._onDidExtraLibsChange=new Ny.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(n),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(i),this.setModeConfiguration(s),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(n,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===n)return{dispose:()=>{}};let i=1;return this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(i=this._extraLibs[t].version+1),this._extraLibs[t]={content:n,version:i},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let s=this._extraLibs[t];s&&s.version===i&&(delete this._extraLibs[t],this._removedExtraLibs[t]=i,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(n){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),n&&n.length>0)for(const e of n){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,i=e.content;let s=1;this._removedExtraLibs[t]&&(s=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:i,version:s}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(n){this._compilerOptions=n||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(n){this._diagnosticsOptions=n||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(n){this._workerOptions=n||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(n){this._inlayHintsOptions=n||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(n){}setEagerModelSync(n){this._eagerModelSync=n}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(n){this._modeConfiguration=n||Object.create(null),this._onDidChange.fire(void 0)}},q6e=$6e,xge={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},kge=new Sge({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},xge),Lge=new Sge({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},xge),K6e=()=>gO().then(n=>n.getTypeScriptWorker()),G6e=()=>gO().then(n=>n.getJavaScriptWorker());Ny.languages.typescript={ModuleKind:bge,JsxEmit:vge,NewLineKind:wge,ScriptTarget:Cge,ModuleResolutionKind:yge,typescriptVersion:q6e,typescriptDefaults:kge,javascriptDefaults:Lge,getTypeScriptWorker:K6e,getJavaScriptWorker:G6e};function gO(){return De(()=>import("./tsMode--vomLwL1.js"),[])}Ny.languages.onLanguage("typescript",()=>gO().then(n=>n.setupTypeScript(kge)));Ny.languages.onLanguage("javascript",()=>gO().then(n=>n.setupJavaScript(Lge)));class Y6e extends xo{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:Fe("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:ae.map,toggled:X.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:X.has("isInDiffEditor"),menu:{when:X.has("isInDiffEditor"),id:we.EditorTitle,order:22,group:"navigation"}})}run(e,...t){const i=e.get(nt),s=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",s)}}class Dge extends xo{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:Fe("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:X.has("isInDiffEditor")})}run(e,...t){const i=e.get(nt),s=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",s)}}class Ege extends xo{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:Fe("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:X.has("isInDiffEditor")})}run(e,...t){const i=e.get(nt),s=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",s)}}const sD=Fe("diffEditor","Diff Editor");class Z6e extends Uc{constructor(){super({id:"diffEditor.switchSide",title:Fe("switchSide","Switch Side"),icon:ae.arrowSwap,precondition:X.has("isInDiffEditor"),f1:!0,category:sD})}runEditorCommand(e,t,i){const s=v1(e);if(s instanceof Ah){if(i&&i.dryRun)return{destinationSelection:s.mapToOtherSide().destinationSelection};s.switchSide()}}}class Q6e extends Uc{constructor(){super({id:"diffEditor.exitCompareMove",title:Fe("exitCompareMove","Exit Compare Move"),icon:ae.close,precondition:I.comparingMovedCode,f1:!1,category:sD,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...i){const s=v1(e);s instanceof Ah&&s.exitCompareMove()}}class X6e extends Uc{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:Fe("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:ae.fold,precondition:X.has("isInDiffEditor"),f1:!0,category:sD})}runEditorCommand(e,t,...i){const s=v1(e);s instanceof Ah&&s.collapseAllUnchangedRegions()}}class J6e extends Uc{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:Fe("showAllUnchangedRegions","Show All Unchanged Regions"),icon:ae.unfold,precondition:X.has("isInDiffEditor"),f1:!0,category:sD})}runEditorCommand(e,t,...i){const s=v1(e);s instanceof Ah&&s.showAllUnchangedRegions()}}class H8 extends xo{constructor(){super({id:"diffEditor.revert",title:Fe("revert","Revert"),f1:!1,category:sD})}run(e,t){const i=eVe(e,t.originalUri,t.modifiedUri);i instanceof Ah&&i.revertRangeMappings(t.mapping.innerChanges??[])}}const Nge=Fe("accessibleDiffViewer","Accessible Diff Viewer"),T2=class T2 extends xo{constructor(){super({id:T2.id,title:Fe("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:Nge,precondition:X.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const t=v1(e);t==null||t.accessibleDiffViewerNext()}};T2.id="editor.action.accessibleDiffViewer.next";let Fk=T2;const P2=class P2 extends xo{constructor(){super({id:P2.id,title:Fe("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:Nge,precondition:X.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const t=v1(e);t==null||t.accessibleDiffViewerPrev()}};P2.id="editor.action.accessibleDiffViewer.prev";let WP=P2;function eVe(n,e,t){return n.get(kt).listDiffEditors().find(o=>{var l,c;const r=o.getModifiedEditor(),a=o.getOriginalEditor();return r&&((l=r.getModel())==null?void 0:l.uri.toString())===t.toString()&&a&&((c=a.getModel())==null?void 0:c.uri.toString())===e.toString()})||null}function v1(n){const t=n.get(kt).listDiffEditors(),i=_s();if(i)for(const s of t){const o=s.getContainerDomNode();if(tVe(o,i))return s}return null}function tVe(n,e){let t=e;for(;t;){if(t===n)return!0;t=t.parentElement}return!1}ni(Y6e);ni(Dge);ni(Ege);Yn.appendMenuItem(we.EditorTitle,{command:{id:new Ege().desc.id,title:p("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:X.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:X.has("isInDiffEditor")},order:11,group:"1_diff",when:X.and(I.diffEditorRenderSideBySideInlineBreakpointReached,X.has("isInDiffEditor"))});Yn.appendMenuItem(we.EditorTitle,{command:{id:new Dge().desc.id,title:p("showMoves","Show Moved Code Blocks"),icon:ae.move,toggled:t1.create("config.diffEditor.experimental.showMoves",!0),precondition:X.has("isInDiffEditor")},order:10,group:"1_diff",when:X.has("isInDiffEditor")});ni(H8);for(const n of[{icon:ae.arrowRight,key:I.diffEditorInlineMode.toNegated()},{icon:ae.discard,key:I.diffEditorInlineMode}])Yn.appendMenuItem(we.DiffEditorHunkToolbar,{command:{id:new H8().desc.id,title:p("revertHunk","Revert Block"),icon:n.icon},when:X.and(I.diffEditorModifiedWritable,n.key),order:5,group:"primary"}),Yn.appendMenuItem(we.DiffEditorSelectionToolbar,{command:{id:new H8().desc.id,title:p("revertSelection","Revert Selection"),icon:n.icon},when:X.and(I.diffEditorModifiedWritable,n.key),order:5,group:"primary"});ni(Z6e);ni(Q6e);ni(X6e);ni(J6e);Yn.appendMenuItem(we.EditorTitle,{command:{id:Fk.id,title:p("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:X.has("isInDiffEditor")},order:10,group:"2_diff",when:X.and(I.accessibleDiffViewerVisible.negate(),X.has("isInDiffEditor"))});bt.registerCommandAlias("editor.action.diffReview.next",Fk.id);ni(Fk);bt.registerCommandAlias("editor.action.diffReview.prev",WP.id);ni(WP);var iVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nVe=function(n,e){return function(t,i){e(t,i,n)}},j8;const mO=new me("selectionAnchorSet",!1);var c_;let sm=(c_=class{static get(e){return e.getContribution(j8.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=mO.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(Ce.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Ds().appendText(p("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),yo(p("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(Ce.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},j8=c_,c_.ID="editor.contrib.selectionAnchorController",c_);sm=j8=iVe([nVe(1,Ae)],sm);class sVe extends _e{constructor(){super({id:"editor.action.setSelectionAnchor",label:p("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2080),weight:100}})}async run(e,t){var i;(i=sm.get(t))==null||i.setSelectionAnchor()}}class oVe extends _e{constructor(){super({id:"editor.action.goToSelectionAnchor",label:p("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:mO})}async run(e,t){var i;(i=sm.get(t))==null||i.goToSelectionAnchor()}}class rVe extends _e{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:p("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:mO,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2089),weight:100}})}async run(e,t){var i;(i=sm.get(t))==null||i.selectFromAnchorToCursor()}}class aVe extends _e{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:p("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:mO,kbOpts:{kbExpr:I.editorTextFocus,primary:9,weight:100}})}async run(e,t){var i;(i=sm.get(t))==null||i.cancelSelectionAnchor()}}wt(sm.ID,sm,4);se(sVe);se(oVe);se(rVe);se(aVe);const lVe=T("editorOverviewRuler.bracketMatchForeground","#A0A0A0",p("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class cVe extends _e{constructor(){super({id:"editor.action.jumpToBracket",label:p("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:3165,weight:100}})}run(e,t){var i;(i=yb.get(t))==null||i.jumpToBracket()}}class dVe extends _e{constructor(){super({id:"editor.action.selectToBracket",label:p("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:Fe("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var o;let s=!0;i&&i.selectBrackets===!1&&(s=!1),(o=yb.get(t))==null||o.selectToBracket(s)}}class uVe extends _e{constructor(){super({id:"editor.action.removeBrackets",label:p("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:2561,weight:100}})}run(e,t){var i;(i=yb.get(t))==null||i.removeBrackets(this.id)}}class hVe{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}const Cf=class Cf extends U{static get(e){return e.getContribution(Cf.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new $t(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(i=>{const s=i.getStartPosition(),o=e.bracketPairs.matchBracket(s);let r=null;if(o)o[0].containsPosition(s)&&!o[1].containsPosition(s)?r=o[1].getStartPosition():o[1].containsPosition(s)&&(r=o[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(s);if(a)r=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(s);l&&l.range&&(r=l.range.getStartPosition())}}return r?new Ce(r.lineNumber,r.column,r.lineNumber,r.column):new Ce(s.lineNumber,s.column,s.lineNumber,s.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach(s=>{const o=s.getStartPosition();let r=t.bracketPairs.matchBracket(o);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(o),!r)){const c=t.bracketPairs.findNextBracket(o);c&&c.range&&(r=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(E.compareRangesUsingStarts);const[c,d]=r;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(o)){const u=a;a=l,l=u}}a&&l&&i.push(new Ce(a.lineNumber,a.column,l.lineNumber,l.column))}),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(i=>{const s=i.getPosition();let o=t.bracketPairs.matchBracket(s);o||(o=t.bracketPairs.findEnclosingBrackets(s)),o&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:o[0],text:""},{range:o[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const s=i.brackets;s&&(e[t++]={range:s[0],options:i.options},e[t++]={range:s[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),i=t.getVersionId();let s=[];this._lastVersionId===i&&(s=this._lastBracketsData);const o=[];let r=0;for(let u=0,h=e.length;u<h;u++){const f=e[u];f.isEmpty()&&(o[r++]=f.getStartPosition())}o.length>1&&o.sort(H.compare);const a=[];let l=0,c=0;const d=s.length;for(let u=0,h=o.length;u<h;u++){const f=o[u];for(;c<d&&s[c].position.isBefore(f);)c++;if(c<d&&s[c].position.equals(f))a[l++]=s[c];else{let g=t.bracketPairs.matchBracket(f,20),m=Cf._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.bracketPairs.findEnclosingBrackets(f,20),m=Cf._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new hVe(f,g,m)}}this._lastBracketsData=a,this._lastVersionId=i}};Cf.ID="editor.contrib.bracketMatchingController",Cf._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=ze.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:ji(lVe),position:aa.Center}}),Cf._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=ze.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});let yb=Cf;wt(yb.ID,yb,1);se(dVe);se(cVe);se(uVe);Yn.appendMenuItem(we.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:p({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class fVe{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,s=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&s===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(i)))if(this._isMovingLeft){const r=new E(i,s-1,i,s),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new E(i,o,i,o),a)}else{const r=new E(i,o,i,o+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new E(i,s,i,s),a)}}computeCursorState(e,t){return this._isMovingLeft?new Ce(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new Ce(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class Ige extends _e{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const i=[],s=t.getSelections();for(const o of s)i.push(new fVe(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class gVe extends Ige{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:p("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:I.writable})}}class mVe extends Ige{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:p("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:I.writable})}}se(gVe);se(mVe);class pVe extends _e{constructor(){super({id:"editor.action.transposeLetters",label:p("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=[],o=t.getSelections();for(const r of o){if(!r.isEmpty())continue;const a=r.startLineNumber,l=r.startColumn,c=i.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const d=l===c?r.getPosition():Bt.rightPosition(i,r.getPosition().lineNumber,r.getPosition().column),u=Bt.leftPosition(i,d),h=Bt.leftPosition(i,u),f=i.getValueInRange(E.fromPositions(h,u)),g=i.getValueInRange(E.fromPositions(u,d)),m=E.fromPositions(h,d);s.push(new ps(m,g+f))}s.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop())}}se(pVe);const pO=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let n;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?n=crypto.getRandomValues.bind(crypto):n=function(i){for(let s=0;s<i.length;s++)i[s]=Math.floor(Math.random()*256);return i};const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){n(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let s=0,o="";return o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+="-",o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o+=t[e[s++]],o}}();function j$(n){return{asString:async()=>n,asFile:()=>{},value:typeof n=="string"?n:void 0}}function _Ve(n,e,t){const i={id:pO(),name:n,uri:e,data:t};return{asString:async()=>"",asFile:()=>i,value:void 0}}class Tge{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return _t.some(this,([i,s])=>s.asFile())&&t.push("files"),Mge(BP(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))==null?void 0:t[0]}append(e,t){const i=this._entries.get(e);i?i.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const i of t)yield[e,i]}toKey(e){return BP(e)}}function BP(n){return n.toLowerCase()}function Pge(n,e){return Mge(BP(n),e.map(BP))}function Mge(n,e){if(n==="*/*")return e.length>0;if(e.includes(n))return!0;const t=n.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[i,s,o]=t;return o==="*"?e.some(r=>r.startsWith(s+"/")):!1}const _O=Object.freeze({create:n=>Lh(n.map(e=>e.toString())).join(`\r
`),split:n=>n.split(`\r
`),parse:n=>_O.split(n).filter(e=>!e.startsWith("#"))}),md=class md{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+md.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new md((this.value?[this.value,...e]:e).join(md.sep))}};md.sep=".",md.None=new md("@@none@@"),md.Empty=new md("");let ki=md;const wte={EDITORS:"CodeEditors",FILES:"CodeFiles"};class bVe{}const vVe={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Mi.add(vVe.DragAndDropContribution,new bVe);const ix=class ix{constructor(){}static getInstance(){return ix.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}};ix.INSTANCE=new ix;let V8=ix;function Rge(n){const e=new Tge;for(const t of n.items){const i=t.type;if(t.kind==="string"){const s=new Promise(o=>t.getAsString(o));e.append(i,j$(s))}else if(t.kind==="file"){const s=t.getAsFile();s&&e.append(i,wVe(s))}}return e}function wVe(n){const e=n.path?Le.parse(n.path):void 0;return _Ve(n.name,e,async()=>new Uint8Array(await n.arrayBuffer()))}const CVe=Object.freeze([wte.EDITORS,wte.FILES,ck.RESOURCES,ck.INTERNAL_URI_LIST]);function Age(n,e=!1){const t=Rge(n),i=t.get(ck.INTERNAL_URI_LIST);if(i)t.replace(Zi.uriList,i);else if(e||!t.has(Zi.uriList)){const s=[];for(const o of n.items){const r=o.getAsFile();if(r){const a=r.path;try{a?s.push(Le.file(a).toString()):s.push(Le.parse(r.name,!0).toString())}catch{}}}s.length&&t.replace(Zi.uriList,j$(_O.create(s)))}for(const s of CVe)t.delete(s);return t}var V$=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Wk=function(n,e){return function(t,i){e(t,i,n)}};class z${async provideDocumentPasteEdits(e,t,i,s,o){const r=await this.getEdit(i,o);if(r)return{edits:[{insertText:r.insertText,title:r.title,kind:r.kind,handledMimeType:r.handledMimeType,yieldTo:r.yieldTo}],dispose(){}}}async provideDocumentDropEdits(e,t,i,s){const o=await this.getEdit(i,s);if(o)return{edits:[{insertText:o.insertText,title:o.title,kind:o.kind,handledMimeType:o.handledMimeType,yieldTo:o.yieldTo}],dispose(){}}}}const nx=class nx extends z${constructor(){super(...arguments),this.kind=nx.kind,this.dropMimeTypes=[Zi.text],this.pasteMimeTypes=[Zi.text]}async getEdit(e,t){const i=e.get(Zi.text);if(!i||e.has(Zi.uriList))return;const s=await i.asString();return{handledMimeType:Zi.text,title:p("text.label","Insert Plain Text"),insertText:s,kind:this.kind}}};nx.id="text",nx.kind=new ki("text.plain");let Sb=nx;class Oge extends z${constructor(){super(...arguments),this.kind=new ki("uri.absolute"),this.dropMimeTypes=[Zi.uriList],this.pasteMimeTypes=[Zi.uriList]}async getEdit(e,t){const i=await Fge(e);if(!i.length||t.isCancellationRequested)return;let s=0;const o=i.map(({uri:a,originalText:l})=>a.scheme===je.file?a.fsPath:(s++,l)).join(" ");let r;return s>0?r=i.length>1?p("defaultDropProvider.uriList.uris","Insert Uris"):p("defaultDropProvider.uriList.uri","Insert Uri"):r=i.length>1?p("defaultDropProvider.uriList.paths","Insert Paths"):p("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:Zi.uriList,insertText:o,title:r,kind:this.kind}}}let HP=class extends z${constructor(e){super(),this._workspaceContextService=e,this.kind=new ki("uri.relative"),this.dropMimeTypes=[Zi.uriList],this.pasteMimeTypes=[Zi.uriList]}async getEdit(e,t){const i=await Fge(e);if(!i.length||t.isCancellationRequested)return;const s=Tl(i.map(({uri:o})=>{const r=this._workspaceContextService.getWorkspaceFolder(o);return r?L2e(r.uri,o):void 0}));if(s.length)return{handledMimeType:Zi.uriList,insertText:s.join(" "),title:i.length>1?p("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):p("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}}};HP=V$([Wk(0,pb)],HP);class yVe{constructor(){this.kind=new ki("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:Zi.text}]}async provideDocumentPasteEdits(e,t,i,s,o){var l;if(s.triggerKind!==Fx.PasteAs&&!((l=s.only)!=null&&l.contains(this.kind)))return;const r=i.get("text/html"),a=await(r==null?void 0:r.asString());if(!(!a||o.isCancellationRequested))return{dispose(){},edits:[{insertText:a,yieldTo:this._yieldTo,title:p("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}}}async function Fge(n){const e=n.get(Zi.uriList);if(!e)return[];const t=await e.asString(),i=[];for(const s of _O.parse(t))try{i.push({uri:Le.parse(s),originalText:s})}catch{}return i}let z8=class extends U{constructor(e,t){super(),this._register(e.documentDropEditProvider.register("*",new Sb)),this._register(e.documentDropEditProvider.register("*",new Oge)),this._register(e.documentDropEditProvider.register("*",new HP(t)))}};z8=V$([Wk(0,ve),Wk(1,pb)],z8);let U8=class extends U{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new Sb)),this._register(e.documentPasteEditProvider.register("*",new Oge)),this._register(e.documentPasteEditProvider.register("*",new HP(t))),this._register(e.documentPasteEditProvider.register("*",new yVe))}};U8=V$([Wk(0,ve),Wk(1,pb)],U8);const dl=class dl{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,i=this.value.charCodeAt(e),s;if(s=dl._table[i],typeof s=="number")return this.pos+=1,{type:s,pos:e,len:1};if(dl.isDigitCharacter(i)){s=8;do t+=1,i=this.value.charCodeAt(e+t);while(dl.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}if(dl.isVariableCharacter(i)){s=9;do i=this.value.charCodeAt(e+ ++t);while(dl.isVariableCharacter(i)||dl.isDigitCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}s=10;do t+=1,i=this.value.charCodeAt(e+t);while(!isNaN(i)&&typeof dl._table[i]>"u"&&!dl.isDigitCharacter(i)&&!dl.isVariableCharacter(i));return this.pos+=t,{type:s,pos:e,len:t}}};dl._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};let $8=dl;class w1{constructor(){this._children=[]}appendChild(e){return e instanceof lo&&this._children[this._children.length-1]instanceof lo?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,s=i.children.indexOf(e),o=i.children.slice(0);o.splice(s,1,...t),i._children=o,function r(a,l){for(const c of a)c.parent=l,r(c.children,c)}(t,i)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof oD)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class lo extends w1{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new lo(this.value)}}class Wge extends w1{}class Pa extends Wge{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof C1?this._children[0]:void 0}clone(){const e=new Pa(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class C1 extends w1{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof lo&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new C1;return this.options.forEach(e.appendChild,e),e}}class U$ extends w1{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,s=e.replace(this.regexp,function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(o=>o instanceof cc&&!!o.elseValue)&&(s=this._replace([])),s}_replace(e){let t="";for(const i of this._children)if(i instanceof cc){let s=e[i.index]||"";s=i.resolve(s),t+=s}else t+=i.toString();return t}toString(){return""}clone(){const e=new U$;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class cc extends w1{constructor(e,t,i,s){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=s}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(i=>i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((i,s)=>s===0?i.charAt(0).toLowerCase()+i.substr(1):i.charAt(0).toUpperCase()+i.substr(1)).join(""):e}clone(){return new cc(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class Bk extends Wge{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new lo(t)],!0):!1}clone(){const e=new Bk(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function Cte(n,e){const t=[...n];for(;t.length>0;){const i=t.shift();if(!e(i))break;t.unshift(...i.children)}}class oD extends w1{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(i){return i instanceof Pa&&(e.push(i),t=!t||t.index<i.index?i:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk(s=>s===e?(i=!0,!1):(t+=s.len(),!0)),i?t:-1}fullLen(e){let t=0;return Cte([e],i=>(t+=i.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:i}=e;for(;i;)i instanceof Pa&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof Bk&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new oD;return this._children=this.children.map(t=>t.clone()),e}walk(e){Cte(this.children,e)}}class xb{constructor(){this._scanner=new $8,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){const s=new oD;return this.parseFragment(e,s),this.ensureFinalTabstop(s,i??!1,t??!1),s}parseFragment(e,t){const i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const s=new Map,o=[];t.walk(l=>(l instanceof Pa&&(l.isFinalTabstop?s.set(0,void 0):!s.has(l.index)&&l.children.length>0?s.set(l.index,l.children):o.push(l)),!0));const r=(l,c)=>{const d=s.get(l.index);if(!d)return;const u=new Pa(l.index);u.transform=l.transform;for(const h of d){const f=h.clone();u.appendChild(f),f instanceof Pa&&s.has(f.index)&&!c.has(f.index)&&(c.add(f.index),r(f,c),c.delete(f.index))}t.replace(l,[u])},a=new Set;for(const l of o)r(l,a);return t.children.slice(i)}ensureFinalTabstop(e,t,i){(t||i&&e.placeholders.length>0)&&(e.placeholders.find(o=>o.index===0)||e.appendChild(new Pa(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const i=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),i}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const s=this._scanner.next();if(s.type!==0&&s.type!==4&&s.type!==5)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new lo(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Pa(Number(t)):new Bk(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const o=new Pa(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new lo("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){const r=new C1;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(r),this._accept(4)))return e.appendChild(o),!0}return this._backTo(i),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseChoiceElement(e){const t=this._token,i=[];for(;!(this._token.type===2||this._token.type===7);){let s;if((s=this._accept(5,!0))?s=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||s:s=this._accept(void 0,!0),!s)return this._backTo(t),!1;i.push(s)}return i.length===0?(this._backTo(t),!1):(e.appendChild(new lo(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const o=new Bk(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new lo("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(i)}_parseTransform(e){const t=new U$;let i="",s="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,i+=o;continue}if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new lo(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){s+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(i,s)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);const s=this._accept(8,!0);if(s)if(i){if(this._accept(4))return e.appendChild(new cc(Number(s))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new cc(Number(s))),!0;else return this._backTo(t),!1;if(this._accept(6)){const o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new cc(Number(s),o)),!0)}else if(this._accept(11)){const o=this._until(4);if(o)return e.appendChild(new cc(Number(s),void 0,o,void 0)),!0}else if(this._accept(12)){const o=this._until(4);if(o)return e.appendChild(new cc(Number(s),void 0,void 0,o)),!0}else if(this._accept(13)){const o=this._until(1);if(o){const r=this._until(4);if(r)return e.appendChild(new cc(Number(s),void 0,o,r)),!0}}else{const o=this._until(4);if(o)return e.appendChild(new cc(Number(s),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new lo(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}function Bge(n,e,t){var i,s;return(typeof t.insertText=="string"?t.insertText==="":t.insertText.snippet==="")?{edits:((i=t.additionalEdit)==null?void 0:i.edits)??[]}:{edits:[...e.map(o=>new mg(n,{range:o,text:typeof t.insertText=="string"?xb.escape(t.insertText)+"$0":t.insertText.snippet,insertAsSnippet:!0})),...((s=t.additionalEdit)==null?void 0:s.edits)??[]]}}function Hge(n){function e(r,a){return"mimeType"in r?r.mimeType===a.handledMimeType:!!a.kind&&r.kind.contains(a.kind)}const t=new Map;for(const r of n)for(const a of r.yieldTo??[])for(const l of n)if(l!==r&&e(a,l)){let c=t.get(r);c||(c=[],t.set(r,c)),c.push(l)}if(!t.size)return Array.from(n);const i=new Set,s=[];function o(r){if(!r.length)return[];const a=r[0];if(s.includes(a))return console.warn("Yield to cycle detected",a),r;if(i.has(a))return o(r.slice(1));let l=[];const c=t.get(a);return c&&(s.push(a),l=o(c),s.pop()),i.add(a),[...l,a,...o(r.slice(1))]}return o(Array.from(n))}var SVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},xVe=function(n,e){return function(t,i){e(t,i,n)}};const kVe=ze.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:fce,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}}),M2=class M2 extends U{constructor(e,t,i,s,o){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=o,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(s),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=ce(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=ce("span.icon");this.domNode.append(t),t.classList.add(...Re.asClassNameArray(ae.loading),"codicon-modifier-spin");const i=()=>{const s=this.editor.getOption(67);this.domNode.style.height=`${s}px`,this.domNode.style.width=`${Math.ceil(.8*s)}px`};i(),this._register(this.editor.onDidChangeConfiguration(s=>{(s.hasChanged(52)||s.hasChanged(67))&&i()})),this._register(G(this.domNode,le.CLICK,s=>{this.delegate.cancel()}))}getId(){return M2.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}};M2.baseId="editor.widget.inlineProgressWidget";let q8=M2,jP=class extends U{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new jn),this._currentWidget=this._register(new jn),this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}dispose(){super.dispose(),this._currentDecorations.clear()}async showWhile(e,t,i,s,o){const r=this._operationIdPool++;this._currentOperation=r,this.clear(),this._showPromise.value=Kg(()=>{const a=E.fromPositions(e);this._currentDecorations.set([{range:a,options:kVe}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(q8,this.id,this._editor,a,t,s))},o??this._showDelay);try{return await i}finally{this._currentOperation===r&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};jP=SVe([xVe(2,ke)],jP);var LVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},yte=function(n,e){return function(t,i){e(t,i,n)}},GN,wg;let wr=(wg=class{static get(e){return e.getContribution(GN.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new jn,this._messageListeners=new Q,this._mouseOverMessage=!1,this._editor=e,this._visible=GN.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)==null||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){yo(Tc(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=Tc(e)?FA(e,{actionHandler:{callback:s=>{this.closeMessage(),cU(this._openerService,s,Tc(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new Ste(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(ue.debounce(this._editor.onDidBlurEditorText,(s,o)=>o,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&Rn(_s(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(G(this._messageWidget.value.getDomNode(),le.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(G(this._messageWidget.value.getDomNode(),le.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let i;this._messageListeners.add(this._editor.onMouseMove(s=>{s.target.position&&(i?i.containsPosition(s.target.position)||this.closeMessage():i=new E(t.lineNumber-3,1,s.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(Ste.fadeOut(this._messageWidget.value))}},GN=wg,wg.ID="editor.contrib.messageController",wg.MESSAGE_VISIBLE=new me("messageVisible",!1,p("messageVisible","Whether the editor is currently showing an inline message")),wg);wr=GN=LVe([yte(1,Ae),yte(2,Xo)],wr);const DVe=xn.bindToContribution(wr.get);fe(new DVe({id:"leaveEditorMessage",precondition:wr.MESSAGE_VISIBLE,handler:n=>n.closeMessage(),kbOpts:{weight:130,primary:9}}));let Ste=class{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:i},s){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const r=document.createElement("div");typeof s=="string"?(r.classList.add("message"),r.textContent=s):(s.classList.add("message"),r.appendChild(s)),this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};wt(wr.ID,wr,4);function i5(n,e){return e&&(n.stack||n.stacktrace)?p("stackTrace.format","{0}: {1}",kte(n),xte(n.stack)||xte(n.stacktrace)):kte(n)}function xte(n){return Array.isArray(n)?n.join(`
`):n}function kte(n){return n.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${n.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof n.code=="string"&&typeof n.errno=="number"&&typeof n.syscall=="string"?p("nodeExceptionMessage","A system error occurred ({0})",n.message):n.message||p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function VP(n=null,e=!1){if(!n)return p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(n)){const t=Tl(n),i=VP(t[0],e);return t.length>1?p("error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(Vo(n))return n;if(n.detail){const t=n.detail;if(t.error)return i5(t.error,e);if(t.exception)return i5(t.exception,e)}return n.stack?i5(n,e):n.message?n.message:p("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var jge=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},bC=function(n,e){return function(t,i){e(t,i,n)}},K8,d_;let G8=(d_=class extends U{constructor(e,t,i,s,o,r,a,l,c,d){super(),this.typeId=e,this.editor=t,this.showCommand=s,this.range=o,this.edits=r,this.onSelectNewEdit=a,this._contextMenuService=l,this._keybindingService=d,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(c),this.visibleContext.set(!0),this._register(xe(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(xe(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(u=>{o.containsPosition(u.position)||this.dispose()})),this._register(ue.runAndSubscribe(d.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var t;const e=(t=this._keybindingService.lookupKeybinding(this.showCommand.id))==null?void 0:t.getLabel();this.button.element.title=this.showCommand.label+(e?` (${e})`:"")}create(){this.domNode=ce(".post-edit-widget"),this.button=this._register(new GT(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(G(this.domNode,le.CLICK,()=>this.showSelector()))}getId(){return K8.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=Qi(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>zp({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}},K8=d_,d_.baseId="editor.widget.postEditWidget",d_);G8=K8=jge([bC(7,Er),bC(8,Ae),bC(9,Ft)],G8);let zP=class extends U{constructor(e,t,i,s,o,r,a){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=s,this._instantiationService=o,this._bulkEditService=r,this._notificationService=a,this._currentWidget=this._register(new jn),this._register(ue.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,i,s,o){const r=this._editor.getModel();if(!r||!e.length)return;const a=t.allEdits.at(t.activeEditIndex);if(!a)return;const l=async _=>{const b=this._editor.getModel();b&&(await b.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:_,allEdits:t.allEdits},i,s,o))},c=(_,b)=>{el(_)||(this._notificationService.error(b),i&&this.show(e[0],t,l))};let d;try{d=await s(a,o)}catch(_){return c(_,p("resolveError",`Error resolving edit '{0}':
{1}`,a.title,VP(_)))}if(o.isCancellationRequested)return;const u=Bge(r.uri,e,d),h=e[0],f=r.deltaDecorations([],[{range:h,options:{description:"paste-line-suffix",stickiness:0}}]);this._editor.focus();let g,m;try{g=await this._bulkEditService.apply(u,{editor:this._editor,token:o}),m=r.getDecorationRange(f[0])}catch(_){return c(_,p("applyError",`Error applying edit '{0}':
{1}`,a.title,VP(_)))}finally{r.deltaDecorations(f,[])}o.isCancellationRequested||i&&g.isApplied&&t.allEdits.length>1&&this.show(m??h,t,l)}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(G8,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)==null||e.showSelector()}};zP=jge([bC(4,ke),bC(5,jL),bC(6,rn)],zP);var EVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},wv=function(n,e){return function(t,i){e(t,i,n)}},Qm;const Vge="editor.changePasteType",$$=new me("pasteWidgetVisible",!1,p("pasteWidgetVisible","Whether the paste widget is showing")),n5="application/vnd.code.copyMetadata";var u_;let Oh=(u_=class extends U{static get(e){return e.getContribution(Qm.ID)}constructor(e,t,i,s,o,r,a){super(),this._bulkEditService=i,this._clipboardService=s,this._languageFeaturesService=o,this._quickInputService=r,this._progressService=a,this._editor=e;const l=e.getContainerDomNode();this._register(G(l,"copy",c=>this.handleCopy(c))),this._register(G(l,"cut",c=>this.handleCopy(c))),this._register(G(l,"paste",c=>this.handlePaste(c),!0)),this._pasteProgressManager=this._register(new jP("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(zP,"pasteIntoEditor",e,$$,{id:Vge,label:p("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},e1().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var m,_,b,v;if(!this._editor.hasTextFocus()||((_=(m=this._clipboardService).clearInternalState)==null||_.call(m),!e.clipboardData||!this.isPasteAsEnabled()))return;const t=this._editor.getModel(),i=this._editor.getSelections();if(!t||!(i!=null&&i.length))return;const s=this._editor.getOption(37);let o=i;const r=i.length===1&&i[0].isEmpty();if(r){if(!s)return;o=[new E(o[0].startLineNumber,1,o[0].startLineNumber,1+t.getLineLength(o[0].startLineNumber))]}const a=(b=this._editor._getViewModel())==null?void 0:b.getPlainTextToCopy(i,s,vs),c={multicursorText:Array.isArray(a)?a:null,pasteOnNewLine:r,mode:null},d=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(w=>!!w.prepareDocumentPaste);if(!d.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:c});return}const u=Rge(e.clipboardData),h=d.flatMap(w=>w.copyMimeTypes??[]),f=pO();this.setCopyMetadata(e.clipboardData,{id:f,providerCopyMimeTypes:h,defaultPastePayload:c});const g=On(async w=>{const y=Tl(await Promise.all(d.map(async S=>{try{return await S.prepareDocumentPaste(t,o,u,w)}catch(x){console.error(x);return}})));y.reverse();for(const S of y)for(const[x,k]of S)u.replace(x,k);return u});(v=Qm._currentCopyOperation)==null||v.dataTransferPromise.cancel(),Qm._currentCopyOperation={handle:f,dataTransferPromise:g}}async handlePaste(e){var l,c,d;if(!e.clipboardData||!this._editor.hasTextFocus())return;(l=wr.get(this._editor))==null||l.closeMessage(),(c=this._currentPasteOperation)==null||c.cancel(),this._currentPasteOperation=void 0;const t=this._editor.getModel(),i=this._editor.getSelections();if(!(i!=null&&i.length)||!t||this._editor.getOption(92)||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const s=this.fetchCopyMetadata(e),o=Age(e.clipboardData);o.delete(n5);const r=[...e.clipboardData.types,...(s==null?void 0:s.providerCopyMimeTypes)??[],Zi.uriList],a=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(u=>{var f,g;const h=(f=this._pasteAsActionContext)==null?void 0:f.preferred;return h&&u.providedPasteEditKinds&&!this.providerMatchesPreference(u,h)?!1:(g=u.pasteMimeTypes)==null?void 0:g.some(m=>Pge(m,r))});if(!a.length){(d=this._pasteAsActionContext)!=null&&d.preferred&&this.showPasteAsNoEditMessage(i,this._pasteAsActionContext.preferred);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,a,i,o,s):this.doPasteInline(a,i,o,s,e)}showPasteAsNoEditMessage(e,t){var i;(i=wr.get(this._editor))==null||i.showMessage(p("pasteAsError","No paste edits for '{0}' found",t instanceof ki?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,i,s,o){const r=this._editor;if(!r.hasModel())return;const a=new nm(r,3,void 0),l=On(async c=>{const d=this._editor;if(!d.hasModel())return;const u=d.getModel(),h=new Q,f=h.add(new Pi(c));h.add(a.token.onCancellationRequested(()=>f.cancel()));const g=f.token;try{if(await this.mergeInDataFromCopy(i,s,g),g.isCancellationRequested)return;const m=e.filter(v=>this.isSupportedPasteProvider(v,i));if(!m.length||m.length===1&&m[0]instanceof Sb)return this.applyDefaultPasteHandler(i,s,g,o);const _={triggerKind:Fx.Automatic},b=await this.getPasteEdits(m,i,u,t,_,g);if(h.add(b),g.isCancellationRequested)return;if(b.edits.length===1&&b.edits[0].provider instanceof Sb)return this.applyDefaultPasteHandler(i,s,g,o);if(b.edits.length){const v=d.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:b.edits},v,(w,y)=>new Promise((S,x)=>{(async()=>{var k,D;try{const N=(D=(k=w.provider).resolveDocumentPasteEdit)==null?void 0:D.call(k,w,y),R=new Jy,O=N&&await this._pasteProgressManager.showWhile(t[0].getEndPosition(),p("resolveProcess","Resolving paste edit. Click to cancel"),Promise.race([R.p,N]),{cancel:()=>(R.cancel(),x(new Pl))},0);return O&&(w.additionalEdit=O.additionalEdit),S(w)}catch(N){return x(N)}})()}),g)}await this.applyDefaultPasteHandler(i,s,g,o)}finally{h.dispose(),this._currentPasteOperation===l&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),p("pasteIntoEditorProgress","Running paste handlers. Click to cancel and do basic paste"),l,{cancel:async()=>{try{if(l.cancel(),a.token.isCancellationRequested)return;await this.applyDefaultPasteHandler(i,s,a.token,o)}finally{a.dispose()}}}).then(()=>{a.dispose()}),this._currentPasteOperation=l}showPasteAsPick(e,t,i,s,o){const r=On(async a=>{const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),d=new Q,u=d.add(new nm(l,3,void 0,a));try{if(await this.mergeInDataFromCopy(s,o,u.token),u.token.isCancellationRequested)return;let h=t.filter(b=>this.isSupportedPasteProvider(b,s,e));e&&(h=h.filter(b=>this.providerMatchesPreference(b,e)));const f={triggerKind:Fx.PasteAs,only:e&&e instanceof ki?e:void 0};let g=d.add(await this.getPasteEdits(h,s,c,i,f,u.token));if(u.token.isCancellationRequested)return;if(e&&(g={edits:g.edits.filter(b=>e instanceof ki?e.contains(b.kind):e.providerId===b.provider.id),dispose:g.dispose}),!g.edits.length){f.only&&this.showPasteAsNoEditMessage(i,f.only);return}let m;if(e)m=g.edits.at(0);else{const b=await this._quickInputService.pick(g.edits.map(v=>{var w;return{label:v.title,description:(w=v.kind)==null?void 0:w.value,edit:v}}),{placeHolder:p("pasteAsPickerPlaceholder","Select Paste Action")});m=b==null?void 0:b.edit}if(!m)return;const _=Bge(c.uri,i,m);await this._bulkEditService.apply(_,{editor:this._editor})}finally{d.dispose(),this._currentPasteOperation===r&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:p("pasteAsProgress","Running paste handlers")},()=>r)}setCopyMetadata(e,t){e.setData(n5,JSON.stringify(t))}fetchCopyMetadata(e){if(!e.clipboardData)return;const t=e.clipboardData.getData(n5);if(t)try{return JSON.parse(t)}catch{return}const[i,s]=t8.getTextData(e.clipboardData);if(s)return{defaultPastePayload:{mode:s.mode,multicursorText:s.multicursorText??null,pasteOnNewLine:!!s.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,i){var s;if(t!=null&&t.id&&((s=Qm._currentCopyOperation)==null?void 0:s.handle)===t.id){const o=await Qm._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(const[r,a]of o)e.replace(r,a)}if(!e.has(Zi.uriList)){const o=await this._clipboardService.readResources();if(i.isCancellationRequested)return;o.length&&e.append(Zi.uriList,j$(_O.create(o)))}}async getPasteEdits(e,t,i,s,o,r){const a=new Q,l=await ML(Promise.all(e.map(async d=>{var u,h;try{const f=await((u=d.provideDocumentPasteEdits)==null?void 0:u.call(d,i,s,t,o,r));return f&&a.add(f),(h=f==null?void 0:f.edits)==null?void 0:h.map(g=>({...g,provider:d}))}catch(f){el(f)||console.error(f);return}})),r),c=Tl(l??[]).flat().filter(d=>!o.only||o.only.contains(d.kind));return{edits:Hge(c),dispose:()=>a.dispose()}}async applyDefaultPasteHandler(e,t,i,s){const o=e.get(Zi.text)??e.get("text"),r=await(o==null?void 0:o.asString())??"";if(i.isCancellationRequested)return;const a={clipboardEvent:s,text:r,pasteOnNewLine:(t==null?void 0:t.defaultPastePayload.pasteOnNewLine)??!1,multicursorText:(t==null?void 0:t.defaultPastePayload.multicursorText)??null,mode:null};this._editor.trigger("keyboard","paste",a)}isSupportedPasteProvider(e,t,i){var s;return(s=e.pasteMimeTypes)!=null&&s.some(o=>t.matches(o))?!i||this.providerMatchesPreference(e,i):!1}providerMatchesPreference(e,t){return t instanceof ki?e.providedPasteEditKinds?e.providedPasteEditKinds.some(i=>t.contains(i)):!0:e.id===t.providerId}},Qm=u_,u_.ID="editor.contrib.copyPasteActionController",u_);Oh=Qm=EVe([wv(1,ke),wv(2,jL),wv(3,qh),wv(4,ve),wv(5,il),wv(6,yue)],Oh);const kb="9_cutcopypaste",NVe=xc||document.queryCommandSupported("cut"),zge=xc||document.queryCommandSupported("copy"),IVe=typeof navigator.clipboard>"u"||$a?document.queryCommandSupported("paste"):!0;function q$(n){return n.register(),n}const TVe=NVe?q$(new i1({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:xc?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:we.MenubarEditMenu,group:"2_ccp",title:p({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:we.EditorContext,group:kb,title:p("actions.clipboard.cutLabel","Cut"),when:I.writable,order:1},{menuId:we.CommandPalette,group:"",title:p("actions.clipboard.cutLabel","Cut"),order:1},{menuId:we.SimpleEditorContext,group:kb,title:p("actions.clipboard.cutLabel","Cut"),when:I.writable,order:1}]})):void 0,PVe=zge?q$(new i1({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:xc?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:we.MenubarEditMenu,group:"2_ccp",title:p({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:we.EditorContext,group:kb,title:p("actions.clipboard.copyLabel","Copy"),order:2},{menuId:we.CommandPalette,group:"",title:p("actions.clipboard.copyLabel","Copy"),order:1},{menuId:we.SimpleEditorContext,group:kb,title:p("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;Yn.appendMenuItem(we.MenubarEditMenu,{submenu:we.MenubarCopy,title:Fe("copy as","Copy As"),group:"2_ccp",order:3});Yn.appendMenuItem(we.EditorContext,{submenu:we.EditorContextCopy,title:Fe("copy as","Copy As"),group:kb,order:3});Yn.appendMenuItem(we.EditorContext,{submenu:we.EditorContextShare,title:Fe("share","Share"),group:"11_share",order:-1,when:X.and(X.notEquals("resourceScheme","output"),I.editorTextFocus)});Yn.appendMenuItem(we.ExplorerContext,{submenu:we.ExplorerContextShare,title:Fe("share","Share"),group:"11_share",order:-1});const s5=IVe?q$(new i1({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:xc?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:we.MenubarEditMenu,group:"2_ccp",title:p({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:we.EditorContext,group:kb,title:p("actions.clipboard.pasteLabel","Paste"),when:I.writable,order:4},{menuId:we.CommandPalette,group:"",title:p("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:we.SimpleEditorContext,group:kb,title:p("actions.clipboard.pasteLabel","Paste"),when:I.writable,order:4}]})):void 0;class MVe extends _e{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:p("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(Jj.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),Jj.forceCopyWithSyntaxHighlighting=!1)}}function Uge(n,e){n&&(n.addImplementation(1e4,"code-editor",(t,i)=>{const s=t.get(kt).getFocusedCodeEditor();if(s&&s.hasTextFocus()){const o=s.getOption(37),r=s.getSelection();return r&&r.isEmpty()&&!o||s.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),n.addImplementation(0,"generic-dom",(t,i)=>(e1().execCommand(e),!0)))}Uge(TVe,"cut");Uge(PVe,"copy");s5&&(s5.addImplementation(1e4,"code-editor",(n,e)=>{var o;const t=n.get(kt),i=n.get(qh),s=t.getFocusedCodeEditor();return s&&s.hasTextFocus()?s.getContainerDomNode().ownerDocument.execCommand("paste")?((o=Oh.get(s))==null?void 0:o.finishedPaste())??Promise.resolve():Wb?(async()=>{const a=await i.readText();if(a!==""){const l=Lk.INSTANCE.get(a);let c=!1,d=null,u=null;l&&(c=s.getOption(37)&&!!l.isFromEmptySelection,d=typeof l.multicursorText<"u"?l.multicursorText:null,u=l.mode),s.trigger("keyboard","paste",{text:a,pasteOnNewLine:c,multicursorText:d,mode:u})}})():!0:!1}),s5.addImplementation(0,"generic-dom",(n,e)=>(e1().execCommand("paste"),!0)));zge&&se(MVe);const bi=new class{constructor(){this.QuickFix=new ki("quickfix"),this.Refactor=new ki("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new ki("notebook"),this.Source=new ki("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var kr;(function(n){n.Refactor="refactor",n.RefactorPreview="refactor preview",n.Lightbulb="lightbulb",n.Default="other (default)",n.SourceAction="source action",n.QuickFix="quick fix action",n.FixAll="fix all",n.OrganizeImports="organize imports",n.AutoFix="auto fix",n.QuickFixHover="quick fix hover window",n.OnSave="save participants",n.ProblemsView="problems view"})(kr||(kr={}));function RVe(n,e){return!(n.include&&!n.include.intersects(e)||n.excludes&&n.excludes.some(t=>$ge(e,t,n.include))||!n.includeSourceActions&&bi.Source.contains(e))}function AVe(n,e){const t=e.kind?new ki(e.kind):void 0;return!(n.include&&(!t||!n.include.contains(t))||n.excludes&&t&&n.excludes.some(i=>$ge(t,i,n.include))||!n.includeSourceActions&&t&&bi.Source.contains(t)||n.onlyIncludePreferredActions&&!e.isPreferred)}function $ge(n,e,t){return!(!e.contains(n)||t&&e.contains(t))}class Rd{static fromUser(e,t){return!e||typeof e!="object"?new Rd(t.kind,t.apply,!1):new Rd(Rd.getKindFromUser(e,t.kind),Rd.getApplyFromUser(e,t.apply),Rd.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new ki(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}}class OVe{constructor(e,t,i){this.action=e,this.provider=t,this.highlightRange=i}async resolve(e){var t;if((t=this.provider)!=null&&t.resolveCodeAction&&!this.action.edit){let i;try{i=await this.provider.resolveCodeAction(this.action,e)}catch(s){en(s)}i&&(this.action.edit=i.edit)}return this}}const qge="editor.action.codeAction",K$="editor.action.quickFix",Kge="editor.action.autoFix",Gge="editor.action.refactor",Yge="editor.action.sourceAction",Y8="editor.action.organizeImports",Z8="editor.action.fixAll";class PS extends U{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return e.isAI&&!t.isAI?1:!e.isAI&&t.isAI?-1:Ys(e.diagnostics)?Ys(t.diagnostics)?PS.codeActionsPreferredComparator(e,t):-1:Ys(t.diagnostics)?1:PS.codeActionsPreferredComparator(e,t)}constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(PS.codeActionsComparator),this.validActions=this.allActions.filter(({action:s})=>!s.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&bi.QuickFix.contains(new ki(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}}const Lte={actions:[],documentation:void 0};async function pw(n,e,t,i,s,o){var m;const r=i.filter||{},a={...r,excludes:[...r.excludes||[],bi.Notebook]},l={only:(m=r.include)==null?void 0:m.value,trigger:i.type},c=new A$(e,o),d=i.type===2,u=FVe(n,e,d?a:r),h=new Q,f=u.map(async _=>{try{s.report(_);const b=await _.provideCodeActions(e,t,l,c.token);if(b&&h.add(b),c.token.isCancellationRequested)return Lte;const v=((b==null?void 0:b.actions)||[]).filter(y=>y&&AVe(r,y)),w=BVe(_,v,r.include);return{actions:v.map(y=>new OVe(y,_)),documentation:w}}catch(b){if(el(b))throw b;return en(b),Lte}}),g=n.onDidChange(()=>{const _=n.all(e);Li(_,u)||c.cancel()});try{const _=await Promise.all(f),b=_.map(w=>w.actions).flat(),v=[...Tl(_.map(w=>w.documentation)),...WVe(n,e,i,b)];return new PS(b,v,h)}finally{g.dispose(),c.dispose()}}function FVe(n,e,t){return n.all(e).filter(i=>i.providedCodeActionKinds?i.providedCodeActionKinds.some(s=>RVe(t,new ki(s))):!0)}function*WVe(n,e,t,i){var s,o,r;if(e&&i.length)for(const a of n.all(e))a._getAdditionalMenuItems&&(yield*(r=a._getAdditionalMenuItems)==null?void 0:r.call(a,{trigger:t.type,only:(o=(s=t.filter)==null?void 0:s.include)==null?void 0:o.value},i.map(l=>l.action)))}function BVe(n,e,t){if(!n.documentation)return;const i=n.documentation.map(s=>({kind:new ki(s.kind),command:s.command}));if(t){let s;for(const o of i)o.kind.contains(t)&&(s?s.kind.contains(o.kind)&&(s=o):s=o);if(s)return s==null?void 0:s.command}for(const s of e)if(s.kind){for(const o of i)if(o.kind.contains(new ki(s.kind)))return o.command}}var Np;(function(n){n.OnSave="onSave",n.FromProblemsView="fromProblemsView",n.FromCodeActions="fromCodeActions",n.FromAILightbulb="fromAILightbulb"})(Np||(Np={}));async function HVe(n,e,t,i,s=Ye.None){var c;const o=n.get(jL),r=n.get(oi),a=n.get(Ps),l=n.get(rn);if(a.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),await e.resolve(s),!s.isCancellationRequested&&!((c=e.action.edit)!=null&&c.edits.length&&!(await o.apply(e.action.edit,{editor:i==null?void 0:i.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==Np.OnSave,showPreview:i==null?void 0:i.preview})).isApplied)&&e.action.command)try{await r.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(d){const u=jVe(d);l.error(typeof u=="string"?u:p("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}function jVe(n){return typeof n=="string"?n:n instanceof Error&&typeof n.message=="string"?n.message:void 0}bt.registerCommand("_executeCodeActionProvider",async function(n,e,t,i,s){if(!(e instanceof Le))throw ja();const{codeActionProvider:o}=n.get(ve),r=n.get(gi).getModel(e);if(!r)throw ja();const a=Ce.isISelection(t)?Ce.liftSelection(t):E.isIRange(t)?r.validateRange(t):void 0;if(!a)throw ja();const l=typeof i=="string"?new ki(i):void 0,c=await pw(o,r,a,{type:1,triggerAction:kr.Default,filter:{includeSourceActions:!0,include:l}},wc.None,Ye.None),d=[],u=Math.min(c.validActions.length,typeof s=="number"?s:0);for(let h=0;h<u;h++)d.push(c.validActions[h].resolve(Ye.None));try{return await Promise.all(d),c.validActions.map(h=>h.action)}finally{setTimeout(()=>c.dispose(),100)}});var VVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},zVe=function(n,e){return function(t,i){e(t,i,n)}},Q8,h_;let X8=(h_=class{constructor(e){this.keybindingService=e}getResolver(){const e=new Oc(()=>this.keybindingService.getKeybindings().filter(t=>Q8.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let i=t.commandArgs;return t.command===Y8?i={kind:bi.SourceOrganizeImports.value}:t.command===Z8&&(i={kind:bi.SourceFixAll.value}),{resolvedKeybinding:t.resolvedKeybinding,...Rd.fromUser(i,{kind:ki.None,apply:"never"})}}));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.value);return i==null?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new ki(e.kind);return t.filter(s=>s.kind.contains(i)).filter(s=>s.preferred?e.isPreferred:!0).reduceRight((s,o)=>s?s.kind.contains(o.kind)?o:s:o,void 0)}},Q8=h_,h_.codeActionCommands=[Gge,qge,Yge,Y8,Z8],h_);X8=Q8=VVe([zVe(0,Ft)],X8);T("symbolIcon.arrayForeground",ot,p("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.booleanForeground",ot,p("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.colorForeground",ot,p("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.constantForeground",ot,p("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},p("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.fileForeground",ot,p("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.folderForeground",ot,p("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.keyForeground",ot,p("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.keywordForeground",ot,p("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},p("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.moduleForeground",ot,p("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.namespaceForeground",ot,p("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.nullForeground",ot,p("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.numberForeground",ot,p("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.objectForeground",ot,p("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.operatorForeground",ot,p("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.packageForeground",ot,p("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.propertyForeground",ot,p("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.referenceForeground",ot,p("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.snippetForeground",ot,p("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.stringForeground",ot,p("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.structForeground",ot,p("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.textForeground",ot,p("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.typeParameterForeground",ot,p("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.unitForeground",ot,p("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},p("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const Zge=Object.freeze({kind:ki.Empty,title:p("codeAction.widget.id.more","More Actions...")}),UVe=Object.freeze([{kind:bi.QuickFix,title:p("codeAction.widget.id.quickfix","Quick Fix")},{kind:bi.RefactorExtract,title:p("codeAction.widget.id.extract","Extract"),icon:ae.wrench},{kind:bi.RefactorInline,title:p("codeAction.widget.id.inline","Inline"),icon:ae.wrench},{kind:bi.RefactorRewrite,title:p("codeAction.widget.id.convert","Rewrite"),icon:ae.wrench},{kind:bi.RefactorMove,title:p("codeAction.widget.id.move","Move"),icon:ae.wrench},{kind:bi.SurroundWith,title:p("codeAction.widget.id.surround","Surround With"),icon:ae.surroundWith},{kind:bi.Source,title:p("codeAction.widget.id.source","Source Action"),icon:ae.symbolFile},Zge]);function $Ve(n,e,t){if(!e)return n.map(o=>{var r;return{kind:"action",item:o,group:Zge,disabled:!!o.action.disabled,label:o.action.disabled||o.action.title,canPreview:!!((r=o.action.edit)!=null&&r.edits.length)}});const i=UVe.map(o=>({group:o,actions:[]}));for(const o of n){const r=o.action.kind?new ki(o.action.kind):ki.None;for(const a of i)if(a.group.kind.contains(r)){a.actions.push(o);break}}const s=[];for(const o of i)if(o.actions.length){s.push({kind:"header",group:o.group});for(const r of o.actions){const a=o.group;s.push({kind:"action",item:r,group:r.action.isAI?{title:a.title,kind:a.kind,icon:ae.sparkle}:a,label:r.action.title,disabled:!!r.action.disabled,keybinding:t(r.action)})}}return s}var qVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},KVe=function(n,e){return function(t,i){e(t,i,n)}},Av;const Dte=mi("gutter-lightbulb",ae.lightBulb,p("gutterLightbulbWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor.")),Ete=mi("gutter-lightbulb-auto-fix",ae.lightbulbAutofix,p("gutterLightbulbAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.")),Nte=mi("gutter-lightbulb-sparkle",ae.lightbulbSparkle,p("gutterLightbulbAIFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.")),Ite=mi("gutter-lightbulb-aifix-auto-fix",ae.lightbulbSparkleAutofix,p("gutterLightbulbAIFixAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.")),Tte=mi("gutter-lightbulb-sparkle-filled",ae.sparkleFilled,p("gutterLightbulbSparkleFilledWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available."));var tc;(function(n){n.Hidden={type:0};class e{constructor(i,s,o,r){this.actions=i,this.trigger=s,this.editorPosition=o,this.widgetPosition=r,this.type=1}}n.Showing=e})(tc||(tc={}));var ch;let Hk=(ch=class extends U{constructor(e,t){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new j),this.onClick=this._onClick.event,this._state=tc.Hidden,this._gutterState=tc.Hidden,this._iconClasses=[],this.lightbulbClasses=["codicon-"+Dte.id,"codicon-"+Ite.id,"codicon-"+Ete.id,"codicon-"+Nte.id,"codicon-"+Tte.id],this.gutterDecoration=Av.GUTTER_DECORATION,this._domNode=ce("div.lightBulbWidget"),this._domNode.role="listbox",this._register(Is.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(i=>{const s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide(),(this.gutterState.type!==1||!s||this.gutterState.editorPosition.lineNumber>=s.getLineCount())&&this.gutterHide()})),this._register(QDe(this._domNode,i=>{if(this.state.type!==1)return;this._editor.focus(),i.preventDefault();const{top:s,height:o}=Qi(this._domNode),r=this._editor.getOption(67);let a=Math.floor(r/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:i.posx,y:s+o+a,actions:this.state.actions,trigger:this.state.trigger})})),this._register(G(this._domNode,"mouseenter",i=>{(i.buttons&1)===1&&this.hide()})),this._register(ue.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{var i,s;this._preferredKbLabel=((i=this._keybindingService.lookupKeybinding(Kge))==null?void 0:i.getLabel())??void 0,this._quickFixKbLabel=((s=this._keybindingService.lookupKeybinding(K$))==null?void 0:s.getLabel())??void 0,this._updateLightBulbTitleAndIcon()})),this._register(this._editor.onMouseDown(async i=>{if(!i.target.element||!this.lightbulbClasses.some(l=>i.target.element&&i.target.element.classList.contains(l))||this.gutterState.type!==1)return;this._editor.focus();const{top:s,height:o}=Qi(i.target.element),r=this._editor.getOption(67);let a=Math.floor(r/3);this.gutterState.widgetPosition.position!==null&&this.gutterState.widgetPosition.position.lineNumber<this.gutterState.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:i.event.posx,y:s+o+a,actions:this.gutterState.actions,trigger:this.gutterState.trigger})}))}dispose(){super.dispose(),this._editor.removeContentWidget(this),this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,i){if(e.validActions.length<=0)return this.gutterHide(),this.hide();if(!this._editor.hasTextFocus())return this.gutterHide(),this.hide();if(!this._editor.getOptions().get(65).enabled)return this.gutterHide(),this.hide();const r=this._editor.getModel();if(!r)return this.gutterHide(),this.hide();const{lineNumber:a,column:l}=r.validatePosition(i),c=r.getOptions().tabSize,d=this._editor.getOptions().get(50),u=r.getLineContent(a),h=KA(u,c),f=d.spaceWidth*h>22,g=S=>S>2&&this._editor.getTopForLineNumber(S)===this._editor.getTopForLineNumber(S-1),m=this._editor.getLineDecorations(a);let _=!1;if(m)for(const S of m){const x=S.options.glyphMarginClassName;if(x&&!this.lightbulbClasses.some(k=>x.includes(k))){_=!0;break}}let b=a,v=1;if(!f){const S=x=>{const k=r.getLineContent(x);return/^\s*$|^\s+/.test(k)||k.length<=v};if(a>1&&!g(a-1)){const x=r.getLineCount(),k=a===x,D=a>1&&S(a-1),N=!k&&S(a+1),R=S(a),O=!N&&!D;if(!N&&!D&&!_)return this.gutterState=new tc.Showing(e,t,i,{position:{lineNumber:b,column:v},preference:Av._posPref}),this.renderGutterLightbub(),this.hide();D||k||D&&!R?b-=1:(N||O&&R)&&(b+=1)}else if(a===1&&(a===r.getLineCount()||!S(a+1)&&!S(a)))if(this.gutterState=new tc.Showing(e,t,i,{position:{lineNumber:b,column:v},preference:Av._posPref}),_)this.gutterHide();else return this.renderGutterLightbub(),this.hide();else if(a<r.getLineCount()&&!g(a+1))b+=1;else if(l*d.spaceWidth<22)return this.hide();v=/^\S\s*$/.test(r.getLineContent(b))?2:1}this.state=new tc.Showing(e,t,i,{position:{lineNumber:b,column:v},preference:Av._posPref}),this._gutterDecorationID&&(this._removeGutterDecoration(this._gutterDecorationID),this.gutterHide());const w=e.validActions,y=e.validActions[0].action.kind;if(w.length!==1||!y){this._editor.layoutContentWidget(this);return}this._editor.layoutContentWidget(this)}hide(){this.state!==tc.Hidden&&(this.state=tc.Hidden,this._editor.layoutContentWidget(this))}gutterHide(){this.gutterState!==tc.Hidden&&(this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID),this.gutterState=tc.Hidden)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}get gutterState(){return this._gutterState}set gutterState(e){this._gutterState=e,this._updateGutterLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let e,t=!1;this.state.actions.allAIFixes?(e=ae.sparkleFilled,this.state.actions.validActions.length===1&&(t=!0)):this.state.actions.hasAutoFix?this.state.actions.hasAIFix?e=ae.lightbulbSparkleAutofix:e=ae.lightbulbAutofix:this.state.actions.hasAIFix?e=ae.lightbulbSparkle:e=ae.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=Re.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateGutterLightBulbTitleAndIcon(){if(this.gutterState.type!==1)return;let e,t=!1;this.gutterState.actions.allAIFixes?(e=Tte,this.gutterState.actions.validActions.length===1&&(t=!0)):this.gutterState.actions.hasAutoFix?this.gutterState.actions.hasAIFix?e=Ite:e=Ete:this.gutterState.actions.hasAIFix?e=Nte:e=Dte,this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix,t);const i=ze.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:Re.asClassName(e),glyphMargin:{position:Rl.Left},stickiness:1});this.gutterDecoration=i}renderGutterLightbub(){const e=this._editor.getSelection();e&&(this._gutterDecorationID===void 0?this._addGutterDecoration(e.startLineNumber):this._updateGutterDecoration(this._gutterDecorationID,e.startLineNumber))}_addGutterDecoration(e){this._editor.changeDecorations(t=>{this._gutterDecorationID=t.addDecoration(new E(e,0,e,0),this.gutterDecoration)})}_removeGutterDecoration(e){this._editor.changeDecorations(t=>{t.removeDecoration(e),this._gutterDecorationID=void 0})}_updateGutterDecoration(e,t){this._editor.changeDecorations(i=>{i.changeDecoration(e,new E(t,0,t,0)),i.changeDecorationOptions(e,this.gutterDecoration)})}_updateLightbulbTitle(e,t){this.state.type===1&&(t?this.title=p("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=p("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=p("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=p("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}},Av=ch,ch.GUTTER_DECORATION=ze.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:Re.asClassName(ae.lightBulb),glyphMargin:{position:Rl.Left},stickiness:1}),ch.ID="editor.contrib.lightbulbWidget",ch._posPref=[0],ch);Hk=Av=qVe([KVe(1,Ft)],Hk);var Qge=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},J8=function(n,e){return function(t,i){e(t,i,n)}};const Xge="acceptSelectedCodeAction",Jge="previewSelectedCodeAction";class GVe{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,i){var s;i.text.textContent=((s=e.group)==null?void 0:s.title)??""}disposeTemplate(e){}}let e9=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const i=document.createElement("span");i.className="title",e.append(i);const s=new g1(e,mr);return{container:e,icon:t,text:i,keybinding:s}}renderElement(e,t,i){var r,a,l;if((r=e.group)!=null&&r.icon?(i.icon.className=Re.asClassName(e.group.icon),e.group.icon.color&&(i.icon.style.color=pe(e.group.icon.color.id))):(i.icon.className=Re.asClassName(ae.lightBulb),i.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;i.text.textContent=eme(e.label),i.keybinding.set(e.keybinding),hEe(!!e.keybinding,i.keybinding.element);const s=(a=this._keybindingService.lookupKeybinding(Xge))==null?void 0:a.getLabel(),o=(l=this._keybindingService.lookupKeybinding(Jge))==null?void 0:l.getLabel();i.container.classList.toggle("option-disabled",e.disabled),e.disabled?i.container.title=e.label:s&&o?this._supportsPreview&&e.canPreview?i.container.title=p({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to Apply, Shift+F2 to Preview"']},"{0} to Apply, {1} to Preview",s,o):i.container.title=p({key:"label",comment:['placeholder is a keybinding, e.g "F2 to Apply"']},"{0} to Apply",s):i.container.title=""}disposeTemplate(e){e.keybinding.dispose()}};e9=Qge([J8(1,Ft)],e9);class YVe extends UIEvent{constructor(){super("acceptSelectedAction")}}class Pte extends UIEvent{constructor(){super("previewSelectedAction")}}function ZVe(n){if(n.kind==="action")return n.label}let t9=class extends U{constructor(e,t,i,s,o,r){super(),this._delegate=s,this._contextViewService=o,this._keybindingService=r,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new Pi),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const a={getHeight:l=>l.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:l=>l.kind};this._list=this._register(new va(e,this.domNode,a,[new e9(t,this._keybindingService),new GVe],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:ZVe},accessibilityProvider:{getAriaLabel:l=>{if(l.kind==="action"){let c=l.label?eme(l==null?void 0:l.label):"";return l.disabled&&(c=p({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",c,l.disabled)),c}return null},getWidgetAriaLabel:()=>p({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:l=>l.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(zb),this._register(this._list.onMouseClick(l=>this.onListClick(l))),this._register(this._list.onMouseOver(l=>this.onListHover(l))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(l=>this.onListSelection(l))),this._allMenuItems=i,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(l=>l.kind==="header").length,s=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(s);let o=e;if(this._allMenuItems.length>=50)o=380;else{const l=this._allMenuItems.map((c,d)=>{const u=this.domNode.ownerDocument.getElementById(this._list.getElementID(d));if(u){u.style.width="auto";const h=u.getBoundingClientRect().width;return u.style.width="",h}return 0});o=Math.max(...l,e)}const a=Math.min(s,this.domNode.ownerDocument.body.clientHeight*.7);return this._list.layout(a,o),this.domNode.style.height=`${a}px`,this._list.domFocus(),o}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const i=t[0],s=this._list.element(i);if(!this.focusCondition(s))return;const o=e?new Pte:new YVe;this._list.setSelection([i],o)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof Pte):this._list.setSelection([])}onFocus(){var s,o;const e=this._list.getFocus();if(e.length===0)return;const t=e[0],i=this._list.element(t);(o=(s=this._delegate).onFocus)==null||o.call(s,i.item)}async onListHover(e){const t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind==="action"){const i=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=i?i.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};t9=Qge([J8(4,zh),J8(5,Ft)],t9);function eme(n){return n.replace(/\r\n|\r|\n/g," ")}var QVe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},o5=function(n,e){return function(t,i){e(t,i,n)}};T("actionBar.toggledBackground",FL,p("actionBar.toggledBackground","Background color for toggled action items in action bar."));const Lb={Visible:new me("codeActionMenuVisible",!1,p("codeActionMenuVisible","Whether the action widget list is visible"))},Zb=dt("actionWidgetService");let Db=class extends U{get isVisible(){return Lb.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,i){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=i,this._list=this._register(new jn)}show(e,t,i,s,o,r,a){const l=Lb.Visible.bindTo(this._contextKeyService),c=this._instantiationService.createInstance(t9,e,t,i,s);this._contextViewService.showContextView({getAnchor:()=>o,render:d=>(l.set(!0),this._renderWidget(d,c,a??[])),onHide:d=>{l.reset(),this._onWidgetClosed(d)}},r,!1)}acceptSelected(e){var t;(t=this._list.value)==null||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusNext()}hide(e){var t;(t=this._list.value)==null||t.hide(e),this._list.clear()}_renderWidget(e,t,i){var f;const s=document.createElement("div");if(s.classList.add("action-widget"),e.appendChild(s),this._list.value=t,this._list.value)s.appendChild(this._list.value.domNode);else throw new Error("List has no value");const o=new Q,r=document.createElement("div"),a=e.appendChild(r);a.classList.add("context-view-block"),o.add(G(a,le.MOUSE_DOWN,g=>g.stopPropagation()));const l=document.createElement("div"),c=e.appendChild(l);c.classList.add("context-view-pointerBlock"),o.add(G(c,le.POINTER_MOVE,()=>c.remove())),o.add(G(c,le.MOUSE_DOWN,()=>c.remove()));let d=0;if(i.length){const g=this._createActionBar(".action-widget-action-bar",i);g&&(s.appendChild(g.getContainer().parentElement),o.add(g),d=g.getContainer().offsetWidth)}const u=(f=this._list.value)==null?void 0:f.layout(d);s.style.width=`${u}px`;const h=o.add(Fc(e));return o.add(h.onDidBlur(()=>this.hide(!0))),o}_createActionBar(e,t){if(!t.length)return;const i=ce(e),s=new ca(i);return s.push(t,{icon:!1,label:!0}),s}_onWidgetClosed(e){var t;(t=this._list.value)==null||t.hide(e)}};Db=QVe([o5(0,zh),o5(1,Ae),o5(2,ke)],Db);mt(Zb,Db,1);const rD=1100;ni(class extends xo{constructor(){super({id:"hideCodeActionWidget",title:Fe("hideCodeActionWidget.title","Hide action widget"),precondition:Lb.Visible,keybinding:{weight:rD,primary:9,secondary:[1033]}})}run(n){n.get(Zb).hide(!0)}});ni(class extends xo{constructor(){super({id:"selectPrevCodeAction",title:Fe("selectPrevCodeAction.title","Select previous action"),precondition:Lb.Visible,keybinding:{weight:rD,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(n){const e=n.get(Zb);e instanceof Db&&e.focusPrevious()}});ni(class extends xo{constructor(){super({id:"selectNextCodeAction",title:Fe("selectNextCodeAction.title","Select next action"),precondition:Lb.Visible,keybinding:{weight:rD,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(n){const e=n.get(Zb);e instanceof Db&&e.focusNext()}});ni(class extends xo{constructor(){super({id:Xge,title:Fe("acceptSelected.title","Accept selected action"),precondition:Lb.Visible,keybinding:{weight:rD,primary:3,secondary:[2137]}})}run(n){const e=n.get(Zb);e instanceof Db&&e.acceptSelected()}});ni(class extends xo{constructor(){super({id:Jge,title:Fe("previewSelected.title","Preview selected action"),precondition:Lb.Visible,keybinding:{weight:rD,primary:2051}})}run(n){const e=n.get(Zb);e instanceof Db&&e.acceptSelected(!0)}});const tme=new me("supportedCodeAction",""),Mte="_typescript.applyFixAllCodeAction";class XVe extends U{constructor(e,t,i,s=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=s,this._autoTriggerTimer=this._register(new Bl),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(i=>ok(i,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:kr.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getSelection();if(e.type===1)return t;const i=this._editor.getOption(65).enabled;if(i!==ml.Off){{if(i===ml.On)return t;if(i===ml.OnCode){if(!t.isEmpty())return t;const o=this._editor.getModel(),{lineNumber:r,column:a}=t.getPosition(),l=o.getLineContent(r);if(l.length===0)return;if(a===1){if(/\s/.test(l[0]))return}else if(a===o.getLineMaxColumn(r)){if(/\s/.test(l[l.length-1]))return}else if(/\s/.test(l[a-2])&&/\s/.test(l[a-1]))return}}return t}}}var hp;(function(n){n.Empty={type:0};class e{constructor(i,s,o){this.trigger=i,this.position=s,this._cancellablePromise=o,this.type=1,this.actions=o.catch(r=>{if(el(r))return ime;throw r})}cancel(){this._cancellablePromise.cancel()}}n.Triggered=e})(hp||(hp={}));const ime=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class JVe extends U{constructor(e,t,i,s,o,r,a){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=o,this._configurationService=r,this._telemetryService=a,this._codeActionOracle=this._register(new jn),this._state=hp.Empty,this._onDidChangeState=this._register(new j),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=tme.bindTo(s),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(l=>{l.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(hp.Empty,!0))}_settingEnabledNearbyQuickfixes(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:e==null?void 0:e.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(hp.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(92)){const t=this._registry.all(e).flatMap(i=>i.providedCodeActionKinds??[]);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new XVe(this._editor,this._markerService,i=>{var l;if(!i){this.setState(hp.Empty);return}const s=i.selection.getStartPosition(),o=On(async c=>{var d,u,h,f,g,m,_,b,v,w;if(this._settingEnabledNearbyQuickfixes()&&i.trigger.type===1&&(i.trigger.triggerAction===kr.QuickFix||(u=(d=i.trigger.filter)==null?void 0:d.include)!=null&&u.contains(bi.QuickFix))){const y=await pw(this._registry,e,i.selection,i.trigger,wc.None,c),S=[...y.allActions];if(c.isCancellationRequested)return ime;const x=(h=y.validActions)==null?void 0:h.some(D=>D.action.kind?bi.QuickFix.contains(new ki(D.action.kind)):!1),k=this._markerService.read({resource:e.uri});if(x){for(const D of y.validActions)(g=(f=D.action.command)==null?void 0:f.arguments)!=null&&g.some(N=>typeof N=="string"&&N.includes(Mte))&&(D.action.diagnostics=[...k.filter(N=>N.relatedInformation)]);return{validActions:y.validActions,allActions:S,documentation:y.documentation,hasAutoFix:y.hasAutoFix,hasAIFix:y.hasAIFix,allAIFixes:y.allAIFixes,dispose:()=>{y.dispose()}}}else if(!x&&k.length>0){const D=i.selection.getPosition();let N=D,R=Number.MAX_VALUE;const O=[...y.validActions];for(const z of k){const F=z.endColumn,K=z.endLineNumber,Z=z.startLineNumber;if(K===D.lineNumber||Z===D.lineNumber){N=new H(K,F);const re={type:i.trigger.type,triggerAction:i.trigger.triggerAction,filter:{include:(m=i.trigger.filter)!=null&&m.include?(_=i.trigger.filter)==null?void 0:_.include:bi.QuickFix},autoApply:i.trigger.autoApply,context:{notAvailableMessage:((b=i.trigger.context)==null?void 0:b.notAvailableMessage)||"",position:N}},q=new Ce(N.lineNumber,N.column,N.lineNumber,N.column),J=await pw(this._registry,e,q,re,wc.None,c);if(J.validActions.length!==0){for(const ge of J.validActions)(w=(v=ge.action.command)==null?void 0:v.arguments)!=null&&w.some(be=>typeof be=="string"&&be.includes(Mte))&&(ge.action.diagnostics=[...k.filter(be=>be.relatedInformation)]);y.allActions.length===0&&S.push(...J.allActions),Math.abs(D.column-F)<R?O.unshift(...J.validActions):O.push(...J.validActions)}R=Math.abs(D.column-F)}}const B=O.filter((z,F,K)=>K.findIndex(Z=>Z.action.title===z.action.title)===F);return B.sort((z,F)=>z.action.isPreferred&&!F.action.isPreferred?-1:!z.action.isPreferred&&F.action.isPreferred||z.action.isAI&&!F.action.isAI?1:!z.action.isAI&&F.action.isAI?-1:0),{validActions:B,allActions:S,documentation:y.documentation,hasAutoFix:y.hasAutoFix,hasAIFix:y.hasAIFix,allAIFixes:y.allAIFixes,dispose:()=>{y.dispose()}}}}if(i.trigger.type===1){const y=new Qn,S=await pw(this._registry,e,i.selection,i.trigger,wc.None,c);return this._telemetryService&&this._telemetryService.publicLog2("codeAction.invokedDurations",{codeActions:S.validActions.length,duration:y.elapsed()}),S}return pw(this._registry,e,i.selection,i.trigger,wc.None,c)});i.trigger.type===1&&((l=this._progressService)==null||l.showWhile(o,250));const r=new hp.Triggered(i.trigger,s,o);let a=!1;this._state.type===1&&(a=this._state.trigger.type===1&&r.type===1&&r.trigger.type===2&&this._state.position!==r.position),a?setTimeout(()=>{this.setState(r)},500):this.setState(r)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:kr.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)==null||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}}var eze=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nd=function(n,e){return function(t,i){e(t,i,n)}},Ov;const tze="quickfix-edit-highlight";var Cg;let Iy=(Cg=class extends U{static get(e){return e.getContribution(Ov.ID)}constructor(e,t,i,s,o,r,a,l,c,d,u){super(),this._commandService=a,this._configurationService=l,this._actionWidgetService=c,this._instantiationService=d,this._telemetryService=u,this._activeCodeActions=this._register(new jn),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new JVe(this._editor,o.codeActionProvider,t,i,r,l,this._telemetryService)),this._register(this._model.onDidChangeState(h=>this.update(h))),this._lightBulbWidget=new Oc(()=>{const h=this._editor.getContribution(Hk.ID);return h&&this._register(h.onClick(f=>this.showCodeActionsFromLightbulb(f.actions,f))),h}),this._resolver=s.createInstance(X8),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(e.allAIFixes&&e.validActions.length===1){const i=e.validActions[0],s=i.action.command;s&&s.id==="inlineChat.start"&&s.arguments&&s.arguments.length>=1&&(s.arguments[0]={...s.arguments[0],autoSend:!1}),await this._applyCodeAction(i,!1,!1,Np.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,i){return this.showCodeActionList(t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,s){var r;if(!this._editor.hasModel())return;(r=wr.get(this._editor))==null||r.closeMessage();const o=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:s,context:{notAvailableMessage:e,position:o}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,i,s){try{await this._instantiationService.invokeFunction(HVe,e,s,{preview:i,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:kr.QuickFix,filter:{}})}}hideLightBulbWidget(){var e,t;(e=this._lightBulbWidget.rawValue)==null||e.hide(),(t=this._lightBulbWidget.rawValue)==null||t.gutterHide()}async update(e){var s,o,r,a,l;if(e.type!==1){this.hideLightBulbWidget();return}let t;try{t=await e.actions}catch(c){He(c);return}if(this._disposed)return;const i=this._editor.getSelection();if((i==null?void 0:i.startLineNumber)===e.position.lineNumber)if((s=this._lightBulbWidget.value)==null||s.update(t,e.trigger,e.position),e.trigger.type===1){if((o=e.trigger.filter)!=null&&o.include){const d=this.tryGetValidActionToApply(e.trigger,t);if(d){try{this.hideLightBulbWidget(),await this._applyCodeAction(d,!1,!1,Np.FromCodeActions)}finally{t.dispose()}return}if(e.trigger.context){const u=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,t);if(u&&u.action.disabled){(r=wr.get(this._editor))==null||r.showMessage(u.action.disabled,e.trigger.context.position),t.dispose();return}}}const c=!!((a=e.trigger.filter)!=null&&a.include);if(e.trigger.context&&(!t.allActions.length||!c&&!t.validActions.length)){(l=wr.get(this._editor))==null||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=t,t.dispose();return}this._activeCodeActions.value=t,this.showCodeActionList(t,this.toCoords(e.position),{includeDisabledActions:c,fromLightbulb:!1})}else this._actionWidgetService.isVisible?t.dispose():this._activeCodeActions.value=t}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:i})=>i.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}async showCodeActionList(e,t,i){const s=this._editor.createDecorationsCollection(),o=this._editor.getDomNode();if(!o)return;const r=i.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!r.length)return;const a=H.isIPosition(t)?this.toCoords(t):t,l={onSelect:async(c,d)=>{this._applyCodeAction(c,!0,!!d,i.fromLightbulb?Np.FromAILightbulb:Np.FromCodeActions),this._actionWidgetService.hide(!1),s.clear()},onHide:c=>{var d;(d=this._editor)==null||d.focus(),s.clear()},onHover:async(c,d)=>{var f;if(d.isCancellationRequested)return;let u=!1;const h=c.action.kind;if(h){const g=new ki(h);u=[bi.RefactorExtract,bi.RefactorInline,bi.RefactorRewrite,bi.RefactorMove,bi.Source].some(_=>_.contains(g))}return{canPreview:u||!!((f=c.action.edit)!=null&&f.edits.length)}},onFocus:c=>{var d,u;if(c&&c.action){const h=c.action.ranges,f=c.action.diagnostics;if(s.clear(),h&&h.length>0){const g=f&&(f==null?void 0:f.length)>1?f.map(m=>({range:m,options:Ov.DECORATION})):h.map(m=>({range:m,options:Ov.DECORATION}));s.set(g)}else if(f&&f.length>0){const g=f.map(_=>({range:_,options:Ov.DECORATION}));s.set(g);const m=f[0];if(m.startLineNumber&&m.startColumn){const _=(u=(d=this._editor.getModel())==null?void 0:d.getWordAtPosition({lineNumber:m.startLineNumber,column:m.startColumn}))==null?void 0:u.word;Xd(p("editingNewSelection","Context: {0} at line {1} and column {2}.",_,m.startLineNumber,m.startColumn))}}}else s.clear()}};this._actionWidgetService.show("codeActionWidget",!0,$Ve(r,this._shouldShowHeaders(),this._resolver.getResolver()),l,a,o,this._getActionBarActions(e,t,i))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=Qi(this._editor.getDomNode()),s=i.left+t.left,o=i.top+t.top+t.height;return{x:s,y:o}}_shouldShowHeaders(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:e==null?void 0:e.uri})}_getActionBarActions(e,t,i){if(i.fromLightbulb)return[];const s=e.documentation.map(o=>({id:o.id,label:o.title,tooltip:o.tooltip??"",class:void 0,enabled:!0,run:()=>this._commandService.executeCommand(o.id,...o.arguments??[])}));return i.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&s.push(this._showDisabled?{id:"hideMoreActions",label:p("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,i))}:{id:"showMoreActions",label:p("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,i))}),s}},Ov=Cg,Cg.ID="editor.contrib.codeActionController",Cg.DECORATION=ze.register({description:"quickfix-highlight",className:tze}),Cg);Iy=Ov=eze([nd(1,uu),nd(2,Ae),nd(3,ke),nd(4,ve),nd(5,pm),nd(6,oi),nd(7,nt),nd(8,Zb),nd(9,ke),nd(10,Ps)],Iy);tl((n,e)=>{((s,o)=>{o&&e.addRule(`.monaco-editor ${s} { background-color: ${o}; }`)})(".quickfix-edit-highlight",n.getColor(th));const i=n.getColor(qf);i&&e.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${Ec(n.type)?"dotted":"solid"} ${i}; box-sizing: border-box; }`)});function aD(n){return X.regex(tme.keys()[0],new RegExp("(\\s|^)"+ua(n.value)+"\\b"))}const G$={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:p("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:p("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[p("args.schema.apply.first","Always apply the first returned code action."),p("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),p("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:p("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function Qb(n,e,t,i,s=kr.Default){if(n.hasModel()){const o=Iy.get(n);o==null||o.manualTriggerAtCurrentPosition(e,s,t,i)}}class ize extends _e{constructor(){super({id:K$,label:p("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:X.and(I.writable,I.hasCodeActionsProvider),kbOpts:{kbExpr:I.textInputFocus,primary:2137,weight:100}})}run(e,t){return Qb(t,p("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,kr.QuickFix)}}class nze extends xn{constructor(){super({id:qge,precondition:X.and(I.writable,I.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:G$}]}})}runEditorCommand(e,t,i){const s=Rd.fromUser(i,{kind:ki.Empty,apply:"ifSingle"});return Qb(t,typeof(i==null?void 0:i.kind)=="string"?s.preferred?p("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):p("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):s.preferred?p("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):p("editor.action.codeAction.noneMessage","No code actions available"),{include:s.kind,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply)}}class sze extends _e{constructor(){super({id:Gge,label:p("refactor.label","Refactor..."),alias:"Refactor...",precondition:X.and(I.writable,I.hasCodeActionsProvider),kbOpts:{kbExpr:I.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:X.and(I.writable,aD(bi.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:G$}]}})}run(e,t,i){const s=Rd.fromUser(i,{kind:bi.Refactor,apply:"never"});return Qb(t,typeof(i==null?void 0:i.kind)=="string"?s.preferred?p("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):p("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):s.preferred?p("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):p("editor.action.refactor.noneMessage","No refactorings available"),{include:bi.Refactor.contains(s.kind)?s.kind:ki.None,onlyIncludePreferredActions:s.preferred},s.apply,kr.Refactor)}}class oze extends _e{constructor(){super({id:Yge,label:p("source.label","Source Action..."),alias:"Source Action...",precondition:X.and(I.writable,I.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:X.and(I.writable,aD(bi.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:G$}]}})}run(e,t,i){const s=Rd.fromUser(i,{kind:bi.Source,apply:"never"});return Qb(t,typeof(i==null?void 0:i.kind)=="string"?s.preferred?p("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):p("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):s.preferred?p("editor.action.source.noneMessage.preferred","No preferred source actions available"):p("editor.action.source.noneMessage","No source actions available"),{include:bi.Source.contains(s.kind)?s.kind:ki.None,includeSourceActions:!0,onlyIncludePreferredActions:s.preferred},s.apply,kr.SourceAction)}}class rze extends _e{constructor(){super({id:Y8,label:p("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:X.and(I.writable,aD(bi.SourceOrganizeImports)),kbOpts:{kbExpr:I.textInputFocus,primary:1581,weight:100}})}run(e,t){return Qb(t,p("editor.action.organize.noneMessage","No organize imports action available"),{include:bi.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",kr.OrganizeImports)}}class aze extends _e{constructor(){super({id:Z8,label:p("fixAll.label","Fix All"),alias:"Fix All",precondition:X.and(I.writable,aD(bi.SourceFixAll))})}run(e,t){return Qb(t,p("fixAll.noneMessage","No fix all action available"),{include:bi.SourceFixAll,includeSourceActions:!0},"ifSingle",kr.FixAll)}}class lze extends _e{constructor(){super({id:Kge,label:p("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:X.and(I.writable,aD(bi.QuickFix)),kbOpts:{kbExpr:I.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return Qb(t,p("editor.action.autoFix.noneMessage","No auto fixes available"),{include:bi.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",kr.AutoFix)}}wt(Iy.ID,Iy,3);wt(Hk.ID,Hk,4);se(ize);se(sze);se(oze);se(rze);se(lze);se(aze);fe(new nze);Mi.as(Hl.Configuration).registerConfiguration({...VL,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:p("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}});Mi.as(Hl.Configuration).registerConfiguration({...VL,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:p("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}});Mi.as(Hl.Configuration).registerConfiguration({...VL,properties:{"editor.codeActions.triggerOnFocusChange":{type:"boolean",scope:5,markdownDescription:p("triggerOnFocusChange","Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.","`#editor.codeActionsOnSave#`","`#files.autoSave#`","`afterDelay`","`always`"),default:!1}}});class i9{constructor(){this.lenses=[],this._disposables=new Q}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}async function nme(n,e,t){const i=n.ordered(e),s=new Map,o=new i9,r=i.map(async(a,l)=>{s.set(a,l);try{const c=await Promise.resolve(a.provideCodeLenses(e,t));c&&o.add(c,a)}catch(c){en(c)}});return await Promise.all(r),o.lenses=o.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:s.get(a.provider)<s.get(l.provider)?-1:s.get(a.provider)>s.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),o}bt.registerCommand("_executeCodeLensProvider",function(n,...e){let[t,i]=e;xt(Le.isUri(t)),xt(typeof i=="number"||!i);const{codeLensProvider:s}=n.get(ve),o=n.get(gi).getModel(t);if(!o)throw ja();const r=[],a=new Q;return nme(s,o,Ye.None).then(l=>{a.add(l);const c=[];for(const d of l.lenses)i==null||d.symbol.command?r.push(d.symbol):i-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(o,d.symbol,Ye.None)).then(u=>r.push(u||d.symbol)));return Promise.all(c)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var cze=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},dze=function(n,e){return function(t,i){e(t,i,n)}};const sme=dt("ICodeLensCache");class Rte{constructor(e,t){this.lineCount=e,this.data=t}}let n9=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new lu(20,.75);const t="codelens/cache";C0(Gt,()=>e.remove(t,1));const i="codelens/cache2",s=e.get(i,1,"{}");this._deserialize(s);const o=ue.filter(e.onWillSaveState,r=>r.reason===uk.SHUTDOWN);ue.once(o)(r=>{e.store(i,this._serialize(),1,1)})}put(e,t){const i=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)==null?void 0:a.title}}}),s=new i9;s.add({lenses:i,dispose:()=>{}},this._fakeProvider);const o=new Rte(e.getLineCount(),s);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const s=new Set;for(const o of i.data.lenses)s.add(o.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...s.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const i in t){const s=t[i],o=[];for(const a of s.lines)o.push({range:new E(a,1,a,11)});const r=new i9;r.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(i,new Rte(s.lineCount,r))}}catch{}}};n9=cze([dze(0,jl)],n9);mt(sme,n9,1);class uze{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}const sx=class sx{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${sx._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const i=[];let s=!1;for(let o=0;o<e.length;o++){const r=e[o];if(r&&(s=!0,r.command)){const a=gg(r.command.title.trim());if(r.command.id){const l=`c${sx._idPool++}`;i.push(ce("a",{id:l,title:r.command.tooltip,role:"button"},...a)),this._commands.set(l,r.command)}else i.push(ce("span",{title:r.command.tooltip},...a));o+1<e.length&&i.push(ce("span",void 0,"|"))}}s?(rs(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):rs(this._domNode,ce("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}};sx._idPool=0;let s9=sx;class r5{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,s=t.length;i<s;i++)this._addDecorationsCallbacks[i](t[i])}}const Ate=ze.register({collapseOnReplaceEdit:!0,description:"codelens"});class Ote{constructor(e,t,i,s,o,r){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a;const l=[];this._data.forEach((c,d)=>{c.symbol.command&&l.push(c.symbol),i.addDecoration({range:c.symbol.range,options:Ate},u=>this._decorationIds[d]=u),a?a=E.plusRange(a,c.symbol.range):a=E.lift(c.symbol.range)}),this._viewZone=new uze(a.startLineNumber-1,o,r),this._viewZoneId=s.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new s9(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t==null||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),s=this._data[t].symbol;return!!(i&&E.isEmpty(s.range)===i.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((i,s)=>{t.addDecoration({range:i.symbol.range,options:Ate},o=>this._decorationIds[s]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:s}=this._data[t];s.command=i.command||s.command}}}getCommand(e){var t;return(t=this._contentWidget)==null?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var hze=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},a0=function(n,e){return function(t,i){e(t,i,n)}},OC;let jk=(OC=class{constructor(e,t,i,s,o,r){this._editor=e,this._languageFeaturesService=t,this._commandService=s,this._notificationService=o,this._codeLensCache=r,this._disposables=new Q,this._localToDispose=new Q,this._lenses=[],this._oldCodeLensModels=new Q,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new $t(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(50)||a.hasChanged(19)||a.hasChanged(18))&&this._updateLensStyle(),a.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)==null||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(52)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(18),s=this._editor.getOption(50),{style:o}=this._editor.getContainerDomNode();o.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),o.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),o.setProperty("--vscode-editorCodeLens-fontFeatureSettings",s.fontFeatureSettings),i&&(o.setProperty("--vscode-editorCodeLens-fontFamily",i),o.setProperty("--vscode-editorCodeLens-fontFamilyDefault",po.fontFamily)),this._editor.changeViewZones(r=>{for(const a of this._lenses)a.updateHeight(e,r)})}_localDispose(){var e,t,i;(e=this._getCodeLensModelPromise)==null||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)==null||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(i=this._currentCodeLensModel)==null||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&Kg(()=>{const s=this._codeLensCache.get(e);t===s&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3,this._localToDispose);return}for(const s of this._languageFeaturesService.codeLensProvider.all(e))if(typeof s.onDidChange=="function"){const o=s.onDidChange(()=>i.schedule());this._localToDispose.add(o)}const i=new $t(()=>{var o;const s=Date.now();(o=this._getCodeLensModelPromise)==null||o.cancel(),this._getCodeLensModelPromise=On(r=>nme(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-s);i.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},He)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add(xe(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var s;this._editor.changeDecorations(o=>{this._editor.changeViewZones(r=>{const a=[];let l=-1;this._lenses.forEach(d=>{!d.isValid()||l===d.getLineNumber()?a.push(d):(d.update(r),l=d.getLineNumber())});const c=new r5;a.forEach(d=>{d.dispose(c,r),this._lenses.splice(this._lenses.indexOf(d),1)}),c.commit(o)})}),i.schedule(),this._resolveCodeLensesScheduler.cancel(),(s=this._resolveCodeLensesPromise)==null||s.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorText(()=>{i.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{i.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(s=>{s.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(xe(()=>{if(this._editor.getModel()){const s=Vc.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(o,r)})}),s.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(s=>{if(s.target.type!==9)return;let o=s.target.element;if((o==null?void 0:o.tagName)==="SPAN"&&(o=o.parentElement),(o==null?void 0:o.tagName)==="A")for(const r of this._lenses){const a=r.getCommand(o);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),i.schedule()}_disposeAllLenses(e,t){const i=new r5;for(const s of this._lenses)s.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),i=[];let s;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(s&&s[s.length-1].symbol.range.startLineNumber===l?s.push(a):(s=[a],i.push(s)))}if(!i.length&&!this._lenses.length)return;const o=Vc.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new r5;let d=0,u=0;for(;u<i.length&&d<this._lenses.length;){const h=i[u][0].symbol.range.startLineNumber,f=this._lenses[d].getLineNumber();f<h?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):f===h?(this._lenses[d].updateCodeLensSymbols(i[u],c),u++,d++):(this._lenses.splice(d,0,new Ote(i[u],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,u++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;u<i.length;)this._lenses.push(new Ote(i[u],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),u++;c.commit(a)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var r;(r=this._resolveCodeLensesPromise)==null||r.cancel(),this._resolveCodeLensesPromise=void 0;const e=this._editor.getModel();if(!e)return;const t=[],i=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(e);l&&(t.push(l),i.push(a))}),t.length===0)return;const s=Date.now(),o=On(a=>{const l=t.map((c,d)=>{const u=new Array(c.length),h=c.map((f,g)=>!f.symbol.command&&typeof f.provider.resolveCodeLens=="function"?Promise.resolve(f.provider.resolveCodeLens(e,f.symbol,a)).then(m=>{u[g]=m},en):(u[g]=f.symbol,Promise.resolve(void 0)));return Promise.all(h).then(()=>{!a.isCancellationRequested&&!i[d].isDisposed()&&i[d].updateCommands(u)})});return Promise.all(l)});this._resolveCodeLensesPromise=o,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(e,Date.now()-s);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(e,this._currentCodeLensModel),this._oldCodeLensModels.clear(),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{He(a),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,(e=this._currentCodeLensModel)!=null&&e.isDisposed?void 0:this._currentCodeLensModel}},OC.ID="css.editor.codeLens",OC);jk=hze([a0(1,ve),a0(2,_a),a0(3,oi),a0(4,rn),a0(5,sme)],jk);wt(jk.ID,jk,1);se(class extends _e{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:I.hasCodeLensProvider,label:p("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;const i=e.get(il),s=e.get(oi),o=e.get(rn),r=t.getSelection().positionLineNumber,a=t.getContribution(jk.ID);if(!a)return;const l=await a.getModel();if(!l)return;const c=[];for(const h of l.lenses)h.symbol.command&&h.symbol.range.startLineNumber===r&&c.push({label:h.symbol.command.title,command:h.symbol.command});if(c.length===0)return;const d=await i.pick(c,{canPickMany:!1,placeHolder:p("placeHolder","Select a command")});if(!d)return;let u=d.command;if(l.isDisposed){const h=await a.getModel(),f=h==null?void 0:h.lenses.find(g=>{var m;return g.symbol.range.startLineNumber===r&&((m=g.symbol.command)==null?void 0:m.title)===u.title});if(!f||!f.symbol.command)return;u=f.symbol.command}try{await s.executeCommand(u.id,...u.arguments||[])}catch(h){o.error(h)}}});var ome=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},o9=function(n,e){return function(t,i){e(t,i,n)}};let Vk=class{constructor(e){this._editorWorkerService=e}async provideDocumentColors(e,t){return this._editorWorkerService.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,i){const s=t.range,o=t.color,r=o.alpha,a=new te(new Ct(Math.round(255*o.red),Math.round(255*o.green),Math.round(255*o.blue),r)),l=r?te.Format.CSS.formatRGB(a):te.Format.CSS.formatRGBA(a),c=r?te.Format.CSS.formatHSL(a):te.Format.CSS.formatHSLA(a),d=r?te.Format.CSS.formatHex(a):te.Format.CSS.formatHexA(a),u=[];return u.push({label:l,textEdit:{range:s,text:l}}),u.push({label:c,textEdit:{range:s,text:c}}),u.push({label:d,textEdit:{range:s,text:d}}),u}};Vk=ome([o9(0,Jo)],Vk);let r9=class extends U{constructor(e,t){super(),this._register(e.colorProvider.register("*",new Vk(t)))}};r9=ome([o9(0,ve),o9(1,Jo)],r9);p1(r9);async function rme(n,e,t,i=!0){return Y$(new fze,n,e,t,i)}function ame(n,e,t,i){return Promise.resolve(t.provideColorPresentations(n,e,i))}class fze{constructor(){}async compute(e,t,i,s){const o=await e.provideDocumentColors(t,i);if(Array.isArray(o))for(const r of o)s.push({colorInfo:r,provider:e});return Array.isArray(o)}}class gze{constructor(){}async compute(e,t,i,s){const o=await e.provideDocumentColors(t,i);if(Array.isArray(o))for(const r of o)s.push({range:r.range,color:[r.color.red,r.color.green,r.color.blue,r.color.alpha]});return Array.isArray(o)}}class mze{constructor(e){this.colorInfo=e}async compute(e,t,i,s){const o=await e.provideColorPresentations(t,this.colorInfo,Ye.None);return Array.isArray(o)&&s.push(...o),Array.isArray(o)}}async function Y$(n,e,t,i,s){let o=!1,r;const a=[],l=e.ordered(t);for(let c=l.length-1;c>=0;c--){const d=l[c];if(d instanceof Vk)r=d;else try{await n.compute(d,t,i,a)&&(o=!0)}catch(u){en(u)}}return o?a:r&&s?(await n.compute(r,t,i,a),a):[]}function lme(n,e){const{colorProvider:t}=n.get(ve),i=n.get(gi).getModel(e);if(!i)throw ja();const s=n.get(nt).getValue("editor.defaultColorDecorators",{resource:e});return{model:i,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:s}}bt.registerCommand("_executeDocumentColorProvider",function(n,...e){const[t]=e;if(!(t instanceof Le))throw ja();const{model:i,colorProviderRegistry:s,isDefaultColorDecoratorsEnabled:o}=lme(n,t);return Y$(new gze,s,i,Ye.None,o)});bt.registerCommand("_executeColorPresentationProvider",function(n,...e){const[t,i]=e,{uri:s,range:o}=i;if(!(s instanceof Le)||!Array.isArray(t)||t.length!==4||!E.isIRange(o))throw ja();const{model:r,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:l}=lme(n,s),[c,d,u,h]=t;return Y$(new mze({range:o,color:{red:c,green:d,blue:u,alpha:h}}),a,r,Ye.None,l)});var pze=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},a5=function(n,e){return function(t,i){e(t,i,n)}},a9;const cme=Object.create({});var yg;let Ty=(yg=class extends U{constructor(e,t,i,s){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=i,this._localToDispose=this._register(new Q),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new mP(this._editor),this._decoratorLimitReporter=new _ze,this._colorDecorationClassRefs=this._register(new Q),this._debounceInformation=s.for(i.colorProvider,"Document Colors",{min:a9.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(i.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(o=>{const r=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148);const a=r!==this._isColorDecoratorsEnabled||o.hasChanged(21),l=o.hasChanged(148);(a||l)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),i=this._configurationService.getValue(t);if(i&&typeof i=="object"){const s=i.colorDecorators;if(s&&s.enable!==void 0&&!s.enable)return s.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Bl,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=On(async e=>{const t=this._editor.getModel();if(!t)return[];const i=new Qn(!1),s=await rme(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,i.elapsed()),s});try{const e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){He(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(i=>({range:{startLineNumber:i.colorInfo.range.startLineNumber,startColumn:i.colorInfo.range.startColumn,endLineNumber:i.colorInfo.range.endLineNumber,endColumn:i.colorInfo.range.endColumn},options:ze.EMPTY}));this._editor.changeDecorations(i=>{this._decorationsIds=i.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((s,o)=>this._colorDatas.set(s,e[o]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],i=this._editor.getOption(21);for(let o=0;o<e.length&&t.length<i;o++){const{red:r,green:a,blue:l,alpha:c}=e[o].colorInfo.color,d=new Ct(Math.round(r*255),Math.round(a*255),Math.round(l*255),c),u=`rgba(${d.r}, ${d.g}, ${d.b}, ${d.a})`,h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:u}));t.push({range:{startLineNumber:e[o].colorInfo.range.startLineNumber,startColumn:e[o].colorInfo.range.startColumn,endLineNumber:e[o].colorInfo.range.endLineNumber,endColumn:e[o].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:fce,inlineClassName:`${h.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:cme}}})}const s=i<e.length?i:!1;this._decoratorLimitReporter.update(e.length,s),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(E.fromPositions(e,e)).filter(s=>this._colorDatas.has(s.id));return i.length===0?null:this._colorDatas.get(i[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}},a9=yg,yg.ID="editor.contrib.colorDetector",yg.RECOMPUTE_TIME=1e3,yg);Ty=a9=pze([a5(1,nt),a5(2,ve),a5(3,_a)],Ty);class _ze{constructor(){this._onDidChange=new j,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}wt(Ty.ID,Ty,1);class bze{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new j,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new j,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new j,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let i=-1;for(let s=0;s<this.colorPresentations.length;s++)if(t.toLowerCase()===this.colorPresentations[s].label){i=s;break}if(i===-1){const s=t.split("(")[0].toLowerCase();for(let o=0;o<this.colorPresentations.length;o++)if(this.colorPresentations[o].label.toLowerCase().startsWith(s)){i=o;break}}i!==-1&&i!==this.presentationIndex&&(this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}const Xr=ce;class vze extends U{constructor(e,t,i,s=!1){super(),this.model=t,this.showingStandaloneColorPicker=s,this._closeButton=null,this._domNode=Xr(".colorpicker-header"),ne(e,this._domNode),this._pickedColorNode=ne(this._domNode,Xr(".picked-color")),ne(this._pickedColorNode,Xr("span.codicon.codicon-color-mode")),this._pickedColorPresentation=ne(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const o=p("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",o),this._originalColorNode=ne(this._domNode,Xr(".original-color")),this._originalColorNode.style.backgroundColor=te.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(wT)||te.white,this._register(i.onDidColorThemeChange(r=>{this.backgroundColor=r.getColor(wT)||te.white})),this._register(G(this._pickedColorNode,le.CLICK,()=>this.model.selectNextColorPresentation())),this._register(G(this._originalColorNode,le.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=te.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new wze(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=te.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class wze extends U{constructor(e){super(),this._onClicked=this._register(new j),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),ne(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),ne(this._button,t),ne(t,Xr(".button"+Re.asCSSSelector(mi("color-picker-close",ae.close,p("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register(G(this._button,le.CLICK,()=>{this._onClicked.fire()}))}}class Cze extends U{constructor(e,t,i,s=!1){super(),this.model=t,this.pixelRatio=i,this._insertButton=null,this._domNode=Xr(".colorpicker-body"),ne(e,this._domNode),this._saturationBox=new yze(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new Sze(this._domNode,this.model,s),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new xze(this._domNode,this.model,s),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),s&&(this._insertButton=this._register(new kze(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new te(new Wd(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new te(new Wd(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=(1-e)*360;this.model.color=new te(new Wd(i===360?0:i,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class yze extends U{constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new j,this.onColorFlushed=this._onColorFlushed.event,this._domNode=Xr(".saturation-wrap"),ne(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",ne(this._domNode,this._canvas),this.selection=Xr(".saturation-selection"),ne(this._domNode,this.selection),this.layout(),this._register(G(this._domNode,le.POINTER_DOWN,s=>this.onPointerDown(s))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new r1);const t=Qi(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>this.onDidChangePosition(s.pageX-t.left,s.pageY-t.top),()=>null);const i=G(e.target.ownerDocument,le.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),s=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,s),this._onDidChange.fire({s:i,v:s})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new te(new Wd(e.h,1,1,1)),i=this._canvas.getContext("2d"),s=i.createLinearGradient(0,0,this._canvas.width,0);s.addColorStop(0,"rgba(255, 255, 255, 1)"),s.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),s.addColorStop(1,"rgba(255, 255, 255, 0)");const o=i.createLinearGradient(0,0,0,this._canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this._canvas.width,this._canvas.height),i.fillStyle=te.Format.CSS.format(t),i.fill(),i.fillStyle=s,i.fill(),i.fillStyle=o,i.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class dme extends U{constructor(e,t,i=!1){super(),this.model=t,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new j,this.onColorFlushed=this._onColorFlushed.event,i?(this.domNode=ne(e,Xr(".standalone-strip")),this.overlay=ne(this.domNode,Xr(".standalone-overlay"))):(this.domNode=ne(e,Xr(".strip")),this.overlay=ne(this.domNode,Xr(".overlay"))),this.slider=ne(this.domNode,Xr(".slider")),this.slider.style.top="0px",this._register(G(this.domNode,le.POINTER_DOWN,s=>this.onPointerDown(s))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new r1),i=Qi(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,o=>this.onDidChangeTop(o.pageY-i.top),()=>null);const s=G(e.target.ownerDocument,le.POINTER_UP,()=>{this._onColorFlushed.fire(),s.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class Sze extends dme{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:i,b:s}=e.rgba,o=new te(new Ct(t,i,s,1)),r=new te(new Ct(t,i,s,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}class xze extends dme{constructor(e,t,i=!1){super(e,t,i),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class kze extends U{constructor(e){super(),this._onClicked=this._register(new j),this.onClicked=this._onClicked.event,this._button=ne(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(G(this._button,le.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}}class Lze extends ba{constructor(e,t,i,s,o=!1){super(),this.model=t,this.pixelRatio=i,this._register(Vx.getInstance(Te(e)).onDidChange(()=>this.layout())),this._domNode=Xr(".colorpicker-widget"),e.appendChild(this._domNode),this.header=this._register(new vze(this._domNode,this.model,s,o)),this.body=this._register(new Cze(this._domNode,this.model,this.pixelRatio,o))}layout(){this.body.layout()}get domNode(){return this._domNode}}class l5{constructor(e,t,i,s){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=s,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class YN{constructor(e,t,i,s,o,r){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=s,this.initialMousePosY=o,this.supportsMarkerHover=r,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}class Eb{constructor(e){this.renderedHoverParts=e}dispose(){for(const e of this.renderedHoverParts)e.dispose()}}const Xb=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};var ume=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},hme=function(n,e){return function(t,i){e(t,i,n)}};class Dze{constructor(e,t,i,s){this.owner=e,this.range=t,this.model=i,this.provider=s,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let zk=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,i){return ta.fromPromise(this._computeAsync(e,t,i))}async _computeAsync(e,t,i){if(!this._editor.hasModel())return[];const s=Ty.get(this._editor);if(!s)return[];for(const o of t){if(!s.isColorDecoration(o))continue;const r=s.getColorData(o.range.getStartPosition());if(r)return[await fme(this,this._editor.getModel(),r.colorInfo,r.provider)]}return[]}renderHoverParts(e,t){const i=gme(this,this._editor,this._themeService,t,e);if(!i)return new Eb([]);this._colorPicker=i.colorPicker;const s={hoverPart:i.hoverPart,hoverElement:this._colorPicker.domNode,dispose(){i.disposables.dispose()}};return new Eb([s])}handleResize(){var e;(e=this._colorPicker)==null||e.layout()}isColorPickerVisible(){return!!this._colorPicker}};zk=ume([hme(1,kn)],zk);class Eze{constructor(e,t,i,s){this.owner=e,this.range=t,this.model=i,this.provider=s}}let Uk=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,i){if(!this._editor.hasModel()||!Ty.get(this._editor))return null;const o=await rme(i,this._editor.getModel(),Ye.None);let r=null,a=null;for(const u of o){const h=u.colorInfo;E.containsRange(h.range,e.range)&&(r=h,a=u.provider)}const l=r??e,c=a??t,d=!!r;return{colorHover:await fme(this,this._editor.getModel(),l,c),foundInEditor:d}}async updateEditorModel(e){if(!this._editor.hasModel())return;const t=e.model;let i=new E(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await ZN(this._editor.getModel(),t,this._color,i,e),i=mme(this._editor,i,t))}renderHoverParts(e,t){return gme(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};Uk=ume([hme(1,kn)],Uk);async function fme(n,e,t,i){const s=e.getValueInRange(t.range),{red:o,green:r,blue:a,alpha:l}=t.color,c=new Ct(Math.round(o*255),Math.round(r*255),Math.round(a*255),l),d=new te(c),u=await ame(e,t,i,Ye.None),h=new bze(d,[],0);return h.colorPresentations=u||[],h.guessColorPresentation(d,s),n instanceof zk?new Dze(n,E.lift(t.range),h,i):new Eze(n,E.lift(t.range),h,i)}function gme(n,e,t,i,s){if(i.length===0||!e.hasModel())return;if(s.setMinimumDimensions){const h=e.getOption(67)+8;s.setMinimumDimensions(new jt(302,h))}const o=new Q,r=i[0],a=e.getModel(),l=r.model,c=o.add(new Lze(s.fragment,l,e.getOption(144),t,n instanceof Uk));let d=!1,u=new E(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);if(n instanceof Uk){const h=r.model.color;n.color=h,ZN(a,l,h,u,r),o.add(l.onColorFlushed(f=>{n.color=f}))}else o.add(l.onColorFlushed(async h=>{await ZN(a,l,h,u,r),d=!0,u=mme(e,u,l)}));return o.add(l.onDidChangeColor(h=>{ZN(a,l,h,u,r)})),o.add(e.onDidChangeModelContent(h=>{d?d=!1:(s.hide(),e.focus())})),{hoverPart:r,colorPicker:c,disposables:o}}function mme(n,e,t){const i=[],s=t.presentation.textEdit??{range:e,text:t.presentation.label,forceMoveMarkers:!1};i.push(s),t.presentation.additionalTextEdits&&i.push(...t.presentation.additionalTextEdits);const o=E.lift(s.range),r=n.getModel()._setTrackedRange(null,o,3);return n.executeEdits("colorpicker",i),n.pushUndoStop(),n.getModel()._getTrackedRange(r)??o}async function ZN(n,e,t,i,s){const o=await ame(n,{range:i,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},s.provider,Ye.None);e.colorPresentations=o||[]}const pme="editor.action.showHover",Nze="editor.action.showDefinitionPreviewHover",Ize="editor.action.scrollUpHover",Tze="editor.action.scrollDownHover",Pze="editor.action.scrollLeftHover",Mze="editor.action.scrollRightHover",Rze="editor.action.pageUpHover",Aze="editor.action.pageDownHover",Oze="editor.action.goToTopHover",Fze="editor.action.goToBottomHover",bO="editor.action.increaseHoverVerbosityLevel",Wze=p({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),vO="editor.action.decreaseHoverVerbosityLevel",Bze=p({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level"),_me="editor.action.inlineSuggest.commit",bme="editor.action.inlineSuggest.showPrevious",vme="editor.action.inlineSuggest.showNext";var Z$=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},wl=function(n,e){return function(t,i){e(t,i,n)}},QN;let l9=class extends U{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=Ht(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=ye(this,s=>{var l,c;const o=(l=this.model.read(s))==null?void 0:l.primaryGhostText.read(s);if(!this.alwaysShowToolbar.read(s)||!o||o.parts.length===0)return this.sessionPosition=void 0,null;const r=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const a=new H(o.lineNumber,Math.min(r,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(zo((s,o)=>{const r=this.model.read(s);if(!r||!this.alwaysShowToolbar.read(s))return;const a=_m((c,d)=>{const u=d.add(this.instantiationService.createInstance(Py,this.editor,!0,this.position,r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.activeCommands));return e.addContentWidget(u),d.add(xe(()=>e.removeContentWidget(u))),d.add(Be(h=>{this.position.read(h)&&r.lastTriggerKind.read(h)!==Lc.Explicit&&r.triggerExplicitly()})),u}),l=qL(this,(c,d)=>!!this.position.read(c)||!!d);o.add(Be(c=>{l.read(c)&&a.read(c)}))}))}};l9=Z$([wl(2,ke)],l9);const Hze=mi("inline-suggestion-hints-next",ae.chevronRight,p("parameterHintsNextIcon","Icon for show next parameter hint.")),jze=mi("inline-suggestion-hints-previous",ae.chevronLeft,p("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var Sg;let Py=(Sg=class extends U{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){const s=new br(e,t,i,!0,()=>this._commandService.executeCommand(e)),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let r=t;return o&&(r=p({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),s.tooltip=r,s}constructor(e,t,i,s,o,r,a,l,c,d,u){super(),this.editor=e,this.withBorder=t,this._position=i,this._currentSuggestionIdx=s,this._suggestionCount=o,this._extraCommands=r,this._commandService=a,this.keybindingService=c,this._contextKeyService=d,this._menuService=u,this.id=`InlineSuggestionHintsContentWidget${QN.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=rt("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[rt("div@toolBar")]),this.previousAction=this.createCommandAction(bme,p("previous","Previous"),Re.asClassName(jze)),this.availableSuggestionCountAction=new br("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(vme,p("next","Next"),Re.asClassName(Hze)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(we.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new $t(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new $t(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.toolBar=this._register(l.createInstance(c9,this.nodes.toolBar,we.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:h=>h.startsWith("primary")},actionViewItemProvider:(h,f)=>{if(h instanceof vr)return l.createInstance(zze,h,void 0);if(h===this.availableSuggestionCountAction){const g=new Vze(void 0,h,{label:!0,icon:!1});return g.setClass("availableSuggestionCount"),g}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(h=>{QN._dropDownVisible=h})),this._register(Be(h=>{this._position.read(h),this.editor.layoutContentWidget(this)})),this._register(Be(h=>{const f=this._suggestionCount.read(h),g=this._currentSuggestionIdx.read(h);f!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${g+1}/${f}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),f!==void 0&&f>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(Be(h=>{const g=this._extraCommands.read(h).map(m=>({class:void 0,id:m.id,enabled:!0,tooltip:m.tooltip||"",label:m.title,run:_=>this._commandService.executeCommand(m.id)}));for(const[m,_]of this.inlineCompletionsActionsMenus.getActions())for(const b of _)b instanceof vr&&g.push(b);g.length>0&&g.unshift(new Wn),this.toolBar.setAdditionalSecondaryActions(g)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},QN=Sg,Sg._dropDownVisible=!1,Sg.id=0,Sg);Py=QN=Z$([wl(6,oi),wl(7,ke),wl(8,Ft),wl(9,Ae),wl(10,pa)],Py);class Vze extends wy{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}}let zze=class extends Xg{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=rt("div.keybinding").root;this._register(new g1(t,mr,{disableTitle:!0,...Jhe})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}},c9=class extends Mk{constructor(e,t,i,s,o,r,a,l,c){super(e,{resetMenu:t,...i},s,o,r,a,l,c),this.menuId=t,this.options2=i,this.menuService=s,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var i,s,o,r,a,l,c;const e=[],t=[];$A(this.menu,(i=this.options2)==null?void 0:i.menuOptions,{primary:e,secondary:t},(o=(s=this.options2)==null?void 0:s.toolbarOptions)==null?void 0:o.primaryGroup,(a=(r=this.options2)==null?void 0:r.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setPrependedPrimaryActions(e){Li(this.prependedPrimaryActions,e,(t,i)=>t===i)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){Li(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};c9=Z$([wl(3,pa),wl(4,Ae),wl(5,Er),wl(6,Ft),wl(7,oi),wl(8,Ps)],c9);function wO(n,e,t){const i=Qi(n);return!(e<i.left||e>i.left+i.width||t<i.top||t>i.top+i.height)}let Uze=class{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}};class wme extends U{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new j),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new $t(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new $t(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new $t(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=vDe(e=>this._computer.computeAsync(e)),(async()=>{try{for await(const e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(e){He(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new Uze(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class Q${constructor(){this._onDidWillResize=new j,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new j,this.onDidResize=this._onDidResize.event,this._sashListener=new Q,this._size=new jt(0,0),this._minSize=new jt(0,0),this._maxSize=new jt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new xs(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new xs(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new xs(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:YT.North}),this._southSash=new xs(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:YT.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,i=0;this._sashListener.add(ue.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)})),this._sashListener.add(ue.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(s=>{e&&(i=s.currentX-s.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(s=>{e&&(i=-(s.currentX-s.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(s=>{e&&(t=-(s.currentY-s.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(s=>{e&&(t=s.currentY-s.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(ue.any(this._eastSash.onDidReset,this._westSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(ue.any(this._northSash.onDidReset,this._southSash.onDidReset)(s=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,s){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=s?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:s}=this._minSize,{height:o,width:r}=this._maxSize;e=Math.max(i,Math.min(o,e)),t=Math.max(s,Math.min(r,t));const a=new jt(t,e);jt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}const $ze=30,qze=24;class Kze extends U{constructor(e,t=new jt(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new Q$),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=jt.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(i=>{this._resize(new jt(i.dimension.width,i.dimension.height)),i.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return(e=this._contentPosition)!=null&&e.position?H.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);return!t||!i?void 0:Qi(t).top+i.top-$ze}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;const s=Qi(t),o=Gg(t.ownerDocument.body),r=s.top+i.top+i.height;return o.height-r-qze}_findPositionPreference(e,t){const i=Math.min(this._availableVerticalSpaceBelow(t)??1/0,e),s=Math.min(this._availableVerticalSpaceAbove(t)??1/0,e),o=Math.min(Math.max(s,i),e),r=Math.min(e,o);let a;return this._editor.getOption(60).above?a=r<=s?1:2:a=r<=i?2:1,a===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),a}_resize(e){this._resizableNode.layout(e.height,e.width)}}var Gze=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},IE=function(n,e){return function(t,i){e(t,i,n)}},cd;const Fte=30,Yze=6;var xg;let d9=(xg=class extends Kze{get isVisibleFromKeyboard(){var e;return((e=this._renderedHover)==null?void 0:e.source)===1}get isVisible(){return this._hoverVisibleKey.get()??!1}get isFocused(){return this._hoverFocusedKey.get()??!1}constructor(e,t,i,s,o){const r=e.getOption(67)+8,a=150,l=new jt(a,r);super(e,l),this._configurationService=i,this._accessibilityService=s,this._keybindingService=o,this._hover=this._register(new Qz),this._onDidResize=this._register(new j),this.onDidResize=this._onDidResize.event,this._minimumSize=l,this._hoverVisibleKey=I.hoverVisible.bindTo(t),this._hoverFocusedKey=I.hoverFocused.bindTo(t),ne(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(d=>{d.hasChanged(50)&&this._updateFont()}));const c=this._register(Fc(this._resizableNode.domNode));this._register(c.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(c.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setRenderedHover(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),(e=this._renderedHover)==null||e.dispose(),this._editor.removeContentWidget(this)}getId(){return cd.ID}static _applyDimensions(e,t,i){const s=typeof t=="number"?`${t}px`:t,o=typeof i=="number"?`${i}px`:i;e.style.width=s,e.style.height=o}_setContentsDomNodeDimensions(e,t){const i=this._hover.contentsDomNode;return cd._applyDimensions(i,e,t)}_setContainerDomNodeDimensions(e,t){const i=this._hover.containerDomNode;return cd._applyDimensions(i,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,i){const s=typeof t=="number"?`${t}px`:t,o=typeof i=="number"?`${i}px`:i;e.style.maxWidth=s,e.style.maxHeight=o}_setHoverWidgetMaxDimensions(e,t){cd._applyMaxDimensions(this._hover.contentsDomNode,e,t),cd._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,i=e.height;this._setHoverWidgetDimensions(t,i)}_updateResizableNodeMaxDimensions(){const e=this._findMaximumRenderingWidth()??1/0,t=this._findMaximumRenderingHeight()??1/0;this._resizableNode.maxSize=new jt(e,t),this._setHoverWidgetMaxDimensions(e,t)}_resize(e){cd._lastDimensions=new jt(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),this._onDidResize.fire()}_findAvailableSpaceVertically(){var t;const e=(t=this._renderedHover)==null?void 0:t.showAtPosition;if(e)return this._positionPreference===1?this._availableVerticalSpaceAbove(e):this._availableVerticalSpaceBelow(e)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=Yze;return Array.from(this._hover.contentsDomNode.children).forEach(i=>{t+=i.clientHeight}),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?Gg(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._renderedHover)return!1;if(this._renderedHover.initialMousePosX===void 0||this._renderedHover.initialMousePosY===void 0)return this._renderedHover.initialMousePosX=e,this._renderedHover.initialMousePosY=t,!1;const i=Qi(this.getDomNode());this._renderedHover.closestMouseDistance===void 0&&(this._renderedHover.closestMouseDistance=Wte(this._renderedHover.initialMousePosX,this._renderedHover.initialMousePosY,i.left,i.top,i.width,i.height));const s=Wte(e,t,i.left,i.top,i.width,i.height);return s>this._renderedHover.closestMouseDistance+4?!1:(this._renderedHover.closestMouseDistance=Math.min(this._renderedHover.closestMouseDistance,s),!0)}_setRenderedHover(e){var t;(t=this._renderedHover)==null||t.dispose(),this._renderedHover=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),i=this._hover.contentsDomNode;i.style.fontSize=`${e}px`,i.style.lineHeight=`${t/e}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(o=>this._editor.applyFontInfo(o))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,cd._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,cd._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e){this._setRenderedHover(e),this._updateFont(),this._updateContent(e.domNode),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){return this._renderedHover?{position:this._renderedHover.showAtPosition,secondaryPosition:this._renderedHover.showAtSecondaryPosition,positionAffinity:this._renderedHover.shouldAppearBeforeContent?3:void 0,preference:[this._positionPreference??1]}:null}show(e){var r;if(!this._editor||!this._editor.hasModel())return;this._render(e);const t=Xu(this._hover.containerDomNode),i=e.showAtPosition;this._positionPreference=this._findPositionPreference(t,i)??1,this.onContentsChanged(),e.shouldFocus&&this._hover.containerDomNode.focus(),this._onDidResize.fire();const o=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&nue(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),((r=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:r.getAriaLabel())??"");o&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+o)}hide(){if(!this._renderedHover)return;const e=this._renderedHover.shouldFocus||this._hoverFocusedKey.get();this._setRenderedHover(void 0),this._resizableNode.maxSize=new jt(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(e){this._minimumSize=new jt(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new jt(e,this._minimumSize.height)}onContentsChanged(){var s;this._removeConstraintsRenderNormally();const e=this._hover.containerDomNode;let t=Xu(e),i=lr(e);if(this._resizableNode.layout(t,i),this._setHoverWidgetDimensions(i,t),t=Xu(e),i=lr(e),this._contentWidth=i,this._updateMinimumWidth(),this._resizableNode.layout(t,i),(s=this._renderedHover)!=null&&s.showAtPosition){const o=Xu(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(o,this._renderedHover.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-Fte})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+Fte})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}},cd=xg,xg.ID="editor.contrib.resizableContentHoverWidget",xg._lastDimensions=new jt(0,0),xg);d9=cd=Gze([IE(1,Ae),IE(2,nt),IE(3,Nr),IE(4,Ft)],d9);function Wte(n,e,t,i,s,o){const r=t+s/2,a=i+o/2,l=Math.max(Math.abs(n-r)-s/2,0),c=Math.max(Math.abs(e-a)-o/2,0);return Math.sqrt(l*l+c*c)}class UP{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const i=e.getModel(),s=t.range.startLineNumber;if(s>i.getLineCount())return[];const o=i.getLineMaxColumn(s);return e.getLineDecorations(s).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===s?r.range.startColumn:1,l=r.range.endLineNumber===s?r.range.endColumn:o;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return ta.EMPTY;const i=UP._getLineDecorations(this._editor,t);return ta.merge(this._participants.map(s=>s.computeAsync?s.computeAsync(t,i,e):ta.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=UP._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return Tl(t)}}class Cme{constructor(e,t,i){this.anchor=e,this.hoverParts=t,this.isComplete=i}filter(e){const t=this.hoverParts.filter(i=>i.isValidForHoverAnchor(e));return t.length===this.hoverParts.length?this:new Zze(this,this.anchor,t,this.isComplete)}}class Zze extends Cme{constructor(e,t,i,s){super(t,i,s),this.original=e}filter(e){return this.original.filter(e)}}var Qze=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Xze=function(n,e){return function(t,i){e(t,i,n)}};const Bte=ce;let $P=class extends U{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this.actions=[],this._hasContent=!1,this.hoverElement=Bte("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=ne(this.hoverElement,Bte("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;this._hasContent=!0;const s=this._register(MA.render(this.actionsElement,e,i));return this.actions.push(s),s}append(e){const t=ne(this.actionsElement,e);return this._hasContent=!0,t}};$P=Qze([Xze(0,Ft)],$P);class Jze{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}async function eUe(n,e,t,i,s){const o=await Promise.resolve(n.provideHover(t,i,s)).catch(en);if(!(!o||!tUe(o)))return new Jze(n,o,e)}function X$(n,e,t,i,s=!1){const r=n.ordered(e,s).map((a,l)=>eUe(a,l,e,t,i));return ta.fromPromises(r).coalesce()}function yme(n,e,t,i,s=!1){return X$(n,e,t,i,s).map(o=>o.hover).toPromise()}Qo("_executeHoverProvider",(n,e,t)=>{const i=n.get(ve);return yme(i.hoverProvider,e,t,Ye.None)});Qo("_executeHoverProvider_recursive",(n,e,t)=>{const i=n.get(ve);return yme(i.hoverProvider,e,t,Ye.None,!0)});function tUe(n){const e=typeof n.range<"u",t=typeof n.contents<"u"&&n.contents&&n.contents.length>0;return e&&t}var iUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Om=function(n,e){return function(t,i){e(t,i,n)}};const _w=ce,nUe=mi("hover-increase-verbosity",ae.add,p("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),sUe=mi("hover-decrease-verbosity",ae.remove,p("decreaseHoverVerbosity","Icon for decreasing hover verbosity."));class Cl{constructor(e,t,i,s,o,r=void 0){this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=s,this.ordinal=o,this.source=r}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}class Sme{constructor(e,t,i){this.hover=e,this.hoverProvider=t,this.hoverPosition=i}supportsVerbosityAction(e){switch(e){case ur.Increase:return this.hover.canIncreaseVerbosity??!1;case ur.Decrease:return this.hover.canDecreaseVerbosity??!1}}}let $k=class{constructor(e,t,i,s,o,r,a,l){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=s,this._languageFeaturesService=o,this._keybindingService=r,this._hoverService=a,this._commandService=l,this.hoverOrdinal=3}createLoadingMessage(e){return new Cl(this,e.range,[new Ds().appendText(p("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,o=i.getLineMaxColumn(s),r=[];let a=1e3;const l=i.getLineLength(s),c=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._editor.getOption(118),u=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});let h=!1;d>=0&&l>d&&e.range.startColumn>=d&&(h=!0,r.push(new Cl(this,e.range,[{value:p("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!h&&typeof u=="number"&&l>=u&&r.push(new Cl(this,e.range,[{value:p("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let f=!1;for(const g of t){const m=g.range.startLineNumber===s?g.range.startColumn:1,_=g.range.endLineNumber===s?g.range.endColumn:o,b=g.options.hoverMessage;if(!b||my(b))continue;g.options.beforeContentClassName&&(f=!0);const v=new E(e.range.startLineNumber,m,e.range.startLineNumber,_);r.push(new Cl(this,v,ZV(b),f,a++))}return r}computeAsync(e,t,i){if(!this._editor.hasModel()||e.type!==1)return ta.EMPTY;const s=this._editor.getModel(),o=this._languageFeaturesService.hoverProvider;return o.has(s)?this._getMarkdownHovers(o,s,e,i):ta.EMPTY}_getMarkdownHovers(e,t,i,s){const o=i.range.getStartPosition();return X$(e,t,o,s).filter(l=>!my(l.hover.contents)).map(l=>{const c=l.hover.range?E.lift(l.hover.range):i.range,d=new Sme(l.hover,l.provider,o);return new Cl(this,c,l.hover.contents,!1,l.ordinal,d)})}renderHoverParts(e,t){return this._renderedHoverParts=new oUe(t,e.fragment,this,this._editor,this._languageService,this._openerService,this._commandService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}updateMarkdownHoverVerbosityLevel(e,t,i){var s;return Promise.resolve((s=this._renderedHoverParts)==null?void 0:s.updateMarkdownHoverPartVerbosityLevel(e,t,i))}};$k=iUe([Om(1,Di),Om(2,Xo),Om(3,nt),Om(4,ve),Om(5,Ft),Om(6,du),Om(7,oi)],$k);class TE{constructor(e,t,i){this.hoverPart=e,this.hoverElement=t,this.disposables=i}dispose(){this.disposables.dispose()}}class oUe{constructor(e,t,i,s,o,r,a,l,c,d,u){this._hoverParticipant=i,this._editor=s,this._languageService=o,this._openerService=r,this._commandService=a,this._keybindingService=l,this._hoverService=c,this._configurationService=d,this._onFinishedRendering=u,this._ongoingHoverOperations=new Map,this._disposables=new Q,this.renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._disposables.add(xe(()=>{this.renderedHoverParts.forEach(h=>{h.dispose()}),this._ongoingHoverOperations.forEach(h=>{h.tokenSource.dispose(!0)})}))}_renderHoverParts(e,t,i){return e.sort(mo(s=>s.ordinal,Dl)),e.map(s=>{const o=this._renderHoverPart(s,i);return t.appendChild(o.hoverElement),o})}_renderHoverPart(e,t){const i=this._renderMarkdownHover(e,t),s=i.hoverElement,o=e.source,r=new Q;if(r.add(i),!o)return new TE(e,s,r);const a=o.supportsVerbosityAction(ur.Increase),l=o.supportsVerbosityAction(ur.Decrease);if(!a&&!l)return new TE(e,s,r);const c=_w("div.verbosity-actions");return s.prepend(c),r.add(this._renderHoverExpansionAction(c,ur.Increase,a)),r.add(this._renderHoverExpansionAction(c,ur.Decrease,l)),new TE(e,s,r)}_renderMarkdownHover(e,t){return xme(this._editor,e,this._languageService,this._openerService,t)}_renderHoverExpansionAction(e,t,i){const s=new Q,o=t===ur.Increase,r=ne(e,_w(Re.asCSSSelector(o?nUe:sUe)));r.tabIndex=0;const a=new hy("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(s.add(this._hoverService.setupManagedHover(a,r,aUe(this._keybindingService,t))),!i)return r.classList.add("disabled"),s;r.classList.add("enabled");const l=()=>this._commandService.executeCommand(t===ur.Increase?bO:vO);return s.add(new sue(r,l)),s.add(new oue(r,l,[3,10])),s}async updateMarkdownHoverPartVerbosityLevel(e,t,i=!0){const s=this._editor.getModel();if(!s)return;const o=this._getRenderedHoverPartAtIndex(t),r=o==null?void 0:o.hoverPart.source;if(!o||!(r!=null&&r.supportsVerbosityAction(e)))return;const a=await this._fetchHover(r,s,e);if(!a)return;const l=new Sme(a,r.hoverProvider,r.hoverPosition),c=o.hoverPart,d=new Cl(this._hoverParticipant,c.range,a.contents,c.isBeforeContent,c.ordinal,l),u=this._renderHoverPart(d,this._onFinishedRendering);return this._replaceRenderedHoverPartAtIndex(t,u,d),i&&this._focusOnHoverPartWithIndex(t),{hoverPart:d,hoverElement:u.hoverElement}}async _fetchHover(e,t,i){let s=i===ur.Increase?1:-1;const o=e.hoverProvider,r=this._ongoingHoverOperations.get(o);r&&(r.tokenSource.cancel(),s+=r.verbosityDelta);const a=new Pi;this._ongoingHoverOperations.set(o,{verbosityDelta:s,tokenSource:a});const l={verbosityRequest:{verbosityDelta:s,previousHover:e.hover}};let c;try{c=await Promise.resolve(o.provideHover(t,e.hoverPosition,a.token,l))}catch(d){en(d)}return a.dispose(),this._ongoingHoverOperations.delete(o),c}_replaceRenderedHoverPartAtIndex(e,t,i){if(e>=this.renderedHoverParts.length||e<0)return;const s=this.renderedHoverParts[e],o=s.hoverElement,r=t.hoverElement,a=Array.from(r.children);o.replaceChildren(...a);const l=new TE(i,o,t.disposables);o.focus(),s.dispose(),this.renderedHoverParts[e]=l}_focusOnHoverPartWithIndex(e){this.renderedHoverParts[e].hoverElement.focus()}_getRenderedHoverPartAtIndex(e){return this.renderedHoverParts[e]}dispose(){this._disposables.dispose()}}function rUe(n,e,t,i,s){e.sort(mo(r=>r.ordinal,Dl));const o=[];for(const r of e)o.push(xme(t,r,i,s,n.onContentsChanged));return new Eb(o)}function xme(n,e,t,i,s){const o=new Q,r=_w("div.hover-row"),a=_w("div.hover-row-contents");r.appendChild(a);const l=e.contents;for(const d of l){if(my(d))continue;const u=_w("div.markdown-hover"),h=ne(u,_w("div.hover-contents")),f=o.add(new Mh({editor:n},t,i));o.add(f.onDidRenderAsync(()=>{h.className="hover-contents code-hover-contents",s()}));const g=o.add(f.render(d));h.appendChild(g.element),a.appendChild(u)}return{hoverPart:e,hoverElement:r,dispose(){o.dispose()}}}function aUe(n,e){switch(e){case ur.Increase:{const t=n.lookupKeybinding(bO);return t?p("increaseVerbosityWithKb","Increase Hover Verbosity ({0})",t.getLabel()):p("increaseVerbosity","Increase Hover Verbosity")}case ur.Decrease:{const t=n.lookupKeybinding(vO);return t?p("decreaseVerbosityWithKb","Decrease Hover Verbosity ({0})",t.getLabel()):p("decreaseVerbosity","Decrease Hover Verbosity")}}}function u9(n,e){return!!n[e]}class c5{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=u9(e.event,t.triggerModifier),this.hasSideBySideModifier=u9(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class Hte{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=u9(e,t.triggerModifier)}}class PE{constructor(e,t,i,s){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=s}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function jte(n){return n==="altKey"?ct?new PE(57,"metaKey",6,"altKey"):new PE(5,"ctrlKey",6,"altKey"):ct?new PE(6,"altKey",57,"metaKey"):new PE(6,"altKey",5,"ctrlKey")}class CO extends U{constructor(e,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new j),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new j),this.onExecute=this._onExecute.event,this._onCancel=this._register(new j),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(t==null?void 0:t.extractLineNumberFromMouseEvent)??(i=>i.target.position?i.target.position.lineNumber:0),this._opts=jte(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(i=>{if(i.hasChanged(78)){const s=jte(this._editor.getOption(78));if(this._opts.equals(s))return;this._opts=s,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(i=>this._onEditorMouseMove(new c5(i,this._opts)))),this._register(this._editor.onMouseDown(i=>this._onEditorMouseDown(new c5(i,this._opts)))),this._register(this._editor.onMouseUp(i=>this._onEditorMouseUp(new c5(i,this._opts)))),this._register(this._editor.onKeyDown(i=>this._onEditorKeyDown(new Hte(i,this._opts)))),this._register(this._editor.onKeyUp(i=>this._onEditorKeyUp(new Hte(i,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(i=>this._onDidChangeCursorSelection(i))),this._register(this._editor.onDidChangeModel(i=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(i=>{(i.scrollTopChanged||i.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}class kme{constructor(e,t){this.range=e,this.direction=t}}class J${constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new J$(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){try{const t=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t==null?void 0:t.tooltip)??this.hint.tooltip,this.hint.label=(t==null?void 0:t.label)??this.hint.label,this.hint.textEdits=(t==null?void 0:t.textEdits)??this.hint.textEdits,this._isResolved=!0}catch(t){en(t),this._isResolved=!1}}}const Rw=class Rw{static async create(e,t,i,s){const o=[],r=e.ordered(t).reverse().map(a=>i.map(async l=>{try{const c=await a.provideInlayHints(t,l,s);(c!=null&&c.hints.length||a.onDidChangeInlayHints)&&o.push([c??Rw._emptyInlayHintList,a])}catch(c){en(c)}}));if(await Promise.all(r.flat()),s.isCancellationRequested||t.isDisposed())throw new Pl;return new Rw(i,o,t)}constructor(e,t,i){this._disposables=new Q,this.ranges=e,this.provider=new Set;const s=[];for(const[o,r]of t){this._disposables.add(o),this.provider.add(r);for(const a of o.hints){const l=i.validatePosition(a.position);let c="before";const d=Rw._getRangeAtPosition(i,l);let u;d.getStartPosition().isBefore(l)?(u=E.fromPositions(d.getStartPosition(),l),c="after"):(u=E.fromPositions(l,d.getEndPosition()),c="before"),s.push(new J$(a,new kme(u,c),r))}}this.items=s.sort((o,r)=>H.compare(o.hint.position,r.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,s=e.getWordAtPosition(t);if(s)return new E(i,s.startColumn,i,s.endColumn);e.tokenization.tokenizeIfCheap(i);const o=e.tokenization.getLineTokens(i),r=t.column-1,a=o.findTokenIndexAtOffset(r);let l=o.getStartOffset(a),c=o.getEndOffset(a);return c-l===1&&(l===r&&a>1?(l=o.getStartOffset(a-1),c=o.getEndOffset(a-1)):c===r&&a<o.getCount()-1&&(l=o.getStartOffset(a+1),c=o.getEndOffset(a+1))),new E(i,l+1,i,c+1)}};Rw._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});let qP=Rw;function lUe(n){return Le.from({scheme:je.command,path:n.id,query:n.arguments&&encodeURIComponent(JSON.stringify(n.arguments))}).toString()}var cUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},yu=function(n,e){return function(t,i){e(t,i,n)}};let Wl=class extends Ik{constructor(e,t,i,s,o,r,a,l,c,d,u,h,f){super(e,{...s.getRawOptions(),overflowWidgetsDomNode:s.getOverflowWidgetsDomNode()},i,o,r,a,l,c,d,u,h,f),this._parentEditor=s,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(s.onDidChangeConfiguration(g=>this._onParentConfigurationChanged(g)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){XR(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};Wl=cUe([yu(4,ke),yu(5,kt),yu(6,oi),yu(7,Ae),yu(8,kn),yu(9,rn),yu(10,Nr),yu(11,Ri),yu(12,ve)],Wl);const Vte=new te(new Ct(0,122,204)),dUe={showArrow:!0,showFrame:!0,className:"",frameColor:Vte,arrowColor:Vte,keepEditorSelection:!1},uUe="vs.editor.contrib.zoneWidget";class hUe{constructor(e,t,i,s,o,r,a,l){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=s,this.showInHiddenAreas=a,this.ordinal=l,this._onDomNodeTop=o,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class fUe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}const R2=class R2{constructor(e){this._editor=e,this._ruleName=R2._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),CB(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){CB(this._ruleName),nT(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:E.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}};R2._IdGenerator=new rU(".arrow-decoration-");let h9=R2;class gUe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new Q,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=Bu(t),XR(this.options,dUe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(i=>{const s=this._getWidth(i);this.domNode.style.width=s+"px",this.domNode.style.left=this._getLeft(i)+"px",this._onWidth(s)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new h9(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){const i=e-this._decoratingElementsHeight();this.container.style.height=`${i}px`;const s=this.editor.getLayoutInfo();this._doLayout(i,this._getWidth(s))}(t=this._resizeSash)==null||t.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const i=E.isIRange(e)?E.lift(e):E.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId.set([{range:i,options:ze.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)==null||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const e=this.editor.getOption(67);let t=0;if(this.options.showArrow){const i=Math.round(e/3);t+=2*i}if(this.options.showFrame){const i=Math.round(e/9);t+=2*i}return t}_showImpl(e,t){const i=e.getStartPosition(),s=this.editor.getLayoutInfo(),o=this._getWidth(s);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(s)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){const h=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,h)}let l=0,c=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(a/3),this._arrow.height=l,this._arrow.show(i)),this.options.showFrame&&(c=Math.round(a/9)),this.editor.changeViewZones(h=>{this._viewZone&&h.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new hUe(r,i.lineNumber,i.column,t,f=>this._onViewZoneTop(f),f=>this._onViewZoneHeight(f),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=h.addZone(this._viewZone),this._overlayWidget=new fUe(uUe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const h=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=h+"px",this.container.style.borderBottomWidth=h+"px"}const d=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=d+"px",this.container.style.overflow="hidden"),this._doLayout(d,o),this.options.keepEditorSelection||this.editor.setSelection(e);const u=this.editor.getModel();if(u){const h=u.validateRange(new E(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(h,h.startLineNumber===u.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new xs(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const i=(t.currentY-e.startY)/this.editor.getOption(67),s=i<0?Math.ceil(i):Math.floor(i),o=e.heightInLines+s;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}var Lme=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Dme=function(n,e){return function(t,i){e(t,i,n)}};const Eme=dt("IPeekViewService");mt(Eme,class{constructor(){this._widgets=new Map}addExclusiveWidget(n,e){const t=this._widgets.get(n);t&&(t.listener.dispose(),t.widget.dispose());const i=()=>{const s=this._widgets.get(n);s&&s.widget===e&&(s.listener.dispose(),this._widgets.delete(n))};this._widgets.set(n,{widget:e,listener:e.onDidClose(i)})}},1);var Go;(function(n){n.inPeekEditor=new me("inReferenceSearchEditor",!0,p("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),n.notInPeekEditor=n.inPeekEditor.toNegated()})(Go||(Go={}));var FC;let KP=(FC=class{constructor(e,t){e instanceof Wl&&Go.inPeekEditor.bindTo(t)}dispose(){}},FC.ID="editor.contrib.referenceController",FC);KP=Lme([Dme(1,Ae)],KP);wt(KP.ID,KP,0);function mUe(n){const e=n.get(kt).getFocusedCodeEditor();return e instanceof Wl?e.getParentEditor():e}const pUe={headerBackgroundColor:te.white,primaryHeadingColor:te.fromHex("#333333"),secondaryHeadingColor:te.fromHex("#6c6c6cb3")};let GP=class extends gUe{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new j,this.onDidClose=this._onDidClose.event,XR(this.options,pUe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=ce(".head"),this._bodyElement=ce(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=ce(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),Fi(this._titleElement,"click",o=>this._onTitleClick(o))),ne(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=ce("span.filename"),this._secondaryHeading=ce("span.dirname"),this._metaHeading=ce("span.meta"),ne(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=ce(".peekview-actions");ne(this._headElement,i);const s=this._getActionBarOptions();this._actionbarWidget=new ca(i,s),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new br("peekview.close",p("label.close","Close"),Re.asClassName(ae.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:Uue.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:os(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,hr(this._metaHeading)):ro(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const i=Math.ceil(this.editor.getOption(67)*1.2),s=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};GP=Lme([Dme(2,ke)],GP);const _Ue=T("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:te.black,hcLight:te.white},p("peekViewTitleBackground","Background color of the peek view title area.")),Nme=T("peekViewTitleLabel.foreground",{dark:te.white,light:te.black,hcDark:te.white,hcLight:cu},p("peekViewTitleForeground","Color of the peek view title.")),Ime=T("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},p("peekViewTitleInfoForeground","Color of the peek view title info.")),bUe=T("peekView.border",{dark:Qd,light:Qd,hcDark:vt,hcLight:vt},p("peekViewBorder","Color of the peek view borders and arrow.")),vUe=T("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:te.black,hcLight:te.white},p("peekViewResultsBackground","Background color of the peek view result list."));T("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:te.white,hcLight:cu},p("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));T("peekViewResult.fileForeground",{dark:te.white,light:"#1E1E1E",hcDark:te.white,hcLight:cu},p("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));T("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},p("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));T("peekViewResult.selectionForeground",{dark:te.white,light:"#6C6C6C",hcDark:te.white,hcLight:cu},p("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const Tme=T("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:te.black,hcLight:te.white},p("peekViewEditorBackground","Background color of the peek view editor."));T("peekViewEditorGutter.background",Tme,p("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));T("peekViewEditorStickyScroll.background",Tme,p("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor."));T("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},p("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));T("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},p("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));T("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:vi,hcLight:vi},p("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));class om{constructor(e,t,i,s){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=s,this.id=uH.nextId()}get uri(){return this.link.uri}get range(){return this._range??this.link.targetSelectionRange??this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var t;const e=(t=this.parent.getPreview(this))==null?void 0:t.preview(this.range);return e?p({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",e.value,Ya(this.uri),this.range.startLineNumber,this.range.startColumn):p("aria.oneReference","in {0} on line {1} at column {2}",Ya(this.uri),this.range.startLineNumber,this.range.startColumn)}}class wUe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:s,startColumn:o,endLineNumber:r,endColumn:a}=e,l=i.getWordUntilPosition({lineNumber:s,column:o-t}),c=new E(s,l.startColumn,s,o),d=new E(r,a,r,1073741824),u=i.getValueInRange(c).replace(/^\s+/,""),h=i.getValueInRange(e),f=i.getValueInRange(d).replace(/\s+$/,"");return{value:u+h+f,highlight:{start:u.length,end:u.length+h.length}}}}class qk{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new Zn}dispose(){Qt(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?p("aria.fileReferences.1","1 symbol in {0}, full path {1}",Ya(this.uri),this.uri.fsPath):p("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,Ya(this.uri),this.uri.fsPath)}async resolve(e){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const i=await e.createModelReference(t.uri);this._previews.set(t.uri,new wUe(i))}catch(i){He(i)}return this}}class Cr{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new j,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;e.sort(Cr._compareReferences);let s;for(const o of e)if((!s||!wi.isEqual(s.uri,o.uri,!0))&&(s=new qk(this,o.uri),this.groups.push(s)),s.children.length===0||Cr._compareReferences(o,s.children[s.children.length-1])!==0){const r=new om(i===o,s,o,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),s.children.push(r)}}dispose(){Qt(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Cr(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?p("aria.result.0","No results found"):this.references.length===1?p("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?p("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):p("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let s=i.children.indexOf(e);const o=i.children.length,r=i.parent.groups.length;return r===1||t&&s+1<o||!t&&s>0?(t?s=(s+1)%o:s=(s+o-1)%o,i.children[s]):(s=i.parent.groups.indexOf(i),t?(s=(s+1)%r,i.parent.groups[s].children[0]):(s=(s+r-1)%r,i.parent.groups[s].children[i.parent.groups[s].children.length-1]))}nearestReference(e,t){const i=this.references.map((s,o)=>({idx:o,prefixLen:$g(s.uri.toString(),e.toString()),offsetDist:Math.abs(s.range.startLineNumber-t.lineNumber)*100+Math.abs(s.range.startColumn-t.column)})).sort((s,o)=>s.prefixLen>o.prefixLen?-1:s.prefixLen<o.prefixLen?1:s.offsetDist<o.offsetDist?-1:s.offsetDist>o.offsetDist?1:0)[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&E.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return wi.compare(e.uri,t.uri)||E.compareRangesUsingStarts(e.range,t.range)}}var yO=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},SO=function(n,e){return function(t,i){e(t,i,n)}},f9;let g9=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Cr||e instanceof qk}getChildren(e){if(e instanceof Cr)return e.groups;if(e instanceof qk)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};g9=yO([SO(0,Zo)],g9);class CUe{getHeight(){return 23}getTemplateId(e){return e instanceof qk?YP.id:ZP.id}}let m9=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof om){const i=(t=e.parent.getPreview(e))==null?void 0:t.preview(e.range);if(i)return i.value}return Ya(e.uri)}};m9=yO([SO(0,Ft)],m9);class yUe{getId(e){return e instanceof om?e.id:e.uri}}let p9=class extends U{constructor(e,t){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new sP(i,{supportHighlights:!0})),this.badge=new dj(ne(i,ce(".count")),{},Vue),e.appendChild(i)}set(e,t){const i=AA(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const s=e.children.length;this.badge.setCount(s),s>1?this.badge.setTitleFormat(p("referencesCount","{0} references",s)):this.badge.setTitleFormat(p("referenceCount","{0} reference",s))}};p9=yO([SO(1,_y)],p9);var f_;let YP=(f_=class{constructor(e){this._instantiationService=e,this.templateId=f9.id}renderTemplate(e){return this._instantiationService.createInstance(p9,e)}renderElement(e,t,i){i.set(e.element,BL(e.filterData))}disposeTemplate(e){e.dispose()}},f9=f_,f_.id="FileReferencesRenderer",f_);YP=f9=yO([SO(0,ke)],YP);class SUe extends U{constructor(e){super(),this.label=this._register(new _g(e))}set(e,t){var s;const i=(s=e.parent.getPreview(e))==null?void 0:s.preview(e.range);if(!i||!i.value)this.label.set(`${Ya(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:o,highlight:r}=i;t&&!Ic.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(o,BL(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(o,[r]))}}}const A2=class A2{constructor(){this.templateId=A2.id}renderTemplate(e){return new SUe(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}};A2.id="OneReferenceRenderer";let ZP=A2;class xUe{getWidgetAriaLabel(){return p("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var kUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Cv=function(n,e){return function(t,i){e(t,i,n)}};const O2=class O2{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Q,this._callOnModelChange=new Q,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],i=[];for(let s=0,o=e.children.length;s<o;s++){const r=e.children[s];this._decorationIgnoreSet.has(r.id)||r.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:r.range,options:O2.DecorationOptions}),i.push(s))}this._editor.changeDecorations(s=>{const o=s.deltaDecorations([],t);for(let r=0;r<o.length;r++)this._decorations.set(o[r],e.children[i[r]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,s]of this._decorations){const o=t.getDecorationRange(i);if(!o)continue;let r=!1;if(!E.equalsRange(o,s.range)){if(E.spansMultipleLines(o))r=!0;else{const a=s.range.endColumn-s.range.startColumn,l=o.endColumn-o.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(s.id),e.push(i)):s.range=o}}for(let i=0,s=e.length;i<s;i++)this._decorations.delete(e[i]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}};O2.DecorationOptions=ze.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});let _9=O2;class LUe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const s=JSON.parse(e);t=s.ratio,i=s.heightInLines}catch{}return{ratio:t||.7,heightInLines:i||18}}}class DUe extends bj{}let b9=class extends GP{constructor(e,t,i,s,o,r,a,l,c){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._keybindingService=c,this._disposeOnNewModel=new Q,this._callOnDispose=new Q,this._onDidSelectReference=new j,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new jt(0,0),this._isClosing=!1,this._applyTheme(s.getColorTheme()),this._callOnDispose.add(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}get isClosing(){return this._isClosing}dispose(){this._isClosing=!0,this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Qt(this._preview),Qt(this._previewNotAvailableMessage),Qt(this._tree),Qt(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(bUe)||te.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(_Ue)||te.transparent,primaryHeadingColor:e.getColor(Nme),secondaryHeadingColor:e.getColor(Ime)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=ne(e,ce("div.messages")),ro(this._messageContainer),this._splitView=new Rhe(e,{orientation:1}),this._previewContainer=ne(e,ce("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Wl,this._previewContainer,t,{},this.editor),ro(this._previewContainer),this._previewNotAvailableMessage=this._instantiationService.createInstance(Cc,p("missingPreviewMessage","no preview available"),_o,Cc.DEFAULT_CREATION_OPTIONS,null),this._treeContainer=ne(e,ce("div.ref-tree.inline"));const i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new xUe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(m9),identityProvider:new yUe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:vUe}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Fi(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(DUe,"ReferencesWidget",this._treeContainer,new CUe,[this._instantiationService.createInstance(YP),this._instantiationService.createInstance(ZP)],this._instantiationService.createInstance(g9),i),this._splitView.addView({onDidChange:ue.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},QT.Distribute),this._splitView.addView({onDidChange:ue.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},QT.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const s=(o,r)=>{o instanceof om&&(r==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:r,source:"tree"}))};this._disposables.add(this._tree.onDidOpen(o=>{o.sideBySide?s(o.element,"side"):o.editorOptions.pinned?s(o.element,"goto"):s(o.element,"show")})),ro(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new jt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=p("noResults","No results"),hr(this._messageContainer),Promise.resolve(void 0)):(ro(this._messageContainer),this._decorationsManager=new _9(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:i}=e;if(t.detail!==2)return;const s=this._getFocusedReference();s&&this._onDidSelectReference.fire({element:{uri:s.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),hr(this._treeContainer),hr(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof om)return e;if(e instanceof qk&&e.children.length>0)return e.children[0]}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==je.inMemory?this.setTitle(y2e(e.uri),this._uriLabel.getUriLabel(AA(e.uri))):this.setTitle(p("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent),this._tree.reveal(e));const s=await i;if(!this._model){s.dispose();return}Qt(this._previewModelReference);const o=s.object;if(o){const r=this._preview.getModel()===o.textEditorModel?0:1,a=E.lift(e.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(o.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()}};b9=kUe([Cv(3,kn),Cv(4,Zo),Cv(5,ke),Cv(6,Eme),Cv(7,_y),Cv(8,Ft)],b9);var EUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},yv=function(n,e){return function(t,i){e(t,i,n)}},XN;const Jb=new me("referenceSearchVisible",!1,p("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));var g_;let Nb=(g_=class{static get(e){return e.getContribution(XN.ID)}constructor(e,t,i,s,o,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=s,this._notificationService=o,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new Q,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Jb.bindTo(i)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)==null||e.dispose(),(t=this._model)==null||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let s;if(this._widget&&(s=this._widget.position),this.closeWidget(),s&&e.containsPosition(s))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",r=LUe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(b9,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(p("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget?(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget.isClosing||this.closeWidget(),this._widget=void 0):this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:d}=l;if(c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":i?this._gotoReference(c,!0):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)==null||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(p("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const d=this._editor.getModel().uri,u=new H(e.startLineNumber,e.startColumn),h=this._model.nearestReference(d,u);if(h)return this._widget.setSelection(h).then(()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const s=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();await this._widget.setSelection(s),await this._gotoReference(s,!1),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}async revealReference(e){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(e)}closeWidget(e=!0){var t,i;(t=this._widget)==null||t.dispose(),(i=this._model)==null||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var s;(s=this._widget)==null||s.hide(),this._ignoreModelChangeEvent=!0;const i=E.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:i,selectionSource:"code.jump",pinned:t}},this._editor).then(o=>{if(this._ignoreModelChangeEvent=!1,!o||!this._widget){this.closeWidget();return}if(this._editor===o)this._widget.show(i),this._widget.focusOnReferenceTree();else{const r=XN.get(o),a=this._model.clone();this.closeWidget(),o.focus(),r==null||r.toggleWidget(i,On(l=>Promise.resolve(a)),this._peekMode??!1)}},o=>{this._ignoreModelChangeEvent=!1,He(o)})}openReference(e,t,i){t||this.closeWidget();const{uri:s,range:o}=e;this._editorService.openCodeEditor({resource:s,options:{selection:o,selectionSource:"code.jump",pinned:i}},this._editor,t)}},XN=g_,g_.ID="editor.contrib.referencesController",g_);Nb=XN=EUe([yv(2,Ae),yv(3,kt),yv(4,rn),yv(5,ke),yv(6,jl),yv(7,nt)],Nb);function ev(n,e){const t=mUe(n);if(!t)return;const i=Nb.get(t);i&&e(i)}Co.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:pn(2089,60),when:X.or(Jb,Go.inPeekEditor),handler(n){ev(n,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Co.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:X.or(Jb,Go.inPeekEditor),handler(n){ev(n,e=>{e.goToNextOrPreviousReference(!0)})}});Co.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:X.or(Jb,Go.inPeekEditor),handler(n){ev(n,e=>{e.goToNextOrPreviousReference(!1)})}});bt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");bt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");bt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");bt.registerCommand("closeReferenceSearch",n=>ev(n,e=>e.closeWidget()));Co.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:X.and(Go.inPeekEditor,X.not("config.editor.stablePeek"))});Co.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:X.and(Jb,X.not("config.editor.stablePeek"),X.or(I.editorTextFocus,Uhe.negate()))});Co.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:X.and(Jb,Khe,zU.negate(),UU.negate()),handler(n){var i;const t=(i=n.get(nl).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof om&&ev(n,s=>s.revealReference(t[0]))}});Co.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:X.and(Jb,Khe,zU.negate(),UU.negate()),handler(n){var i;const t=(i=n.get(nl).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof om&&ev(n,s=>s.openReference(t[0],!0,!0))}});bt.registerCommand("openReference",n=>{var i;const t=(i=n.get(nl).lastFocusedList)==null?void 0:i.getFocus();Array.isArray(t)&&t[0]instanceof om&&ev(n,s=>s.openReference(t[0],!1,!0))});var Pme=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},R0=function(n,e){return function(t,i){e(t,i,n)}};const eq=new me("hasSymbols",!1,p("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),xO=dt("ISymbolNavigationService");let v9=class{constructor(e,t,i,s){this._editorService=t,this._notificationService=i,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=eq.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)==null||e.dispose(),(t=this._currentMessage)==null||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new w9(this._editorService),s=i.onDidChange(o=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let c=!1,d=!1;for(const u of t.references)if(ok(u.uri,a.uri))c=!0,d=d||E.containsPosition(u.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=El(i,s)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:E.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var i;(i=this._currentMessage)==null||i.dispose();const e=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),t=e?p("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,e.getLabel()):p("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(t)}};v9=Pme([R0(0,Ae),R0(1,kt),R0(2,rn),R0(3,Ft)],v9);mt(xO,v9,1);fe(new class extends xn{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:eq,kbOpts:{weight:100,primary:70}})}runEditorCommand(n,e){return n.get(xO).revealNext(e)}});Co.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:eq,primary:9,handler(n){n.get(xO).reset()}});let w9=class{constructor(e){this._listener=new Map,this._disposables=new Q,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Qt(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,El(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))==null||t.dispose(),this._listener.delete(e)}};w9=Pme([R0(0,kt)],w9);function C9(n,e){return e.uri.scheme===n.uri.scheme?!0:!_B(e.uri,je.walkThroughSnippet,je.vscodeChatCodeBlock,je.vscodeChatCodeCompareBlock)}async function lD(n,e,t,i,s){const r=t.ordered(n,i).map(l=>Promise.resolve(s(l,n,e)).then(void 0,c=>{en(c)})),a=await Promise.all(r);return Tl(a.flat()).filter(l=>C9(n,l))}function cD(n,e,t,i,s){return lD(e,t,n,i,(o,r,a)=>o.provideDefinition(r,a,s))}function tq(n,e,t,i,s){return lD(e,t,n,i,(o,r,a)=>o.provideDeclaration(r,a,s))}function iq(n,e,t,i,s){return lD(e,t,n,i,(o,r,a)=>o.provideImplementation(r,a,s))}function nq(n,e,t,i,s){return lD(e,t,n,i,(o,r,a)=>o.provideTypeDefinition(r,a,s))}function dD(n,e,t,i,s,o){return lD(e,t,n,s,async(r,a,l)=>{var u,h;const c=(u=await r.provideReferences(a,l,{includeDeclaration:!0},o))==null?void 0:u.filter(f=>C9(a,f));if(!i||!c||c.length!==2)return c;const d=(h=await r.provideReferences(a,l,{includeDeclaration:!1},o))==null?void 0:h.filter(f=>C9(a,f));return d&&d.length===1?d:c})}async function fu(n){const e=await n(),t=new Cr(e,""),i=t.references.map(s=>s.link);return t.dispose(),i}Qo("_executeDefinitionProvider",(n,e,t)=>{const i=n.get(ve),s=cD(i.definitionProvider,e,t,!1,Ye.None);return fu(()=>s)});Qo("_executeDefinitionProvider_recursive",(n,e,t)=>{const i=n.get(ve),s=cD(i.definitionProvider,e,t,!0,Ye.None);return fu(()=>s)});Qo("_executeTypeDefinitionProvider",(n,e,t)=>{const i=n.get(ve),s=nq(i.typeDefinitionProvider,e,t,!1,Ye.None);return fu(()=>s)});Qo("_executeTypeDefinitionProvider_recursive",(n,e,t)=>{const i=n.get(ve),s=nq(i.typeDefinitionProvider,e,t,!0,Ye.None);return fu(()=>s)});Qo("_executeDeclarationProvider",(n,e,t)=>{const i=n.get(ve),s=tq(i.declarationProvider,e,t,!1,Ye.None);return fu(()=>s)});Qo("_executeDeclarationProvider_recursive",(n,e,t)=>{const i=n.get(ve),s=tq(i.declarationProvider,e,t,!0,Ye.None);return fu(()=>s)});Qo("_executeReferenceProvider",(n,e,t)=>{const i=n.get(ve),s=dD(i.referenceProvider,e,t,!1,!1,Ye.None);return fu(()=>s)});Qo("_executeReferenceProvider_recursive",(n,e,t)=>{const i=n.get(ve),s=dD(i.referenceProvider,e,t,!1,!0,Ye.None);return fu(()=>s)});Qo("_executeImplementationProvider",(n,e,t)=>{const i=n.get(ve),s=iq(i.implementationProvider,e,t,!1,Ye.None);return fu(()=>s)});Qo("_executeImplementationProvider_recursive",(n,e,t)=>{const i=n.get(ve),s=iq(i.implementationProvider,e,t,!0,Ye.None);return fu(()=>s)});Yn.appendMenuItem(we.EditorContext,{submenu:we.EditorContextPeek,title:p("peek.submenu","Peek"),group:"navigation",order:100});class My{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof My||H.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}}const ul=class ul extends Uc{static all(){return ul._allSymbolNavigationCommands.values()}static _patchConfig(e){const t={...e,f1:!0};if(t.menu)for(const i of _t.wrap(t.menu))(i.id===we.EditorContext||i.id===we.EditorContextPeek)&&(i.when=X.and(e.precondition,i.when));return t}constructor(e,t){super(ul._patchConfig(t)),this.configuration=e,ul._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,s){if(!t.hasModel())return Promise.resolve(void 0);const o=e.get(rn),r=e.get(kt),a=e.get(pm),l=e.get(xO),c=e.get(ve),d=e.get(ke),u=t.getModel(),h=t.getPosition(),f=My.is(i)?i:new My(u,h),g=new nm(t,5),m=ML(this._getLocationModel(c,f.model,f.position,g.token),g.token).then(async _=>{var w;if(!_||g.token.isCancellationRequested)return;yo(_.ariaMessage);let b;if(_.referenceAt(u.uri,h)){const y=this._getAlternativeCommand(t);!ul._activeAlternativeCommands.has(y)&&ul._allSymbolNavigationCommands.has(y)&&(b=ul._allSymbolNavigationCommands.get(y))}const v=_.references.length;if(v===0){if(!this.configuration.muteMessage){const y=u.getWordAtPosition(h);(w=wr.get(t))==null||w.showMessage(this._getNoResultFoundMessage(y),h)}}else if(v===1&&b)ul._activeAlternativeCommands.add(this.desc.id),d.invokeFunction(y=>b.runEditorCommand(y,t,i,s).finally(()=>{ul._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(r,l,t,_,s)},_=>{o.error(_)}).finally(()=>{g.dispose()});return a.showWhile(m,250),m}async _onResult(e,t,i,s,o){const r=this._getGoToPreference(i);if(!(i instanceof Wl)&&(this.configuration.openInPeek||r==="peek"&&s.references.length>1))this._openInPeek(i,s,o);else{const a=s.firstReference(),l=s.references.length>1&&r==="gotoAndPeek",c=await this._openReference(i,e,a,this.configuration.openToSide,!l);l&&c?this._openInPeek(c,s,o):s.dispose(),r==="goto"&&t.put(a)}}async _openReference(e,t,i,s,o){let r;if(MLe(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const a=await t.openCodeEditor({resource:i.uri,options:{selection:E.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,s);if(a){if(o){const l=a.getModel(),c=a.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}}_openInPeek(e,t,i){const s=Nb.get(e);s&&e.hasModel()?s.toggleWidget(i??e.getSelection(),On(o=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}};ul._allSymbolNavigationCommands=new Map,ul._activeAlternativeCommands=new Set;let Fh=ul;class uD extends Fh{async _getLocationModel(e,t,i,s){return new Cr(await cD(e.definitionProvider,t,i,!1,s),p("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?p("noResultWord","No definition found for '{0}'",e.word):p("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}var kg;ni((kg=class extends uD{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:kg.id,title:{...Fe("actions.goToDecl.label","Go to Definition"),mnemonicTitle:p({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:I.hasDefinitionProvider,keybinding:[{when:I.editorTextFocus,primary:70,weight:100},{when:X.and(I.editorTextFocus,Vhe),primary:2118,weight:100}],menu:[{id:we.EditorContext,group:"navigation",order:1.1},{id:we.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),bt.registerCommandAlias("editor.action.goToDeclaration",kg.id)}},kg.id="editor.action.revealDefinition",kg));var Lg;ni((Lg=class extends uD{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:Lg.id,title:Fe("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:X.and(I.hasDefinitionProvider,I.isInEmbeddedEditor.toNegated()),keybinding:[{when:I.editorTextFocus,primary:pn(2089,70),weight:100},{when:X.and(I.editorTextFocus,Vhe),primary:pn(2089,2118),weight:100}]}),bt.registerCommandAlias("editor.action.openDeclarationToTheSide",Lg.id)}},Lg.id="editor.action.revealDefinitionAside",Lg));var Dg;ni((Dg=class extends uD{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Dg.id,title:Fe("actions.previewDecl.label","Peek Definition"),precondition:X.and(I.hasDefinitionProvider,Go.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),keybinding:{when:I.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:we.EditorContextPeek,group:"peek",order:2}}),bt.registerCommandAlias("editor.action.previewDeclaration",Dg.id)}},Dg.id="editor.action.peekDefinition",Dg));class Mme extends Fh{async _getLocationModel(e,t,i,s){return new Cr(await tq(e.declarationProvider,t,i,!1,s),p("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}var m_;ni((m_=class extends Mme{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:m_.id,title:{...Fe("actions.goToDeclaration.label","Go to Declaration"),mnemonicTitle:p({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:X.and(I.hasDeclarationProvider,I.isInEmbeddedEditor.toNegated()),menu:[{id:we.EditorContext,group:"navigation",order:1.3},{id:we.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?p("decl.noResultWord","No declaration found for '{0}'",e.word):p("decl.generic.noResults","No declaration found")}},m_.id="editor.action.revealDeclaration",m_));ni(class extends Mme{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:Fe("actions.peekDecl.label","Peek Declaration"),precondition:X.and(I.hasDeclarationProvider,Go.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),menu:{id:we.EditorContextPeek,group:"peek",order:3}})}});class Rme extends Fh{async _getLocationModel(e,t,i,s){return new Cr(await nq(e.typeDefinitionProvider,t,i,!1,s),p("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?p("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):p("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}var p_;ni((p_=class extends Rme{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:p_.ID,title:{...Fe("actions.goToTypeDefinition.label","Go to Type Definition"),mnemonicTitle:p({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:I.hasTypeDefinitionProvider,keybinding:{when:I.editorTextFocus,primary:0,weight:100},menu:[{id:we.EditorContext,group:"navigation",order:1.4},{id:we.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},p_.ID="editor.action.goToTypeDefinition",p_));var __;ni((__=class extends Rme{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:__.ID,title:Fe("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:X.and(I.hasTypeDefinitionProvider,Go.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),menu:{id:we.EditorContextPeek,group:"peek",order:4}})}},__.ID="editor.action.peekTypeDefinition",__));class Ame extends Fh{async _getLocationModel(e,t,i,s){return new Cr(await iq(e.implementationProvider,t,i,!1,s),p("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?p("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):p("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}var b_;ni((b_=class extends Ame{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:b_.ID,title:{...Fe("actions.goToImplementation.label","Go to Implementations"),mnemonicTitle:p({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:I.hasImplementationProvider,keybinding:{when:I.editorTextFocus,primary:2118,weight:100},menu:[{id:we.EditorContext,group:"navigation",order:1.45},{id:we.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},b_.ID="editor.action.goToImplementation",b_));var v_;ni((v_=class extends Ame{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:v_.ID,title:Fe("actions.peekImplementation.label","Peek Implementations"),precondition:X.and(I.hasImplementationProvider,Go.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),keybinding:{when:I.editorTextFocus,primary:3142,weight:100},menu:{id:we.EditorContextPeek,group:"peek",order:5}})}},v_.ID="editor.action.peekImplementation",v_));class Ome extends Fh{_getNoResultFoundMessage(e){return e?p("references.no","No references found for '{0}'",e.word):p("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}ni(class extends Ome{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...Fe("goToReferences.label","Go to References"),mnemonicTitle:p({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:X.and(I.hasReferenceProvider,Go.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),keybinding:{when:I.editorTextFocus,primary:1094,weight:100},menu:[{id:we.EditorContext,group:"navigation",order:1.45},{id:we.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,i,s){return new Cr(await dD(e.referenceProvider,t,i,!0,!1,s),p("ref.title","References"))}});ni(class extends Ome{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:Fe("references.action.label","Peek References"),precondition:X.and(I.hasReferenceProvider,Go.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),menu:{id:we.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,i,s){return new Cr(await dD(e.referenceProvider,t,i,!1,!1,s),p("ref.title","References"))}});class NUe extends Fh{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:Fe("label.generic","Go to Any Symbol"),precondition:X.and(Go.notInPeekEditor,I.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}async _getLocationModel(e,t,i,s){return new Cr(this._references,p("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&p("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){return this._gotoMultipleBehaviour??e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}bt.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Le},{name:"position",description:"The position at which to start",constraint:H.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(n,e,t,i,s,o,r)=>{xt(Le.isUri(e)),xt(H.isIPosition(t)),xt(Array.isArray(i)),xt(typeof s>"u"||typeof s=="string"),xt(typeof r>"u"||typeof r=="boolean");const a=n.get(kt),l=await a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(nu(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const d=new class extends NUe{_getNoResultFoundMessage(u){return o||super._getNoResultFoundMessage(u)}}({muteMessage:!o,openInPeek:!!r,openToSide:!1},i,s);c.get(ke).invokeFunction(d.run.bind(d),l)})}});bt.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Le},{name:"position",description:"The position at which to start",constraint:H.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(n,e,t,i,s)=>{n.get(oi).executeCommand("editor.action.goToLocations",e,t,i,s,void 0,!0)}});bt.registerCommand({id:"editor.action.findReferences",handler:(n,e,t)=>{xt(Le.isUri(e)),xt(H.isIPosition(t));const i=n.get(ve),s=n.get(kt);return s.openCodeEditor({resource:e},s.getFocusedCodeEditor()).then(o=>{if(!nu(o)||!o.hasModel())return;const r=Nb.get(o);if(!r)return;const a=On(c=>dD(i.referenceProvider,o.getModel(),H.lift(t),!1,!1,c).then(d=>new Cr(d,p("ref.title","References")))),l=new E(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});bt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");async function IUe(n,e,t,i){const s=n.get(Zo),o=n.get(Er),r=n.get(oi),a=n.get(ke),l=n.get(rn);if(await i.item.resolve(Ye.None),!i.part.location)return;const c=i.part.location,d=[],u=new Set(Yn.getMenuItems(we.EditorContext).map(f=>Xw(f)?f.command.id:pO()));for(const f of Fh.all())u.has(f.desc.id)&&d.push(new br(f.desc.id,vr.label(f.desc,{renderShortTitle:!0}),void 0,!0,async()=>{const g=await s.createModelReference(c.uri);try{const m=new My(g.object.textEditorModel,E.getStartPosition(c.range)),_=i.item.anchor.range;await a.invokeFunction(f.runEditorCommand.bind(f),e,m,_)}finally{g.dispose()}}));if(i.part.command){const{command:f}=i.part;d.push(new Wn),d.push(new br(f.id,f.title,void 0,!0,async()=>{try{await r.executeCommand(f.id,...f.arguments??[])}catch(g){l.notify({severity:SA.Error,source:i.item.provider.displayName,message:g})}}))}const h=e.getOption(128);o.showContextMenu({domForShadowRoot:h?e.getDomNode()??void 0:void 0,getAnchor:()=>{const f=Qi(t);return{x:f.left,y:f.top+f.height+8}},getActions:()=>d,onHide:()=>{e.focus()},autoSelectFirstItem:!0})}async function Fme(n,e,t,i){const o=await n.get(Zo).createModelReference(i.uri);await t.invokeWithinContext(async r=>{const a=e.hasSideBySideModifier,l=r.get(Ae),c=Go.inPeekEditor.getValue(l),d=!a&&t.getOption(89)&&!c;return new uD({openToSide:a,openInPeek:d,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(r,new My(o.object.textEditorModel,E.getStartPosition(i.range)),E.lift(i.range))}),o.dispose()}var TUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Sv=function(n,e){return function(t,i){e(t,i,n)}},Fv;class QP{constructor(){this._entries=new lu(50)}get(e){const t=QP._key(e);return this._entries.get(t)}set(e,t){const i=QP._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const Wme=dt("IInlayHintsCache");mt(Wme,QP,1);class y9{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class PUe{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}var dh;let Kk=(dh=class{static get(e){return e.getContribution(Fv.ID)??void 0}constructor(e,t,i,s,o,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=s,this._commandService=o,this._notificationService=r,this._instaService=a,this._disposables=new Q,this._sessionDisposables=new Q,this._decorationsMetadata=new Map,this._ruleFactory=new mP(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(142)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(142);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if(e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(Ju.getInstance().event(c=>{if(!this._editor.hasModel())return;const d=c.altKey&&c.ctrlKey&&!(c.shiftKey||c.metaKey)?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;const u=this._editor.getModel(),h=this._copyInlayHintsWithCurrentAnchor(u);this._updateHintsDecorators([u.getFullModelRange()],h),r.schedule(0)}}))}const i=this._inlayHintsCache.get(t);i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add(xe(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let s;const o=new Set,r=new $t(async()=>{const a=Date.now();s==null||s.dispose(!0),s=new Pi;const l=t.onWillDispose(()=>s==null?void 0:s.cancel());try{const c=s.token,d=await qP.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(r.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(const u of d.provider)typeof u.onDidChangeInlayHints=="function"&&!o.has(u)&&(o.add(u),this._sessionDisposables.add(u.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){He(c)}finally{s.dispose(),l.dispose()}},this._debounceInfo.get(t));this._sessionDisposables.add(r),this._sessionDisposables.add(xe(()=>s==null?void 0:s.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{s==null||s.cancel();const l=Math.max(r.delay,1250);r.schedule(l)})),this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new Q,t=e.add(new CO(this._editor)),i=new Q;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown(s=>{const[o]=s,r=this._getInlayHintLabelPart(o),a=this._editor.getModel();if(!r||!a){i.clear();return}const l=new Pi;i.add(xe(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new PUe(r,o.hasTriggerModifier):void 0;const c=a.validatePosition(r.item.hint.position).lineNumber,d=new E(c,1,c,a.getLineMaxColumn(c)),u=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],u),i.add(xe(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],u)}))})),e.add(t.onCancel(()=>i.clear())),e.add(t.onExecute(async s=>{const o=this._getInlayHintLabelPart(s);if(o){const r=o.part;r.location?this._instaService.invokeFunction(Fme,s,this._editor,r.location):pW.is(r.command)&&await this._invokeCommand(r.command,o.item)}})),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(t.event.detail!==2)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),await i.item.resolve(Ye.None),Ys(i.item.hint.textEdits))){const s=i.item.hint.textEdits.map(o=>Ii.replace(E.lift(o.range),o.text));this._editor.executeEdits("inlayHint.default",s),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!Fn(e.event.target))return;const t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(IUe,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){var i;if(e.target.type!==6)return;const t=(i=e.target.detail.injectedText)==null?void 0:i.options;if(t instanceof em&&(t==null?void 0:t.attachedData)instanceof y9)return t.attachedData}async _invokeCommand(e,t){try{await this._commandService.executeCommand(e.id,...e.arguments??[])}catch(i){this._notificationService.notify({severity:SA.Error,source:t.provider.displayName,message:i})}}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,s]of this._decorationsMetadata){if(t.has(s.item))continue;const o=e.getDecorationRange(i);if(o){const r=new kme(o,s.item.anchor.direction),a=s.item.with({anchor:r});t.set(s.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),s=[];for(const o of i.sort(E.compareRangesUsingStarts)){const r=t.validateRange(new E(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));s.length===0||!E.areIntersectingOrTouching(s[s.length-1],r)?s.push(r):s[s.length-1]=E.plusRange(s[s.length-1],r)}return s}_updateHintsDecorators(e,t){var g,m;const i=[],s=(_,b,v,w,y)=>{const S={content:v,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:b.className,cursorStops:w,attachedData:y};i.push({item:_,classNameRef:b,decoration:{range:_.anchor.range,options:{description:"InlayHint",showIfCollapsed:_.anchor.range.isEmpty(),collapseOnReplaceEdit:!_.anchor.range.isEmpty(),stickiness:0,[_.anchor.direction]:this._activeRenderMode===0?S:void 0}}})},o=(_,b)=>{const v=this._ruleFactory.createClassNameRef({width:`${r/3|0}px`,display:"inline-block"});s(_,v,"",b?xl.Right:xl.None)},{fontSize:r,fontFamily:a,padding:l,isUniform:c}=this._getLayoutInfo(),d="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(d,a);let u={line:0,totalLen:0};for(const _ of t){if(u.line!==_.anchor.range.startLineNumber&&(u={line:_.anchor.range.startLineNumber,totalLen:0}),u.totalLen>Fv._MAX_LABEL_LEN)continue;_.hint.paddingLeft&&o(_,!1);const b=typeof _.hint.label=="string"?[{label:_.hint.label}]:_.hint.label;for(let v=0;v<b.length;v++){const w=b[v],y=v===0,S=v===b.length-1,x={fontSize:`${r}px`,fontFamily:`var(${d}), ${po.fontFamily}`,verticalAlign:c?"baseline":"middle",unicodeBidi:"isolate"};Ys(_.hint.textEdits)&&(x.cursor="default"),this._fillInColors(x,_.hint),(w.command||w.location)&&((g=this._activeInlayHintPart)==null?void 0:g.part.item)===_&&this._activeInlayHintPart.part.index===v&&(x.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(x.color=ji(ePe),x.cursor="pointer")),l&&(y&&S?(x.padding=`1px ${Math.max(1,r/4)|0}px`,x.borderRadius=`${r/4|0}px`):y?(x.padding=`1px 0 1px ${Math.max(1,r/4)|0}px`,x.borderRadius=`${r/4|0}px 0 0 ${r/4|0}px`):S?(x.padding=`1px ${Math.max(1,r/4)|0}px 1px 0`,x.borderRadius=`0 ${r/4|0}px ${r/4|0}px 0`):x.padding="1px 0 1px 0");let k=w.label;u.totalLen+=k.length;let D=!1;const N=u.totalLen-Fv._MAX_LABEL_LEN;if(N>0&&(k=k.slice(0,-N)+"",D=!0),s(_,this._ruleFactory.createClassNameRef(x),MUe(k),S&&!_.hint.paddingRight?xl.Right:xl.None,new y9(_,v)),D)break}if(_.hint.paddingRight&&o(_,!0),i.length>Fv._MAX_DECORATORS)break}const h=[];for(const[_,b]of this._decorationsMetadata){const v=(m=this._editor.getModel())==null?void 0:m.getDecorationRange(_);v&&e.some(w=>w.containsRange(v))&&(h.push(_),b.classNameRef.dispose(),this._decorationsMetadata.delete(_))}const f=Vc.capture(this._editor);this._editor.changeDecorations(_=>{const b=_.deltaDecorations(h,i.map(v=>v.decoration));for(let v=0;v<b.length;v++){const w=i[v];this._decorationsMetadata.set(b[v],w)}}),f.restore(this._editor)}_fillInColors(e,t){t.kind===GI.Parameter?(e.backgroundColor=ji(lPe),e.color=ji(aPe)):t.kind===GI.Type?(e.backgroundColor=ji(rPe),e.color=ji(oPe)):(e.backgroundColor=ji($z),e.color=ji(Uz))}_getLayoutInfo(){const e=this._editor.getOption(142),t=e.padding,i=this._editor.getOption(52),s=this._editor.getOption(49);let o=e.fontSize;(!o||o<5||o>i)&&(o=i);const r=e.fontFamily||s;return{fontSize:o,fontFamily:r,padding:t,isUniform:!t&&r===s&&o===i}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},Fv=dh,dh.ID="editor.contrib.InlayHints",dh._MAX_DECORATORS=1500,dh._MAX_LABEL_LEN=43,dh);Kk=Fv=TUe([Sv(1,ve),Sv(2,_a),Sv(3,Wme),Sv(4,oi),Sv(5,rn),Sv(6,ke)],Kk);function MUe(n){return n.replace(/[ \t]/g,"")}bt.registerCommand("_executeInlayHintProvider",async(n,...e)=>{const[t,i]=e;xt(Le.isUri(t)),xt(E.isIRange(i));const{inlayHintsProvider:s}=n.get(ve),o=await n.get(Zo).createModelReference(t);try{const r=await qP.create(s,o.object.textEditorModel,[E.lift(i)],Ye.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{o.dispose()}});var RUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},sf=function(n,e){return function(t,i){e(t,i,n)}};class zte extends YN{constructor(e,t,i,s){super(10,t,e.item.anchor.range,i,s,!0),this.part=e}}let XP=class extends $k{constructor(e,t,i,s,o,r,a,l,c){super(e,t,i,r,l,s,o,c),this._resolverService=a,this.hoverOrdinal=6}suggestHoverAnchor(e){var s;if(!Kk.get(this._editor)||e.target.type!==6)return null;const i=(s=e.target.detail.injectedText)==null?void 0:s.options;return i instanceof em&&i.attachedData instanceof y9?new zte(i.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof zte?new ta(async s=>{const{part:o}=e;if(await o.item.resolve(i),i.isCancellationRequested)return;let r;typeof o.item.hint.tooltip=="string"?r=new Ds().appendText(o.item.hint.tooltip):o.item.hint.tooltip&&(r=o.item.hint.tooltip),r&&s.emitOne(new Cl(this,e.range,[r],!1,0)),Ys(o.item.hint.textEdits)&&s.emitOne(new Cl(this,e.range,[new Ds().appendText(p("hint.dbl","Double-click to insert"))],!1,10001));let a;if(typeof o.part.tooltip=="string"?a=new Ds().appendText(o.part.tooltip):o.part.tooltip&&(a=o.part.tooltip),a&&s.emitOne(new Cl(this,e.range,[a],!1,1)),o.part.location||o.part.command){let c;const u=this._editor.getOption(78)==="altKey"?ct?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):ct?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");o.part.location&&o.part.command?c=new Ds().appendText(p("hint.defAndCommand","Go to Definition ({0}), right click for more",u)):o.part.location?c=new Ds().appendText(p("hint.def","Go to Definition ({0})",u)):o.part.command&&(c=new Ds(`[${p("hint.cmd","Execute Command")}](${lUe(o.part.command)} "${o.part.command.title}") (${u})`,{isTrusted:!0})),c&&s.emitOne(new Cl(this,e.range,[c],!1,1e4))}const l=await this._resolveInlayHintLabelPartHover(o,i);for await(const c of l)s.emitOne(c)}):ta.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return ta.EMPTY;const{uri:i,range:s}=e.part.location,o=await this._resolverService.createModelReference(i);try{const r=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?X$(this._languageFeaturesService.hoverProvider,r,new H(s.startLineNumber,s.startColumn),t).filter(a=>!my(a.hover.contents)).map(a=>new Cl(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):ta.EMPTY}finally{o.dispose()}}};XP=RUe([sf(1,Di),sf(2,Xo),sf(3,Ft),sf(4,du),sf(5,nt),sf(6,Zo),sf(7,ve),sf(8,oi)],XP);class sq extends U{constructor(e,t,i,s,o,r){super();const a=t.anchor,l=t.hoverParts;this._renderedHoverParts=this._register(new S9(e,i,l,r,o));const{showAtPosition:c,showAtSecondaryPosition:d}=sq.computeHoverPositions(e,a.range,l);this.shouldAppearBeforeContent=l.some(u=>u.isBeforeContent),this.showAtPosition=c,this.showAtSecondaryPosition=d,this.initialMousePosX=a.initialMousePosX,this.initialMousePosY=a.initialMousePosY,this.shouldFocus=s.shouldFocus,this.source=s.source}get domNode(){return this._renderedHoverParts.domNode}get domNodeHasChildren(){return this._renderedHoverParts.domNodeHasChildren}get focusedHoverPartIndex(){return this._renderedHoverParts.focusedHoverPartIndex}async updateHoverVerbosityLevel(e,t,i){this._renderedHoverParts.updateHoverVerbosityLevel(e,t,i)}isColorPickerVisible(){return this._renderedHoverParts.isColorPickerVisible()}static computeHoverPositions(e,t,i){let s=1;if(e.hasModel()){const d=e._getViewModel(),u=d.coordinatesConverter,h=u.convertModelRangeToViewRange(t),f=d.getLineMinColumn(h.startLineNumber),g=new H(h.startLineNumber,f);s=u.convertViewPositionToModelPosition(g).column}const o=t.startLineNumber;let r=t.startColumn,a;for(const d of i){const u=d.range,h=u.startLineNumber===o,f=u.endLineNumber===o;if(h&&f){const m=u.startColumn,_=Math.min(r,m);r=Math.max(_,s)}d.forceShowAtRange&&(a=u)}let l,c;if(a){const d=a.getStartPosition();l=d,c=d}else l=t.getStartPosition(),c=new H(o,r);return{showAtPosition:l,showAtSecondaryPosition:c}}}class AUe{constructor(e,t){this._statusBar=t,e.appendChild(this._statusBar.hoverElement)}get hoverElement(){return this._statusBar.hoverElement}get actions(){return this._statusBar.actions}dispose(){this._statusBar.dispose()}}const F2=class F2 extends U{constructor(e,t,i,s,o){super(),this._renderedParts=[],this._focusedHoverPartIndex=-1,this._context=o,this._fragment=document.createDocumentFragment(),this._register(this._renderParts(t,i,o,s)),this._register(this._registerListenersOnRenderedParts()),this._register(this._createEditorDecorations(e,i)),this._updateMarkdownAndColorParticipantInfo(t)}_createEditorDecorations(e,t){if(t.length===0)return U.None;let i=t[0].range;for(const o of t){const r=o.range;i=E.plusRange(i,r)}const s=e.createDecorationsCollection();return s.set([{range:i,options:F2._DECORATION_OPTIONS}]),xe(()=>{s.clear()})}_renderParts(e,t,i,s){const o=new $P(s),r={fragment:this._fragment,statusBar:o,...i},a=new Q;for(const c of e){const d=this._renderHoverPartsForParticipant(t,c,r);a.add(d);for(const u of d.renderedHoverParts)this._renderedParts.push({type:"hoverPart",participant:c,hoverPart:u.hoverPart,hoverElement:u.hoverElement})}const l=this._renderStatusBar(this._fragment,o);return l&&(a.add(l),this._renderedParts.push({type:"statusBar",hoverElement:l.hoverElement,actions:l.actions})),xe(()=>{a.dispose()})}_renderHoverPartsForParticipant(e,t,i){const s=e.filter(r=>r.owner===t);return s.length>0?t.renderHoverParts(i,s):new Eb([])}_renderStatusBar(e,t){if(t.hasContent)return new AUe(e,t)}_registerListenersOnRenderedParts(){const e=new Q;return this._renderedParts.forEach((t,i)=>{const s=t.hoverElement;s.tabIndex=0,e.add(G(s,le.FOCUS_IN,o=>{o.stopPropagation(),this._focusedHoverPartIndex=i})),e.add(G(s,le.FOCUS_OUT,o=>{o.stopPropagation(),this._focusedHoverPartIndex=-1}))}),e}_updateMarkdownAndColorParticipantInfo(e){const t=e.find(i=>i instanceof $k&&!(i instanceof XP));t&&(this._markdownHoverParticipant=t),this._colorHoverParticipant=e.find(i=>i instanceof zk)}async updateHoverVerbosityLevel(e,t,i){if(!this._markdownHoverParticipant)return;const s=this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant,t);if(s===void 0)return;const o=await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(e,s,i);o&&(this._renderedParts[t]={type:"hoverPart",participant:this._markdownHoverParticipant,hoverPart:o.hoverPart,hoverElement:o.hoverElement},this._context.onContentsChanged())}isColorPickerVisible(){var e;return((e=this._colorHoverParticipant)==null?void 0:e.isColorPickerVisible())??!1}_normalizedIndexToMarkdownHoverIndexRange(e,t){const i=this._renderedParts[t];if(!i||i.type!=="hoverPart"||!(i.participant===e))return;const o=this._renderedParts.findIndex(r=>r.type==="hoverPart"&&r.participant===e);if(o===-1)throw new Dt;return t-o}get domNode(){return this._fragment}get domNodeHasChildren(){return this._fragment.hasChildNodes()}get focusedHoverPartIndex(){return this._focusedHoverPartIndex}};F2._DECORATION_OPTIONS=ze.register({description:"content-hover-highlight",className:"hoverHighlight"});let S9=F2;var OUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ute=function(n,e){return function(t,i){e(t,i,n)}};let x9=class extends U{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._currentResult=null,this._onContentsChanged=this._register(new j),this.onContentsChanged=this._onContentsChanged.event,this._contentHoverWidget=this._register(this._instantiationService.createInstance(d9,this._editor)),this._participants=this._initializeHoverParticipants(),this._computer=new UP(this._editor,this._participants),this._hoverOperation=this._register(new wme(this._editor,this._computer)),this._registerListeners()}_initializeHoverParticipants(){const e=[];for(const t of Xb.getAll()){const i=this._instantiationService.createInstance(t,this._editor);e.push(i)}return e.sort((t,i)=>t.hoverOrdinal-i.hoverOrdinal),this._register(this._contentHoverWidget.onDidResize(()=>{this._participants.forEach(t=>{var i;return(i=t.handleResize)==null?void 0:i.call(t)})})),e}_registerListeners(){this._register(this._hoverOperation.onResult(t=>{if(!this._computer.anchor)return;const i=t.hasLoadingMessage?this._addLoadingMessage(t.value):t.value;this._withResult(new Cme(this._computer.anchor,i,t.isComplete))}));const e=this._contentHoverWidget.getDomNode();this._register(Fi(e,"keydown",t=>{t.equals(9)&&this.hide()})),this._register(Fi(e,"mouseleave",t=>{this._onMouseLeave(t)})),this._register(Hi.onDidChange(()=>{this._contentHoverWidget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(e,t,i,s,o){if(!(this._contentHoverWidget.position&&this._currentResult))return e?(this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):!1;const a=this._editor.getOption(60).sticky,l=o&&this._contentHoverWidget.isMouseGettingCloser(o.event.posx,o.event.posy);return a&&l?(e&&this._startHoverOperationIfNecessary(e,t,i,s,!0),!0):e?this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._contentHoverWidget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,s,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,s,o){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=s,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=o,this._hoverOperation.start(t))}_setCurrentResult(e){let t=e;if(this._currentResult===t)return;t&&t.hoverParts.length===0&&(t=null),this._currentResult=t,this._currentResult?this._showHover(this._currentResult):this._hideHover()}_addLoadingMessage(e){if(!this._computer.anchor)return e;for(const t of this._participants){if(!t.createLoadingMessage)continue;const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}return e}_withResult(e){if(this._contentHoverWidget.position&&this._currentResult&&this._currentResult.isComplete||this._setCurrentResult(e),!e.isComplete)return;const s=e.hoverParts.length===0,o=this._computer.insistOnKeepingHoverVisible;s&&o||this._setCurrentResult(e)}_showHover(e){const t=this._getHoverContext();this._renderedContentHover=new sq(this._editor,e,this._participants,this._computer,t,this._keybindingService),this._renderedContentHover.domNodeHasChildren?this._contentHoverWidget.show(this._renderedContentHover):this._renderedContentHover.dispose()}_hideHover(){this._contentHoverWidget.hide()}_getHoverContext(){return{hide:()=>{this.hide()},onContentsChanged:()=>{this._onContentsChanged.fire(),this._contentHoverWidget.onContentsChanged()},setMinimumDimensions:s=>{this._contentHoverWidget.setMinimumDimensions(s)}}}showsOrWillShow(e){if(this._contentHoverWidget.isResizing)return!0;const i=this._findHoverAnchorCandidates(e);if(!(i.length>0))return this._startShowingOrUpdateHover(null,0,0,!1,e);const o=i[0];return this._startShowingOrUpdateHover(o,0,0,!1,e)}_findHoverAnchorCandidates(e){const t=[];for(const s of this._participants){if(!s.suggestHoverAnchor)continue;const o=s.suggestHoverAnchor(e);o&&t.push(o)}const i=e.target;switch(i.type){case 6:{t.push(new l5(0,i.range,e.event.posx,e.event.posy));break}case 7:{const s=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;if(!(!i.detail.isAfterLines&&typeof i.detail.horizontalDistanceToText=="number"&&i.detail.horizontalDistanceToText<s))break;t.push(new l5(0,i.range,e.event.posx,e.event.posy));break}}return t.sort((s,o)=>o.priority-s.priority),t}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!wO(t,e.x,e.y))&&this.hide()}startShowingAtRange(e,t,i,s){this._startShowingOrUpdateHover(new l5(0,e,void 0,void 0),t,i,s,null)}async updateHoverVerbosityLevel(e,t,i){var s;(s=this._renderedContentHover)==null||s.updateHoverVerbosityLevel(e,t,i)}focusedHoverPartIndex(){var e;return((e=this._renderedContentHover)==null?void 0:e.focusedHoverPartIndex)??-1}containsNode(e){return e?this._contentHoverWidget.getDomNode().contains(e):!1}focus(){this._contentHoverWidget.focus()}scrollUp(){this._contentHoverWidget.scrollUp()}scrollDown(){this._contentHoverWidget.scrollDown()}scrollLeft(){this._contentHoverWidget.scrollLeft()}scrollRight(){this._contentHoverWidget.scrollRight()}pageUp(){this._contentHoverWidget.pageUp()}pageDown(){this._contentHoverWidget.pageDown()}goToTop(){this._contentHoverWidget.goToTop()}goToBottom(){this._contentHoverWidget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}getDomNode(){return this._contentHoverWidget.getDomNode()}get isColorPickerVisible(){var e;return((e=this._renderedContentHover)==null?void 0:e.isColorPickerVisible())??!1}get isVisibleFromKeyboard(){return this._contentHoverWidget.isVisibleFromKeyboard}get isVisible(){return this._contentHoverWidget.isVisible}get isFocused(){return this._contentHoverWidget.isFocused}get isResizing(){return this._contentHoverWidget.isResizing}get widget(){return this._contentHoverWidget}};x9=OUe([Ute(1,ke),Ute(2,Ft)],x9);var FUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$te=function(n,e){return function(t,i){e(t,i,n)}},k9;const WUe=!1;var w_;let Qs=(w_=class extends U{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._onHoverContentsChanged=this._register(new j),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new Q,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new $t(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(k9.ID)}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._shouldNotHideCurrentHoverWidget(e)&&this._hideWidgets()}_shouldNotHideCurrentHoverWidget(e){return this._isMouseOnContentHoverWidget(e)||this._isContentWidgetResizing()}_isMouseOnContentHoverWidget(e){var i;const t=(i=this._contentWidget)==null?void 0:i.getDomNode();return t?wO(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._shouldNotHideCurrentHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=(r,a)=>{const l=this._isMouseOnContentHoverWidget(r);return a&&l},s=r=>{var c;const a=this._isMouseOnContentHoverWidget(r),l=((c=this._contentWidget)==null?void 0:c.isColorPickerVisible)??!1;return a&&l},o=(r,a)=>{var l,c,d,u;return(a&&((c=this._contentWidget)==null?void 0:c.containsNode((l=r.event.browserEvent.view)==null?void 0:l.document.activeElement))&&!((u=(d=r.event.browserEvent.view)==null?void 0:d.getSelection())!=null&&u.isCollapsed))??!1};return i(e,t)||s(e)||o(e,t)}_onEditorMouseMove(e){var a,l,c,d;if(this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._mouseMoveEvent=e,(a=this._contentWidget)!=null&&a.isFocused||(l=this._contentWidget)!=null&&l.isResizing))return;const t=this._hoverSettings.sticky;if(t&&((c=this._contentWidget)!=null&&c.isVisibleFromKeyboard))return;if(this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}const s=this._hoverSettings.hidingDelay;if(((d=this._contentWidget)==null?void 0:d.isVisible)&&t&&s>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(s);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var l;if(!e)return;const i=(l=e.target.element)==null?void 0:l.classList.contains("colorpicker-color-decoration"),s=this._editor.getOption(149),o=this._hoverSettings.enabled,r=this._hoverState.activatedByDecoratorClick;if(i&&(s==="click"&&!r||s==="hover"&&!o&&!WUe||s==="clickAndHover"&&!o&&!r)||!i&&!o&&!r){this._hideWidgets();return}this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateContentWidget().showsOrWillShow(e)}_onKeyDown(e){var s;if(!this._editor.hasModel())return;const t=this._keybindingService.softDispatch(e,this._editor.getDomNode()),i=t.kind===1||t.kind===2&&(t.commandId===pme||t.commandId===bO||t.commandId===vO)&&((s=this._contentWidget)==null?void 0:s.isVisible);e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||i||this._hideWidgets()}_hideWidgets(){var e,t;this._hoverState.mouseDown&&((e=this._contentWidget)!=null&&e.isColorPickerVisible)||Py.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,(t=this._contentWidget)==null||t.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(x9,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged(()=>this._onHoverContentsChanged.fire()))),this._contentWidget}showContentHover(e,t,i,s,o=!1){this._hoverState.activatedByDecoratorClick=o,this._getOrCreateContentWidget().startShowingAtRange(e,t,i,s)}_isContentWidgetResizing(){var e;return((e=this._contentWidget)==null?void 0:e.widget.isResizing)||!1}focusedHoverPartIndex(){return this._getOrCreateContentWidget().focusedHoverPartIndex()}updateHoverVerbosityLevel(e,t,i){this._getOrCreateContentWidget().updateHoverVerbosityLevel(e,t,i)}focus(){var e;(e=this._contentWidget)==null||e.focus()}scrollUp(){var e;(e=this._contentWidget)==null||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)==null||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)==null||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)==null||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)==null||e.pageUp()}pageDown(){var e;(e=this._contentWidget)==null||e.pageDown()}goToTop(){var e;(e=this._contentWidget)==null||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)==null||e.goToBottom()}get isColorPickerVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isVisible}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._contentWidget)==null||e.dispose()}},k9=w_,w_.ID="editor.contrib.contentHover",w_);Qs=k9=FUe([$te(1,ke),$te(2,Ft)],Qs);const Bq=class Bq extends U{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(149);if(t!=="click"&&t!=="clickAndHover")return;const i=e.target;if(i.type!==6||!i.detail.injectedText||i.detail.injectedText.options.attachedData!==cme||!i.range)return;const s=this._editor.getContribution(Qs.ID);if(s&&!s.isColorPickerVisible){const o=new E(i.range.startLineNumber,i.range.startColumn+1,i.range.endLineNumber,i.range.endColumn+1);s.showContentHover(o,1,0,!1,!0)}}};Bq.ID="editor.contrib.colorContribution";let JP=Bq;wt(JP.ID,JP,2);Xb.register(zk);var Bme=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},bw=function(n,e){return function(t,i){e(t,i,n)}},L9,D9,C_;let Ib=(C_=class extends U{constructor(e,t,i){super(),this._editor=e,this._instantiationService=i,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=I.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=I.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(e=this._standaloneColorPickerWidget)==null||e.focus():this._standaloneColorPickerWidget=this._instantiationService.createInstance(E9,this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(e=this._standaloneColorPickerWidget)==null||e.hide(),this._editor.focus()}insertColor(){var e;(e=this._standaloneColorPickerWidget)==null||e.updateEditor(),this.hide()}static get(e){return e.getContribution(L9.ID)}},L9=C_,C_.ID="editor.contrib.standaloneColorPickerController",C_);Ib=L9=Bme([bw(1,Ae),bw(2,ke)],Ib);wt(Ib.ID,Ib,1);const qte=8,BUe=22;var y_;let E9=(y_=class extends U{constructor(e,t,i,s,o,r,a){var u;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=i,this._keybindingService=o,this._languageFeaturesService=r,this._editorWorkerService=a,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new j),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=s.createInstance(Uk,this._editor),this._position=(u=this._editor._getViewModel())==null?void 0:u.getPrimaryCursorState().modelState.position;const l=this._editor.getSelection(),c=l?{startLineNumber:l.startLineNumber,startColumn:l.startColumn,endLineNumber:l.endLineNumber,endColumn:l.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},d=this._register(Fc(this._body));this._register(d.onDidBlur(h=>{this.hide()})),this._register(d.onDidFocus(h=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(h=>{var g;const f=(g=h.target.element)==null?void 0:g.classList;f&&f.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(h=>{this._render(h.value,h.foundInEditor)})),this._start(c),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return D9.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){const t=await this._computeAsync(e);t&&this._onResult.fire(new HUe(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},i=await this._standaloneColorPickerParticipant.createColorHover(t,new Vk(this._editorWorkerService),this._languageFeaturesService.colorProvider);return i?{result:i.colorHover,foundInEditor:i.foundInEditor}:null}_render(e,t){const i=document.createDocumentFragment(),s=this._register(new $P(this._keybindingService)),o={fragment:i,statusBar:s,onContentsChanged:()=>{},hide:()=>this.hide()};this._colorHover=e;const r=this._standaloneColorPickerParticipant.renderHoverParts(o,[e]);if(!r)return;this._register(r.disposables);const a=r.colorPicker;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(i),a.layout();const l=a.body,c=l.saturationBox.domNode.clientWidth,d=l.domNode.clientWidth-c-BUe-qte,u=a.body.enterButton;u==null||u.onClicked(()=>{this.updateEditor(),this.hide()});const h=a.header,f=h.pickedColorNode;f.style.width=c+qte+"px";const g=h.originalColorNode;g.style.width=d+"px";const m=a.header.closeButton;m==null||m.onClicked(()=>{this.hide()}),t&&(u&&(u.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}},D9=y_,y_.ID="editor.contrib.standaloneColorPickerWidget",y_);E9=D9=Bme([bw(3,ke),bw(4,Ft),bw(5,ve),bw(6,Jo)],E9);class HUe{constructor(e,t){this.value=e,this.foundInEditor=t}}class jUe extends Uc{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...Fe("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:p({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:we.CommandPalette}],metadata:{description:Fe("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(e,t){var i;(i=Ib.get(t))==null||i.showOrFocus()}}class VUe extends _e{constructor(){super({id:"editor.action.hideColorPicker",label:p({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:I.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:Fe("hideColorPickerDescription","Hide the standalone color picker.")}})}run(e,t){var i;(i=Ib.get(t))==null||i.hide()}}class zUe extends _e{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:p({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:I.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:Fe("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(e,t){var i;(i=Ib.get(t))==null||i.insertColor()}}se(VUe);se(zUe);ni(jUe);class eg{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const s=t.length,o=e.length;if(i+s>o)return!1;for(let r=0;r<s;r++){const a=e.charCodeAt(i+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,i,s,o,r){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,u=o.getLineContent(a),h=o.getLineContent(c);let f=u.lastIndexOf(t,l-1+t.length),g=h.indexOf(i,d-1-i.length);if(f!==-1&&g!==-1)if(a===c)u.substring(f+t.length,g).indexOf(i)>=0&&(f=-1,g=-1);else{const _=u.substring(f+t.length),b=h.substring(0,g);(_.indexOf(i)>=0||b.indexOf(i)>=0)&&(f=-1,g=-1)}let m;f!==-1&&g!==-1?(s&&f+t.length<u.length&&u.charCodeAt(f+t.length)===32&&(t=t+" "),s&&g>0&&h.charCodeAt(g-1)===32&&(i=" "+i,g-=1),m=eg._createRemoveBlockCommentOperations(new E(a,f+t.length+1,c,g+1),t,i)):(m=eg._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=m.length===1?i:null);for(const _ of m)r.addTrackedEditOperation(_.range,_.text)}static _createRemoveBlockCommentOperations(e,t,i){const s=[];return E.isEmpty(e)?s.push(Ii.delete(new E(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(s.push(Ii.delete(new E(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),s.push(Ii.delete(new E(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),s}static _createAddBlockCommentOperations(e,t,i,s){const o=[];return E.isEmpty(e)?o.push(Ii.replace(new E(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(o.push(Ii.insert(new H(e.startLineNumber,e.startColumn),t+(s?" ":""))),o.push(Ii.insert(new H(e.endLineNumber,e.endColumn),(s?" ":"")+i))),o}getEditOperations(e,t){const i=this._selection.startLineNumber,s=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);const o=e.getLanguageIdAtPosition(i,s),r=this.languageConfigurationService.getLanguageConfiguration(o).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(i.length===2){const s=i[0],o=i[1];return new Ce(s.range.endLineNumber,s.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{const s=i[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new Ce(s.endLineNumber,s.endColumn+o,s.endLineNumber,s.endColumn+o)}}}class Tu{constructor(e,t,i,s,o,r,a){this.languageConfigurationService=e,this._selection=t,this._indentSize=i,this._type=s,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,i,s){e.tokenization.tokenizeIfCheap(t);const o=e.getLanguageIdAtPosition(t,1),r=s.getLanguageConfiguration(o).comments,a=r?r.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,d=i-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,i,s,o,r,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let u=0,h=s.length;u<h;u++){const f=s[u],g=o+u;if(g===o&&a){f.ignore=!0;continue}const m=i.getLineContent(g),_=Zs(m);if(_===-1){f.ignore=r,f.commentStrOffset=m.length;continue}if(c=!1,f.ignore=!1,f.commentStrOffset=_,d&&!eg._haystackHasNeedleAtOffset(m,f.commentStr,_)&&(e===0?d=!1:e===1||(f.ignore=!0)),d&&t){const b=_+f.commentStrLength;b<m.length&&m.charCodeAt(b)===32&&(f.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let u=0,h=s.length;u<h;u++)s[u].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:s}}static _gatherPreflightData(e,t,i,s,o,r,a,l){const c=Tu._gatherPreflightCommentStrings(i,s,o,l);return c===null?{supported:!1}:Tu._analyzeLines(e,t,i,c,s,r,a,l)}_executeLineComments(e,t,i,s){let o;i.shouldRemoveComments?o=Tu._createRemoveLineCommentsOperations(i.lines,s.startLineNumber):(Tu._normalizeInsertionPoint(e,i.lines,s.startLineNumber,this._indentSize),o=this._createAddLineCommentsOperations(i.lines,s.startLineNumber));const r=new H(s.positionLineNumber,s.positionColumn);for(let a=0,l=o.length;a<l;a++)t.addEditOperation(o[a].range,o[a].text),E.isEmpty(o[a].range)&&E.getStartPosition(o[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(o[a].text||"").length);this._selectionId=t.trackSelection(s)}_attemptRemoveBlockComment(e,t,i,s){let o=t.startLineNumber,r=t.endLineNumber;const a=s.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(o).lastIndexOf(i,a-1),c=e.getLineContent(r).indexOf(s,t.endColumn-1-i.length);return l!==-1&&c===-1&&(c=e.getLineContent(o).indexOf(s,l+i.length),r=o),l===-1&&c!==-1&&(l=e.getLineContent(r).lastIndexOf(i,c),o=r),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(o).indexOf(i),l!==-1&&(c=e.getLineContent(o).indexOf(s,l+i.length))),l!==-1&&e.getLineContent(o).charCodeAt(l+i.length)===32&&(i+=" "),c!==-1&&e.getLineContent(r).charCodeAt(c-1)===32&&(s=" "+s,c-=1),l!==-1&&c!==-1?eg._createRemoveBlockCommentOperations(new E(o,l+i.length+1,r,c+1),i,s):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);const s=e.getLanguageIdAtPosition(i.startLineNumber,1),o=this.languageConfigurationService.getLanguageConfiguration(s).comments;if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const r=o.blockCommentStartToken,a=o.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,i,r,a);if(!l){if(i.isEmpty()){const c=e.getLineContent(i.startLineNumber);let d=Zs(c);d===-1&&(d=c.length),l=eg._createAddBlockCommentOperations(new E(i.startLineNumber,d+1,i.startLineNumber,c.length+1),r,a,this._insertSpace)}else l=eg._createAddBlockCommentOperations(new E(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new E(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(i);return}i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const s=Tu._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return s.supported?this._executeLineComments(e,t,s,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new Ce(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const i=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];r.ignore||i.push(Ii.delete(new E(t+s,r.commentStrOffset+1,t+s,r.commentStrOffset+r.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){const i=[],s=this._insertSpace?" ":"";for(let o=0,r=e.length;o<r;o++){const a=e[o];a.ignore||i.push(Ii.insert(new H(t+o,a.commentStrOffset+1),a.commentStr+s))}return i}static nextVisibleColumn(e,t,i,s){return i?e+(t-e%t):e+s}static _normalizeInsertionPoint(e,t,i,s){let o=1073741824,r,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(i+l);let u=0;for(let h=0,f=t[l].commentStrOffset;u<o&&h<f;h++)u=Tu.nextVisibleColumn(u,s,d.charCodeAt(h)===9,1);u<o&&(o=u)}o=Math.floor(o/s)*s;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(i+l);let u=0;for(r=0,a=t[l].commentStrOffset;u<o&&r<a;r++)u=Tu.nextVisibleColumn(u,s,d.charCodeAt(r)===9,1);u>o?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}}class oq extends _e{constructor(e,t){super(t),this._type=e}run(e,t){const i=e.get(Ri);if(!t.hasModel())return;const s=t.getModel(),o=[],r=s.getOptions(),a=t.getOption(23),l=t.getSelections().map((d,u)=>({selection:d,index:u,ignoreFirstLine:!1}));l.sort((d,u)=>E.compareRangesUsingStarts(d.selection,u.selection));let c=l[0];for(let d=1;d<l.length;d++){const u=l[d];c.selection.endLineNumber===u.selection.startLineNumber&&(c.index<u.index?u.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=u))}for(const d of l)o.push(new Tu(i,d.selection,r.indentSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class UUe extends oq{constructor(){super(0,{id:"editor.action.commentLine",label:p("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:we.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class $Ue extends oq{constructor(){super(1,{id:"editor.action.addCommentLine",label:p("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2081),weight:100}})}}class qUe extends oq{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2099),weight:100}})}}class KUe extends _e{constructor(){super({id:"editor.action.blockComment",label:p("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:we.MenubarEditMenu,group:"5_insert",title:p({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const i=e.get(Ri);if(!t.hasModel())return;const s=t.getOption(23),o=[],r=t.getSelections();for(const a of r)o.push(new eg(a,s.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}se(UUe);se($Ue);se(qUe);se(KUe);var GUe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Fm=function(n,e){return function(t,i){e(t,i,n)}},N9,S_;let Ry=(S_=class{static get(e){return e.getContribution(N9.ID)}constructor(e,t,i,s,o,r,a,l){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=s,this._keybindingService=o,this._menuService=r,this._configurationService=a,this._workspaceContextService=l,this._toDispose=new Q,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(c=>this._onContextMenu(c))),this._toDispose.add(this._editor.onMouseWheel(c=>{if(this._contextMenuIsBeingShownCount>0){const d=this._contextViewService.getContextViewElement(),u=c.srcElement;u.shadowRoot&&db(d)===u.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(c=>{this._editor.getOption(24)&&c.keyCode===58&&(c.preventDefault(),c.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let i=!1;for(const s of this._editor.getSelections())if(s.containsPosition(e.target.position)){i=!0;break}i||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],s=this._menuService.getMenuActions(t,this._contextKeyService,{arg:e.uri});for(const o of s){const[,r]=o;let a=0;for(const l of r)if(l instanceof Jw){const c=this._getMenuActions(e,l.item.submenu);c.length>0&&(i.push(new ry(l.id,l.label,c)),a++)}else i.push(l),a++;a&&i.push(new Wn)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let s=t;if(!s){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=Qi(this._editor.getDomNode()),l=a.left+r.left,c=a.top+r.top+r.height;s={x:l,y:c}}const o=this._editor.getOption(128)&&!Ac;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:o?this._editor.getOverflowWidgetsDomNode()??this._editor.getDomNode():void 0,getAnchor:()=>s,getActions:()=>e,getActionViewItem:r=>{const a=this._keybindingFor(r);if(a)return new wy(r,r,{label:!0,keybinding:a.getLabel(),isMenu:!0});const l=r;return typeof l.getActionViewItem=="function"?l.getActionViewItem():new wy(r,r,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:r=>this._keybindingFor(r),onHide:r=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||qRe(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(73);let i=0;const s=c=>({id:`menu-action-${++i}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run}),o=(c,d)=>new ry(`menu-action-${++i}`,c,d,void 0),r=(c,d,u,h,f)=>{if(!d)return s({label:c,enabled:d,run:()=>{}});const g=_=>()=>{this._configurationService.updateValue(u,_)},m=[];for(const _ of f)m.push(s({label:_.label,checked:h===_.value,run:g(_.value)}));return o(c,m)},a=[];a.push(s({label:p("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new Wn),a.push(s({label:p("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(r(p("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:p("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:p("context.minimap.size.fill","Fill"),value:"fill"},{label:p("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(p("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:p("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:p("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(128)&&!Ac;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},N9=S_,S_.ID="editor.contrib.contextmenu",S_);Ry=N9=GUe([Fm(1,Er),Fm(2,zh),Fm(3,Ae),Fm(4,Ft),Fm(5,pa),Fm(6,nt),Fm(7,pb)],Ry);class YUe extends _e{constructor(){super({id:"editor.action.showContextMenu",label:p("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:1092,weight:100}})}run(e,t){var i;(i=Ry.get(t))==null||i.showContextMenu()}}wt(Ry.ID,Ry,2);se(YUe);class d5{constructor(e){this.selections=e}equals(e){const t=this.selections.length,i=e.selections.length;if(t!==i)return!1;for(let s=0;s<t;s++)if(!this.selections[s].equalsSelection(e.selections[s]))return!1;return!0}}class u5{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}const W2=class W2 extends U{static get(e){return e.getContribution(W2.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const i=new d5(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new u5(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new u5(new d5(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new u5(new d5(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}};W2.ID="editor.contrib.cursorUndoRedoController";let Ay=W2;class ZUe extends _e{constructor(){super({id:"cursorUndo",label:p("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:2099,weight:100}})}run(e,t,i){var s;(s=Ay.get(t))==null||s.cursorUndo()}}class QUe extends _e{constructor(){super({id:"cursorRedo",label:p("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){var s;(s=Ay.get(t))==null||s.cursorRedo()}}wt(Ay.ID,Ay,0);se(ZUe);se(QUe);class XUe{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new E(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new Ce(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new Ce(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new Ce(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Ce(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Ce(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function xv(n){return ct?n.altKey:n.ctrlKey}const yf=class yf extends U{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(35)||this._editor.getOption(22)||(xv(e)&&(this._modifierPressed=!0),this._mouseDown&&xv(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(35)||this._editor.getOption(22)||(xv(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===yf.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const s=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(s.length===1)this._dragSelection=s[0];else return}xv(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new H(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let i=null;if(e.event.shiftKey){const s=this._editor.getSelection();if(s){const{selectionStartLineNumber:o,selectionStartColumn:r}=s;i=[new Ce(o,r,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map(s=>s.containsPosition(t)?new Ce(t.lineNumber,t.column,t.lineNumber,t.column):s);this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(xv(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(yf.ID,new XUe(this._dragSelection,t,xv(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new E(e.lineNumber,e.column,e.lineNumber,e.column),options:yf._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};yf.ID="editor.contrib.dragAndDrop",yf.TRIGGER_KEY_VALUE=ct?6:5,yf._DECORATION_OPTIONS=ze.register({description:"dnd-target",className:"dnd-target"});let eM=yf;wt(eM.ID,eM,2);wt(Oh.ID,Oh,0);p1(U8);fe(new class extends xn{constructor(){super({id:Vge,precondition:$$,kbOpts:{weight:100,primary:2137}})}runEditorCommand(n,e){var t;return(t=Oh.get(e))==null?void 0:t.changePasteType()}});fe(new class extends xn{constructor(){super({id:"editor.hidePasteWidget",precondition:$$,kbOpts:{weight:100,primary:9}})}runEditorCommand(n,e){var t;(t=Oh.get(e))==null||t.clearWidgets()}});var x_;se((x_=class extends _e{constructor(){super({id:"editor.action.pasteAs",label:p("pasteAs","Paste As..."),alias:"Paste As...",precondition:I.writable,metadata:{description:"Paste as",args:[{name:"args",schema:x_.argsSchema}]}})}run(e,t,i){var o;let s=typeof(i==null?void 0:i.kind)=="string"?i.kind:void 0;return!s&&i&&(s=typeof i.id=="string"?i.id:void 0),(o=Oh.get(t))==null?void 0:o.pasteAs(s?new ki(s):void 0)}},x_.argsSchema={type:"object",properties:{kind:{type:"string",description:p("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},x_));se(class extends _e{constructor(){super({id:"editor.action.pasteAsText",label:p("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:I.writable})}run(n,e){var t;return(t=Oh.get(e))==null?void 0:t.pasteAs({providerId:Sb.id})}});class JUe{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}}class Kte{constructor(e){this.identifier=e}}const Hme=dt("treeViewsDndService");mt(Hme,JUe,1);var e$e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ME=function(n,e){return function(t,i){e(t,i,n)}},I9;const jme="editor.experimental.dropIntoEditor.defaultProvider",Vme="editor.changeDropType",rq=new me("dropWidgetVisible",!1,p("dropWidgetVisible","Whether the drop widget is showing"));var k_;let Oy=(k_=class extends U{static get(e){return e.getContribution(I9.ID)}constructor(e,t,i,s,o){super(),this._configService=i,this._languageFeaturesService=s,this._treeViewsDragAndDropService=o,this.treeItemsTransfer=V8.getInstance(),this._dropProgressManager=this._register(t.createInstance(jP,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(zP,"dropIntoEditor",e,rq,{id:Vme,label:p("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(r=>this.onDropIntoEditor(e,r.position,r.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,i){var o;if(!i.dataTransfer||!e.hasModel())return;(o=this._currentOperation)==null||o.cancel(),e.focus(),e.setPosition(t);const s=On(async r=>{const a=new Q,l=a.add(new nm(e,1,void 0,r));try{const c=await this.extractDataTransferData(i);if(c.size===0||l.token.isCancellationRequested)return;const d=e.getModel();if(!d)return;const u=this._languageFeaturesService.documentDropEditProvider.ordered(d).filter(f=>f.dropMimeTypes?f.dropMimeTypes.some(g=>c.matches(g)):!0),h=a.add(await this.getDropEdits(u,d,t,c,l));if(l.token.isCancellationRequested)return;if(h.edits.length){const f=this.getInitialActiveEditIndex(d,h.edits),g=e.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([E.fromPositions(t)],{activeEditIndex:f,allEdits:h.edits},g,async m=>m,r)}}finally{a.dispose(),this._currentOperation===s&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(t,p("dropIntoEditorProgress","Running drop handlers. Click to cancel"),s,{cancel:()=>s.cancel()}),this._currentOperation=s}async getDropEdits(e,t,i,s,o){const r=new Q,a=await ML(Promise.all(e.map(async c=>{try{const d=await c.provideDocumentDropEdits(t,i,s,o.token);return d&&r.add(d),d==null?void 0:d.edits.map(u=>({...u,providerId:c.id}))}catch(d){console.error(d)}})),o.token),l=Tl(a??[]).flat();return{edits:Hge(l),dispose:()=>r.dispose()}}getInitialActiveEditIndex(e,t){const i=this._configService.getValue(jme,{resource:e.uri});for(const[s,o]of Object.entries(i)){const r=new ki(o),a=t.findIndex(l=>r.value===l.providerId&&l.handledMimeType&&Pge(s,[l.handledMimeType]));if(a>=0)return a}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new Tge;const t=Age(e.dataTransfer);if(this.treeItemsTransfer.hasData(Kte.prototype)){const i=this.treeItemsTransfer.getData(Kte.prototype);if(Array.isArray(i))for(const s of i){const o=await this._treeViewsDragAndDropService.removeDragOperationTransfer(s.identifier);if(o)for(const[r,a]of o)t.replace(r,a)}}return t}},I9=k_,k_.ID="editor.contrib.dropIntoEditorController",k_);Oy=I9=e$e([ME(1,ke),ME(2,nt),ME(3,ve),ME(4,Hme)],Oy);wt(Oy.ID,Oy,2);p1(z8);fe(new class extends xn{constructor(){super({id:Vme,precondition:rq,kbOpts:{weight:100,primary:2137}})}runEditorCommand(n,e,t){var i;(i=Oy.get(e))==null||i.changeDropType()}});fe(new class extends xn{constructor(){super({id:"editor.hideDropWidget",precondition:rq,kbOpts:{weight:100,primary:9}})}runEditorCommand(n,e,t){var i;(i=Oy.get(e))==null||i.clearWidgets()}});Mi.as(Hl.Configuration).registerConfiguration({...VL,properties:{[jme]:{type:"object",scope:5,description:p("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}});const Ws=class Ws{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const s=i.options;if(s===Ws._FIND_MATCH_DECORATION||s===Ws._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let s=0,o=this._decorations.length;s<o;s++){const r=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(r)){t=this._decorations[s],i=s+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,Ws._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,s.changeDecorationOptions(this._highlightedDecorationId,Ws._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){const r=o.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);o=new E(o.startLineNumber,o.startColumn,r,a)}this._rangeHighlightDecorationId=s.addDecoration(o,Ws._RANGE_HIGHLIGHT_DECORATION)}}),i}set(e,t){this._editor.changeDecorations(i=>{let s=Ws._FIND_MATCH_DECORATION;const o=[];if(e.length>1e3){s=Ws._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let u=e[0].range.startLineNumber,h=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const m=e[f].range;h+d>=m.startLineNumber?m.endLineNumber>h&&(h=m.endLineNumber):(o.push({range:new E(u,1,h,1),options:Ws._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=m.startLineNumber,h=m.endLineNumber)}o.push({range:new E(u,1,h,1),options:Ws._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:s};this._decorations=i.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>i.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>i.addDecoration(a,Ws._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(!(!s||s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,i=this._decorations.length;t<i;t++){const s=this._decorations[t],o=this._editor.getModel().getDecorationRange(s);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};Ws._CURRENT_FIND_MATCH_DECORATION=ze.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:ji(a4),position:aa.Center},minimap:{color:ji(nH),position:1}}),Ws._FIND_MATCH_DECORATION=ze.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:ji(a4),position:aa.Center},minimap:{color:ji(nH),position:1}}),Ws._FIND_MATCH_NO_OVERVIEW_DECORATION=ze.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),Ws._FIND_MATCH_ONLY_OVERVIEW_DECORATION=ze.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:ji(a4),position:aa.Center}}),Ws._RANGE_HIGHLIGHT_DECORATION=ze.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),Ws._FIND_SCOPE_DECORATION=ze.register({description:"find-scope",className:"findScope",isWholeLine:!0});let T9=Ws;class t$e{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const i=[];for(let r=0;r<this._ranges.length;r++)i.push({range:this._ranges[r],text:this._replaceStrings[r]});i.sort((r,a)=>E.compareRangesUsingStarts(r.range,a.range));const s=[];let o=i[0];for(let r=1;r<i.length;r++)o.range.endLineNumber===i[r].range.startLineNumber&&o.range.endColumn===i[r].range.startColumn?(o.range=o.range.plusRange(i[r].range),o.text=o.text+i[r].text):(s.push(o),o=i[r]);s.push(o);for(const r of s)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function zme(n,e){if(n&&n[0]!==""){const t=Gte(n,e,"-"),i=Gte(n,e,"_");return t&&!i?Yte(n,e,"-"):!t&&i?Yte(n,e,"_"):n[0].toUpperCase()===n[0]?e.toUpperCase():n[0].toLowerCase()===n[0]?e.toLowerCase():XLe(n[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):n[0][0].toUpperCase()!==n[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function Gte(n,e,t){return n[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&n[0].split(t).length===e.split(t).length}function Yte(n,e,t){const i=e.split(t),s=n[0].split(t);let o="";return i.forEach((r,a)=>{o+=zme([s[a]],r)+t}),o.slice(0,-1)}class Zte{constructor(e){this.staticValue=e,this.kind=0}}class i$e{constructor(e){this.pieces=e,this.kind=1}}class Fy{static fromStaticValue(e){return new Fy([Qp.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new Zte(""):e.length===1&&e[0].staticValue!==null?this._state=new Zte(e[0].staticValue):this._state=new i$e(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?zme(e,this._state.staticValue):this._state.staticValue;let i="";for(let s=0,o=this._state.pieces.length;s<o;s++){const r=this._state.pieces[s];if(r.staticValue!==null){i+=r.staticValue;continue}let a=Fy._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){const l=[],c=r.caseOps.length;let d=0;for(let u=0,h=a.length;u<h;u++){if(d>=c){l.push(a.slice(u));break}switch(r.caseOps[d]){case"U":l.push(a[u].toUpperCase());break;case"u":l.push(a[u].toUpperCase()),d++;break;case"L":l.push(a[u].toLowerCase());break;case"l":l.push(a[u].toLowerCase()),d++;break;default:l.push(a[u])}}a=l.join("")}i+=a}return i}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let i="";for(;e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class Qp{static staticValue(e){return new Qp(e,-1,null)}static caseOps(e,t){return new Qp(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,!i||i.length===0?this.caseOps=null:this.caseOps=i.slice(0)}}class n$e{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Qp.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Qp.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Qp.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Fy(this._result)}}function s$e(n){if(!n||n.length===0)return new Fy(null);const e=[],t=new n$e(n);for(let i=0,s=n.length;i<s;i++){const o=n.charCodeAt(i);if(o===92){if(i++,i>=s)break;const r=n.charCodeAt(i);switch(r){case 92:t.emitUnchanged(i-1),t.emitStatic("\\",i+1);break;case 110:t.emitUnchanged(i-1),t.emitStatic(`
`,i+1);break;case 116:t.emitUnchanged(i-1),t.emitStatic("	",i+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(i-1),t.emitStatic("",i+1),e.push(String.fromCharCode(r));break}continue}if(o===36){if(i++,i>=s)break;const r=n.charCodeAt(i);if(r===36){t.emitUnchanged(i-1),t.emitStatic("$",i+1);continue}if(r===48||r===38){t.emitUnchanged(i-1),t.emitMatchIndex(0,i+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(i+1<s){const l=n.charCodeAt(i+1);if(48<=l&&l<=57){i++,a=a*10+(l-48),t.emitUnchanged(i-2),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}t.emitUnchanged(i-1),t.emitMatchIndex(a,i+1,e),e.length=0;continue}}}return t.finalize()}const Kh=new me("findWidgetVisible",!1);Kh.toNegated();const kO=new me("findInputFocussed",!1),aq=new me("replaceInputFocussed",!1),RE={primary:545,mac:{primary:2593}},AE={primary:565,mac:{primary:2613}},OE={primary:560,mac:{primary:2608}},FE={primary:554,mac:{primary:2602}},WE={primary:558,mac:{primary:2606}},ui={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},tg=19999,o$e=240;class MS{constructor(e,t){this._toDispose=new Q,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Bl,this._decorations=new T9(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new $t(()=>{if(this._editor.hasModel())return this.research(!1)},100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(i=>{(i.reason===3||i.reason===5||i.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(i=>{this._ignoreModelContentChanged||(i.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(i=>this._onStateChanged(i))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Qt(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},o$e)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;typeof t<"u"?t!==null&&(Array.isArray(t)?i=t:i=[t]):i=this._decorations.getFindScopes(),i!==null&&(i=i.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new E(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const s=this._findMatches(i,!1,tg);this._decorations.set(s,i);const o=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(o);if(r===0&&s.length>0){const a=Kx(s.map(l=>l.range),l=>E.compareRangesUsingStarts(l,o)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const o=this._editor.getModel();return t||s===1?(i===1?i=o.getLineCount():i--,s=o.getLineMaxColumn(i)):s--,new H(i,s)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<tg){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const i=this._decorations.getFindScope(),s=MS._getSearchRange(this._editor.getModel(),i);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());const{lineNumber:o,column:r}=e,a=this._editor.getModel();let l=new H(o,r),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1)),!!c){if(!t&&!s.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const o=this._editor.getModel();return t||s===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,s=1):s++,new H(i,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i);return}if(this._decorations.getCount()<tg){let i=this._decorations.matchAfterPosition(e);i&&i.isEmpty()&&i.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),i=this._decorations.matchAfterPosition(e)),i&&this._setCurrentFindMatch(i);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,s=!1){if(this._cannotFind())return null;const o=this._decorations.getFindScope(),r=MS._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new H(a,l),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t);return i&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),u=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t)),u?!s&&!r.containsRange(u.range)?this._getNextMatch(u.range.getEndPosition(),t,i,!0):u:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?s$e(this._state.replaceString):Fy.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){const s=e.buildReplaceString(i.matches,this._state.preserveCase),o=new ps(t,s);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new H(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const s=(e||[null]).map(o=>MS._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=tg?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new $m(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null).parseSearchRequest();if(!t)return;let i=t.regex;if(!i.multiline){let u="mu";i.ignoreCase&&(u+="i"),i.global&&(u+="g"),i=new RegExp(i.source,u)}const s=this._editor.getModel(),o=s.getValue(1),r=s.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=o.replace(i,function(){return a.buildReplaceString(arguments,c)}):l=o.replace(i,a.buildReplaceString(null,c));const d=new s$(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let r=0,a=i.length;r<a;r++)s[r]=t.buildReplaceString(i[r].matches,this._state.preserveCase);const o=new t$e(this._editor.getSelection(),i.map(r=>r.range),s);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let i=this._findMatches(e,!1,1073741824).map(o=>new Ce(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn));const s=this._editor.getSelection();for(let o=0,r=i.length;o<r;o++)if(i[o].equalsRange(s)){i=[s].concat(i.slice(0,o)).concat(i.slice(o+1));break}this._editor.setSelections(i)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const B2=class B2 extends ba{constructor(e,t,i){super(),this._hideSoon=this._register(new $t(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const s={inputActiveOptionBorder:pe(NA),inputActiveOptionForeground:pe(IA),inputActiveOptionBackground:pe(FL)},o=this._register(vy());this.caseSensitive=this._register(new Ehe({appendTitle:this._keybindingLabelFor(ui.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:o,...s})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new Nhe({appendTitle:this._keybindingLabelFor(ui.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:o,...s})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new Ihe({appendTitle:this._keybindingLabelFor(ui.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:o,...s})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(r=>{let a=!1;r.isRegex&&(this.regex.checked=this._state.isRegex,a=!0),r.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,a=!0),r.matchCase&&(this.caseSensitive.checked=this._state.matchCase,a=!0),!this._state.isRevealed&&a&&this._revealTemporarily()})),this._register(G(this._domNode,le.MOUSE_LEAVE,r=>this._onMouseLeave())),this._register(G(this._domNode,"mouseover",r=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return B2.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}};B2.ID="editor.contrib.findOptionsWidget";let P9=B2;function BE(n,e){return n===1?!0:n===2?!1:e}class r$e extends U{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return BE(this._isRegexOverride,this._isRegex)}get wholeWord(){return BE(this._wholeWordOverride,this._wholeWord)}get matchCase(){return BE(this._matchCaseOverride,this._matchCase)}get preserveCase(){return BE(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new j),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,i){const s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,o=!0),typeof i<"u"&&(E.equalsRange(this._currentMatch,i)||(this._currentMatch=i,s.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(s)}change(e,t,i=!0){var d;const s={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;const r=this.isRegex,a=this.wholeWord,l=this.matchCase,c=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&((d=e.searchScope)!=null&&d.every(u=>{var h;return(h=this._searchScope)==null?void 0:h.some(f=>!E.equalsRange(f,u))})||(this._searchScope=e.searchScope,s.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,o=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,o=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,r!==this.isRegex&&(o=!0,s.isRegex=!0),a!==this.wholeWord&&(o=!0,s.wholeWord=!0),l!==this.matchCase&&(o=!0,s.matchCase=!0),c!==this.preserveCase&&(o=!0,s.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=tg}}const a$e=p("defaultLabel","input"),l$e=p("label.preserveCaseToggle","Preserve Case");class c$e extends h1{constructor(e){super({icon:ae.preserveCase,title:l$e+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??ko("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class d$e extends ba{constructor(e,t,i,s){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new j),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new j),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new j),this._onInput=this._register(new j),this._onKeyUp=this._register(new j),this._onPreserveCaseKeyDown=this._register(new j),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=s.placeholder||"",this.validation=s.validation,this.label=s.label||a$e;const o=s.appendPreserveCaseLabel||"",r=s.history||[],a=!!s.flexibleHeight,l=!!s.flexibleWidth,c=s.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new The(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:s.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:s.inputBoxStyles})),this.preserveCase=this._register(new c$e({appendTitle:o,isChecked:!1,...s.toggleStyles})),this._register(this.preserveCase.onChange(h=>{this._onDidOptionChange.fire(h),!h&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(h=>{this._onPreserveCaseKeyDown.fire(h)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,h=>{if(h.equals(15)||h.equals(17)||h.equals(9)){const f=d.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let g=-1;h.equals(17)?g=(f+1)%d.length:h.equals(15)&&(f===0?g=d.length-1:g=f-1),h.equals(9)?(d[f].blur(),this.inputBox.focus()):g>=0&&d[g].focus(),gt.stop(h,!0)}}});const u=document.createElement("div");u.className="controls",u.style.display=this._showOptionButtons?"block":"none",u.appendChild(this.preserveCase.domNode),this.domNode.appendChild(u),e==null||e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)==null||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var Ume=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$me=function(n,e){return function(t,i){e(t,i,n)}};const lq=new me("suggestWidgetVisible",!1,p("suggestWidgetVisible","Whether suggestion are visible")),cq="historyNavigationWidgetFocus",qme="historyNavigationForwardsEnabled",Kme="historyNavigationBackwardsEnabled";let bh;const HE=[];function Gme(n,e){if(HE.includes(e))throw new Error("Cannot register the same widget multiple times");HE.push(e);const t=new Q,i=new me(cq,!1).bindTo(n),s=new me(qme,!0).bindTo(n),o=new me(Kme,!0).bindTo(n),r=()=>{i.set(!0),bh=e},a=()=>{i.set(!1),bh===e&&(bh=void 0)};return lA(e.element)&&r(),t.add(e.onDidFocus(()=>r())),t.add(e.onDidBlur(()=>a())),t.add(xe(()=>{HE.splice(HE.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:s,historyNavigationBackwardsEnablement:o,dispose(){t.dispose()}}}let M9=class extends Phe{constructor(e,t,i,s){super(e,t,i);const o=this._register(s.createScoped(this.inputBox.element));this._register(Gme(o,this.inputBox))}};M9=Ume([$me(3,Ae)],M9);let R9=class extends d$e{constructor(e,t,i,s,o=!1){super(e,t,o,i);const r=this._register(s.createScoped(this.inputBox.element));this._register(Gme(r,this.inputBox))}};R9=Ume([$me(3,Ae)],R9);Co.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:X.and(X.has(cq),X.equals(Kme,!0),X.not("isComposing"),lq.isEqualTo(!1)),primary:16,secondary:[528],handler:n=>{bh==null||bh.showPreviousValue()}});Co.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:X.and(X.has(cq),X.equals(qme,!0),X.not("isComposing"),lq.isEqualTo(!1)),primary:18,secondary:[530],handler:n=>{bh==null||bh.showNextValue()}});function Qte(n){var e,t;return((e=n.lookupKeybinding("history.showPrevious"))==null?void 0:e.getElectronAccelerator())==="Up"&&((t=n.lookupKeybinding("history.showNext"))==null?void 0:t.getElectronAccelerator())==="Down"}const Xte=mi("find-collapsed",ae.chevronRight,p("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Jte=mi("find-expanded",ae.chevronDown,p("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),u$e=mi("find-selection",ae.selection,p("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),h$e=mi("find-replace",ae.replace,p("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),f$e=mi("find-replace-all",ae.replaceAll,p("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),g$e=mi("find-previous-match",ae.arrowUp,p("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),m$e=mi("find-next-match",ae.arrowDown,p("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),p$e=p("label.findDialog","Find / Replace"),_$e=p("label.find","Find"),b$e=p("placeholder.find","Find"),v$e=p("label.previousMatchButton","Previous Match"),w$e=p("label.nextMatchButton","Next Match"),C$e=p("label.toggleSelectionFind","Find in Selection"),y$e=p("label.closeButton","Close"),S$e=p("label.replace","Replace"),x$e=p("placeholder.replace","Replace"),k$e=p("label.replaceButton","Replace"),L$e=p("label.replaceAllButton","Replace All"),D$e=p("label.toggleReplaceButton","Toggle Replace"),E$e=p("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",tg),N$e=p("label.matchesLocation","{0} of {1}"),eie=p("label.noResults","No results"),sd=419,I$e=275,T$e=I$e-54;let l0=69;const P$e=33,tie="ctrlEnterReplaceAll.windows.donotask",iie=ct?256:2048;class h5{constructor(e){this.afterLineNumber=e,this.heightInPx=P$e,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function nie(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionStart>0){n.stopPropagation();return}}function sie(n,e,t){const i=!!e.match(/\n/);if(t&&i&&t.selectionEnd<t.value.length){n.stopPropagation();return}}const H2=class H2 extends ba{constructor(e,t,i,s,o,r,a,l,c,d){super(),this._hoverService=d,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=s,this._keybindingService=o,this._contextKeyService=r,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(tie,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new qa(500),this._register(xe(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(u=>this._onStateChanged(u))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(u=>{if(u.hasChanged(92)&&(this._codeEditor.getOption(92)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),u.hasChanged(146)&&this._tryUpdateWidgetWidth(),u.hasChanged(2)&&this.updateAccessibilitySupport(),u.hasChanged(41)){const h=this._codeEditor.getOption(41).loop;this._state.change({loop:h},!1);const f=this._codeEditor.getOption(41).addExtraSpaceOnTop;f&&!this._viewZone&&(this._viewZone=new h5(0),this._showViewZone()),!f&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){const u=await this._controller.getGlobalBufferTerm();u&&u!==this._state.searchString&&(this._state.change({searchString:u},!1),this._findInput.select())}})),this._findInputFocused=kO.bindTo(r),this._findFocusTracker=this._register(Fc(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=aq.bindTo(r),this._replaceFocusTracker=this._register(Fc(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new h5(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(u=>{if(u.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return H2.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(92)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=lr(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,He)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){var t;this._matchesCount.style.minWidth=l0+"px",this._state.matchesCount>=tg?this._matchesCount.title=E$e:this._matchesCount.title="",(t=this._matchesCount.firstChild)==null||t.remove();let e;if(this._state.matchesCount>0){let i=String(this._state.matchesCount);this._state.matchesCount>=tg&&(i+="+");let s=String(this._state.matchesPosition);s==="0"&&(s="?"),e=ab(N$e,s,i)}else e=eie;this._matchesCount.appendChild(document.createTextNode(e)),yo(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),l0=Math.max(l0,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===eie)return i===""?p("ariaSearchNoResultEmpty","{0} found",e):p("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const s=p("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${s}`:s}return p("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const i=!this._codeEditor.getOption(92);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const i=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=i;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const s=Qi(i),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=s.left+(o?o.left:0),a=o?o.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=Tce(this._domNode).left;r>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const i=this._viewZone;this._viewZoneId!==void 0||!i||this._codeEditor.changeViewZones(s=>{i.heightInPx=this._getHeight(),this._viewZoneId=s.addZone(i),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+i.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new h5(0));const i=this._viewZone;this._codeEditor.changeViewZones(s=>{if(this._viewZoneId!==void 0){const o=this._getHeight();if(o===i.heightInPx)return;const r=o-i.heightInPx;i.heightInPx=o,s.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(84).top,o<=0)return;i.heightInPx=o,this._viewZoneId=s.addZone(i),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const i=e.width,s=e.minimap.minimapWidth;let o=!1,r=!1,a=!1;if(this._resized&&lr(this._domNode)>sd){this._domNode.style.maxWidth=`${i-28-s-15}px`,this._replaceInput.width=lr(this._findInput.domNode);return}if(sd+28+s>=i&&(r=!0),sd+28+s-l0>=i&&(a=!0),sd+28+s-l0>=i+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!o&&(this._domNode.style.maxWidth=`${i-28-s-15}px`),this._findInput.layout({collapsedFindWidget:o,narrowFindWidget:a,reducedFindWidget:r}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=lr(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const i=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!E.equalsRange(t,i)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(iie|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return nie(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return sie(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(iie|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{vs&&xc&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(p("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(tie,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return nie(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return sie(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new M9(null,this._contextViewProvider,{width:T$e,label:_$e,placeholder:b$e,appendCaseSensitiveLabel:this._keybindingLabelFor(ui.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(ui.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(ui.ToggleRegexCommand),validation:d=>{if(d.length===0||!this._findInput.getRegex())return null;try{return new RegExp(d,"gu"),null}catch(u){return{content:u.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>Qte(this._keybindingService),inputBoxStyles:OT,toggleStyles:AT},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(d=>this._onFindInputKeyDown(d))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(d=>{d.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),d.preventDefault())})),this._register(this._findInput.onRegexKeyDown(d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),d.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(d=>{this._tryUpdateHeight()&&this._showViewZone()})),vo&&this._register(this._findInput.onMouseDown(d=>this._onFindInputMouseDown(d))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const i=this._register(vy());this._prevBtn=this._register(new kv({label:v$e+this._keybindingLabelFor(ui.PreviousMatchFindAction),icon:g$e,hoverDelegate:i,onTrigger:()=>{zf(this._codeEditor.getAction(ui.PreviousMatchFindAction)).run().then(void 0,He)}},this._hoverService)),this._nextBtn=this._register(new kv({label:w$e+this._keybindingLabelFor(ui.NextMatchFindAction),icon:m$e,hoverDelegate:i,onTrigger:()=>{zf(this._codeEditor.getAction(ui.NextMatchFindAction)).run().then(void 0,He)}},this._hoverService));const s=document.createElement("div");s.className="find-part",s.appendChild(this._findInput.domNode);const o=document.createElement("div");o.className="find-actions",s.appendChild(o),o.appendChild(this._matchesCount),o.appendChild(this._prevBtn.domNode),o.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new h1({icon:u$e,title:C$e+this._keybindingLabelFor(ui.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:i,inputActiveOptionBackground:pe(FL),inputActiveOptionBorder:pe(NA),inputActiveOptionForeground:pe(IA)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let d=this._codeEditor.getSelections();d=d.map(u=>(u.endColumn===1&&u.endLineNumber>u.startLineNumber&&(u=u.setEndPosition(u.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(u.endLineNumber-1))),u.isEmpty()?null:u)).filter(u=>!!u),d.length&&this._state.change({searchScope:d},!0)}}else this._state.change({searchScope:null},!0)})),o.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new kv({label:y$e+this._keybindingLabelFor(ui.CloseFindWidgetCommand),icon:lfe,hoverDelegate:i,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),d.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new R9(null,void 0,{label:S$e,placeholder:x$e,appendPreserveCaseLabel:this._keybindingLabelFor(ui.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Qte(this._keybindingService),inputBoxStyles:OT,toggleStyles:AT},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(d=>this._onReplaceInputKeyDown(d))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(d=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(d=>{d.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),d.preventDefault())}));const r=this._register(vy());this._replaceBtn=this._register(new kv({label:k$e+this._keybindingLabelFor(ui.ReplaceOneAction),icon:h$e,hoverDelegate:r,onTrigger:()=>{this._controller.replace()},onKeyDown:d=>{d.equals(1026)&&(this._closeBtn.focus(),d.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new kv({label:L$e+this._keybindingLabelFor(ui.ReplaceAllAction),icon:f$e,hoverDelegate:r,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));const a=document.createElement("div");a.className="replace-part",a.appendChild(this._replaceInput.domNode);const l=document.createElement("div");l.className="replace-actions",a.appendChild(l),l.appendChild(this._replaceBtn.domNode),l.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new kv({label:D$e,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=lr(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=p$e,this._domNode.role="dialog",this._domNode.style.width=`${sd}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(s),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(a),this._resizeSash=this._register(new xs(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let c=sd;this._register(this._resizeSash.onDidStart(()=>{c=lr(this._domNode)})),this._register(this._resizeSash.onDidChange(d=>{this._resized=!0;const u=c+d.startX-d.currentX;if(u<sd)return;const h=parseFloat(aA(this._domNode).maxWidth)||0;u>h||(this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=lr(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const d=lr(this._domNode);if(d<sd)return;let u=sd;if(!this._resized||d===sd){const h=this._codeEditor.getLayoutInfo();u=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${u}px`,this._isReplaceVisible&&(this._replaceInput.width=lr(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}};H2.ID="editor.contrib.findWidget";let A9=H2;class kv extends ba{constructor(e,t){super(),this._opts=e;let i="button";this._opts.className&&(i=i+" "+this._opts.className),this._opts.icon&&(i=i+" "+Re.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=i,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(t.setupManagedHover(e.hoverDelegate??ko("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,s=>{this._opts.onTrigger(),s.preventDefault()}),this.onkeydown(this._domNode,s=>{var o,r;if(s.equals(10)||s.equals(3)){this._opts.onTrigger(),s.preventDefault();return}(r=(o=this._opts).onKeyDown)==null||r.call(o,s)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...Re.asClassNameArray(Xte)),this._domNode.classList.add(...Re.asClassNameArray(Jte))):(this._domNode.classList.remove(...Re.asClassNameArray(Jte)),this._domNode.classList.add(...Re.asClassNameArray(Xte)))}}tl((n,e)=>{const t=n.getColor(qf);t&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Ec(n.type)?"dotted":"solid"} ${t}; box-sizing: border-box; }`);const i=n.getColor(sPe);i&&e.addRule(`.monaco-editor .findScope { border: 1px ${Ec(n.type)?"dashed":"solid"} ${i}; }`);const s=n.getColor(vt);s&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${s}; }`);const o=n.getColor(iPe);o&&e.addRule(`.monaco-editor .findMatchInline { color: ${o}; }`);const r=n.getColor(nPe);r&&e.addRule(`.monaco-editor .currentFindMatchInline { color: ${r}; }`)});var Yme=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Na=function(n,e){return function(t,i){e(t,i,n)}},O9;const M$e=524288;function F9(n,e="single",t=!1){if(!n.hasModel())return null;const i=n.getSelection();if(e==="single"&&i.startLineNumber===i.endLineNumber||e==="multiple"){if(i.isEmpty()){const s=n.getConfiguredWordAtPosition(i.getStartPosition());if(s&&t===!1)return s.word}else if(n.getModel().getValueLengthInRange(i)<M$e)return n.getModel().getValueInRange(i)}return null}var L_;let Yo=(L_=class extends U{get editor(){return this._editor}static get(e){return e.getContribution(O9.ID)}constructor(e,t,i,s,o,r){super(),this._editor=e,this._findWidgetVisible=Kh.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=s,this._notificationService=o,this._hoverService=r,this._updateHistoryDelayer=new qa(500),this._state=this._register(new r$e),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(a=>this._onStateChanged(a))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const a=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),a&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!kO.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=ua(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;const i={...t,isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){const s=F9(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);s&&(this._state.isRegex?i.searchString=ua(s):i.searchString=s)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const s=F9(this._editor,e.seedSearchStringFromSelection);s&&(i.searchString=s)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const s=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;s&&(i.searchString=s)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const s=this._editor.getSelections();s.some(o=>!o.isEmpty())&&(i.searchScope=s)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new MS(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){var e;return this._model?(e=this._editor.getModel())!=null&&e.isTooLargeForHeapOperation()?(this._notificationService.warn(p("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},O9=L_,L_.ID="editor.contrib.findController",L_);Yo=O9=Yme([Na(1,Ae),Na(2,jl),Na(3,qh),Na(4,rn),Na(5,du)],Yo);let W9=class extends Yo{constructor(e,t,i,s,o,r,a,l,c){super(e,i,a,l,r,c),this._contextViewService=t,this._keybindingService=s,this._themeService=o,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();const i=this._editor.getSelection();let s=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":s=!0;break;case"never":s=!1;break;case"multiline":{s=!!i&&i.startLineNumber!==i.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||s,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new A9(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new P9(this._editor,this._state,this._keybindingService))}};W9=Yme([Na(1,zh),Na(2,Ae),Na(3,Ft),Na(4,kn),Na(5,rn),Na(6,jl),Na(7,qh),Na(8,du)],W9);const R$e=Gce(new Kce({id:ui.StartFindAction,label:p("startFindAction","Find"),alias:"Find",precondition:X.or(I.focus,X.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:we.MenubarEditMenu,group:"3_find",title:p({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));R$e.addImplementation(0,(n,e,t)=>{const i=Yo.get(e);return i?i.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});const A$e={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class O$e extends _e{constructor(){super({id:ui.StartFindWithArgs,label:p("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:A$e})}async run(e,t,i){const s=Yo.get(t);if(s){const o=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:i.replaceString!==void 0,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};await s.start({forceRevealReplace:!1,seedSearchStringFromSelection:s.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(i==null?void 0:i.findInSelection)||!1,loop:t.getOption(41).loop},o),s.setGlobalBufferTerm(s.getState().searchString)}}}class F$e extends _e{constructor(){super({id:ui.StartFindWithSelection,label:p("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){const i=Yo.get(t);i&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),i.setGlobalBufferTerm(i.getState().searchString))}}class Zme extends _e{async run(e,t){const i=Yo.get(t);i&&!this._run(i)&&(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class W$e extends Zme{constructor(){super({id:ui.NextMatchFindAction,label:p("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:I.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:X.and(I.focus,kO),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class B$e extends Zme{constructor(){super({id:ui.PreviousMatchFindAction,label:p("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:I.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:X.and(I.focus,kO),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class H$e extends _e{constructor(){super({id:ui.GoToMatchFindAction,label:p("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:Kh}),this._highlightDecorations=[]}run(e,t,i){const s=Yo.get(t);if(!s)return;const o=s.getState().matchesCount;if(o<1){e.get(rn).notify({severity:SA.Warning,message:p("findMatchAction.noResults","No matches. Try searching for something else.")});return}const r=e.get(il),a=new Q,l=a.add(r.createInputBox());l.placeholder=p("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",o);const c=u=>{const h=parseInt(u);if(isNaN(h))return;const f=s.getState().matchesCount;if(h>0&&h<=f)return h-1;if(h<0&&h>=-f)return f+h},d=u=>{const h=c(u);if(typeof h=="number"){l.validationMessage=void 0,s.goToMatch(h);const f=s.getState().currentMatch;f&&this.addDecorations(t,f)}else l.validationMessage=p("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount),this.clearDecorations(t)};a.add(l.onDidChangeValue(u=>{d(u)})),a.add(l.onDidAccept(()=>{const u=c(l.value);typeof u=="number"?(s.goToMatch(u),l.hide()):l.validationMessage=p("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount)})),a.add(l.onDidHide(()=>{this.clearDecorations(t),a.dispose()})),l.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(i=>{this._highlightDecorations=i.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:ji(Yue),position:aa.Full}}}])})}}class Qme extends _e{async run(e,t){const i=Yo.get(t);if(!i)return;const s=F9(t,"single",!1);s&&i.setSearchString(s),this._run(i)||(await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(i))}}class j$e extends Qme{constructor(){super({id:ui.NextSelectionMatchFindAction,label:p("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class V$e extends Qme{constructor(){super({id:ui.PreviousSelectionMatchFindAction,label:p("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const z$e=Gce(new Kce({id:ui.StartFindReplaceAction,label:p("startReplace","Replace"),alias:"Replace",precondition:X.or(I.focus,X.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:we.MenubarEditMenu,group:"3_find",title:p({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));z$e.addImplementation(0,(n,e,t)=>{if(!e.hasModel()||e.getOption(92))return!1;const i=Yo.get(e);if(!i)return!1;const s=e.getSelection(),o=i.isFindInputFocused(),r=!s.isEmpty()&&s.startLineNumber===s.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!o,a=o||r?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})});wt(Yo.ID,W9,0);se(O$e);se(F$e);se(W$e);se(B$e);se(H$e);se(j$e);se(V$e);const Kc=xn.bindToContribution(Yo.get);fe(new Kc({id:ui.CloseFindWidgetCommand,precondition:Kh,handler:n=>n.closeFindWidget(),kbOpts:{weight:105,kbExpr:X.and(I.focus,X.not("isComposing")),primary:9,secondary:[1033]}}));fe(new Kc({id:ui.ToggleCaseSensitiveCommand,precondition:void 0,handler:n=>n.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:I.focus,primary:RE.primary,mac:RE.mac,win:RE.win,linux:RE.linux}}));fe(new Kc({id:ui.ToggleWholeWordCommand,precondition:void 0,handler:n=>n.toggleWholeWords(),kbOpts:{weight:105,kbExpr:I.focus,primary:AE.primary,mac:AE.mac,win:AE.win,linux:AE.linux}}));fe(new Kc({id:ui.ToggleRegexCommand,precondition:void 0,handler:n=>n.toggleRegex(),kbOpts:{weight:105,kbExpr:I.focus,primary:OE.primary,mac:OE.mac,win:OE.win,linux:OE.linux}}));fe(new Kc({id:ui.ToggleSearchScopeCommand,precondition:void 0,handler:n=>n.toggleSearchScope(),kbOpts:{weight:105,kbExpr:I.focus,primary:FE.primary,mac:FE.mac,win:FE.win,linux:FE.linux}}));fe(new Kc({id:ui.TogglePreserveCaseCommand,precondition:void 0,handler:n=>n.togglePreserveCase(),kbOpts:{weight:105,kbExpr:I.focus,primary:WE.primary,mac:WE.mac,win:WE.win,linux:WE.linux}}));fe(new Kc({id:ui.ReplaceOneAction,precondition:Kh,handler:n=>n.replace(),kbOpts:{weight:105,kbExpr:I.focus,primary:3094}}));fe(new Kc({id:ui.ReplaceOneAction,precondition:Kh,handler:n=>n.replace(),kbOpts:{weight:105,kbExpr:X.and(I.focus,aq),primary:3}}));fe(new Kc({id:ui.ReplaceAllAction,precondition:Kh,handler:n=>n.replaceAll(),kbOpts:{weight:105,kbExpr:I.focus,primary:2563}}));fe(new Kc({id:ui.ReplaceAllAction,precondition:Kh,handler:n=>n.replaceAll(),kbOpts:{weight:105,kbExpr:X.and(I.focus,aq),primary:void 0,mac:{primary:2051}}}));fe(new Kc({id:ui.SelectAllMatchesAction,precondition:Kh,handler:n=>n.selectAllMatches(),kbOpts:{weight:105,kbExpr:I.focus,primary:515}}));const U$e={0:" ",1:"u",2:"r"},oie=65535,dc=16777215,rie=4278190080;class f5{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,i=e%32;return(this._states[t]&1<<i)!==0}set(e,t){const i=e/32|0,s=e%32,o=this._states[i];t?this._states[i]=o|1<<s:this._states[i]=o&~(1<<s)}}class Gr{constructor(e,t,i){if(e.length!==t.length||e.length>oie)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new f5(e.length),this._userDefinedStates=new f5(e.length),this._recoveredStates=new f5(e.length),this._types=i,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(i,s)=>{const o=e[e.length-1];return this.getStartLineNumber(o)<=i&&this.getEndLineNumber(o)>=s};for(let i=0,s=this._startIndexes.length;i<s;i++){const o=this._startIndexes[i],r=this._endIndexes[i];if(o>dc||r>dc)throw new Error("startLineNumber or endLineNumber must not exceed "+dc);for(;e.length>0&&!t(o,r);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=o+((a&255)<<24),this._endIndexes[i]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&dc}getEndLineNumber(e){return this._endIndexes[e]&dc}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let s=0;s<this._types.length;s++)this._types[s]===e&&(this.setCollapsed(s,t),i=!0);return i}toRegion(e){return new $$e(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&rie)>>>24)+((this._endIndexes[e]&rie)>>>16);return t===oie?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(i===0)return-1;for(;t<i;){const s=Math.floor((t+i)/2);e<this.getStartLineNumber(s)?i=s:t=s+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${U$e[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&dc,endLineNumber:this._endIndexes[e]&dc,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,i=new Uint32Array(t),s=new Uint32Array(t);let o=[],r=!1;for(let l=0;l<t;l++){const c=e[l];i[l]=c.startLineNumber,s[l]=c.endLineNumber,o.push(c.type),c.type&&(r=!0)}r||(o=void 0);const a=new Gr(i,s,o);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,i,s){i=i??Number.MAX_VALUE;const o=(_,b)=>Array.isArray(_)?v=>v<b?_[v]:void 0:v=>v<b?_.toFoldRange(v):void 0,r=o(e,e.length),a=o(t,t.length);let l=0,c=0,d=r(0),u=a(0);const h=[];let f,g=0;const m=[];for(;d||u;){let _;if(u&&(!d||d.startLineNumber>=u.startLineNumber))d&&d.startLineNumber===u.startLineNumber?(u.source===1?_=u:(_=d,_.isCollapsed=u.isCollapsed&&(d.endLineNumber===u.endLineNumber||!(s!=null&&s.startsInside(d.startLineNumber+1,d.endLineNumber+1))),_.source=0),d=r(++l)):(_=u,u.isCollapsed&&u.source===0&&(_.source=2)),u=a(++c);else{let b=c,v=u;for(;;){if(!v||v.startLineNumber>d.endLineNumber){_=d;break}if(v.source===1&&v.endLineNumber>d.endLineNumber)break;v=a(++b)}d=r(++l)}if(_){for(;f&&f.endLineNumber<_.startLineNumber;)f=h.pop();_.endLineNumber>_.startLineNumber&&_.startLineNumber>g&&_.endLineNumber<=i&&(!f||f.endLineNumber>=_.endLineNumber)&&(m.push(_),g=_.startLineNumber,f&&h.push(f),f=_)}}return m}}class $$e{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class q$e{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new j,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new Gr(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((i,s)=>i.regionIndex-s.regionIndex);const t={};this._decorationProvider.changeDecorations(i=>{let s=0,o=-1,r=-1;const a=l=>{for(;s<l;){const c=this._regions.getEndLineNumber(s),d=this._regions.isCollapsed(s);if(c<=o){const u=this.regions.getSource(s)!==0;i.changeDecorationOptions(this._editorDecorationIds[s],this._decorationProvider.getDecorationOption(d,c<=r,u))}d&&c>r&&(r=c),s++}};for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const u=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,u),o=Math.max(o,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,i=s=>{for(const o of e)if(!(o.startLineNumber>s.endLineNumber||s.startLineNumber>o.endLineNumber))return!0;return!1};for(let s=0;s<this._regions.length;s++){const o=this._regions.toFoldRange(s);(o.source===0||!i(o))&&t.push(o)}this.updatePost(Gr.fromFoldRanges(t))}update(e,t){const i=this._currentFoldedOrManualRanges(t),s=Gr.sanitizeAndMerge(e,i,this._textModel.getLineCount(),t);this.updatePost(Gr.fromFoldRanges(s))}updatePost(e){const t=[];let i=-1;for(let s=0,o=e.length;s<o;s++){const r=e.getStartLineNumber(s),a=e.getEndLineNumber(s),l=e.isCollapsed(s),c=e.getSource(s)!==0,d={startLineNumber:r,startColumn:this._textModel.getLineMaxColumn(r),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=i,c)}),l&&a>i&&(i=a)}this._decorationProvider.changeDecorations(s=>this._editorDecorationIds=s.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e){const t=[];for(let i=0,s=this._regions.length;i<s;i++){let o=this.regions.isCollapsed(i);const r=this.regions.getSource(i);if(o||r!==0){const a=this._regions.toFoldRange(i),l=this._textModel.getDecorationRange(this._editorDecorationIds[i]);l&&(o&&(e!=null&&e.startsInside(l.startLineNumber+1,l.endLineNumber))&&(o=!1),t.push({startLineNumber:l.startLineNumber,endLineNumber:l.endLineNumber,type:a.type,isCollapsed:o,source:r}))}}return t}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],i=this._textModel.getLineCount();for(let s=0,o=e.length;s<o;s++){const r=e[s];if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>i)continue;const a=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,isCollapsed:r.isCollapsed,source:r.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){if(!Array.isArray(e))return;const t=[],i=this._textModel.getLineCount();for(const o of e){if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>i)continue;const r=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);(!o.checksum||r===o.checksum)&&t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,type:void 0,isCollapsed:o.isCollapsed??!0,source:o.source??0})}const s=Gr.sanitizeAndMerge(this._regions,t,i);this.updatePost(Gr.fromFoldRanges(s))}_getLinesChecksum(e,t){return sA(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const i=[];if(this._regions){let s=this._regions.findRange(e),o=1;for(;s>=0;){const r=this._regions.toRegion(s);(!t||t(r,o))&&i.push(r),o++,s=r.parentIndex}}return i}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const i=[],s=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=s,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;r.length>0&&!c.containedBy(r[r.length-1]);)r.pop();r.push(c),t(c,r.length)&&i.push(c)}else break}}else for(let r=s,a=this._regions.length;r<a;r++){const l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<o)(!t||t(l))&&i.push(l);else break}return i}}function dq(n,e,t){const i=[];for(const s of t){const o=n.getRegionAtLine(s);if(o){const r=!o.isCollapsed;if(i.push(o),e>1){const a=n.getRegionsInside(o,(l,c)=>l.isCollapsed!==r&&c<e);i.push(...a)}}}n.toggleCollapseState(i)}function y1(n,e,t=Number.MAX_VALUE,i){const s=[];if(i&&i.length>0)for(const o of i){const r=n.getRegionAtLine(o);if(r&&(r.isCollapsed!==e&&s.push(r),t>1)){const a=n.getRegionsInside(r,(l,c)=>l.isCollapsed!==e&&c<t);s.push(...a)}}else{const o=n.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);s.push(...o)}n.toggleCollapseState(s)}function Xme(n,e,t,i){const s=[];for(const o of i){const r=n.getAllRegionsAtLine(o,(a,l)=>a.isCollapsed!==e&&l<=t);s.push(...r)}n.toggleCollapseState(s)}function K$e(n,e,t){const i=[];for(const s of t){const o=n.getAllRegionsAtLine(s,r=>r.isCollapsed!==e);o.length>0&&i.push(o[0])}n.toggleCollapseState(i)}function G$e(n,e,t,i){const s=(r,a)=>a===e&&r.isCollapsed!==t&&!i.some(l=>r.containsLine(l)),o=n.getRegionsInside(null,s);n.toggleCollapseState(o)}function Jme(n,e,t){const i=[];for(const r of t){const a=n.getAllRegionsAtLine(r,void 0);a.length>0&&i.push(a[0])}const s=r=>i.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,o=n.getRegionsInside(null,s);n.toggleCollapseState(o)}function uq(n,e,t){const i=n.textModel,s=n.regions,o=[];for(let r=s.length-1;r>=0;r--)if(t!==s.isCollapsed(r)){const a=s.getStartLineNumber(r);e.test(i.getLineContent(a))&&o.push(s.toRegion(r))}n.toggleCollapseState(o)}function hq(n,e,t){const i=n.regions,s=[];for(let o=i.length-1;o>=0;o--)t!==i.isCollapsed(o)&&e===i.getType(o)&&s.push(i.toRegion(o));n.toggleCollapseState(s)}function Y$e(n,e){let t=null;const i=e.getRegionAtLine(n);if(i!==null&&(t=i.startLineNumber,n===t)){const s=i.parentIndex;s!==-1?t=e.regions.getStartLineNumber(s):t=null}return t}function Z$e(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){if(n!==t.startLineNumber)return t.startLineNumber;{const i=t.parentIndex;let s=0;for(i!==-1&&(s=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<n)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function Q$e(n,e){let t=e.getRegionAtLine(n);if(t!==null&&t.startLineNumber===n){const i=t.parentIndex;let s=0;if(i!==-1)s=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;s=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=s)return null;if(t.parentIndex===i)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>n)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class X$e{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new j,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||Zg(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let i=0,s=0,o=Number.MAX_VALUE,r=-1;const a=this._foldingModel.regions;for(;i<a.length;i++){if(!a.isCollapsed(i))continue;const l=a.getStartLineNumber(i)+1,c=a.getEndLineNumber(i);o<=l&&c<=r||(!e&&s<this._hiddenRanges.length&&this._hiddenRanges[s].startLineNumber===l&&this._hiddenRanges[s].endLineNumber===c?(t.push(this._hiddenRanges[s]),s++):(e=!0,t.push(new E(l,1,c,1))),o=l,r=c)}(this._hasLineChanges||e||s<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return aie(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const i=this._foldingModel.textModel;let s=null;const o=r=>((!s||!J$e(r,s))&&(s=aie(this._hiddenRanges,r)),s?s.startLineNumber-1:null);for(let r=0,a=e.length;r<a;r++){let l=e[r];const c=o(l.startLineNumber);c&&(l=l.setStartPosition(c,i.getLineMaxColumn(c)),t=!0);const d=o(l.endLineNumber);d&&(l=l.setEndPosition(d,i.getLineMaxColumn(d)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function J$e(n,e){return n>=e.startLineNumber&&n<=e.endLineNumber}function aie(n,e){const t=Kx(n,i=>e<i.startLineNumber)-1;return t>=0&&n[t].endLineNumber>=e?n[t]:null}const eqe=5e3,tqe="indent";class fq{constructor(e,t,i){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=i,this.id=tqe}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=t&&!!t.offSide,s=t&&t.markers;return Promise.resolve(sqe(this.editorModel,i,s,this.foldingRangesLimit))}}let iqe=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,i){if(e>dc||t>dc)return;const s=this._length;this._startIndexes[s]=e,this._endIndexes[s]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const i=new Uint32Array(this._length),s=new Uint32Array(this._length);for(let o=this._length-1,r=0;o>=0;o--,r++)i[r]=this._startIndexes[o],s[r]=this._endIndexes[o];return new Gr(i,s)}else{this._foldingRangesLimit.update(this._length,t);let i=0,s=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+i>t){s=l;break}i+=c}}const o=e.getOptions().tabSize,r=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],u=e.getLineContent(d),h=KA(u,o);(h<s||h===s&&i++<t)&&(r[c]=d,a[c]=this._endIndexes[l],c++)}return new Gr(r,a)}}};const nqe={limit:eqe,update:()=>{}};function sqe(n,e,t,i=nqe){const s=n.getOptions().tabSize,o=new iqe(i);let r;t&&(r=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=n.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=n.getLineCount();c>0;c--){const d=n.getLineContent(c),u=KA(d,s);let h=a[a.length-1];if(u===-1){e&&(h.endAbove=c);continue}let f;if(r&&(f=d.match(r)))if(f[1]){let g=a.length-1;for(;g>0&&a[g].indent!==-2;)g--;if(g>0){a.length=g+1,h=a[g],o.insertFirst(c,h.line,u),h.line=c,h.indent=u,h.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(h.indent>u){do a.pop(),h=a[a.length-1];while(h.indent>u);const g=h.endAbove-1;g-c>=1&&o.insertFirst(c,g,u)}h.indent===u?h.endAbove=c:a.push({indent:u,endAbove:c,line:c})}return o.toIndentRanges(n)}const oqe=T("editor.foldBackground",{light:et($f,.3),dark:et($f,.3),hcDark:null,hcLight:null},p("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.foldPlaceholderForeground",{light:"#808080",dark:"#808080",hcDark:null,hcLight:null},p("collapsedTextColor","Color of the collapsed text after the first line of a folded range."));T("editorGutter.foldingControlForeground",vT,p("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const tM=mi("folding-expanded",ae.chevronDown,p("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),iM=mi("folding-collapsed",ae.chevronRight,p("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),lie=mi("folding-manual-collapsed",iM,p("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),cie=mi("folding-manual-expanded",tM,p("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),g5={color:ji(oqe),position:1},Lv=p("linesCollapsed","Click to expand the range."),jE=p("linesExpanded","Click to collapse the range."),fn=class fn{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,i){return t?fn.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?fn.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:fn.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:fn.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?i?this.showFoldingHighlights?fn.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:fn.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?fn.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:fn.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?i?fn.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:fn.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i?fn.MANUALLY_EXPANDED_VISUAL_DECORATION:fn.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}};fn.COLLAPSED_VISUAL_DECORATION=ze.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:Lv,firstLineDecorationClassName:Re.asClassName(iM)}),fn.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=ze.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:g5,isWholeLine:!0,linesDecorationsTooltip:Lv,firstLineDecorationClassName:Re.asClassName(iM)}),fn.MANUALLY_COLLAPSED_VISUAL_DECORATION=ze.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:Lv,firstLineDecorationClassName:Re.asClassName(lie)}),fn.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=ze.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:g5,isWholeLine:!0,linesDecorationsTooltip:Lv,firstLineDecorationClassName:Re.asClassName(lie)}),fn.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=ze.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:Lv}),fn.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=ze.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:g5,isWholeLine:!0,linesDecorationsTooltip:Lv}),fn.EXPANDED_VISUAL_DECORATION=ze.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Re.asClassName(tM),linesDecorationsTooltip:jE}),fn.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=ze.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Re.asClassName(tM),linesDecorationsTooltip:jE}),fn.MANUALLY_EXPANDED_VISUAL_DECORATION=ze.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Re.asClassName(cie),linesDecorationsTooltip:jE}),fn.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=ze.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:Re.asClassName(cie),linesDecorationsTooltip:jE}),fn.NO_CONTROLS_EXPANDED_RANGE_DECORATION=ze.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),fn.HIDDEN_RANGE_DECORATION=ze.register({description:"folding-hidden-range-decoration",stickiness:1});let B9=fn;const rqe={},aqe="syntax";class gq{constructor(e,t,i,s,o){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=s,this.fallbackRangeProvider=o,this.id=aqe,this.disposables=new Q,o&&this.disposables.add(o);for(const r of t)typeof r.onDidChange=="function"&&this.disposables.add(r.onDidChange(i))}compute(e){return lqe(this.providers,this.editorModel,e).then(t=>{var i;return t?dqe(t,this.foldingRangesLimit):((i=this.fallbackRangeProvider)==null?void 0:i.compute(e))??null})}dispose(){this.disposables.dispose()}}function lqe(n,e,t){let i=null;const s=n.map((o,r)=>Promise.resolve(o.provideFoldingRanges(e,rqe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(i)||(i=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&i.push({start:c.start,end:c.end,rank:r,kind:c.kind})}},en));return Promise.all(s).then(o=>i)}class cqe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,i,s){if(e>dc||t>dc)return;const o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=s,this._types[o]=i,this._length++,s<30&&(this._nestingLevelCounts[s]=(this._nestingLevelCounts[s]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let s=0;s<this._length;s++)t[s]=this._startIndexes[s],i[s]=this._endIndexes[s];return new Gr(t,i,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,i=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){i=a;break}t+=l}}const s=new Uint32Array(e),o=new Uint32Array(e),r=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<i||c===i&&t++<e)&&(s[l]=this._startIndexes[a],o[l]=this._endIndexes[a],r[l]=this._types[a],l++)}return new Gr(s,o,r)}}}function dqe(n,e){const t=n.sort((r,a)=>{let l=r.start-a.start;return l===0&&(l=r.rank-a.rank),l}),i=new cqe(e);let s;const o=[];for(const r of t)if(!s)s=r,i.add(r.start,r.end,r.kind&&r.kind.value,o.length);else if(r.start>s.start)if(r.end<=s.end)o.push(s),s=r,i.add(r.start,r.end,r.kind&&r.kind.value,o.length);else{if(r.start>s.end){do s=o.pop();while(s&&r.start>s.end);s&&o.push(s),s=r}i.add(r.start,r.end,r.kind&&r.kind.value,o.length)}return i.toIndentRanges()}var uqe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},c0=function(n,e){return function(t,i){e(t,i,n)}},Xm;const Cs=new me("foldingEnabled",!1);var D_;let rm=(D_=class extends U{static get(e){return e.getContribution(Xm.ID)}static getFoldingRangeProviders(e,t){var s;const i=e.foldingRangeProvider.ordered(t);return((s=Xm._foldingRangeSelector)==null?void 0:s.call(Xm,i,t))??i}constructor(e,t,i,s,o,r){super(),this.contextKeyService=t,this.languageConfigurationService=i,this.languageFeaturesService=r,this.localToDispose=this._register(new Q),this.editor=e,this._foldingLimitReporter=new epe(e);const a=this.editor.getOptions();this._isEnabled=a.get(43),this._useFoldingProviders=a.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(46),this.updateDebounceInfo=o.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new B9(e),this.foldingDecorationProvider.showFoldingControls=a.get(111),this.foldingDecorationProvider.showFoldingHighlights=a.get(45),this.foldingEnabled=Cs.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(47)&&this.onModelChanged(),l.hasChanged(111)||l.hasChanged(45)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(111),this.foldingDecorationProvider.showFoldingHighlights=c.get(45),this.triggerFoldingModelChanged()}l.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),l.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new q$e(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new X$e(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new qa(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new $t(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,i;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)==null||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(i=this.rangeProvider)==null||i.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)==null||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new fq(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const i=Xm.getFoldingRangeProviders(this.languageFeaturesService,e);i.length>0&&(this.rangeProvider=new gq(e,i,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)==null||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new Qn,i=this.getRangeProvider(e.textModel),s=this.foldingRegionPromise=On(o=>i.compute(o));return s.then(o=>{if(o&&s===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const c=o.setCollapsedAllOfType(Ug.Imports.value,!0);c&&(r=Vc.capture(this.editor),this._currentModelHasFoldedImports=c)}const a=this.editor.getSelections();e.update(o,hqe(a)),r==null||r.restore(this.editor);const l=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=l)}return e})}).then(void 0,e=>(He(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const i=this.editor.getSelections();if(i&&i.length>0){const s=[];for(const o of i){const r=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&s.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}s.length&&(t.toggleCollapseState(s),this.reveal(i[0].getPosition()))}}}).then(void 0,He)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:{const s=e.target.detail,o=e.target.element.offsetLeft;if(s.offsetX-o<4)return;i=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const s=this.editor.getModel();if(s&&t.startColumn===s.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const i=this.mouseDownInfo.lineNumber,s=this.mouseDownInfo.iconClicked,o=e.target.range;if(!o||o.startLineNumber!==i)return;if(s){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||o.startColumn!==a.getLineMaxColumn(i))return}const r=t.getRegionAtLine(i);if(r&&r.startLineNumber===i){const a=r.isCollapsed;if(s||a){const l=e.event.altKey;let c=[];if(l){const d=h=>!h.containedBy(r)&&!r.containedBy(h),u=t.getRegionsInside(null,d);for(const h of u)h.isCollapsed&&c.push(h);c.length===0&&(c=u)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const u of t.getRegionsInside(r))u.isCollapsed===a&&c.push(u);(a||!d||c.length===0)&&c.push(r)}t.toggleCollapseState(c),this.reveal({lineNumber:i,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},Xm=D_,D_.ID="editor.contrib.folding",D_);rm=Xm=uqe([c0(1,Ae),c0(2,Ri),c0(3,rn),c0(4,_a),c0(5,ve)],rm);class epe{constructor(e){this.editor=e,this._onDidChange=new j,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}class Rs extends _e{runEditorCommand(e,t,i){const s=e.get(Ri),o=rm.get(t);if(!o)return;const r=o.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(o,a,t,i,s);const l=t.getSelection();l&&o.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(i=>i.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(i=>i+1):this.getSelectedLines(t)}run(e,t){}}function hqe(n){return!n||n.length===0?{startsInside:()=>!1}:{startsInside(e,t){for(const i of n){const s=i.startLineNumber;if(s>=e&&s<=t)return!0}return!1}}}function tpe(n){if(!Ks(n)){if(!Gn(n))return!1;const e=n;if(!Ks(e.levels)&&!jg(e.levels)||!Ks(e.direction)&&!Vo(e.direction)||!Ks(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(jg)))return!1}return!0}class fqe extends Rs{constructor(){super({id:"editor.unfold",label:p("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:tpe,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const o=s&&s.levels||1,r=this.getLineNumbers(s,i);s&&s.direction==="up"?Xme(t,!1,o,r):y1(t,!1,o,r)}}class gqe extends Rs{constructor(){super({id:"editor.unfoldRecursively",label:p("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2142),weight:100}})}invoke(e,t,i,s){y1(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}}class mqe extends Rs{constructor(){super({id:"editor.fold",label:p("foldAction.label","Fold"),alias:"Fold",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:tpe,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,i,s){const o=this.getLineNumbers(s,i),r=s&&s.levels,a=s&&s.direction;typeof r!="number"&&typeof a!="string"?K$e(t,!0,o):a==="up"?Xme(t,!0,r||1,o):y1(t,!0,r||1,o)}}class pqe extends Rs{constructor(){super({id:"editor.toggleFold",label:p("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2090),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);dq(t,1,s)}}class _qe extends Rs{constructor(){super({id:"editor.foldRecursively",label:p("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2140),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);y1(t,!0,Number.MAX_VALUE,s)}}class bqe extends Rs{constructor(){super({id:"editor.toggleFoldRecursively",label:p("toggleFoldRecursivelyAction.label","Toggle Fold Recursively"),alias:"Toggle Fold Recursively",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,3114),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);dq(t,Number.MAX_VALUE,s)}}class vqe extends Rs{constructor(){super({id:"editor.foldAllBlockComments",label:p("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2138),weight:100}})}invoke(e,t,i,s,o){if(t.regions.hasTypes())hq(t,Ug.Comment.value,!0);else{const r=i.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+ua(a.blockCommentStartToken));uq(t,l,!0)}}}}class wqe extends Rs{constructor(){super({id:"editor.foldAllMarkerRegions",label:p("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2077),weight:100}})}invoke(e,t,i,s,o){if(t.regions.hasTypes())hq(t,Ug.Region.value,!0);else{const r=i.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);uq(t,l,!0)}}}}class Cqe extends Rs{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:p("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2078),weight:100}})}invoke(e,t,i,s,o){if(t.regions.hasTypes())hq(t,Ug.Region.value,!1);else{const r=i.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);uq(t,l,!1)}}}}class yqe extends Rs{constructor(){super({id:"editor.foldAllExcept",label:p("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2136),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);Jme(t,!0,s)}}class Sqe extends Rs{constructor(){super({id:"editor.unfoldAllExcept",label:p("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2134),weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);Jme(t,!1,s)}}class xqe extends Rs{constructor(){super({id:"editor.foldAll",label:p("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2069),weight:100}})}invoke(e,t,i){y1(t,!0)}}class kqe extends Rs{constructor(){super({id:"editor.unfoldAll",label:p("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2088),weight:100}})}invoke(e,t,i){y1(t,!1)}}const Aw=class Aw extends Rs{getFoldingLevel(){return parseInt(this.id.substr(Aw.ID_PREFIX.length))}invoke(e,t,i){G$e(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}};Aw.ID_PREFIX="editor.foldLevel",Aw.ID=e=>Aw.ID_PREFIX+e;let nM=Aw;class Lqe extends Rs{constructor(){super({id:"editor.gotoParentFold",label:p("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const o=Y$e(s[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class Dqe extends Rs{constructor(){super({id:"editor.gotoPreviousFold",label:p("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const o=Z$e(s[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class Eqe extends Rs{constructor(){super({id:"editor.gotoNextFold",label:p("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,weight:100}})}invoke(e,t,i){const s=this.getSelectedLines(i);if(s.length>0){const o=Q$e(s[0],t);o!==null&&i.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class Nqe extends Rs{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:p("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2135),weight:100}})}invoke(e,t,i){var r;const s=[],o=i.getSelections();if(o){for(const a of o){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(s.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(s.length>0){s.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=Gr.sanitizeAndMerge(t.regions,s,(r=i.getModel())==null?void 0:r.getLineCount());t.updatePost(Gr.fromFoldRanges(a))}}}}class Iqe extends Rs{constructor(){super({id:"editor.removeManualFoldingRanges",label:p("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2137),weight:100}})}invoke(e,t,i){const s=i.getSelections();if(s){const o=[];for(const r of s){const{startLineNumber:a,endLineNumber:l}=r;o.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(o),e.triggerFoldingModelChanged()}}}wt(rm.ID,rm,0);se(fqe);se(gqe);se(mqe);se(_qe);se(bqe);se(xqe);se(kqe);se(vqe);se(wqe);se(Cqe);se(yqe);se(Sqe);se(pqe);se(Lqe);se(Dqe);se(Eqe);se(Nqe);se(Iqe);for(let n=1;n<=7;n++)GEe(new nM({id:nM.ID(n),label:p("foldLevelAction.label","Fold Level {0}",n),alias:`Fold Level ${n}`,precondition:Cs,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2048|21+n),weight:100}}));bt.registerCommand("_executeFoldingRangeProvider",async function(n,...e){const[t]=e;if(!(t instanceof Le))throw ja();const i=n.get(ve),s=n.get(gi).getModel(t);if(!s)throw ja();const o=n.get(nt);if(!o.getValue("editor.folding",{resource:t}))return[];const r=n.get(Ri),a=o.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return o.getValue("editor.foldingMaximumRegions",{resource:t})},update:(f,g)=>{}},c=new fq(s,r,l);let d=c;if(a!=="indentation"){const f=rm.getFoldingRangeProviders(i,s);f.length&&(d=new gq(s,f,()=>{},l,c))}const u=await d.compute(Ye.None),h=[];try{if(u)for(let f=0;f<u.length;f++){const g=u.getType(f);h.push({start:u.getStartLineNumber(f),end:u.getEndLineNumber(f),kind:g?Ug.fromValue(g):void 0})}return h}finally{d.dispose()}});class Tqe extends _e{constructor(){super({id:"editor.action.fontZoomIn",label:p("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){Ma.setZoomLevel(Ma.getZoomLevel()+1)}}class Pqe extends _e{constructor(){super({id:"editor.action.fontZoomOut",label:p("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){Ma.setZoomLevel(Ma.getZoomLevel()-1)}}class Mqe extends _e{constructor(){super({id:"editor.action.fontZoomReset",label:p("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){Ma.setZoomLevel(0)}}se(Tqe);se(Pqe);se(Mqe);var ipe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},RS=function(n,e){return function(t,i){e(t,i,n)}},WC;let sM=(WC=class{constructor(e,t,i,s){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._accessibilitySignalService=s,this._disposables=new Q,this._sessionDisposables=new Q,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(o=>{o.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new cT;for(const s of t.autoFormatTriggerCharacters)i.add(s.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(s=>{const o=s.charCodeAt(s.length-1);i.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),s=new Pi,o=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){s.cancel(),o.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=i.lineNumber){s.cancel(),o.dispose();return}});age(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),s.token).then(r=>{s.token.isCancellationRequested||Ys(r)&&(this._accessibilitySignalService.playSignal(Kr.format,{userGesture:!1}),Ey.execute(this._editor,r,!0))}).finally(()=>{o.dispose()})}},WC.ID="editor.contrib.autoFormat",WC);sM=ipe([RS(1,ve),RS(2,Jo),RS(3,vm)],sM);var BC;let oM=(BC=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new Q,this._callOnModel=new Q,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(rge,this.editor,e,2,wc.None,Ye.None,!1).catch(He))}},BC.ID="editor.contrib.formatOnPaste",BC);oM=ipe([RS(1,ve),RS(2,ke)],oM);class Rqe extends _e{constructor(){super({id:"editor.action.formatDocument",label:p("formatDocument.label","Format Document"),alias:"Format Document",precondition:X.and(I.notInCompositeEditor,I.writable,I.hasDocumentFormattingProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){const i=e.get(ke);await e.get(pm).showWhile(i.invokeFunction(j7e,t,1,wc.None,Ye.None,!0),250)}}}class Aqe extends _e{constructor(){super({id:"editor.action.formatSelection",label:p("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:X.and(I.writable,I.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2084),weight:100},contextMenuOpts:{when:I.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;const i=e.get(ke),s=t.getModel(),o=t.getSelections().map(a=>a.isEmpty()?new E(a.startLineNumber,1,a.startLineNumber,s.getLineMaxColumn(a.startLineNumber)):a);await e.get(pm).showWhile(i.invokeFunction(rge,t,o,1,wc.None,Ye.None,!0),250)}}wt(sM.ID,sM,2);wt(oM.ID,oM,2);se(Rqe);se(Aqe);bt.registerCommand("editor.action.format",async n=>{const e=n.get(kt).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=n.get(oi);e.getSelection().isEmpty()?await t.executeCommand("editor.action.formatDocument"):await t.executeCommand("editor.action.formatSelection")});var Oqe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},m5=function(n,e){return function(t,i){e(t,i,n)}};class vw{remove(){var e;(e=this.parent)==null||e.children.delete(this.id)}static findId(e,t){let i;typeof e=="string"?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,t.children.get(i)!==void 0&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let s=i;for(let o=0;t.children.get(s)!==void 0;o++)s=`${i}_${o}`;return s}static empty(e){return e.children.size===0}}class H9 extends vw{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class npe extends vw{constructor(e,t,i,s){super(),this.id=e,this.parent=t,this.label=i,this.order=s,this.children=new Map}}class zu extends vw{static create(e,t,i){const s=new Pi(i),o=new zu(t.uri),r=e.ordered(t),a=r.map((c,d)=>{const u=vw.findId(`provider_${d}`,o),h=new npe(u,o,c.displayName??"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,s.token)).then(f=>{for(const g of f||[])zu._makeOutlineElement(g,h);return h},f=>(en(f),h)).then(f=>{vw.empty(f)?f.remove():o._groups.set(u,f)})}),l=e.onDidChange(()=>{const c=e.ordered(t);Li(c,r)||s.cancel()});return Promise.all(a).then(()=>s.token.isCancellationRequested&&!i.isCancellationRequested?zu.create(e,t,i):o._compact()).finally(()=>{s.dispose(),l.dispose(),s.dispose()})}static _makeOutlineElement(e,t){const i=vw.findId(e,t),s=new H9(i,t,e);if(e.children)for(const o of e.children)zu._makeOutlineElement(o,s);t.children.set(s.id,s)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,i]of this._groups)i.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=_t.first(this._groups.values());for(const[,i]of t.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof H9?e.push(t.symbol):e.push(..._t.map(t.children.values(),i=>i.symbol));return e.sort((t,i)=>E.compareRangesUsingStarts(t.range,i.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return zu._flattenDocumentSymbols(t,e,""),t.sort((i,s)=>H.compare(E.getStartPosition(i.range),E.getStartPosition(s.range))||H.compare(E.getEndPosition(s.range),E.getEndPosition(i.range)))}static _flattenDocumentSymbols(e,t,i){for(const s of t)e.push({kind:s.kind,tags:s.tags,name:s.name,detail:s.detail,containerName:s.containerName||i,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&zu._flattenDocumentSymbols(e,s.children,s.name)}}const hD=dt("IOutlineModelService");let j9=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new Q,this._cache=new lu(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved(s=>{this._cache.delete(s.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){const i=this._languageFeaturesService.documentSymbolProvider,s=i.ordered(e);let o=this._cache.get(e.id);if(!o||o.versionId!==e.getVersionId()||!Li(o.provider,s)){const a=new Pi;o={versionId:e.getVersionId(),provider:s,promiseCnt:0,source:a,promise:zu.create(i,e,a.token),model:void 0},this._cache.set(e.id,o);const l=Date.now();o.promise.then(c=>{o.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(o.model)return o.model;o.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--o.promiseCnt===0&&(o.source.cancel(),this._cache.delete(e.id))});try{return await o.promise}finally{r.dispose()}}};j9=Oqe([m5(0,ve),m5(1,_a),m5(2,gi)],j9);mt(hD,j9,1);bt.registerCommand("_executeDocumentSymbolProvider",async function(n,...e){const[t]=e;xt(Le.isUri(t));const i=n.get(hD),o=await n.get(Zo).createModelReference(t);try{return(await i.getOrCreate(o.object.textEditorModel,Ye.None)).getTopLevelSymbols()}finally{o.dispose()}});const pd=class pd extends U{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=pd.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=pd.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=pd.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=pd.suppressSuggestions.bindTo(this.contextKeyService),this._register(Be(i=>{const s=this.model.read(i),o=s==null?void 0:s.state.read(i),r=!!(o!=null&&o.inlineCompletion)&&(o==null?void 0:o.primaryGhostText)!==void 0&&!(o!=null&&o.primaryGhostText.isEmpty());this.inlineCompletionVisible.set(r),o!=null&&o.primaryGhostText&&(o!=null&&o.inlineCompletion)&&this.suppressSuggestions.set(o.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(Be(i=>{const s=this.model.read(i);let o=!1,r=!0;const a=s==null?void 0:s.primaryGhostText.read(i);if(s!=null&&s.selectedSuggestItem&&a&&a.parts.length>0){const{column:l,lines:c}=a.parts[0],d=c[0],u=s.textModel.getLineIndentColumn(a.lineNumber);if(l<=u){let f=Zs(d);f===-1&&(f=d.length-1),o=f>0;const g=s.textModel.getOptions().tabSize;r=yn.visibleColumnFromColumn(d,f+1,g)<g}}this.inlineCompletionSuggestsIndentation.set(o),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(r)}))}};pd.inlineSuggestionVisible=new me("inlineSuggestionVisible",!1,p("inlineSuggestionVisible","Whether an inline suggestion is visible")),pd.inlineSuggestionHasIndentation=new me("inlineSuggestionHasIndentation",!1,p("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),pd.inlineSuggestionHasIndentationLessThanTabSize=new me("inlineSuggestionHasIndentationLessThanTabSize",!0,p("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),pd.suppressSuggestions=new me("inlineSuggestionSuppressSuggestions",void 0,p("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));let yr=pd;function Fqe(n){const e=new Q,t=e.add(Ace());return e.add(Be(i=>{t.setStyle(n.read(i))})),e}class Gk{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,i)=>t.equals(e.parts[i]))}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return new Mz([...this.parts.map(o=>new Yd(E.fromPositions(new H(1,o.column)),o.lines.join(`
`)))]).applyToString(i).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}}class rM{constructor(e,t,i){this.column=e,this.text=t,this.preview=i,this.lines=ru(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,i)=>t===e.lines[i])}}class V9{constructor(e,t,i,s=0){this.lineNumber=e,this.columnRange=t,this.text=i,this.additionalReservedLineCount=s,this.parts=[new rM(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=ru(this.text)}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,i)=>t===e.newLines[i])&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function die(n,e){return Li(n,e,spe)}function spe(n,e){return n===e?!0:!n||!e?!1:n instanceof Gk&&e instanceof Gk||n instanceof V9&&e instanceof V9?n.equals(e):!1}const Wqe=[];function Bqe(){return Wqe}class ope{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new Dt(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new E(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function rpe(n,e){const t=new Q,i=n.createDecorationsCollection();return t.add(UL({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const o=e.read(s);i.set(o)})),t.add({dispose:()=>{i.clear()}}),t}function Hqe(n,e){return new H(n.lineNumber+e.lineNumber-1,e.lineNumber===1?n.column+e.column-1:e.column)}function uie(n,e){return new H(n.lineNumber-e.lineNumber+1,n.lineNumber-e.lineNumber===0?n.column-e.column+1:n.column)}var jqe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Vqe=function(n,e){return function(t,i){e(t,i,n)}};const hie="ghost-text";let z9=class extends U{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=it(this,!1),this.currentTextModel=Ht(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=ye(this,s=>{if(this.isDisposed.read(s))return;const o=this.currentTextModel.read(s);if(o!==this.model.targetTextModel.read(s))return;const r=this.model.ghostText.read(s);if(!r)return;const a=r instanceof V9?r.columnRange:void 0,l=[],c=[];function d(m,_){if(c.length>0){const b=c[c.length-1];_&&b.decorations.push(new ho(b.content.length+1,b.content.length+1+m[0].length,_,0)),b.content+=m[0],m=m.slice(1)}for(const b of m)c.push({content:b,decorations:_?[new ho(1,b.length+1,_,0)]:[]})}const u=o.getLineContent(r.lineNumber);let h,f=0;for(const m of r.parts){let _=m.lines;h===void 0?(l.push({column:m.column,text:_[0],preview:m.preview}),_=_.slice(1)):d([u.substring(f,m.column-1)],void 0),_.length>0&&(d(_,hie),h===void 0&&m.column<=u.length&&(h=m.column)),f=m.column-1}h!==void 0&&d([u.substring(f)],void 0);const g=h!==void 0?new ope(h,u.length+1):void 0;return{replacedRange:a,inlineTexts:l,additionalLines:c,hiddenRange:g,lineNumber:r.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(s),targetTextModel:o}}),this.decorations=ye(this,s=>{const o=this.uiState.read(s);if(!o)return[];const r=[];o.replacedRange&&r.push({range:o.replacedRange.toRange(o.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),o.hiddenRange&&r.push({range:o.hiddenRange.toRange(o.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const a of o.inlineTexts)r.push({range:E.fromPositions(new H(o.lineNumber,a.column)),options:{description:hie,after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:xl.Left},showIfCollapsed:!0}});return r}),this.additionalLinesWidget=this._register(new zqe(this.editor,this.languageService.languageIdCodec,ye(s=>{const o=this.uiState.read(s);return o?{lineNumber:o.lineNumber,additionalLines:o.additionalLines,minReservedLineCount:o.additionalReservedLineCount,targetTextModel:o.targetTextModel}:void 0}))),this._register(xe(()=>{this.isDisposed.set(!0,void 0)})),this._register(rpe(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};z9=jqe([Vqe(2,Di)],z9);class zqe extends U{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=ms("editorOptionChanged",ue.filter(this.editor.onDidChangeConfiguration,s=>s.hasChanged(33)||s.hasChanged(118)||s.hasChanged(100)||s.hasChanged(95)||s.hasChanged(51)||s.hasChanged(50)||s.hasChanged(67))),this._register(Be(s=>{const o=this.lines.read(s);this.editorOptionsChanged.read(s),o?this.updateLines(o.lineNumber,o.additionalLines,o.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,i){const s=this.editor.getModel();if(!s)return;const{tabSize:o}=s.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,i);if(a>0){const l=document.createElement("div");Uqe(l,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}function Uqe(n,e,t,i,s){const o=i.get(33),r=i.get(118),a="none",l=i.get(95),c=i.get(51),d=i.get(50),u=i.get(67),h=new n1(1e4);h.appendString('<div class="suggest-preview-text">');for(let m=0,_=t.length;m<_;m++){const b=t[m],v=b.content;h.appendString('<div class="view-line'),h.appendString('" style="top:'),h.appendString(String(m*u)),h.appendString('px;width:1000000px;">');const w=TL(v),y=oy(v),S=Xn.createEmpty(v,s);JL(new wm(d.isMonospace&&!o,d.canUseHalfwidthRightwardsArrow,v,!1,w,y,0,S,b.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,r,a,l,c!==Vg.OFF,null),h),h.appendString("</div>")}h.appendString("</div>"),as(n,d);const f=h.build(),g=fie?fie.createHTML(f):f;n.innerHTML=g}const fie=Vh("editorGhostText",{createHTML:n=>n});function $qe(n,e){const t=new nhe,i=new ohe(t,c=>e.getLanguageConfiguration(c)),s=new she(new qqe([n]),i),o=ZH(s,[],void 0,!0);let r="";const a=n.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=zi(d,c.openingBracket.length),c.child&&(l(c.child,d),d=zi(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=zi(d,c.closingBracket.length);else{const h=i.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);r+=h}else if(c.kind!==3){if(c.kind===0||c.kind===1)r+=a.substring(d,zi(d,c.length));else if(c.kind===4)for(const u of c.children)l(u,d),d=zi(d,u.length)}}return l(o,uo),r}class qqe{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}async function ape(n,e,t,i,s=Ye.None,o){const r=e instanceof H?Yqe(e,t):e,a=n.all(t),l=new Ez;for(const b of a)b.groupId&&l.add(b.groupId,b);function c(b){if(!b.yieldsToGroupIds)return[];const v=[];for(const w of b.yieldsToGroupIds||[]){const y=l.get(w);for(const S of y)v.push(S)}return v}const d=new Map,u=new Set;function h(b,v){if(v=[...v,b],u.has(b))return v;u.add(b);try{const w=c(b);for(const y of w){const S=h(y,v);if(S)return S}}finally{u.delete(b)}}function f(b){const v=d.get(b);if(v)return v;const w=h(b,[]);w&&en(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${w.map(S=>S.toString?S.toString():""+S).join(" -> ")}`));const y=new Jy;return d.set(b,y.p),(async()=>{var S;if(!w){const x=c(b);for(const k of x){const D=await f(k);if(D&&D.items.length>0)return}}try{return e instanceof H?await b.provideInlineCompletions(t,e,i,s):await((S=b.provideInlineEdits)==null?void 0:S.call(b,t,e,i,s))}catch(x){en(x);return}})().then(S=>y.complete(S),S=>y.error(S)),y.p}const g=await Promise.all(a.map(async b=>({provider:b,completions:await f(b)}))),m=new Map,_=[];for(const b of g){const v=b.completions;if(!v)continue;const w=new Gqe(v,b.provider);_.push(w);for(const y of v.items){const S=aM.from(y,w,r,t,o);m.set(S.hash(),S)}}return new Kqe(Array.from(m.values()),new Set(m.keys()),_)}class Kqe{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class Gqe{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class aM{static from(e,t,i,s,o){let r,a,l=e.range?E.lift(e.range):i;if(typeof e.insertText=="string"){if(r=e.insertText,o&&e.completeBracketPairs){r=gie(r,l.getStartPosition(),s,o);const c=r.length-e.insertText.length;c!==0&&(l=new E(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+c))}a=void 0}else if("snippet"in e.insertText){const c=e.insertText.snippet.length;if(o&&e.completeBracketPairs){e.insertText.snippet=gie(e.insertText.snippet,l.getStartPosition(),s,o);const u=e.insertText.snippet.length-c;u!==0&&(l=new E(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+u))}const d=new xb().parse(e.insertText.snippet);d.children.length===1&&d.children[0]instanceof lo?(r=d.children[0].value,a=void 0):(r=d.toString(),a={snippet:e.insertText.snippet,range:l})}else _A(e.insertText);return new aM(r,e.command,l,r,a,e.additionalTextEdits||Bqe(),e,t)}constructor(e,t,i,s,o,r,a,l){this.filterText=e,this.command=t,this.range=i,this.insertText=s,this.snippetInfo=o,this.additionalTextEdits=r,this.sourceInlineCompletion=a,this.source=l,e=e.replace(/\r\n|\r/g,`
`),s=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new aM(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}toSingleTextEdit(){return new Yd(this.range,this.insertText)}}function Yqe(n,e){const t=e.getWordAtPosition(n),i=e.getLineMaxColumn(n.lineNumber);return t?new E(n.lineNumber,t.startColumn,n.lineNumber,i):E.fromPositions(n,n.with(void 0,i))}function gie(n,e,t,i){const o=t.getLineContent(e.lineNumber).substring(0,e.column-1)+n,r=t.tokenization.tokenizeLineWithEdit(e,o.length-(e.column-1),n),a=r==null?void 0:r.sliceAndInflate(e.column-1,o.length,0);return a?$qe(a,i):n}function Xp(n,e,t){const i=t?n.range.intersectRanges(t):n.range;if(!i)return n;const s=e.getValueInRange(i,1),o=$g(s,n.text),r=Al.ofText(s.substring(0,o)).addToPosition(n.range.getStartPosition()),a=n.text.substring(o),l=E.fromPositions(r,n.range.getEndPosition());return new Yd(l,a)}function lpe(n,e){return n.text.startsWith(e.text)&&Zqe(n.range,e.range)}function mie(n,e,t,i,s=0){let o=Xp(n,e);if(o.range.endLineNumber!==o.range.startLineNumber)return;const r=e.getLineContent(o.range.startLineNumber),a=Zt(r).length;if(o.range.startColumn-1<=a){const g=Zt(o.text).length,m=r.substring(o.range.startColumn-1,a),[_,b]=[o.range.getStartPosition(),o.range.getEndPosition()],v=_.column+m.length<=b.column?_.delta(0,m.length):b,w=E.fromPositions(v,b),y=o.text.startsWith(m)?o.text.substring(m.length):o.text.substring(g);o=new Yd(w,y)}const c=e.getValueInRange(o.range),d=Qqe(c,o.text);if(!d)return;const u=o.range.startLineNumber,h=new Array;if(t==="prefix"){const g=d.filter(m=>m.originalLength===0);if(g.length>1||g.length===1&&g[0].originalStart!==c.length)return}const f=o.text.length-s;for(const g of d){const m=o.range.startColumn+g.originalStart+g.originalLength;if(t==="subwordSmart"&&i&&i.lineNumber===o.range.startLineNumber&&m<i.column||g.originalLength>0)return;if(g.modifiedLength===0)continue;const _=g.modifiedStart+g.modifiedLength,b=Math.max(g.modifiedStart,Math.min(_,f)),v=o.text.substring(g.modifiedStart,b),w=o.text.substring(b,Math.max(g.modifiedStart,_));v.length>0&&h.push(new rM(m,v,!1)),w.length>0&&h.push(new rM(m,w,!0))}return new Gk(u,h)}function Zqe(n,e){return e.getStartPosition().equals(n.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(n.getEndPosition())}let od;function Qqe(n,e){if((od==null?void 0:od.originalValue)===n&&(od==null?void 0:od.newValue)===e)return od==null?void 0:od.changes;{let t=_ie(n,e,!0);if(t){const i=pie(t);if(i>0){const s=_ie(n,e,!1);s&&pie(s)<i&&(t=s)}}return od={originalValue:n,newValue:e,changes:t},t}}function pie(n){let e=0;for(const t of n)e+=t.originalLength;return e}function _ie(n,e,t){if(n.length>5e3||e.length>5e3)return;function i(c){let d=0;for(let u=0,h=c.length;u<h;u++){const f=c.charCodeAt(u);f>d&&(d=f)}return d}const s=Math.max(i(n),i(e));function o(c){if(c<0)throw new Error("unexpected");return s+c+1}function r(c){let d=0,u=0;const h=new Int32Array(c.length);for(let f=0,g=c.length;f<g;f++)if(t&&c[f]==="("){const m=u*100+d;h[f]=o(2*m),d++}else if(t&&c[f]===")"){d=Math.max(d-1,0);const m=u*100+d;h[f]=o(2*m+1),d===0&&u++}else h[f]=c.charCodeAt(f);return h}const a=r(n),l=r(e);return new Pd({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var Xqe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},bie=function(n,e){return function(t,i){e(t,i,n)}};let U9=class extends U{constructor(e,t,i,s,o){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=s,this.languageConfigurationService=o,this._updateOperation=this._register(new jn),this.inlineCompletions=lk("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=lk("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,i){var d,u;const s=new eKe(e,t,this.textModel.getVersionId()),o=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if((d=this._updateOperation.value)!=null&&d.request.satisfies(s))return this._updateOperation.value.promise;if((u=o.get())!=null&&u.request.satisfies(s))return Promise.resolve(!0);const r=!!this._updateOperation.value;this._updateOperation.clear();const a=new Pi,l=(async()=>{if((r||t.triggerKind===Lc.Automatic)&&await Jqe(this._debounceValue.get(this.textModel),a.token),a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==s.versionId)return!1;const f=new Date,g=await ape(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,a.token,this.languageConfigurationService);if(a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==s.versionId)return!1;const m=new Date;this._debounceValue.update(this.textModel,m.getTime()-f.getTime());const _=new iKe(g,s,this.textModel,this.versionId);if(i){const b=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!g.has(b)&&_.prepend(i.inlineCompletion,b.range,!0)}return this._updateOperation.clear(),Ti(b=>{o.set(_,b)}),!0})(),c=new tKe(s,a,l);return this._updateOperation.value=c,l}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;(t=this._updateOperation.value)!=null&&t.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};U9=Xqe([bie(3,ve),bie(4,Ri)],U9);function Jqe(n,e){return new Promise(t=>{let i;const s=setTimeout(()=>{i&&i.dispose(),t()},n);e&&(i=e.onCancellationRequested(()=>{clearTimeout(s),i&&i.dispose(),t()}))})}class eKe{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&IH(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,eAe())&&(e.context.triggerKind===Lc.Automatic||this.context.triggerKind===Lc.Explicit)&&this.versionId===e.versionId}}class tKe{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}}class iKe{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,s){this.inlineCompletionProviderResult=e,this.request=t,this._textModel=i,this._versionId=s,this._refCount=1,this._prependedInlineCompletionItems=[];const o=i.deltaDecorations([],e.completions.map(r=>({range:r.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((r,a)=>new vie(r,o[a],this._textModel,this._versionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,i){i&&e.source.addRef();const s=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new vie(e,s,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}}class vie{get forwardStable(){return this.inlineCompletion.source.inlineCompletions.enableForwardStability??!1}constructor(e,t,i,s){this.inlineCompletion=e,this.decorationId=t,this._textModel=i,this._modelVersion=s,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=Zr({owner:this,equalsFn:E.equalsRange},o=>(this._modelVersion.read(o),this._textModel.getDecorationRange(this.decorationId)))}toInlineCompletion(e){return this.inlineCompletion.withRange(this._updatedRange.read(e)??p5)}toSingleTextEdit(e){return new Yd(this._updatedRange.read(e)??p5,this.inlineCompletion.insertText)}isVisible(e,t,i){const s=Xp(this._toFilterTextReplacement(i),e),o=this._updatedRange.read(i);if(!o||!this.inlineCompletion.range.getStartPosition().equals(o.getStartPosition())||t.lineNumber!==s.range.startLineNumber)return!1;const r=e.getValueInRange(s.range,1),a=s.text,l=Math.max(0,t.column-s.range.startColumn);let c=a.substring(0,l),d=a.substring(l),u=r.substring(0,l),h=r.substring(l);const f=e.getLineIndentColumn(s.range.startLineNumber);return s.range.startColumn<=f&&(u=u.trimStart(),u.length===0&&(h=h.trimStart()),c=c.trimStart(),c.length===0&&(d=d.trimStart())),c.startsWith(u)&&!!cue(h,d)}canBeReused(e,t){const i=this._updatedRange.read(void 0);return!!i&&i.containsPosition(t)&&this.isVisible(e,t,void 0)&&Al.ofRange(i).isGreaterThanOrEqualTo(Al.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(e){return new Yd(this._updatedRange.read(e)??p5,this.inlineCompletion.filterText)}}const p5=new E(1,1,1,1),Je={Visible:lq,HasFocusedSuggestion:new me("suggestWidgetHasFocusedSuggestion",!1,p("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new me("suggestWidgetDetailsVisible",!1,p("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new me("suggestWidgetMultipleSuggestions",!1,p("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new me("suggestionMakesTextEdit",!0,p("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new me("acceptSuggestionOnEnter",!0,p("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new me("suggestionHasInsertAndReplaceRange",!1,p("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new me("suggestionInsertMode",void 0,{type:"string",description:p("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new me("suggestionCanResolve",!1,p("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},bg=new we("suggestWidgetStatusBar");class nKe{constructor(e,t,i,s){var o;this.position=e,this.completion=t,this.container=i,this.provider=s,this.isInvalid=!1,this.score=Ic.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(o=t.label)==null?void 0:o.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,E.isIRange(t.range)?(this.editStart=new H(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new H(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new H(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||E.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new H(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new H(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new H(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||E.spansMultipleLines(t.range.insert)||E.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof s.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),i=new Qn(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(s=>{Object.assign(this.completion,s),this._resolveDuration=i.elapsed()},s=>{el(s)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}}const j2=class j2{constructor(e=2,t=new Set,i=new Set,s=new Map,o=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.providerItemsToReuse=s,this.showDeprecated=o}};j2.default=new j2;let Yk=j2;class sKe{constructor(e,t,i,s){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=s}}async function mq(n,e,t,i=Yk.default,s={triggerKind:0},o=Ye.None){const r=new Qn;t=t.clone();const a=e.getWordAtPosition(t),l=a?new E(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):E.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],u=new Q,h=[];let f=!1;const g=(_,b,v)=>{var y;let w=!1;if(!b)return w;for(const S of b.suggestions)if(!i.kindFilter.has(S.kind)){if(!i.showDeprecated&&((y=S==null?void 0:S.tags)!=null&&y.includes(1)))continue;S.range||(S.range=c),S.sortText||(S.sortText=typeof S.label=="string"?S.label:S.label.label),!f&&S.insertTextRules&&S.insertTextRules&4&&(f=xb.guessNeedsClipboard(S.insertText)),d.push(new nKe(t,S,b,_)),w=!0}return eA(b)&&u.add(b),h.push({providerName:_._debugDisplayName??"unknown_provider",elapsedProvider:b.duration??-1,elapsedOverall:v.elapsed()}),w},m=(async()=>{})();for(const _ of n.orderedGroups(e)){let b=!1;if(await Promise.all(_.map(async v=>{if(i.providerItemsToReuse.has(v)){const w=i.providerItemsToReuse.get(v);w.forEach(y=>d.push(y)),b=b||w.length>0;return}if(!(i.providerFilter.size>0&&!i.providerFilter.has(v)))try{const w=new Qn,y=await v.provideCompletionItems(e,t,s,o);b=g(v,y,w)||b}catch(w){en(w)}})),b||o.isCancellationRequested)break}return await m,o.isCancellationRequested?(u.dispose(),Promise.reject(new Pl)):new sKe(d.sort(aKe(i.snippetSortOrder)),f,{entries:h,elapsed:r.elapsed()},u)}function pq(n,e){if(n.sortTextLow&&e.sortTextLow){if(n.sortTextLow<e.sortTextLow)return-1;if(n.sortTextLow>e.sortTextLow)return 1}return n.textLabel<e.textLabel?-1:n.textLabel>e.textLabel?1:n.completion.kind-e.completion.kind}function oKe(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return pq(n,e)}function rKe(n,e){if(n.completion.kind!==e.completion.kind){if(n.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return pq(n,e)}const LO=new Map;LO.set(0,oKe);LO.set(2,rKe);LO.set(1,pq);function aKe(n){return LO.get(n)}bt.registerCommand("_executeCompletionItemProvider",async(n,...e)=>{const[t,i,s,o]=e;xt(Le.isUri(t)),xt(H.isIPosition(i)),xt(typeof s=="string"||!s),xt(typeof o=="number"||!o);const{completionProvider:r}=n.get(ve),a=await n.get(Zo).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],d=a.object.textEditorModel.validatePosition(i),u=await mq(r,a.object.textEditorModel,d,void 0,{triggerCharacter:s??void 0,triggerKind:s?1:0});for(const h of u.items)c.length<(o??0)&&c.push(h.resolve(Ye.None)),l.incomplete=l.incomplete||h.container.incomplete,l.suggestions.push(h.completion);try{return await Promise.all(c),l}finally{setTimeout(()=>u.disposable.dispose(),100)}}finally{a.dispose()}});function lKe(n,e){var t;(t=n.getContribution("editor.contrib.suggestController"))==null||t.triggerSuggest(new Set().add(e),void 0,!0)}class ww{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}function wie(n,e=vs){return kTe(n,e)?n.charAt(0).toUpperCase()+n.slice(1):n}var cKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},dKe=function(n,e){return function(t,i){e(t,i,n)}};class Cie{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const i=t.resolve(e);if(i!==void 0)return i}}}class yie{constructor(e,t,i,s){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=s}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let i=this._model.getValueInRange(this._selection)||void 0,s=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){const o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(i=o.value,s=o.multiline)}if(i&&s&&e.snippet){const o=this._model.getLineContent(this._selection.startLineNumber),r=Zt(o,0,this._selection.startColumn-1);let a=r;e.snippet.walk(c=>c===e?!1:(c instanceof lo&&(a=Zt(ru(c.value).pop())),!0));const l=$g(a,r);i=i.replace(/(\r\n|\r|\n)(.*)/g,(c,d,u)=>`${d}${a.substr(l)}${u}`)}return i}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class Sie{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return hg(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const i=hg(this._model.uri.fsPath),s=i.lastIndexOf(".");return s<=0?i:i.slice(0,s)}else{if(t==="TM_DIRECTORY")return Qle(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(AA(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class xie{constructor(e,t,i,s){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=s}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const i=t.split(/\r\n|\n|\r/).filter(s=>!rce(s));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}}let lM=class{constructor(e,t,i){this._model=e,this._selection=t,this._languageConfigurationService=i}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),s=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(s){if(t==="LINE_COMMENT")return s.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return s.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return s.blockCommentEndToken||void 0}}};lM=cKe([dKe(2,Ri)],lM);const _d=class _d{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return _d.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return _d.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return _d.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return _d.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){const i=this._date.getTimezoneOffset(),s=i>0?"-":"+",o=Math.trunc(Math.abs(i/60)),r=o<10?"0"+o:o,a=Math.abs(i)-o*60,l=a<10?"0"+a:a;return s+r+":"+l}}};_d.dayNames=[p("Sunday","Sunday"),p("Monday","Monday"),p("Tuesday","Tuesday"),p("Wednesday","Wednesday"),p("Thursday","Thursday"),p("Friday","Friday"),p("Saturday","Saturday")],_d.dayNamesShort=[p("SundayShort","Sun"),p("MondayShort","Mon"),p("TuesdayShort","Tue"),p("WednesdayShort","Wed"),p("ThursdayShort","Thu"),p("FridayShort","Fri"),p("SaturdayShort","Sat")],_d.monthNames=[p("January","January"),p("February","February"),p("March","March"),p("April","April"),p("May","May"),p("June","June"),p("July","July"),p("August","August"),p("September","September"),p("October","October"),p("November","November"),p("December","December")],_d.monthNamesShort=[p("JanuaryShort","Jan"),p("FebruaryShort","Feb"),p("MarchShort","Mar"),p("AprilShort","Apr"),p("MayShort","May"),p("JuneShort","Jun"),p("JulyShort","Jul"),p("AugustShort","Aug"),p("SeptemberShort","Sep"),p("OctoberShort","Oct"),p("NovemberShort","Nov"),p("DecemberShort","Dec")];let cM=_d;class kie{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=zRe(this._workspaceService.getWorkspace());if(!jRe(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(yH(e))return hg(e.uri.path);let t=hg(e.configPath.path);return t.endsWith(SH)&&(t=t.substr(0,t.length-SH.length-1)),t}_resoveWorkspacePath(e){if(yH(e))return wie(e.uri.fsPath);const t=hg(e.configPath.path);let i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?wie(i):"/"}}class Lie{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return pO()}}var uKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},hKe=function(n,e){return function(t,i){e(t,i,n)}},Ql;const hl=class hl{constructor(e,t,i){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=RZ(t.placeholders,Pa.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const i of this._snippet.placeholders){const s=this._snippet.offset(i),o=this._snippet.fullLen(i),r=E.fromPositions(e.getPositionAt(this._offset+s),e.getPositionAt(this._offset+s+o)),a=i.isFinalTabstop?hl._decor.inactiveFinal:hl._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(i,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const s=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const r=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),c=o.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);s.push(Ii.replace(a,c.join(this._editor.getModel().getEOL())))}s.length>0&&this._editor.executeEdits("snippet.placeholderTransform",s)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations(s=>{const o=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);r.push(new Ce(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),s.changeDecorationOptions(l,a.isFinalTabstop?hl._decor.activeFinal:hl._decor.active),o.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const u=this._placeholderDecorations.get(d);s.changeDecorationOptions(u,d.isFinalTabstop?hl._decor.activeFinal:hl._decor.active),o.add(d)}}for(const[a,l]of this._placeholderDecorations)o.has(a)||s.changeDecorationOptions(l,a.isFinalTabstop?hl._decor.inactiveFinal:hl._decor.inactive);return r});return t?this.move(e):i??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Pa){const i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const s of t){if(s.isFinalTabstop)break;i||(i=[],e.set(s.index,i));const o=this._placeholderDecorations.get(s),r=this._editor.getModel().getDecorationRange(o);if(!r){e.delete(s.index);break}i.push(r)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(e!=null&&e.choice))return;const t=this._placeholderDecorations.get(e);if(!t)return;const i=this._editor.getModel().getDecorationRange(t);if(i)return{range:i,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof C1,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(i=>{for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift();console.assert(o._offset!==-1),console.assert(!o._placeholderDecorations);const r=o._snippet.placeholderInfo.last.index;for(const l of o._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=s.index+(r+1)/this._nestingLevel:l.index=s.index+l.index/this._nestingLevel;this._snippet.replace(s,o._snippet.children);const a=this._placeholderDecorations.get(s);i.removeDecoration(a),this._placeholderDecorations.delete(s);for(const l of o._snippet.placeholders){const c=o._snippet.offset(l),d=o._snippet.fullLen(l),u=E.fromPositions(t.getPositionAt(o._offset+c),t.getPositionAt(o._offset+c+d)),h=i.addDecoration(u,hl._decor.inactive);this._placeholderDecorations.set(l,h)}}this._placeholderGroups=RZ(this._snippet.placeholders,Pa.compareByIndex)})}};hl._decor={active:ze.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:ze.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:ze.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:ze.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};let dM=hl;const Die={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let uM=Ql=class{static adjustWhitespace(e,t,i,s,o){const r=e.getLineContent(t.lineNumber),a=Zt(r,0,t.column-1);let l;return s.walk(c=>{if(!(c instanceof lo)||c.parent instanceof C1||o&&!o.has(c))return!0;const d=c.value.split(/\r\n|\r|\n/);if(i){const h=s.offset(c);if(h===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??s.toString();const f=l.charCodeAt(h-1);(f===10||f===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let f=1;f<d.length;f++)d[f]=e.normalizeIndentation(a+d[f])}const u=d.join(e.getEOL());return u!==c.value&&(c.parent.replace(c,[new lo(u)]),l=void 0),!0}),a}static adjustSelection(e,t,i,s){if(i!==0||s!==0){const{positionLineNumber:o,positionColumn:r}=t,a=r-i,l=r+s,c=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:l});t=Ce.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,i,s,o,r,a,l,c){const d=[],u=[];if(!e.hasModel())return{edits:d,snippets:u};const h=e.getModel(),f=e.invokeWithinContext(y=>y.get(pb)),g=e.invokeWithinContext(y=>new Sie(y.get(_y),h)),m=()=>a,_=h.getValueInRange(Ql.adjustSelection(h,e.getSelection(),i,0)),b=h.getValueInRange(Ql.adjustSelection(h,e.getSelection(),0,s)),v=h.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),w=e.getSelections().map((y,S)=>({selection:y,idx:S})).sort((y,S)=>E.compareRangesUsingStarts(y.selection,S.selection));for(const{selection:y,idx:S}of w){let x=Ql.adjustSelection(h,y,i,0),k=Ql.adjustSelection(h,y,0,s);_!==h.getValueInRange(x)&&(x=y),b!==h.getValueInRange(k)&&(k=y);const D=y.setStartPosition(x.startLineNumber,x.startColumn).setEndPosition(k.endLineNumber,k.endColumn),N=new xb().parse(t,!0,o),R=D.getStartPosition(),O=Ql.adjustWhitespace(h,R,r||S>0&&v!==h.getLineFirstNonWhitespaceColumn(y.positionLineNumber),N);N.resolveVariables(new Cie([g,new xie(m,S,w.length,e.getOption(79)==="spread"),new yie(h,y,S,l),new lM(h,y,c),new cM,new kie(f),new Lie])),d[S]=Ii.replace(D,N.toString()),d[S].identifier={major:S,minor:0},d[S]._isTracked=!0,u[S]=new dM(e,N,O)}return{edits:d,snippets:u}}static createEditsAndSnippetsFromEdits(e,t,i,s,o,r,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),d=new xb,u=new oD,h=new Cie([e.invokeWithinContext(g=>new Sie(g.get(_y),c)),new xie(()=>o,0,e.getSelections().length,e.getOption(79)==="spread"),new yie(c,e.getSelection(),0,r),new lM(c,e.getSelection(),a),new cM,new kie(e.invokeWithinContext(g=>g.get(pb))),new Lie]);t=t.sort((g,m)=>E.compareRangesUsingStarts(g.range,m.range));let f=0;for(let g=0;g<t.length;g++){const{range:m,template:_}=t[g];if(g>0){const S=t[g-1].range,x=E.fromPositions(S.getEndPosition(),m.getStartPosition()),k=new lo(c.getValueInRange(x));u.appendChild(k),f+=k.value.length}const b=d.parseFragment(_,u);Ql.adjustWhitespace(c,m.getStartPosition(),!0,u,new Set(b)),u.resolveVariables(h);const v=u.toString(),w=v.slice(f);f=v.length;const y=Ii.replace(m,w);y.identifier={major:g,minor:0},y._isTracked=!0,l.push(y)}return d.ensureFinalTabstop(u,i,!0),{edits:l,snippets:[new dM(e,u,"")]}}constructor(e,t,i=Die,s){this._editor=e,this._template=t,this._options=i,this._languageConfigurationService=s,this._templateMerges=[],this._snippets=[]}dispose(){Qt(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?Ql.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Ql.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,i=>{const s=i.filter(o=>!!o.identifier);for(let o=0;o<t.length;o++)t[o].initialize(s[o].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):s.map(o=>Ce.fromPositions(o.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=Die){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:s}=Ql.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",i,o=>{const r=o.filter(l=>!!l.identifier);for(let l=0;l<s.length;l++)s[l].initialize(r[l].textChange);const a=s[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(s);console.assert(s.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):r.map(l=>Ce.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const s=i.move(e);t.push(...s)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const i of this._snippets){const s=i.computePossibleSelections();if(t.size===0)for(const[o,r]of s){r.sort(E.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,r)=>{o.push(...s.get(r))})}e.sort(E.compareRangesUsingStarts);for(const[i,s]of t){if(s.length!==e.length){t.delete(i);continue}s.sort(E.compareRangesUsingStarts);for(let o=0;o<s.length;o++)if(!s[o].containsRange(e[o])){t.delete(i);continue}}return t.size>0}};uM=Ql=uKe([hKe(3,Ri)],uM);var fKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},VE=function(n,e){return function(t,i){e(t,i,n)}},Wv;const Eie={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};var Od;let So=(Od=class{static get(e){return e.getContribution(Wv.ID)}constructor(e,t,i,s,o){this._editor=e,this._logService=t,this._languageFeaturesService=i,this._languageConfigurationService=o,this._snippetListener=new Q,this._modelVersionId=-1,this._inSnippet=Wv.InSnippetMode.bindTo(s),this._hasNextTabstop=Wv.HasNextTabstop.bindTo(s),this._hasPrevTabstop=Wv.HasPrevTabstop.bindTo(s)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)==null||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?Eie:{...Eie,...t})}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var i;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(xt(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new uM(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),(i=this._session)!=null&&i.hasChoice){const s={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(d,u)=>{if(!this._session||d!==this._editor.getModel()||!H.equals(this._editor.getPosition(),u))return;const{activeChoice:h}=this._session;if(!h||h.choice.options.length===0)return;const f=d.getValueInRange(h.range),g=!!h.choice.options.find(_=>_.value===f),m=[];for(let _=0;_<h.choice.options.length;_++){const b=h.choice.options[_];m.push({kind:13,label:b.value,insertText:b.value,sortText:"a".repeat(_+1),range:h.range,filterText:g?`${f}_${b.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:p("next","Go to next placeholder...")}})}return{suggestions:m}}},o=this._editor.getModel();let r,a=!1;const l=()=>{r==null||r.dispose(),a=!1},c=()=>{a||(r=this._languageFeaturesService.completionProvider.register({language:o.getLanguageId(),pattern:o.uri.fsPath,scheme:o.uri.scheme,exclusive:!0},s),this._snippetListener.add(r),a=!0)};this._choiceCompletions={provider:s,enable:c,disable:l}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(s=>s.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var t;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletions){(t=this._choiceCompletions)==null||t.disable(),this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{lKe(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)==null||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)==null||e.prev(),this._updateState()}next(){var e;(e=this._session)==null||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}},Wv=Od,Od.ID="snippetController2",Od.InSnippetMode=new me("inSnippetMode",!1,p("inSnippetMode","Whether the editor in current in snippet mode")),Od.HasNextTabstop=new me("hasNextTabstop",!1,p("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),Od.HasPrevTabstop=new me("hasPrevTabstop",!1,p("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),Od);So=Wv=fKe([VE(1,ws),VE(2,ve),VE(3,Ae),VE(4,Ri)],So);wt(So.ID,So,4);const DO=xn.bindToContribution(So.get);fe(new DO({id:"jumpToNextSnippetPlaceholder",precondition:X.and(So.InSnippetMode,So.HasNextTabstop),handler:n=>n.next(),kbOpts:{weight:130,kbExpr:I.textInputFocus,primary:2}}));fe(new DO({id:"jumpToPrevSnippetPlaceholder",precondition:X.and(So.InSnippetMode,So.HasPrevTabstop),handler:n=>n.prev(),kbOpts:{weight:130,kbExpr:I.textInputFocus,primary:1026}}));fe(new DO({id:"leaveSnippet",precondition:So.InSnippetMode,handler:n=>n.cancel(!0),kbOpts:{weight:130,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}}));fe(new DO({id:"acceptSnippet",precondition:So.InSnippetMode,handler:n=>n.finish()}));var gKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},_5=function(n,e){return function(t,i){e(t,i,n)}};let $9=class extends U{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,i,s,o,r,a,l,c,d,u,h){super(),this.textModel=e,this.selectedSuggestItem=t,this._textModelVersionId=i,this._positions=s,this._debounceValue=o,this._suggestPreviewEnabled=r,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=c,this._instantiationService=d,this._commandService=u,this._languageConfigurationService=h,this._source=this._register(this._instantiationService.createInstance(U9,this.textModel,this._textModelVersionId,this._debounceValue)),this._isActive=it(this,!1),this._forceUpdateExplicitlySignal=d1(this),this._selectedInlineCompletionId=it(this,void 0),this._primaryPosition=ye(this,g=>this._positions.read(g)[0]??new H(1,1)),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([Pu.Redo,Pu.Undo,Pu.AcceptWord]),this._fetchInlineCompletionsPromise=Tue({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Lc.Automatic}),handleChange:(g,m)=>(g.didChange(this._textModelVersionId)&&this._preserveCurrentCompletionReasons.has(this._getReason(g.change))?m.preserveCurrentCompletion=!0:g.didChange(this._forceUpdateExplicitlySignal)&&(m.inlineCompletionTriggerKind=Lc.Explicit),!0)},(g,m)=>{if(this._forceUpdateExplicitlySignal.read(g),!(this._enabled.read(g)&&this.selectedSuggestItem.read(g)||this._isActive.read(g))){this._source.cancelUpdate();return}this._textModelVersionId.read(g);const b=this._source.suggestWidgetInlineCompletions.get(),v=this.selectedSuggestItem.read(g);if(b&&!v){const k=this._source.inlineCompletions.get();Ti(D=>{(!k||b.request.versionId>k.request.versionId)&&this._source.inlineCompletions.set(b.clone(),D),this._source.clearSuggestWidgetInlineCompletions(D)})}const w=this._primaryPosition.read(g),y={triggerKind:m.inlineCompletionTriggerKind,selectedSuggestionInfo:v==null?void 0:v.toSelectedSuggestionInfo()},S=this.selectedInlineCompletion.get(),x=m.preserveCurrentCompletion||S!=null&&S.forwardStable?S:void 0;return this._source.fetch(w,y,x)}),this._filteredInlineCompletionItems=Zr({owner:this,equalsFn:TT()},g=>{const m=this._source.inlineCompletions.read(g);if(!m)return[];const _=this._primaryPosition.read(g);return m.inlineCompletions.filter(v=>v.isVisible(this.textModel,_,g))}),this.selectedInlineCompletionIndex=ye(this,g=>{const m=this._selectedInlineCompletionId.read(g),_=this._filteredInlineCompletionItems.read(g),b=this._selectedInlineCompletionId===void 0?-1:_.findIndex(v=>v.semanticId===m);return b===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):b}),this.selectedInlineCompletion=ye(this,g=>{const m=this._filteredInlineCompletionItems.read(g),_=this.selectedInlineCompletionIndex.read(g);return m[_]}),this.activeCommands=Zr({owner:this,equalsFn:TT()},g=>{var m;return((m=this.selectedInlineCompletion.read(g))==null?void 0:m.inlineCompletion.source.inlineCompletions.commands)??[]}),this.lastTriggerKind=this._source.inlineCompletions.map(this,g=>g==null?void 0:g.request.context.triggerKind),this.inlineCompletionsCount=ye(this,g=>{if(this.lastTriggerKind.read(g)===Lc.Explicit)return this._filteredInlineCompletionItems.read(g).length}),this.state=Zr({owner:this,equalsFn:(g,m)=>!g||!m?g===m:die(g.ghostTexts,m.ghostTexts)&&g.inlineCompletion===m.inlineCompletion&&g.suggestItem===m.suggestItem},g=>{const m=this.textModel,_=this.selectedSuggestItem.read(g);if(_){const b=Xp(_.toSingleTextEdit(),m),v=this._computeAugmentation(b,g);if(!this._suggestPreviewEnabled.read(g)&&!v)return;const y=(v==null?void 0:v.edit)??b,S=v?v.edit.text.length-b.text.length:0,x=this._suggestPreviewMode.read(g),k=this._positions.read(g),D=[y,...b5(this.textModel,k,y)],N=D.map((O,B)=>mie(O,m,x,k[B],S)).filter(zd),R=N[0]??new Gk(y.range.endLineNumber,[]);return{edits:D,primaryGhostText:R,ghostTexts:N,inlineCompletion:v==null?void 0:v.completion,suggestItem:_}}else{if(!this._isActive.read(g))return;const b=this.selectedInlineCompletion.read(g);if(!b)return;const v=b.toSingleTextEdit(g),w=this._inlineSuggestMode.read(g),y=this._positions.read(g),S=[v,...b5(this.textModel,y,v)],x=S.map((k,D)=>mie(k,m,w,y[D],0)).filter(zd);return x[0]?{edits:S,primaryGhostText:x[0],ghostTexts:x,inlineCompletion:b,suggestItem:void 0}:void 0}}),this.ghostTexts=Zr({owner:this,equalsFn:die},g=>{const m=this.state.read(g);if(m)return m.ghostTexts}),this.primaryGhostText=Zr({owner:this,equalsFn:spe},g=>{const m=this.state.read(g);if(m)return m==null?void 0:m.primaryGhostText}),this._register(u1(this._fetchInlineCompletionsPromise));let f;this._register(Be(g=>{var b,v;const m=this.state.read(g),_=m==null?void 0:m.inlineCompletion;if((_==null?void 0:_.semanticId)!==(f==null?void 0:f.semanticId)&&(f=_,_)){const w=_.inlineCompletion,y=w.source;(v=(b=y.provider).handleItemDidShow)==null||v.call(b,y.inlineCompletions,w.sourceInlineCompletion,w.insertText)}}))}_getReason(e){return e!=null&&e.isUndoing?Pu.Undo:e!=null&&e.isRedoing?Pu.Redo:this.isAcceptingPartially?Pu.AcceptWord:Pu.Other}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(e){_b(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineCompletionsPromise.get()}stop(e){_b(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentation(e,t){const i=this.textModel,s=this._source.suggestWidgetInlineCompletions.read(t),o=s?s.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(zd);return wIe(o,a=>{let l=a.toSingleTextEdit(t);return l=Xp(l,i,E.fromPositions(l.range.getStartPosition(),e.range.getEndPosition())),lpe(l,e)?{completion:a,edit:l}:void 0})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){var s;if(e.getModel()!==this.textModel)throw new Dt;const t=this.state.get();if(!t||t.primaryGhostText.isEmpty()||!t.inlineCompletion)return;const i=t.inlineCompletion.toInlineCompletion(void 0);if(i.command&&i.source.addRef(),e.pushUndoStop(),i.snippetInfo)e.executeEdits("inlineSuggestion.accept",[Ii.replace(i.range,""),...i.additionalTextEdits]),e.setPosition(i.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),(s=So.get(e))==null||s.insert(i.snippetInfo.snippet,{undoStopBefore:!1});else{const o=t.edits,r=Nie(o).map(a=>Ce.fromPositions(a));e.executeEdits("inlineSuggestion.accept",[...o.map(a=>Ii.replace(a.range,a.text)),...i.additionalTextEdits]),e.setSelections(r,"inlineCompletionAccept")}this.stop(),i.command&&(await this._commandService.executeCommand(i.command.id,...i.command.arguments||[]).then(void 0,en),i.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,(t,i)=>{const s=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),o=this._languageConfigurationService.getLanguageConfiguration(s),r=new RegExp(o.wordDefinition.source,o.wordDefinition.flags.replace("g","")),a=i.match(r);let l=0;a&&a.index!==void 0?a.index===0?l=a[0].length:l=a.index:l=i.length;const d=/\s+/g.exec(i);return d&&d.index!==void 0&&d.index+d[0].length<l&&(l=d.index+d[0].length),l},0)}async acceptNextLine(e){await this._acceptNext(e,(t,i)=>{const s=i.match(/\n/);return s&&s.index!==void 0?s.index+1:i.length},1)}async _acceptNext(e,t,i){if(e.getModel()!==this.textModel)throw new Dt;const s=this.state.get();if(!s||s.primaryGhostText.isEmpty()||!s.inlineCompletion)return;const o=s.primaryGhostText,r=s.inlineCompletion.toInlineCompletion(void 0);if(r.snippetInfo||r.filterText!==r.insertText){await this.accept(e);return}const a=o.parts[0],l=new H(o.lineNumber,a.column),c=a.text,d=t(l,c);if(d===c.length&&o.parts.length===1){this.accept(e);return}const u=c.substring(0,d),h=this._positions.get(),f=h[0];r.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();const g=E.fromPositions(f,l),m=e.getModel().getValueInRange(g)+u,_=new Yd(g,m),b=[_,...b5(this.textModel,h,_)],v=Nie(b).map(w=>Ce.fromPositions(w));e.executeEdits("inlineSuggestion.accept",b.map(w=>Ii.replace(w.range,w.text))),e.setSelections(v,"inlineCompletionPartialAccept"),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(r.source.provider.handlePartialAccept){const g=E.fromPositions(r.range.getStartPosition(),Al.ofText(u).addToPosition(l)),m=e.getModel().getValueInRange(g,1);r.source.provider.handlePartialAccept(r.source.inlineCompletions,r.sourceInlineCompletion,m.length,{kind:i})}}finally{r.source.removeRef()}}handleSuggestAccepted(e){var o,r;const t=Xp(e.toSingleTextEdit(),this.textModel),i=this._computeAugmentation(t,void 0);if(!i)return;const s=i.completion.inlineCompletion;(r=(o=s.source.provider).handlePartialAccept)==null||r.call(o,s.source.inlineCompletions,s.sourceInlineCompletion,t.text.length,{kind:2})}};$9=gKe([_5(9,ke),_5(10,oi),_5(11,Ri)],$9);var Pu;(function(n){n[n.Undo=0]="Undo",n[n.Redo=1]="Redo",n[n.AcceptWord=2]="AcceptWord",n[n.Other=3]="Other"})(Pu||(Pu={}));function b5(n,e,t){if(e.length===1)return[];const i=e[0],s=e.slice(1),o=t.range.getStartPosition(),r=t.range.getEndPosition(),a=n.getValueInRange(E.fromPositions(i,r)),l=uie(i,o);if(l.lineNumber<1)return He(new Dt(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${i.toString()} and ${o.toString()}`)),[];const c=mKe(t.text,l);return s.map(d=>{const u=Hqe(uie(d,o),r),h=n.getValueInRange(E.fromPositions(d,u)),f=$g(a,h),g=E.fromPositions(d,d.delta(0,f));return new Yd(g,c)})}function mKe(n,e){let t="";const i=qLe(n);for(let s=e.lineNumber-1;s<i.length;s++)t+=i[s].substring(s===e.lineNumber-1?e.column-1:0);return t}function Nie(n){const e=FI.createSortPermutation(n,mo(o=>o.range,E.compareRangesUsingStarts)),i=new Mz(e.apply(n)).getNewRanges();return e.inverse().apply(i).map(o=>o.getEndPosition())}var pKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Iie=function(n,e){return function(t,i){e(t,i,n)}},A0;class _q{constructor(e){this.name=e}select(e,t,i){if(i.length===0)return 0;const s=i[0].score[0];for(let o=0;o<i.length;o++){const{score:r,completion:a}=i[o];if(r[0]!==s)break;if(a.preselect)return o}return 0}}class Tie extends _q{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}class _Ke extends _q{constructor(){super("recentlyUsed"),this._cache=new lu(300,.66),this._seq=0}memorize(e,t,i){const s=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(s,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(i.length===0)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,i);const o=i[0].score[0];let r=-1,a=-1,l=-1;for(let c=0;c<i.length&&i[c].score[0]===o;c++){const d=`${e.getLanguageId()}/${i[c].textLabel}`,u=this._cache.peek(d);if(u&&u.touch>l&&u.type===i[c].completion.kind&&u.insertText===i[c].completion.insertText&&(l=u.touch,a=c),i[c].completion.preselect&&r===-1)return r=c}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[i,s]of e)s.touch=t,s.type=typeof s.type=="number"?s.type:Ox.fromString(s.type),this._cache.set(i,s);this._seq=this._cache.size}}class bKe extends _q{constructor(){super("recentlyUsedByPrefix"),this._trie=nC.forStrings(),this._seq=0}memorize(e,t,i){const{word:s}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${s}`;this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){const{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,i);const o=`${e.getLanguageId()}/${s}`;let r=this._trie.get(o);if(r||(r=this._trie.findSubstr(o)),r)for(let a=0;a<i.length;a++){const{kind:l,insertText:c}=i[a].completion;if(l===r.type&&c===r.insertText)return a}return super.select(e,t,i)}toJSON(){const e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((t,i)=>-(t[1].touch-i[1].touch)).forEach((t,i)=>t[1].touch=i),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type=typeof i.type=="number"?i.type:Ox.fromString(i.type),this._trie.set(t,i)}}}var Eg;let q9=(Eg=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new Q,this._persistSoon=new $t(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(i=>{i.reason===uk.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var s;const i=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((s=this._strategy)==null?void 0:s.name)!==i){this._saveState();const o=A0._strategyCtors.get(i)||Tie;this._strategy=new o;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${A0._storagePrefix}/${i}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${A0._storagePrefix}/${this._strategy.name}`,i,t,1)}}},A0=Eg,Eg._strategyCtors=new Map([["recentlyUsedByPrefix",bKe],["recentlyUsed",_Ke],["first",Tie]]),Eg._storagePrefix="suggest/memories",Eg);q9=A0=pKe([Iie(0,jl),Iie(1,nt)],q9);const EO=dt("ISuggestMemories");mt(EO,q9,1);var vKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},wKe=function(n,e){return function(t,i){e(t,i,n)}},K9,E_;let hM=(E_=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=K9.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(i=>i.hasChanged(124)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)==null||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(124)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const i=this._editor.getModel(),s=this._editor.getSelection(),o=i.getWordAtPosition(s.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===s.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}},K9=E_,E_.AtEnd=new me("atEndOfWord",!1),E_);hM=K9=vKe([wKe(1,Ae)],hM);var CKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},yKe=function(n,e){return function(t,i){e(t,i,n)}},O0,N_;let Wy=(N_=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=O0.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)==null||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(e.items.length===0){this.reset();return}if(O0._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,i){let s=i;for(let o=t.items.length;o>0&&(s=(s+t.items.length+(e?1:-1))%t.items.length,!(s===i||!t.items[s].completion.additionalTextEdits));o--);return s}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=O0._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},O0=N_,N_.OtherSuggestions=new me("hasOtherSuggestions",!1),N_);Wy=O0=CKe([yKe(1,Ae)],Wy);class SKe{constructor(e,t,i,s){this._disposables=new Q,this._disposables.add(i.onDidSuggest(o=>{o.completionModel.items.length===0&&this.reset()})),this._disposables.add(i.onDidCancel(o=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(o=>{if(this._active&&!t.isFrozen()&&i.state!==0){const r=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&s(this._active.item)}}))}_onItem(e){if(!e||!Ys(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new cT;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}const La=class La{async provideSelectionRanges(e,t){const i=[];for(const s of t){const o=[];i.push(o);const r=new Map;await new Promise(a=>La._bracketsRightYield(a,0,e,s,r)),await new Promise(a=>La._bracketsLeftYield(a,0,e,s,r,o))}return i}static _bracketsRightYield(e,t,i,s,o){const r=new Map,a=Date.now();for(;;){if(t>=La._maxRounds){e();break}if(!s){e();break}const l=i.bracketPairs.findNextBracket(s);if(!l){e();break}if(Date.now()-a>La._maxDuration){setTimeout(()=>La._bracketsRightYield(e,t+1,i,s,o));break}if(l.bracketInfo.isOpeningBracket){const d=l.bracketInfo.bracketText,u=r.has(d)?r.get(d):0;r.set(d,u+1)}else{const d=l.bracketInfo.getOpeningBrackets()[0].bracketText;let u=r.has(d)?r.get(d):0;if(u-=1,r.set(d,Math.max(0,u)),u<0){let h=o.get(d);h||(h=new co,o.set(d,h)),h.push(l.range)}}s=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,s,o,r){const a=new Map,l=Date.now();for(;;){if(t>=La._maxRounds&&o.size===0){e();break}if(!s){e();break}const c=i.bracketPairs.findPrevBracket(s);if(!c){e();break}if(Date.now()-l>La._maxDuration){setTimeout(()=>La._bracketsLeftYield(e,t+1,i,s,o,r));break}if(c.bracketInfo.isOpeningBracket){const u=c.bracketInfo.bracketText;let h=a.has(u)?a.get(u):0;if(h-=1,a.set(u,Math.max(0,h)),h<0){const f=o.get(u);if(f){const g=f.shift();f.size===0&&o.delete(u);const m=E.fromPositions(c.range.getEndPosition(),g.getStartPosition()),_=E.fromPositions(c.range.getStartPosition(),g.getEndPosition());r.push({range:m}),r.push({range:_}),La._addBracketLeading(i,_,r)}}}else{const u=c.bracketInfo.getOpeningBrackets()[0].bracketText,h=a.has(u)?a.get(u):0;a.set(u,h+1)}s=c.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const s=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(s);o!==0&&o!==t.startColumn&&(i.push({range:E.fromPositions(new H(s,o),t.getEndPosition())}),i.push({range:E.fromPositions(new H(s,1),t.getEndPosition())}));const r=s-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(i.push({range:E.fromPositions(new H(r,a),t.getEndPosition())}),i.push({range:E.fromPositions(new H(r,1),t.getEndPosition())}))}}};La._maxDuration=30,La._maxRounds=2;let fM=La;const bd=class bd{static async create(e,t){if(!t.getOption(119).localityBonus||!t.hasModel())return bd.None;const i=t.getModel(),s=t.getPosition();if(!e.canComputeWordRanges(i.uri))return bd.None;const[o]=await new fM().provideSelectionRanges(i,[s]);if(o.length===0)return bd.None;const r=await e.computeWordRanges(i.uri,o[0].range);if(!r)return bd.None;const a=i.getWordUntilPosition(s);return delete r[a.word],new class extends bd{distance(l,c){if(!s.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const d=typeof c.label=="string"?c.label:c.label.label,u=r[d];if(Lle(u))return 2<<20;const h=Ix(u,E.fromPositions(l),E.compareRangesUsingStarts),f=h>=0?u[h]:u[Math.max(0,~h-1)];let g=o.length;for(const m of o){if(!E.containsRange(m.range,f))break;g-=1}return g}}}};bd.None=new class extends bd{distance(){return 0}};let gM=bd,Pie=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}};class Pf{constructor(e,t,i,s,o,r,a=sk.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=Pf._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=o,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=a,r==="top"?this._snippetCompareFn=Pf._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=Pf._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,i]of this.getItemsByProvider())i.length>0&&i[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let s="",o="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?mb:u2e;for(let c=0;c<r.length;c++){const d=r[c];if(d.isInvalid)continue;const u=this._itemsByProvider.get(d.provider);u?u.push(d):this._itemsByProvider.set(d.provider,[d]);const h=d.position.column-d.editStart.column,f=h+i-(d.position.column-this._column);if(s.length!==f&&(s=f===0?"":t.slice(-f),o=s.toLowerCase()),d.word=s,f===0)d.score=Ic.Default;else{let g=0;for(;g<h;){const m=s.charCodeAt(g);if(m===32||m===9)g+=1;else break}if(g>=f)d.score=Ic.Default;else if(typeof d.completion.filterText=="string"){const m=l(s,o,g,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!m)continue;dB(d.completion.filterText,d.textLabel)===0?d.score=m:(d.score=a2e(s,o,g,d.textLabel,d.labelLow,0),d.score[0]=m[0])}else{const m=l(s,o,g,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!m)continue;d.score=m}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?tW(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return Pf._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return Pf._compareCompletionItems(e,t)}}var xKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},of=function(n,e){return function(t,i){e(t,i,n)}},G9;class Wm{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);const s=t.getWordAtPosition(i);return!(!s||s.endColumn!==i.column&&s.startColumn+1!==i.column||!isNaN(Number(s.word)))}constructor(e,t,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=i}}function kKe(n,e,t){if(!e.getContextKeyValue(yr.inlineSuggestionVisible.key))return!0;const i=e.getContextKeyValue(yr.suppressSuggestions.key);return i!==void 0?!i:!n.getOption(62).suppressSuggestions}function LKe(n,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const i=e.getContextKeyValue(yr.suppressSuggestions.key);return i!==void 0?!i:!n.getOption(62).suppressSuggestions}let mM=G9=class{constructor(e,t,i,s,o,r,a,l,c){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=s,this._logService=o,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._envService=c,this._toDispose=new Q,this._triggerCharacterListener=new Q,this._triggerQuickSuggest=new Bl,this._triggerState=void 0,this._completionDisposables=new Q,this._onDidCancel=new j,this._onDidTrigger=new j,this._onDidSuggest=new j,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Ce(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let d=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{d=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{d=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(u=>{d||this._onCursorChange(u)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!d&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){Qt(this._triggerCharacterListener),Qt([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(92)||!this._editor.hasModel()||!this._editor.getOption(122))return;const e=new Map;for(const i of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const s of i.triggerCharacters||[]){let o=e.get(s);o||(o=new Set,e.set(s,o)),o.add(i)}const t=i=>{var r;if(!LKe(this._editor,this._contextKeyService,this._configurationService)||Wm.shouldAutoTrigger(this._editor))return;if(!i){const a=this._editor.getPosition();i=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let s="";lb(i.charCodeAt(i.length-1))?Pn(i.charCodeAt(i.length-2))&&(s=i.substr(i.length-2)):s=i.charAt(i.length-1);const o=e.get(s);if(o){const a=new Map;if(this._completionModel)for(const[l,c]of this._completionModel.getItemsByProvider())o.has(l)||a.set(l,c);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:!!this._completionModel,clipboardText:(r=this._completionModel)==null?void 0:r.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:a}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)==null||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;ww.isAllOff(this._editor.getOption(90))||this._editor.getOption(119).snippetsPreventQuickSuggestions&&((e=So.get(this._editor))!=null&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!Wm.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),i=this._editor.getPosition(),s=this._editor.getOption(90);if(!ww.isAllOff(s)){if(!ww.isAllOn(s)){t.tokenization.tokenizeIfCheap(i.lineNumber);const o=t.tokenization.getLineTokens(i.lineNumber),r=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(ww.valueFor(s,r)!=="on")return}kKe(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}},this._editor.getOption(91)))}_refilterCompletionItems(){xt(this._editor.hasModel()),xt(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),i=new Wm(e,t,{...this._triggerState,refilter:!0});this._onNewContext(i)}trigger(e){var h,f,g;if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=new Wm(t,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:e.shy??!1,position:this._editor.getPosition()}),this._context=i;let s={triggerKind:e.triggerKind??0};e.triggerCharacter&&(s={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new Pi;const o=this._editor.getOption(113);let r=1;switch(o){case"top":r=0;break;case"bottom":r=2;break}const{itemKind:a,showDeprecated:l}=G9.createSuggestFilter(this._editor),c=new Yk(r,((h=e.completionOptions)==null?void 0:h.kindFilter)??a,(f=e.completionOptions)==null?void 0:f.providerFilter,(g=e.completionOptions)==null?void 0:g.providerItemsToReuse,l),d=gM.create(this._editorWorkerService,this._editor),u=mq(this._languageFeaturesService.completionProvider,t,this._editor.getPosition(),c,s,this._requestToken.token);Promise.all([u,d]).then(async([m,_])=>{var S;if((S=this._requestToken)==null||S.dispose(),!this._editor.hasModel())return;let b=e==null?void 0:e.clipboardText;if(!b&&m.needsClipboard&&(b=await this._clipboardService.readText()),this._triggerState===void 0)return;const v=this._editor.getModel(),w=new Wm(v,this._editor.getPosition(),e),y={...sk.default,firstMatchCanBeWeak:!this._editor.getOption(119).matchOnWordStartOnly};if(this._completionModel=new Pf(m.items,this._context.column,{leadingLineContent:w.leadingLineContent,characterCountDelta:w.column-this._context.column},_,this._editor.getOption(119),this._editor.getOption(113),y,b),this._completionDisposables.add(m.disposable),this._onNewContext(w),this._reportDurationsTelemetry(m.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const x of m.items)x.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${x.provider._debugDisplayName}`,x.completion)}).catch(He)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){const t=new Set;e.getOption(113)==="none"&&t.add(27);const s=e.getOption(119);return s.showMethods||t.add(0),s.showFunctions||t.add(1),s.showConstructors||t.add(2),s.showFields||t.add(3),s.showVariables||t.add(4),s.showClasses||t.add(5),s.showStructs||t.add(6),s.showInterfaces||t.add(7),s.showModules||t.add(8),s.showProperties||t.add(9),s.showEvents||t.add(10),s.showOperators||t.add(11),s.showUnits||t.add(12),s.showValues||t.add(13),s.showConstants||t.add(14),s.showEnums||t.add(15),s.showEnumMembers||t.add(16),s.showKeywords||t.add(17),s.showWords||t.add(18),s.showColors||t.add(19),s.showFiles||t.add(20),s.showReferences||t.add(21),s.showColors||t.add(22),s.showFolders||t.add(23),s.showTypeParameters||t.add(24),s.showSnippets||t.add(27),s.showUsers||t.add(25),s.showIssues||t.add(26),{itemKind:t,showDeprecated:s.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Zt(e.leadingLineContent)!==Zt(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(Wm.shouldAutoTrigger(this._editor)&&this._context){const i=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:i}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,i=new Set;for(const[s,o]of this._completionModel.getItemsByProvider())o.length>0&&o[0].container.incomplete?i.add(s):t.set(s,o);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:i,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const s=Wm.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(s&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:i})}}}}};mM=G9=xKe([of(1,Jo),of(2,qh),of(3,Ps),of(4,ws),of(5,Ae),of(6,nt),of(7,ve),of(8,Fz)],mM);const V2=class V2{constructor(e,t){this._disposables=new Q,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const i=e.getSelections(),s=i.length;let o=!1;for(let a=0;a<s;a++)if(!i[a].isEmpty()){o=!0;break}if(!o){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<s;a++){const l=i[a];if(r.getValueLengthInRange(l)>V2._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(i=>{this._locked=!0})),this._disposables.add(t.onDidCancel(i=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};V2._maxSelectionLength=51200;let Y9=V2;var DKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},v5=function(n,e){return function(t,i){e(t,i,n)}};let Z9=class{constructor(e,t,i,s,o){this._menuId=t,this._menuService=s,this._contextKeyService=o,this._menuDisposables=new Q,this.element=ne(e,ce(".suggest-status-bar"));const r=a=>a instanceof vr?i.createInstance(mU,a,{useComma:!0}):void 0;this._leftActions=new ca(this.element,{actionViewItemProvider:r}),this._rightActions=new ca(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{const i=[],s=[];for(const[o,r]of e.getActions())o==="left"?i.push(...r):s.push(...r);this._leftActions.clear(),this._leftActions.push(i),this._rightActions.clear(),this._rightActions.push(s)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};Z9=DKe([v5(2,ke),v5(3,pa),v5(4,Ae)],Z9);var EKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},NKe=function(n,e){return function(t,i){e(t,i,n)}};function bq(n){return!!n&&!!(n.completion.documentation||n.completion.detail&&n.completion.detail!==n.completion.label)}let Q9=class{constructor(e,t){this._editor=e,this._onDidClose=new j,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new j,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Q,this._renderDisposeable=new Q,this._borderWidth=1,this._size=new jt(330,0),this.domNode=ce(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Mh,{editor:e}),this._body=ce(".body"),this._scrollbar=new WL(this._body,{alwaysConsumeMouseWheel:!0}),ne(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ne(this._body,ce(".header")),this._close=ne(this._header,ce("span"+Re.asCSSSelector(ae.close))),this._close.title=p("details.close","Close"),this._type=ne(this._header,ce("p.type")),this._docs=ne(this._body,ce("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(50),i=t.getMassagedFontFamily(),s=e.get(120)||t.fontSize,o=e.get(121)||t.lineHeight,r=t.fontWeight,a=`${s}px`,l=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/s}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(121)||this._editor.getOption(50).lineHeight,t=this._borderWidth,i=t*2;return{lineHeight:e,borderWidth:t,borderHeight:i,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=p("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var o;this._renderDisposeable.clear();let{detail:i,documentation:s}=e.completion;if(t){let r="";r+=`score: ${e.score[0]}
`,r+=`prefix: ${e.word??"(no prefix)"}
`,r+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,r+=`distance: ${e.distance} (localityBonus-setting)
`,r+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,r+=`commit_chars: ${(o=e.completion.commitCharacters)==null?void 0:o.join("")}
`,s=new Ds().appendCodeblock("empty",r),i=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!bq(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),i){const r=i.length>1e5?`${i.substr(0,1e5)}`:i;this._type.textContent=r,this._type.title=r,hr(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(r))}else os(this._type),this._type.title="",ro(this._type),this.domNode.classList.add("no-type");if(os(this._docs),typeof s=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),os(this._docs);const r=this._markdownRenderer.render(s);this._docs.appendChild(r.element),this._renderDisposeable.add(r),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=r=>{r.preventDefault(),r.stopPropagation()},this._close.onclick=r=>{r.preventDefault(),r.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){const i=new jt(e,t);jt.equals(i,this._size)||(this._size=i,JDe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};Q9=EKe([NKe(1,ke)],Q9);class IKe{constructor(e,t){this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new Q,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new Q$,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let i,s,o=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,s=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(i&&s){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=s.width-a.dimension.width,l=!0),a.north&&(o=s.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:i.top+o,left:i.left+r})}a.done&&(i=void 0,s=void 0,o=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{this._anchorBox&&this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){const i=e.getBoundingClientRect();this._anchorBox=i,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,t)}_placeAtAnchor(e,t,i){const s=Gg(this.getDomNode().ownerDocument.body),o=this.widget.getLayoutInfo(),r=new jt(220,2*o.lineHeight),a=e.top,l=function(){const S=s.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),x=-o.borderWidth+e.left+e.width,k=new jt(S,s.height-e.top-o.borderHeight-o.verticalPadding),D=k.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:x,fit:S-t.width,maxSizeTop:k,maxSizeBottom:D,minSize:r.with(Math.min(S,r.width))}}(),c=function(){const S=e.left-o.borderWidth-o.horizontalPadding,x=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),k=new jt(S,s.height-e.top-o.borderHeight-o.verticalPadding),D=k.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:x,fit:S-t.width,maxSizeTop:k,maxSizeBottom:D,minSize:r.with(Math.min(S,r.width))}}(),d=function(){const S=e.left,x=-o.borderWidth+e.top+e.height,k=new jt(e.width-o.borderHeight,s.height-e.top-e.height-o.verticalPadding);return{top:x,left:S,fit:k.height-t.height,maxSizeBottom:k,maxSizeTop:k,minSize:r.with(k.width)}}(),u=[l,c,d],h=u.find(S=>S.fit>=0)??u.sort((S,x)=>x.fit-S.fit)[0],f=e.top+e.height-o.borderHeight;let g,m=t.height;const _=Math.max(h.maxSizeTop.height,h.maxSizeBottom.height);m>_&&(m=_);let b;i?m<=h.maxSizeTop.height?(g=!0,b=h.maxSizeTop):(g=!1,b=h.maxSizeBottom):m<=h.maxSizeBottom.height?(g=!1,b=h.maxSizeBottom):(g=!0,b=h.maxSizeTop);let{top:v,left:w}=h;!g&&m>e.height&&(v=f-m);const y=this._editor.getDomNode();if(y){const S=y.getBoundingClientRect();v-=S.top,w-=S.left}this._applyTopLeft({left:w,top:v}),this._resizable.enableSashes(!g,h===l,g,h!==l),this._resizable.minSize=h.minSize,this._resizable.maxSize=b,this._resizable.layout(m,Math.min(b.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}var Bd;(function(n){n[n.FILE=0]="FILE",n[n.FOLDER=1]="FOLDER",n[n.ROOT_FOLDER=2]="ROOT_FOLDER"})(Bd||(Bd={}));const TKe=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function zE(n,e,t,i,s){if(Re.isThemeIcon(s))return[`codicon-${s.id}`,"predefined-file-icon"];if(Le.isUri(s))return[];const o=i===Bd.ROOT_FOLDER?["rootfolder-icon"]:i===Bd.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===je.data)r=Qg.parseMetaData(t).get(Qg.META_DATA_LABEL);else{const a=t.path.match(TKe);a?(r=UE(a[2].toLowerCase()),a[1]&&o.push(`${UE(a[1].toLowerCase())}-name-dir-icon`)):r=UE(t.authority.toLowerCase())}if(i===Bd.ROOT_FOLDER)o.push(`${r}-root-name-folder-icon`);else if(i===Bd.FOLDER)o.push(`${r}-name-folder-icon`);else{if(r){if(o.push(`${r}-name-file-icon`),o.push("name-file-icon"),r.length<=255){const l=r.split(".");for(let c=1;c<l.length;c++)o.push(`${l.slice(c).join(".")}-ext-file-icon`)}o.push("ext-file-icon")}const a=PKe(n,e,t);a&&o.push(`${UE(a)}-lang-file-icon`)}}return o}function PKe(n,e,t){if(!t)return null;let i=null;if(t.scheme===je.data){const o=Qg.parseMetaData(t).get(Qg.META_DATA_MIME);o&&(i=e.getLanguageIdByMimeType(o))}else{const s=n.getModel(t);s&&(i=s.getLanguageId())}return i&&i!==_o?i:e.guessLanguageIdByFilepathOrFirstLine(t)}function UE(n){return n.replace(/[\s]/g,"/")}var MKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},w5=function(n,e){return function(t,i){e(t,i,n)}};function cpe(n){return`suggest-aria-id:${n}`}const RKe=mi("suggest-more-info",ae.chevronRight,p("suggestMoreInfoIcon","Icon for more information in the suggest widget."));var pc;const AKe=new(pc=class{extract(e,t){if(e.textLabel.match(pc._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(pc._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){const i=typeof e.completion.documentation=="string"?e.completion.documentation:e.completion.documentation.value,s=pc._regexRelaxed.exec(i);if(s&&(s.index===0||s.index+s[0].length===i.length))return t[0]=s[0],!0}return!1}},pc._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,pc._regexStrict=new RegExp(`^${pc._regexRelaxed.source}$`,"i"),pc);let X9=class{constructor(e,t,i,s){this._editor=e,this._modelService=t,this._languageService=i,this._themeService=s,this._onDidToggleDetails=new j,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new Q,i=e;i.classList.add("show-file-icons");const s=ne(e,ce(".icon")),o=ne(s,ce("span.colorspan")),r=ne(e,ce(".contents")),a=ne(r,ce(".main")),l=ne(a,ce(".icon-label.codicon")),c=ne(a,ce("span.left")),d=ne(a,ce("span.right")),u=new sP(c,{supportHighlights:!0,supportIcons:!0});t.add(u);const h=ne(c,ce("span.signature-label")),f=ne(c,ce("span.qualifier-label")),g=ne(d,ce("span.details-label")),m=ne(d,ce("span.readMore"+Re.asCSSSelector(RKe)));return m.title=p("readMore","Read More"),{root:i,left:c,right:d,icon:s,colorspan:o,iconLabel:u,iconContainer:l,parametersLabel:h,qualifierLabel:f,detailsLabel:g,readMore:m,disposables:t,configureFont:()=>{const b=this._editor.getOptions(),v=b.get(50),w=v.getMassagedFontFamily(),y=v.fontFeatureSettings,S=b.get(120)||v.fontSize,x=b.get(121)||v.lineHeight,k=v.fontWeight,D=v.letterSpacing,N=`${S}px`,R=`${x}px`,O=`${D}px`;i.style.fontSize=N,i.style.fontWeight=k,i.style.letterSpacing=O,a.style.fontFamily=w,a.style.fontFeatureSettings=y,a.style.lineHeight=R,s.style.height=R,s.style.width=R,m.style.height=R,m.style.width=R}}}renderElement(e,t,i){i.configureFont();const{completion:s}=e;i.root.id=cpe(t),i.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:BL(e.score)},r=[];if(s.kind===19&&AKe.extract(e,r))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=r[0];else if(s.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const a=zE(this._modelService,this._languageService,Le.from({scheme:"fake",path:e.textLabel}),Bd.FILE),l=zE(this._modelService,this._languageService,Le.from({scheme:"fake",path:s.detail}),Bd.FILE);o.extraClasses=a.length>l.length?a:l}else s.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",o.extraClasses=[zE(this._modelService,this._languageService,Le.from({scheme:"fake",path:e.textLabel}),Bd.FOLDER),zE(this._modelService,this._languageService,Le.from({scheme:"fake",path:s.detail}),Bd.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...Re.asClassNameArray(Ox.toIcon(s.kind))));s.tags&&s.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,o),typeof s.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=C5(s.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=C5(s.label.detail||""),i.detailsLabel.textContent=C5(s.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(119).showInlineDetails?hr(i.detailsLabel):ro(i.detailsLabel),bq(e)?(i.right.classList.add("can-expand-details"),hr(i.readMore),i.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},i.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),ro(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};X9=MKe([w5(1,gi),w5(2,Di),w5(3,kn)],X9);function C5(n){return n.replace(/\r\n|\r|\n/g,"")}var OKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},$E=function(n,e){return function(t,i){e(t,i,n)}},Bv;T("editorSuggestWidget.background",ia,p("editorSuggestWidgetBackground","Background color of the suggest widget."));T("editorSuggestWidget.border",Vz,p("editorSuggestWidgetBorder","Border color of the suggest widget."));const FKe=T("editorSuggestWidget.foreground",cu,p("editorSuggestWidgetForeground","Foreground color of the suggest widget."));T("editorSuggestWidget.selectedForeground",ek,p("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));T("editorSuggestWidget.selectedIconForeground",Yz,p("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const WKe=T("editorSuggestWidget.selectedBackground",tk,p("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));T("editorSuggestWidget.highlightForeground",sw,p("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));T("editorSuggestWidget.focusHighlightForeground",uMe,p("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));T("editorSuggestWidgetStatus.foreground",et(FKe,.5),p("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class BKe{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Wl}`}restore(){const e=this._service.get(this._key,0)??"";try{const t=JSON.parse(e);if(jt.is(t))return jt.lift(t)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}var Ng;let J9=(Ng=class{constructor(e,t,i,s,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new jn,this._pendingShowDetails=new jn,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Bl,this._disposables=new Q,this._onDidSelect=new rb,this._onDidFocus=new rb,this._onDidHide=new j,this._onDidShow=new j,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new j,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new Q$,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new HKe(this,e),this._persistedSize=new BKe(t,e);class r{constructor(f,g,m=!1,_=!1){this.persistedSize=f,this.currentSize=g,this.persistHeight=m,this.persistWidth=_}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(h=>{var f,g;if(this._resize(h.dimension.width,h.dimension.height),a&&(a.persistHeight=a.persistHeight||!!h.north||!!h.south,a.persistWidth=a.persistWidth||!!h.east||!!h.west),!!h.done){if(a){const{itemHeight:m,defaultSize:_}=this.getLayoutInfo(),b=Math.round(m/2);let{width:v,height:w}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-w)<=b)&&(w=((f=a.persistedSize)==null?void 0:f.height)??_.height),(!a.persistWidth||Math.abs(a.currentSize.width-v)<=b)&&(v=((g=a.persistedSize)==null?void 0:g.width)??_.width),this._persistedSize.store(new jt(v,w))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=ne(this.element.domNode,ce(".message")),this._listElement=ne(this.element.domNode,ce(".tree"));const l=this._disposables.add(o.createInstance(Q9,this.editor));l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new IKe(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(119).showIcons);c();const d=o.createInstance(X9,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new va("SuggestWidget",this._listElement,{getHeight:h=>this.getLayoutInfo().itemHeight,getTemplateId:h=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>p("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:h=>{let f=h.textLabel;if(typeof h.completion.label!="string"){const{detail:b,description:v}=h.completion.label;b&&v?f=p("label.full","{0} {1}, {2}",f,b,v):b?f=p("label.detail","{0} {1}",f,b):v&&(f=p("label.desc","{0}, {1}",f,v))}if(!h.isResolved||!this._isDetailsVisible())return f;const{documentation:g,detail:m}=h.completion,_=ab("{0}{1}",m||"",g?typeof g=="string"?g:g.value:"");return p("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",f,_)}}}),this._list.style(Ub({listInactiveFocusBackground:WKe,listInactiveFocusOutline:vi})),this._status=o.createInstance(Z9,this.element.domNode,bg);const u=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(119).showStatusBar);u(),this._disposables.add(s.onDidColorThemeChange(h=>this._onThemeChange(h))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onTap(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onDidChangeSelection(h=>this._onListSelection(h))),this._disposables.add(this._list.onDidChangeFocus(h=>this._onListFocus(h))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(h=>{h.hasChanged(119)&&(u(),c()),this._completionModel&&(h.hasChanged(50)||h.hasChanged(120)||h.hasChanged(121))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=Je.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=Je.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=Je.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=Je.HasFocusedSuggestion.bindTo(i),this._disposables.add(Fi(this._details.widget.domNode,"keydown",h=>{this._onDetailsKeydown.fire(h)})),this._disposables.add(this.editor.onMouseDown(h=>this._onEditorMouseDown(h)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)==null||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Ec(e.type)?2:1}_onListFocus(e){var s;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const t=e.elements[0],i=e.indexes[0];t!==this._focusedItem&&((s=this._currentSuggestionDetails)==null||s.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=t,this._list.reveal(i),this._currentSuggestionDetails=On(async o=>{const r=Kg(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=o.onCancellationRequested(()=>r.dispose());try{return await t.resolve(o)}finally{r.dispose(),a.dispose()}}),this._currentSuggestionDetails.then(()=>{i>=this._list.length||t!==this._list.element(i)||(this._ignoreFocusEvents=!0,this._list.splice(i,1,[t]),this._list.setFocus([i]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:cpe(i)}))}).catch(He)),this._onDidFocus.fire({item:t,index:i,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:ro(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Bv.LOADING_MESSAGE,ro(this._listElement,this._status.element),hr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Xd(Bv.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Bv.NO_SUGGESTIONS_MESSAGE,ro(this._listElement,this._status.element),hr(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Xd(Bv.NO_SUGGESTIONS_MESSAGE);break;case 3:ro(this._messageElement),hr(this._listElement,this._status.element),this._show();break;case 4:ro(this._messageElement),hr(this._listElement,this._status.element),this._show();break;case 5:ro(this._messageElement),hr(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Kg(()=>this._setState(1),t)))}showSuggestions(e,t,i,s,o){var l,c;if(this._contentWidget.setPosition(this.editor.getPosition()),(l=this._loadingTimeout)==null||l.dispose(),(c=this._currentSuggestionDetails)==null||c.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&this._state!==2&&this._state!==0){this._setState(4);return}const r=this._completionModel.items.length,a=r===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(r>1),a){this._setState(s?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(o?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=tT(Te(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(bq(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=tT(Te(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var i;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(i=this._loadingTimeout)==null||i.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const e=this._persistedSize.restore(),t=Math.ceil(this.getLayoutInfo().itemHeight*4.3);e&&e.height<t&&this._persistedSize.store(e.with(void 0,t))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){var r,a;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const t=Gg(this.element.domNode.ownerDocument.body),i=this.getLayoutInfo();e||(e=i.defaultSize);let s=e.height,o=e.width;if(this._status.element.style.height=`${i.itemHeight}px`,this._state===2||this._state===1)s=i.itemHeight+i.borderHeight,o=i.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new jt(o,s),this._contentWidget.setPreference(2);else{const l=t.width-i.borderHeight-2*i.horizontalPadding;o>l&&(o=l);const c=this._completionModel?this._completionModel.stats.pLabelLen*i.typicalHalfwidthCharacterWidth:o,d=i.statusBarHeight+this._list.contentHeight+i.borderHeight,u=i.itemHeight+i.statusBarHeight,h=Qi(this.editor.getDomNode()),f=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),g=h.top+f.top+f.height,m=Math.min(t.height-g-i.verticalPadding,d),_=h.top+f.top-i.verticalPadding,b=Math.min(_,d);let v=Math.min(Math.max(b,m)+i.borderHeight,d);s===((r=this._cappedHeight)==null?void 0:r.capped)&&(s=this._cappedHeight.wanted),s<u&&(s=u),s>v&&(s=v),s>m||this._forceRenderingAbove&&_>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),v=b):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),v=m),this.element.preferredSize=new jt(c,i.defaultSize.height),this.element.maxSize=new jt(l,v),this.element.minSize=new jt(220,u),this._cappedHeight=s===d?{wanted:((a=this._cappedHeight)==null?void 0:a.wanted)??e.height,capped:s}:void 0}this._resize(o,s)}_resize(e,t){const{width:i,height:s}=this.element.maxSize;e=Math.min(i,e),t=Math.min(s,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())==null?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(50),t=so(this.editor.getOption(121)||e.lineHeight,8,1e3),i=!this.editor.getOption(119).showStatusBar||this._state===2||this._state===1?0:t,s=this._details.widget.borderWidth,o=2*s;return{itemHeight:t,statusBarHeight:i,borderWidth:s,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new jt(430,i+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},Bv=Ng,Ng.LOADING_MESSAGE=p("suggestWidget.loading","Loading..."),Ng.NO_SUGGESTIONS_MESSAGE=p("suggestWidget.noSuggestions","No suggestions."),Ng);J9=Bv=OKe([$E(1,jl),$E(2,Ae),$E(3,kn),$E(4,ke)],J9);class HKe{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:s}=this._widget.getLayoutInfo();return new jt(t+2*i+s,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var jKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Dv=function(n,e){return function(t,i){e(t,i,n)}},e7;class VKe{constructor(e,t){if(this._model=e,this._position=t,this._decorationOptions=ze.register({description:"suggest-line-suffix",stickiness:1}),e.getLineMaxColumn(t.lineNumber)!==t.column){const s=e.getOffsetAt(t),o=e.getPositionAt(s+1);e.changeDecorations(r=>{this._marker&&r.removeDecoration(this._marker),this._marker=r.addDecoration(E.fromPositions(t,o),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}var I_;let kl=(I_=class{static get(e){return e.getContribution(e7.ID)}constructor(e,t,i,s,o,r,a){this._memoryService=t,this._commandService=i,this._contextKeyService=s,this._instantiationService=o,this._logService=r,this._telemetryService=a,this._lineSuffix=new jn,this._toDispose=new Q,this._selectors=new zKe(u=>u.priority),this._onWillInsertSuggestItem=new j,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=o.createInstance(mM,this.editor),this._selectors.register({priority:0,select:(u,h,f)=>this._memoryService.select(u,h,f)});const l=Je.InsertMode.bindTo(s);l.set(e.getOption(119).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(119).insertMode))),this.widget=this._toDispose.add(new WF(Te(e.getDomNode()),()=>{const u=this._instantiationService.createInstance(J9,this.editor);this._toDispose.add(u),this._toDispose.add(u.onDidSelect(_=>this._insertSuggestion(_,0),this));const h=new SKe(this.editor,u,this.model,_=>this._insertSuggestion(_,2));this._toDispose.add(h);const f=Je.MakesTextEdit.bindTo(this._contextKeyService),g=Je.HasInsertAndReplaceRange.bindTo(this._contextKeyService),m=Je.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(xe(()=>{f.reset(),g.reset(),m.reset()})),this._toDispose.add(u.onDidFocus(({item:_})=>{const b=this.editor.getPosition(),v=_.editStart.column,w=b.column;let y=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!_.completion.additionalTextEdits&&!(_.completion.insertTextRules&4)&&w-v===_.completion.insertText.length&&(y=this.editor.getModel().getValueInRange({startLineNumber:b.lineNumber,startColumn:v,endLineNumber:b.lineNumber,endColumn:w})!==_.completion.insertText),f.set(y),g.set(!H.equals(_.editInsertEnd,_.editReplaceEnd)),m.set(!!_.provider.resolveCompletionItem||!!_.completion.documentation||_.completion.detail!==_.completion.label)})),this._toDispose.add(u.onDetailsKeyDown(_=>{if(_.toKeyCodeChord().equals(new Nh(!0,!1,!1,!1,33))||ct&&_.toKeyCodeChord().equals(new Nh(!1,!1,!1,!0,33))){_.stopPropagation();return}_.toKeyCodeChord().isModifierKey()||this.editor.focus()})),u})),this._overtypingCapturer=this._toDispose.add(new WF(Te(e.getDomNode()),()=>this._toDispose.add(new Y9(this.editor,this.model)))),this._alternatives=this._toDispose.add(new WF(Te(e.getDomNode()),()=>this._toDispose.add(new Wy(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(hM,e)),this._toDispose.add(this.model.onDidTrigger(u=>{this.widget.value.showTriggered(u.auto,u.shy?250:50),this._lineSuffix.value=new VKe(this.editor.getModel(),u.position)})),this._toDispose.add(this.model.onDidSuggest(u=>{if(u.triggerOptions.shy)return;let h=-1;for(const g of this._selectors.itemsOrderedByPriorityDesc)if(h=g.select(this.editor.getModel(),this.editor.getPosition(),u.completionModel.items),h!==-1)break;if(h===-1&&(h=0),this.model.state===0)return;let f=!1;if(u.triggerOptions.auto){const g=this.editor.getOption(119);g.selectionMode==="never"||g.selectionMode==="always"?f=g.selectionMode==="never":g.selectionMode==="whenTriggerCharacter"?f=u.triggerOptions.triggerKind!==1:g.selectionMode==="whenQuickSuggestion"&&(f=u.triggerOptions.triggerKind===1&&!u.triggerOptions.refilter)}this.widget.value.showSuggestions(u.completionModel,h,u.isFrozen,u.triggerOptions.auto,f)})),this._toDispose.add(this.model.onDidCancel(u=>{u.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=Je.AcceptSuggestionsOnEnter.bindTo(s),d=()=>{const u=this.editor.getOption(1);c.set(u==="on"||u==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const i=So.get(this.editor);if(!i)return;this._onWillInsertSuggestItem.fire({item:e.item});const s=this.editor.getModel(),o=s.getAlternativeVersionId(),{item:r}=e,a=[],l=new Pi;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(r,!!(t&8));this._memoryService.memorize(s,this.editor.getPosition(),r);const d=r.isResolved;let u=-1,h=-1;if(Array.isArray(r.completion.additionalTextEdits)){this.model.cancel();const g=Vc.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(m=>{let _=E.lift(m.range);if(_.startLineNumber===r.position.lineNumber&&_.startColumn>r.position.column){const b=this.editor.getPosition().column-r.position.column,v=b,w=E.spansMultipleLines(_)?0:b;_=new E(_.startLineNumber,_.startColumn+v,_.endLineNumber,_.endColumn+w)}return Ii.replaceMove(_,m.text)})),g.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!d){const g=new Qn;let m;const _=s.onDidChangeContent(y=>{if(y.isFlush){l.cancel(),_.dispose();return}for(const S of y.changes){const x=E.getEndPosition(S.range);(!m||H.isBefore(x,m))&&(m=x)}}),b=t;t|=2;let v=!1;const w=this.editor.onWillType(()=>{w.dispose(),v=!0,b&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(m&&r.completion.additionalTextEdits.some(S=>H.isBefore(m,E.getStartPosition(S.range))))return!1;v&&this.editor.pushUndoStop();const y=Vc.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(S=>Ii.replaceMove(E.lift(S.range),S.text))),y.restoreRelativeVerticalPositionOfCursor(this.editor),(v||!(b&2))&&this.editor.pushUndoStop(),!0}).then(y=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",g.elapsed(),y),h=y===!0?1:y===!1?0:-2}).finally(()=>{_.dispose(),w.dispose()}))}let{insertText:f}=r.completion;if(r.completion.insertTextRules&4||(f=xb.escape(f)),this.model.cancel(),i.insert(f,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command)if(r.completion.command.id===pM.id)this.model.trigger({auto:!0,retrigger:!0});else{const g=new Qn;a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(m=>{r.completion.extensionId?en(m):He(m)}).finally(()=>{u=g.elapsed()}))}t&4&&this._alternatives.value.set(e,g=>{for(l.cancel();s.canUndo();){o!==s.getAlternativeVersionId()&&s.undo(),this._insertSuggestion(g,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,s,d,u,h,e.index,e.model.items),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,i,s,o,r,a){var h;if(Math.floor(Math.random()*100)===0)return;const l=new Map;for(let f=0;f<Math.min(30,a.length);f++){const g=a[f].textLabel;l.has(g)?l.get(g).push(f):l.set(g,[f])}const c=l.get(e.textLabel),u=c&&c.length>1?c[0]:-1;this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:((h=e.extensionId)==null?void 0:h.value)??"unknown",providerId:e.provider._debugDisplayName??"unknown",kind:e.completion.kind,basenameHash:sA(Ya(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:S2e(t.uri),resolveInfo:e.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:s,additionalEditsAsync:o,index:r,firstIndex:u})}getOverwriteInfo(e,t){xt(this.editor.hasModel());let i=this.editor.getOption(119).insertMode==="replace";t&&(i=!i);const s=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:s+r,overwriteAfter:o+a}}_alertCompletionItem(e){if(Ys(e.completion.additionalTextEdits)){const t=p("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);yo(t)}}triggerSuggest(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=o.editStart.column,l=r.column;return l-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==o.completion.insertText};ue.once(this.model.onDidTrigger)(o=>{const r=[];ue.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{Qt(r),i()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if(Qt(r),a.items.length===0){i();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!s(c)){i();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(i,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}},e7=I_,I_.ID="editor.contrib.suggestController",I_);kl=e7=jKe([Dv(1,EO),Dv(2,oi),Dv(3,Ae),Dv(4,ke),Dv(5,ws),Dv(6,Ps)],kl);class zKe{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,i)=>this.prioritySelector(i)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}const z2=class z2 extends _e{constructor(){super({id:z2.id,label:p("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:X.and(I.writable,I.hasCompletionItemProvider,Je.Visible.toNegated()),kbOpts:{kbExpr:I.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){const s=kl.get(t);if(!s)return;let o;i&&typeof i=="object"&&i.auto===!0&&(o=!0),s.triggerSuggest(void 0,o,void 0)}};z2.id="editor.action.triggerSuggest";let pM=z2;wt(kl.ID,kl,2);se(pM);const ma=190,Do=xn.bindToContribution(kl.get);fe(new Do({id:"acceptSelectedSuggestion",precondition:X.and(Je.Visible,Je.HasFocusedSuggestion),handler(n){n.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:X.and(Je.Visible,I.textInputFocus),weight:ma},{primary:3,kbExpr:X.and(Je.Visible,I.textInputFocus,Je.AcceptSuggestionsOnEnter,Je.MakesTextEdit),weight:ma}],menuOpts:[{menuId:bg,title:p("accept.insert","Insert"),group:"left",order:1,when:Je.HasInsertAndReplaceRange.toNegated()},{menuId:bg,title:p("accept.insert","Insert"),group:"left",order:1,when:X.and(Je.HasInsertAndReplaceRange,Je.InsertMode.isEqualTo("insert"))},{menuId:bg,title:p("accept.replace","Replace"),group:"left",order:1,when:X.and(Je.HasInsertAndReplaceRange,Je.InsertMode.isEqualTo("replace"))}]}));fe(new Do({id:"acceptAlternativeSelectedSuggestion",precondition:X.and(Je.Visible,I.textInputFocus,Je.HasFocusedSuggestion),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:1027,secondary:[1026]},handler(n){n.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:bg,group:"left",order:2,when:X.and(Je.HasInsertAndReplaceRange,Je.InsertMode.isEqualTo("insert")),title:p("accept.replace","Replace")},{menuId:bg,group:"left",order:2,when:X.and(Je.HasInsertAndReplaceRange,Je.InsertMode.isEqualTo("replace")),title:p("accept.insert","Insert")}]}));bt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");fe(new Do({id:"hideSuggestWidget",precondition:Je.Visible,handler:n=>n.cancelSuggestWidget(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}}));fe(new Do({id:"selectNextSuggestion",precondition:X.and(Je.Visible,X.or(Je.MultipleSuggestions,Je.HasFocusedSuggestion.negate())),handler:n=>n.selectNextSuggestion(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));fe(new Do({id:"selectNextPageSuggestion",precondition:X.and(Je.Visible,X.or(Je.MultipleSuggestions,Je.HasFocusedSuggestion.negate())),handler:n=>n.selectNextPageSuggestion(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:12,secondary:[2060]}}));fe(new Do({id:"selectLastSuggestion",precondition:X.and(Je.Visible,X.or(Je.MultipleSuggestions,Je.HasFocusedSuggestion.negate())),handler:n=>n.selectLastSuggestion()}));fe(new Do({id:"selectPrevSuggestion",precondition:X.and(Je.Visible,X.or(Je.MultipleSuggestions,Je.HasFocusedSuggestion.negate())),handler:n=>n.selectPrevSuggestion(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));fe(new Do({id:"selectPrevPageSuggestion",precondition:X.and(Je.Visible,X.or(Je.MultipleSuggestions,Je.HasFocusedSuggestion.negate())),handler:n=>n.selectPrevPageSuggestion(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:11,secondary:[2059]}}));fe(new Do({id:"selectFirstSuggestion",precondition:X.and(Je.Visible,X.or(Je.MultipleSuggestions,Je.HasFocusedSuggestion.negate())),handler:n=>n.selectFirstSuggestion()}));fe(new Do({id:"focusSuggestion",precondition:X.and(Je.Visible,Je.HasFocusedSuggestion.negate()),handler:n=>n.focusSuggestion(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));fe(new Do({id:"focusAndAcceptSuggestion",precondition:X.and(Je.Visible,Je.HasFocusedSuggestion.negate()),handler:n=>{n.focusSuggestion(),n.acceptSelectedSuggestion(!0,!1)}}));fe(new Do({id:"toggleSuggestionDetails",precondition:X.and(Je.Visible,Je.HasFocusedSuggestion),handler:n=>n.toggleSuggestionDetails(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:bg,group:"right",order:1,when:X.and(Je.DetailsVisible,Je.CanResolve),title:p("detail.more","Show Less")},{menuId:bg,group:"right",order:1,when:X.and(Je.DetailsVisible.toNegated(),Je.CanResolve),title:p("detail.less","Show More")}]}));fe(new Do({id:"toggleExplainMode",precondition:Je.Visible,handler:n=>n.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));fe(new Do({id:"toggleSuggestionFocus",precondition:Je.Visible,handler:n=>n.toggleSuggestionFocus(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:2570,mac:{primary:778}}}));fe(new Do({id:"insertBestCompletion",precondition:X.and(I.textInputFocus,X.equals("config.editor.tabCompletion","on"),hM.AtEnd,Je.Visible.toNegated(),Wy.OtherSuggestions.toNegated(),So.InSnippetMode.toNegated()),handler:(n,e)=>{n.triggerSuggestAndAcceptBest(Gn(e)?{fallback:"tab",...e}:{fallback:"tab"})},kbOpts:{weight:ma,primary:2}}));fe(new Do({id:"insertNextSuggestion",precondition:X.and(I.textInputFocus,X.equals("config.editor.tabCompletion","on"),Wy.OtherSuggestions,Je.Visible.toNegated(),So.InSnippetMode.toNegated()),handler:n=>n.acceptNextSuggestion(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:2}}));fe(new Do({id:"insertPrevSuggestion",precondition:X.and(I.textInputFocus,X.equals("config.editor.tabCompletion","on"),Wy.OtherSuggestions,Je.Visible.toNegated(),So.InSnippetMode.toNegated()),handler:n=>n.acceptPrevSuggestion(),kbOpts:{weight:ma,kbExpr:I.textInputFocus,primary:1026}}));se(class extends _e{constructor(){super({id:"editor.action.resetSuggestSize",label:p("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(n,e){var t;(t=kl.get(e))==null||t.resetWidgetSize()}});class UKe extends U{get selectedItem(){return this._currentSuggestItemInfo}constructor(e,t,i){super(),this.editor=e,this.suggestControllerPreselector=t,this.onWillAccept=i,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._onDidSelectedItemChange=this._register(new j),this.onDidSelectedItemChange=this._onDidSelectedItemChange.event,this._register(e.onKeyDown(o=>{o.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(o=>{o.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const s=kl.get(this.editor);if(s){this._register(s.registerSelector({priority:100,select:(a,l,c)=>{const d=this.editor.getModel();if(!d)return-1;const u=this.suggestControllerPreselector(),h=u?Xp(u,d):void 0;if(!h)return-1;const f=H.lift(l),g=c.map((_,b)=>{const v=AS.fromSuggestion(s,d,f,_,this.isShiftKeyPressed),w=Xp(v.toSingleTextEdit(),d),y=lpe(h,w);return{index:b,valid:y,prefixLength:w.text.length,suggestItem:_}}).filter(_=>_&&_.valid&&_.prefixLength>0),m=Pz(g,mo(_=>_.prefixLength,Dl));return m?m.index:-1}}));let o=!1;const r=()=>{o||(o=!0,this._register(s.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(s.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(s.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(ue.once(s.model.onDidTrigger)(a=>{r()})),this._register(s.onWillInsertSuggestItem(a=>{const l=this.editor.getPosition(),c=this.editor.getModel();if(!l||!c)return;const d=AS.fromSuggestion(s,c,l,a.item,this.isShiftKeyPressed);this.onWillAccept(d)}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();(this._isActive!==e||!$Ke(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,this._onDidSelectedItemChange.fire())}getSuggestItemInfo(){const e=kl.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),s=this.editor.getModel();if(!(!t||!i||!s))return AS.fromSuggestion(e,s,i,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=kl.get(this.editor);e==null||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=kl.get(this.editor);e==null||e.forceRenderingAbove()}}class AS{static fromSuggestion(e,t,i,s,o){let{insertText:r}=s.completion,a=!1;if(s.completion.insertTextRules&4){const c=new xb().parse(r);c.children.length<100&&uM.adjustWhitespace(t,i,!0,c),r=c.toString(),a=!0}const l=e.getOverwriteInfo(s,o);return new AS(E.fromPositions(i.delta(0,-l.overwriteBefore),i.delta(0,Math.max(l.overwriteAfter,0))),r,s.completion.kind,a)}constructor(e,t,i,s){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=s}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new nce(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new Yd(this.range,this.insertText)}}function $Ke(n,e){return n===e?!0:!n||!e?!1:n.equals(e)}var qKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Su=function(n,e){return function(t,i){e(t,i,n)}},t7,T_;let Qa=(T_=class extends U{static get(e){return e.getContribution(t7.ID)}constructor(e,t,i,s,o,r,a,l,c,d){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._configurationService=s,this._commandService=o,this._debounceService=r,this._languageFeaturesService=a,this._accessibilitySignalService=l,this._keybindingService=c,this._accessibilityService=d,this._editorObs=gr(this.editor),this._positions=ye(this,h=>{var f;return((f=this._editorObs.selections.read(h))==null?void 0:f.map(g=>g.getEndPosition()))??[new H(1,1)]}),this._suggestWidgetAdaptor=this._register(new UKe(this.editor,()=>{var h,f;return this._editorObs.forceUpdate(),(f=(h=this.model.get())==null?void 0:h.selectedInlineCompletion.get())==null?void 0:f.toSingleTextEdit(void 0)},h=>this._editorObs.forceUpdate(f=>{var g;(g=this.model.get())==null||g.handleSuggestAccepted(h)}))),this._suggestWidgetSelectedItem=Ht(this,h=>this._suggestWidgetAdaptor.onDidSelectedItemChange(()=>{this._editorObs.forceUpdate(f=>h(void 0))}),()=>this._suggestWidgetAdaptor.selectedItem),this._enabledInConfig=Ht(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._isScreenReaderEnabled=Ht(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this._editorDictationInProgress=Ht(this,this._contextKeyService.onDidChangeContext,()=>this._contextKeyService.getContext(this.editor.getDomNode()).getValue("editorDictation.inProgress")===!0),this._enabled=ye(this,h=>this._enabledInConfig.read(h)&&(!this._isScreenReaderEnabled.read(h)||!this._editorDictationInProgress.read(h))),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this.model=Us(this,h=>{if(this._editorObs.isReadonly.read(h))return;const f=this._editorObs.model.read(h);return f?this._instantiationService.createInstance($9,f,this._suggestWidgetSelectedItem,this._editorObs.versionId,this._positions,this._debounceValue,Ht(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).preview),Ht(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).previewMode),Ht(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).mode),this._enabled):void 0}).recomputeInitiallyAndOnChange(this._store),this._ghostTexts=ye(this,h=>{const f=this.model.read(h);return(f==null?void 0:f.ghostTexts.read(h))??[]}),this._stablizedGhostTexts=KKe(this._ghostTexts,this._store),this._ghostTextWidgets=_Ae(this,this._stablizedGhostTexts,(h,f)=>f.add(this._instantiationService.createInstance(z9,this.editor,{ghostText:h,minReservedLineCount:Wa(0),targetTextModel:this.model.map(g=>g==null?void 0:g.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._playAccessibilitySignal=d1(this),this._fontFamily=Ht(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._register(new yr(this._contextKeyService,this.model)),this._register(N8(this._editorObs.onDidType,(h,f)=>{var g;this._enabled.get()&&((g=this.model.get())==null||g.trigger())})),this._register(this._commandService.onDidExecuteCommand(h=>{new Set([mC.Tab.id,mC.DeleteLeft.id,mC.DeleteRight.id,_me,"acceptSelectedSuggestion"]).has(h.commandId)&&e.hasTextFocus()&&this._enabled.get()&&this._editorObs.forceUpdate(g=>{var m;(m=this.model.get())==null||m.trigger(g)})})),this._register(N8(this._editorObs.selections,(h,f)=>{var g;f.some(m=>m.reason===3||m.source==="api")&&((g=this.model.get())==null||g.stop())})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||Py.dropDownVisible||Ti(h=>{var f;(f=this.model.get())==null||f.stop(h)})})),this._register(Be(h=>{var g;const f=(g=this.model.read(h))==null?void 0:g.state.read(h);f!=null&&f.suggestItem?f.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register(xe(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}));const u=qL(this,(h,f)=>{var _;const g=this.model.read(h),m=g==null?void 0:g.state.read(h);return this._suggestWidgetSelectedItem.get()?f:(_=m==null?void 0:m.inlineCompletion)==null?void 0:_.semanticId});this._register(V8e(ye(h=>(this._playAccessibilitySignal.read(h),u.read(h),{})),async(h,f,g)=>{const m=this.model.get(),_=m==null?void 0:m.state.get();if(!_||!m)return;const b=m.textModel.getLineContent(_.primaryGhostText.lineNumber);await Ih(50,lW(g)),await Mue(this._suggestWidgetSelectedItem,Ks,()=>!1,lW(g)),await this._accessibilitySignalService.playSignal(Kr.inlineSuggestion),this.editor.getOption(8)&&this._provideScreenReaderUpdate(_.primaryGhostText.renderForScreenReader(b))})),this._register(new l9(this.editor,this.model,this._instantiationService)),this._register(Fqe(ye(h=>{const f=this._fontFamily.read(h);return f===""||f==="default"?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${f};
}`}))),this._register(this._configurationService.onDidChangeConfiguration(h=>{h.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}_provideScreenReaderUpdate(e){const t=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let s;!t&&i&&this.editor.getOption(150)&&(s=p("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),yo(s?e+", "+s:e)}shouldShowHoverAt(e){var i;const t=(i=this.model.get())==null?void 0:i.primaryGhostText.get();return t?t.parts.some(s=>e.containsPosition(new H(t.lineNumber,s.column))):!1}shouldShowHoverAtViewZone(e){var t;return((t=this._ghostTextWidgets.get()[0])==null?void 0:t.ownsViewZone(e))??!1}},t7=T_,T_.ID="editor.contrib.inlineCompletionsController",T_);Qa=t7=qKe([Su(1,ke),Su(2,Ae),Su(3,nt),Su(4,oi),Su(5,_a),Su(6,ve),Su(7,vm),Su(8,Ft),Su(9,Nr)],Qa);function KKe(n,e){const t=it("result",[]),i=[];return e.add(Be(s=>{const o=n.read(s);Ti(r=>{if(o.length!==i.length){i.length=o.length;for(let a=0;a<i.length;a++)i[a]||(i[a]=it("item",o[a]));t.set([...i],r)}i.forEach((a,l)=>a.set(o[l],r))})})),t}const U2=class U2 extends _e{constructor(){super({id:U2.ID,label:p("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:X.and(I.writable,yr.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){var s;const i=Qa.get(t);(s=i==null?void 0:i.model.get())==null||s.next()}};U2.ID=vme;let i7=U2;const $2=class $2 extends _e{constructor(){super({id:$2.ID,label:p("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:X.and(I.writable,yr.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){var s;const i=Qa.get(t);(s=i==null?void 0:i.model.get())==null||s.previous()}};$2.ID=bme;let n7=$2;class GKe extends _e{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:p("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:I.writable})}async run(e,t){const i=Qa.get(t);await Iue(async s=>{var o;await((o=i==null?void 0:i.model.get())==null?void 0:o.triggerExplicitly(s)),i==null||i.playAccessibilitySignal(s)})}}class YKe extends _e{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:p("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:X.and(I.writable,yr.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:X.and(I.writable,yr.inlineSuggestionVisible)},menuOpts:[{menuId:we.InlineSuggestionToolbar,title:p("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){var s;const i=Qa.get(t);await((s=i==null?void 0:i.model.get())==null?void 0:s.acceptNextWord(i.editor))}}class ZKe extends _e{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:p("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:X.and(I.writable,yr.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:we.InlineSuggestionToolbar,title:p("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){var s;const i=Qa.get(t);await((s=i==null?void 0:i.model.get())==null?void 0:s.acceptNextLine(i.editor))}}class QKe extends _e{constructor(){super({id:_me,label:p("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:yr.inlineSuggestionVisible,menuOpts:[{menuId:we.InlineSuggestionToolbar,title:p("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:X.and(yr.inlineSuggestionVisible,I.tabMovesFocus.toNegated(),yr.inlineSuggestionHasIndentationLessThanTabSize,Je.Visible.toNegated(),I.hoverFocused.toNegated())}})}async run(e,t){var s;const i=Qa.get(t);i&&((s=i.model.get())==null||s.accept(i.editor),i.editor.focus())}}const q2=class q2 extends _e{constructor(){super({id:q2.ID,label:p("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:yr.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=Qa.get(t);Ti(s=>{var o;(o=i==null?void 0:i.model.get())==null||o.stop(s)})}};q2.ID="editor.action.inlineSuggest.hide";let s7=q2;const K2=class K2 extends xo{constructor(){super({id:K2.ID,title:p("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:we.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:X.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(e,t){const i=e.get(nt),o=i.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";i.updateValue("editor.inlineSuggest.showToolbar",o)}};K2.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";let o7=K2;var XKe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},d0=function(n,e){return function(t,i){e(t,i,n)}};class JKe{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let r7=class{constructor(e,t,i,s,o,r){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=s,this._instantiationService=o,this._telemetryService=r,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Qa.get(this._editor);if(!t)return null;const i=e.target;if(i.type===8){const s=i.detail;if(t.shouldShowHoverAtViewZone(s.viewZoneId))return new YN(1e3,this,E.fromPositions(this._editor.getModel().validatePosition(s.positionBefore||s.position)),e.event.posx,e.event.posy,!1)}return i.type===7&&t.shouldShowHoverAt(i.range)?new YN(1e3,this,i.range,e.event.posx,e.event.posy,!1):i.type===6&&i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range)?new YN(1e3,this,i.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(62).showToolbar!=="onHover")return[];const i=Qa.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new JKe(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new Q,s=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&i.add(this.renderScreenReaderText(e,s));const o=s.controller.model.get(),r=this._instantiationService.createInstance(Py,this._editor,!1,Wa(null),o.selectedInlineCompletionIndex,o.inlineCompletionsCount,o.activeCommands),a=r.getDomNode();e.fragment.appendChild(a),o.triggerExplicitly(),i.add(r);const l={hoverPart:s,hoverElement:a,dispose(){i.dispose()}};return new Eb([l])}renderScreenReaderText(e,t){const i=new Q,s=ce,o=s("div.hover-row.markdown-hover"),r=ne(o,s("div.hover-contents",{"aria-live":"assertive"})),a=i.add(new Mh({editor:this._editor},this._languageService,this._openerService)),l=c=>{i.add(a.onDidRenderAsync(()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()}));const d=p("inlineSuggestionFollows","Suggestion:"),u=i.add(a.render(new Ds().appendText(d).appendCodeblock("text",c)));r.replaceChildren(u.element)};return i.add(Be(c=>{var u;const d=(u=t.controller.model.read(c))==null?void 0:u.primaryGhostText.read(c);if(d){const h=this._editor.getModel().getLineContent(d.lineNumber);l(d.renderForScreenReader(h))}else rs(r)})),e.fragment.appendChild(o),i}};r7=XKe([d0(1,Di),d0(2,Xo),d0(3,Nr),d0(4,ke),d0(5,Ps)],r7);class eGe{}const NO=new class{constructor(){this._implementations=[]}register(e){return this._implementations.push(e),{dispose:()=>{const t=this._implementations.indexOf(e);t!==-1&&this._implementations.splice(t,1)}}}getImplementations(){return this._implementations}};wt(Qa.ID,Qa,3);se(GKe);se(i7);se(n7);se(YKe);se(ZKe);se(QKe);se(s7);ni(o7);Xb.register(r7);NO.register(new eGe);var tGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},y5=function(n,e){return function(t,i){e(t,i,n)}},F0,Ig;let Zk=(Ig=class{constructor(e,t,i,s){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=s,this.toUnhook=new Q,this.toUnhookForKeyboard=new Q,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const o=new CO(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,a??void 0)})),this.toUnhook.add(o.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).catch(a=>{He(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(o.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(F0.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const i=e.target.position;this.startFindDefinition(i)}async startFindDefinition(e){var r;this.toUnhookForKeyboard.clear();const t=e?(r=this.editor.getModel())==null?void 0:r.getWordAtPosition(e):null;if(!t){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===t.startColumn&&this.currentWordAtPosition.endColumn===t.endColumn&&this.currentWordAtPosition.word===t.word)return;this.currentWordAtPosition=t;const i=new nge(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=On(a=>this.findDefinition(e,a));let s;try{s=await this.previousPromise}catch(a){He(a);return}if(!s||!s.length||!i.validate(this.editor)){this.removeLinkDecorations();return}const o=s[0].originSelectionRange?E.lift(s[0].originSelectionRange):new E(e.lineNumber,t.startColumn,e.lineNumber,t.endColumn);if(s.length>1){let a=o;for(const{originSelectionRange:l}of s)l&&(a=E.plusRange(a,l));this.addDecoration(a,new Ds().appendText(p("multipleResults","Click to show {0} definitions.",s.length)))}else{const a=s[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(l=>{if(!l.object||!l.object.textEditorModel){l.dispose();return}const{object:{textEditorModel:c}}=l,{startLineNumber:d}=a.range;if(d<1||d>c.getLineCount()){l.dispose();return}const u=this.getPreviewValue(c,d,a),h=this.languageService.guessLanguageIdByFilepathOrFirstLine(c.uri);this.addDecoration(o,u?new Ds().appendCodeblock(h||"",u):void 0),l.dispose()})}}getPreviewValue(e,t,i){let s=i.range;return s.endLineNumber-s.startLineNumber>=F0.MAX_SOURCE_PREVIEW_LINES&&(s=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,s)}stripIndentationFromPreviewRange(e,t,i){let o=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<i.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);o=Math.min(o,l)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const i=e.getLineFirstNonWhitespaceColumn(t),s=Math.min(e.getLineCount(),t+F0.MAX_SOURCE_PREVIEW_LINES);let o=t+1;for(;o<s;o++){const r=e.getLineFirstNonWhitespaceColumn(o);if(i===r)break}return new E(t,1,o+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var i;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((i=e.target.detail.injectedText)==null?void 0:i.options)instanceof em)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?cD(this.languageFeaturesService.definitionProvider,i,e,!1,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(i=>{const s=!t&&this.editor.getOption(89)&&!this.isInPeekEditor(i);return new uD({openToSide:t,openInPeek:s,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(i)})}isInPeekEditor(e){const t=e.get(Ae);return Go.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}},F0=Ig,Ig.ID="editor.contrib.gotodefinitionatposition",Ig.MAX_SOURCE_PREVIEW_LINES=8,Ig);Zk=F0=tGe([y5(1,Zo),y5(2,Di),y5(3,ve)],Zk);wt(Zk.ID,Zk,2);var dpe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},_M=function(n,e){return function(t,i){e(t,i,n)}};class Mie{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let a7=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new j,this.onDidChange=this._onDidChange.event,this._dispoables=new Q,this._markers=[],this._nextIdx=-1,Le.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const s=this._configService.getValue("problems.sortOrder"),o=(a,l)=>{let c=Bx(a.resource.toString(),l.resource.toString());return c===0&&(s==="position"?c=E.compareRangesUsingStarts(a,l)||Vi.compare(a.severity,l.severity):c=Vi.compare(a.severity,l.severity)||E.compareRangesUsingStarts(a,l)),c},r=()=>{this._markers=this._markerService.read({resource:Le.isUri(e)?e:void 0,severities:Vi.Error|Vi.Warning|Vi.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(o)};r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new Mie(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let s=!1,o=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());o<0&&(o=Ix(this._markers,{resource:e.uri},(r,a)=>Bx(r.resource.toString(),a.resource.toString())),o<0&&(o=~o));for(let r=o;r<this._markers.length;r++){let a=E.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new E(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,s=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}s||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(this._markers.length===0)return!1;const s=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),s!==this._nextIdx}find(e,t){let i=this._markers.findIndex(s=>s.resource.toString()===e.toString());if(!(i<0)){for(;i<this._markers.length;i++)if(E.containsPosition(this._markers[i],t))return new Mie(this._markers[i],i+1,this._markers.length)}}};a7=dpe([_M(1,uu),_M(2,nt)],a7);const upe=dt("IMarkerNavigationService");let l7=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new co}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new a7(e,this._markerService,this._configService)}};l7=dpe([_M(0,uu),_M(1,nt)],l7);mt(upe,l7,1);var c7;(function(n){function e(t){switch(t){case on.Ignore:return"severity-ignore "+Re.asClassName(ae.info);case on.Info:return Re.asClassName(ae.info);case on.Warning:return Re.asClassName(ae.warning);case on.Error:return Re.asClassName(ae.error);default:return""}}n.className=e})(c7||(c7={}));var iGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ev=function(n,e){return function(t,i){e(t,i,n)}},d7;class nGe{constructor(e,t,i,s,o){this._openerService=s,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Q,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(Fi(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&i(l)})),this._scrollable=new iue(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Qt(this._disposables)}update(e){const{source:t,message:i,relatedInformation:s,code:o}=e;let r=((t==null?void 0:t.length)||0)+2;o&&(typeof o=="string"?r+=o.length:r+=o.value.length);const a=ru(i);this._lines=a.length,this._longestLineLength=0;for(const h of a)this._longestLineLength=Math.max(h.length+r,this._longestLineLength);os(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const h of a)l=document.createElement("div"),l.innerText=h,h===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||o){const h=document.createElement("span");if(h.classList.add("details"),l.appendChild(h),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),h.appendChild(f)}if(o)if(typeof o=="string"){const f=document.createElement("span");f.innerText=`(${o})`,f.classList.add("code"),h.appendChild(f)}else{this._codeLink=ce("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=g=>{this._openerService.open(o.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()};const f=ne(this._codeLink,ce("span"));f.innerText=o.value,h.appendChild(this._codeLink)}}if(os(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),Ys(s)){const h=this._relatedBlock.appendChild(document.createElement("div"));h.style.paddingTop=`${Math.floor(this._editor.getOption(67)*.66)}px`,this._lines+=1;for(const f of s){const g=document.createElement("div"),m=document.createElement("a");m.classList.add("filename"),m.innerText=`${this._labelService.getUriBasenameLabel(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,m.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(m,f);const _=document.createElement("span");_.innerText=f.message,g.appendChild(m),g.appendChild(_),this._lines+=1,h.appendChild(g)}}const c=this._editor.getOption(50),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),u=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:u})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Vi.Error:t=p("Error","Error");break;case Vi.Warning:t=p("Warning","Warning");break;case Vi.Info:t=p("Info","Info");break;case Vi.Hint:t=p("Hint","Hint");break}let i=p("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const s=this._editor.getModel();return s&&e.startLineNumber<=s.getLineCount()&&e.startLineNumber>=1&&(i=`${s.getLineContent(e.startLineNumber)}, ${i}`),i}}var P_;let Qk=(P_=class extends GP{constructor(e,t,i,s,o,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=i,this._menuService=s,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new Q,this._onDidSelectRelatedInformation=new j,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Vi.Warning,this._backgroundColor=te.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(aGe);let t=u7,i=sGe;this._severity===Vi.Warning?(t=JN,i=oGe):this._severity===Vi.Info&&(t=h7,i=rGe);const s=e.getColor(t),o=e.getColor(i);this.style({arrowColor:s,frameColor:s,headerBackgroundColor:o,primaryHeadingColor:e.getColor(Nme),secondaryHeadingColor:e.getColor(Ime)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(s=>this.editor.focus()));const t=[],i=this._menuService.getMenuActions(d7.TitleMenu,this._contextKeyService);$A(i,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0})}_fillTitleIcon(e){this._icon=ne(e,ce(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new nGe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const s=E.lift(e),o=this.editor.getPosition(),r=o&&s.containsPosition(o)?o:s.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=i>1?p("problems","{0} of {1} problems",t,i):p("change","{0} of {1} problem",t,i);this.setTitle(Ya(a.uri),l)}this._icon.className=`codicon ${c7.className(Vi.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},d7=P_,P_.TitleMenu=new we("gotoErrorTitleMenu"),P_);Qk=d7=iGe([Ev(1,kn),Ev(2,Xo),Ev(3,pa),Ev(4,ke),Ev(5,Ae),Ev(6,_y)],Qk);const Rie=Zx(DA,QTe),Aie=Zx(Ph,Qx),Oie=Zx(Qd,Xx),u7=T("editorMarkerNavigationError.background",{dark:Rie,light:Rie,hcDark:vt,hcLight:vt},p("editorMarkerNavigationError","Editor marker navigation widget error color.")),sGe=T("editorMarkerNavigationError.headerBackground",{dark:et(u7,.1),light:et(u7,.1),hcDark:null,hcLight:null},p("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),JN=T("editorMarkerNavigationWarning.background",{dark:Aie,light:Aie,hcDark:vt,hcLight:vt},p("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),oGe=T("editorMarkerNavigationWarning.headerBackground",{dark:et(JN,.1),light:et(JN,.1),hcDark:"#0C141F",hcLight:et(JN,.2)},p("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),h7=T("editorMarkerNavigationInfo.background",{dark:Oie,light:Oie,hcDark:vt,hcLight:vt},p("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),rGe=T("editorMarkerNavigationInfo.headerBackground",{dark:et(h7,.1),light:et(h7,.1),hcDark:null,hcLight:null},p("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),aGe=T("editorMarkerNavigation.background",Ol,p("editorMarkerNavigationBackground","Editor marker navigation widget background."));var lGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qE=function(n,e){return function(t,i){e(t,i,n)}},W0,M_;let Tb=(M_=class{static get(e){return e.getContribution(W0.ID)}constructor(e,t,i,s,o){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=s,this._instantiationService=o,this._sessionDispoables=new Q,this._editor=e,this._widgetVisible=hpe.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Qk,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(i=>{var s,o,r;(!((s=this._model)!=null&&s.selected)||!E.containsPosition((o=this._model)==null?void 0:o.selected.marker,i.position))&&((r=this._model)==null||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const i=this._model.find(this._editor.getModel().uri,this._widget.position);i?this._widget.updateMarker(i.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(i=>{this._editorService.openCodeEditor({resource:i.resource,options:{pinned:!0,revealIfOpened:!0,selection:E.lift(i).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new H(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){var i,s;if(this._editor.hasModel()){const o=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(o.move(e,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=await this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);r&&((i=W0.get(r))==null||i.close(),(s=W0.get(r))==null||s.nagivate(e,t))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}}},W0=M_,M_.ID="editor.contrib.markerController",M_);Tb=W0=lGe([qE(1,upe),qE(2,Ae),qE(3,kt),qE(4,ke)],Tb);class IO extends _e{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}async run(e,t){var i;t.hasModel()&&((i=Tb.get(t))==null||i.nagivate(this._next,this._multiFile))}}const bp=class bp extends IO{constructor(){super(!0,!1,{id:bp.ID,label:bp.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:578,weight:100},menuOpts:{menuId:Qk.TitleMenu,title:bp.LABEL,icon:mi("marker-navigation-next",ae.arrowDown,p("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};bp.ID="editor.action.marker.next",bp.LABEL=p("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");let bM=bp;const vp=class vp extends IO{constructor(){super(!1,!1,{id:vp.ID,label:vp.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:1602,weight:100},menuOpts:{menuId:Qk.TitleMenu,title:vp.LABEL,icon:mi("marker-navigation-previous",ae.arrowUp,p("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};vp.ID="editor.action.marker.prev",vp.LABEL=p("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");let f7=vp;class cGe extends IO{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:p("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:66,weight:100},menuOpts:{menuId:we.MenubarGoMenu,title:p({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class dGe extends IO{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:p("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:1090,weight:100},menuOpts:{menuId:we.MenubarGoMenu,title:p({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}wt(Tb.ID,Tb,4);se(bM);se(f7);se(cGe);se(dGe);const hpe=new me("markersNavigationVisible",!1),uGe=xn.bindToContribution(Tb.get);fe(new uGe({id:"closeMarkersNavigation",precondition:hpe,handler:n=>n.close(),kbOpts:{weight:150,kbExpr:I.focus,primary:9,secondary:[1033]}}));var ic;(function(n){n.NoAutoFocus="noAutoFocus",n.FocusIfVisible="focusIfVisible",n.AutoFocusImmediately="autoFocusImmediately"})(ic||(ic={}));class hGe extends _e{constructor(){super({id:pme,label:p({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:Fe("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[ic.NoAutoFocus,ic.FocusIfVisible,ic.AutoFocusImmediately],enumDescriptions:[p("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),p("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),p("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:ic.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;const s=Qs.get(t);if(!s)return;const o=i==null?void 0:i.focus;let r=ic.FocusIfVisible;Object.values(ic).includes(o)?r=o:typeof o=="boolean"&&o&&(r=ic.AutoFocusImmediately);const a=c=>{const d=t.getPosition(),u=new E(d.lineNumber,d.column,d.lineNumber,d.column);s.showContentHover(u,1,1,c)},l=t.getOption(2)===2;s.isHoverVisible?r!==ic.NoAutoFocus?s.focus():a(l):a(l||r===ic.AutoFocusImmediately)}}class fGe extends _e{constructor(){super({id:Nze,label:p({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:Fe("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}})}run(e,t){const i=Qs.get(t);if(!i)return;const s=t.getPosition();if(!s)return;const o=new E(s.lineNumber,s.column,s.lineNumber,s.column),r=Zk.get(t);if(!r)return;r.startFindDefinitionFromCursor(s).then(()=>{i.showContentHover(o,1,1,!0)})}}class gGe extends _e{constructor(){super({id:Ize,label:p({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:16,weight:100},metadata:{description:Fe("scrollUpHoverDescription","Scroll up the editor hover.")}})}run(e,t){const i=Qs.get(t);i&&i.scrollUp()}}class mGe extends _e{constructor(){super({id:Tze,label:p({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:18,weight:100},metadata:{description:Fe("scrollDownHoverDescription","Scroll down the editor hover.")}})}run(e,t){const i=Qs.get(t);i&&i.scrollDown()}}class pGe extends _e{constructor(){super({id:Pze,label:p({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:15,weight:100},metadata:{description:Fe("scrollLeftHoverDescription","Scroll left the editor hover.")}})}run(e,t){const i=Qs.get(t);i&&i.scrollLeft()}}class _Ge extends _e{constructor(){super({id:Mze,label:p({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:17,weight:100},metadata:{description:Fe("scrollRightHoverDescription","Scroll right the editor hover.")}})}run(e,t){const i=Qs.get(t);i&&i.scrollRight()}}class bGe extends _e{constructor(){super({id:Rze,label:p({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:Fe("pageUpHoverDescription","Page up the editor hover.")}})}run(e,t){const i=Qs.get(t);i&&i.pageUp()}}class vGe extends _e{constructor(){super({id:Aze,label:p({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:Fe("pageDownHoverDescription","Page down the editor hover.")}})}run(e,t){const i=Qs.get(t);i&&i.pageDown()}}class wGe extends _e{constructor(){super({id:Oze,label:p({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:Fe("goToTopHoverDescription","Go to the top of the editor hover.")}})}run(e,t){const i=Qs.get(t);i&&i.goToTop()}}class CGe extends _e{constructor(){super({id:Fze,label:p({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:Fe("goToBottomHoverDescription","Go to the bottom of the editor hover.")}})}run(e,t){const i=Qs.get(t);i&&i.goToBottom()}}class yGe extends _e{constructor(){super({id:bO,label:Wze,alias:"Increase Hover Verbosity Level",precondition:I.hoverVisible})}run(e,t,i){const s=Qs.get(t);if(!s)return;const o=(i==null?void 0:i.index)!==void 0?i.index:s.focusedHoverPartIndex();s.updateHoverVerbosityLevel(ur.Increase,o,i==null?void 0:i.focus)}}class SGe extends _e{constructor(){super({id:vO,label:Bze,alias:"Decrease Hover Verbosity Level",precondition:I.hoverVisible})}run(e,t,i){var r;const s=Qs.get(t);if(!s)return;const o=(i==null?void 0:i.index)!==void 0?i.index:s.focusedHoverPartIndex();(r=Qs.get(t))==null||r.updateHoverVerbosityLevel(ur.Decrease,o,i==null?void 0:i.focus)}}var xGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},S5=function(n,e){return function(t,i){e(t,i,n)}};const rl=ce;class kGe{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const Fie={type:1,filter:{include:bi.QuickFix},triggerAction:kr.QuickFixHover};let g7=class{constructor(e,t,i,s){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=s,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const i=this._editor.getModel(),s=e.range.startLineNumber,o=i.getLineMaxColumn(s),r=[];for(const a of t){const l=a.range.startLineNumber===s?a.range.startColumn:1,c=a.range.endLineNumber===s?a.range.endColumn:o,d=this._markerDecorationsService.getMarker(i.uri,a);if(!d)continue;const u=new E(e.range.startLineNumber,l,e.range.startLineNumber,c);r.push(new kGe(this,u,d))}return r}renderHoverParts(e,t){if(!t.length)return new Eb([]);const i=new Q,s=[];t.forEach(r=>{const a=this._renderMarkerHover(r);e.fragment.appendChild(a.hoverElement),s.push(a)});const o=t.length===1?t[0]:t.sort((r,a)=>Vi.compare(r.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(e,o,i),new Eb(s)}_renderMarkerHover(e){const t=new Q,i=rl("div.hover-row"),s=ne(i,rl("div.marker.hover-contents")),{source:o,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(s);const c=ne(s,rl("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=r,o||a)if(a&&typeof a!="string"){const u=rl("span");if(o){const m=ne(u,rl("span"));m.innerText=o}const h=ne(u,rl("a.code-link"));h.setAttribute("href",a.target.toString()),t.add(G(h,"click",m=>{this._openerService.open(a.target,{allowCommands:!0}),m.preventDefault(),m.stopPropagation()}));const f=ne(h,rl("span"));f.innerText=a.value;const g=ne(s,u);g.style.opacity="0.6",g.style.paddingLeft="6px"}else{const u=ne(s,rl("span"));u.style.opacity="0.6",u.style.paddingLeft="6px",u.innerText=o&&a?`${o}(${a})`:o||`(${a})`}if(Ys(l))for(const{message:u,resource:h,startLineNumber:f,startColumn:g}of l){const m=ne(s,rl("div"));m.style.marginTop="8px";const _=ne(m,rl("a"));_.innerText=`${Ya(h)}(${f}, ${g}): `,_.style.cursor="pointer",t.add(G(_,"click",v=>{if(v.stopPropagation(),v.preventDefault(),this._openerService){const w={selection:{startLineNumber:f,startColumn:g}};this._openerService.open(h,{fromUserGesture:!0,editorOptions:w}).catch(He)}}));const b=ne(m,rl("span"));b.innerText=u,this._editor.applyFontInfo(b)}return{hoverPart:e,hoverElement:i,dispose:()=>t.dispose()}}renderMarkerStatusbar(e,t,i){if(t.marker.severity===Vi.Error||t.marker.severity===Vi.Warning||t.marker.severity===Vi.Info){const s=Tb.get(this._editor);s&&e.statusBar.addAction({label:p("view problem","View Problem"),commandId:bM.ID,run:()=>{e.hide(),s.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(92)){const s=e.statusBar.append(rl("div"));this.recentMarkerCodeActionsInfo&&(HT.makeKey(this.recentMarkerCodeActionsInfo.marker)===HT.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(s.textContent=p("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?U.None:Kg(()=>s.textContent=p("checkingForQuickFixes","Checking for quick fixes..."),200,i);s.textContent||(s.textContent="");const r=this.getCodeActions(t.marker);i.add(xe(()=>r.cancel())),r.then(a=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),s.textContent=p("noQuickFixes","No quick fixes available");return}s.style.display="none";let l=!1;i.add(xe(()=>{l||a.dispose()})),e.statusBar.addAction({label:p("quick fixes","Quick Fix..."),commandId:K$,run:c=>{l=!0;const d=Iy.get(this._editor),u=Qi(c);e.hide(),d==null||d.showCodeActions(Fie,a,{x:u.left,y:u.top,width:u.width,height:u.height})}})},He)}}getCodeActions(e){return On(t=>pw(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new E(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),Fie,wc.None,t))}};g7=xGe([S5(1,vU),S5(2,Xo),S5(3,ve)],g7);class LGe{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=Rl.Center}computeSync(){var o;const e=r=>({value:r}),t=this._editor.getLineDecorations(this._lineNumber),i=[],s=this._laneOrLine==="lineNo";if(!t)return i;for(const r of t){const a=((o=r.options.glyphMargin)==null?void 0:o.position)??Rl.Center;if(!s&&a!==this._laneOrLine)continue;const l=s?r.options.lineNumberHoverMessage:r.options.glyphMarginHoverMessage;!l||my(l)||i.push(...ZV(l).map(e))}return i}}var DGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Wie=function(n,e){return function(t,i){e(t,i,n)}},m7;const Bie=ce;var R_;let p7=(R_=class extends U{constructor(e,t,i){super(),this._renderDisposeables=this._register(new Q),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new Qz),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Mh({editor:this._editor},t,i)),this._computer=new LGe(this._editor),this._hoverOperation=this._register(new wme(this._editor,this._computer)),this._register(this._hoverOperation.onResult(s=>{this._withResult(s.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(50)&&this._updateFont()})),this._register(Fi(this._hover.containerDomNode,"mouseleave",s=>{this._onMouseLeave(s)})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return m7.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(e){const t=e.target;return t.type===2&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):t.type===3?(this._startShowingAt(t.position.lineNumber,"lineNo"),!0):!1}_startShowingAt(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const s of t){const o=Bie("div.hover-row.markdown-hover"),r=ne(o,Bie("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(s.value));r.appendChild(a.element),i.appendChild(o)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),s=this._editor.getScrollTop(),o=this._editor.getOption(67),r=this._hover.containerDomNode.clientHeight,a=i-s-(r-o)/2,l=t.glyphMarginLeft+t.glyphMarginWidth+(this._computer.lane==="lineNo"?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${l}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!wO(t,e.x,e.y))&&this.hide()}},m7=R_,R_.ID="editor.contrib.modesGlyphHoverWidget",R_);p7=m7=DGe([Wie(1,Di),Wie(2,Xo)],p7);var EGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},NGe=function(n,e){return function(t,i){e(t,i,n)}},HC;let vM=(HC=class extends U{constructor(e,t){super(),this._editor=e,this._instantiationService=t,this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new Q,this._hoverState={mouseDown:!1},this._reactToEditorMouseMoveRunner=this._register(new $t(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._isMouseOnMarginHoverWidget(e)&&this._hideWidgets()}_isMouseOnMarginHoverWidget(e){var i;const t=(i=this._glyphWidget)==null?void 0:i.getDomNode();return t?wO(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._isMouseOnMarginHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,i=this._isMouseOnMarginHoverWidget(e);return t&&i}_onEditorMouseMove(e){if(this.shouldKeepOpenOnEditorMouseMoveOrLeave)return;if(this._mouseMoveEvent=e,this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){!e||this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateGlyphWidget().showsOrWillShow(e)}_onKeyDown(e){this._editor.hasModel()&&(e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||this._hideWidgets())}_hideWidgets(){var e;(e=this._glyphWidget)==null||e.hide()}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(p7,this._editor)),this._glyphWidget}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._glyphWidget)==null||e.dispose()}},HC.ID="editor.contrib.marginHover",HC);vM=EGe([NGe(1,ke)],vM);class IGe{}class TGe{}class PGe{}wt(Qs.ID,Qs,2);wt(vM.ID,vM,2);se(hGe);se(fGe);se(gGe);se(mGe);se(pGe);se(_Ge);se(bGe);se(vGe);se(wGe);se(CGe);se(yGe);se(SGe);Xb.register($k);Xb.register(g7);tl((n,e)=>{const t=n.getColor(zde);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});NO.register(new IGe);NO.register(new TGe);NO.register(new PGe);function rr(n,e){let t=0;for(let i=0;i<n.length;i++)n.charAt(i)==="	"?t+=e:t++;return t}function OS(n,e,t){n=n<0?0:n;let i="";if(!t){const s=Math.floor(n/e);n=n%e;for(let o=0;o<s;o++)i+="	"}for(let s=0;s<n;s++)i+=" ";return i}function fpe(n,e,t,i){if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return[];const s=e.getLanguageConfiguration(n.getLanguageId()).indentRulesSupport;if(!s)return[];const o=new o$(n,s,e);for(i=Math.min(i,n.getLineCount());t<=i&&o.shouldIgnore(t);)t++;if(t>i-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=n.getOptions(),c=(m,_)=>(_=_||1,Za.shiftIndent(m,m.length+_,r,a,l)),d=(m,_)=>(_=_||1,Za.unshiftIndent(m,m.length+_,r,a,l)),u=[],h=n.getLineContent(t);let f=Zt(h),g=f;o.shouldIncrease(t)?(g=c(g),f=c(f)):o.shouldIndentNextLine(t)&&(g=c(g)),t++;for(let m=t;m<=i;m++){if(MGe(n,m))continue;const _=n.getLineContent(m),b=Zt(_),v=g;o.shouldDecrease(m,v)&&(g=d(g),f=d(f)),b!==g&&u.push(Ii.replaceMove(new Ce(m,1,m,b.length+1),wU(g,a,l))),!o.shouldIgnore(m)&&(o.shouldIncrease(m,v)?(f=c(f),g=f):o.shouldIndentNextLine(m,v)?g=c(g):g=f)}return u}function MGe(n,e){return n.tokenization.isCheapToTokenize(e)?n.tokenization.getLineTokens(e).getStandardTokenType(0)===2:!1}var RGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},AGe=function(n,e){return function(t,i){e(t,i,n)}};const G2=class G2 extends _e{constructor(){super({id:G2.ID,label:p("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:I.writable,metadata:{description:Fe("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(e,t){const i=t.getModel();if(!i)return;const s=i.getOptions(),o=t.getSelection();if(!o)return;const r=new HGe(o,s.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}};G2.ID="editor.action.indentationToSpaces";let _7=G2;const Y2=class Y2 extends _e{constructor(){super({id:Y2.ID,label:p("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:I.writable,metadata:{description:Fe("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(e,t){const i=t.getModel();if(!i)return;const s=i.getOptions(),o=t.getSelection();if(!o)return;const r=new jGe(o,s.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}};Y2.ID="editor.action.indentationToTabs";let b7=Y2;class vq extends _e{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const i=e.get(il),s=e.get(gi),o=t.getModel();if(!o)return;const r=s.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),a=o.getOptions(),l=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===r.tabSize&&d===a.tabSize?p("configuredTabSize","Configured Tab Size"):d===r.tabSize?p("defaultTabSize","Default Tab Size"):d===a.tabSize?p("currentTabSize","Current Tab Size"):void 0})),c=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{i.pick(l,{placeHolder:p({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[c]}).then(d=>{if(d&&o&&!o.isDisposed()){const u=parseInt(d.label,10);this.displaySizeOnly?o.updateOptions({tabSize:u}):o.updateOptions({tabSize:u,indentSize:u,insertSpaces:this.insertSpaces})}})},50)}}const Z2=class Z2 extends vq{constructor(){super(!1,!1,{id:Z2.ID,label:p("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:Fe("indentUsingTabsDescription","Use indentation with tabs.")}})}};Z2.ID="editor.action.indentUsingTabs";let v7=Z2;const Q2=class Q2 extends vq{constructor(){super(!0,!1,{id:Q2.ID,label:p("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:Fe("indentUsingSpacesDescription","Use indentation with spaces.")}})}};Q2.ID="editor.action.indentUsingSpaces";let w7=Q2;const X2=class X2 extends vq{constructor(){super(!0,!0,{id:X2.ID,label:p("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:Fe("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}};X2.ID="editor.action.changeTabDisplaySize";let C7=X2;const J2=class J2 extends _e{constructor(){super({id:J2.ID,label:p("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:Fe("detectIndentationDescription","Detect the indentation from content.")}})}run(e,t){const i=e.get(gi),s=t.getModel();if(!s)return;const o=i.getCreationOptions(s.getLanguageId(),s.uri,s.isForSimpleWidget);s.detectIndentation(o.insertSpaces,o.tabSize)}};J2.ID="editor.action.detectIndentation";let y7=J2;class OGe extends _e{constructor(){super({id:"editor.action.reindentlines",label:p("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:I.writable,metadata:{description:Fe("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){const i=e.get(Ri),s=t.getModel();if(!s)return;const o=fpe(s,i,1,s.getLineCount());o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class FGe extends _e{constructor(){super({id:"editor.action.reindentselectedlines",label:p("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:I.writable,metadata:{description:Fe("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){const i=e.get(Ri),s=t.getModel();if(!s)return;const o=t.getSelections();if(o===null)return;const r=[];for(const a of o){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const d=fpe(s,i,l,c);r.push(...d)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class WGe{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const i of e)i.range&&typeof i.text=="string"&&this._edits.push(i)}getEditOperations(e,t){for(const s of this._edits)t.addEditOperation(E.lift(s.range),s.text);let i=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}var jC;let wM=(jC=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new Q,this.callOnModel=new Q,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const i=this.editor.getModel();if(!i||this.rangeContainsOnlyWhitespaceCharacters(i,e)||BGe(i,e)||!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const o=this.editor.getOption(12),{tabSize:r,indentSize:a,insertSpaces:l}=i.getOptions(),c=[],d={shiftIndent:g=>Za.shiftIndent(g,g.length+1,r,a,l),unshiftIndent:g=>Za.unshiftIndent(g,g.length+1,r,a,l)};let u=e.startLineNumber;for(;u<=e.endLineNumber;){if(this.shouldIgnoreLine(i,u)){u++;continue}break}if(u>e.endLineNumber)return;let h=i.getLineContent(u);if(!/\S/.test(h.substring(0,e.startColumn-1))){const g=SS(o,i,i.getLanguageId(),u,d,this._languageConfigurationService);if(g!==null){const m=Zt(h),_=rr(g,r),b=rr(m,r);if(_!==b){const v=OS(_,r,l);c.push({range:new E(u,1,u,m.length+1),text:v}),h=v+h.substring(m.length)}else{const v=Efe(i,u,this._languageConfigurationService);if(v===0||v===8)return}}}const f=u;for(;u<e.endLineNumber;){if(!/\S/.test(i.getLineContent(u+1))){u++;continue}break}if(u!==e.endLineNumber){const m=SS(o,{tokenization:{getLineTokens:_=>i.tokenization.getLineTokens(_),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(_,b)=>i.getLanguageIdAtPosition(_,b)},getLineContent:_=>_===f?h:i.getLineContent(_)},i.getLanguageId(),u+1,d,this._languageConfigurationService);if(m!==null){const _=rr(m,r),b=rr(Zt(i.getLineContent(u+1)),r);if(_!==b){const v=_-b;for(let w=u+1;w<=e.endLineNumber;w++){const y=i.getLineContent(w),S=Zt(y),k=rr(S,r)+v,D=OS(k,r,l);D!==S&&c.push({range:new E(w,1,w,S.length+1),text:D})}}}}if(c.length>0){this.editor.pushUndoStop();const g=new WGe(c,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",g),this.editor.pushUndoStop()}}rangeContainsOnlyWhitespaceCharacters(e,t){const i=o=>o.trim().length===0;let s=!0;if(t.startLineNumber===t.endLineNumber){const r=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);s=i(r)}else for(let o=t.startLineNumber;o<=t.endLineNumber;o++){const r=e.getLineContent(o);if(o===t.startLineNumber){const a=r.substring(t.startColumn-1);s=i(a)}else if(o===t.endLineNumber){const a=r.substring(0,t.endColumn-1);s=i(a)}else s=e.getLineFirstNonWhitespaceColumn(o)===0;if(!s)break}return s}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(i===0)return!0;const s=e.tokenization.getLineTokens(t);if(s.getCount()>0){const o=s.findTokenIndexAtOffset(i);if(o>=0&&s.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}},jC.ID="editor.contrib.autoIndentOnPaste",jC);wM=RGe([AGe(1,Ri)],wM);function BGe(n,e){const t=i=>sRe(n,i)===2;return t(e.getStartPosition())||t(e.getEndPosition())}function gpe(n,e,t,i){if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let s="";for(let r=0;r<t;r++)s+=" ";const o=new RegExp(s,"gi");for(let r=1,a=n.getLineCount();r<=a;r++){let l=n.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=n.getLineMaxColumn(r)),l===1)continue;const c=new E(r,1,r,l),d=n.getValueInRange(c),u=i?d.replace(/\t/ig,s):d.replace(o,"	");e.addEditOperation(c,u)}}class HGe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),gpe(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class jGe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),gpe(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}wt(wM.ID,wM,2);se(_7);se(b7);se(v7);se(w7);se(C7);se(y7);se(OGe);se(FGe);wt(Kk.ID,Kk,1);Xb.register(XP);class VGe{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new Ce(s.endLineNumber,Math.min(this._originalSelection.positionColumn,s.endColumn),s.endLineNumber,Math.min(this._originalSelection.positionColumn,s.endColumn)):new Ce(s.endLineNumber,s.endColumn-this._text.length,s.endLineNumber,s.endColumn)}}var zGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},UGe=function(n,e){return function(t,i){e(t,i,n)}},eI,Tg;let By=(Tg=class{static get(e){return e.getContribution(eI.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var l;(l=this.currentRequest)==null||l.cancel();const i=this.editor.getSelection(),s=this.editor.getModel();if(!s||!i)return;let o=i;if(o.startLineNumber!==o.endLineNumber)return;const r=new nge(this.editor,5),a=s.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=On(c=>this.editorWorkerService.navigateValueSet(a,o,t)),this.currentRequest.then(c=>{var g;if(!c||!c.range||!c.value||!r.validate(this.editor))return;const d=E.lift(c.range);let u=c.range;const h=c.value.length-(o.endColumn-o.startColumn);u={startLineNumber:u.startLineNumber,startColumn:u.startColumn,endLineNumber:u.endLineNumber,endColumn:u.startColumn+c.value.length},h>1&&(o=new Ce(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+h-1));const f=new VGe(d,o,c.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,f),this.editor.pushUndoStop(),this.decorations.set([{range:u,options:eI.DECORATION}]),(g=this.decorationRemover)==null||g.cancel(),this.decorationRemover=Ih(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(He)}).catch(He)):Promise.resolve(void 0)}},eI=Tg,Tg.ID="editor.contrib.inPlaceReplaceController",Tg.DECORATION=ze.register({description:"in-place-replace",className:"valueSetReplacement"}),Tg);By=eI=zGe([UGe(1,Jo)],By);class $Ge extends _e{constructor(){super({id:"editor.action.inPlaceReplace.up",label:p("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:3159,weight:100}})}run(e,t){const i=By.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}class qGe extends _e{constructor(){super({id:"editor.action.inPlaceReplace.down",label:p("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:3161,weight:100}})}run(e,t){const i=By.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}wt(By.ID,By,4);se($Ge);se(qGe);class KGe extends _e{constructor(){super({id:"expandLineSelection",label:p("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:I.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const s=t._getViewModel();s.model.pushStackElement(),s.setCursorStates(i.source,3,es.expandLineSelection(s,s.getCursorStates())),s.revealAllCursors(i.source,!0)}}se(KGe);class GGe{constructor(e,t,i){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=i}getEditOperations(e,t){const i=YGe(e,this._cursors,this._trimInRegexesAndStrings);for(let s=0,o=i.length;s<o;s++){const r=i[s];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function YGe(n,e,t){e.sort((a,l)=>a.lineNumber===l.lineNumber?a.column-l.column:a.lineNumber-l.lineNumber);for(let a=e.length-2;a>=0;a--)e[a].lineNumber===e[a+1].lineNumber&&e.splice(a,1);const i=[];let s=0,o=0;const r=e.length;for(let a=1,l=n.getLineCount();a<=l;a++){const c=n.getLineContent(a),d=c.length+1;let u=0;if(o<r&&e[o].lineNumber===a&&(u=e[o].column,o++,u===d)||c.length===0)continue;const h=Dc(c);let f=0;if(h===-1)f=1;else if(h!==c.length-1)f=h+2;else continue;if(!t){if(!n.tokenization.hasAccurateTokensForLine(a))continue;const g=n.tokenization.getLineTokens(a),m=g.getStandardTokenType(g.findTokenIndexAtOffset(f));if(m===2||m===3)continue}f=Math.max(u,f),i[s++]=Ii.delete(new E(a,f,a,d))}return i}class mpe{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const s=[];for(let r=i.startLineNumber;r<=i.endLineNumber;r++)s.push(e.getLineContent(r));const o=s.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new E(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new E(i.startLineNumber,1,i.startLineNumber,1),o+`
`):t.addEditOperation(new E(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let s=i.startLineNumber,o=i.startColumn,r=i.endLineNumber,a=i.endColumn;this._startLineNumberDelta!==0&&(s=s+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),i=Ce.createWithDirection(s,o,r,a,this._selectionDirection)}return i}}var ZGe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},QGe=function(n,e){return function(t,i){e(t,i,n)}};let S7=class{constructor(e,t,i,s){this._languageConfigurationService=s,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=()=>e.getLanguageId(),s=(u,h)=>e.getLanguageIdAtPosition(u,h),o=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===o){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let r=this._selection;r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));const{tabSize:a,indentSize:l,insertSpaces:c}=e.getOptions(),d=this.buildIndentConverter(a,l,c);if(r.startLineNumber===r.endLineNumber&&e.getLineMaxColumn(r.startLineNumber)===1){const u=r.startLineNumber,h=this._isMovingDown?u+1:u-1;e.getLineMaxColumn(h)===1?t.addEditOperation(new E(1,1,1,1),null):(t.addEditOperation(new E(u,1,u,1),e.getLineContent(h)),t.addEditOperation(new E(h,1,h,e.getLineMaxColumn(h)),null)),r=new Ce(h,1,h,1)}else{let u,h;if(this._isMovingDown){u=r.endLineNumber+1,h=e.getLineContent(u),t.addEditOperation(new E(u-1,e.getLineMaxColumn(u-1),u,e.getLineMaxColumn(u)),null);let f=h;if(this.shouldAutoIndent(e,r)){const g=this.matchEnterRule(e,d,a,u,r.startLineNumber-1);if(g!==null){const _=Zt(e.getLineContent(u)),b=g+rr(_,a);f=OS(b,a,c)+this.trimStart(h)}else{const _={tokenization:{getLineTokens:v=>v===r.startLineNumber?e.tokenization.getLineTokens(u):e.tokenization.getLineTokens(v),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:v=>v===r.startLineNumber?e.getLineContent(u):e.getLineContent(v)},b=SS(this._autoIndent,_,e.getLanguageIdAtPosition(u,1),r.startLineNumber,d,this._languageConfigurationService);if(b!==null){const v=Zt(e.getLineContent(u)),w=rr(b,a),y=rr(v,a);w!==y&&(f=OS(w,a,c)+this.trimStart(h))}}t.addEditOperation(new E(r.startLineNumber,1,r.startLineNumber,1),f+`
`);const m=this.matchEnterRuleMovingDown(e,d,a,r.startLineNumber,u,f);if(m!==null)m!==0&&this.getIndentEditsOfMovingBlock(e,t,r,a,c,m);else{const _={tokenization:{getLineTokens:v=>v===r.startLineNumber?e.tokenization.getLineTokens(u):v>=r.startLineNumber+1&&v<=r.endLineNumber+1?e.tokenization.getLineTokens(v-1):e.tokenization.getLineTokens(v),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:v=>v===r.startLineNumber?f:v>=r.startLineNumber+1&&v<=r.endLineNumber+1?e.getLineContent(v-1):e.getLineContent(v)},b=SS(this._autoIndent,_,e.getLanguageIdAtPosition(u,1),r.startLineNumber+1,d,this._languageConfigurationService);if(b!==null){const v=Zt(e.getLineContent(r.startLineNumber)),w=rr(b,a),y=rr(v,a);if(w!==y){const S=w-y;this.getIndentEditsOfMovingBlock(e,t,r,a,c,S)}}}}else t.addEditOperation(new E(r.startLineNumber,1,r.startLineNumber,1),f+`
`)}else if(u=r.startLineNumber-1,h=e.getLineContent(u),t.addEditOperation(new E(u,1,u+1,1),null),t.addEditOperation(new E(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),`
`+h),this.shouldAutoIndent(e,r)){const f={tokenization:{getLineTokens:m=>m===u?e.tokenization.getLineTokens(r.startLineNumber):e.tokenization.getLineTokens(m),getLanguageId:i,getLanguageIdAtPosition:s},getLineContent:m=>m===u?e.getLineContent(r.startLineNumber):e.getLineContent(m)},g=this.matchEnterRule(e,d,a,r.startLineNumber,r.startLineNumber-2);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,r,a,c,g);else{const m=SS(this._autoIndent,f,e.getLanguageIdAtPosition(r.startLineNumber,1),u,d,this._languageConfigurationService);if(m!==null){const _=Zt(e.getLineContent(r.startLineNumber)),b=rr(m,a),v=rr(_,a);if(b!==v){const w=b-v;this.getIndentEditsOfMovingBlock(e,t,r,a,c,w)}}}}}this._selectionId=t.trackSelection(r)}buildIndentConverter(e,t,i){return{shiftIndent:s=>Za.shiftIndent(s,s.length+1,e,t,i),unshiftIndent:s=>Za.unshiftIndent(s,s.length+1,e,t,i)}}parseEnterResult(e,t,i,s,o){if(o){let r=o.indentation;o.indentAction===mn.None||o.indentAction===mn.Indent?r=o.indentation+o.appendText:o.indentAction===mn.IndentOutdent?r=o.indentation:o.indentAction===mn.Outdent&&(r=t.unshiftIndent(o.indentation)+o.appendText);const a=e.getLineContent(s);if(this.trimStart(a).indexOf(this.trimStart(r))>=0){const l=Zt(e.getLineContent(s));let c=Zt(r);const d=Efe(e,s,this._languageConfigurationService);d!==null&&d&2&&(c=t.unshiftIndent(c));const u=rr(c,i),h=rr(l,i);return u-h}}return null}matchEnterRuleMovingDown(e,t,i,s,o,r){if(Dc(r)>=0){const a=e.getLineMaxColumn(o),l=gC(this._autoIndent,e,new E(o,a,o,a),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,l)}else{let a=s-1;for(;a>=1;){const d=e.getLineContent(a);if(Dc(d)>=0)break;a--}if(a<1||s>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=gC(this._autoIndent,e,new E(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,c)}}matchEnterRule(e,t,i,s,o,r){let a=o;for(;a>=1;){let d;if(a===o&&r!==void 0?d=r:d=e.getLineContent(a),Dc(d)>=0)break;a--}if(a<1||s>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=gC(this._autoIndent,e,new E(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,i,s,c)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1),s=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(i!==s||this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,i,s,o,r){for(let a=i.startLineNumber;a<=i.endLineNumber;a++){const l=e.getLineContent(a),c=Zt(l),u=rr(c,s)+r,h=OS(u,s,o);h!==c&&(t.addEditOperation(new E(a,1,a,c.length+1),h),a===i.endLineNumber&&i.endColumn<=c.length+1&&h===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};S7=ZGe([QGe(3,Ri)],S7);const Ow=class Ow{static getCollator(){return Ow._COLLATOR||(Ow._COLLATOR=new Intl.Collator),Ow._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const i=XGe(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(e===null)return!1;const s=ppe(e,t,i);if(!s)return!1;for(let o=0,r=s.before.length;o<r;o++)if(s.before[o]!==s.after[o])return!0;return!1}};Ow._COLLATOR=null;let Xk=Ow;function ppe(n,e,t){const i=e.startLineNumber;let s=e.endLineNumber;if(e.endColumn===1&&s--,i>=s)return null;const o=[];for(let a=i;a<=s;a++)o.push(n.getLineContent(a));let r=o.slice(0);return r.sort(Xk.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:i,endLineNumber:s,before:o,after:r}}function XGe(n,e,t){const i=ppe(n,e,t);return i?Ii.replace(new E(i.startLineNumber,1,i.endLineNumber,n.getLineMaxColumn(i.endLineNumber)),i.after.join(`
`)):null}class _pe extends _e{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));i.sort((r,a)=>E.compareRangesUsingStarts(r.selection,a.selection));let s=i[0];for(let r=1;r<i.length;r++){const a=i[r];s.selection.endLineNumber===a.selection.startLineNumber&&(s.index<a.index?a.ignore=!0:(s.ignore=!0,s=a))}const o=[];for(const r of i)o.push(new mpe(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class JGe extends _pe{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:p("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class eYe extends _pe{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:p("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"2_line",title:p({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class tYe extends _e{constructor(){super({id:"editor.action.duplicateSelection",label:p("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:I.writable,menuOpts:{menuId:we.MenubarSelectionMenu,group:"2_line",title:p({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const s=[],o=t.getSelections(),r=t.getModel();for(const a of o)if(a.isEmpty())s.push(new mpe(a,!0));else{const l=new Ce(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);s.push(new WBe(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class bpe extends _e{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(Ri),s=[],o=t.getSelections()||[],r=t.getOption(12);for(const a of o)s.push(new S7(a,this.down,r,i));t.pushUndoStop(),t.executeCommands(this.id,s),t.pushUndoStop()}}class iYe extends bpe{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:p("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class nYe extends bpe{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:p("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"2_line",title:p({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class vpe extends _e{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;const i=t.getModel();let s=t.getSelections();s.length===1&&s[0].isEmpty()&&(s=[new Ce(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))]);for(const r of s)if(!Xk.canRun(t.getModel(),r,this.descending))return;const o=[];for(let r=0,a=s.length;r<a;r++)o[r]=new Xk(s[r],this.descending);t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class sYe extends vpe{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:p("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:I.writable})}}class oYe extends vpe{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:p("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:I.writable})}}class rYe extends _e{constructor(){super({id:"editor.action.removeDuplicateLines",label:p("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:I.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;const s=[],o=[];let r=0,a=!0,l=t.getSelections();l.length===1&&l[0].isEmpty()&&(l=[new Ce(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))],a=!1);for(const c of l){const d=new Set,u=[];for(let m=c.startLineNumber;m<=c.endLineNumber;m++){const _=i.getLineContent(m);d.has(_)||(u.push(_),d.add(_))}const h=new Ce(c.startLineNumber,1,c.endLineNumber,i.getLineMaxColumn(c.endLineNumber)),f=c.startLineNumber-r,g=new Ce(f,1,f+u.length-1,u[u.length-1].length);s.push(Ii.replace(h,u.join(`
`))),o.push(g),r+=c.endLineNumber-c.startLineNumber+1-u.length}t.pushUndoStop(),t.executeEdits(this.id,s,a?o:void 0),t.pushUndoStop()}}const eR=class eR extends _e{constructor(){super({id:eR.ID,label:p("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:pn(2089,2102),weight:100}})}run(e,t,i){let s=[];i.reason==="auto-save"&&(s=(t.getSelections()||[]).map(d=>new H(d.positionLineNumber,d.positionColumn)));const o=t.getSelection();if(o===null)return;const r=e.get(nt),a=t.getModel(),l=r.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:a==null?void 0:a.getLanguageId(),resource:a==null?void 0:a.uri}),c=new GGe(o,s,l);t.pushUndoStop(),t.executeCommands(this.id,[c]),t.pushUndoStop()}};eR.ID="editor.action.trimTrailingWhitespace";let x7=eR;class aYe extends _e{constructor(){super({id:"editor.action.deleteLines",label:p("lines.delete","Delete Line"),alias:"Delete Line",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),s=t.getModel();if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return;let o=0;const r=[],a=[];for(let l=0,c=i.length;l<c;l++){const d=i[l];let u=d.startLineNumber,h=d.endLineNumber,f=1,g=s.getLineMaxColumn(h);h<s.getLineCount()?(h+=1,g=1):u>1&&(u-=1,f=s.getLineMaxColumn(u)),r.push(Ii.replace(new Ce(u,f,h,g),"")),a.push(new Ce(u-o,d.positionColumn,u-o,d.positionColumn)),o+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(o=>{let r=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(r-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:r,positionColumn:o.positionColumn}});t.sort((o,r)=>o.startLineNumber===r.startLineNumber?o.endLineNumber-r.endLineNumber:o.startLineNumber-r.startLineNumber);const i=[];let s=t[0];for(let o=1;o<t.length;o++)s.endLineNumber+1>=t[o].startLineNumber?s.endLineNumber=t[o].endLineNumber:(i.push(s),s=t[o]);return i.push(s),i}}class lYe extends _e{constructor(){super({id:"editor.action.indentLines",label:p("lines.indent","Indent Line"),alias:"Indent Line",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2142,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,Tf.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class cYe extends _e{constructor(){super({id:"editor.action.outdentLines",label:p("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2140,weight:100}})}run(e,t){mC.Outdent.runEditorCommand(e,t,null)}}class dYe extends _e{constructor(){super({id:"editor.action.insertLineBefore",label:p("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,rO.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class uYe extends _e{constructor(){super({id:"editor.action.insertLineAfter",label:p("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,rO.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class wpe extends _e{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),s=this._getRangesToDelete(t),o=[];for(let l=0,c=s.length-1;l<c;l++){const d=s[l],u=s[l+1];E.intersectRanges(d,u)===null?o.push(d):s[l+1]=E.plusRange(d,u)}o.push(s[s.length-1]);const r=this._getEndCursorState(i,o),a=o.map(l=>Ii.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}}class hYe extends wpe{constructor(){super({id:"deleteAllLeft",label:p("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const s=[];let o=0;return t.forEach(r=>{let a;if(r.endColumn===1&&o>0){const l=r.startLineNumber-o;a=new Ce(l,r.startColumn,l,r.startColumn)}else a=new Ce(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);o+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?i=a:s.push(a)}),i&&s.unshift(i),s}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let i=t;const s=e.getModel();return s===null?[]:(i.sort(E.compareRangesUsingStarts),i=i.map(o=>{if(o.isEmpty())if(o.startColumn===1){const r=Math.max(1,o.startLineNumber-1),a=o.startLineNumber===1?1:s.getLineLength(r)+1;return new E(r,a,o.startLineNumber,1)}else return new E(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new E(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),i)}}class fYe extends wpe{constructor(){super({id:"deleteAllRight",label:p("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const s=[];for(let o=0,r=t.length,a=0;o<r;o++){const l=t[o],c=new Ce(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?i=c:s.push(c)}return i&&s.unshift(i),s}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const i=e.getSelections();if(i===null)return[];const s=i.map(o=>{if(o.isEmpty()){const r=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===r?new E(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new E(o.startLineNumber,o.startColumn,o.startLineNumber,r)}return o});return s.sort(E.compareRangesUsingStarts),s}}class gYe extends _e{constructor(){super({id:"editor.action.joinLines",label:p("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(i===null)return;let s=t.getSelection();if(s===null)return;i.sort(E.compareRangesUsingStarts);const o=[],r=i.reduce((h,f)=>h.isEmpty()?h.endLineNumber===f.startLineNumber?(s.equalsSelection(h)&&(s=f),f):f.startLineNumber>h.endLineNumber+1?(o.push(h),f):new Ce(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn):f.startLineNumber>h.endLineNumber?(o.push(h),f):new Ce(h.startLineNumber,h.startColumn,f.endLineNumber,f.endColumn));o.push(r);const a=t.getModel();if(a===null)return;const l=[],c=[];let d=s,u=0;for(let h=0,f=o.length;h<f;h++){const g=o[h],m=g.startLineNumber,_=1;let b=0,v,w;const y=a.getLineLength(g.endLineNumber)-g.endColumn;if(g.isEmpty()||g.startLineNumber===g.endLineNumber){const k=g.getStartPosition();k.lineNumber<a.getLineCount()?(v=m+1,w=a.getLineMaxColumn(v)):(v=k.lineNumber,w=a.getLineMaxColumn(k.lineNumber))}else v=g.endLineNumber,w=a.getLineMaxColumn(v);let S=a.getLineContent(m);for(let k=m+1;k<=v;k++){const D=a.getLineContent(k),N=a.getLineFirstNonWhitespaceColumn(k);if(N>=1){let R=!0;S===""&&(R=!1),R&&(S.charAt(S.length-1)===" "||S.charAt(S.length-1)==="	")&&(R=!1,S=S.replace(/[\s\uFEFF\xA0]+$/g," "));const O=D.substr(N-1);S+=(R?" ":"")+O,R?b=O.length+1:b=O.length}else b=0}const x=new E(m,_,v,w);if(!x.isEmpty()){let k;g.isEmpty()?(l.push(Ii.replace(x,S)),k=new Ce(x.startLineNumber-u,S.length-b+1,m-u,S.length-b+1)):g.startLineNumber===g.endLineNumber?(l.push(Ii.replace(x,S)),k=new Ce(g.startLineNumber-u,g.startColumn,g.endLineNumber-u,g.endColumn)):(l.push(Ii.replace(x,S)),k=new Ce(g.startLineNumber-u,g.startColumn,g.startLineNumber-u,S.length-y)),E.intersectRanges(x,s)!==null?d=k:c.push(k)}u+=x.endLineNumber-x.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}class mYe extends _e{constructor(){super({id:"editor.action.transpose",label:p("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:I.writable})}run(e,t){const i=t.getSelections();if(i===null)return;const s=t.getModel();if(s===null)return;const o=[];for(let r=0,a=i.length;r<a;r++){const l=i[r];if(!l.isEmpty())continue;const c=l.getStartPosition(),d=s.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===s.getLineCount())continue;const u=new E(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h=s.getValueInRange(u).split("").reverse().join("");o.push(new ps(new Ce(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),h))}else{const u=new E(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),h=s.getValueInRange(u).split("").reverse().join("");o.push(new s$(u,h,new Ce(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class tv extends _e{run(e,t){const i=t.getSelections();if(i===null)return;const s=t.getModel();if(s===null)return;const o=t.getOption(132),r=[];for(const a of i)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const d=new E(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),u=s.getValueInRange(d);r.push(Ii.replace(d,this._modifyText(u,o)))}else{const l=s.getValueInRange(a);r.push(Ii.replace(a,this._modifyText(l,o)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}class pYe extends tv{constructor(){super({id:"editor.action.transformToUppercase",label:p("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:I.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class _Ye extends tv{constructor(){super({id:"editor.action.transformToLowercase",label:p("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:I.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class vh{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}const tR=class tR extends tv{constructor(){super({id:"editor.action.transformToTitlecase",label:p("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:I.writable})}_modifyText(e,t){const i=tR.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,s=>s.toLocaleUpperCase()):e}};tR.titleBoundary=new vh("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");let CM=tR;const Fw=class Fw extends tv{constructor(){super({id:"editor.action.transformToSnakecase",label:p("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:I.writable})}_modifyText(e,t){const i=Fw.caseBoundary.get(),s=Fw.singleLetters.get();return!i||!s?e:e.replace(i,"$1_$2").replace(s,"$1_$2$3").toLocaleLowerCase()}};Fw.caseBoundary=new vh("(\\p{Ll})(\\p{Lu})","gmu"),Fw.singleLetters=new vh("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");let FS=Fw;const iR=class iR extends tv{constructor(){super({id:"editor.action.transformToCamelcase",label:p("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:I.writable})}_modifyText(e,t){const i=iR.wordBoundary.get();if(!i)return e;const s=e.split(i);return s.shift()+s.map(r=>r.substring(0,1).toLocaleUpperCase()+r.substring(1)).join("")}};iR.wordBoundary=new vh("[_\\s-]","gm");let yM=iR;const Ww=class Ww extends tv{constructor(){super({id:"editor.action.transformToPascalcase",label:p("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:I.writable})}_modifyText(e,t){const i=Ww.wordBoundary.get(),s=Ww.wordBoundaryToMaintain.get();return!i||!s?e:e.split(s).map(a=>a.split(i)).flat().map(a=>a.substring(0,1).toLocaleUpperCase()+a.substring(1)).join("")}};Ww.wordBoundary=new vh("[_\\s-]","gm"),Ww.wordBoundaryToMaintain=new vh("(?<=\\.)","gm");let SM=Ww;const Sf=class Sf extends tv{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:p("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:I.writable})}_modifyText(e,t){const i=Sf.caseBoundary.get(),s=Sf.singleLetters.get(),o=Sf.underscoreBoundary.get();return!i||!s||!o?e:e.replace(o,"$1-$3").replace(i,"$1-$2").replace(s,"$1-$2").toLocaleLowerCase()}};Sf.caseBoundary=new vh("(\\p{Ll})(\\p{Lu})","gmu"),Sf.singleLetters=new vh("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),Sf.underscoreBoundary=new vh("(\\S)(_)(\\S)","gm");let xM=Sf;se(JGe);se(eYe);se(tYe);se(iYe);se(nYe);se(sYe);se(oYe);se(rYe);se(x7);se(aYe);se(lYe);se(cYe);se(dYe);se(uYe);se(hYe);se(fYe);se(gYe);se(mYe);se(pYe);se(_Ye);FS.caseBoundary.isSupported()&&FS.singleLetters.isSupported()&&se(FS);yM.wordBoundary.isSupported()&&se(yM);SM.wordBoundary.isSupported()&&se(SM);CM.titleBoundary.isSupported()&&se(CM);xM.isSupported()&&se(xM);var bYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},KE=function(n,e){return function(t,i){e(t,i,n)}},tI;const Cpe=new me("LinkedEditingInputVisible",!1),vYe="linked-editing-decoration";var Pg;let Hy=(Pg=class extends U{static get(e){return e.getContribution(tI.ID)}constructor(e,t,i,s,o){super(),this.languageConfigurationService=s,this._syncRangesToken=0,this._localToDispose=this._register(new Q),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=Cpe.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Q),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(70)||r.hasChanged(94))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),i=t!==null&&(this._editor.getOption(70)||this._editor.getOption(94))&&this._providers.has(t);if(i===this._enabled&&!e||(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||t===null))return;this._localToDispose.add(ue.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const s=new qa(this._debounceInformation.get(t)),o=()=>{this._rangeUpdateTriggerPromise=s.trigger(()=>this.updateRanges(),this._debounceDuration??this._debounceInformation.get(t))},r=new qa(0),a=l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}o()})),this._localToDispose.add({dispose:()=>{s.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const s=t.getValueInRange(i);if(this._currentWordPattern){const r=s.match(this._currentWordPattern);if((r?r[0].length:0)!==s.length)return this.clearRanges()}const o=[];for(let r=1,a=this._currentDecorations.length;r<a;r++){const l=this._currentDecorations.getRange(r);if(l)if(l.startLineNumber!==l.endLineNumber)o.push({range:l,text:s});else{let c=t.getValueInRange(l),d=s,u=l.startColumn,h=l.endColumn;const f=$g(c,d);u+=f,c=c.substr(f),d=d.substr(f);const g=ZI(c,d);h-=g,c=c.substr(0,c.length-g),d=d.substr(0,d.length-g),(u!==h||d.length!==0)&&o.push({range:new E(l.startLineNumber,u,l.endLineNumber,h),text:d})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const i=this._editor.getModel(),s=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===s){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const r=this._currentDecorations.getRange(0);if(r&&r.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=s;const o=this._currentRequestCts=new Pi;try{const r=new Qn(!1),a=await ype(this._providers,i,t,o.token);if(this._debounceInformation.update(i,r.elapsed()),o!==this._currentRequestCts||(this._currentRequestCts=null,s!==i.getVersionId()))return;let l=[];a!=null&&a.ranges&&(l=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let c=!1;for(let u=0,h=l.length;u<h;u++)if(E.containsPosition(l[u],t)){if(c=!0,u!==0){const f=l[u];l.splice(u,1),l.unshift(f)}break}if(!c){this.clearRanges();return}const d=l.map(u=>({range:u,options:tI.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(d),this._syncRangesToken++}catch(r){el(r)||He(r),(this._currentRequestCts===o||!this._currentRequestCts)&&this.clearRanges()}}},tI=Pg,Pg.ID="editor.contrib.linkedEditing",Pg.DECORATION=ze.register({description:"linked-editing",stickiness:0,className:vYe}),Pg);Hy=tI=bYe([KE(1,Ae),KE(2,ve),KE(3,Ri),KE(4,_a)],Hy);class wYe extends _e{constructor(){super({id:"editor.action.linkedEditing",label:p("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:X.and(I.writable,I.hasRenameProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(kt),[s,o]=Array.isArray(t)&&t||[void 0,void 0];return Le.isUri(s)&&H.isIPosition(o)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},He):super.runCommand(e,t)}run(e,t){const i=Hy.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const CYe=xn.bindToContribution(Hy.get);fe(new CYe({id:"cancelLinkedEditingInput",precondition:Cpe,handler:n=>n.clearRanges(),kbOpts:{kbExpr:I.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));function ype(n,e,t,i){const s=n.ordered(e);return pz(s.map(o=>async()=>{try{return await o.provideLinkedEditingRanges(e,t,i)}catch(r){en(r);return}}),o=>!!o&&Ys(o==null?void 0:o.ranges))}T("editor.linkedEditingBackground",{dark:te.fromHex("#f00").transparent(.3),light:te.fromHex("#f00").transparent(.3),hcDark:te.fromHex("#f00").transparent(.3),hcLight:te.white},p("editorLinkedEditingBackground","Background color when the editor auto renames on type."));Qo("_executeLinkedEditingProvider",(n,e,t)=>{const{linkedEditingRangeProvider:i}=n.get(ve);return ype(i,e,t,Ye.None)});wt(Hy.ID,Hy,1);se(wYe);let yYe=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}};class kM{constructor(e){this._disposables=new Q;let t=[];for(const[i,s]of e){const o=i.links.map(r=>new yYe(r,s));t=kM._union(t,o),eA(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let s,o,r,a;for(s=0,r=0,o=e.length,a=t.length;s<o&&r<a;){const l=e[s],c=t[r];if(E.areIntersectingOrTouching(l.range,c.range)){s++;continue}E.compareRangesUsingStarts(l.range,c.range)<0?(i.push(l),s++):(i.push(c),r++)}for(;s<o;s++)i.push(e[s]);for(;r<a;r++)i.push(t[r]);return i}}function Spe(n,e,t){const i=[],s=n.ordered(e).reverse().map((o,r)=>Promise.resolve(o.provideLinks(e,t)).then(a=>{a&&(i[r]=[a,o])},en));return Promise.all(s).then(()=>{const o=new kM(Tl(i));return t.isCancellationRequested?(o.dispose(),new kM([])):o})}bt.registerCommand("_executeLinkProvider",async(n,...e)=>{let[t,i]=e;xt(t instanceof Le),typeof i!="number"&&(i=0);const{linkProvider:s}=n.get(ve),o=n.get(gi).getModel(t);if(!o)return[];const r=await Spe(s,o,Ye.None);if(!r)return[];for(let l=0;l<Math.min(i,r.links.length);l++)await r.links[l].resolve(Ye.None);const a=r.links.slice(0);return r.dispose(),a});var SYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},GE=function(n,e){return function(t,i){e(t,i,n)}},k7,A_;let Jk=(A_=class extends U{static get(e){return e.getContribution(k7.ID)}constructor(e,t,i,s,o){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=s,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=o.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new $t(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new CO(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=On(t=>Spe(this.providers,e,t));try{const t=new Qn(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){He(t)}finally{this.computePromise=null}}}updateDecorations(e){const t=this.editor.getOption(78)==="altKey",i=[],s=Object.keys(this.currentOccurrences);for(const r of s){const a=this.currentOccurrences[r];i.push(a.decorationId)}const o=[];if(e)for(const r of e)o.push(vC.decoration(r,t));this.editor.changeDecorations(r=>{const a=r.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new vC(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const i=this.editor.getOption(78)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const s=this.getLinkOccurrence(e.target.position);s&&this.editor.changeDecorations(o=>{s.activate(o,i),this.activeLinkDecorationId=s.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(i=>{t.deactivate(i,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:s}=e;s.resolve(Ye.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===je.file&&o.startsWith(`${je.file}:`)){const a=Le.parse(o);if(a.scheme===je.file){const l=ld(a);let c=null;l.startsWith("/./")||l.startsWith("\\.\\")?c=`.${l.substr(1)}`:(l.startsWith("//./")||l.startsWith("\\\\.\\"))&&(c=`.${l.substr(2)}`),c&&(o=x2e(r,c))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},o=>{const r=o instanceof Error?o.message:o;r==="invalid"?this.notificationService.warn(p("invalid.url","Failed to open this link because it is not well-formed: {0}",s.url.toString())):r==="missing"?this.notificationService.warn(p("missing.url","Failed to open this link because its target is missing.")):He(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const i of t){const s=this.currentOccurrences[i.id];if(s)return s}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)==null||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}},k7=A_,A_.ID="editor.linkDetector",A_);Jk=k7=SYe([GE(1,Xo),GE(2,rn),GE(3,ve),GE(4,_a)],Jk);const Hie={general:ze.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:ze.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class vC{static decoration(e,t){return{range:e.range,options:vC._getOptions(e,t,!1)}}static _getOptions(e,t,i){const s={...i?Hie.active:Hie.general};return s.hoverMessage=xYe(e,t),s}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,vC._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,vC._getOptions(this.link,t,!1))}}function xYe(n,e){const t=n.url&&/^command:/i.test(n.url.toString()),i=n.tooltip?n.tooltip:t?p("links.navigate.executeCmd","Execute command"):p("links.navigate.follow","Follow link"),s=e?ct?p("links.navigate.kb.meta.mac","cmd + click"):p("links.navigate.kb.meta","ctrl + click"):ct?p("links.navigate.kb.alt.mac","option + click"):p("links.navigate.kb.alt","alt + click");if(n.url){let o="";if(/^command:/i.test(n.url.toString())){const a=n.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];o=p("tooltip.explanation","Execute command {0}",l)}}return new Ds("",!0).appendLink(n.url.toString(!0).replace(/ /g,"%20"),i,o).appendMarkdown(` (${s})`)}else return new Ds().appendText(`${i} (${s})`)}class kYe extends _e{constructor(){super({id:"editor.action.openLink",label:p("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=Jk.get(t);if(!i||!t.hasModel())return;const s=t.getSelections();for(const o of s){const r=i.getLinkOccurrence(o.getEndPosition());r&&i.openLinkOccurrence(r,!1)}}}wt(Jk.ID,Jk,1);se(kYe);const Hq=class Hq extends U{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const i=this._editor.getOption(118);i>=0&&t.target.type===6&&t.target.position.column>=i&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}};Hq.ID="editor.contrib.longLinesHelper";let LM=Hq;wt(LM.ID,LM,2);const LYe=T("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},p("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},p("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.wordHighlightTextBackground",LYe,p("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const DYe=T("editor.wordHighlightBorder",{light:null,dark:null,hcDark:vi,hcLight:vi},p("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));T("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:vi,hcLight:vi},p("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));T("editor.wordHighlightTextBorder",DYe,p("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const EYe=T("editorOverviewRuler.wordHighlightForeground","#A0A0A0CC",p("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),NYe=T("editorOverviewRuler.wordHighlightStrongForeground","#C0A0C0CC",p("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),IYe=T("editorOverviewRuler.wordHighlightTextForeground",qde,p("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),TYe=ze.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:ji(NYe),position:aa.Center},minimap:{color:ji(EA),position:1}}),PYe=ze.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:ji(IYe),position:aa.Center},minimap:{color:ji(EA),position:1}}),MYe=ze.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:ji(qde),position:aa.Center},minimap:{color:ji(EA),position:1}}),RYe=ze.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),AYe=ze.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:ji(EYe),position:aa.Center},minimap:{color:ji(EA),position:1}});function OYe(n){return n===sy.Write?TYe:n===sy.Text?PYe:AYe}function FYe(n){return n?RYe:MYe}tl((n,e)=>{const t=n.getColor(zz);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var WYe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},BYe=function(n,e){return function(t,i){e(t,i,n)}},L7;function Cm(n,e){const t=e.filter(i=>!n.find(s=>s.equals(i)));if(t.length>=1){const i=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),s=t.length===1?p("cursorAdded","Cursor added: {0}",i):p("cursorsAdded","Cursors added: {0}",i);Xd(s)}}class HYe extends _e{constructor(){super({id:"editor.action.insertCursorAbove",label:p("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(i.source,3,es.addCursorUp(o,r,s)),o.revealTopMostCursor(i.source),Cm(r,o.getCursorStates())}}class jYe extends _e{constructor(){super({id:"editor.action.insertCursorBelow",label:p("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&i.logicalLine===!1&&(s=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(i.source,3,es.addCursorDown(o,r,s)),o.revealBottomMostCursor(i.source),Cm(r,o.getCursorStates())}}class VYe extends _e{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:p("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"3_multi",title:p({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let s=e.startLineNumber;s<e.endLineNumber;s++){const o=t.getLineMaxColumn(s);i.push(new Ce(s,o,s,o))}e.endColumn>1&&i.push(new Ce(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=t.getSelections(),o=t._getViewModel(),r=o.getCursorStates(),a=[];s.forEach(l=>this.getCursorsForSelection(l,i,a)),a.length>0&&t.setSelections(a),Cm(r,o.getCursorStates())}}class zYe extends _e{constructor(){super({id:"editor.action.addCursorsToBottom",label:p("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=t.getModel().getLineCount(),o=[];for(let l=i[0].startLineNumber;l<=s;l++)o.push(new Ce(l,i[0].startColumn,l,i[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();o.length>0&&t.setSelections(o),Cm(a,r.getCursorStates())}}class UYe extends _e{constructor(){super({id:"editor.action.addCursorsToTop",label:p("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=[];for(let a=i[0].startLineNumber;a>=1;a--)s.push(new Ce(a,i[0].startColumn,a,i[0].endColumn));const o=t._getViewModel(),r=o.getCursorStates();s.length>0&&t.setSelections(s),Cm(r,o.getCursorStates())}}class YE{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class eL{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new eL(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let s=!1,o,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(s=!0,o=!0,r=!0):(o=i.wholeWord,r=i.matchCase);const l=e.getSelection();let c,d=null;if(l.isEmpty()){const u=e.getConfiguredWordAtPosition(l.getStartPosition());if(!u)return null;c=u.word,d=new Ce(l.startLineNumber,u.startColumn,l.startLineNumber,u.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new eL(e,t,s,c,o,r,d)}constructor(e,t,i,s,o,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=s,this.wholeWord=o,this.matchCase=r,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new YE(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new YE(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new Ce(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new YE(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new YE(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const s=this.currentMatch;return this.currentMatch=null,s}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return i?new Ce(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824)}}const nR=class nR extends U{static get(e){return e.getContribution(nR.ID)}constructor(e){super(),this._sessionDispose=this._register(new Q),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=eL.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(s=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(s=>{(s.matchCase||s.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new Ce(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const s=e.getState().matchCase;if(!xpe(this._editor.getModel(),t,s)){const r=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const s=this._editor.getModel();i.searchScope?t=s.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824):t=s.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(132):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const s=this._editor.getSelection();for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a.range.intersectRanges(s)){t[o]=t[0],t[0]=a;break}}this._setSelections(t.map(o=>new Ce(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}};nR.ID="editor.contrib.multiCursorController";let jy=nR;class S1 extends _e{run(e,t){const i=jy.get(t);if(!i)return;const s=t._getViewModel();if(s){const o=s.getCursorStates(),r=Yo.get(t);if(r)this._run(i,r);else{const a=e.get(ke).createInstance(Yo,t);this._run(i,a),a.dispose()}Cm(o,s.getCursorStates())}}}class $Ye extends S1{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:p("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:2082,weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class qYe extends S1{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:p("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:we.MenubarSelectionMenu,group:"3_multi",title:p({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class KYe extends S1{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:p("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:pn(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class GYe extends S1{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:p("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class YYe extends S1{constructor(){super({id:"editor.action.selectHighlights",label:p("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:3114,weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"3_multi",title:p({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class ZYe extends S1{constructor(){super({id:"editor.action.changeAll",label:p("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:X.and(I.writable,I.editorTextFocus),kbOpts:{kbExpr:I.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class QYe{constructor(e,t,i,s,o){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=s,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(E.compareRangesUsingStarts)),this._cachedFindMatches}}var O_;let DM=(O_=class extends U{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(109),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new $t(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(s=>{this._isEnabled=e.getOption(109)})),this._register(e.onDidChangeCursorSelection(s=>{this._isEnabled&&(s.selection.isEmpty()?s.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(s=>{this._setState(null)})),this._register(e.onDidChangeModelContent(s=>{this._isEnabled&&this.updateSoon.schedule()}));const i=Yo.get(e);i&&this._register(i.getState().onFindReplaceStateChange(s=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(L7._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t||!i.hasModel())return null;const s=i.getSelection();if(s.startLineNumber!==s.endLineNumber)return null;const o=jy.get(i);if(!o)return null;const r=Yo.get(i);if(!r)return null;let a=o.getSession(r);if(!a){const d=i.getSelections();if(d.length>1){const h=r.getState().matchCase;if(!xpe(i.getModel(),d,h))return null}a=eL.create(i,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let u=a.searchText;if(c||(u=u.toLowerCase()),d===u&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new QYe(i.getModel(),a.searchText,a.matchCase,a.wholeWord?i.getOption(132):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),s=this.editor.getSelections();s.sort(E.compareRangesUsingStarts);const o=[];for(let c=0,d=0,u=i.length,h=s.length;c<u;){const f=i[c];if(d>=h)o.push(f),c++;else{const g=E.compareRangesUsingStarts(f,s[d]);g<0?((s[d].isEmpty()||!E.areIntersecting(f,s[d]))&&o.push(f),c++):(g>0||c++,d++)}}const r=this.editor.getOption(81)!=="off",a=this._languageFeaturesService.documentHighlightProvider.has(t)&&r,l=o.map(c=>({range:c,options:FYe(a)}));this._decorations.set(l)}dispose(){this._setState(null),super.dispose()}},L7=O_,O_.ID="editor.contrib.selectionHighlighter",O_);DM=L7=WYe([BYe(1,ve)],DM);function xpe(n,e,t){const i=jie(n,e[0],!t);for(let s=1,o=e.length;s<o;s++){const r=e[s];if(r.isEmpty())return!1;const a=jie(n,r,!t);if(i!==a)return!1}return!0}function jie(n,e,t){const i=n.getValueInRange(e);return t?i.toLowerCase():i}class XYe extends _e{constructor(){super({id:"editor.action.focusNextCursor",label:p("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:p("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=Array.from(s.getCursorStates()),r=o.shift();r&&(o.push(r),s.setCursorStates(i.source,3,o),s.revealPrimaryCursor(i.source,!0),Cm(o,s.getCursorStates()))}}class JYe extends _e{constructor(){super({id:"editor.action.focusPreviousCursor",label:p("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:p("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const o=Array.from(s.getCursorStates()),r=o.pop();r&&(o.unshift(r),s.setCursorStates(i.source,3,o),s.revealPrimaryCursor(i.source,!0),Cm(o,s.getCursorStates()))}}wt(jy.ID,jy,4);wt(DM.ID,DM,1);se(HYe);se(jYe);se(VYe);se($Ye);se(qYe);se(KYe);se(GYe);se(YYe);se(ZYe);se(zYe);se(UYe);se(XYe);se(JYe);const eZe="editor.action.inlineEdit.accept",tZe="editor.action.inlineEdit.reject",iZe="editor.action.inlineEdit.jumpTo",nZe="editor.action.inlineEdit.jumpBack";var sZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},oZe=function(n,e){return function(t,i){e(t,i,n)}};const x5="inline-edit";let D7=class extends U{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=it(this,!1),this.currentTextModel=Ht(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=ye(this,s=>{var v;if(this.isDisposed.read(s))return;const o=this.currentTextModel.read(s);if(o!==this.model.targetTextModel.read(s))return;const r=this.model.ghostText.read(s);if(!r)return;let a=(v=this.model.range)==null?void 0:v.read(s);a&&a.startLineNumber===a.endLineNumber&&a.startColumn===a.endColumn&&(a=void 0);const l=(a?a.startLineNumber===a.endLineNumber:!0)&&r.parts.length===1&&r.parts[0].lines.length===1,c=r.parts.length===1&&r.parts[0].lines.every(w=>w.length===0),d=[],u=[];function h(w,y){if(u.length>0){const S=u[u.length-1];y&&S.decorations.push(new ho(S.content.length+1,S.content.length+1+w[0].length,y,0)),S.content+=w[0],w=w.slice(1)}for(const S of w)u.push({content:S,decorations:y?[new ho(1,S.length+1,y,0)]:[]})}const f=o.getLineContent(r.lineNumber);let g,m=0;if(!c&&(l||!a)){for(const w of r.parts){let y=w.lines;a&&!l&&(h(y,x5),y=[]),g===void 0?(d.push({column:w.column,text:y[0],preview:w.preview}),y=y.slice(1)):h([f.substring(m,w.column-1)],void 0),y.length>0&&(h(y,x5),g===void 0&&w.column<=f.length&&(g=w.column)),m=w.column-1}g!==void 0&&h([f.substring(m)],void 0)}const _=g!==void 0?new ope(g,f.length+1):void 0,b=l||!a?r.lineNumber:a.endLineNumber-1;return{inlineTexts:d,additionalLines:u,hiddenRange:_,lineNumber:b,additionalReservedLineCount:this.model.minReservedLineCount.read(s),targetTextModel:o,range:a,isSingleLine:l,isPureRemove:c}}),this.decorations=ye(this,s=>{const o=this.uiState.read(s);if(!o)return[];const r=[];if(o.hiddenRange&&r.push({range:o.hiddenRange.toRange(o.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),o.range){const a=[];if(o.isSingleLine)a.push(o.range);else if(!o.isPureRemove){const l=o.range.endLineNumber-o.range.startLineNumber;for(let c=0;c<l;c++){const d=o.range.startLineNumber+c,u=o.targetTextModel.getLineFirstNonWhitespaceColumn(d),h=o.targetTextModel.getLineLastNonWhitespaceColumn(d),f=new E(d,u,d,h);a.push(f)}}for(const l of a)r.push({range:l,options:Dy})}if(o.range&&!o.isSingleLine&&o.isPureRemove){const a=new E(o.range.startLineNumber,1,o.range.endLineNumber-1,1);r.push({range:a,options:Tk})}for(const a of o.inlineTexts)r.push({range:E.fromPositions(new H(o.lineNumber,a.column)),options:{description:x5,after:{content:a.text,inlineClassName:a.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:xl.Left},showIfCollapsed:!0}});return r}),this._register(xe(()=>{this.isDisposed.set(!0,void 0)})),this._register(rpe(this.editor,this.decorations))}};D7=sZe([oZe(2,Di)],D7);var wq=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ed=function(n,e){return function(t,i){e(t,i,n)}},iI;let E7=class extends U{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=Ht(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).showToolbar==="always"),this.sessionPosition=void 0,this.position=ye(this,s=>{var l,c;const o=(l=this.model.read(s))==null?void 0:l.model.ghostText.read(s);if(!this.alwaysShowToolbar.read(s)||!o||o.parts.length===0)return this.sessionPosition=void 0,null;const r=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const a=new H(o.lineNumber,Math.min(r,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(zo((s,o)=>{if(!this.model.read(s)||!this.alwaysShowToolbar.read(s))return;const a=o.add(this.instantiationService.createInstance(N7,this.editor,!0,this.position));e.addContentWidget(a),o.add(xe(()=>e.removeContentWidget(a)))}))}};E7=wq([Ed(2,ke)],E7);var Mg;let N7=(Mg=class extends U{constructor(e,t,i,s,o,r){super(),this.editor=e,this.withBorder=t,this._position=i,this._contextKeyService=o,this._menuService=r,this.id=`InlineEditHintsContentWidget${iI.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=rt("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[rt("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(we.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(s.createInstance(I7,this.nodes.toolBar,this.editor,we.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:a=>a.startsWith("primary")},actionViewItemProvider:(a,l)=>{if(a instanceof vr)return s.createInstance(rZe,a,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(a=>{iI._dropDownVisible=a})),this._register(Be(a=>{this._position.read(a),this.editor.layoutContentWidget(this)})),this._register(Be(a=>{const l=[];for(const[c,d]of this.inlineCompletionsActionsMenus.getActions())for(const u of d)u instanceof vr&&l.push(u);l.length>0&&l.unshift(new Wn),this.toolBar.setAdditionalSecondaryActions(l)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},iI=Mg,Mg._dropDownVisible=!1,Mg.id=0,Mg);N7=iI=wq([Ed(3,ke),Ed(4,Ae),Ed(5,pa)],N7);class rZe extends Xg{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=rt("div.keybinding").root;this._register(new g1(t,mr,{disableTitle:!0,...Jhe})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let I7=class extends Mk{constructor(e,t,i,s,o,r,a,l,c,d){super(e,{resetMenu:i,...s},o,r,a,l,c,d),this.editor=t,this.menuId=i,this.options2=s,this.menuService=o,this.contextKeyService=r,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var i,s,o,r,a,l,c;const e=[],t=[];$A(this.menu,(i=this.options2)==null?void 0:i.menuOptions,{primary:e,secondary:t},(o=(s=this.options2)==null?void 0:s.toolbarOptions)==null?void 0:o.primaryGroup,(a=(r=this.options2)==null?void 0:r.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setAdditionalSecondaryActions(e){Li(this.additionalActions,e,(t,i)=>t===i)||(this.additionalActions=e,this.updateToolbar())}};I7=wq([Ed(4,pa),Ed(5,Ae),Ed(6,Er),Ed(7,Ft),Ed(8,oi),Ed(9,Ps)],I7);var kpe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nI=function(n,e){return function(t,i){e(t,i,n)}},B0,T7;function*aZe(n,e,t=1){e===void 0&&([e,n]=[n,0]);for(let i=n;i<e;i+=t)yield i}function k5(n){var i;const e=((i=n[0].match(/^\s*/))==null?void 0:i[0])??"",t=e.length;return{text:n.map(s=>s.replace(new RegExp("^"+e),"")),shift:t}}var F_;let P7=(F_=class extends U{static _createUniqueUri(){return Le.from({scheme:"inline-edit-widget",path:new Date().toString()+String(B0._modelId++)})}constructor(e,t,i,s,o){super(),this._editor=e,this._model=t,this._instantiationService=i,this._diffProviderFactoryService=s,this._modelService=o,this._position=ye(this,r=>{const a=this._model.read(r);if(!a||a.text.length===0||a.range.startLineNumber===a.range.endLineNumber&&!(a.range.startColumn===a.range.endColumn&&a.range.startColumn===1))return null;const l=this._editor.getModel();if(!l)return null;const c=Array.from(aZe(a.range.startLineNumber,a.range.endLineNumber+1)),d=c.map(m=>l.getLineLastNonWhitespaceColumn(m)),u=Math.max(...d),h=c[d.indexOf(u)],f=new H(h,u);return{top:a.range.startLineNumber,left:f}}),this._text=ye(this,r=>{const a=this._model.read(r);if(!a)return{text:"",shift:0};const l=k5(a.text.split(`
`));return{text:l.text.join(`
`),shift:l.shift}}),this._originalModel=Us(()=>this._modelService.createModel("",null,B0._createUniqueUri())).keepObserved(this._store),this._modifiedModel=Us(()=>this._modelService.createModel("",null,B0._createUniqueUri())).keepObserved(this._store),this._diff=ye(this,r=>{var a,l;return(l=(a=this._diffPromise.read(r))==null?void 0:a.promiseResult.read(r))==null?void 0:l.data}),this._diffPromise=ye(this,r=>{const a=this._model.read(r);if(!a)return;const l=this._editor.getModel();if(!l)return;const c=k5(l.getValueInRange(a.range).split(`
`)).text.join(`
`),d=k5(a.text.split(`
`)).text.join(`
`);this._originalModel.get().setValue(c),this._modifiedModel.get().setValue(d);const u=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return VA.fromFn(async()=>{const h=await u.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Ye.None);if(!h.identical)return h.changes})}),this._register(zo((r,a)=>{if(!this._model.read(r)||this._position.get()===null)return;const c=a.add(this._instantiationService.createInstance(M7,this._editor,this._position,this._text.map(d=>d.text),this._text.map(d=>d.shift),this._diff));e.addOverlayWidget(c),a.add(xe(()=>e.removeOverlayWidget(c)))}))}},B0=F_,F_._modelId=0,F_);P7=B0=kpe([nI(2,ke),nI(3,tD),nI(4,gi)],P7);var W_;let M7=(W_=class extends U{constructor(e,t,i,s,o,r){var a;super(),this._editor=e,this._position=t,this._text=i,this._shift=s,this._diff=o,this._instantiationService=r,this.id=`InlineEditSideBySideContentWidget${T7.id++}`,this.allowEditorOverflow=!1,this._nodes=ce("div.inlineEditSideBySide",void 0),this._scrollChanged=ms("editor.onDidScrollChange",this._editor.onDidScrollChange),this._previewEditor=this._register(this._instantiationService.createInstance(Wl,this._nodes,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},readOnly:!0,wordWrap:"off",wordWrapOverride1:"off",wordWrapOverride2:"off",wrappingIndent:"none",wrappingStrategy:void 0},{contributions:[],isSimpleWidget:!0},this._editor)),this._previewEditorObs=gr(this._previewEditor),this._editorObs=gr(this._editor),this._previewTextModel=this._register(this._instantiationService.createInstance(Cc,"",((a=this._editor.getModel())==null?void 0:a.getLanguageId())??_o,Cc.DEFAULT_CREATION_OPTIONS,null)),this._setText=ye(l=>{const c=this._text.read(l);c&&this._previewTextModel.setValue(c)}).recomputeInitiallyAndOnChange(this._store),this._decorations=ye(this,l=>{this._setText.read(l);const c=this._position.read(l);if(!c)return{org:[],mod:[]};const d=this._diff.read(l);if(!d)return{org:[],mod:[]};const u=[],h=[];if(d.length===1&&d[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return{org:[],mod:[]};const f=this._shift.get(),g=m=>new E(m.startLineNumber+c.top-1,m.startColumn+f,m.endLineNumber+c.top-1,m.endColumn+f);for(const m of d)if(m.original.isEmpty||u.push({range:g(m.original.toInclusiveRange()),options:Tk}),m.modified.isEmpty||h.push({range:m.modified.toInclusiveRange(),options:TP}),m.modified.isEmpty||m.original.isEmpty)m.original.isEmpty||u.push({range:g(m.original.toInclusiveRange()),options:L$}),m.modified.isEmpty||h.push({range:m.modified.toInclusiveRange(),options:x$});else for(const _ of m.innerChanges||[])m.original.contains(_.originalRange.startLineNumber)&&u.push({range:g(_.originalRange),options:_.originalRange.isEmpty()?D$:Dy}),m.modified.contains(_.modifiedRange.startLineNumber)&&h.push({range:_.modifiedRange,options:_.modifiedRange.isEmpty()?k$:PP});return{org:u,mod:h}}),this._originalDecorations=ye(this,l=>this._decorations.read(l).org),this._modifiedDecorations=ye(this,l=>this._decorations.read(l).mod),this._previewEditor.setModel(this._previewTextModel),this._register(this._editorObs.setDecorations(this._originalDecorations)),this._register(this._previewEditorObs.setDecorations(this._modifiedDecorations)),this._register(Be(l=>{const c=this._previewEditorObs.contentWidth.read(l),d=this._text.read(l).split(`
`).length-1,u=this._editor.getOption(67)*d;c<=0||this._previewEditor.layout({height:u,width:c})})),this._register(Be(l=>{this._position.read(l),this._editor.layoutOverlayWidget(this)})),this._register(Be(l=>{this._scrollChanged.read(l),this._position.read(l)&&this._editor.layoutOverlayWidget(this)}))}getId(){return this.id}getDomNode(){return this._nodes}getPosition(){const e=this._position.get();if(!e)return null;const t=this._editor.getLayoutInfo(),i=this._editor.getScrolledVisiblePosition(new H(e.top,1));if(!i)return null;const s=i.top-1,o=this._editor.getOffsetForColumn(e.left.lineNumber,e.left.column);return{preference:{left:t.contentLeft+o+10,top:s}}}},T7=W_,W_.id=0,W_);M7=T7=kpe([nI(5,ke)],M7);var lZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Bm=function(n,e){return function(t,i){e(t,i,n)}},H0,Ia;let fo=(Ia=class extends U{static get(e){return e.getContribution(H0.ID)}constructor(e,t,i,s,o,r,a,l){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.languageFeaturesService=s,this._commandService=o,this._configurationService=r,this._diffProviderFactoryService=a,this._modelService=l,this._isVisibleContext=H0.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=H0.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=it(this,void 0),this._currentWidget=Us(this._currentEdit,g=>{const m=this._currentEdit.read(g);if(!m)return;const _=m.range.endLineNumber,b=m.range.endColumn,v=m.text.endsWith(`
`)&&!(m.range.startLineNumber===m.range.endLineNumber&&m.range.startColumn===m.range.endColumn)?m.text.slice(0,-1):m.text,w=new Gk(_,[new rM(b,v,!1)]),y=m.range.startLineNumber===m.range.endLineNumber&&w.parts.length===1&&w.parts[0].lines.length===1,S=m.text==="";return!y&&!S?void 0:this.instantiationService.createInstance(D7,this.editor,{ghostText:Wa(w),minReservedLineCount:Wa(0),targetTextModel:Wa(this.editor.getModel()??void 0),range:Wa(m.range)})}),this._isAccepting=it(this,!1),this._enabled=Ht(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=Ht(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily);const c=ms("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register(Be(g=>{this._enabled.read(g)&&(c.read(g),!this._isAccepting.read(g)&&this.getInlineEdit(e,!0))}));const d=Ht(this,e.onDidChangeCursorPosition,()=>e.getPosition());this._register(Be(g=>{if(!this._enabled.read(g))return;const m=d.read(g);m&&this.checkCursorPosition(m)})),this._register(Be(g=>{const m=this._currentEdit.read(g);if(this._isCursorAtInlineEditContext.set(!1),!m){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);const _=e.getPosition();_&&this.checkCursorPosition(_)}));const u=ms("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register(Be(async g=>{var m;this._enabled.read(g)&&(u.read(g),!(this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur)&&((m=this._currentRequestCts)==null||m.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))}));const h=ms("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register(Be(g=>{this._enabled.read(g)&&(h.read(g),this.getInlineEdit(e,!0))}));const f=this._register(Ace());this._register(Be(g=>{const m=this._fontFamily.read(g);f.setStyle(m===""||m==="default"?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${m};
}`)})),this._register(new E7(this.editor,this._currentWidget,this.instantiationService)),this._register(new P7(this.editor,this._currentEdit,this.instantiationService,this._diffProviderFactoryService,this._modelService))}checkCursorPosition(e){if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}const t=this._currentEdit.get();if(!t){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(E.containsPosition(t.range,e))}validateInlineEdit(e,t){var i;if(t.text.includes(`
`)&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){if(t.range.startColumn!==1)return!1;const o=t.range.endLineNumber,r=t.range.endColumn,a=((i=e.getModel())==null?void 0:i.getLineLength(o))??0;if(r!==a+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const i=e.getModel();if(!i)return;const s=i.getVersionId(),o=this.languageFeaturesService.inlineEditProvider.all(i);if(o.length===0)return;const r=o[0];this._currentRequestCts=new Pi;const a=this._currentRequestCts.token,l=t?YI.Automatic:YI.Invoke;if(t&&await cZe(50,a),a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==s)return;const d=await r.provideInlineEdit(i,{triggerKind:l},a);if(d&&!(a.isCancellationRequested||i.isDisposed()||i.getVersionId()!==s)&&this.validateInlineEdit(e,d))return d}async getInlineEdit(e,t){this._isCursorAtInlineEditContext.set(!1),await this.clear();const i=await this.fetchInlineEdit(e,t);i&&this._currentEdit.set(i,void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){this._isAccepting.set(!0,void 0);const e=this._currentEdit.get();if(!e)return;let t=e.text;e.text.startsWith(`
`)&&(t=e.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[Ii.replace(E.lift(e.range),t)]),e.accepted&&await this._commandService.executeCommand(e.accepted.id,...e.accepted.arguments||[]).then(void 0,en),this.freeEdit(e),Ti(i=>{this._currentEdit.set(void 0,i),this._isAccepting.set(!1,i)})}jumpToCurrent(){var i;this._jumpBackPosition=(i=this.editor.getSelection())==null?void 0:i.getStartPosition();const e=this._currentEdit.get();if(!e)return;const t=H.lift({lineNumber:e.range.startLineNumber,column:e.range.startColumn});this.editor.setPosition(t),this.editor.revealPositionInCenterIfOutsideViewport(t)}async clear(e=!0){const t=this._currentEdit.get();t&&(t!=null&&t.rejected)&&e&&await this._commandService.executeCommand(t.rejected.id,...t.rejected.arguments||[]).then(void 0,en),t&&this.freeEdit(t),this._currentEdit.set(void 0,void 0)}freeEdit(e){const t=this.editor.getModel();if(!t)return;const i=this.languageFeaturesService.inlineEditProvider.all(t);i.length!==0&&i[0].freeInlineEdit(e)}},H0=Ia,Ia.ID="editor.contrib.inlineEditController",Ia.inlineEditVisibleKey="inlineEditVisible",Ia.inlineEditVisibleContext=new me(Ia.inlineEditVisibleKey,!1),Ia.cursorAtInlineEditKey="cursorAtInlineEdit",Ia.cursorAtInlineEditContext=new me(Ia.cursorAtInlineEditKey,!1),Ia);fo=H0=lZe([Bm(1,ke),Bm(2,Ae),Bm(3,ve),Bm(4,oi),Bm(5,nt),Bm(6,tD),Bm(7,gi)],fo);function cZe(n,e){return new Promise(t=>{let i;const s=setTimeout(()=>{i&&i.dispose(),t()},n);e&&(i=e.onCancellationRequested(()=>{clearTimeout(s),i&&i.dispose(),t()}))})}let dZe=class extends _e{constructor(){super({id:eZe,label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:X.and(I.writable,fo.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:X.and(I.writable,fo.inlineEditVisibleContext,fo.cursorAtInlineEditContext)}],menuOpts:[{menuId:we.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){const i=fo.get(t);await(i==null?void 0:i.accept())}};class uZe extends _e{constructor(){const e=X.and(I.writable,X.not(fo.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){const i=fo.get(t);i==null||i.trigger()}}class hZe extends _e{constructor(){const e=X.and(I.writable,fo.inlineEditVisibleContext,X.not(fo.cursorAtInlineEditKey));super({id:iZe,label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:we.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){const i=fo.get(t);i==null||i.jumpToCurrent()}}class fZe extends _e{constructor(){const e=X.and(I.writable,fo.cursorAtInlineEditContext);super({id:nZe,label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:we.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){const i=fo.get(t);i==null||i.jumpBack()}}class gZe extends _e{constructor(){const e=X.and(I.writable,fo.inlineEditVisibleContext);super({id:tZe,label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:we.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){const i=fo.get(t);await(i==null?void 0:i.clear())}}se(dZe);se(gZe);se(hZe);se(fZe);se(uZe);wt(fo.ID,fo,3);const mZe="editor.action.inlineEdits.accept",pZe="editor.action.inlineEdits.showPrevious",_Ze="editor.action.inlineEdits.showNext",Vy=new me("inlineEditsVisible",!1,p("inlineEditsVisible","Whether an inline edit is visible")),bZe=new me("inlineEditsIsPinned",!1,p("isPinned","Whether an inline edit is visible")),jq=class jq extends U{constructor(e){super(),this._editor=e,this._editorObs=gr(this._editor),this._placeholderText=this._editorObs.getOption(88),this._state=Zr({owner:this,equalsFn:PT},t=>{const i=this._placeholderText.read(t);if(i&&this._editorObs.valueIsEmpty.read(t))return{placeholder:i}}),this._shouldViewBeAlive=vZe(this,t=>{var i;return((i=this._state.read(t))==null?void 0:i.placeholder)!==void 0}),this._view=_m((t,i)=>{if(!this._shouldViewBeAlive.read(t))return;const s=rt("div.editorPlaceholder");i.add(Be(o=>{const r=this._state.read(o),a=(r==null?void 0:r.placeholder)!==void 0;s.root.style.display=a?"block":"none",s.root.innerText=(r==null?void 0:r.placeholder)??""})),i.add(Be(o=>{const r=this._editorObs.layoutInfo.read(o);s.root.style.left=`${r.contentLeft}px`,s.root.style.width=r.contentWidth-r.verticalScrollbarWidth+"px",s.root.style.top=`${this._editor.getTopForLineNumber(0)}px`})),i.add(Be(o=>{s.root.style.fontFamily=this._editorObs.getOption(49).read(o),s.root.style.fontSize=this._editorObs.getOption(52).read(o)+"px",s.root.style.lineHeight=this._editorObs.getOption(67).read(o)+"px"})),i.add(this._editorObs.createOverlayWidget({allowEditorOverflow:!1,minContentWidthInPx:Wa(0),position:Wa(null),domNode:s.root}))}),this._view.recomputeInitiallyAndOnChange(this._store)}};jq.ID="editor.contrib.placeholderText";let tL=jq;function vZe(n,e){return qL(n,(t,i)=>i===!0?!0:e(t))}var wZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},CZe=function(n,e){return function(t,i){e(t,i,n)}};class yZe{constructor(e,t,i){this.range=e,this.newLines=t,this.changes=i}}let R7=class extends U{constructor(e,t,i,s){super(),this._editor=e,this._edit=t,this._userPrompt=i,this._instantiationService=s,this._editorObs=gr(this._editor),this._elements=rt("div.inline-edits-widget",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px"}},[rt("div@editorContainer",{style:{position:"absolute",top:"0px",left:"0px",width:"500px",height:"500px"}},[rt("div.toolbar@toolbar",{style:{position:"absolute",top:"-25px",left:"0px"}}),rt("div.promptEditor@promptEditor",{style:{position:"absolute",top:"-25px",left:"80px",width:"300px",height:"22px"}}),rt("div.preview@editor",{style:{position:"absolute",top:"0px",left:"0px"}})]),dv("svg",{style:{overflow:"visible",pointerEvents:"none"}},[dv("defs",[dv("linearGradient",{id:"Gradient2",x1:"0",y1:"0",x2:"1",y2:"0"},[dv("stop",{offset:"0%",class:"gradient-stop"}),dv("stop",{offset:"100%",class:"gradient-stop"})])]),dv("path@path",{d:"",fill:"url(#Gradient2)"})])]),this._previewTextModel=this._register(this._instantiationService.createInstance(Cc,"",_o,Cc.DEFAULT_CREATION_OPTIONS,null)),this._setText=ye(r=>{const a=this._edit.read(r);a&&this._previewTextModel.setValue(a.newLines.join(`
`))}).recomputeInitiallyAndOnChange(this._store),this._promptTextModel=this._register(this._instantiationService.createInstance(Cc,"",_o,Cc.DEFAULT_CREATION_OPTIONS,null)),this._promptEditor=this._register(this._instantiationService.createInstance(Wl,this._elements.promptEditor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,placeholder:"Describe the change you want...",fontFamily:Ofe},{contributions:Up.getSomeEditorContributions([kl.ID,tL.ID,Ry.ID]),isSimpleWidget:!0},this._editor)),this._previewEditor=this._register(this._instantiationService.createInstance(Wl,this._elements.editor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0},{contributions:[]},this._editor)),this._previewEditorObs=gr(this._previewEditor),this._decorations=ye(this,r=>{var d;this._setText.read(r);const a=(d=this._edit.read(r))==null?void 0:d.changes;if(!a)return[];const l=[],c=[];if(a.length===1&&a[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return[];for(const u of a)if(u.original.isEmpty||l.push({range:u.original.toInclusiveRange(),options:Tk}),u.modified.isEmpty||c.push({range:u.modified.toInclusiveRange(),options:TP}),u.modified.isEmpty||u.original.isEmpty)u.original.isEmpty||l.push({range:u.original.toInclusiveRange(),options:L$}),u.modified.isEmpty||c.push({range:u.modified.toInclusiveRange(),options:x$});else for(const h of u.innerChanges||[])u.original.contains(h.originalRange.startLineNumber)&&l.push({range:h.originalRange,options:h.originalRange.isEmpty()?D$:Dy}),u.modified.contains(h.modifiedRange.startLineNumber)&&c.push({range:h.modifiedRange,options:h.modifiedRange.isEmpty()?k$:PP});return c}),this._layout1=ye(this,r=>{const a=this._editor.getModel(),l=this._edit.read(r);if(!l)return null;const c=l.range;let d=0;for(let f=c.startLineNumber;f<c.endLineNumberExclusive;f++){const g=a.getLineMaxColumn(f),m=this._editor.getOffsetForColumn(f,g);d=Math.max(d,m)}return{left:this._editor.getLayoutInfo().contentLeft+d}}),this._layout=ye(this,r=>{const a=this._edit.read(r);if(!a)return null;const l=a.range,c=this._editorObs.scrollLeft.read(r),d=this._layout1.read(r).left+20-c,u=this._editor.getTopForLineNumber(l.startLineNumber)-this._editorObs.scrollTop.read(r),h=this._editor.getTopForLineNumber(l.endLineNumberExclusive)-this._editorObs.scrollTop.read(r),f=new Cw(d,u),g=new Cw(d,h),m=h-u,_=50,b=this._editor.getOption(67)*a.newLines.length,v=m-b,w=new Cw(d+_,u+v/2),y=new Cw(d+_,h-v/2);return{topCode:f,bottomCode:g,codeHeight:m,topEdit:w,bottomEdit:y,editHeight:b}});const o=ye(this,r=>this._edit.read(r)!==void 0||this._userPrompt.read(r)!==void 0);this._register(Rh(this._elements.root,{display:ye(this,r=>o.read(r)?"block":"none")})),this._register(gw(this._editor.getDomNode(),this._elements.root)),this._register(gr(e).createOverlayWidget({domNode:this._elements.root,position:Wa(null),allowEditorOverflow:!1,minContentWidthInPx:ye(r=>{var c;const a=(c=this._layout1.read(r))==null?void 0:c.left;if(a===void 0)return 0;const l=this._previewEditorObs.contentWidth.read(r);return a+l})})),this._previewEditor.setModel(this._previewTextModel),this._register(this._previewEditorObs.setDecorations(this._decorations)),this._register(Be(r=>{const a=this._layout.read(r);if(!a)return;const{topCode:l,bottomCode:c,topEdit:d,bottomEdit:u,editHeight:h}=a,f=10,g=0,m=40,_=new xZe().moveTo(l).lineTo(l.deltaX(f)).curveTo(l.deltaX(f+m),d.deltaX(-m-g),d.deltaX(-g)).lineTo(d).lineTo(u).lineTo(u.deltaX(-g)).curveTo(u.deltaX(-m-g),c.deltaX(f+m),c.deltaX(f)).lineTo(c).build();this._elements.path.setAttribute("d",_),this._elements.editorContainer.style.top=`${d.y}px`,this._elements.editorContainer.style.left=`${d.x}px`,this._elements.editorContainer.style.height=`${h}px`;const b=this._previewEditorObs.contentWidth.read(r);this._previewEditor.layout({height:h,width:b})})),this._promptEditor.setModel(this._promptTextModel),this._promptEditor.layout(),this._register(kZe(SZe(this._userPrompt,r=>r??"",r=>r),gr(this._promptEditor).value)),this._register(Be(r=>{const a=gr(this._promptEditor).isFocused.read(r);this._elements.root.classList.toggle("focused",a)}))}};R7=wZe([CZe(3,ke)],R7);function SZe(n,e,t){return zL(void 0,i=>e(n.read(i)),(i,s)=>n.set(t(i),s))}class Cw{constructor(e,t){this.x=e,this.y=t}deltaX(e){return new Cw(this.x+e,this.y)}}class xZe{constructor(){this._data=""}moveTo(e){return this._data+=`M ${e.x} ${e.y} `,this}lineTo(e){return this._data+=`L ${e.x} ${e.y} `,this}curveTo(e,t,i){return this._data+=`C ${e.x} ${e.y} ${t.x} ${t.y} ${i.x} ${i.y} `,this}build(){return this._data}}function kZe(n,e){const t=new Q;return t.add(Be(i=>{const s=n.read(i);e.set(s,void 0)})),t.add(Be(i=>{const s=e.read(i);n.set(s,void 0)})),t}var LZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},L5=function(n,e){return function(t,i){e(t,i,n)}},j0,B_;let A7=(B_=class extends U{static _createUniqueUri(){return Le.from({scheme:"inline-edits",path:new Date().toString()+String(j0._modelId++)})}constructor(e,t,i,s,o,r,a){super(),this.textModel=e,this._textModelVersionId=t,this._selection=i,this._debounceValue=s,this.languageFeaturesService=o,this._diffProviderFactoryService=r,this._modelService=a,this._forceUpdateExplicitlySignal=d1(this),this._selectedInlineCompletionId=it(this,void 0),this._isActive=it(this,!1),this._originalModel=Us(()=>this._modelService.createModel("",null,j0._createUniqueUri())).keepObserved(this._store),this._modifiedModel=Us(()=>this._modelService.createModel("",null,j0._createUniqueUri())).keepObserved(this._store),this._pinnedRange=new EZe(this.textModel,this._textModelVersionId),this.isPinned=this._pinnedRange.range.map(l=>!!l),this.userPrompt=it(this,void 0),this.inlineEdit=ye(this,l=>{var c,d;return(d=(c=this._inlineEdit.read(l))==null?void 0:c.promiseResult.read(l))==null?void 0:d.data}),this._inlineEdit=ye(this,l=>{const c=this.selectedInlineEdit.read(l);if(!c)return;const d=c.inlineCompletion.range;if(c.inlineCompletion.insertText.trim()==="")return;let u=c.inlineCompletion.insertText.split(/\r\n|\r|\n/);function h(_){var v;const b=((v=_[0].match(/^\s*/))==null?void 0:v[0])??"";return _.map(w=>w.replace(new RegExp("^"+b),""))}u=h(u);let g=this.textModel.getValueInRange(d).split(/\r\n|\r|\n/);g=h(g),this._originalModel.get().setValue(g.join(`
`)),this._modifiedModel.get().setValue(u.join(`
`));const m=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return VA.fromFn(async()=>{const _=await m.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Ye.None);if(!_.identical)return new yZe($e.fromRangeInclusive(d),h(u),_.changes)})}),this._fetchStore=this._register(new Q),this._inlineEditsFetchResult=lk(this,void 0),this._inlineEdits=Zr({owner:this,equalsFn:PT},l=>{var c;return((c=this._inlineEditsFetchResult.read(l))==null?void 0:c.completions.map(d=>new DZe(d)))??[]}),this._fetchInlineEditsPromise=Tue({owner:this,createEmptyChangeSummary:()=>({inlineCompletionTriggerKind:Lc.Automatic}),handleChange:(l,c)=>(l.didChange(this._forceUpdateExplicitlySignal)&&(c.inlineCompletionTriggerKind=Lc.Explicit),!0)},async(l,c)=>{this._fetchStore.clear(),this._forceUpdateExplicitlySignal.read(l),this._textModelVersionId.read(l);function d(m,_){return _(m)}const u=this._pinnedRange.range.read(l)??d(this._selection.read(l),m=>m.isEmpty()?void 0:m);if(!u){this._inlineEditsFetchResult.set(void 0,void 0),this.userPrompt.set(void 0,void 0);return}const h={triggerKind:c.inlineCompletionTriggerKind,selectedSuggestionInfo:void 0,userPrompt:this.userPrompt.read(l)},f=lW(this._fetchStore);await Ih(200,f);const g=await ape(this.languageFeaturesService.inlineCompletionsProvider,u,this.textModel,h,f);f.isCancellationRequested||this._inlineEditsFetchResult.set(g,void 0)}),this._filteredInlineEditItems=Zr({owner:this,equalsFn:TT()},l=>this._inlineEdits.read(l)),this.selectedInlineCompletionIndex=ye(this,l=>{const c=this._selectedInlineCompletionId.read(l),d=this._filteredInlineEditItems.read(l),u=this._selectedInlineCompletionId===void 0?-1:d.findIndex(h=>h.semanticId===c);return u===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):u}),this.selectedInlineEdit=ye(this,l=>{const c=this._filteredInlineEditItems.read(l),d=this.selectedInlineCompletionIndex.read(l);return c[d]}),this._register(u1(this._fetchInlineEditsPromise))}async triggerExplicitly(e){_b(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineEditsPromise.get()}stop(e){_b(e,t=>{this.userPrompt.set(void 0,t),this._isActive.set(!1,t),this._inlineEditsFetchResult.set(void 0,t),this._pinnedRange.setRange(void 0,t)})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineEditItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){if(e.getModel()!==this.textModel)throw new Dt;const t=this.selectedInlineEdit.get();t&&(e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[t.inlineCompletion.toSingleTextEdit().toSingleEditOperation()]),this.stop())}},j0=B_,B_._modelId=0,B_);A7=j0=LZe([L5(4,ve),L5(5,tD),L5(6,gi)],A7);class DZe{constructor(e){this.inlineCompletion=e,this.semanticId=this.inlineCompletion.hash()}}class EZe extends U{constructor(e,t){super(),this._textModel=e,this._versionId=t,this._decorations=it(this,[]),this.range=ye(this,i=>{this._versionId.read(i);const s=this._decorations.read(i)[0];return s?this._textModel.getDecorationRange(s)??null:null}),this._register(xe(()=>{this._textModel.deltaDecorations(this._decorations.get(),[])}))}setRange(e,t){this._decorations.set(this._textModel.deltaDecorations(this._decorations.get(),e?[{range:e,options:{description:"trackedRange"}}]:[]),t)}}var NZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},u0=function(n,e){return function(t,i){e(t,i,n)}},O7,H_;let Wh=(H_=class extends U{static get(e){return e.getContribution(O7.ID)}constructor(e,t,i,s,o,r){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._debounceService=s,this._languageFeaturesService=o,this._configurationService=r,this._enabled=G8e("editor.inlineEdits.enabled",!1,this._configurationService),this._editorObs=gr(this.editor),this._selection=ye(this,a=>this._editorObs.cursorSelection.read(a)??new Ce(1,1,1,1)),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineEditsDebounce",{min:50,max:50}),this.model=Us(this,a=>{if(!this._enabled.read(a)||this._editorObs.isReadonly.read(a))return;const l=this._editorObs.model.read(a);return l?this._instantiationService.createInstance(dr(A7,a),l,this._editorObs.versionId,this._selection,this._debounceValue):void 0}),this._hadInlineEdit=qL(this,(a,l)=>{var c;return l||((c=this.model.read(a))==null?void 0:c.inlineEdit.read(a))!==void 0}),this._widget=Us(this,a=>{if(this._hadInlineEdit.read(a))return this._instantiationService.createInstance(dr(R7,a),this.editor,this.model.map((l,c)=>l==null?void 0:l.inlineEdit.read(c)),IZe(l=>{var c;return((c=this.model.read(l))==null?void 0:c.userPrompt)??it("empty","")}))}),this._register(ec(Vy,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.inlineEdit.read(a))})),this._register(ec(bZe,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.isPinned.read(a))})),this.model.recomputeInitiallyAndOnChange(this._store),this._widget.recomputeInitiallyAndOnChange(this._store)}},O7=H_,H_.ID="editor.contrib.inlineEditsController",H_);Wh=O7=NZe([u0(1,ke),u0(2,Ae),u0(3,_a),u0(4,ve),u0(5,nt)],Wh);function IZe(n){return zL(void 0,e=>n(e).read(e),(e,t)=>{n(void 0).set(e,t)})}function fD(n){return{label:n.value,alias:n.original}}const sR=class sR extends _e{constructor(){super({id:sR.ID,...fD(Fe("action.inlineEdits.showNext","Show Next Inline Edit")),precondition:X.and(I.writable,Vy),kbOpts:{weight:100,primary:606}})}async run(e,t){var s;const i=Wh.get(t);(s=i==null?void 0:i.model.get())==null||s.next()}};sR.ID=_Ze;let F7=sR;const oR=class oR extends _e{constructor(){super({id:oR.ID,...fD(Fe("action.inlineEdits.showPrevious","Show Previous Inline Edit")),precondition:X.and(I.writable,Vy),kbOpts:{weight:100,primary:604}})}async run(e,t){var s;const i=Wh.get(t);(s=i==null?void 0:i.model.get())==null||s.previous()}};oR.ID=pZe;let W7=oR;class TZe extends _e{constructor(){super({id:"editor.action.inlineEdits.trigger",...fD(Fe("action.inlineEdits.trigger","Trigger Inline Edit")),precondition:I.writable})}async run(e,t){const i=Wh.get(t);await Iue(async s=>{var o;await((o=i==null?void 0:i.model.get())==null?void 0:o.triggerExplicitly(s))})}}class PZe extends _e{constructor(){super({id:mZe,...fD(Fe("action.inlineEdits.accept","Accept Inline Edit")),precondition:Vy,menuOpts:{menuId:we.InlineEditsActions,title:p("inlineEditsActions","Accept Inline Edit"),group:"primary",order:1,icon:ae.check},kbOpts:{primary:2058,weight:2e4,kbExpr:Vy}})}async run(e,t){var s;t instanceof Wl&&(t=t.getParentEditor());const i=Wh.get(t);i&&((s=i.model.get())==null||s.accept(i.editor),i.editor.focus())}}const rR=class rR extends _e{constructor(){super({id:rR.ID,...fD(Fe("action.inlineEdits.hide","Hide Inline Edit")),precondition:Vy,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=Wh.get(t);Ti(s=>{var o;(o=i==null?void 0:i.model.get())==null||o.stop(s)})}};rR.ID="editor.action.inlineEdits.hide";let B7=rR;wt(Wh.ID,Wh,3);se(TZe);se(F7);se(W7);se(PZe);se(B7);const Pb={Visible:new me("parameterHintsVisible",!1),MultipleSignatures:new me("parameterHintsMultipleSignatures",!1)};async function Lpe(n,e,t,i,s){const o=n.ordered(e);for(const r of o)try{const a=await r.provideSignatureHelp(e,t,s,i);if(a)return a}catch(a){en(a)}}bt.registerCommand("_executeSignatureHelpProvider",async(n,...e)=>{const[t,i,s]=e;xt(Le.isUri(t)),xt(H.isIPosition(i)),xt(typeof s=="string"||!s);const o=n.get(ve),r=await n.get(Zo).createModelReference(t);try{const a=await Lpe(o.signatureHelpProvider,r.object.textEditorModel,H.lift(i),{triggerKind:Ud.Invoke,isRetrigger:!1,triggerCharacter:s},Ye.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}});var _f;(function(n){n.Default={type:0};class e{constructor(s,o){this.request=s,this.previouslyActiveHints=o,this.type=2}}n.Pending=e;class t{constructor(s){this.hints=s,this.type=1}}n.Active=t})(_f||(_f={}));const aR=class aR extends U{constructor(e,t,i=aR.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new j),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=_f.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new jn),this.triggerChars=new cT,this.retriggerChars=new cT,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new qa(i),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(s=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(s=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(s=>this.onCursorChange(s))),this._register(this.editor.onDidChangeModelContent(s=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(s=>this.onDidType(s))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=_f.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const s=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(s),t).catch(He)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e===e-1,s=this.editor.getOption(86).cycle;if((e<2||i)&&!s){this.cancel();return}this.updateActiveSignature(i&&s?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t===0,s=this.editor.getOption(86).cycle;if((e<2||i)&&!s){this.cancel();return}this.updateActiveSignature(i&&s?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new _f.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){const t=this.state.type===1||this.state.type===2,i=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const s=this._pendingTriggers.reduce(MZe);this._pendingTriggers=[];const o={triggerKind:s.triggerKind,triggerCharacter:s.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new _f.Pending(On(l=>Lpe(this.providers,r,a,o,l)),i);try{const l=await this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new _f.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=_f.Default),He(l),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const i of t.signatureHelpTriggerCharacters||[])if(i.length){const s=i.charCodeAt(0);this.triggerChars.add(s),this.retriggerChars.add(s)}for(const i of t.signatureHelpRetriggerCharacters||[])i.length&&this.retriggerChars.add(i.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:Ud.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Ud.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Ud.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}};aR.DEFAULT_DELAY=120;let H7=aR;function MZe(n,e){switch(e.triggerKind){case Ud.Invoke:return e;case Ud.ContentChange:return n;case Ud.TriggerCharacter:default:return e}}var RZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ZE=function(n,e){return function(t,i){e(t,i,n)}},j7;const Or=ce,AZe=mi("parameter-hints-next",ae.chevronDown,p("parameterHintsNextIcon","Icon for show next parameter hint.")),OZe=mi("parameter-hints-previous",ae.chevronUp,p("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var j_;let V7=(j_=class extends U{constructor(e,t,i,s,o,r){super(),this.editor=e,this.model=t,this.telemetryService=r,this.renderDisposeables=this._register(new Q),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Mh({editor:e},o,s)),this.keyVisible=Pb.Visible.bindTo(i),this.keyMultipleSignatures=Pb.MultipleSignatures.bindTo(i)}createParameterHintDOMNodes(){const e=Or(".editor-widget.parameter-hints-widget"),t=ne(e,Or(".phwrapper"));t.tabIndex=-1;const i=ne(t,Or(".controls")),s=ne(i,Or(".button"+Re.asCSSSelector(OZe))),o=ne(i,Or(".overloads")),r=ne(i,Or(".button"+Re.asCSSSelector(AZe)));this._register(G(s,"click",h=>{gt.stop(h),this.previous()})),this._register(G(r,"click",h=>{gt.stop(h),this.next()}));const a=Or(".body"),l=new WL(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=ne(a,Or(".signature")),d=ne(a,Or(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:o,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(h=>{this.visible&&this.editor.layoutContentWidget(this)}));const u=()=>{if(!this.domNodes)return;const h=this.editor.getOption(50),f=this.domNodes.element;f.style.fontSize=`${h.fontSize}px`,f.style.lineHeight=`${h.lineHeight/h.fontSize}`,f.style.setProperty("--vscode-parameterHintsWidget-editorFontFamily",h.fontFamily),f.style.setProperty("--vscode-parameterHintsWidget-editorFontFamilyDefault",po.fontFamily)};u(),this._register(ue.chain(this.editor.onDidChangeConfiguration.bind(this.editor),h=>h.filter(f=>f.hasChanged(50)))(u)),this._register(this.editor.onDidLayoutChange(h=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)==null||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)==null||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){if(this.renderDisposeables.clear(),!this.domNodes)return;const t=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",t),this.keyMultipleSignatures.set(t),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const i=e.signatures[e.activeSignature];if(!i)return;const s=ne(this.domNodes.signature,Or(".code")),o=i.parameters.length>0,r=i.activeParameter??e.activeParameter;if(o)this.renderParameters(s,i,r);else{const c=ne(s,Or("span"));c.textContent=i.label}const a=i.parameters[r];if(a!=null&&a.documentation){const c=Or("span.documentation");if(typeof a.documentation=="string")c.textContent=a.documentation;else{const d=this.renderMarkdownDocs(a.documentation);c.appendChild(d.element)}ne(this.domNodes.docs,Or("p",{},c))}if(i.documentation!==void 0)if(typeof i.documentation=="string")ne(this.domNodes.docs,Or("p",{},i.documentation));else{const c=this.renderMarkdownDocs(i.documentation);ne(this.domNodes.docs,c.element)}const l=this.hasDocs(i,a);if(this.domNodes.signature.classList.toggle("has-docs",l),this.domNodes.docs.classList.toggle("empty",!l),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,a){let c="";const d=i.parameters[r];Array.isArray(d.label)?c=i.label.substring(d.label[0],d.label[1]):c=d.label,d.documentation&&(c+=typeof d.documentation=="string"?`, ${d.documentation}`:`, ${d.documentation.value}`),i.documentation&&(c+=typeof i.documentation=="string"?`, ${i.documentation}`:`, ${i.documentation.value}`),this.announcedLabel!==c&&(yo(p("hint","{0}, hint",c)),this.announcedLabel=c)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=new Qn,i=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var o;(o=this.domNodes)==null||o.scrollbar.scanDomNode()}}));i.element.classList.add("markdown-docs");const s=t.elapsed();return s>300&&this.telemetryService.publicLog2("parameterHints.parseMarkdown",{renderDuration:s}),i}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&zf(t.documentation).length>0||t&&typeof t.documentation=="object"&&zf(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&zf(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&zf(e.documentation.value).length>0)}renderParameters(e,t,i){const[s,o]=this.getParameterLabelOffsets(t,i),r=document.createElement("span");r.textContent=t.label.substring(0,s);const a=document.createElement("span");a.textContent=t.label.substring(s,o),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(o),ne(e,r,a,l)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const s=new RegExp(`(\\W|^)${ua(i.label)}(?=\\W|$)`,"g");s.test(e.label);const o=s.lastIndex-i.label.length;return o>=0?[o,s.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return j7.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}},j7=j_,j_.ID="editor.widget.parameterHintsWidget",j_);V7=j7=RZe([ZE(2,Ae),ZE(3,Xo),ZE(4,Di),ZE(5,Ps)],V7);T("editorHoverWidget.highlightForeground",sw,p("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var FZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Vie=function(n,e){return function(t,i){e(t,i,n)}},z7,V_;let zy=(V_=class extends U{static get(e){return e.getContribution(z7.ID)}constructor(e,t,i){super(),this.editor=e,this.model=this._register(new H7(e,i.signatureHelpProvider)),this._register(this.model.onChangedHints(s=>{var o;s?(this.widget.value.show(),this.widget.value.render(s)):(o=this.widget.rawValue)==null||o.hide()})),this.widget=new Oc(()=>this._register(t.createInstance(V7,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)==null||e.previous()}next(){var e;(e=this.widget.rawValue)==null||e.next()}trigger(e){this.model.trigger(e,0)}},z7=V_,V_.ID="editor.controller.parameterHints",V_);zy=z7=FZe([Vie(1,ke),Vie(2,ve)],zy);class WZe extends _e{constructor(){super({id:"editor.action.triggerParameterHints",label:p("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:I.hasSignatureHelpProvider,kbOpts:{kbExpr:I.editorTextFocus,primary:3082,weight:100}})}run(e,t){const i=zy.get(t);i==null||i.trigger({triggerKind:Ud.Invoke})}}wt(zy.ID,zy,2);se(WZe);const Cq=175,yq=xn.bindToContribution(zy.get);fe(new yq({id:"closeParameterHints",precondition:Pb.Visible,handler:n=>n.cancel(),kbOpts:{weight:Cq,kbExpr:I.focus,primary:9,secondary:[1033]}}));fe(new yq({id:"showPrevParameterHint",precondition:X.and(Pb.Visible,Pb.MultipleSignatures),handler:n=>n.previous(),kbOpts:{weight:Cq,kbExpr:I.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));fe(new yq({id:"showNextParameterHint",precondition:X.and(Pb.Visible,Pb.MultipleSignatures),handler:n=>n.next(),kbOpts:{weight:Cq,kbExpr:I.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var BZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},HZe=function(n,e){return function(t,i){e(t,i,n)}};class jZe{constructor(e){this.instantiationService=e}init(...e){}}function VZe(n,e){return class extends e{constructor(){super(...arguments),this._autorun=void 0}init(...i){this._autorun=zo((s,o)=>{const r=dr(n(),s);o.add(this.instantiationService.createInstance(r,...i))})}dispose(){var i;(i=this._autorun)==null||i.dispose()}}}function zZe(n){return cO()?VZe(n,U7):n()}let U7=class extends jZe{constructor(e,t){super(t),this.init(e)}};U7=BZe([HZe(1,ke)],U7);wt(tL.ID,zZe(()=>tL),0);T("editor.placeholder.foreground",FOe,p("placeholderForeground","Foreground color of the placeholder text in the editor."));var UZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},QE=function(n,e){return function(t,i){e(t,i,n)}};const x1=new me("renameInputVisible",!1,p("renameInputVisible","Whether the rename input widget is visible"));new me("renameInputFocused",!1,p("renameInputFocused","Whether the rename input widget is focused"));let $7=class{constructor(e,t,i,s,o,r){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=s,this._logService=r,this.allowEditorOverflow=!0,this._disposables=new Q,this._visibleContextKey=x1.bindTo(o),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new Qn,this._inputWithButton=new $Ze,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(50)&&this._updateFont()})),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new Sq(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange(()=>{var e,t,i;((e=this._renameCandidateListView)==null?void 0:e.focusedCandidate)!==void 0&&(this._isEditingRenameCandidate=!0),this._timeBeforeFirstInputFieldEdit??(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),((t=this._renameCandidateProvidersCts)==null?void 0:t.token.isCancellationRequested)===!1&&this._renameCandidateProvidersCts.cancel(),(i=this._renameCandidateListView)==null||i.clearFocus()})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){if(!this._domNode)return;const t=e.getColor(o1),i=e.getColor(Ude);this._domNode.style.backgroundColor=String(e.getColor(ia)??""),this._domNode.style.boxShadow=t?` 0 0 8px 2px ${t}`:"",this._domNode.style.border=i?`1px solid ${i}`:"",this._domNode.style.color=String(e.getColor(Kde)??"");const s=e.getColor(Gde);this._inputWithButton.domNode.style.backgroundColor=String(e.getColor(sH)??""),this._inputWithButton.input.style.backgroundColor=String(e.getColor(sH)??""),this._inputWithButton.domNode.style.borderWidth=s?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=s?"solid":"none",this._inputWithButton.domNode.style.borderColor=(s==null?void 0:s.toString())??"none"}_updateFont(){if(this._domNode===void 0)return;xt(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);const e=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return e*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;const e=Gg(this.getDomNode().ownerDocument.body),t=Qi(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;const s=this._editor.getOption(67),{totalHeight:o}=iL.getLayoutInfo({lineHeight:s}),r=this._nPxAvailableBelow>o*6?[2,1]:[1,2];return{position:this._position,preference:r}}beforeRender(){var i,s;const[e,t]=this._acceptKeybindings;return this._label.innerText=p({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(i=this._keybindingService.lookupKeybinding(e))==null?void 0:i.getLabel(),(s=this._keybindingService.lookupKeybinding(t))==null?void 0:s.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(e===null){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;xt(this._renameCandidateListView),xt(this._nPxAvailableAbove!==void 0),xt(this._nPxAvailableBelow!==void 0);const t=Xu(this._inputWithButton.domNode),i=Xu(this._label);let s;e===2?s=this._nPxAvailableBelow:s=this._nPxAvailableAbove,this._renameCandidateListView.layout({height:s-i-t,width:lr(this._inputWithButton.domNode)})}acceptInput(e){var t;this._trace("invoking acceptInput"),(t=this._currentAcceptInput)==null||t.call(this,e)}cancelInput(e,t){var i;(i=this._currentCancelInput)==null||i.call(this,e)}focusNextRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusNext()||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusPrevious()||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,i,s,o){const{start:r,end:a}=this._getSelection(e,t);this._renameCts=o;const l=new Q;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,s===void 0?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=s,this._requestRenameCandidates(t,!1),l.add(G(this._inputWithButton.button,"click",()=>this._requestRenameCandidates(t,!0))),l.add(G(this._inputWithButton.button,le.KEY_DOWN,d=>{const u=new ti(d);(u.equals(3)||u.equals(10))&&(u.stopPropagation(),u.preventDefault(),this._requestRenameCandidates(t,!0))}))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",i),this._position=new H(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",r.toString()),this._inputWithButton.input.setAttribute("selectionEnd",a.toString()),this._inputWithButton.input.size=Math.max((e.endColumn-e.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset(),l.add(xe(()=>{this._renameCts=void 0,o.dispose(!0)})),l.add(xe(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})),l.add(xe(()=>this._candidates.clear()));const c=new Jy;return c.p.finally(()=>{l.dispose(),this._hide()}),this._currentCancelInput=d=>{var u;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,(u=this._renameCandidateListView)==null||u.clearCandidates(),c.complete(d),!0},this._currentAcceptInput=d=>{this._trace("invoking _currentAcceptInput"),xt(this._renameCandidateListView!==void 0);const u=this._renameCandidateListView.nCandidates;let h,f;const g=this._renameCandidateListView.focusedCandidate;if(g!==void 0?(this._trace("using new name from renameSuggestion"),h=g,f={k:"renameSuggestion"}):(this._trace("using new name from inputField"),h=this._inputWithButton.input.value,f=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),h===t||h.trim().length===0){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),c.complete({newName:h,wantsPreview:i&&d,stats:{source:f,nRenameSuggestions:u,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})},l.add(o.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),l.add(this._editor.onDidBlurEditorWidget(()=>{var d;return this.cancelInput(!((d=this._domNode)!=null&&d.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")})),this._show(),c.p}_requestRenameCandidates(e,t){if(this._requestRenameCandidatesOnce!==void 0&&(this._renameCandidateProvidersCts!==void 0&&this._renameCandidateProvidersCts.dispose(!0),xt(this._renameCts),this._inputWithButton.buttonState!=="stop")){this._renameCandidateProvidersCts=new Pi;const i=t?Wx.Invoke:Wx.Automatic,s=this._requestRenameCandidatesOnce(i,this._renameCandidateProvidersCts.token);if(s.length===0){this._inputWithButton.setSparkleButton();return}t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(s,e,this._renameCts.token)}}_getSelection(e,t){xt(this._editor.hasModel());const i=this._editor.getSelection();let s=0,o=t.length;return!E.isEmpty(i)&&!E.spansMultipleLines(i)&&E.containsRange(e,i)&&(s=Math.max(0,i.startColumn-e.startColumn),o=Math.min(e.endColumn,i.endColumn)-e.startColumn),{start:s,end:o}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(e,t,i){const s=(...c)=>this._trace("_updateRenameCandidates",...c);s("start");const o=await ML(Promise.allSettled(e),i);if(this._inputWithButton.setSparkleButton(),o===void 0){s("returning early - received updateRenameCandidates results - undefined");return}const r=o.flatMap(c=>c.status==="fulfilled"&&zd(c.value)?c.value:[]);s(`received updateRenameCandidates results - total (unfiltered) ${r.length} candidates.`);const a=Lh(r,c=>c.newSymbolName);s(`distinct candidates - ${a.length} candidates.`);const l=a.filter(({newSymbolName:c})=>c.trim().length>0&&c!==this._inputWithButton.input.value&&c!==t&&!this._candidates.has(c));if(s(`valid distinct candidates - ${r.length} candidates.`),l.forEach(c=>this._candidates.add(c.newSymbolName)),l.length<1){s("returning early - no valid distinct candidates");return}s("setting candidates"),this._renameCandidateListView.setCandidates(l),s("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const e=this._editor.getVisibleRanges();let t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(...e){this._logService.trace("RenameWidget",...e)}};$7=UZe([QE(2,kn),QE(3,Ft),QE(4,Ae),QE(5,ws)],$7);class Sq{constructor(e,t){this._disposables=new Q,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",e.appendChild(this._listContainer),this._listWidget=Sq._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus(i=>{i.elements.length===1&&t.onFocusChange(i.elements[0].newSymbolName)},this._disposables),this._listWidget.onDidChangeSelection(i=>{i.elements.length===1&&t.onSelectionChange()},this._disposables),this._disposables.add(this._listWidget.onDidBlur(i=>{this._listWidget.setFocus([])})),this._listWidget.style(Ub({listInactiveFocusForeground:ek,listInactiveFocusBackground:tk}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);const t=this._pickListHeight(this._listWidget.length),i=this._pickListWidth(e);this._listWidget.layout(t,i),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${i}px`,Xd(p("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;const e=this._listWidget.getSelectedElements()[0];if(e!==void 0)return e.newSymbolName;const t=this._listWidget.getFocusedElements()[0];if(t!==void 0)return t.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}focusPrevious(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0){this._listWidget.focusLast();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}else{if(e[0]===0)return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:e}=iL.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){const t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(e){const t=Math.ceil(Math.max(...e.map(s=>s.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,i){const s=new class{getTemplateId(r){return"candidate"}getHeight(r){return t}},o=new class{constructor(){this.templateId="candidate"}renderTemplate(r){return new iL(r,i)}renderElement(r,a,l){l.populate(r)}disposeTemplate(r){r.dispose()}};return new va("NewSymbolNameCandidates",e,s,[o],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class $Ze{constructor(){this._onDidInputChange=new j,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new Q}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",p("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=p("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=p("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=$c().setupManagedHover(ko("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(G(this.input,le.INPUT,()=>this._onDidInputChange.fire())),this._disposables.add(G(this.input,le.KEY_DOWN,e=>{const t=new ti(e);(t.keyCode===15||t.keyCode===17)&&this._onDidInputChange.fire()})),this._disposables.add(G(this.input,le.CLICK,()=>this._onDidInputChange.fire())),this._disposables.add(G(this.input,le.FOCUS,()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"})),this._disposables.add(G(this.input,le.BLUR,()=>{this.domNode.style.outline="none"}))),this._domNode}get input(){return xt(this._inputNode),this._inputNode}get button(){return xt(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){var e;this._buttonState="sparkle",this._sparkleIcon??(this._sparkleIcon=gb(ae.sparkle)),os(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){var e;this._buttonState="stop",this._stopIcon??(this._stopIcon=gb(ae.primitiveSquare)),os(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}}const ox=class ox{constructor(e,t){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${t.lineHeight}px`,this._domNode.style.padding=`${ox._PADDING}px`;const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.width=i.style.height=`${t.lineHeight*.8}px`,this._domNode.appendChild(i),this._icon=gb(ae.sparkle),this._icon.style.display="none",i.appendChild(this._icon),this._label=document.createElement("div"),as(this._label,t),this._domNode.appendChild(this._label),e.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){var i;const t=!!((i=e.tags)!=null&&i.includes(mW.AIGenerated));this._icon.style.display=t?"inherit":"none"}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo({lineHeight:e}){return{totalHeight:e+ox._PADDING*2}}dispose(){}};ox._PADDING=2;let iL=ox;var qZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},rf=function(n,e){return function(t,i){e(t,i,n)}},q7;class xq{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const s=this._providers[this._providerRenameIdx];if(!s.resolveRenameLocation)break;const o=await s.resolveRenameLocation(this.model,this.position,e);if(o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}this._providerRenameIdx=0;const i=this.model.getWordAtPosition(this.position);return i?{range:new E(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:E.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,i,s){const o=this._providers[t];if(!o)return{edits:[],rejectReason:i.join(`
`)};const r=await o.provideRenameEdits(this.model,this.position,e,s);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,i.concat(r.rejectReason),s)}else return this._provideRenameEdits(e,t+1,i.concat(p("no result","No result.")),s);return r}}async function KZe(n,e,t,i){const s=new xq(e,t,n),o=await s.resolveRenameLocation(Ye.None);return o!=null&&o.rejectReason?{edits:[],rejectReason:o.rejectReason}:s.provideRenameEdits(i,Ye.None)}var z_;let am=(z_=class{static get(e){return e.getContribution(q7.ID)}constructor(e,t,i,s,o,r,a,l,c){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=s,this._progressService=o,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._telemetryService=c,this._disposableStore=new Q,this._cts=new Pi,this._renameWidget=this._disposableStore.add(this._instaService.createInstance($7,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var g,m;const e=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new Pi,!this.editor.hasModel()){e("editor has no model");return}const t=this.editor.getPosition(),i=new xq(this.editor.getModel(),t,this._languageFeaturesService.renameProvider);if(!i.hasProvider()){e("skeleton has no provider");return}const s=new nm(this.editor,5,void 0,this._cts.token);let o;try{e("resolving rename location");const _=i.resolveRenameLocation(s.token);this._progressService.showWhile(_,250),o=await _,e("resolved rename location")}catch(_){_ instanceof Pl?e("resolve rename location cancelled",JSON.stringify(_,null,"	")):(e("resolve rename location failed",_ instanceof Error?_:JSON.stringify(_,null,"	")),(typeof _=="string"||Tc(_))&&((g=wr.get(this.editor))==null||g.showMessage(_||p("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),t)));return}finally{s.dispose()}if(!o){e("returning early - no loc");return}if(o.rejectReason){e(`returning early - rejected with reason: ${o.rejectReason}`,o.rejectReason),(m=wr.get(this.editor))==null||m.showMessage(o.rejectReason,t);return}if(s.token.isCancellationRequested){e("returning early - cts1 cancelled");return}const r=new nm(this.editor,5,o.range,this._cts.token),a=this.editor.getModel(),l=this._languageFeaturesService.newSymbolNamesProvider.all(a),c=await Promise.all(l.map(async _=>[_,await _.supportsAutomaticNewSymbolNamesTriggerKind??!1])),d=(_,b)=>{let v=c.slice();return _===Wx.Automatic&&(v=v.filter(([w,y])=>y)),v.map(([w])=>w.provideNewSymbolNames(a,o.range,_,b))};e("creating rename input field and awaiting its result");const u=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),h=await this._renameWidget.getInput(o.range,o.text,u,l.length>0?d:void 0,r);if(e("received response from rename input field"),l.length>0&&this._reportTelemetry(l.length,a.getLanguageId(),h),typeof h=="boolean"){e(`returning early - rename input field response - ${h}`),h&&this.editor.focus(),r.dispose();return}this.editor.focus(),e("requesting rename edits");const f=ML(i.provideRenameEdits(h.newName,r.token),r.token).then(async _=>{if(!_){e("returning early - no rename edits result");return}if(!this.editor.hasModel()){e("returning early - no model after rename edits are provided");return}if(_.rejectReason){e(`returning early - rejected with reason: ${_.rejectReason}`),this._notificationService.info(_.rejectReason);return}this.editor.setSelection(E.fromPositions(this.editor.getSelection().getPosition())),e("applying edits"),this._bulkEditService.apply(_,{editor:this.editor,showPreview:h.wantsPreview,label:p("label","Renaming '{0}' to '{1}'",o==null?void 0:o.text,h.newName),code:"undoredo.rename",quotableLabel:p("quotableLabel","Renaming {0} to {1}",o==null?void 0:o.text,h.newName),respectAutoSaveConfig:!0}).then(b=>{e("edits applied"),b.ariaSummary&&yo(p("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,h.newName,b.ariaSummary))}).catch(b=>{e(`error when applying edits ${JSON.stringify(b,null,"	")}`),this._notificationService.error(p("rename.failedApply","Rename failed to apply edits")),this._logService.error(b)})},_=>{e("error when providing rename edits",JSON.stringify(_,null,"	")),this._notificationService.error(p("rename.failed","Rename failed to compute edits")),this._logService.error(_)}).finally(()=>{r.dispose()});return e("returning rename operation"),this._progressService.showWhile(f,250),f}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,i){const s=typeof i=="boolean"?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:i.stats.source.k,nRenameSuggestions:i.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:i.stats.timeBeforeFirstInputFieldEdit,wantsPreview:i.wantsPreview,nRenameSuggestionsInvocations:i.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:i.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",s)}},q7=z_,z_.ID="editor.contrib.renameController",z_);am=q7=qZe([rf(1,ke),rf(2,rn),rf(3,jL),rf(4,pm),rf(5,ws),rf(6,yA),rf(7,ve),rf(8,Ps)],am);class GZe extends _e{constructor(){super({id:"editor.action.rename",label:p("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:X.and(I.writable,I.hasRenameProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(kt),[s,o]=Array.isArray(t)&&t||[void 0,void 0];return Le.isUri(s)&&H.isIPosition(o)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},He):super.runCommand(e,t)}run(e,t){const i=e.get(ws),s=am.get(t);return s?(i.trace("[RenameAction] got controller, running..."),s.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}wt(am.ID,am,4);se(GZe);const kq=xn.bindToContribution(am.get);fe(new kq({id:"acceptRenameInput",precondition:x1,handler:n=>n.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:X.and(I.focus,X.not("isComposing")),primary:3}}));fe(new kq({id:"acceptRenameInputWithPreview",precondition:X.and(x1,X.has("config.editor.rename.enablePreview")),handler:n=>n.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:X.and(I.focus,X.not("isComposing")),primary:2051}}));fe(new kq({id:"cancelRenameInput",precondition:x1,handler:n=>n.cancelRenameInput(),kbOpts:{weight:199,kbExpr:I.focus,primary:9,secondary:[1033]}}));ni(class extends xo{constructor(){super({id:"focusNextRenameSuggestion",title:{...Fe("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:x1,keybinding:[{primary:18,weight:199}]})}run(e){const t=e.get(kt).getFocusedCodeEditor();if(!t)return;const i=am.get(t);i&&i.focusNextRenameSuggestion()}});ni(class extends xo{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...Fe("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:x1,keybinding:[{primary:16,weight:199}]})}run(e){const t=e.get(kt).getFocusedCodeEditor();if(!t)return;const i=am.get(t);i&&i.focusPreviousRenameSuggestion()}});Qo("_executeDocumentRenameProvider",function(n,e,t,...i){const[s]=i;xt(typeof s=="string");const{renameProvider:o}=n.get(ve);return KZe(o,e,t,s)});Qo("_executePrepareRename",async function(n,e,t){const{renameProvider:i}=n.get(ve),o=await new xq(e,t,i).resolveRenameLocation(Ye.None);if(o!=null&&o.rejectReason)throw new Error(o.rejectReason);return o});Mi.as(Hl.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:p("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var YZe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},zie=function(n,e){return function(t,i){e(t,i,n)}},VC;let EM=(VC=class extends U{constructor(e,t,i){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=i,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel(s=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(e.onDidChangeModelLanguage(s=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(t.onDidChange(s=>{var r;const o=(r=this.editor.getModel())==null?void 0:r.getLanguageId();o&&s.affects(o)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(e.onDidChangeConfiguration(s=>{this.options&&!s.hasChanged(73)||(this.options=this.createOptions(e.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(s=>{this.computeSectionHeaders.schedule()})),this._register(e.onDidChangeModelTokens(s=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)})),this.computeSectionHeaders=this._register(new $t(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;const t=this.editor.getModel().getLanguageId();if(!t)return;const i=this.languageConfigurationService.getLanguageConfiguration(t).comments,s=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(!(!i&&!(s!=null&&s.markers)))return{foldingRules:s,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}findSectionHeaders(){var i,s;if(!this.editor.hasModel()||!((i=this.options)!=null&&i.findMarkSectionHeaders)&&!((s=this.options)!=null&&s.findRegionSectionHeaders))return;const e=this.editor.getModel();if(e.isDisposed()||e.isTooLargeForSyncing())return;const t=e.getVersionId();this.editorWorkerService.findSectionHeaders(e.uri,this.options).then(o=>{e.isDisposed()||e.getVersionId()!==t||this.updateDecorations(o)})}updateDecorations(e){const t=this.editor.getModel();t&&(e=e.filter(o=>{if(!o.shouldBeInComments)return!0;const r=t.validateRange(o.range),a=t.tokenization.getLineTokens(r.startLineNumber),l=a.findTokenIndexAtOffset(r.startColumn-1),c=a.getStandardTokenType(l);return a.getLanguageId(l)===t.getLanguageId()&&c===1}));const i=Object.values(this.currentOccurrences).map(o=>o.decorationId),s=e.map(o=>ZZe(o));this.editor.changeDecorations(o=>{const r=o.deltaDecorations(i,s);this.currentOccurrences={};for(let a=0,l=r.length;a<l;a++){const c={sectionHeader:e[a],decorationId:r[a]};this.currentOccurrences[c.decorationId]=c}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}},VC.ID="editor.sectionHeaderDetector",VC);EM=YZe([zie(1,Ri),zie(2,Jo)],EM);function ZZe(n){return{range:n.range,options:ze.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:n.hasSeparatorLine?2:1,sectionHeaderText:n.text}})}}wt(EM.ID,EM,1);function QZe(n){for(let e=0,t=n.length;e<t;e+=4){const i=n[e+0],s=n[e+1],o=n[e+2],r=n[e+3];n[e+0]=r,n[e+1]=o,n[e+2]=s,n[e+3]=i}}function XZe(n){const e=new Uint8Array(n.buffer,n.byteOffset,n.length*4);return Wle()||QZe(e),vA.wrap(e)}function Dpe(n){const e=new Uint32Array(JZe(n));let t=0;if(e[t++]=n.id,n.type==="full")e[t++]=1,e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length;else{e[t++]=2,e[t++]=n.deltas.length;for(const i of n.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return XZe(e)}function JZe(n){let e=0;if(e+=2,n.type==="full")e+=1+n.data.length;else{e+=1,e+=3*n.deltas.length;for(const t of n.deltas)t.data&&(e+=t.data.length)}return e}function TO(n){return n&&!!n.data}function Epe(n){return n&&Array.isArray(n.edits)}class eQe{constructor(e,t,i){this.provider=e,this.tokens=t,this.error=i}}function Npe(n,e){return n.has(e)}function tQe(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:[]}async function Ipe(n,e,t,i,s){const o=tQe(n,e),r=await Promise.all(o.map(async a=>{let l,c=null;try{l=await a.provideDocumentSemanticTokens(e,a===t?i:null,s)}catch(d){c=d,l=null}return(!l||!TO(l)&&!Epe(l))&&(l=null),new eQe(a,l,c)}));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null}function iQe(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:null}class nQe{constructor(e,t){this.provider=e,this.tokens=t}}function sQe(n,e){return n.has(e)}function Tpe(n,e){const t=n.orderedGroups(e);return t.length>0?t[0]:[]}async function Lq(n,e,t,i){const s=Tpe(n,e),o=await Promise.all(s.map(async r=>{let a;try{a=await r.provideDocumentRangeSemanticTokens(e,t,i)}catch(l){en(l),a=null}return(!a||!TO(a))&&(a=null),new nQe(r,a)}));for(const r of o)if(r.tokens)return r;return o.length>0?o[0]:null}bt.registerCommand("_provideDocumentSemanticTokensLegend",async(n,...e)=>{const[t]=e;xt(t instanceof Le);const i=n.get(gi).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=n.get(ve),o=iQe(s,i);return o?o[0].getLegend():n.get(oi).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)});bt.registerCommand("_provideDocumentSemanticTokens",async(n,...e)=>{const[t]=e;xt(t instanceof Le);const i=n.get(gi).getModel(t);if(!i)return;const{documentSemanticTokensProvider:s}=n.get(ve);if(!Npe(s,i))return n.get(oi).executeCommand("_provideDocumentRangeSemanticTokens",t,i.getFullModelRange());const o=await Ipe(s,i,null,null,Ye.None);if(!o)return;const{provider:r,tokens:a}=o;if(!a||!TO(a))return;const l=Dpe({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l});bt.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(n,...e)=>{const[t,i]=e;xt(t instanceof Le);const s=n.get(gi).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:o}=n.get(ve),r=Tpe(o,s);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!i||!E.isIRange(i))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=await Lq(o,s,E.lift(i),Ye.None);if(a)return a.provider.getLegend()});bt.registerCommand("_provideDocumentRangeSemanticTokens",async(n,...e)=>{const[t,i]=e;xt(t instanceof Le),xt(E.isIRange(i));const s=n.get(gi).getModel(t);if(!s)return;const{documentRangeSemanticTokensProvider:o}=n.get(ve),r=await Lq(o,s,E.lift(i),Ye.None);if(!(!r||!r.tokens))return Dpe({id:0,type:"full",data:r.tokens.data})});const Dq="editor.semanticHighlighting";function sI(n,e,t){var s;const i=(s=t.getValue(Dq,{overrideIdentifier:n.getLanguageId(),resource:n.uri}))==null?void 0:s.enabled;return typeof i=="boolean"?i:e.getColorTheme().semanticHighlighting}var Ppe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Nd=function(n,e){return function(t,i){e(t,i,n)}},ff;let K7=class extends U{constructor(e,t,i,s,o,r){super(),this._watchers=Object.create(null);const a=d=>{this._watchers[d.uri.toString()]=new G7(d,e,i,o,r)},l=(d,u)=>{u.dispose(),delete this._watchers[d.uri.toString()]},c=()=>{for(const d of t.getModels()){const u=this._watchers[d.uri.toString()];sI(d,i,s)?u||a(d):u&&l(d,u)}};t.getModels().forEach(d=>{sI(d,i,s)&&a(d)}),this._register(t.onModelAdded(d=>{sI(d,i,s)&&a(d)})),this._register(t.onModelRemoved(d=>{const u=this._watchers[d.uri.toString()];u&&l(d,u)})),this._register(s.onDidChangeConfiguration(d=>{d.affectsConfiguration(Dq)&&c()})),this._register(i.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};K7=Ppe([Nd(0,xA),Nd(1,gi),Nd(2,kn),Nd(3,nt),Nd(4,_a),Nd(5,ve)],K7);var Rg;let G7=(Rg=class extends U{constructor(e,t,i,s,o){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=o.documentSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentSemanticTokens",{min:ff.REQUEST_MIN_DELAY,max:ff.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new $t(()=>this._fetchDocumentSemanticTokensNow(),ff.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=()=>{Qt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(i.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),Qt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Npe(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const e=new Pi,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,i=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,s=Ipe(this._provider,this._model,t,i,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const o=[],r=this._model.onDidChangeContent(l=>{o.push(l)}),a=new Qn(!1);s.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,o);else{const{provider:c,tokens:d}=l,u=this._semanticTokensStylingService.getStyling(c);this._setDocumentSemanticTokens(c,d||null,u,o)}},l=>{l&&(el(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||He(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),(o.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,i,s,o){o=Math.min(o,i.length-s,e.length-t);for(let r=0;r<o;r++)i[s+r]=e[t+r]}_setDocumentSemanticTokens(e,t,i,s){const o=this._currentDocumentResponse,r=()=>{(s.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!i){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),r();return}if(Epe(t)){if(!o){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let a=0;for(const h of t.edits)a+=(h.data?h.data.length:0)-h.deleteCount;const l=o.data,c=new Uint32Array(l.length+a);let d=l.length,u=c.length;for(let h=t.edits.length-1;h>=0;h--){const f=t.edits[h];if(f.start>l.length){i.warnInvalidEditStart(o.resultId,t.resultId,h,f.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const g=d-(f.start+f.deleteCount);g>0&&(ff._copy(l,d-g,c,u-g,g),u-=g),f.data&&(ff._copy(f.data,0,c,u-f.data.length,f.data.length),u-=f.data.length),d=f.start}d>0&&ff._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(TO(t)){this._currentDocumentResponse=new oQe(e,t.resultId,t.data);const a=Nde(t,i,this._model.getLanguageId());if(s.length>0)for(const l of s)for(const c of a)for(const d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}},ff=Rg,Rg.REQUEST_MIN_DELAY=300,Rg.REQUEST_MAX_DELAY=2e3,Rg);G7=ff=Ppe([Nd(1,xA),Nd(2,kn),Nd(3,_a),Nd(4,ve)],G7);class oQe{constructor(e,t,i){this.provider=e,this.resultId=t,this.data=i}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}p1(K7);var rQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},h0=function(n,e){return function(t,i){e(t,i,n)}},zC;let NM=(zC=class extends U{constructor(e,t,i,s,o,r){super(),this._semanticTokensStylingService=t,this._themeService=i,this._configurationService=s,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=o.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new $t(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(Dq)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!sI(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!sQe(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(i=>this._requestRange(e,i)))}_requestRange(e,t){const i=e.getVersionId(),s=On(r=>Promise.resolve(Lq(this._provider,e,t,r))),o=new Qn(!1);return s.then(r=>{if(this._debounceInformation.update(e,o.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==i)return;const{provider:a,tokens:l}=r,c=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,Nde(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(s),()=>this._removeOutstandingRequest(s)),s}},zC.ID="editor.contrib.viewportSemanticTokens",zC);NM=rQe([h0(1,xA),h0(2,kn),h0(3,nt),h0(4,_a),h0(5,ve)],NM);wt(NM.ID,NM,1);class aQe{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){const i=[];for(const s of t){const o=[];i.push(o),this.selectSubwords&&this._addInWordRanges(o,e,s),this._addWordRanges(o,e,s),this._addWhitespaceLine(o,e,s),o.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const s=t.getWordAtPosition(i);if(!s)return;const{word:o,startColumn:r}=s,a=i.column-r;let l=a,c=a,d=0;for(;l>=0;l--){const u=o.charCodeAt(l);if(l!==a&&(u===95||u===45))break;if(Uf(u)&&kd(d))break;d=u}for(l+=1;c<o.length;c++){const u=o.charCodeAt(c);if(kd(u)&&Uf(d))break;if(u===95||u===45)break;d=u}l<c&&e.push({range:new E(i.lineNumber,r+l,i.lineNumber,r+c)})}_addWordRanges(e,t,i){const s=t.getWordAtPosition(i);s&&e.push({range:new E(i.lineNumber,s.startColumn,i.lineNumber,s.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(i.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(i.lineNumber)===0&&e.push({range:new E(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}var lQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},cQe=function(n,e){return function(t,i){e(t,i,n)}},Y7;class Eq{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new Eq(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}}var U_;let nL=(U_=class{static get(e){return e.getContribution(Y7.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)==null||e.dispose()}async run(e){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(this._state||await Rpe(this._languageFeaturesService.selectionRangeProvider,i,t.map(o=>o.getPosition()),this._editor.getOption(114),Ye.None).then(o=>{var r;if(!(!Ys(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!Li(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<o.length;a++)o[a]=o[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),o[a].unshift(t[a]);this._state=o.map(a=>new Eq(0,a)),(r=this._selectionListener)==null||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)==null||a.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(o=>o.mov(e));const s=this._state.map(o=>Ce.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(s)}finally{this._ignoreSelection=!1}}},Y7=U_,U_.ID="editor.contrib.smartSelectController",U_);nL=Y7=lQe([cQe(1,ve)],nL);class Mpe extends _e{constructor(e,t){super(t),this._forward=e}async run(e,t){const i=nL.get(t);i&&await i.run(this._forward)}}class dQe extends Mpe{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:p("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}bt.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class uQe extends Mpe{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:p("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:we.MenubarSelectionMenu,group:"1_basic",title:p({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}wt(nL.ID,nL,4);se(dQe);se(uQe);async function Rpe(n,e,t,i,s){const o=n.all(e).concat(new aQe(i.selectSubwords));o.length===1&&o.unshift(new fM);const r=[],a=[];for(const l of o)r.push(Promise.resolve(l.provideSelectionRanges(e,t,s)).then(c=>{if(Ys(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(const u of c[d])E.isIRange(u.range)&&E.containsPosition(u.range,t[d])&&a[d].push(E.lift(u.range))}},en));return await Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((h,f)=>H.isBefore(h.getStartPosition(),f.getStartPosition())?1:H.isBefore(f.getStartPosition(),h.getStartPosition())||H.isBefore(h.getEndPosition(),f.getEndPosition())?-1:H.isBefore(f.getEndPosition(),h.getEndPosition())?1:0);const c=[];let d;for(const h of l)(!d||E.containsRange(h,d)&&!E.equalsRange(h,d))&&(c.push(h),d=h);if(!i.selectLeadingAndTrailingWhitespace)return c;const u=[c[0]];for(let h=1;h<c.length;h++){const f=c[h-1],g=c[h];if(g.startLineNumber!==f.startLineNumber||g.endLineNumber!==f.endLineNumber){const m=new E(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));m.containsRange(f)&&!m.equalsRange(f)&&g.containsRange(m)&&!g.equalsRange(m)&&u.push(m);const _=new E(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));_.containsRange(f)&&!_.equalsRange(m)&&g.containsRange(_)&&!g.equalsRange(_)&&u.push(_)}u.push(g)}return u})}bt.registerCommand("_executeSelectionRangeProvider",async function(n,...e){const[t,i]=e;xt(Le.isUri(t));const s=n.get(ve).selectionRangeProvider,o=await n.get(Zo).createModelReference(t);try{return Rpe(s,o.object.textEditorModel,i,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},Ye.None)}finally{o.dispose()}});const hQe=Object.freeze({View:Fe("view","View"),Help:Fe("help","Help"),Test:Fe("test","Test"),File:Fe("file","File"),Preferences:Fe("preferences","Preferences"),Developer:Fe({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});class WS{constructor(e,t,i,s=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=i,this.showEndForLine=s}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&Li(this.startLineNumbers,e.startLineNumbers)&&Li(this.endLineNumbers,e.endLineNumbers)}static get Empty(){return new WS([],[],0)}}const Uie=Vh("stickyScrollViewLayer",{createHTML:n=>n}),D5="data-sticky-line-index",$ie="data-sticky-is-line",fQe="data-sticky-is-line-number",qie="data-sticky-is-folding-icon";class gQe extends U{constructor(e){super(),this._editor=e,this._foldingIconStore=new Q,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof Wl),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const t=()=>{this._linesDomNode.style.left=this._editor.getOption(116).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(116)&&t(),i.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(i=>{i.scrollLeftChanged&&t(),i.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(i=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,i){if(i===void 0&&(!this._previousState&&!e||this._previousState&&this._previousState.equals(e)))return;const s=this._isWidgetHeightZero(e),o=s?void 0:e,r=s?0:this._findLineToRebuildWidgetFrom(e,i);this._renderRootNode(o,t,r),this._previousState=e}_isWidgetHeightZero(e){if(!e)return!0;const t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;const i=[...e.startLineNumbers];e.showEndForLine!==null&&(i[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=i}else this._lastLineRelativePosition=0,this._lineNumbers=[];return t===0}_findLineToRebuildWidgetFrom(e,t){if(!e||!this._previousState)return 0;if(t!==void 0)return t;const i=this._previousState,s=e.startLineNumbers.findIndex(o=>!i.startLineNumbers.includes(o));return s===-1?0:s}_updateWidgetWidth(){const e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(e){this._foldingIconStore.clear();for(let t=e;t<this._renderedStickyLines.length;t++){const i=this._renderedStickyLines[t];i.lineNumberDomNode.remove(),i.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(const t of this._renderedStickyLines){const i=t.foldingIcon;i&&i.setVisible(e?!0:i.isCollapsed)}}async _renderRootNode(e,t,i){if(this._clearStickyLinesFromLine(i),!e)return;for(const a of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(a);const s=this._editor.getLayoutInfo(),o=this._lineNumbers.slice(i);for(const[a,l]of o.entries()){const c=this._renderChildNode(a+i,l,t,s);c&&(this._linesDomNode.appendChild(c.lineDomNode),this._lineNumbersDomNode.appendChild(c.lineNumberDomNode),this._renderedStickyLines.push(c))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const r=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${r}px`,this._linesDomNodeScrollable.style.height=`${r}px`,this._rootDomNode.style.height=`${r}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(a=>a.scrollWidth))+s.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(111)==="mouseover"&&(this._foldingIconStore.add(G(this._lineNumbersDomNode,le.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(G(this._lineNumbersDomNode,le.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,i,s){const o=this._editor._getViewModel();if(!o)return;const r=o.coordinatesConverter.convertModelPositionToViewPosition(new H(t,1)).lineNumber,a=o.getViewLineRenderingData(r),l=this._editor.getOption(68);let c;try{c=ho.filter(a.inlineDecorations,r,a.minColumn,a.maxColumn)}catch{c=[]}const d=new wm(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,c,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),u=new n1(2e3),h=JL(d,u);let f;Uie?f=Uie.createHTML(u.build()):f=u.build();const g=document.createElement("span");g.setAttribute(D5,String(e)),g.setAttribute($ie,""),g.setAttribute("role","listitem"),g.tabIndex=0,g.className="sticky-line-content",g.classList.add(`stickyLine${t}`),g.style.lineHeight=`${this._lineHeight}px`,g.innerHTML=f;const m=document.createElement("span");m.setAttribute(D5,String(e)),m.setAttribute(fQe,""),m.className="sticky-line-number",m.style.lineHeight=`${this._lineHeight}px`;const _=s.contentLeft;m.style.width=`${_}px`;const b=document.createElement("span");l.renderType===1||l.renderType===3&&t%10===0?b.innerText=t.toString():l.renderType===2&&(b.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),b.className="sticky-line-number-inner",b.style.lineHeight=`${this._lineHeight}px`,b.style.width=`${s.lineNumbersWidth}px`,b.style.paddingLeft=`${s.lineNumbersLeft}px`,m.appendChild(b);const v=this._renderFoldingIconForLine(i,t);v&&m.appendChild(v.domNode),this._editor.applyFontInfo(g),this._editor.applyFontInfo(b),m.style.lineHeight=`${this._lineHeight}px`,g.style.lineHeight=`${this._lineHeight}px`,m.style.height=`${this._lineHeight}px`,g.style.height=`${this._lineHeight}px`;const w=new mQe(e,t,g,m,v,h.characterMapping,g.scrollWidth);return this._updateTopAndZIndexOfStickyLine(w)}_updateTopAndZIndexOfStickyLine(e){var d;const t=e.index,i=e.lineDomNode,s=e.lineNumberDomNode,o=t===this._lineNumbers.length-1,r="0",a="1";i.style.zIndex=o?r:a,s.style.zIndex=o?r:a;const l=`${t*this._lineHeight+this._lastLineRelativePosition+((d=e.foldingIcon)!=null&&d.isCollapsed?1:0)}px`,c=`${t*this._lineHeight}px`;return i.style.top=o?l:c,s.style.top=o?l:c,e}_renderFoldingIconForLine(e,t){const i=this._editor.getOption(111);if(!e||i==="never")return;const s=e.regions,o=s.findRange(t),r=s.getStartLineNumber(o);if(!(t===r))return;const l=s.isCollapsed(o),c=new pQe(l,r,s.getEndLineNumber(o),this._lineHeight);return c.setVisible(this._isOnGlyphMargin?!0:l||i==="always"),c.domNode.setAttribute(qie,""),c}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:2,stackOridinal:10}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;const t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;const i=i$(t.characterMapping,e,0);return new H(t.lineNumber,i)}getLineNumberFromChildDomNode(e){var t;return((t=this._getRenderedStickyLineFromChildDomNode(e))==null?void 0:t.lineNumber)??null}_getRenderedStickyLineFromChildDomNode(e){const t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){const t=this._getAttributeValue(e,D5);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,$ie)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,qie)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){const i=e.getAttribute(t);if(i!==null)return i;e=e.parentElement}}}class mQe{constructor(e,t,i,s,o,r,a){this.index=e,this.lineNumber=t,this.lineDomNode=i,this.lineNumberDomNode=s,this.foldingIcon=o,this.characterMapping=r,this.scrollWidth=a}}class pQe{constructor(e,t,i,s){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=i,this.dimension=s,this.domNode=document.createElement("div"),this.domNode.style.width=`${s}px`,this.domNode.style.height=`${s}px`,this.domNode.className=Re.asClassName(e?iM:tM)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}}class BS{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}}class IM{constructor(e,t,i){this.range=e,this.children=t,this.parent=i}}class Ape{constructor(e,t,i,s){this.uri=e,this.version=t,this.element=i,this.outlineProviderId=s}}var PO=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},sL=function(n,e){return function(t,i){e(t,i,n)}},HS;(function(n){n.OUTLINE_MODEL="outlineModel",n.FOLDING_PROVIDER_MODEL="foldingProviderModel",n.INDENTATION_MODEL="indentationModel"})(HS||(HS={}));var ig;(function(n){n[n.VALID=0]="VALID",n[n.INVALID=1]="INVALID",n[n.CANCELED=2]="CANCELED"})(ig||(ig={}));let Z7=class extends U{constructor(e,t,i,s){switch(super(),this._editor=e,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new qa(300)),this._updateOperation=this._register(new Q),this._editor.getOption(116).defaultModel){case HS.OUTLINE_MODEL:this._modelProviders.push(new Q7(this._editor,s));case HS.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new J7(this._editor,t,s));case HS.INDENTATION_MODEL:this._modelProviders.push(new X7(this._editor,i));break}}dispose(){this._modelProviders.forEach(e=>e.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(e){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(const t of this._modelProviders){const{statusPromise:i,modelPromise:s}=t.computeStickyModel(e);this._modelPromise=s;const o=await i;if(this._modelPromise!==s)return null;switch(o){case ig.CANCELED:return this._updateOperation.clear(),null;case ig.VALID:return t.stickyModel}}return null}).catch(t=>(He(t),null))}};Z7=PO([sL(2,ke),sL(3,ve)],Z7);class Ope extends U{constructor(e){super(),this._editor=e,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,ig.INVALID}computeStickyModel(e){if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};const t=On(i=>this.createModelFromProvider(i));return{statusPromise:t.then(i=>this.isModelValid(i)?e.isCancellationRequested?ig.CANCELED:(this._stickyModel=this.createStickyModel(e,i),ig.VALID):this._invalid()).then(void 0,i=>(He(i),ig.CANCELED)),modelPromise:t}}isModelValid(e){return!0}isProviderValid(){return!0}}let Q7=class extends Ope{constructor(e,t){super(e),this._languageFeaturesService=t}createModelFromProvider(e){return zu.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}createStickyModel(e,t){var r;const{stickyOutlineElement:i,providerID:s}=this._stickyModelFromOutlineModel(t,(r=this._stickyModel)==null?void 0:r.outlineProviderId),o=this._editor.getModel();return new Ape(o.uri,o.getVersionId(),i,s)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let i;if(_t.first(e.children.values())instanceof npe){const a=_t.find(e.children.values(),l=>l.id===t);if(a)i=a.children;else{let l="",c=-1,d;for(const[u,h]of e.children.entries()){const f=this._findSumOfRangesOfGroup(h);f>c&&(d=h,c=f,l=h.id)}t=l,i=d.children}}else i=e.children;const s=[],o=Array.from(i.values()).sort((a,l)=>{const c=new BS(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),d=new BS(l.symbol.range.startLineNumber,l.symbol.range.endLineNumber);return this._comparator(c,d)});for(const a of o)s.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new IM(void 0,s,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const i=[];for(const o of e.children.values())if(o.symbol.selectionRange.startLineNumber!==o.symbol.range.endLineNumber)if(o.symbol.selectionRange.startLineNumber!==t)i.push(this._stickyModelFromOutlineElement(o,o.symbol.selectionRange.startLineNumber));else for(const r of o.children.values())i.push(this._stickyModelFromOutlineElement(r,o.symbol.selectionRange.startLineNumber));i.sort((o,r)=>this._comparator(o.range,r.range));const s=new BS(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new IM(s,i,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const i of e.children.values())t+=this._findSumOfRangesOfGroup(i);return e instanceof H9?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};Q7=PO([sL(1,ve)],Q7);class Fpe extends Ope{constructor(e){super(e),this._foldingLimitReporter=new epe(e)}createStickyModel(e,t){const i=this._fromFoldingRegions(t),s=this._editor.getModel();return new Ape(s.uri,s.getVersionId(),i,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,i=[],s=new IM(void 0,[],void 0);for(let o=0;o<t;o++){const r=e.getParentIndex(o);let a;r!==-1?a=i[r]:a=s;const l=new IM(new BS(e.getStartLineNumber(o),e.getEndLineNumber(o)+1),[],a);a.children.push(l),i.push(l)}return s}}let X7=class extends Fpe{constructor(e,t){super(e),this._languageConfigurationService=t,this.provider=this._register(new fq(e.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(e){return this.provider.compute(e)}};X7=PO([sL(1,Ri)],X7);let J7=class extends Fpe{constructor(e,t,i){super(e),this._languageFeaturesService=i;const s=rm.getFoldingRangeProviders(this._languageFeaturesService,e.getModel());s.length>0&&(this.provider=this._register(new gq(e.getModel(),s,t,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(e){var t;return((t=this.provider)==null?void 0:t.compute(e))??null}};J7=PO([sL(2,ve)],J7);var _Qe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Kie=function(n,e){return function(t,i){e(t,i,n)}};class bQe{constructor(e,t,i){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=i}}let e6=class extends U{constructor(e,t,i){super(),this._languageFeaturesService=t,this._languageConfigurationService=i,this._onDidChangeStickyScroll=this._register(new j),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new Q),this._updateSoon=this._register(new $t(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(116)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(116).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add(xe(()=>{var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){var e;return(e=this._model)==null?void 0:e.version}updateStickyModelProvider(){var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null;const e=this._editor;e.hasModel()&&(this._stickyModelProvider=new Z7(e,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){var e;(e=this._cts)==null||e.dispose(!0),this._cts=new Pi,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}const t=await this._stickyModelProvider.update(e);e.isCancellationRequested||(this._model=t)}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,i,s,o){if(t.children.length===0)return;let r=o;const a=[];for(let d=0;d<t.children.length;d++){const u=t.children[d];u.range&&a.push(u.range.startLineNumber)}const l=this.updateIndex(Ix(a,e.startLineNumber,(d,u)=>d-u)),c=this.updateIndex(Ix(a,e.startLineNumber+s,(d,u)=>d-u));for(let d=l;d<=c;d++){const u=t.children[d];if(!u)return;if(u.range){const h=u.range.startLineNumber,f=u.range.endLineNumber;e.startLineNumber<=f+1&&h-1<=e.endLineNumber&&h!==r&&(r=h,i.push(new bQe(h,f-1,s+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,u,i,s+1,h))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,u,i,s,o)}}getCandidateStickyLinesIntersecting(e){var s,o;if(!((s=this._model)!=null&&s.element))return[];let t=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,t,0,-1);const i=(o=this._editor._getViewModel())==null?void 0:o.getHiddenAreas();if(i)for(const r of i)t=t.filter(a=>!(a.startLineNumber>=r.startLineNumber&&a.endLineNumber<=r.endLineNumber+1));return t}};e6=_Qe([Kie(1,ve),Kie(2,Ri)],e6);var vQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Nv=function(n,e){return function(t,i){e(t,i,n)}},t6,$_;let Bh=($_=class extends U{constructor(e,t,i,s,o,r,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=i,this._instaService=s,this._contextKeyService=a,this._sessionStore=new Q,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._stickyScrollWidget=new gQe(this._editor),this._stickyLineCandidateProvider=new e6(this._editor,i,o),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=WS.Empty,this._onDidResize(),this._readConfiguration();const l=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(d=>{this._readConfigurationChange(d)})),this._register(G(l,le.CONTEXT_MENU,async d=>{this._onContextMenu(Te(l),d)})),this._stickyScrollFocusedContextKey=I.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=I.stickyScrollVisible.bindTo(this._contextKeyService);const c=this._register(Fc(l));this._register(c.onDidBlur(d=>{this._positionRevealed===!1&&l.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(c.onDidFocus(d=>{this.focus()})),this._registerMouseListeners(),this._register(G(l,le.MOUSE_DOWN,d=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(t6.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)==null||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new Q,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(E.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){const e=this._register(new Q),t=this._register(new CO(this._editor,{extractLineNumberFromMouseEvent:o=>{const r=this._stickyScrollWidget.getEditorPositionFromNode(o.target.element);return r?r.lineNumber:0}})),i=o=>{if(!this._editor.hasModel()||o.target.type!==12||o.target.detail!==this._stickyScrollWidget.getId())return null;const r=o.target.element;if(!r||r.innerText!==r.innerHTML)return null;const a=this._stickyScrollWidget.getEditorPositionFromNode(r);return a?{range:new E(a.lineNumber,a.column,a.lineNumber,a.column+r.innerText.length),textElement:r}:null},s=this._stickyScrollWidget.getDomNode();this._register(Fi(s,le.CLICK,o=>{if(o.ctrlKey||o.altKey||o.metaKey||!o.leftButton)return;if(o.shiftKey){const c=this._stickyScrollWidget.getLineIndexFromChildDomNode(o.target);if(c===null)return;const d=new H(this._endLineNumbers[c],1);this._revealLineInCenterIfOutsideViewport(d);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(o.target)){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(o.target);this._toggleFoldingRegionForLine(c);return}if(!this._stickyScrollWidget.isInStickyLine(o.target))return;let l=this._stickyScrollWidget.getEditorPositionFromNode(o.target);if(!l){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(o.target);if(c===null)return;l=new H(c,1)}this._revealPosition(l)})),this._register(Fi(s,le.MOUSE_MOVE,o=>{if(o.shiftKey){const r=this._stickyScrollWidget.getLineIndexFromChildDomNode(o.target);if(r===null||this._showEndForLine!==null&&this._showEndForLine===r)return;this._showEndForLine=r,this._renderStickyScroll();return}this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(G(s,le.MOUSE_LEAVE,o=>{this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([o,r])=>{const a=i(o);if(!a||!o.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}const{range:l,textElement:c}=a;if(!l.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=l,e.clear();else if(c.style.textDecoration==="underline")return;const d=new Pi;e.add(xe(()=>d.dispose(!0)));let u;cD(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new H(l.startLineNumber,l.startColumn+1),!1,d.token).then(h=>{if(!d.token.isCancellationRequested)if(h.length!==0){this._candidateDefinitionsLength=h.length;const f=c;u!==f?(e.clear(),u=f,u.style.textDecoration="underline",e.add(xe(()=>{u.style.textDecoration="none"}))):u||(u=f,u.style.textDecoration="underline",e.add(xe(()=>{u.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async o=>{if(o.target.type!==12||o.target.detail!==this._stickyScrollWidget.getId())return;const r=this._stickyScrollWidget.getEditorPositionFromNode(o.target.element);r&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:r.lineNumber,column:1})),this._instaService.invokeFunction(Fme,o,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(e,t){const i=new Sl(e,t);this._contextMenuService.showContextMenu({menuId:we.StickyScrollContext,getAnchor:()=>i})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;const t=this._stickyScrollWidget.getRenderedStickyLine(e),i=t==null?void 0:t.foldingIcon;if(!i)return;dq(this._foldingModel,Number.MAX_VALUE,[e]),i.isCollapsed=!i.isCollapsed;const s=(i.isCollapsed?this._editor.getTopForLineNumber(i.foldingEndLine):this._editor.getTopForLineNumber(i.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(s),this._renderStickyScroll(e)}_readConfiguration(){const e=this._editor.getOption(116);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(i=>this._onTokensChange(i))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=void 0,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=void 0,this._renderStickyScroll(0)}))}_readConfigurationChange(e){(e.hasChanged(116)||e.hasChanged(73)||e.hasChanged(67)||e.hasChanged(111)||e.hasChanged(68))&&this._readConfiguration(),e.hasChanged(68)&&this._renderStickyScroll(0)}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const i of t)for(const s of e.ranges)if(i>=s.fromLineNumber&&i<=s.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(t*.25)}async _renderStickyScroll(e){const t=this._editor.getModel();if(!t||t.isTooLargeForTokenization()){this._resetState();return}const i=this._updateAndGetMinRebuildFromLine(e),s=this._stickyLineCandidateProvider.getVersionId();if(s===void 0||s===t.getVersionId())if(!this._focused)await this._updateState(i);else if(this._focusedStickyElementIndex===-1)await this._updateState(i),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const r=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];await this._updateState(i),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(r)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}_updateAndGetMinRebuildFromLine(e){if(e!==void 0){const t=this._minRebuildFromLine!==void 0?this._minRebuildFromLine:1/0;this._minRebuildFromLine=Math.min(e,t)}return this._minRebuildFromLine}async _updateState(e){var i;this._minRebuildFromLine=void 0,this._foldingModel=await((i=rm.get(this._editor))==null?void 0:i.getFoldingModel())??void 0,this._widgetState=this.findScrollWidgetState();const t=this._widgetState.startLineNumbers.length>0;this._stickyScrollVisibleContextKey.set(t),this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e)}async _resetState(){this._minRebuildFromLine=void 0,this._foldingModel=void 0,this._widgetState=WS.Empty,this._stickyScrollVisibleContextKey.set(!1),this._stickyScrollWidget.setState(void 0,void 0)}findScrollWidgetState(){const e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(116).maxLineCount),i=this._editor.getScrollTop();let s=0;const o=[],r=[],a=this._editor.getVisibleRanges();if(a.length!==0){const l=new BS(a[0].startLineNumber,a[a.length-1].endLineNumber),c=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(l);for(const d of c){const u=d.startLineNumber,h=d.endLineNumber,f=d.nestingDepth;if(h-u>0){const g=(f-1)*e,m=f*e,_=this._editor.getBottomForLineNumber(u)-i,b=this._editor.getTopForLineNumber(h)-i,v=this._editor.getBottomForLineNumber(h)-i;if(g>b&&g<=v){o.push(u),r.push(h+1),s=v-m;break}else m>_&&m<=v&&(o.push(u),r.push(h+1));if(o.length===t)break}}}return this._endLineNumbers=r,new WS(o,r,s,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}},t6=$_,$_.ID="store.contrib.stickyScrollController",$_);Bh=t6=vQe([Nv(1,Er),Nv(2,ve),Nv(3,ke),Nv(4,Ri),Nv(5,_a),Nv(6,Ae)],Bh);class wQe extends xo{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...Fe("toggleEditorStickyScroll","Toggle Editor Sticky Scroll"),mnemonicTitle:p({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")},metadata:{description:Fe("toggleEditorStickyScroll.description","Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport")},category:hQe.View,toggled:{condition:X.equals("config.editor.stickyScroll.enabled",!0),title:p("stickyScroll","Sticky Scroll"),mnemonicTitle:p({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:we.CommandPalette},{id:we.MenubarAppearanceMenu,group:"4_editor",order:3},{id:we.StickyScrollContext}]})}async run(e){const t=e.get(nt),i=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",i)}}const MO=100;class CQe extends Uc{constructor(){super({id:"editor.action.focusStickyScroll",title:{...Fe("focusStickyScroll","Focus on the editor sticky scroll"),mnemonicTitle:p({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")},precondition:X.and(X.has("config.editor.stickyScroll.enabled"),I.stickyScrollVisible),menu:[{id:we.CommandPalette}]})}runEditorCommand(e,t){var i;(i=Bh.get(t))==null||i.focus()}}class yQe extends Uc{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:Fe("selectNextStickyScrollLine.title","Select the next editor sticky scroll line"),precondition:I.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:MO,primary:18}})}runEditorCommand(e,t){var i;(i=Bh.get(t))==null||i.focusNext()}}class SQe extends Uc{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:Fe("selectPreviousStickyScrollLine.title","Select the previous sticky scroll line"),precondition:I.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:MO,primary:16}})}runEditorCommand(e,t){var i;(i=Bh.get(t))==null||i.focusPrevious()}}class xQe extends Uc{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:Fe("goToFocusedStickyScrollLine.title","Go to the focused sticky scroll line"),precondition:I.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:MO,primary:3}})}runEditorCommand(e,t){var i;(i=Bh.get(t))==null||i.goToFocused()}}class kQe extends Uc{constructor(){super({id:"editor.action.selectEditor",title:Fe("selectEditor.title","Select Editor"),precondition:I.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:MO,primary:9}})}runEditorCommand(e,t){var i;(i=Bh.get(t))==null||i.selectEditor()}}wt(Bh.ID,Bh,1);ni(wQe);ni(CQe);ni(SQe);ni(yQe);ni(xQe);ni(kQe);var Wpe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},V0=function(n,e){return function(t,i){e(t,i,n)}};class LQe{constructor(e,t,i,s,o,r){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=s,this.command=o,this.completion=r}}let i6=class extends Qke{constructor(e,t,i,s,o,r){super(o.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=s,this._suggestMemoryService=r}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){const e=[],{items:t}=this.completionModel,i=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},t),s=_t.slice(t,i),o=_t.slice(t,0,i);let r=5;for(const a of _t.concat(s,o)){if(a.score===Ic.Default)continue;const l=new E(a.editStart.lineNumber,a.editStart.column,a.editInsertEnd.lineNumber,a.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),c=a.completion.insertTextRules&&a.completion.insertTextRules&4?{snippet:a.completion.insertText}:a.completion.insertText;e.push(new LQe(l,c,a.filterTextLow??a.labelLow,a.completion.additionalTextEdits,a.completion.command,a)),r-->=0&&a.resolve(Ye.None)}return e}};i6=Wpe([V0(5,EO)],i6);let n6=class extends U{constructor(e,t,i,s){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=i,this._editorService=s,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,i,s){var f;if(i.selectedSuggestionInfo)return;let o;for(const g of this._editorService.listCodeEditors())if(g.getModel()===e){o=g;break}if(!o)return;const r=o.getOption(90);if(ww.isAllOff(r))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(ww.valueFor(r,l)!=="inline")return;let c=e.getWordAtPosition(t),d;if(c!=null&&c.word||(d=this._getTriggerCharacterInfo(e,t)),!(c!=null&&c.word)&&!d||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let u;const h=e.getValueInRange(new E(t.lineNumber,1,t.lineNumber,t.column));if(!d&&((f=this._lastResult)!=null&&f.canBeReused(e,t.lineNumber,c))){const g=new Pie(h,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=g,this._lastResult.acquire(),u=this._lastResult}else{const g=await mq(this._languageFeatureService.completionProvider,e,t,new Yk(void 0,mM.createSuggestFilter(o).itemKind,d==null?void 0:d.providers),d&&{triggerKind:1,triggerCharacter:d.ch},s);let m;g.needsClipboard&&(m=await this._clipboardService.readText());const _=new Pf(g.items,t.column,new Pie(h,0),gM.None,o.getOption(119),o.getOption(113),{boostFullMatch:!1,firstMatchCanBeWeak:!1},m);u=new i6(e,t.lineNumber,c,_,g,this._suggestMemoryService)}return this._lastResult=u,u}handleItemDidShow(e,t){t.completion.resolve(Ye.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var o;const i=e.getValueInRange(E.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const r of this._languageFeatureService.completionProvider.all(e))(o=r.triggerCharacters)!=null&&o.includes(i)&&s.add(r);if(s.size!==0)return{providers:s,ch:i}}};n6=Wpe([V0(0,ve),V0(1,qh),V0(2,EO),V0(3,kt)],n6);p1(n6);class DQe extends _e{constructor(){super({id:"editor.action.forceRetokenize",label:p("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getModel();i.tokenization.resetTokenization();const s=new Qn;i.tokenization.forceTokenization(i.getLineCount()),s.stop(),console.log(`tokenization took ${s.elapsed()}`)}}se(DQe);const lR=class lR extends xo{constructor(){super({id:lR.ID,title:Fe({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:Fe("tabMovesFocusDescriptions","Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.")},f1:!0})}run(){const t=!ky.getTabFocusMode();ky.setTabFocusMode(t),yo(t?p("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):p("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}};lR.ID="editor.action.toggleTabFocusMode";let s6=lR;ni(s6);var EQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Gie=function(n,e){return function(t,i){e(t,i,n)}};let o6=class extends U{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,i={},s,o){super(),this._link=t,this._hoverService=s,this._enabled=!0,this.el=ne(e,ce("a.monaco-link",{tabIndex:t.tabIndex??0,href:t.href},t.label)),this.hoverDelegate=i.hoverDelegate??ko("mouse"),this.setTooltip(t.title),this.el.setAttribute("role","button");const r=this._register(new ft(this.el,"click")),a=this._register(new ft(this.el,"keypress")),l=ue.chain(a.event,u=>u.map(h=>new ti(h)).filter(h=>h.keyCode===3)),c=this._register(new ft(this.el,si.Tap)).event;this._register(Is.addTarget(this.el));const d=ue.any(r.event,l,c);this._register(d(u=>{this.enabled&&(gt.stop(u,!0),i!=null&&i.opener?i.opener(this._link.href):o.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(e){this.hoverDelegate.showNativeHover?this.el.title=e??"":!this.hover&&e?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}};o6=EQe([Gie(3,du),Gie(4,Xo)],o6);var Bpe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Hpe=function(n,e){return function(t,i){e(t,i,n)}};const NQe=26;let r6=class extends U{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(a6))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{var t;this.hide(),(t=e.onClose)==null||t.call(e)}}),this._editor.setBanner(this.banner.element,NQe)}};r6=Bpe([Hpe(1,ke)],r6);let a6=class extends U{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Mh,{}),this.element=ce("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=ce("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){os(this.element)}show(e){os(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const i=ne(this.element,ce("div.icon-container"));i.setAttribute("aria-hidden","true"),e.icon&&i.appendChild(ce(`div${Re.asCSSSelector(e.icon)}`));const s=ne(this.element,ce("div.message-container"));if(s.setAttribute("aria-hidden","true"),s.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=ne(this.element,ce("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(o6,this.messageActionsContainer,{...r,tabIndex:-1},{}));const o=ne(this.element,ce("div.action-container"));this.actionBar=this._register(new ca(o)),this.actionBar.push(this._register(new br("banner.close","Close Banner",Re.asClassName(lfe),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};a6=Bpe([Hpe(0,ke)],a6);var Nq=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},wC=function(n,e){return function(t,i){e(t,i,n)}};const IQe=mi("extensions-warning-message",ae.warning,p("warningIcon","Icon shown with a warning message in the extensions editor."));var UC;let oL=(UC=class extends U{constructor(e,t,i,s){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=i,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;const r=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount);let a;if(o.nonBasicAsciiCharacterCount>=r)a={message:p("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new aL};else if(o.ambiguousCharacterCount>=r)a={message:p("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new Mb};else if(o.invisibleCharacterCount>=r)a={message:p("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new rL};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:IQe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(s.createInstance(r6,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(126),this._register(i.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(o=>{o.hasChanged(126)&&(this._options=e.getOption(126),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=TQe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(i=>i===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(i=>i.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(i=>i==="_os"?new Intl.NumberFormat().resolvedOptions().locale:i==="_vscode"?Yxe:i)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new l6(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new PQe(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},UC.ID="editor.contrib.unicodeHighlighter",UC);oL=Nq([wC(1,Jo),wC(2,xue),wC(3,ke)],oL);function TQe(n,e){return{nonBasicASCII:e.nonBasicASCII===Hr?!n:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Hr?!n:e.includeComments,includeStrings:e.includeStrings===Hr?!n:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let l6=class extends U{constructor(e,t,i,s){super(),this._editor=e,this._options=t,this._updateState=i,this._editorWorkerService=s,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new $t(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const i=[];if(!t.hasMore)for(const s of t.ranges)i.push({range:s,options:TM.instance.getDecorationFromOptions(this._options)});this._decorations.set(i)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!_$(t,e))return null;const i=t.getValueInRange(e.range);return{reason:Vpe(i,this._options),inComment:b$(t,e),inString:v$(t,e)}}};l6=Nq([wC(3,Jo)],l6);class PQe extends U{constructor(e,t,i){super(),this._editor=e,this._options=t,this._updateState=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new $t(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],i={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const s of e){const o=Iz.computeUnicodeHighlights(this._model,this._options,s);for(const r of o.ranges)i.ranges.push(r);i.ambiguousCharacterCount+=i.ambiguousCharacterCount,i.invisibleCharacterCount+=i.invisibleCharacterCount,i.nonBasicAsciiCharacterCount+=i.nonBasicAsciiCharacterCount,i.hasMore=i.hasMore||o.hasMore}if(!i.hasMore)for(const s of i.ranges)t.push({range:s,options:TM.instance.getDecorationFromOptions(this._options)});this._updateState(i),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),i=t.getValueInRange(e.range);return _$(t,e)?{reason:Vpe(i,this._options),inComment:b$(t,e),inString:v$(t,e)}:null}}const jpe=p("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options");let c6=class{constructor(e,t,i){this._editor=e,this._languageService=t,this._openerService=i,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const i=this._editor.getModel(),s=this._editor.getContribution(oL.ID);if(!s)return[];const o=[],r=new Set;let a=300;for(const l of t){const c=s.getDecorationInfo(l);if(!c)continue;const u=i.getValueInRange(l.range).codePointAt(0),h=E5(u);let f;switch(c.reason.kind){case 0:{TL(c.reason.confusableWith)?f=p("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",h,E5(c.reason.confusableWith.codePointAt(0))):f=p("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",h,E5(c.reason.confusableWith.codePointAt(0)));break}case 1:f=p("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",h);break;case 2:f=p("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",h);break}if(r.has(f))continue;r.add(f);const g={codePoint:u,reason:c.reason,inComment:c.inComment,inString:c.inString},m=p("unicodeHighlight.adjustSettings","Adjust settings"),_=`command:${PM.ID}?${encodeURIComponent(JSON.stringify(g))}`,b=new Ds("",!0).appendMarkdown(f).appendText(" ").appendLink(_,m,jpe);o.push(new Cl(this,l.range,[b],!1,a++))}return o}renderHoverParts(e,t){return rUe(e,t,this._editor,this._languageService,this._openerService)}};c6=Nq([wC(1,Di),wC(2,Xo)],c6);function d6(n){return`U+${n.toString(16).padStart(4,"0")}`}function E5(n){let e=`\`${d6(n)}\``;return Hp.isInvisibleCharacter(n)||(e+=` "${`${MQe(n)}`}"`),e}function MQe(n){return n===96?"`` ` ``":"`"+String.fromCodePoint(n)+"`"}function Vpe(n,e){return Iz.computeUnicodeHighlightReason(n,e)}const cR=class cR{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const i=`${e}${t}`;let s=this.map.get(i);return s||(s=ze.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(i,s)),s}};cR.instance=new cR;let TM=cR;class RQe extends _e{constructor(){super({id:Mb.ID,label:p("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}async run(e,t,i){const s=e==null?void 0:e.get(nt);s&&this.runAction(s)}async runAction(e){await e.updateValue(Oo.includeComments,!1,2)}}class AQe extends _e{constructor(){super({id:Mb.ID,label:p("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}async run(e,t,i){const s=e==null?void 0:e.get(nt);s&&this.runAction(s)}async runAction(e){await e.updateValue(Oo.includeStrings,!1,2)}}const dR=class dR extends _e{constructor(){super({id:dR.ID,label:p("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}async run(e,t,i){const s=e==null?void 0:e.get(nt);s&&this.runAction(s)}async runAction(e){await e.updateValue(Oo.ambiguousCharacters,!1,2)}};dR.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";let Mb=dR;const uR=class uR extends _e{constructor(){super({id:uR.ID,label:p("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}async run(e,t,i){const s=e==null?void 0:e.get(nt);s&&this.runAction(s)}async runAction(e){await e.updateValue(Oo.invisibleCharacters,!1,2)}};uR.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";let rL=uR;const hR=class hR extends _e{constructor(){super({id:hR.ID,label:p("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=p("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}async run(e,t,i){const s=e==null?void 0:e.get(nt);s&&this.runAction(s)}async runAction(e){await e.updateValue(Oo.nonBasicASCII,!1,2)}};hR.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";let aL=hR;const fR=class fR extends _e{constructor(){super({id:fR.ID,label:p("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(e,t,i){const{codePoint:s,reason:o,inString:r,inComment:a}=i,l=String.fromCodePoint(s),c=e.get(il),d=e.get(nt);function u(g){return Hp.isInvisibleCharacter(g)?p("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",d6(g)):p("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${d6(g)} "${l}"`)}const h=[];if(o.kind===0)for(const g of o.notAmbiguousInLocales)h.push({label:p("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',g),run:async()=>{FQe(d,[g])}});if(h.push({label:u(s),run:()=>OQe(d,[s])}),a){const g=new RQe;h.push({label:g.label,run:async()=>g.runAction(d)})}else if(r){const g=new AQe;h.push({label:g.label,run:async()=>g.runAction(d)})}if(o.kind===0){const g=new Mb;h.push({label:g.label,run:async()=>g.runAction(d)})}else if(o.kind===1){const g=new rL;h.push({label:g.label,run:async()=>g.runAction(d)})}else if(o.kind===2){const g=new aL;h.push({label:g.label,run:async()=>g.runAction(d)})}else WQe(o);const f=await c.pick(h,{title:jpe});f&&await f.run()}};fR.ID="editor.action.unicodeHighlight.showExcludeOptions";let PM=fR;async function OQe(n,e){const t=n.getValue(Oo.allowedCharacters);let i;typeof t=="object"&&t?i=t:i={};for(const s of e)i[String.fromCodePoint(s)]=!0;await n.updateValue(Oo.allowedCharacters,i,2)}async function FQe(n,e){var s;const t=(s=n.inspect(Oo.allowedLocales).user)==null?void 0:s.value;let i;typeof t=="object"&&t?i=Object.assign({},t):i={};for(const o of e)i[o]=!0;await n.updateValue(Oo.allowedLocales,i,2)}function WQe(n){throw new Error(`Unexpected value: ${n}`)}se(Mb);se(rL);se(aL);se(PM);wt(oL.ID,oL,1);Xb.register(c6);var BQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Yie=function(n,e){return function(t,i){e(t,i,n)}};const zpe="ignoreUnusualLineTerminators";function HQe(n,e,t){n.setModelProperty(e.uri,zpe,t)}function jQe(n,e){return n.getModelProperty(e.uri,zpe)}var $C;let MM=($C=class extends U{constructor(e,t,i){super(),this._editor=e,this._dialogService=t,this._codeEditorService=i,this._isPresentingDialog=!1,this._config=this._editor.getOption(127),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(127)&&(this._config=this._editor.getOption(127),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(s=>{s.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||jQe(this._codeEditorService,e)===!0||this._editor.getOption(92))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let i;try{this._isPresentingDialog=!0,i=await this._dialogService.confirm({title:p("unusualLineTerminators.title","Unusual Line Terminators"),message:p("unusualLineTerminators.message","Detected unusual line terminators"),detail:p("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",Ya(e.uri)),primaryButton:p({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:p("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!i.confirmed){HQe(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())}},$C.ID="editor.contrib.unusualLineTerminatorsDetector",$C);MM=BQe([Yie(1,OL),Yie(2,kt)],MM);wt(MM.ID,MM,1);var VQe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},zQe=function(n,e){return function(t,i){e(t,i,n)}};class Zie{constructor(){this.selector={language:"*"}}provideDocumentHighlights(e,t,i){const s=[],o=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});return o?e.isDisposed()?void 0:e.findMatches(o.word,!0,!1,!0,jI,!1).map(a=>({range:a.range,kind:sy.Text})):Promise.resolve(s)}provideMultiDocumentHighlights(e,t,i,s){const o=new Zn,r=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});if(!r)return Promise.resolve(o);for(const a of[e,...i]){if(a.isDisposed())continue;const c=a.findMatches(r.word,!0,!1,!0,jI,!1).map(d=>({range:d.range,kind:sy.Text}));c&&o.set(a.uri,c)}return o}}let u6=class extends U{constructor(e){super(),this._register(e.documentHighlightProvider.register("*",new Zie)),this._register(e.multiDocumentHighlightProvider.register("*",new Zie))}};u6=VQe([zQe(0,ve)],u6);var Upe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},oI=function(n,e){return function(t,i){e(t,i,n)}},tn,h6;const Iq=new me("hasWordHighlights",!1);function $pe(n,e,t,i){const s=n.ordered(e);return pz(s.map(o=>()=>Promise.resolve(o.provideDocumentHighlights(e,t,i)).then(void 0,en)),o=>o!=null).then(o=>{if(o){const r=new Zn;return r.set(e.uri,o),r}return new Zn})}function UQe(n,e,t,i,s,o){const r=n.ordered(e);return pz(r.map(a=>()=>{const l=o.filter(c=>dde(c)).filter(c=>Bz(a.selector,c.uri,c.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(a.provideMultiDocumentHighlights(e,t,l,s)).then(void 0,en)}),a=>a!=null)}class qpe{constructor(e,t,i){this._model=e,this._selection=t,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=On(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new E(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const s=t.startLineNumber,o=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=i.length;!l&&c<d;c++){const u=i.getRange(c);u&&u.startLineNumber===s&&u.startColumn<=o&&u.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}}class $Qe extends qpe{constructor(e,t,i,s){super(e,t,i),this._providers=s}_compute(e,t,i,s){return $pe(this._providers,e,t.getPosition(),s).then(o=>o||new Zn)}}class qQe extends qpe{constructor(e,t,i,s,o){super(e,t,i),this._providers=s,this._otherModels=o}_compute(e,t,i,s){return UQe(this._providers,e,t.getPosition(),i,s,this._otherModels).then(o=>o||new Zn)}}function KQe(n,e,t,i,s){return new $Qe(e,t,s,n)}function GQe(n,e,t,i,s,o){return new qQe(e,t,s,n,o)}Qo("_executeDocumentHighlights",async(n,e,t)=>{const i=n.get(ve),s=await $pe(i.documentHighlightProvider,e,t,Ye.None);return s==null?void 0:s.get(e.uri)});var Ag;let f6=(Ag=class{constructor(e,t,i,s,o){this.toUnhook=new Q,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new Zn,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.runDelayer=this.toUnhook.add(new qa(50)),this.editor=e,this.providers=t,this.multiDocumentProviders=i,this.codeEditorService=o,this._hasWordHighlights=Iq.bindTo(s),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(r=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this.runDelayer.trigger(()=>{this._onPositionChanged(r)})})),this.toUnhook.add(e.onDidFocusEditorText(r=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this.runDelayer.trigger(()=>{this._run()}))})),this.toUnhook.add(e.onDidChangeModelContent(r=>{iA(this.model.uri,"output")||this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(r=>{!r.newModelUrl&&r.oldModelUrl?this._stopSingular():tn.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(r=>{var l,c;const a=this.editor.getOption(81);if(this.occurrencesHighlight!==a)switch(this.occurrencesHighlight=a,a){case"off":this._stopAll();break;case"singleFile":this._stopAll((c=(l=tn.query)==null?void 0:l.modelInfo)==null?void 0:c.model);break;case"multiFile":tn.query&&this._run(!0);break;default:console.warn("Unknown occurrencesHighlight setting value:",a);break}})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,tn.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&(this.runDelayer.cancel(),this._run())}_getSortedHighlights(){return this.decorations.getRanges().sort(E.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(s.startLineNumber);yo(`${r}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),i=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,s=e[i];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(s.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(s);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(s.startLineNumber);yo(`${r}, ${i+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const e=tn.storedDecorationIDs.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),tn.storedDecorationIDs.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(e){const t=this.codeEditorService.listCodeEditors(),i=[];for(const s of t){if(!s.hasModel()||ok(s.getModel().uri,e==null?void 0:e.uri))continue;const o=tn.storedDecorationIDs.get(s.getModel().uri);if(!o)continue;s.removeDecorations(o),i.push(s.getModel().uri);const r=lm.get(s);r!=null&&r.wordHighlighter&&r.wordHighlighter.decorations.length>0&&(r.wordHighlighter.decorations.clear(),r.wordHighlighter.workerRequest=null,r.wordHighlighter._hasWordHighlights.set(!1))}for(const s of i)tn.storedDecorationIDs.delete(s)}_stopSingular(){var e,t,i,s;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((e=this.editor.getModel())==null?void 0:e.uri.scheme)!==je.vscodeNotebookCell&&((i=(t=tn.query)==null?void 0:t.modelInfo)==null?void 0:i.model.uri.scheme)!==je.vscodeNotebookCell?(tn.query=null,this._run()):(s=tn.query)!=null&&s.modelInfo&&(tn.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(e){this._removeAllDecorations(e),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){var t;if(this.occurrencesHighlight==="off"){this._stopAll();return}if(e.reason!==3&&((t=this.editor.getModel())==null?void 0:t.uri.scheme)!==je.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:i})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===je.vscodeNotebookCell){const o=[],r=this.codeEditorService.listCodeEditors();for(const a of r){const l=a.getModel();l&&l!==e&&l.uri.scheme===je.vscodeNotebookCell&&o.push(l)}return o}const i=[],s=this.codeEditorService.listCodeEditors();for(const o of s){if(!O$(o))continue;const r=o.getModel();r&&e===r.modified&&i.push(r.modified)}if(i.length)return i;if(this.occurrencesHighlight==="singleFile")return[];for(const o of s){const r=o.getModel();r&&r!==e&&i.push(r)}return i}_run(e){var s,o;let t;if(this.editor.hasTextFocus()){const r=this.editor.getSelection();if(!r||r.startLineNumber!==r.endLineNumber){tn.query=null,this._stopAll();return}const a=r.startColumn,l=r.endColumn,c=this._getWord();if(!c||c.startColumn>a||c.endColumn<l){tn.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,r,this.decorations),tn.query={modelInfo:{model:this.model,selection:r},word:c}}else if(!tn.query){this._stopAll();return}if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else if(ok(this.editor.getModel().uri,(s=tn.query.modelInfo)==null?void 0:s.model.uri)){if(!e){const l=this.decorations.getRanges();for(const c of l)if(c.containsPosition(this.editor.getPosition()))return}this._stopAll(e?this.model:void 0);const r=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const a=this.getOtherModelsToHighlight(this.editor.getModel());if(!tn.query||!tn.query.modelInfo||tn.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(tn.query.modelInfo.model,tn.query.modelInfo.selection,tn.query.word,a),(o=this.workerRequest)==null||o.result.then(l=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=l||[],this._beginRenderDecorations())},He)}}computeWithModel(e,t,i,s){return s.length?GQe(this.multiDocumentProviders,e,t,i,this.editor.getOption(132),s):KQe(this.providers,e,t,i,this.editor.getOption(132))}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){var t,i,s;this.renderDecorationsTimer=-1;const e=this.codeEditorService.listCodeEditors();for(const o of e){const r=lm.get(o);if(!r)continue;const a=[],l=(t=o.getModel())==null?void 0:t.uri;if(l&&this.workerRequestValue.has(l)){const c=tn.storedDecorationIDs.get(l),d=this.workerRequestValue.get(l);if(d)for(const h of d)h.range&&a.push({range:h.range,options:OYe(h.kind)});let u=[];o.changeDecorations(h=>{u=h.deltaDecorations(c??[],a)}),tn.storedDecorationIDs=tn.storedDecorationIDs.set(l,u),a.length>0&&((i=r.wordHighlighter)==null||i.decorations.set(a),(s=r.wordHighlighter)==null||s._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}},tn=Ag,Ag.storedDecorationIDs=new Zn,Ag.query=null,Ag);f6=tn=Upe([oI(4,kt)],f6);var q_;let lm=(q_=class extends U{static get(e){return e.getContribution(h6.ID)}constructor(e,t,i,s){super(),this._wordHighlighter=null;const o=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new f6(e,i.documentHighlightProvider,i.multiDocumentHighlightProvider,t,s))};this._register(e.onDidChangeModel(r=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),o()})),o()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){var e;(e=this._wordHighlighter)==null||e.moveNext()}moveBack(){var e;(e=this._wordHighlighter)==null||e.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}},h6=q_,q_.ID="editor.contrib.wordHighlighter",q_);lm=h6=Upe([oI(1,Ae),oI(2,ve),oI(3,kt)],lm);class Kpe extends _e{constructor(e,t){super(t),this._isNext=e}run(e,t){const i=lm.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}}class YQe extends Kpe{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:p("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:Iq,kbOpts:{kbExpr:I.editorTextFocus,primary:65,weight:100}})}}class ZQe extends Kpe{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:p("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:Iq,kbOpts:{kbExpr:I.editorTextFocus,primary:1089,weight:100}})}}class QQe extends _e{constructor(){super({id:"editor.action.wordHighlight.trigger",label:p("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:0,weight:100}})}run(e,t,i){const s=lm.get(t);s&&s.restoreViewState(!0)}}wt(lm.ID,lm,0);se(YQe);se(ZQe);se(QQe);p1(u6);class RO extends xn{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;const s=Ga(t.getOption(132),t.getOption(131)),o=t.getModel(),r=t.getSelections(),a=r.length>1,l=r.map(c=>{const d=new H(c.positionLineNumber,c.positionColumn),u=this._move(s,o,d,this._wordNavigationType,a);return this._moveTo(c,u,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,l.map(c=>St.fromModelSelection(c))),l.length===1){const c=new H(l[0].positionLineNumber,l[0].positionColumn);t.revealPosition(c,0)}}_moveTo(e,t,i){return i?new Ce(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new Ce(t.lineNumber,t.column,t.lineNumber,t.column)}}class ym extends RO{_move(e,t,i,s,o){return Rt.moveWordLeft(e,t,i,s,o)}}class Sm extends RO{_move(e,t,i,s,o){return Rt.moveWordRight(e,t,i,s)}}class XQe extends ym{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class JQe extends ym{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class eXe extends ym{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:X.and(I.textInputFocus,(e=X.and(HL,GA))==null?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class tXe extends ym{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class iXe extends ym{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class nXe extends ym{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:X.and(I.textInputFocus,(e=X.and(HL,GA))==null?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class sXe extends ym{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,s,o){return super._move(Ga(zc.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class oXe extends ym{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,s,o){return super._move(Ga(zc.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class rXe extends Sm{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class aXe extends Sm{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:X.and(I.textInputFocus,(e=X.and(HL,GA))==null?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class lXe extends Sm{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class cXe extends Sm{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class dXe extends Sm{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:X.and(I.textInputFocus,(e=X.and(HL,GA))==null?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class uXe extends Sm{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class hXe extends Sm{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,s,o){return super._move(Ga(zc.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class fXe extends Sm{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,s,o){return super._move(Ga(zc.wordSeparators.defaultValue,e.intlSegmenterLocales),t,i,s,o)}}class AO extends xn{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){const s=e.get(Ri);if(!t.hasModel())return;const o=Ga(t.getOption(132),t.getOption(131)),r=t.getModel(),a=t.getSelections(),l=t.getOption(6),c=t.getOption(11),d=s.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),u=t._getViewModel(),h=a.map(f=>{const g=this._delete({wordSeparators:o,model:r,selection:f,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:u.getCursorAutoClosedCharacters()},this._wordNavigationType);return new ps(g,"")});t.pushUndoStop(),t.executeCommands(this.id,h),t.pushUndoStop()}}class Tq extends AO{_delete(e,t){const i=Rt.deleteWordLeft(e,t);return i||new E(1,1,1,1)}}class Pq extends AO{_delete(e,t){const i=Rt.deleteWordRight(e,t);if(i)return i;const s=e.model.getLineCount(),o=e.model.getLineMaxColumn(s);return new E(s,o,s,o)}}class gXe extends Tq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:I.writable})}}class mXe extends Tq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:I.writable})}}class pXe extends Tq{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class _Xe extends Pq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:I.writable})}}class bXe extends Pq{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:I.writable})}}class vXe extends Pq{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class wXe extends _e{constructor(){super({id:"deleteInsideWord",precondition:I.writable,label:p("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;const s=Ga(t.getOption(132),t.getOption(131)),o=t.getModel(),a=t.getSelections().map(l=>{const c=Rt.deleteInsideWord(s,o,l);return new ps(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}fe(new XQe);fe(new JQe);fe(new eXe);fe(new tXe);fe(new iXe);fe(new nXe);fe(new rXe);fe(new aXe);fe(new lXe);fe(new cXe);fe(new dXe);fe(new uXe);fe(new sXe);fe(new oXe);fe(new hXe);fe(new fXe);fe(new gXe);fe(new mXe);fe(new pXe);fe(new _Xe);fe(new bXe);fe(new vXe);se(wXe);class CXe extends AO{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const i=oO.deleteWordPartLeft(e);return i||new E(1,1,1,1)}}class yXe extends AO{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const i=oO.deleteWordPartRight(e);if(i)return i;const s=e.model.getLineCount(),o=e.model.getLineMaxColumn(s);return new E(s,o,s,o)}}class Gpe extends RO{_move(e,t,i,s,o){return oO.moveWordPartLeft(e,t,i,o)}}class SXe extends Gpe{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}bt.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class xXe extends Gpe{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}bt.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class Ype extends RO{_move(e,t,i,s,o){return oO.moveWordPartRight(e,t,i)}}class kXe extends Ype{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class LXe extends Ype{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}fe(new CXe);fe(new yXe);fe(new SXe);fe(new xXe);fe(new kXe);fe(new LXe);const Vq=class Vq extends U{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=wr.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(93);t||(this.editor.isSimpleWidget?t=new Ds(p("editor.simple.readonly","Cannot edit in read-only input")):t=new Ds(p("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}};Vq.ID="editor.contrib.readOnlyMessageController";let RM=Vq;wt(RM.ID,RM,2);var DXe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Qie=function(n,e){return function(t,i){e(t,i,n)}};let g6=class extends U{constructor(e,t,i){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=i,this._currentModel=it(this,void 0);const s=ms("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),o=ms("_textModel.onDidChangeContent",ue.debounce(r=>this._textModel.onDidChangeContent(r),()=>{},100));this._register(zo(async(r,a)=>{s.read(r),o.read(r);const l=a.add(new h8e),c=await this._outlineModelService.getOrCreate(this._textModel,l.token);a.isDisposed||this._currentModel.set(c,void 0)}))}getBreadcrumbItems(e,t){const i=this._currentModel.read(t);if(!i)return[];const s=i.asListOfDocumentSymbols().filter(o=>e.contains(o.range.startLineNumber)&&!e.contains(o.range.endLineNumber));return s.sort(Ele(mo(o=>o.range.endLineNumber-o.range.startLineNumber,Dl))),s.map(o=>({name:o.name,kind:o.kind,startLineNumber:o.range.startLineNumber}))}};g6=DXe([Qie(1,ve),Qie(2,hD)],g6);RP.setBreadcrumbsSourceFactory((n,e)=>e.createInstance(g6,n));const zq=class zq extends U{constructor(e){super(),this.editor=e,this.widget=null,Ac&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(92);!this.widget&&e?this.widget=new m6(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}};zq.ID="editor.contrib.iPadShowKeyboard";let AM=zq;const gR=class gR extends U{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(G(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(G(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return gR.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}};gR.ID="editor.contrib.ShowKeyboardWidget";let m6=gR;wt(AM.ID,AM,3);var EXe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Xie=function(n,e){return function(t,i){e(t,i,n)}},p6,K_;let lL=(K_=class extends U{static get(e){return e.getContribution(p6.ID)}constructor(e,t,i){super(),this._editor=e,this._languageService=i,this._widget=null,this._register(this._editor.onDidChangeModel(s=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(s=>this.stop())),this._register(Hi.onDidChange(s=>this.stop())),this._register(this._editor.onKeyUp(s=>s.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new _6(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},p6=K_,K_.ID="editor.contrib.inspectTokens",K_);lL=p6=EXe([Xie(1,wa),Xie(2,Di)],lL);class NXe extends _e{constructor(){super({id:"editor.action.inspectTokens",label:xH.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const i=lL.get(t);i==null||i.launch()}}function IXe(n){let e="";for(let t=0,i=n.length;t<i;t++){const s=n.charCodeAt(t);switch(s){case 9:e+="";break;case 32:e+="";break;default:e+=String.fromCharCode(s)}}return e}function TXe(n,e){const t=Hi.get(e);if(t)return t;const i=n.encodeLanguageId(e);return{getInitialState:()=>py,tokenize:(s,o,r)=>lU(e,r),tokenizeEncoded:(s,o,r)=>WA(i,r)}}const mR=class mR extends U{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=TXe(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(i=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return mR._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let i=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){i=l;break}}let s=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){s=l;break}const o=this._model.getLineContent(e.lineNumber);let r="";if(i<t.tokens1.length){const l=t.tokens1[i].offset,c=i+1<t.tokens1.length?t.tokens1[i+1].offset:o.length;r=o.substring(l,c)}rs(this._domNode,ce("h2.tm-token",void 0,IXe(r),ce("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),ne(this._domNode,ce("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(s<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(s<<1)+1]):null;ne(this._domNode,ce("table.tm-metadata-table",void 0,ce("tbody",void 0,ce("tr",void 0,ce("td.tm-metadata-key",void 0,"language"),ce("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),ce("tr",void 0,ce("td.tm-metadata-key",void 0,"token type"),ce("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),ce("tr",void 0,ce("td.tm-metadata-key",void 0,"font style"),ce("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),ce("tr",void 0,ce("td.tm-metadata-key",void 0,"foreground"),ce("td.tm-metadata-value",void 0,`${a?te.Format.CSS.formatHex(a.foreground):"-?-"}`)),ce("tr",void 0,ce("td.tm-metadata-key",void 0,"background"),ce("td.tm-metadata-value",void 0,`${a?te.Format.CSS.formatHex(a.background):"-?-"}`))))),ne(this._domNode,ce("hr.tokens-inspect-separator")),i<t.tokens1.length&&ne(this._domNode,ce("span.tm-token-type",void 0,t.tokens1[i].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=Hi.getColorMap(),i=Bo.getLanguageId(e),s=Bo.getTokenType(e),o=Bo.getFontStyle(e),r=Bo.getForeground(e),a=Bo.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(i),tokenType:s,fontStyle:o,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),s=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:i.tokens,tokens2:s.tokens,endState:i.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let i=1;i<e;i++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}};mR._ID="editor.contrib.inspectTokensWidget";let _6=mR;wt(lL.ID,lL,4);se(NXe);var PXe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Jie=function(n,e){return function(t,i){e(t,i,n)}},z0,G_;let b6=(G_=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=Mi.as($b.Quickaccess)}provide(e){const t=new Q;return t.add(e.onDidAccept(()=>{const[i]=e.selectedItems;i&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(i=>{const s=this.registry.getQuickAccessProvider(i.substr(z0.PREFIX.length));s&&s.prefix&&s.prefix!==z0.PREFIX&&this.quickInputService.quickAccess.show(s.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(i=>i.prefix!==z0.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,i)=>t.prefix.localeCompare(i.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const i=t.prefix||e.prefix,s=i||"";return{prefix:i,label:s,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:p("helpPickAriaLabel","{0}, {1}",s,t.description),description:t.description}})}},z0=G_,G_.PREFIX="?",G_);b6=z0=PXe([Jie(0,il),Jie(1,Ft)],b6);Mi.as($b.Quickaccess).registerQuickAccessProvider({ctor:b6,prefix:"",helpEntries:[{description:kH.helpQuickAccessActionLabel}]});class Zpe{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t,i){var r;const s=new Q;e.canAcceptInBackground=!!((r=this.options)!=null&&r.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=s.add(new jn);return o.value=this.doProvide(e,t,i),s.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),s}doProvide(e,t,i){const s=new Q,o=this.activeTextEditorControl;if(o&&this.canProvideWithTextEditor(o)){const r={editor:o},a=sge(o);if(a){let l=o.saveViewState()??void 0;s.add(a.onDidChangeCursorPosition(()=>{l=o.saveViewState()??void 0})),r.restoreViewState=()=>{l&&o===this.activeTextEditorControl&&o.restoreViewState(l)},s.add(zg(t.onCancellationRequested)(()=>{var c;return(c=r.restoreViewState)==null?void 0:c.call(r)}))}s.add(xe(()=>this.clearDecorations(o))),s.add(this.provideWithTextEditor(r,e,t,i))}else s.add(this.provideWithoutTextEditor(e,t));return s}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range,"code.jump"),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();const i=e.getModel();i&&"getLineContent"in i&&Xd(`${i.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return O$(e)?(t=e.getModel())==null?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(i=>{const s=[];this.rangeHighlightDecorationId&&(s.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),s.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:ji(Yue),position:aa.Full}}}],[r,a]=i.deltaDecorations(s,o);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(i=>{i.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}const pR=class pR extends Zpe{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=p("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,U.None}provideWithTextEditor(e,t,i){const s=e.editor,o=new Q;o.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(s,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=()=>{const l=this.parsePosition(s,t.value.trim().substr(pR.PREFIX.length)),c=this.getPickLabel(s,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(s,l.lineNumber)){this.clearDecorations(s);return}const d=this.toRange(l.lineNumber,l.column);s.revealRangeInCenter(d,0),this.addDecorations(s,d)};r(),o.add(t.onDidChangeValue(()=>r()));const a=sge(s);return a&&a.getOptions().get(68).renderType===2&&(a.updateOptions({lineNumbers:"on"}),o.add(xe(()=>a.updateOptions({lineNumbers:"relative"})))),o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)),s=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:s+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?p("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):p("gotoLineLabel","Go to line {0}.",t);const s=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?p("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",s.lineNumber,s.column,o):p("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",s.lineNumber,s.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,i){if(!i||typeof i!="number")return!1;const s=this.getModel(e);if(!s)return!1;const o={lineNumber:t,column:i};return s.validatePosition(o).equals(o)}lineCount(e){var t;return((t=this.getModel(e))==null?void 0:t.getLineCount())??0}};pR.PREFIX=":";let v6=pR;var MXe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},RXe=function(n,e){return function(t,i){e(t,i,n)}};let cL=class extends v6{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=ue.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};cL=MXe([RXe(0,kt)],cL);var Y_;let Qpe=(Y_=class extends _e{constructor(){super({id:Y_.ID,label:NT.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(il).quickAccess.show(cL.PREFIX)}},Y_.ID="editor.action.gotoLine",Y_);se(Qpe);Mi.as($b.Quickaccess).registerQuickAccessProvider({ctor:cL,prefix:cL.PREFIX,helpEntries:[{description:NT.gotoLineActionLabel,commandId:Qpe.ID}]});const Xpe=[void 0,[]];function N5(n,e,t=0,i=0){const s=e;return s.values&&s.values.length>1?AXe(n,s.values,t,i):Jpe(n,e,t,i)}function AXe(n,e,t,i){let s=0;const o=[];for(const r of e){const[a,l]=Jpe(n,r,t,i);if(typeof a!="number")return Xpe;s+=a,o.push(...l)}return[s,OXe(o)]}function Jpe(n,e,t,i){const s=mb(e.original,e.originalLowercase,t,n,n.toLowerCase(),i,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return s?[s[0],BL(s)]:Xpe}function OXe(n){const e=n.sort((s,o)=>s.start-o.start),t=[];let i;for(const s of e)!i||!FXe(i,s)?(i=s,t.push(s)):(i.start=Math.min(i.start,s.start),i.end=Math.max(i.end,s.end));return t}function FXe(n,e){return!(n.end<e.start||e.end<n.start)}function ene(n){return n.startsWith('"')&&n.endsWith('"')}const e_e=" ";function w6(n){typeof n!="string"&&(n="");const e=n.toLowerCase(),{pathNormalized:t,normalized:i,normalizedLowercase:s}=tne(n),o=t.indexOf(kc)>=0,r=ene(n);let a;const l=n.split(e_e);if(l.length>1)for(const c of l){const d=ene(c),{pathNormalized:u,normalized:h,normalizedLowercase:f}=tne(c);h&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:u,normalized:h,normalizedLowercase:f,expectContiguousMatch:d}))}return{original:n,originalLowercase:e,pathNormalized:t,normalized:i,normalizedLowercase:s,values:a,containsPathSeparator:o,expectContiguousMatch:r}}function tne(n){let e;vs?e=n.replace(/\//g,kc):e=n.replace(/\\/g,kc);const t=ULe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function ine(n){return Array.isArray(n)?w6(n.map(e=>e.original).join(e_e)):w6(n.original)}var WXe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},nne=function(n,e){return function(t,i){e(t,i,n)}},rI,_c;let Jp=(_c=class extends Zpe{constructor(e,t,i=Object.create(null)){super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,p("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),U.None}provideWithTextEditor(e,t,i,s){const o=e.editor,r=this.getModel(o);return r?this._languageFeaturesService.documentSymbolProvider.has(r)?this.doProvideWithEditorSymbols(e,r,t,i,s):this.doProvideWithoutEditorSymbols(e,r,t,i):U.None}doProvideWithoutEditorSymbols(e,t,i,s){const o=new Q;return this.provideLabelPick(i,p("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>!await this.waitForLanguageSymbolRegistry(t,o)||s.isCancellationRequested||o.add(this.doProvideWithEditorSymbols(e,t,i,s)))(),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new Jy,s=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(s.dispose(),i.complete(!0))}));return t.add(xe(()=>i.complete(!1))),i.p}doProvideWithEditorSymbols(e,t,i,s,o){var u;const r=e.editor,a=new Q;a.add(i.onDidAccept(h=>{var g;const[f]=i.selectedItems;f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:i.keyMods,preserveFocus:h.inBackground}),(g=o==null?void 0:o.handleAccept)==null||g.call(o,f),h.inBackground||i.hide())})),a.add(i.onDidTriggerItemButton(({item:h})=>{h&&h.range&&(this.gotoLocation(e,{range:h.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())}));const l=this.getDocumentSymbols(t,s);let c;const d=async h=>{c==null||c.dispose(!0),i.busy=!1,c=new Pi(s),i.busy=!0;try{const f=w6(i.value.substr(rI.PREFIX.length).trim()),g=await this.doGetSymbolPicks(l,f,void 0,c.token,t);if(s.isCancellationRequested)return;if(g.length>0){if(i.items=g,h&&f.original.length===0){const m=$x(g,_=>!!(_.type!=="separator"&&_.range&&E.containsPosition(_.range.decoration,h)));m&&(i.activeItems=[m])}}else f.original.length>0?this.provideLabelPick(i,p("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,p("noSymbolResults","No editor symbols"))}finally{s.isCancellationRequested||(i.busy=!1)}};return a.add(i.onDidChangeValue(()=>d(void 0))),d((u=r.getSelection())==null?void 0:u.getPosition()),a.add(i.onDidChangeActive(()=>{const[h]=i.activeItems;h&&h.range&&(r.revealRangeInCenter(h.range.selection,0),this.addDecorations(r,h.range.decoration))})),a}async doGetSymbolPicks(e,t,i,s,o){var _,b;const r=await e;if(s.isCancellationRequested)return[];const a=t.original.indexOf(rI.SCOPE_PREFIX)===0,l=a?1:0;let c,d;t.values&&t.values.length>1?(c=ine(t.values[0]),d=ine(t.values.slice(1))):c=t;let u;const h=(b=(_=this.options)==null?void 0:_.openSideBySideDirection)==null?void 0:b.call(_);h&&(u=[{iconClass:h==="right"?Re.asClassName(ae.splitHorizontal):Re.asClassName(ae.splitVertical),tooltip:h==="right"?p("openToSide","Open to the Side"):p("openToBottom","Open to the Bottom")}]);const f=[];for(let v=0;v<r.length;v++){const w=r[v],y=VLe(w.name),S=`$(${KI.toIcon(w.kind).id}) ${y}`,x=S.length-y.length;let k=w.containerName;i!=null&&i.extraContainerLabel&&(k?k=`${i.extraContainerLabel}  ${k}`:k=i.extraContainerLabel);let D,N,R,O;if(t.original.length>l){let z=!1;if(c!==t&&([D,N]=N5(S,{...t,values:void 0},l,x),typeof D=="number"&&(z=!0)),typeof D!="number"&&([D,N]=N5(S,c,l,x),typeof D!="number"))continue;if(!z&&d){if(k&&d.original.length>0&&([R,O]=N5(k,d)),typeof R!="number")continue;typeof D=="number"&&(D+=R)}}const B=w.tags&&w.tags.indexOf(1)>=0;f.push({index:v,kind:w.kind,score:D,label:S,ariaLabel:ALe(w.name,w.kind),description:k,highlights:B?void 0:{label:N,description:O},range:{selection:E.collapseToStart(w.selectionRange),decoration:w.range},uri:o.uri,symbolName:y,strikethrough:B,buttons:u})}const g=f.sort((v,w)=>a?this.compareByKindAndScore(v,w):this.compareByScore(v,w));let m=[];if(a){let S=function(){w&&typeof v=="number"&&y>0&&(w.label=ab(T5[v]||I5,y))},v,w,y=0;for(const x of g)v!==x.kind?(S(),v=x.kind,y=1,w={type:"separator"},m.push(w)):y++,m.push(x);S()}else g.length>0&&(m=[{label:p("symbols","symbols ({0})",f.length),type:"separator"},...g]);return m}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=T5[e.kind]||I5,s=T5[t.kind]||I5,o=i.localeCompare(s);return o===0?this.compareByScore(e,t):o}async getDocumentSymbols(e,t){const i=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}},rI=_c,_c.PREFIX="@",_c.SCOPE_PREFIX=":",_c.PREFIX_BY_CATEGORY=`${_c.PREFIX}${_c.SCOPE_PREFIX}`,_c);Jp=rI=WXe([nne(0,ve),nne(1,hD)],Jp);const I5=p("property","properties ({0})"),T5={5:p("method","methods ({0})"),11:p("function","functions ({0})"),8:p("_constructor","constructors ({0})"),12:p("variable","variables ({0})"),4:p("class","classes ({0})"),22:p("struct","structs ({0})"),23:p("event","events ({0})"),24:p("operator","operators ({0})"),10:p("interface","interfaces ({0})"),2:p("namespace","namespaces ({0})"),3:p("package","packages ({0})"),25:p("typeParameter","type parameters ({0})"),1:p("modules","modules ({0})"),6:p("property","properties ({0})"),9:p("enum","enumerations ({0})"),21:p("enumMember","enumeration members ({0})"),14:p("string","strings ({0})"),0:p("file","files ({0})"),17:p("array","arrays ({0})"),15:p("number","numbers ({0})"),16:p("boolean","booleans ({0})"),18:p("object","objects ({0})"),19:p("key","keys ({0})"),7:p("field","fields ({0})"),13:p("constant","constants ({0})")};var BXe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},P5=function(n,e){return function(t,i){e(t,i,n)}};let C6=class extends Jp{constructor(e,t,i){super(t,i),this.editorService=e,this.onDidActiveTextEditorControlChange=ue.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};C6=BXe([P5(0,kt),P5(1,ve),P5(2,hD)],C6);const _R=class _R extends _e{constructor(){super({id:_R.ID,label:ak.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:I.hasDocumentSymbolProvider,kbOpts:{kbExpr:I.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(il).quickAccess.show(Jp.PREFIX,{itemActivation:lc.NONE})}};_R.ID="editor.action.quickOutline";let OM=_R;se(OM);Mi.as($b.Quickaccess).registerQuickAccessProvider({ctor:C6,prefix:Jp.PREFIX,helpEntries:[{description:ak.quickOutlineActionLabel,prefix:Jp.PREFIX,commandId:OM.ID},{description:ak.quickOutlineByCategoryActionLabel,prefix:Jp.PREFIX_BY_CATEGORY}]});function HXe(n){const e=new Map;for(const t of n)e.set(t,(e.get(t)??0)+1);return e}class jS{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){const i=this.computeEmbedding(e),s=new Map,o=[];for(const[r,a]of this.documents){if(t.isCancellationRequested)return[];for(const l of a.chunks){const c=this.computeSimilarityScore(l,i,s);c>0&&o.push({key:r,score:c})}}return o}static termFrequencies(e){return HXe(jS.splitTerms(e))}static*splitTerms(e){const t=i=>i.toLowerCase();for(const[i]of e.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))){yield t(i);const s=i.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(s.length>1)for(const o of s)o.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(o)&&(yield t(o))}}updateDocuments(e){for(const{key:t}of e)this.deleteDocument(t);for(const t of e){const i=[];for(const s of t.textChunks){const o=jS.termFrequencies(s);for(const r of o.keys())this.chunkOccurrences.set(r,(this.chunkOccurrences.get(r)??0)+1);i.push({text:s,tf:o})}this.chunkCount+=i.length,this.documents.set(t.key,{chunks:i})}return this}deleteDocument(e){const t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(const i of t.chunks)for(const s of i.tf.keys()){const o=this.chunkOccurrences.get(s);if(typeof o=="number"){const r=o-1;r<=0?this.chunkOccurrences.delete(s):this.chunkOccurrences.set(s,r)}}}}computeSimilarityScore(e,t,i){let s=0;for(const[o,r]of Object.entries(t)){const a=e.tf.get(o);if(!a)continue;let l=i.get(o);typeof l!="number"&&(l=this.computeIdf(o),i.set(o,l));const c=a*l;s+=c*r}return s}computeEmbedding(e){const t=jS.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){const t=this.chunkOccurrences.get(e)??0;return t>0?Math.log((this.chunkCount+1)/t):0}computeTfidf(e){const t=Object.create(null);for(const[i,s]of e){const o=this.computeIdf(i);o>0&&(t[i]=s*o)}return t}}function jXe(n){var i;const e=n.slice(0);e.sort((s,o)=>o.score-s.score);const t=((i=e[0])==null?void 0:i.score)??0;if(t>0)for(const s of e)s.score/=t;return e}var yw;(function(n){n[n.NO_ACTION=0]="NO_ACTION",n[n.CLOSE_PICKER=1]="CLOSE_PICKER",n[n.REFRESH_PICKER=2]="REFRESH_PICKER",n[n.REMOVE_ITEM=3]="REMOVE_ITEM"})(yw||(yw={}));function M5(n){const e=n;return Array.isArray(e.items)}function sne(n){const e=n;return!!e.picks&&e.additionalPicks instanceof Promise}class VXe extends U{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,i){var c;const s=new Q;e.canAcceptInBackground=!!((c=this.options)!=null&&c.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const r=s.add(new jn),a=async()=>{var _;const d=r.value=new Q;o==null||o.dispose(!0),e.busy=!1,o=new Pi(t);const u=o.token;let h=e.value.substring(this.prefix.length);(_=this.options)!=null&&_.shouldSkipTrimPickFilter||(h=h.trim());const f=this._getPicks(h,d,u,i),g=(b,v)=>{var S;let w,y;if(M5(b)?(w=b.items,y=b.active):w=b,w.length===0){if(v)return!1;(h.length>0||e.hideInput)&&((S=this.options)!=null&&S.noResultsPick)&&(Px(this.options.noResultsPick)?w=[this.options.noResultsPick(h)]:w=[this.options.noResultsPick])}return e.items=w,y&&(e.activeItems=[y]),!0},m=async b=>{let v=!1,w=!1;await Promise.all([(async()=>{typeof b.mergeDelay=="number"&&(await Ih(b.mergeDelay),u.isCancellationRequested)||w||(v=g(b.picks,!0))})(),(async()=>{e.busy=!0;try{const y=await b.additionalPicks;if(u.isCancellationRequested)return;let S,x;M5(b.picks)?(S=b.picks.items,x=b.picks.active):S=b.picks;let k,D;if(M5(y)?(k=y.items,D=y.active):k=y,k.length>0||!v){let N;if(!x&&!D){const R=e.activeItems[0];R&&S.indexOf(R)!==-1&&(N=R)}g({items:[...S,...k],active:x||D||N})}}finally{u.isCancellationRequested||(e.busy=!1),w=!0}})()])};if(f!==null)if(sne(f))await m(f);else if(!(f instanceof Promise))g(f);else{e.busy=!0;try{const b=await f;if(u.isCancellationRequested)return;sne(b)?await m(b):g(b)}finally{u.isCancellationRequested||(e.busy=!1)}}};s.add(e.onDidChangeValue(()=>a())),a(),s.add(e.onDidAccept(d=>{var h;if(i!=null&&i.handleAccept){d.inBackground||e.hide(),(h=i.handleAccept)==null||h.call(i,e.activeItems[0]);return}const[u]=e.selectedItems;typeof(u==null?void 0:u.accept)=="function"&&(d.inBackground||e.hide(),u.accept(e.keyMods,d))}));const l=async(d,u)=>{var f;if(typeof u.trigger!="function")return;const h=((f=u.buttons)==null?void 0:f.indexOf(d))??-1;if(h>=0){const g=u.trigger(h,e.keyMods),m=typeof g=="number"?g:await g;if(t.isCancellationRequested)return;switch(m){case yw.NO_ACTION:break;case yw.CLOSE_PICKER:e.hide();break;case yw.REFRESH_PICKER:a();break;case yw.REMOVE_ITEM:{const _=e.items.indexOf(u);if(_!==-1){const b=e.items.slice(),v=b.splice(_,1),w=e.activeItems.filter(S=>S!==v[0]),y=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=b,w&&(e.activeItems=w),e.keepScrollPosition=y}break}}}};return s.add(e.onDidTriggerItemButton(({button:d,item:u})=>l(d,u))),s.add(e.onDidTriggerSeparatorButton(({button:d,separator:u})=>l(d,u))),s}}var t_e=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Mf=function(n,e){return function(t,i){e(t,i,n)}},Jm,vn,Fd;let y6=(Fd=class extends VXe{constructor(e,t,i,s,o,r){super(Jm.PREFIX,e),this.instantiationService=t,this.keybindingService=i,this.commandService=s,this.telemetryService=o,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(S6)),this.options=e}async _getPicks(e,t,i,s){var f,g;const o=await this.getCommandPicks(i);if(i.isCancellationRequested)return[];const r=zg(()=>{const m=new jS;m.updateDocuments(o.map(b=>({key:b.commandId,textChunks:[this.getTfIdfChunk(b)]})));const _=m.calculateScores(e,i);return jXe(_).filter(b=>b.score>Jm.TFIDF_THRESHOLD).slice(0,Jm.TFIDF_MAX_RESULTS)}),a=[];for(const m of o){const _=Jm.WORD_FILTER(e,m.label)??void 0,b=m.commandAlias?Jm.WORD_FILTER(e,m.commandAlias)??void 0:void 0;if(_||b)m.highlights={label:_,detail:this.options.showAlias?b:void 0},a.push(m);else if(e===m.commandId)a.push(m);else if(e.length>=3){const v=r();if(i.isCancellationRequested)return[];const w=v.find(y=>y.key===m.commandId);w&&(m.tfIdfScore=w.score,a.push(m))}}const l=new Map;for(const m of a){const _=l.get(m.label);_?(m.description=m.commandId,_.description=_.commandId):l.set(m.label,m)}a.sort((m,_)=>{if(m.tfIdfScore&&_.tfIdfScore)return m.tfIdfScore===_.tfIdfScore?m.label.localeCompare(_.label):_.tfIdfScore-m.tfIdfScore;if(m.tfIdfScore)return 1;if(_.tfIdfScore)return-1;const b=this.commandsHistory.peek(m.commandId),v=this.commandsHistory.peek(_.commandId);if(b&&v)return b>v?-1:1;if(b)return-1;if(v)return 1;if(this.options.suggestedCommandIds){const w=this.options.suggestedCommandIds.has(m.commandId),y=this.options.suggestedCommandIds.has(_.commandId);if(w&&y)return 0;if(w)return-1;if(y)return 1}return m.label.localeCompare(_.label)});const c=[];let d=!1,u=!0,h=!!this.options.suggestedCommandIds;for(let m=0;m<a.length;m++){const _=a[m];m===0&&this.commandsHistory.peek(_.commandId)&&(c.push({type:"separator",label:p("recentlyUsed","recently used")}),d=!0),u&&_.tfIdfScore!==void 0&&(c.push({type:"separator",label:p("suggested","similar commands")}),u=!1),h&&_.tfIdfScore===void 0&&!this.commandsHistory.peek(_.commandId)&&((f=this.options.suggestedCommandIds)!=null&&f.has(_.commandId))&&(c.push({type:"separator",label:p("commonlyUsed","commonly used")}),d=!0,h=!1),d&&_.tfIdfScore===void 0&&!this.commandsHistory.peek(_.commandId)&&!((g=this.options.suggestedCommandIds)!=null&&g.has(_.commandId))&&(c.push({type:"separator",label:p("morecCommands","other commands")}),d=!1),c.push(this.toCommandPick(_,s))}return this.hasAdditionalCommandPicks(e,i)?{picks:c,additionalPicks:(async()=>{var b;const m=await this.getAdditionalCommandPicks(o,a,e,i);if(i.isCancellationRequested)return[];const _=m.map(v=>this.toCommandPick(v,s));return u&&((b=_[0])==null?void 0:b.type)!=="separator"&&_.unshift({type:"separator",label:p("suggested","similar commands")}),_})()}:c}toCommandPick(e,t){if(e.type==="separator")return e;const i=this.keybindingService.lookupKeybinding(e.commandId),s=i?p("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,i.getAriaLabel()):e.label;return{...e,ariaLabel:s,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:i,accept:async()=>{var o;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:(t==null?void 0:t.from)??"quick open"});try{(o=e.args)!=null&&o.length?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(r){el(r)||this.dialogService.error(p("canNotRun","Command '{0}' resulted in an error",e.label),VP(r))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:i}){let s=e;return t&&t!==e&&(s+=` - ${t}`),i&&i.value!==e&&(s+=` - ${i.value===i.original?i.value:`${i.value} (${i.original})`}`),s}},Jm=Fd,Fd.PREFIX=">",Fd.TFIDF_THRESHOLD=.5,Fd.TFIDF_MAX_RESULTS=5,Fd.WORD_FILTER=Jz(nk,n2e,lue),Fd);y6=Jm=t_e([Mf(1,ke),Mf(2,Ft),Mf(3,oi),Mf(4,Ps),Mf(5,OL)],y6);var bc;let S6=(bc=class extends U{constructor(e,t,i){super(),this.storageService=e,this.configurationService=t,this.logService=i,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===uk.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=vn.getConfiguredCommandHistoryLength(this.configurationService),vn.cache&&vn.cache.limit!==this.configuredCommandsHistoryLength&&(vn.cache.limit=this.configuredCommandsHistoryLength,vn.hasChanges=!0))}load(){const e=this.storageService.get(vn.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch(s){this.logService.error(`[CommandsHistory] invalid data: ${s}`)}const i=vn.cache=new lu(this.configuredCommandsHistoryLength,1);if(t){let s;t.usesLRU?s=t.entries:s=t.entries.sort((o,r)=>o.value-r.value),s.forEach(o=>i.set(o.key,o.value))}vn.counter=this.storageService.getNumber(vn.PREF_KEY_COUNTER,0,vn.counter)}push(e){vn.cache&&(vn.cache.set(e,vn.counter++),vn.hasChanges=!0)}peek(e){var t;return(t=vn.cache)==null?void 0:t.peek(e)}saveState(){if(!vn.cache||!vn.hasChanges)return;const e={usesLRU:!0,entries:[]};vn.cache.forEach((t,i)=>e.entries.push({key:i,value:t})),this.storageService.store(vn.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(vn.PREF_KEY_COUNTER,vn.counter,0,0),vn.hasChanges=!1}static getConfiguredCommandHistoryLength(e){var s,o;const i=(o=(s=e.getValue().workbench)==null?void 0:s.commandPalette)==null?void 0:o.history;return typeof i=="number"?i:vn.DEFAULT_COMMANDS_HISTORY_LENGTH}},vn=bc,bc.DEFAULT_COMMANDS_HISTORY_LENGTH=50,bc.PREF_KEY_CACHE="commandPalette.mru.cache",bc.PREF_KEY_COUNTER="commandPalette.mru.counter",bc.counter=1,bc.hasChanges=!1,bc);S6=vn=t_e([Mf(0,jl),Mf(1,nt),Mf(2,ws)],S6);class zXe extends y6{constructor(e,t,i,s,o,r){super(e,t,i,s,o,r)}getCodeEditorCommandPicks(){var i;const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const s of e.getSupportedActions()){let o;(i=s.metadata)!=null&&i.description&&(tOe(s.metadata.description)?o=s.metadata.description:o={original:s.metadata.description,value:s.metadata.description}),t.push({commandId:s.id,commandAlias:s.alias,commandDescription:o,label:oU(s.label)||s.id})}return t}}var UXe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Iv=function(n,e){return function(t,i){e(t,i,n)}};let dL=class extends zXe{get activeTextEditorControl(){return this.codeEditorService.getFocusedCodeEditor()??void 0}constructor(e,t,i,s,o,r){super({showAlias:!1},e,i,s,o,r),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};dL=UXe([Iv(0,ke),Iv(1,kt),Iv(2,Ft),Iv(3,oi),Iv(4,Ps),Iv(5,OL)],dL);const bR=class bR extends _e{constructor(){super({id:bR.ID,label:IT.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(il).quickAccess.show(dL.PREFIX)}};bR.ID="editor.action.quickCommand";let FM=bR;se(FM);Mi.as($b.Quickaccess).registerQuickAccessProvider({ctor:dL,prefix:dL.PREFIX,helpEntries:[{description:IT.quickCommandHelp,commandId:FM.ID}]});var $Xe=function(n,e,t,i){var s=arguments.length,o=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(r=n[a])&&(o=(s<3?r(o):s>3?r(e,t,o):r(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Tv=function(n,e){return function(t,i){e(t,i,n)}};let x6=class extends Nb{constructor(e,t,i,s,o,r,a){super(!0,e,t,i,s,o,r,a)}};x6=$Xe([Tv(1,Ae),Tv(2,kt),Tv(3,rn),Tv(4,ke),Tv(5,jl),Tv(6,nt)],x6);wt(Nb.ID,x6,4);class qXe extends _e{constructor(){super({id:"editor.action.toggleHighContrast",label:DH.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const i=e.get(wa),s=i.getColorTheme();Ec(s.type)?(i.setTheme(this._originalThemeName||(cy(s.type)?dC:Ku)),this._originalThemeName=null):(i.setTheme(cy(s.type)?Gp:Yp),this._originalThemeName=s.themeName)}}se(qXe);function one({value:n,onChange:e,language:t,height:i="400px",theme:s="vs-dark"}){const o=P.useRef(null),r=P.useRef(null);return P.useEffect(()=>(o.current&&!r.current&&(KN.defineTheme("MsoSTEM-dark",{base:"vs-dark",inherit:!0,rules:[{token:"tag",foreground:"a78bfa"},{token:"attribute.name",foreground:"60a5fa"},{token:"attribute.value",foreground:"34d399"},{token:"string",foreground:"34d399"},{token:"keyword",foreground:"ec4899"},{token:"comment",foreground:"6b7280"}],colors:{"editor.background":"#1f2937","editor.foreground":"#e5e7eb","editorLineNumber.foreground":"#6b7280","editorCursor.foreground":"#8b5cf6","editor.selectionBackground":"#374151","editor.lineHighlightBackground":"#374151"}}),r.current=KN.create(o.current,{value:n,language:t,theme:s==="vs-dark"?"MsoSTEM-dark":"vs-light",automaticLayout:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,lineNumbers:"on",roundedSelection:!1,scrollbar:{vertical:"visible",horizontal:"visible",useShadows:!1,verticalHasArrows:!1,horizontalHasArrows:!1},overviewRulerLanes:0,hideCursorInOverviewRuler:!0,overviewRulerBorder:!1,wordWrap:"on",tabSize:2,insertSpaces:!0}),r.current.onDidChangeModelContent(()=>{var l;const a=((l=r.current)==null?void 0:l.getValue())||"";e(a)})),()=>{r.current&&(r.current.dispose(),r.current=null)}),[]),P.useEffect(()=>{r.current&&r.current.getValue()!==n&&r.current.setValue(n)},[n]),P.useEffect(()=>{if(r.current){const a=r.current.getModel();a&&KN.setModelLanguage(a,t)}},[t]),C.jsx("div",{ref:o,style:{height:i},className:"border border-gray-300 rounded-lg overflow-hidden"})}var R5="rovingFocusGroup.onEntryFocus",KXe={bubbles:!1,cancelable:!0},OO="RovingFocusGroup",[k6,i_e,GXe]=NV(OO),[YXe,n_e]=Fb(OO,[GXe]),[ZXe,QXe]=YXe(OO),s_e=P.forwardRef((n,e)=>C.jsx(k6.Provider,{scope:n.__scopeRovingFocusGroup,children:C.jsx(k6.Slot,{scope:n.__scopeRovingFocusGroup,children:C.jsx(XXe,{...n,ref:e})})}));s_e.displayName=OO;var XXe=P.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:s=!1,dir:o,currentTabStopId:r,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=n,h=P.useRef(null),f=Hn(e,h),g=qV(o),[m=null,_]=Lx({prop:r,defaultProp:a,onChange:l}),[b,v]=P.useState(!1),w=da(c),y=i_e(t),S=P.useRef(!1),[x,k]=P.useState(0);return P.useEffect(()=>{const D=h.current;if(D)return D.addEventListener(R5,w),()=>D.removeEventListener(R5,w)},[w]),C.jsx(ZXe,{scope:t,orientation:i,dir:g,loop:s,currentTabStopId:m,onItemFocus:P.useCallback(D=>_(D),[_]),onItemShiftTab:P.useCallback(()=>v(!0),[]),onFocusableItemAdd:P.useCallback(()=>k(D=>D+1),[]),onFocusableItemRemove:P.useCallback(()=>k(D=>D-1),[]),children:C.jsx(Ci.div,{tabIndex:b||x===0?-1:0,"data-orientation":i,...u,ref:f,style:{outline:"none",...n.style},onMouseDown:At(n.onMouseDown,()=>{S.current=!0}),onFocus:At(n.onFocus,D=>{const N=!S.current;if(D.target===D.currentTarget&&N&&!b){const R=new CustomEvent(R5,KXe);if(D.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=y().filter(Z=>Z.focusable),B=O.find(Z=>Z.active),z=O.find(Z=>Z.id===m),K=[B,z,...O].filter(Boolean).map(Z=>Z.ref.current);a_e(K,d)}}S.current=!1}),onBlur:At(n.onBlur,()=>v(!1))})})}),o_e="RovingFocusGroupItem",r_e=P.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:s=!1,tabStopId:o,...r}=n,a=SL(),l=o||a,c=QXe(o_e,t),d=c.currentTabStopId===l,u=i_e(t),{onFocusableItemAdd:h,onFocusableItemRemove:f}=c;return P.useEffect(()=>{if(i)return h(),()=>f()},[i,h,f]),C.jsx(k6.ItemSlot,{scope:t,id:l,focusable:i,active:s,children:C.jsx(Ci.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...r,ref:e,onMouseDown:At(n.onMouseDown,g=>{i?c.onItemFocus(l):g.preventDefault()}),onFocus:At(n.onFocus,()=>c.onItemFocus(l)),onKeyDown:At(n.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const m=tJe(g,c.orientation,c.dir);if(m!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=u().filter(v=>v.focusable).map(v=>v.ref.current);if(m==="last")b.reverse();else if(m==="prev"||m==="next"){m==="prev"&&b.reverse();const v=b.indexOf(g.currentTarget);b=c.loop?iJe(b,v+1):b.slice(v+1)}setTimeout(()=>a_e(b))}})})})});r_e.displayName=o_e;var JXe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function eJe(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function tJe(n,e,t){const i=eJe(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return JXe[i]}function a_e(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function iJe(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var nJe=s_e,sJe=r_e,Mq="Tabs",[oJe,ont]=Fb(Mq,[n_e]),l_e=n_e(),[rJe,Rq]=oJe(Mq),c_e=P.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,onValueChange:s,defaultValue:o,orientation:r="horizontal",dir:a,activationMode:l="automatic",...c}=n,d=qV(a),[u,h]=Lx({prop:i,onChange:s,defaultProp:o});return C.jsx(rJe,{scope:t,baseId:SL(),value:u,onValueChange:h,orientation:r,dir:d,activationMode:l,children:C.jsx(Ci.div,{dir:d,"data-orientation":r,...c,ref:e})})});c_e.displayName=Mq;var d_e="TabsList",u_e=P.forwardRef((n,e)=>{const{__scopeTabs:t,loop:i=!0,...s}=n,o=Rq(d_e,t),r=l_e(t);return C.jsx(nJe,{asChild:!0,...r,orientation:o.orientation,dir:o.dir,loop:i,children:C.jsx(Ci.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});u_e.displayName=d_e;var h_e="TabsTrigger",f_e=P.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,disabled:s=!1,...o}=n,r=Rq(h_e,t),a=l_e(t),l=p_e(r.baseId,i),c=__e(r.baseId,i),d=i===r.value;return C.jsx(sJe,{asChild:!0,...a,focusable:!s,active:d,children:C.jsx(Ci.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...o,ref:e,onMouseDown:At(n.onMouseDown,u=>{!s&&u.button===0&&u.ctrlKey===!1?r.onValueChange(i):u.preventDefault()}),onKeyDown:At(n.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&r.onValueChange(i)}),onFocus:At(n.onFocus,()=>{const u=r.activationMode!=="manual";!d&&!s&&u&&r.onValueChange(i)})})})});f_e.displayName=h_e;var g_e="TabsContent",m_e=P.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,forceMount:s,children:o,...r}=n,a=Rq(g_e,t),l=p_e(a.baseId,i),c=__e(a.baseId,i),d=i===a.value,u=P.useRef(d);return P.useEffect(()=>{const h=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(h)},[]),C.jsx(FR,{present:s||d,children:({present:h})=>C.jsx(Ci.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...r,ref:e,style:{...n.style,animationDuration:u.current?"0s":void 0},children:h&&o})})});m_e.displayName=g_e;function p_e(n,e){return`${n}-trigger-${e}`}function __e(n,e){return`${n}-content-${e}`}var aJe=c_e,b_e=u_e,v_e=f_e,w_e=m_e;const lJe=aJe,C_e=P.forwardRef(({className:n,...e},t)=>C.jsx(b_e,{ref:t,className:Ji("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));C_e.displayName=b_e.displayName;const U0=P.forwardRef(({className:n,...e},t)=>C.jsx(v_e,{ref:t,className:Ji("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));U0.displayName=v_e.displayName;const $0=P.forwardRef(({className:n,...e},t)=>C.jsx(w_e,{ref:t,className:Ji("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));$0.displayName=w_e.displayName;function cJe(){const{toast:n}=EV(),{t:e}=ou(),[t,i]=P.useState(`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Project</title>
</head>
<body>
    <div class="container">
        <h1>Welcome to MsoSTEM!</h1>
        <p>Start building amazing websites with HTML and CSS.</p>
        <button class="btn">Get Started</button>
    </div>
</body>
</html>`),[s,o]=P.useState(`body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 20px;
    background: linear-gradient(135deg, #8B5CF6, #EC4899);
    color: white;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

.container {
    text-align: center;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 40px;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

h1 {
    font-size: 2.5rem;
    margin-bottom: 20px;
    font-weight: 700;
}

p {
    font-size: 1.2rem;
    margin-bottom: 30px;
    opacity: 0.9;
}

.btn {
    background: white;
    color: #8B5CF6;
    border: none;
    padding: 15px 30px;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
}`),[r,a]=P.useState("My Amazing Project"),l=()=>{i(`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Project</title>
</head>
<body>
    <h1>Hello World!</h1>
    <p>Start coding here...</p>
</body>
</html>`),o(`body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f0f0f0;
}

h1 {
    color: #333;
    text-align: center;
}

p {
    color: #666;
    text-align: center;
}`)},c=()=>{const u=`${r.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.html`,h=new Blob([d],{type:"text/html"}),f=URL.createObjectURL(h),g=document.createElement("a");g.href=f,g.download=u,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(f),n({title:"File Downloaded!",description:`Your project has been saved as ${u}`})},d=`
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>${r}</title>
        <style>
            ${s}
        </style>
    </head>
    <body>
        ${t.replace(/<!DOCTYPE html>[\s\S]*?<body[^>]*>/,"").replace(/<\/body>[\s\S]*<\/html>/,"")}
    </body>
    </html>
  `;return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsx(hh,{}),C.jsx("div",{className:"pt-24 pb-20",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:[e.playground.title.replace(e.playground.titleHighlight,"")," ",C.jsx("span",{className:"gradient-text",children:e.playground.titleHighlight})]}),C.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:e.playground.description})]}),C.jsx(Yt,{className:"mb-6",children:C.jsx(Pv,{children:C.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[C.jsx("div",{className:"flex items-center gap-4",children:C.jsx($V,{value:r,onChange:u=>a(u.target.value),className:"text-lg font-semibold",placeholder:e.playground.projectTitle})}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsxs(Mn,{onClick:l,variant:"outline",size:"sm",children:[C.jsx(mye,{className:"w-4 h-4 mr-2"}),e.playground.reset]}),C.jsxs(Mn,{onClick:c,variant:"outline",size:"sm","data-testid":"button-save",children:[C.jsx(Ore,{className:"w-4 h-4 mr-2"}),e.playground.save]})]})]})})}),C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[C.jsxs("div",{className:"space-y-6",children:[C.jsxs(Yt,{children:[C.jsx(Pv,{children:C.jsxs(b0,{className:"flex items-center",children:[C.jsx("i",{className:"fab fa-html5 mr-2 text-orange-500"}),e.playground.htmlTab]})}),C.jsx(ei,{children:C.jsx(one,{value:t,onChange:i,language:"html",height:"300px"})})]}),C.jsxs(Yt,{children:[C.jsx(Pv,{children:C.jsxs(b0,{className:"flex items-center",children:[C.jsx("i",{className:"fab fa-css3 mr-2 text-blue-500"}),e.playground.cssTab]})}),C.jsx(ei,{children:C.jsx(one,{value:s,onChange:o,language:"css",height:"300px"})})]})]}),C.jsx("div",{children:C.jsxs(Yt,{className:"h-full",children:[C.jsx(Pv,{children:C.jsxs(b0,{className:"flex items-center",children:[C.jsx(nb,{className:"w-5 h-5 mr-2 text-success"}),e.playground.previewTab]})}),C.jsx(ei,{className:"p-0",children:C.jsx("div",{className:"bg-white border-t",children:C.jsx("iframe",{srcDoc:d,className:"w-full h-[650px] border-0",title:"Live Preview",sandbox:"allow-scripts"})})})]})})]}),C.jsxs(Yt,{className:"mt-8",children:[C.jsx(Pv,{children:C.jsx(b0,{children:e.playground.tryExamples})}),C.jsx(ei,{children:C.jsxs(lJe,{defaultValue:"button",className:"w-full",children:[C.jsxs(C_e,{className:"grid w-full grid-cols-4",children:[C.jsx(U0,{value:"button",children:e.playground.button}),C.jsx(U0,{value:"card",children:e.playground.card}),C.jsx(U0,{value:"navbar",children:e.playground.navbar}),C.jsx(U0,{value:"gradient",children:e.playground.gradient})]}),C.jsx($0,{value:"button",className:"mt-4",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-2",children:"HTML"}),C.jsx("pre",{className:"bg-gray-800 text-gray-300 p-4 rounded-lg text-sm overflow-x-auto",children:`<button class="btn-primary">
  Click Me!
</button>`})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-2",children:"CSS"}),C.jsx("pre",{className:"bg-gray-800 text-gray-300 p-4 rounded-lg text-sm overflow-x-auto",children:`.btn-primary {
  background: #8B5CF6;
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
}

.btn-primary:hover {
  background: #7C3AED;
  transform: translateY(-2px);
}`})]})]})}),C.jsx($0,{value:"card",className:"mt-4",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-2",children:"HTML"}),C.jsx("pre",{className:"bg-gray-800 text-gray-300 p-4 rounded-lg text-sm overflow-x-auto",children:`<div class="card">
  <h3>Card Title</h3>
  <p>Card description goes here.</p>
</div>`})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-2",children:"CSS"}),C.jsx("pre",{className:"bg-gray-800 text-gray-300 p-4 rounded-lg text-sm overflow-x-auto",children:`.card {
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  border: 1px solid #e5e7eb;
  transition: transform 0.3s;
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}`})]})]})}),C.jsx($0,{value:"navbar",className:"mt-4",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-2",children:"HTML"}),C.jsx("pre",{className:"bg-gray-800 text-gray-300 p-4 rounded-lg text-sm overflow-x-auto",children:`<nav class="navbar">
  <div class="nav-brand">MsoSTEM</div>
  <div class="nav-links">
    <a href="#home">Home</a>
    <a href="#about">About</a>
    <a href="#contact">Contact</a>
  </div>
</nav>`})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-2",children:"CSS"}),C.jsx("pre",{className:"bg-gray-800 text-gray-300 p-4 rounded-lg text-sm overflow-x-auto",children:`.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.nav-brand {
  font-size: 1.5rem;
  font-weight: bold;
  color: #8B5CF6;
}

.nav-links a {
  margin: 0 1rem;
  text-decoration: none;
  color: #374151;
  transition: color 0.3s;
}

.nav-links a:hover {
  color: #8B5CF6;
}`})]})]})}),C.jsx($0,{value:"gradient",className:"mt-4",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-2",children:"HTML"}),C.jsx("pre",{className:"bg-gray-800 text-gray-300 p-4 rounded-lg text-sm overflow-x-auto",children:`<div class="gradient-box">
  <h2>Beautiful Gradient</h2>
  <p>Gradients make everything better!</p>
</div>`})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-2",children:"CSS"}),C.jsx("pre",{className:"bg-gray-800 text-gray-300 p-4 rounded-lg text-sm overflow-x-auto",children:`.gradient-box {
  background: linear-gradient(135deg, #8B5CF6, #EC4899);
  color: white;
  padding: 40px;
  border-radius: 20px;
  text-align: center;
  box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
}

.gradient-box h2 {
  margin: 0 0 16px 0;
  font-size: 2rem;
}

.gradient-box p {
  margin: 0;
  opacity: 0.9;
}`})]})]})})]})})]})]})}),C.jsx(kL,{})]})}function dJe(){return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsx(hh,{}),C.jsx("div",{className:"pt-20 pb-16",children:C.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h1",{className:"text-5xl md:text-6xl font-bold bg-gradient-to-r from-primary via-purple-500 to-secondary bg-clip-text text-transparent mb-6",children:"About MsoSTEM"}),C.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Empowering young women to break barriers in technology through interactive learning and scholarship opportunities."})]}),C.jsx(Yt,{className:"mb-16 bg-gradient-to-r from-primary/10 to-secondary/10 border-none shadow-lg",children:C.jsxs(ei,{className:"p-8",children:[C.jsxs("div",{className:"flex items-center mb-6",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-lg flex items-center justify-center mr-4",children:C.jsx(pye,{className:"w-6 h-6 text-white"})}),C.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Our Mission"})]}),C.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"MsoSTEM exists to bridge the gender gap in technology by providing an accessible, engaging platform where girls and young women can learn programming fundamentals and discover scholarship opportunities. We believe that every girl deserves the chance to explore her potential in STEM fields, regardless of her background or current experience level."})]})}),C.jsxs("div",{className:"mb-16",children:[C.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 mb-12",children:"What We Do"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[C.jsx(Yt,{className:"bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:C.jsxs(ei,{className:"p-6",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center mb-4",children:C.jsx(ib,{className:"w-6 h-6 text-white"})}),C.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Interactive Coding Courses"}),C.jsx("p",{className:"text-gray-600",children:"Learn HTML, CSS, and web development through hands-on lessons designed specifically for beginners. Our courses break down complex concepts into easy-to-understand steps."})]})}),C.jsx(Yt,{className:"bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:C.jsxs(ei,{className:"p-6",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg flex items-center justify-center mb-4",children:C.jsx(lZ,{className:"w-6 h-6 text-white"})}),C.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Code Playground"}),C.jsx("p",{className:"text-gray-600",children:"Practice your skills in our interactive code editor. Experiment with HTML and CSS, see your changes in real-time, and build confidence through hands-on experience."})]})}),C.jsx(Yt,{className:"bg-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:C.jsxs(ei,{className:"p-6",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center mb-4",children:C.jsx(aZ,{className:"w-6 h-6 text-white"})}),C.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Scholarship Discovery"}),C.jsx("p",{className:"text-gray-600",children:"Discover scholarships and funding opportunities specifically for women in STEM. We curate programs that support girls pursuing technology and programming education."})]})})]})]}),C.jsx(Yt,{className:"mb-16 bg-white shadow-lg",children:C.jsxs(ei,{className:"p-8",children:[C.jsxs("div",{className:"flex items-center mb-6",children:[C.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-500 to-purple-500 rounded-lg flex items-center justify-center mr-4",children:C.jsx(uye,{className:"w-6 h-6 text-white"})}),C.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Why It Matters"})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[C.jsxs("div",{children:[C.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Despite making up half the population, women remain significantly underrepresented in technology fields. This gap often begins early, with girls being discouraged from pursuing STEM subjects or lacking access to supportive learning environments."}),C.jsx("p",{className:"text-gray-700 leading-relaxed",children:"MsoSTEM addresses this challenge by creating a welcoming space where girls can explore programming without intimidation, build confidence through achievable goals, and connect with opportunities that support their educational journey."})]}),C.jsxs("div",{children:[C.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:"Financial barriers shouldn't prevent talented young women from pursuing their dreams in technology. That's why we focus on connecting our learners with scholarships and grants that can help fund their education and remove economic obstacles."}),C.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Every girl who learns to code through MsoSTEM becomes part of a growing movement to diversify the tech industry and create more inclusive, innovative solutions for the world."})]})]})]})}),C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-8",children:"Our Impact"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[C.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[C.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:C.jsx(Wre,{className:"w-8 h-8 text-white"})}),C.jsx("h3",{className:"text-3xl font-bold text-primary mb-2",children:"Growing Community"}),C.jsx("p",{className:"text-gray-600",children:"Building a supportive network of young women learning to code and pursuing STEM careers"})]}),C.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[C.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:C.jsx(lZ,{className:"w-8 h-8 text-white"})}),C.jsx("h3",{className:"text-3xl font-bold text-green-600 mb-2",children:"Free Education"}),C.jsx("p",{className:"text-gray-600",children:"Providing completely free programming courses accessible to anyone with an internet connection"})]}),C.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[C.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:C.jsx(aZ,{className:"w-8 h-8 text-white"})}),C.jsx("h3",{className:"text-3xl font-bold text-purple-600 mb-2",children:"Opportunities"}),C.jsx("p",{className:"text-gray-600",children:"Connecting learners with scholarships and funding opportunities to continue their education"})]})]})]}),C.jsx(Yt,{className:"bg-gradient-to-r from-primary to-secondary text-white",children:C.jsxs(ei,{className:"p-8 text-center",children:[C.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Join the Movement"}),C.jsx("p",{className:"text-xl mb-6 opacity-90",children:"Whether you're just starting your coding journey or looking for your next opportunity, MsoSTEM is here to support you every step of the way."}),C.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[C.jsx("a",{href:"/courses",className:"bg-white text-primary px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"Start Learning"}),C.jsx("a",{href:"/scholarships",className:"bg-transparent border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-primary transition-colors",children:"Find Scholarships"})]})]})})]})}),C.jsx(kL,{})]})}function uJe(){return C.jsxs(xwe,{children:[C.jsx(_u,{path:"/",component:A0e}),C.jsx(_u,{path:"/courses",component:W0e}),C.jsx(_u,{path:"/courses/:id",children:n=>C.jsx(kwe,{to:`/course/${n.id}`})}),C.jsx(_u,{path:"/course/:id",component:X0e}),C.jsx(_u,{path:"/scholarships",component:Dxe}),C.jsx(_u,{path:"/scholarships/:id",component:Nxe}),C.jsx(_u,{path:"/playground",component:cJe}),C.jsx(_u,{path:"/about",component:dJe}),C.jsx(_u,{component:P0e})]})}function hJe(){return C.jsx(qwe,{client:aCe,children:C.jsx(N0e,{children:C.jsxs(L0e,{children:[C.jsx(Jye,{}),C.jsx(uJe,{})]})})})}function fJe(n){return new Worker("/msostem/assets/editor.worker-oRlJJsnX.js",{name:n==null?void 0:n.name})}function gJe(n){return new Worker("/msostem/assets/json.worker-CPn_BmvY.js",{name:n==null?void 0:n.name})}function mJe(n){return new Worker("/msostem/assets/css.worker-DGFkc2qH.js",{name:n==null?void 0:n.name})}function pJe(n){return new Worker("/msostem/assets/html.worker-CltiozTZ.js",{name:n==null?void 0:n.name})}function _Je(n){return new Worker("/msostem/assets/ts.worker-CGiXAPLT.js",{name:n==null?void 0:n.name})}self.MonacoEnvironment={getWorker(n,e){return e==="json"?new gJe:e==="css"||e==="scss"||e==="less"?new mJe:e==="html"||e==="handlebars"||e==="razor"?new pJe:e==="typescript"||e==="javascript"?new _Je:new fJe}};Moe(document.getElementById("root")).render(C.jsx(hJe,{}));export{iD as m,kge as t};
